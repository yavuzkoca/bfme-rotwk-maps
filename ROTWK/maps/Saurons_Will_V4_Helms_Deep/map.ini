;ini by aelvenwarrior 


FXParticleSystem AragornSwordglow
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXFire03.tga  
;this determines what your fx will look like so use textures.big to pick one that is suitable-you will have to keep testing
;to get the right one
    Lifetime = 10 10
;determines how long the particle lasts-in a power determines a flash of fx or a long fx
    SortLevel = 1
    Size = 2 3
;how big each particle fx will be, different sizes for different things
    BurstCount = 2 2
    InitialDelay = 1 1
    IsParticleUpTowardsEmitter = Yes
  End
  Color = DefaultColor
    Color1 = R:0 G:25 B:100 5
;this is obvious-determines the colour of your fx
  End
  Update = DefaultUpdate
    SizeRate = 0.05 0.05
    SizeRateDamping = 1 1
    AngleZ = -7 7
    AngularDamping = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
    Gravity = 0.001
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = LineEmissionVolume
    StartPoint = X:0 Y:0 Z:25
    EndPoint = X:0 Y:0 Z:1
  End
  Draw = DefaultDraw
  End
End


FXParticleSystem AragornAthelas
  System
    Priority = VERY_LOW_OR_ABOVE
    ParticleName = EXEclipseBlur.tga
    Lifetime = 30 30
    SystemLifetime = 30
    SortLevel = 1
    BurstCount = 1 1
    IsEmitAboveGroundOnly = Yes
  End
  Color = DefaultColor
    Color2 = R:10 G:0 B:250 15
    Color3 = R:0 G:0 B:0 30
    ColorScale = -25 25
  End
  Alpha = DefaultAlpha
    Alpha1 = 1 1 0
  End
  Update = DefaultUpdate
    SizeRate = 5 6
    SizeRateDamping = 0.85 0.9
    AngleZ = -7 7
    AngularRateZ = -0.2 0.2
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
  End
  EmissionVelocity = OutwardEmissionVelocity
  End
  EmissionVolume = SphereEmissionVolume
    IsHollow = Yes
    Radius = 10
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem BladeMaster
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXRing01.tga
    Lifetime = 15 15
    SortLevel = 1
    Size = 10 15
    BurstCount = 1 1
  End
  Color = DefaultColor
    Color2 = R:0 G:0 B:50 5
    Color3 = R:0 G:0 B:0 15
    Color4 = R:32 G:32 B:32 0
  End
  Update = DefaultUpdate
    SizeRate = 1 1
    SizeRateDamping = 1 1
    AngleZ = 0 7
    AngularRateZ = -0.1 0.1
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    Gravity = -0.01
    VelocityDamping = 1 1
  End
  EmissionVelocity = OutwardEmissionVelocity
  End
  EmissionVolume = SphereEmissionVolume
    Radius = 10
  End
  Draw = DefaultDraw
  End
End


CommandButton Command_IsengardWizardsTowerLightningStrike
  Command                 = SPECIAL_POWER 
  SpecialPower            = SpecialAbilityLightningStrike
  Options                 = NEED_TARGET_POS CONTEXTMODE_COMMAND
  TextLabel               = CONTROLBAR:ThunderBolt
  ButtonImage             = HSSarumanThunderbolt
  RadiusCursorType        = ThunderBoltRadiusCursor
  InvalidCursorName       = GenericInvalid
  ButtonBorderType        = ACTION 
  DescriptLabel           = CONTROLBAR:ToolTipThunderBolt
  AutoAbility			  = Yes
  InPalantir			  = Yes
End


CommandButton Command_DrogothIncinerate
	Command                 = SPECIAL_POWER 
	SpecialPower            = SpecialAbilityDrogothIncinerate
	Options                 = NEED_TARGET_POS CONTEXTMODE_COMMAND
	TextLabel               = CONTROLBAR:KABOOOM
	ButtonImage             = HSGandalfIstariLight
	ButtonBorderType        = ACTION
	RadiusCursorType        = FireBreathRadiusCursor
	DescriptLabel           = CONTROLBAR:Position_to_blow_that_area_to_smithereens
	InPalantir				= Yes
End


CommandButton Command_SpecialAbilityWildMountainGiantStomp
  Command                 = SPECIAL_POWER 
  SpecialPower            = SpecialAbilityWildMountainGiantStomp
  Options                 = OK_FOR_MULTI_SELECT OK_FOR_MULTI_EXECUTE
  TextLabel               = CONTROLBAR:Flood
  ButtonImage             = SBGood_Flood
  ButtonBorderType        = ACTION 
  DescriptLabel           = CONTROLBAR:Unleash_Your_Inner_Flood!!
  AutoAbility			  = Yes
  PresetRange			  = #MULTIPLY( WILD_MOUNTAIN_GIANT_STOMP_RADIUS 0.5 )
  InPalantir			  = Yes
End




Object MordorMountainTroll
DisplayName = Troll_of_Doom

      

AddModule
	Behavior = FireWeaponWhenDeadBehavior ModuleTag_DIELIKETHIS
    	StartsActive = Yes
    	DeathWeapon = SarumanFireball
  End
  End
End



PlayerTemplate FactionMen
StartingUnit1 = NONE
StartingUnit0 = NONE
StartingBuilding = NONE
End

PlayerTemplate FactionElves
StartingUnit1 = NONE
StartingUnit0 = NONE
StartingBuilding = NONE
End

PlayerTemplate FactionDwarves
StartingUnit1 = NONE
StartingUnit0 = NONE
StartingBuilding = NONE
End

PlayerTemplate FactionIsengard
StartingUnit1 = NONE
StartingUnit0 = NONE
StartingBuilding = NONE
End

PlayerTemplate FactionMordor
StartingUnit1 = NONE
StartingUnit0 = NONE
StartingBuilding = NONE
End

PlayerTemplate FactionWild
StartingUnit1 = NONE
StartingUnit0 = NONE
StartingBuilding = NONE
End

PlayerTemplate FactionAngmar
StartingUnit1 = NONE
StartingUnit0 = NONE
StartingBuilding = NONE
End


CommandSet NewArvelegCommandSet
	1	= Command_SpecialAbilityAthelas
	2	= Command_ArnorArvelegKABOOM
        3	= Command_SpecialAbilityBladeMaster
        8  	= Command_RohanGimliLeap
        5	= Command_DrogothFireflight
        4       = Command_CreateAHero_Bombard_Level1
        6  	= Command_SpecialAbilitySlayer
        7	= Command_RohanEomerSpear
	12 	= Command_CaptureBuilding
	13 	= Command_AttackMove
	14 	= Command_Stop
	16  	= Command_SetStanceBattle
	17  	= Command_SetStanceAggressive
	18  	= Command_SetStanceHoldGround
End

CommandSet NewArgelebCommandSet
	1 	= Command_SpecialAbilityHornOfGondor
        8  	= Command_RohanGimliLeap
        2       = Command_FireDrakeInferno 
        3	= Command_SpecialAbilityBladeMaster
        4       = Command_CreateAHeroFireBomb_Level2
        5	= Command_DrogothFireflight
        6  	= Command_SpecialAbilitySlayer
        7	= Command_RohanEomerSpear	
	12 	= Command_CaptureBuilding
	13 	= Command_AttackMove
	14 	= Command_Stop
	16  	= Command_SetStanceBattle
	17  	= Command_SetStanceAggressive
	18  	= Command_SetStanceHoldGround
End

CommandSet NewGamlingCommandSet
        1	= Command_SpecialAbilityHornOfGondor
	2  	= Command_RohanGimliLeap
        3	= Command_SpecialAbilityBladeMaster
        5 	= Command_EowynShieldMaiden
        8       = Command_CreateAHeroFireBomb_Level2
        4	= Command_ArwenFlood
	6  	= Command_SpecialAbilitySlayer
        7	= Command_RohanEomerSpear
        12 	= Command_CaptureBuilding
	13	= Command_AttackMove
	14	= Command_Stop
End


CommandSet NewArveduiCommandSet
	1	= Command_SpecialAbilityAthelas
	2	= Command_SpecialAbilityBladeMaster
	4  	= Command_GondorGandalfLightningSword
        3       = Command_CreateAHero_Bombard_Level1
	5  	= Command_SpecialAbilitySlayer
	6  	= Command_SpecialAbilityWordOfPower
        7	= Command_RohanEomerSpear
        8  	= Command_RohanGimliLeap
	12 	= Command_CaptureBuilding
	13 	= Command_AttackMove
	14 	= Command_Stop
	16  = Command_SetStanceBattle
	17  = Command_SetStanceAggressive
	18  = Command_SetStanceHoldGround
End

CommandSet NewHaldirCommandSet
	
        1  	= Command_SpecialAbilityWizardBlast
        2  	= Command_SpecialAbilitySlayer
        3	= Command_SpecialAbilityWildMountainGiantStomp	
	4       = Command_DrogothIncinerate
        5	= Command_FiresOfDoom
        6  	= Command_SpecialAbilityWordOfPower
        7	= Command_RohanEomerSpear
        8  	= Command_RohanGimliLeap
	12	= Command_CaptureBuilding
 	13	= Command_AttackMove
	14	= Command_Stop
	16  = Command_SetStanceBattle
	17  = Command_SetStanceAggressive
	18  = Command_SetStanceHoldGround

End

CommandSet NewTomBombadilCommandSet
	1	= Command_SpecialAbilitySonicSong
        2  	= Command_RohanGimliLeap
        3	= Command_ArwenFlood
        4       = Command_DrogothIncinerate
        5       = Command_SpecialAbilitySlayer
        6	= Command_FiresOfDoom
	13	= Command_AttackMove
	14	= Command_Stop
	16  	= Command_SetStanceBattle
	17  	= Command_SetStanceAggressive
	18  	= Command_SetStanceHoldGround
End

CommandSet NewGlorfindelCommandSet
	1	= Command_RohanEomerSpear
	2  	= Command_RohanGimliLeap
	3 	= Command_SpecialAbilityGlorfindelBladeOfPurity
	4	= Command_SpecialAbilityWildMountainGiantStomp	
        5       = Command_SpecialAbilitySlayer
	6 	= Command_GondorGandalfLightningSword
	12 	= Command_CaptureBuilding
	13 	= Command_AttackMove
	14 	= Command_Stop
	16  = Command_SetStanceBattle
	17  = Command_SetStanceAggressive
	18  = Command_SetStanceHoldGround
End


CommandSet NewLegolasCommandSet
	1  	= Command_LegolasHawkStrike
	2	= Command_SpecialAbilityWildMountainGiantStomp
        3       = Command_DrogothIncinerate	
        4       = Command_CreateAHero_BallLightning_L3
	5  	= Command_SpecialAbilityArrowStorm
        6  	= Command_SpecialAbilityWordOfPower
	12 	= Command_CaptureBuilding
	13 	= Command_AttackMove
	14 	= Command_Stop
End

Object ArnorArveleg

CommandSet = NewArvelegCommandSet

AddModule ModuleTag_GandalfHealing
  Behavior = AutoHealBehavior ModuleTag_GandalfHealing
		StartsActive = Yes
		HealingAmount = HERO_HEAL_AMOUNT
		HealingDelay = 1000
		StartHealingDelay = HERO_HEAL_DELAY
		HealOnlyIfNotInCombat = Yes
	End
        End

AddModule ModuleTag_CreateAHeroBombard_Level1
  Behavior = UnpauseSpecialPowerUpgrade ModuleTag_CreateAHeroBombard_Level1
	SpecialPowerTemplate = SpecialAbilityCreateAHeroBombard_Level1
	TriggeredBy = Upgrade_CreateAHeroBombard_Level1
  End
  End

AddModule ModuleTag_CreateAHeroBombardStarter_Level1
  Behavior = SpecialPowerModule ModuleTag_CreateAHeroBombardStarter_Level1
	SpecialPowerTemplate		= SpecialAbilityCreateAHeroBombard_Level1
	UpdateModuleStartsAttack	= Yes
	StartsPaused			= Yes
  End
  End

AddModule ModuleTag_CreateAHeroBombardUpdate_Level1
  Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_CreateAHeroBombardUpdate_Level1
	SpecialPowerTemplate    = SpecialAbilityCreateAHeroBombard_Level1
	WhichSpecialWeapon		= 4							; use MODELCONDITION_SPECIAL_WEAPON_FOUR
	SkipContinue			= Yes

	UnpackTime              = 900
	PreparationTime         = 1   
	PersistentPrepTime      = 1500 
	PackTime                = 1100
	
	FreezeAfterTriggerDuration	= 2500					; make sure we can't move immediately after.

	AwardXPForTriggering    = 0		
	StartAbilityRange		= 300.0
	MustFinishAbility		= Yes
	SpecialWeapon			= CreateAHeroBombardWeapon
  End
  End

AddModule ModuleTag_FireflightUnpause
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_FireflightUnpause
		SpecialPowerTemplate	= SpecialAbilityDrogothFireflight
		TriggeredBy				= Upgrade_ObjectLevel6 ; Upgrade_ObjectLevel10
	End
	End

AddModule ModuleTag_FireflightStarter
	Behavior = SpecialPowerModule ModuleTag_FireflightStarter                      
		SpecialPowerTemplate		= SpecialAbilityDrogothFireflight
		UpdateModuleStartsAttack	= Yes
		StartsPaused				= Yes
		InitiateSound				= DrogothVoxAttack
	End
	End

AddModule ModuleTag_FireflightUpdate
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_FireflightUpdate   
		SpecialPowerTemplate    = SpecialAbilityDrogothFireflight
		CustomAnimAndDuration	= AnimState:USER_1	AnimTime:2000
		SkipContinue			= Yes

		UnpackTime             	= 1100
		PreparationTime			= 1
		PackTime				= 900
		
		AwardXPForTriggering    = 0
		
		StartAbilityRange		= DROGOTH_FIREFLIGHT_RANGE
		MustFinishAbility		= Yes
		SpecialWeapon			= DrogothFireflight
		TriggerSound			= DrogothFireflightMS
	End
	End
		
		

        

AddModule ModuleTag_AragornBladeMasterEnabler
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_AragornBladeMasterEnabler
		SpecialPowerTemplate = SpecialAbilityAragornBladeMaster
		TriggeredBy = Upgrade_AragornBladeMaster
	End
	End

AddModule ModuleTag_AragornBladeMasterStarter
  	Behavior = SpecialPowerModule ModuleTag_AragornBladeMasterStarter                ; SpecialAbility is a SpecialPower, SpecialPower is anyting special
		SpecialPowerTemplate    = SpecialAbilityAragornBladeMaster
		StartsPaused			= Yes
	End
	End

AddModule ModuleTag_AragornBladeMasterUpdate
	Behavior = HeroModeSpecialAbilityUpdate ModuleTag_AragornBladeMasterUpdate   
		SpecialPowerTemplate    = SpecialAbilityAragornBladeMaster
		HeroAttributeModifier	= AragornBladeMaster
		HeroEffectDuration		= 30000 
		UnpackTime              = 1 ; insant unpack
		TriggerSound			= AragornBladeMaster
	End
        End

        
AddModule ModuleTag_AragornAthelas
        Behavior = SpecialPowerModule ModuleTag_AragornAthelas
		SpecialPowerTemplate    = SpecialAbilityAragornAthelas
		UpdateModuleStartsAttack  = Yes
		TriggerFX				= FX_AragornAthelas
		SetModelCondition		= ModelConditionState:USER_2
		SetModelConditionTime	= 2.1
	End
        End
	
AddModule ModuleTag_AragornAthelasUpdate	
        Behavior = SpecialAbilityUpdate ModuleTag_AragornAthelasUpdate               
		SpecialPowerTemplate    = SpecialAbilityAragornAthelas
		StartAbilityRange       = 1.6
		UnpackTime              = 1		; Nothing to touching it
		PreparationTime         = 3		; touching it to grabbing it
		PackTime                = 2096  ; whacking it to holding it nice
		AwardXPForTriggering    = 0
	End
        End

AddModule ModuleTag_AthelasAutoAbility	
	Behavior = AutoAbilityBehavior ModuleTag_AthelasAutoAbility
		SpecialAbility	= SpecialAbilityAragornAthelas
		MaxScanRange	= 150
		Query			= 1 NONE +HERO ALLIES
	End
        End


AddModule ModuleTag_AthelasHealing
         Behavior = AutoHealBehavior ModuleTag_AthelasHealing
		StartsActive				= Yes	; Active, as in no upgrade required
		ButtonTriggered				= Yes	; But doesn't actually run on its own.
		HealingAmount				= ATHELAS_HEAL_AMOUNT
		Radius					= 200
		HealOnlyOthers				= No
		SingleBurst				= Yes
		UnitHealPulseFX				= FX_AragornAthelas
		KindOf					= HERO
	End
        End
AddModule ModuleTag_08 ; Module starts asleep, and wakes up when thrown.
    Behavior = BezierProjectileBehavior ModuleTag_08 ; Module starts asleep, and wakes up when thrown.
		; To tweak a Bezier path
		FirstHeight = 75  ; Height of Bezier control points above highest intervening terrain
		SecondHeight = 35
		FirstPercentIndent = 20% ; Percentage of shot distance control points are placed
		SecondPercentIndent = 70%
		TumbleRandomly = Yes

		CrushStyle = Yes ; I don't detonate, I just hit

		BounceCount = 0   ; When I hit the ground, I'll arc again

		FinalStuckTime = 1200 ; Can't move for this long afterwards

		GroundHitFX       = FX_RogashLeapLand
		GroundHitWeapon   = RogashLeapWarhead
		PreLandingStateTime = 200;75; Look ahead to the end of the arc, and get the ABOUT_TO_HIT flag this far in advance
	End
        End

 


AddModule ModuleTag_LeapEnabler	
        Behavior = UnpauseSpecialPowerUpgrade ModuleTag_LeapEnabler
		SpecialPowerTemplate = SpecialAbilityGimliLeap
		TriggeredBy = Upgrade_GimliLeapTrigger
	End
        End

AddModule ModuleTag_LeapStarter	
        Behavior = SpecialPowerModule ModuleTag_LeapStarter                      
		SpecialPowerTemplate		= SpecialAbilityGimliLeap
		UpdateModuleStartsAttack	= Yes
		StartsPaused			= Yes
		InitiateSound			= GimliVoiceAttackLeap
	End
        End

AddModule ModuleTag_LeapUpdate FreezingRainSpecialPower ModuleTag_FreezingRain
        Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_LeapUpdate FreezingRainSpecialPower ModuleTag_FreezingRain   
		SpecialPowerTemplate    = SpecialAbilityGimliLeap

		UnpackTime              = 600
		PackTime                = 300 ; Putting horn away

		AwardXPForTriggering    = 0
		MustFinishAbility	= Yes
		StartAbilityRange = 100.0
		
		SpecialWeapon = RohanGimliLeap
		BusyForDuration = 2000 ; don't accept any AI for this long... ai commands will be queued

;		ApproachRequiresLOS = No
		WhichSpecialWeapon = 2
        TriggerSound = GimliLeapVoice
	End
        End


AddModule ModuleTag_SlayerEnabler
        Behavior = UnpauseSpecialPowerUpgrade ModuleTag_SlayerEnabler
		SpecialPowerTemplate = SpecialAbilityGimliHeroMode
		TriggeredBy = Upgrade_GimliSlayerTrigger
	End
        End


AddModule ModuleTag_SlayerStarter
	Behavior = SpecialPowerModule ModuleTag_SlayerStarter                      
		SpecialPowerTemplate      = SpecialAbilityGimliHeroMode
		UpdateModuleStartsAttack  = Yes
		StartsPaused = Yes
	End
        End
 

AddModule ModuleTag_Slayer
	Behavior = HeroModeSpecialAbilityUpdate ModuleTag_Slayer   
		SpecialPowerTemplate    = SpecialAbilityGimliHeroMode
		UnpackingVariation		= 1

		UnpackTime              = 0 ;no special animations 
		PreparationTime         = 0    ;  
		PackTime                = 0 ;

		;PackSound               = 
		;UnpackSound             = 
		;TriggerSound            = 
		;PrepSoundLoop           = 
		AwardXPForTriggering    = 0
		
		HeroAttributeModifier = Slayer
		HeroEffectDuration = 20000
	End
        End


AddModule ModuleTag_SmiteEnabler
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_SmiteEnabler
		SpecialPowerTemplate = SpecialAbilitySpearThrow
		TriggeredBy = Upgrade_EomerSpear
	End
	End

AddModule ModuleTag_EowynSmiteStarter 
	Behavior = SpecialPowerModule ModuleTag_EowynSmiteStarter                      
		SpecialPowerTemplate		= SpecialAbilitySpearThrow
		UpdateModuleStartsAttack	= Yes
		StartsPaused			= Yes
		InitiateSound			= EomerVoiceAttackSpear
	End
	End

AddModule ModuleTag_SpecialAbilitySmiteUpdate
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_SpecialAbilitySmiteUpdate   
		SpecialPowerTemplate    = SpecialAbilitySpearThrow

		UnpackTime              = 2000
		PackTime                = 2000 

		AwardXPForTriggering    = 0
		
		StartAbilityRange		= 275.0
		ApproachRequiresLOS		= Yes
		
		SpecialWeapon = RohanEomerSpear
		WhichSpecialWeapon = 1
	End
	End

AddModule
  Behavior = AutoHealBehavior ModuleTag_FaramirHealing
		StartsActive = Yes
		HealingAmount = HERO_HEAL_AMOUNT
		HealingDelay = 1000
		StartHealingDelay = HERO_HEAL_DELAY
		HealOnlyIfNotInCombat = Yes
	End
        End

AddModule
	Behavior = FireWeaponWhenDeadBehavior ModuleTag_DIELIKETHIS
    	StartsActive = Yes
    	DeathWeapon = SauronFiresOfDoomWeapon
  End
  End


End


ExperienceLevel	ArvelegLevel2
	TargetNames						=	ArnorArveleg 	
	RequiredExperience				=	FARAMIR_LVL2_EXP_NEEDED
	ExperienceAward					=	FARAMIR_LVL2_EXP_AWARD 
	LevelUpFx						=	FX:GandalfLevelUp1FX
	Rank							=	2
	AttributeModifiers				=	HeroLevelUpDamage1
	Upgrades                                                =       Upgrade_EomerSpear
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40
		MaxRadius					=	200
		MaxSelectedUnits			=	40
	End	
End	

ExperienceLevel	ArvelegLevel3
	TargetNames						=	ArnorArveleg 	
	RequiredExperience				=	FARAMIR_LVL3_EXP_NEEDED
	ExperienceAward					=	FARAMIR_LVL3_EXP_AWARD 	
	LevelUpFx						=	FX:GandalfLevelUp1FX
	Rank							=	3
	Upgrades						=   Upgrade_ArvelegBOOM
        Upgrades						=	Upgrade_GimliLeapTrigger
	AttributeModifiers				=	HeroLevelUpDamage2
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40
		MaxRadius					=	200
		MaxSelectedUnits			=	40
	End	
End	

ExperienceLevel	ArvelegLevel4
	TargetNames						=	ArnorArveleg 	
	RequiredExperience				=	FARAMIR_LVL4_EXP_NEEDED
	ExperienceAward					=	FARAMIR_LVL4_EXP_AWARD 	
	LevelUpFx						=	FX:GandalfLevelUp1FX
	Rank							=	4
	AttributeModifiers				=	HeroLevelUpDamage3
        Upgrades				        = Upgrade_AragornBladeMaster
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40
		MaxRadius					=	200
		MaxSelectedUnits			=	40
	End	
End	


ExperienceLevel	ArvelegLevel6
	TargetNames						=	ArnorArveleg 	
	RequiredExperience				=	FARAMIR_LVL6_EXP_NEEDED
	ExperienceAward					=	FARAMIR_LVL6_EXP_AWARD 	
	LevelUpFx						=	FX:GandalfLevelUp1FX
	Rank							=	6
	Upgrades                                                = Upgrade_CreateAHeroBombard_Level1
        AttributeModifiers				=	HeroLevelUpDamage5
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%
		OpacityMax					=	100%
		MinRadius					=	40
		MaxRadius					=	200
		MaxSelectedUnits			=	40
	End	
End

ExperienceLevel	ArvelegLevel8
	TargetNames						=	ArnorArveleg 	
	RequiredExperience				=	FARAMIR_LVL8_EXP_NEEDED
	ExperienceAward					=	FARAMIR_LVL8_EXP_AWARD 	
	LevelUpFx						=	FX:GandalfLevelUp1FX
	Rank							=	8
        Upgrades				= Upgrade_ObjectLevel6	
        Upgrades                                                =       Upgrade_CreateAHeroBombard_Level2
	AttributeModifiers				=	HeroLevelUpDamage7
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40
		MaxRadius					=	200
		MaxSelectedUnits			=	40
	End	
End



ExperienceLevel	ArvelegLevel9
	TargetNames						=	ArnorArveleg 	
	RequiredExperience				=	FARAMIR_LVL9_EXP_NEEDED
	ExperienceAward					=	FARAMIR_LVL9_EXP_AWARD 	
	LevelUpFx						=	FX:GandalfLevelUp1FX
	Rank							=	9
        Upgrades						=	Upgrade_GimliSlayerTrigger
	AttributeModifiers				=	HeroLevelUpDamage8
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40
		MaxRadius					=	200
		MaxSelectedUnits			=	40
	End	
End	

Object ArnorArgeleb



CommandSet = NewArgelebCommandSet



AddModule ModuleTag_FireflightUnpause
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_FireflightUnpause
		SpecialPowerTemplate	= SpecialAbilityDrogothFireflight
		TriggeredBy				= Upgrade_ObjectLevel6 ; Upgrade_ObjectLevel10
	End
	End

AddModule ModuleTag_FireflightStarter
	Behavior = SpecialPowerModule ModuleTag_FireflightStarter                      
		SpecialPowerTemplate		= SpecialAbilityDrogothFireflight
		UpdateModuleStartsAttack	= Yes
		StartsPaused				= Yes
		InitiateSound				= DrogothVoxAttack
	End
	End

AddModule ModuleTag_FireflightUpdate
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_FireflightUpdate   
		SpecialPowerTemplate    = SpecialAbilityDrogothFireflight
		CustomAnimAndDuration	= AnimState:USER_1	AnimTime:2000
		SkipContinue			= Yes

		UnpackTime             	= 1100
		PreparationTime			= 1
		PackTime				= 900
		
		AwardXPForTriggering    = 0
		
		StartAbilityRange		= DROGOTH_FIREFLIGHT_RANGE
		MustFinishAbility		= Yes
		SpecialWeapon			= DrogothFireflight
		TriggerSound			= DrogothFireflightMS
	End
	End

AddModule ModuleTag_InfernoEnabler
 Behavior = UnpauseSpecialPowerUpgrade ModuleTag_InfernoEnabler
		SpecialPowerTemplate = SpecialAbilityFireDrakeInferno
		TriggeredBy = Upgrade_MiniHordeLvl7	;Upgrade_MiniHordeLvl2
	End
        End

AddModule ModuleTag_InfernoStarter
	Behavior = SpecialPowerModule ModuleTag_InfernoStarter
		SpecialPowerTemplate		= SpecialAbilityFireDrakeInferno
		UpdateModuleStartsAttack	= Yes
		StartsPaused			= Yes
		InitiateSound			= FireDrakeVoxInferno
	End
        End

AddModule ModuleTag_InfernoUpdate
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_InfernoUpdate
		SpecialPowerTemplate    = SpecialAbilityFireDrakeInferno

		UnpackTime              = 1300 ; Drawing the horn
		PackTime                = 3700 ; Putting horn away

		AwardXPForTriggering    = 0
		
		StartAbilityRange = 90.0
		
		SpecialWeapon = BabyDrakeInferno
		WhichSpecialWeapon = 1
	End
        End

AddModule ModuleTag_AragornBladeMasterEnabler
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_AragornBladeMasterEnabler
		SpecialPowerTemplate = SpecialAbilityAragornBladeMaster
		TriggeredBy = Upgrade_AragornBladeMaster
	End
	End

AddModule ModuleTag_AragornBladeMasterStarter
  	Behavior = SpecialPowerModule ModuleTag_AragornBladeMasterStarter                ; SpecialAbility is a SpecialPower, SpecialPower is anyting special
		SpecialPowerTemplate    = SpecialAbilityAragornBladeMaster
		StartsPaused			= Yes
	End
	End

AddModule ModuleTag_AragornBladeMasterUpdate
	Behavior = HeroModeSpecialAbilityUpdate ModuleTag_AragornBladeMasterUpdate   
		SpecialPowerTemplate    = SpecialAbilityAragornBladeMaster
		HeroAttributeModifier	= AragornBladeMaster
		HeroEffectDuration		= 30000 
		UnpackTime              = 1 ; insant unpack
		TriggerSound			= AragornBladeMaster
	End
        End

        
AddModule ModuleTag_SlayerEnabler
        Behavior = UnpauseSpecialPowerUpgrade ModuleTag_SlayerEnabler
		SpecialPowerTemplate = SpecialAbilityGimliHeroMode
		TriggeredBy = Upgrade_GimliSlayerTrigger
	End
        End


AddModule ModuleTag_SlayerStarter
	Behavior = SpecialPowerModule ModuleTag_SlayerStarter                      
		SpecialPowerTemplate      = SpecialAbilityGimliHeroMode
		UpdateModuleStartsAttack  = Yes
		StartsPaused = Yes
	End
        End
 

AddModule ModuleTag_Slayer
	Behavior = HeroModeSpecialAbilityUpdate ModuleTag_Slayer   
		SpecialPowerTemplate    = SpecialAbilityGimliHeroMode
		UnpackingVariation		= 1

		UnpackTime              = 0 ;no special animations 
		PreparationTime         = 0    ;  
		PackTime                = 0 ;

		;PackSound               = 
		;UnpackSound             = 
		;TriggerSound            = 
		;PrepSoundLoop           = 
		AwardXPForTriggering    = 0
		
		HeroAttributeModifier = Slayer
		HeroEffectDuration = 20000
	End
        End


AddModule
 Behavior = UnpauseSpecialPowerUpgrade ModuleTag_CreateAHeroFireBombEnabler_Level2
	SpecialPowerTemplate = SpecialAbilityCreateAHeroFireBomb_Level2
	TriggeredBy = Upgrade_CreateAHeroFireBomb_Level2
    End
    End

AddModule
  Behavior = SpecialPowerModule ModuleTag_CreateAHeroFireBombStarter_Level2
	SpecialPowerTemplate	 = SpecialAbilityCreateAHeroFireBomb_Level2
	UpdateModuleStartsAttack = Yes
	StartsPaused			 = Yes
	//InitiateSound			= EomerVoiceAttackSpear
     End
     End

AddModule
    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_CreateAHeroFireBombUpdate_Level2
	SpecialPowerTemplate    = SpecialAbilityCreateAHeroFireBomb_Level2

	UnpackTime              = 1500
	PackTime                = 2000 

	AwardXPForTriggering    = 0
	
	StartAbilityRange		= CREATE_A_HERO_FIRE_BOMB_DO_POWER_RANGE_L2
	ApproachRequiresLOS		= Yes
	
	SpecialWeapon = CreateAHeroFireBomb_Level2
	WhichSpecialWeapon = 4
    End
    End


AddModule ModuleTag_SmiteEnabler
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_SmiteEnabler
		SpecialPowerTemplate = SpecialAbilitySpearThrow
		TriggeredBy = Upgrade_EomerSpear
	End
	End

AddModule ModuleTag_EowynSmiteStarter 
	Behavior = SpecialPowerModule ModuleTag_EowynSmiteStarter                      
		SpecialPowerTemplate		= SpecialAbilitySpearThrow
		UpdateModuleStartsAttack	= Yes
		StartsPaused			= Yes
		InitiateSound			= EomerVoiceAttackSpear
	End
	End

AddModule ModuleTag_SpecialAbilitySmiteUpdate
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_SpecialAbilitySmiteUpdate   
		SpecialPowerTemplate    = SpecialAbilitySpearThrow

		UnpackTime              = 2000
		PackTime                = 2000 

		AwardXPForTriggering    = 0
		
		StartAbilityRange		= 275.0
		ApproachRequiresLOS		= Yes
		
		SpecialWeapon = RohanEomerSpear
		WhichSpecialWeapon = 1
	End
	End



AddModule ModuleTag_08 ; Module starts asleep, and wakes up when thrown.
    Behavior = BezierProjectileBehavior ModuleTag_08 ; Module starts asleep, and wakes up when thrown.
		; To tweak a Bezier path
		FirstHeight = 75  ; Height of Bezier control points above highest intervening terrain
		SecondHeight = 35
		FirstPercentIndent = 20% ; Percentage of shot distance control points are placed
		SecondPercentIndent = 70%
		TumbleRandomly = Yes

		CrushStyle = Yes ; I don't detonate, I just hit

		BounceCount = 0   ; When I hit the ground, I'll arc again

		FinalStuckTime = 1200 ; Can't move for this long afterwards

		GroundHitFX       = FX_RogashLeapLand
		GroundHitWeapon   = RogashLeapWarhead
		PreLandingStateTime = 200;75; Look ahead to the end of the arc, and get the ABOUT_TO_HIT flag this far in advance
	End
        End

 


AddModule ModuleTag_LeapEnabler	
        Behavior = UnpauseSpecialPowerUpgrade ModuleTag_LeapEnabler
		SpecialPowerTemplate = SpecialAbilityGimliLeap
		TriggeredBy = Upgrade_GimliLeapTrigger
	End
        End

AddModule ModuleTag_LeapStarter	
        Behavior = SpecialPowerModule ModuleTag_LeapStarter                      
		SpecialPowerTemplate		= SpecialAbilityGimliLeap
		UpdateModuleStartsAttack	= Yes
		StartsPaused			= Yes
		InitiateSound			= GimliVoiceAttackLeap
	End
        End

AddModule ModuleTag_LeapUpdate 	
        Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_LeapUpdate   
		SpecialPowerTemplate    = SpecialAbilityGimliLeap

		UnpackTime              = 600
		PackTime                = 300 ; Putting horn away

		AwardXPForTriggering    = 0
		MustFinishAbility	= Yes
		StartAbilityRange = 100.0
		
		SpecialWeapon = RohanGimliLeap
		BusyForDuration = 2000 ; don't accept any AI for this long... ai commands will be queued

;		ApproachRequiresLOS = No
		WhichSpecialWeapon = 2
        TriggerSound = GimliLeapVoice
	End
        End


AddModule
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_EnableHorn
		SpecialPowerTemplate		= SpecialAbilityHornOfGondor
		TriggeredBy					= Upgrade_BoromirHornOfGondor
	End
	End

AddModule
	Behavior = SpecialPowerModule ModuleTag_HornStarter						
		SpecialPowerTemplate		= SpecialAbilityHornOfGondor
		UpdateModuleStartsAttack	= Yes
		AntiCategory			= LEADERSHIP
		AttributeModifier		= BoromirGondorHornAntiCategory		; Used for the anti category duration only.
		AttributeModifierRange		= 70.0					; RotWK originally 100
		StartsPaused			= Yes					; obtained on level 2
	End
	End

AddModule
	Behavior = ModelConditionSpecialAbilityUpdate ModuleTag_HornUpdate   
		SpecialPowerTemplate    = SpecialAbilityHornOfGondor
;		StartAbilityRange       = 2.0


		UnpackTime              = 1700									; Drawing the horn
		PreparationTime         = 1										; nothing
		PersistentPrepTime      = 1600									; Blowing
		PackTime                = 1666									; Putting horn away

;    PackSound               = 
;    UnpackSound             = 
;    TriggerSound            = 
;    PrepSoundLoop           = 
		AwardXPForTriggering    = 0
	End
	End

AddModule
	Behavior = FireWeaponWhenDeadBehavior ModuleTag_DIELIKETHIS
    	StartsActive = Yes
    	DeathWeapon = SauronFiresOfDoomWeapon
  End
  End

End

ExperienceLevel	ArgelebLevel1
	TargetNames						=	ArnorArgeleb	
	RequiredExperience					=	1	
	ExperienceAward						=	BOROMIR_LVL1_EXP_AWARD
	Rank							=	1
        Upgrades						=	Upgrade_BoromirHornOfGondor
	SelectionDecal
		Texture						=	decal_hero_good	
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40
		MaxRadius					=	200
		MaxSelectedUnits				=	1
	End
END	

ExperienceLevel	ArgelebLevel2
	TargetNames						=	ArnorArgeleb
	RequiredExperience					=	BOROMIR_LVL2_EXP_NEEDED
	ExperienceAward						=	BOROMIR_LVL2_EXP_AWARD
	AttributeModifiers					=	HeroLevelUpDamage1
	Upgrades                                                =       Upgrade_EomerSpear
        Upgrades                                                =       Upgrade_MiniHordeLvl7
        Rank							=	2
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	SelectionDecal
		Texture						=	decal_hero_good	
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40
		MaxRadius					=	200
		MaxSelectedUnits				=	1	
	End		
END	
	

ExperienceLevel	ArgelebLevel3
	TargetNames						=	ArnorArgeleb	
	RequiredExperience					=	BOROMIR_LVL3_EXP_NEEDED
	ExperienceAward						=	BOROMIR_LVL3_EXP_AWARD	
	AttributeModifiers					=	HeroLevelUpDamage2
	Rank							=	3
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	Upgrades						=	Upgrade_GimliLeapTrigger
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40
		MaxRadius					=	200
		MaxSelectedUnits				=	1	
	End
END

ExperienceLevel	ArgelebLevel4
	TargetNames						=	ArnorArgeleb	
	RequiredExperience					=	BOROMIR_LVL4_EXP_NEEDED
	ExperienceAward						=	BOROMIR_LVL4_EXP_AWARD	
	AttributeModifiers					=	HeroLevelUpDamage3
	Rank							=	4
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
        Upgrades				                = Upgrade_AragornBladeMaster
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%
		OpacityMax					=	100%
		MinRadius					=	40
		MaxRadius					=	200
		MaxSelectedUnits				=	1
	End		
END	

ExperienceLevel	ArgelebLevel5
	TargetNames						=	ArnorArgeleb	
	RequiredExperience					=	BOROMIR_LVL5_EXP_NEEDED
	ExperienceAward						=	BOROMIR_LVL5_EXP_AWARD	
	AttributeModifiers					=	HeroLevelUpDamage4
	Rank							=	5
	Upgrades                                = Upgrade_CreateAHeroFireBomb_Level2
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40
		MaxRadius					=	200
		MaxSelectedUnits				=	1	
	End		
END	

ExperienceLevel	ArgelebLevel6
	TargetNames						=	ArnorArgeleb	
	RequiredExperience					=	BOROMIR_LVL6_EXP_NEEDED
	ExperienceAward						=	BOROMIR_LVL6_EXP_AWARD	
	AttributeModifiers					=	HeroLevelUpDamage5
	Rank							=	6
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
        Upgrades				                = Upgrade_ObjectLevel6
        SelectionDecal 
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40
		MaxRadius					=	200
		MaxSelectedUnits				=	1	
	End	
END	

ExperienceLevel	ArgelebLevel9
	TargetNames						=	ArnorArgeleb	
	RequiredExperience					=	BOROMIR_LVL9_EXP_NEEDED
	ExperienceAward						=	BOROMIR_LVL9_EXP_AWARD	
	AttributeModifiers					=	HeroLevelUpDamage8
	Rank							=	9
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
        Upgrades						=	Upgrade_GimliSlayerTrigger
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40
		MaxRadius					=	200
		MaxSelectedUnits				=	1	
	End	
END	



Weapon NewGamlingSword
  LeechRangeWeapon      = Yes
  AttackRange           = STANDARD_MELEE_ATTACK_RANGE
	RadiusDamageAffects = ENEMIES NOT_SIMILAR
  MeleeWeapon           = Yes
  DelayBetweenShots     = GAMLING_DELAYBETWEENSHOTS 			
             ; time between shots, msec
  PreAttackDelay        = GAMLING_PREATTACKDELAY 				; 400 is sword swing delay time before contact with target.
  PreAttackType         = PER_SHOT ; Do the delay each time we attack a new target
  FireFX                = FX_GondorSwordHit
  FiringDuration        = GAMLING_FIRINGDURATION 				; Duration of the sword swing

	DamageNugget                        ; A basic Nugget that just does damage
		Damage        = ARAGORN_DAMAGE					
		Radius        = 30.0 ;
		DelayTime     = 200
		DamageType    = HERO
		DamageFXType  = SWORD_SLASH
		DeathType     = NORMAL
		DamageSpeed		= 700.0 ; must match the ShockWaveSpeed below
	End

	DOTNugget                        ; 30s time.
		Damage        = 20 ; default is 300
		AcceptDamageAdd = No
		Radius        = 20.0
		DelayTime     = 0
		DamageType    = MAGIC
		DamageFXType  = MAGIC
		DeathType     = NORMAL
		DamageInterval = 1000
		DamageDuration = 30000
		SpecialObjectFilter = AFFECTED_BY_POISON_OBJECTFILTER
	End

	MetaImpactNugget                    ; A Nugget that throws things back with force
		HeroResist			= .75
		ShockWaveAmount   = 30.0
		ShockWaveRadius   = 10.0
		ShockWaveTaperOff = 1  ;0.75
		ShockWaveZMult    = 0.75
		ShockWaveSpeed		= 700
	End  
End

Weapon GamlingHeroSword
  LeechRangeWeapon      = Yes
	RadiusDamageAffects = ENEMIES NOT_SIMILAR
  AttackRange           = STANDARD_MELEE_ATTACK_RANGE
  MeleeWeapon           = Yes
  DelayBetweenShots     = GAMLING_DELAYBETWEENSHOTS 			
             ; time between shots, msec
  PreAttackDelay        = GAMLING_PREATTACKDELAY 				; 400 is sword swing delay time before contact with target.
  PreAttackType         = PER_SHOT ; Do the delay each time we attack a new target
  FireFX                = FX_GondorSwordHit
  FiringDuration        = GAMLING_FIRINGDURATION 				; Duration of the sword swing

  DamageNugget                        ; A basic Nugget that just does damage
    Damage        = 100					
    Radius        = 60.0 ;
    DelayTime     = 25
    DamageType    = HERO
    DamageFXType  = SWORD_SLASH
    DeathType     = NORMAL
		DamageSpeed		= 700.0
  End
  DamageNugget                        ; A basic Nugget that just does damage
    Damage        = 300					
    Radius        = 60.0 ;
    ;DelayTime     = 25 ; for smaller units delay time must not be so that they are set aflame rather then just dieing normally
    DamageType    = MAGIC
    DamageFXType  = MAGIC
    DeathType     = EXPLODED
		DamageSpeed		= 700.0
  End

	DOTNugget                        ; 30s time.
		Damage        = 40 ; default is 300
		AcceptDamageAdd = No
		Radius        = 30.0
		DelayTime     = 0
		DamageType    = HERO
		DamageFXType  = WITCH_KING_MORGUL_BLADE
		DeathType     = EXPLODED
		DamageInterval = 1000
		DamageDuration = 15000
		SpecialObjectFilter = AFFECTED_BY_POISON_OBJECTFILTER
	End
	
	MetaImpactNugget                    ; A Nugget that throws things back with force
		HeroResist			= .75
		ShockWaveAmount   = 70.0
		ShockWaveRadius   = 60.0
		ShockWaveTaperOff = 1 ;0.75
		ShockWaveZMult    = 0.95
		ShockWaveSpeed		= 700
	End  

End

Object RohanGamling
CommandPoints = 0

SelectPortrait = UPGondor_Rohirrim
ButtonImage = hicahdamrod

RadarPriority = UNIT
KindOf = HERO PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT ARMY_SUMMARY HEAVY_MELEE_HITTER

ShockwaveResistance = SHOCKWAVE_RESISTANCE_STRONG

VisionRange = VISION_HERO_RANGED
	ShroudClearingRange = SHROUD_CLEAR_RANGED_HERO
	
	MaxVisionBonusPercent = 300%
	VisionBonusTestRadius = 200
	VisionBonusPercentPerFoot = 1.0%

CommandSet = NewGamlingCommandSet

WeaponSet
		Conditions 			= None 
		Weapon     			= PRIMARY  NewGamlingSword  		
		AutoChooseSources	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI		
	End

WeaponSet
		Conditions		= WEAPONSET_HERO_MODE
		Weapon			= PRIMARY    GamlingHeroSword
	End

AddModule ModuleTag_FloodEnabler
        Behavior = UnpauseSpecialPowerUpgrade ModuleTag_FloodEnabler
		SpecialPowerTemplate = SpecialAbilityPersonalFlood
		TriggeredBy = Upgrade_ArwenFloodTrigger
	End
        End

AddModule ModuleTag_FloodStarter  	
	Behavior = SpecialPowerModule ModuleTag_FloodStarter                      
		SpecialPowerTemplate		= SpecialAbilityPersonalFlood
		UpdateModuleStartsAttack	= Yes
		StartsPaused				= Yes
		InitiateSound				= ArwenVoiceFlood
	End
        End


AddModule ModuleTag_FloodUpdate
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_FloodUpdate   
		SpecialPowerTemplate    = SpecialAbilityPersonalFlood

		UnpackTime              = 1300
		PackTime                = 1500

		StartAbilityRange = 150.0
		
		SpecialWeapon = ArwenPersonalFlood
		WhichSpecialWeapon = 1
	End
        End



AddModule ModuleTag_AragornAthelas
        Behavior = SpecialPowerModule ModuleTag_AragornAthelas
		SpecialPowerTemplate    = SpecialAbilityAragornAthelas
		UpdateModuleStartsAttack  = Yes
		TriggerFX				= FX_AragornAthelas
		SetModelCondition		= ModelConditionState:USER_2
		SetModelConditionTime	= 2.1
	End
        End
	
AddModule ModuleTag_AragornAthelasUpdate	
        Behavior = SpecialAbilityUpdate ModuleTag_AragornAthelasUpdate               
		SpecialPowerTemplate    = SpecialAbilityAragornAthelas
		StartAbilityRange       = 1.6
		UnpackTime              = 1		; Nothing to touching it
		PreparationTime         = 3		; touching it to grabbing it
		PackTime                = 2096  ; whacking it to holding it nice
		AwardXPForTriggering    = 0
	End
        End

AddModule ModuleTag_AthelasAutoAbility	
	Behavior = AutoAbilityBehavior ModuleTag_AthelasAutoAbility
		SpecialAbility	= SpecialAbilityAragornAthelas
		MaxScanRange	= 150
		Query			= 1 NONE +HERO ALLIES
	End
        End


AddModule ModuleTag_AthelasHealing
         Behavior = AutoHealBehavior ModuleTag_AthelasHealing
		StartsActive				= Yes	; Active, as in no upgrade required
		ButtonTriggered				= Yes	; But doesn't actually run on its own.
		HealingAmount				= ATHELAS_HEAL_AMOUNT
		Radius					= 200
		HealOnlyOthers				= No
		SingleBurst				= Yes
		UnitHealPulseFX				= FX_AragornAthelas
		KindOf					= HERO
	End
        End

AddModule
 Behavior = UnpauseSpecialPowerUpgrade ModuleTag_CreateAHeroFireBombEnabler_Level2
	SpecialPowerTemplate = SpecialAbilityCreateAHeroFireBomb_Level2
	TriggeredBy = Upgrade_CreateAHeroFireBomb_Level2
    End
    End

AddModule
  Behavior = SpecialPowerModule ModuleTag_CreateAHeroFireBombStarter_Level2
	SpecialPowerTemplate	 = SpecialAbilityCreateAHeroFireBomb_Level2
	UpdateModuleStartsAttack = Yes
	StartsPaused			 = Yes
	//InitiateSound			= EomerVoiceAttackSpear
     End
     End

AddModule
    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_CreateAHeroFireBombUpdate_Level2
	SpecialPowerTemplate    = SpecialAbilityCreateAHeroFireBomb_Level2

	UnpackTime              = 1500
	PackTime                = 2000 

	AwardXPForTriggering    = 0
	
	StartAbilityRange		= CREATE_A_HERO_FIRE_BOMB_DO_POWER_RANGE_L2
	ApproachRequiresLOS		= Yes
	
	SpecialWeapon = CreateAHeroFireBomb_Level2
	WhichSpecialWeapon = 4
    End
    End


AddModule ModuleTag_EnableHorn
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_EnableHorn
		SpecialPowerTemplate		= SpecialAbilityHornOfGondor
		TriggeredBy					= Upgrade_BoromirHornOfGondor
	End
	End

AddModule ModuleTag_HornStarter 
		Behavior = SpecialPowerModule ModuleTag_HornStarter                      
		SpecialPowerTemplate      = SpecialAbilityHornOfGondor
		UpdateModuleStartsAttack  = Yes
		;InitiateSound           = 
	End
        End

AddModule ModuleTag_HornUpdate 
	Behavior = ModelConditionSpecialAbilityUpdate ModuleTag_HornUpdate   
		SpecialPowerTemplate    = SpecialAbilityHornOfGondor
;		StartAbilityRange       = 2.0

		UnpackTime              = 1700 ; Drawing the horn
		PreparationTime         = 1   ; nothing
		PersistentPrepTime      = 1600 ; Blowing
		PackTime                = 1666 ; Putting horn away

;    PackSound               = 
;    UnpackSound             = 
;    TriggerSound            = 
;    PrepSoundLoop           = 
		AwardXPForTriggering    = 0
	End

	Geometry = CYLINDER
	GeometryMajorRadius = 8.0
	GeometryMinorRadius = 8.0
	GeometryHeight = 19.2
	GeometryIsSmall = Yes
	Shadow = SHADOW_DECAL
	ShadowSizeX = 12;
	ShadowSizeY = 12;
	ShadowTexture = ShadowI;
       End
       

    
AddModule ModuleTag_SmiteEnabler
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_SmiteEnabler
		SpecialPowerTemplate = SpecialAbilitySpearThrow
		TriggeredBy = Upgrade_EomerSpear
	End
	End

AddModule ModuleTag_EowynSmiteStarter 
	Behavior = SpecialPowerModule ModuleTag_EowynSmiteStarter                      
		SpecialPowerTemplate		= SpecialAbilitySpearThrow
		UpdateModuleStartsAttack	= Yes
		StartsPaused			= Yes
		InitiateSound			= EomerVoiceAttackSpear
	End
	End

AddModule ModuleTag_SpecialAbilitySmiteUpdate
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_SpecialAbilitySmiteUpdate   
		SpecialPowerTemplate    = SpecialAbilitySpearThrow

		UnpackTime              = 2000
		PackTime                = 2000 

		AwardXPForTriggering    = 0
		
		StartAbilityRange		= 275.0
		ApproachRequiresLOS		= Yes
		
		SpecialWeapon = RohanEomerSpear
		WhichSpecialWeapon = 1
	End
	End

AddModule ModuleTag_SmashEnabler
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_SmashEnabler
		SpecialPowerTemplate = SpecialAbilityGloinSmash
		TriggeredBy = Upgrade_EnableGloinSmash
	End
	End

AddModule ModuleTag_SmashStarter
	Behavior = SpecialPowerModule ModuleTag_SmashStarter       
		SpecialPowerTemplate      = SpecialAbilityGloinSmash
		UpdateModuleStartsAttack  = Yes
		StartsPaused		  	  = Yes
		InitiateSound				= GimliVoiceAttackLeap
	End
	End

AddModule ModuleTag_SmashWeaponFireUpdate
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_SmashWeaponFireUpdate   
		SpecialPowerTemplate    = SpecialAbilityGloinSmash
		SpecialWeapon			= GloinSmashWeapon
		WhichSpecialWeapon		= 3			; Corresponds to SPECIAL_WEAPON_THREE
		StartAbilityRange		= 1.0
		
		SkipContinue			= Yes
		UnpackTime				= 2000		; Trigger on frame 60 (of 100)
		PackTime				= 1333		; Remaining 40 frames (of 100)
		MustFinishAbility		= Yes
	End
	End

AddModule ModuleTag_AragornBladeMasterEnabler
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_AragornBladeMasterEnabler
		SpecialPowerTemplate = SpecialAbilityAragornBladeMaster
		TriggeredBy = Upgrade_AragornBladeMaster
	End
	End

AddModule ModuleTag_AragornBladeMasterStarter
  	Behavior = SpecialPowerModule ModuleTag_AragornBladeMasterStarter                ; SpecialAbility is a SpecialPower, SpecialPower is anyting special
		SpecialPowerTemplate    = SpecialAbilityAragornBladeMaster
		StartsPaused			= Yes
	End
	End

AddModule ModuleTag_AragornBladeMasterUpdate
	Behavior = HeroModeSpecialAbilityUpdate ModuleTag_AragornBladeMasterUpdate   
		SpecialPowerTemplate    = SpecialAbilityAragornBladeMaster
		HeroAttributeModifier	= AragornBladeMaster
		HeroEffectDuration		= 30000 
		UnpackTime              = 1 ; insant unpack
		TriggerSound			= AragornBladeMaster
	End
        End




AddModule ModuleTag_ShieldMaiden      
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_ShieldMaiden
		SpecialPowerTemplate = SpecialAbilityEowynShieldMaiden
		TriggeredBy = Upgrade_EowynShieldMaiden
	End
	End

AddModule ModuleTag_ShieldMaidenUpdate 
       Behavior = SpecialPowerModule ModuleTag_ShieldMaidenUpdate   
		SpecialPowerTemplate      = SpecialAbilityEowynShieldMaiden
		UpdateModuleStartsAttack  = No
		StartsPaused = Yes
		SetModelCondition			= ModelConditionState:USER_3
		SetModelConditionTime		= 25.0 ; This is how long Shield Maiden Lasts
		AttributeModifier = EowynShieldMaidenBonus
		AttributeModifierRange = 1
		AttributeModifierAffectsSelf = Yes
		AttributeModifierAffects = ANY +CAVALRY +INFANTRY
		AttributeModifierFX = FX_EowynShieldMaiden
	End
        End


AddModule ModuleTag_StancesBehavior	
	Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = Hero
    End
    End

AddModule ModuleTag_08 ; Module starts asleep, and wakes up when thrown.
    Behavior = BezierProjectileBehavior ModuleTag_08 ; Module starts asleep, and wakes up when thrown.
		; To tweak a Bezier path
		FirstHeight = 75  ; Height of Bezier control points above highest intervening terrain
		SecondHeight = 35
		FirstPercentIndent = 20% ; Percentage of shot distance control points are placed
		SecondPercentIndent = 70%
		TumbleRandomly = Yes

		CrushStyle = Yes ; I don't detonate, I just hit

		BounceCount = 0   ; When I hit the ground, I'll arc again

		FinalStuckTime = 1200 ; Can't move for this long afterwards

		GroundHitFX       = FX_RogashLeapLand
		GroundHitWeapon   = RogashLeapWarhead
		PreLandingStateTime = 200;75; Look ahead to the end of the arc, and get the ABOUT_TO_HIT flag this far in advance
	End
        End

 


AddModule ModuleTag_LeapEnabler	
        Behavior = UnpauseSpecialPowerUpgrade ModuleTag_LeapEnabler
		SpecialPowerTemplate = SpecialAbilityGimliLeap
		TriggeredBy = Upgrade_GimliLeapTrigger
	End
        End

AddModule ModuleTag_LeapStarter	
        Behavior = SpecialPowerModule ModuleTag_LeapStarter                      
		SpecialPowerTemplate		= SpecialAbilityGimliLeap
		UpdateModuleStartsAttack	= Yes
		StartsPaused			= Yes
		InitiateSound			= GimliVoiceAttackLeap
	End
        End

AddModule ModuleTag_LeapUpdate 	
        Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_LeapUpdate   
		SpecialPowerTemplate    = SpecialAbilityGimliLeap

		UnpackTime              = 600
		PackTime                = 300 ; Putting horn away

		AwardXPForTriggering    = 0
		MustFinishAbility	= Yes
		StartAbilityRange = 100.0
		
		SpecialWeapon = RohanGimliLeap
		BusyForDuration = 2000 ; don't accept any AI for this long... ai commands will be queued

;		ApproachRequiresLOS = No
		WhichSpecialWeapon = 2
        TriggerSound = GimliLeapVoice
	End
        End

;;; ENABLE SPEAR WEAPON ;;;

AddModule ModuleTag_SmiteEnabler2
Behavior = UnpauseSpecialPowerUpgrade ModuleTag_SmiteEnabler2
		SpecialPowerTemplate = SpecialAbilitySmite
		TriggeredBy = Upgrade_EowynSmiteTrigger
	End
        End

AddModule ModuleTag_EowynSmiteStarter2 
	Behavior = SpecialPowerModule ModuleTag_EowynSmiteStarter2                      
		SpecialPowerTemplate		= SpecialAbilitySmite
		UpdateModuleStartsAttack	= Yes
		StartsPaused			= Yes
		InitiateSound			= EowynVoiceAttackSpear
	End
        End

AddModule ModuleTag_SpecialAbilitySmiteUpdate2  
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_SpecialAbilitySmiteUpdate2   
		SpecialPowerTemplate    = SpecialAbilitySmite

		UnpackTime              = 1250
		PackTime                = 1450 

		;PackSound               = 
		;UnpackSound             = 
		;TriggerSound            = 
		;PrepSoundLoop           = 
		AwardXPForTriggering    = 0
		
		StartAbilityRange		= 275.0
		ApproachRequiresLOS		= Yes
		
		SpecialWeapon = RohanEowynSmiteThrown
		WhichSpecialWeapon = 1
	End
        End

AddModule ModuleTag_SlayerEnabler
        Behavior = UnpauseSpecialPowerUpgrade ModuleTag_SlayerEnabler
		SpecialPowerTemplate = SpecialAbilityGimliHeroMode
		TriggeredBy = Upgrade_GimliSlayerTrigger
	End
        End


AddModule ModuleTag_SlayerStarter
	Behavior = SpecialPowerModule ModuleTag_SlayerStarter                      
		SpecialPowerTemplate      = SpecialAbilityGimliHeroMode
		UpdateModuleStartsAttack  = Yes
		StartsPaused = Yes
	End
        End
 

AddModule ModuleTag_Slayer
	Behavior = HeroModeSpecialAbilityUpdate ModuleTag_Slayer   
		SpecialPowerTemplate    = SpecialAbilityGimliHeroMode
		UnpackingVariation		= 1

		UnpackTime              = 0 ;no special animations 
		PreparationTime         = 0    ;  
		PackTime                = 0 ;

		;PackSound               = 
		;UnpackSound             = 
		;TriggerSound            = 
		;PrepSoundLoop           = 
		AwardXPForTriggering    = 0
		
		HeroAttributeModifier = Slayer
		HeroEffectDuration = 20000
	End
        End



AddModule
	Behavior = FireWeaponWhenDeadBehavior ModuleTag_DIELIKETHIS
    	StartsActive = Yes
    	DeathWeapon = SauronFiresOfDoomWeapon
  End
  End


End



ExperienceLevel	GamlingLevel1
	TargetNames						=	RohanGamling	
	RequiredExperience					=	1	
	ExperienceAward						=	GAMLING_LVL1_EXP_AWARD
	Rank							=	1
	Upgrades						=	Upgrade_BoromirHornOfGondor
	SelectionDecal
		Texture						=	decal_hero_good	
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40
		MaxRadius					=	200
		MaxSelectedUnits				=	1
	End
End

ExperienceLevel	GamlingLevel2
	TargetNames						=	RohanGamling	
	RequiredExperience					=	GAMLING_LVL2_EXP_NEEDED
	ExperienceAward						=	GAMLING_LVL2_EXP_AWARD
	AttributeModifiers					=	HeroLevelUpDamage1
	Rank							=	2
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	Upgrades                                                =       Upgrade_EomerSpear
	SelectionDecal
		Texture						=	decal_hero_good	
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40
		MaxRadius					=	200
		MaxSelectedUnits				=	1	
	End		
End	

ExperienceLevel	GamlingLevel3
	TargetNames						=	RohanGamling	
	RequiredExperience					=	GAMLING_LVL3_EXP_NEEDED
	ExperienceAward						=	GAMLING_LVL3_EXP_AWARD	
	AttributeModifiers					=	HeroLevelUpDamage2
	Rank							=	3
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
        Upgrades						=	Upgrade_GimliLeapTrigger
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40
		MaxRadius					=	200
		MaxSelectedUnits				=	1	
	End
END

ExperienceLevel	GamlingLevel4
	TargetNames						=	RohanGamling	
	RequiredExperience					=	GAMLING_LVL4_EXP_NEEDED
	ExperienceAward						=	GAMLING_LVL4_EXP_AWARD	
	AttributeModifiers					=	HeroLevelUpDamage3
	Rank							=	4
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
        Upgrades				        = Upgrade_AragornBladeMaster
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%
		OpacityMax					=	100%
		MinRadius					=	40
		MaxRadius					=	200
		MaxSelectedUnits				=	1
	End		
End	

ExperienceLevel	GamlingLevel6
	TargetNames						=	RohanGamling	
	RequiredExperience					=	GAMLING_LVL6_EXP_NEEDED
	ExperienceAward						=	GAMLING_LVL6_EXP_AWARD	
	AttributeModifiers					=	HeroLevelUpDamage5
	Rank							=	6
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	 Upgrades				= Upgrade_ArwenFloodTrigger
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40
		MaxRadius					=	200
		MaxSelectedUnits				=	1	
	End	
End	

ExperienceLevel	GamlingLevel8
	TargetNames						=	RohanGamling	
	RequiredExperience					=	GAMLING_LVL8_EXP_NEEDED
	ExperienceAward						=	GAMLING_LVL8_EXP_AWARD	
	AttributeModifiers					=	HeroLevelUpDamage7
	Rank							=	8
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	Upgrades				=	Upgrade_EowynShieldMaiden
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40
		MaxRadius					=	200
		MaxSelectedUnits				=	1
	End	
End	

ExperienceLevel	GamlingLevel9
	TargetNames						=	RohanGamling	
	RequiredExperience					=	GAMLING_LVL9_EXP_NEEDED
	ExperienceAward						=	GAMLING_LVL9_EXP_AWARD	
	AttributeModifiers					=	HeroLevelUpDamage8
	Rank							=	9
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	Upgrades                                                = Upgrade_CreateAHeroFireBomb_Level2
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40
		MaxRadius					=	200
		MaxSelectedUnits				=	1	
	End	
End
	
ExperienceLevel	GamlingLevel10
	TargetNames						=	RohanGamling	
	RequiredExperience					=	GAMLING_LVL10_EXP_NEEDED
	ExperienceAward						=	GAMLING_LVL10_EXP_AWARD	
	AttributeModifiers					=	HeroLevelUpDamage9
	Rank							=	10
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	Upgrades						=	Upgrade_GimliSlayerTrigger
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40
		MaxRadius					=	200
		MaxSelectedUnits				=	1	
	End	
End	

ChildObject GondorAragornMP GondorAragorn

  WeaponSet
		Conditions 			= None 
		Weapon     			= PRIMARY  GondorAragornSword  		
		AutoChooseSources	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI		
	End

	WeaponSet
		Conditions		= WEAPONSET_HERO_MODE
		Weapon			= PRIMARY    GondorAragornHeroSword
	End

ReplaceModule ModuleTag_DRAW
Draw = W3DScriptedModelDraw ModuleTag_DRAW_new
		OkToChangeModelColor = Yes
	StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD

		DefaultModelConditionState
			Model               = GUAragorn_SKN
			ParticleSysBone = B_SWORDBONE AragornSwordglow FollowBone:yes
		End
		
		ModelConditionState = WEAPONSET_HERO_MODE USER_3
			ParticleSysBone = BAT_RIBS BladeMaster FollowBone:Yes
			ParticleSysBone = BAT_HEAD AragornElendill FollowBone:Yes
		End

		ModelConditionState = WEAPONSET_HERO_MODE
			ParticleSysBone = BAT_RIBS BladeMaster FollowBone:Yes
		End

		ModelConditionState = USER_3
			ParticleSysBone = BAT_HEAD AragornElendill FollowBone:Yes
		End

		TransitionState				= TRANS_boredToAttention_Elendil
			Animation				= GUAragorn_ATND
				AnimationName		= GUAragorn_SKL.GUAragorn_ATND 
				AnimationMode		= ONCE
			End
			FXEvent	= Name: FX_ElendilGlowEvent
		End
		
		TransitionState				= TRANS_attentionToBored_Elendil
			Animation				= GUAragorn_ATND
				AnimationName		= GUAragorn_SKL.GUAragorn_ATND
				AnimationMode		= ONCE_BACKWARDS
			End
			FXEvent					= Name: FX_ElendilGlowEvent
			Flags					= START_FRAME_LAST
		End

		TransitionState				= TRANS_boredToAttention
			Animation				= GUAragorn_ATND
				AnimationName		= GUAragorn_SKL.GUAragorn_ATND 
				AnimationMode		= ONCE
			End
		End
		
		TransitionState				= TRANS_attentionToBored
			Animation				= GUAragorn_ATND
				AnimationName		= GUAragorn_SKL.GUAragorn_ATND
				AnimationMode		= ONCE_BACKWARDS
			End
			Flags					= START_FRAME_LAST
		End

	; --- Idle Anims
		IdleAnimationState
			StateName				= STATE_bored
			
			Animation				= GUAragorn_IDLE		;no_fidget
				AnimationName		= GUAragorn_SKL.GUAragorn_IDLE
				AnimationMode		= ONCE
				AnimationPriority	= 12
			End
			
			Animation				= GUAragorn_IDLF		;fidget
				AnimationName		= GUAragorn_SKL.GUAragorn_IDLF
				AnimationMode		= ONCE
				AnimationPriority	= 1
			End
			
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if	Prev == "STATE_attention" or
					Prev == "STATE_running" or
					Prev == "OATH_BREAKERS" then CurDrawableSetTransitionAnimState("TRANS_attentionToBored") end
			EndScript
		End
		
		AnimationState			= THROWN_PROJECTILE
			Animation			= FLYA
				AnimationName	= GUAragorn_SKL.GUAragorn_FLYA
				AnimationMode	= LOOP
			End
		End
		
		AnimationState			= STUNNED_FLAILING
			Animation			= FLYA
				AnimationName	= GUAragorn_SKL.GUAragorn_FLYA
				AnimationMode	= LOOP
				AnimationSpeedFactorRange	= 0.4 0.6
			End
		End
		
		AnimationState 			= DYING SPLATTED
			Animation 		= Splatted_On_Ground
				AnimationName	= GUAragorn_SKL.GUAragorn_LNDA
				AnimationMode	= ONCE
			End
			EnteringStateFX		= FX_SoldierHitGround
		End
		
		; --- Dying anims
		AnimationState				= DYING
			Animation				= GUAragorn_DIEA
				AnimationName		= GUAragorn_SKL.GUAragorn_DIEA
				AnimationMode		= ONCE
			End
			Animation				= GUAragorn_DIEB
				AnimationName		= GUAragorn_SKL.GUAragorn_DIEB
				AnimationMode		= ONCE
			End
		End
		
		AnimationState						= PARALYZED
			Animation
				AnimationName				= GUAragorn_IDLE
				AnimationMode				= LOOP
			End
		End

		AnimationState				= STUNNED_STANDING_UP
			Animation				= GUAragorn_GTPB
				AnimationName		= GUAragorn_SKL.GUAragorn_GTPB
				AnimationMode		= ONCE
				AnimationSpeedFactorRange = 1.5 1.5
			End
		End

		AnimationState			= STUNNED
			Animation			= LNDA
				AnimationName	= GUAragorn_SKL.GUAragorn_LNDA
				AnimationMode	= ONCE
			End
			EnteringStateFX		= FX_SoldierHitGround
		End	
	
	


	; --- Attacking Anims [Weapon_A]
	
	
	
		AnimationState        = MOVING FIRING_OR_PREATTACK_A
			ShareAnimation		= Yes
			Animation           = RunAndFire
				AnimationName       = GUAragorn_SKL.GUAragorn_ATRA
				AnimationMode       = LOOP
			End
			Flags               = RANDOMSTART  
		End
		
		AnimationState				= FIRING_OR_PREATTACK_A WEAPONSET_HERO_MODE ; Blademaster Mode
			StateName				= STATE_ready
			Animation				= ATKF
				AnimationName		= GUAragorn_SKL.GUAragorn_ATKF
				AnimationMode		= ONCE
				UseWeaponTiming		= Yes
			End
			Flags					= RESTART_ANIM_WHEN_COMPLETE
			FXEvent	= Frame:25 Name: FX_BladeMasterHitOrient
			FXEvent	= Frame:45 Name: FX_BladeMasterHitOrient
		End

		AnimationState				= FIRING_OR_PREATTACK_A
			StateName				= STATE_ready
			Animation				= ATKD
				AnimationName		= GUAragorn_SKL.GUAragorn_ATKD
				AnimationMode		= ONCE
				UseWeaponTiming		= Yes
				AnimationPriority	= 3
			End
			Animation				= ATKE
				AnimationName		= GUAragorn_SKL.GUAragorn_ATKE
				AnimationMode		= ONCE
				UseWeaponTiming		= Yes
				AnimationPriority	= 2
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End
		
		
		
		
		

	; --- Moving Anims	
		AnimationState				= MOVING
			StateName				= STATE_running
			
			Animation				= GUAragorn_RUNB
				AnimationName		= GUAragorn_SKL.GUAragorn_RUNB
				AnimationMode		= LOOP
			End
		End

		AnimationState				= LEVELED	; This state clears itself in 3 seconds
			Animation				= LevelUp
				AnimationName		= GUAragorn_SKL.GUAragorn_ATKO
				AnimationMode		= ONCE
			End
		End

		AnimationState				= SPECIAL_POWER_1							; Aragorn shouting Elendil anim
			StateName				= STATE_ready
			Animation				= GUAragorn_ATKL
				AnimationName		= GUAragorn_SKL.GUAragorn_ATKL
				AnimationMode		= ONCE
			End
			ParticleSysBone			= B_SWORDBONE ElendilFlare FollowBone:yes
			ParticleSysBone			= B_SWORDBONE ElendilSwordFlare FollowBone:yes

;			FXEvent	= Name: FX_ElendilGlowEvent
		End
		
		AnimationState				= USER_2
			StateName				= ATHELAS
			Animation				= ATKP
				AnimationName		= GUAragorn_SKL.GUAragorn_ATKP
				AnimationMode		= ONCE
			End
		End
		
		AnimationState				= USER_1
			StateName				= OATH_BREAKERS
			Animation				= ATKN
				AnimationName		= GUAragorn_SKL.GUAragorn_CHRB
				AnimationMode		= ONCE
			End
		End
		
		
		
	; --------- Click and Hit Reactions ------------

		AnimationState				= HIT_REACTION HIT_LEVEL_3
			StateName				= STATE_bored
			Animation				= Hit_Level_1_b
				AnimationName		= GUAragorn_SKL.GUAragorn_HITB
				AnimationMode		= ONCE
			End
		End
		
	;----Emotion Animations

		AnimationState				= EMOTION_CELEBRATING
			StateName				= STATE_ready
			Animation				= CHRB
				AnimationName		= GUAragorn_SKL.GUAragorn_CHRB
				AnimationMode		= ONCE
				AnimationPriority	= 1
			End
			Flags					= RESTART_ANIM_WHEN_COMPLETE				
		End
		
		AnimationState				= EMOTION_TAUNTING
			StateName				= STATE_ready
			Animation				= CHRB
				AnimationName		= GUAragorn_SKL.GUAragorn_CHRB
				AnimationMode		= ONCE
				AnimationPriority	= 1
			End
			Flags					= RESTART_ANIM_WHEN_COMPLETE				
		End
		
		AnimationState				= EMOTION_ALERT
			StateName				= STATE_ready
			Animation				= IDLA
				AnimationName		= GUAragorn_SKL.GUAragorn_IDLA
				AnimationMode		= ONCE
				AnimationPriority	= 1
			End
		End

		AnimationState				= EMOTION_MORALE_HIGH
			StateName				= STATE_ready
			Animation				= ATKN
				AnimationName		= GUAragorn_SKL.GUAragorn_ATKN
				AnimationMode		= ONCE
				AnimationPriority	= 1
			End
			Animation				= ATKP
				AnimationName		= GUAragorn_SKL.GUAragorn_ATKP
				AnimationMode		= ONCE
				AnimationPriority	= 15
			End
			Animation				= TNTC
				AnimationName		= GUAragorn_SKL.GUAragorn_TNTD
				AnimationMode		= ONCE
				AnimationPriority	= 30
			End
			Animation				= TNTD
				AnimationName		= GUAragorn_SKL.GUAragorn_TNTD
				AnimationMode		= ONCE
				AnimationPriority	= 30
			End
			Flags					= RESTART_ANIM_WHEN_COMPLETE				
		End
		
		AnimationState				= ENGAGED
			StateName				= STATE_ready
			Animation				= IDLA
				AnimationName		= GUAragorn_SKL.GUAragorn_IDLA
				AnimationMode		= ONCE
				UseWeaponTiming		= Yes
				AnimationPriority	= 1
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End

		AnimationState				= RAISING_FLAG
			StateName				= STATE_ready
			Animation				= CHRB
				AnimationName		= GUAragorn_SKL.GUAragorn_CHRB
				AnimationMode		= LOOP
			End
		End

		AnimationState				= SELECTED
			StateName				= STATE_attention
			Animation				= ATNE
				AnimationName		= GUAragorn_SKL.GUAragorn_ATNE
				AnimationMode		= LOOP
				AnimationBlendTime	= 5
				AnimationMustCompleteBlend = yes
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_bored" then CurDrawableSetTransitionAnimState("TRANS_boredToAttention") end
			EndScript
		End
				
	End
End

CommandSet = NewArveduiCommandSet

AddModule ModuleTag_CreateAHeroBombard_Level1
  Behavior = UnpauseSpecialPowerUpgrade ModuleTag_CreateAHeroBombard_Level1
	SpecialPowerTemplate = SpecialAbilityCreateAHeroBombard_Level1
	TriggeredBy = Upgrade_CreateAHeroBombard_Level1
  End
  End

AddModule ModuleTag_CreateAHeroBombardStarter_Level1
  Behavior = SpecialPowerModule ModuleTag_CreateAHeroBombardStarter_Level1
	SpecialPowerTemplate		= SpecialAbilityCreateAHeroBombard_Level1
	UpdateModuleStartsAttack	= Yes
	StartsPaused			= Yes
  End
  End

AddModule ModuleTag_CreateAHeroBombardUpdate_Level1
  Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_CreateAHeroBombardUpdate_Level1
	SpecialPowerTemplate    = SpecialAbilityCreateAHeroBombard_Level1
	WhichSpecialWeapon		= 4							; use MODELCONDITION_SPECIAL_WEAPON_FOUR
	SkipContinue			= Yes

	UnpackTime              = 900
	PreparationTime         = 1   
	PersistentPrepTime      = 1500 
	PackTime                = 1100
	
	FreezeAfterTriggerDuration	= 2500					; make sure we can't move immediately after.

	AwardXPForTriggering    = 0		
	StartAbilityRange		= 300.0
	MustFinishAbility		= Yes
	SpecialWeapon			= CreateAHeroBombardWeapon
  End
  End

       
AddModule ModuleTag_08 ; Module starts asleep, and wakes up when thrown.
    Behavior = BezierProjectileBehavior ModuleTag_08 ; Module starts asleep, and wakes up when thrown.
		; To tweak a Bezier path
		FirstHeight = 75  ; Height of Bezier control points above highest intervening terrain
		SecondHeight = 35
		FirstPercentIndent = 20% ; Percentage of shot distance control points are placed
		SecondPercentIndent = 70%
		TumbleRandomly = Yes

		CrushStyle = Yes ; I don't detonate, I just hit

		BounceCount = 0   ; When I hit the ground, I'll arc again

		FinalStuckTime = 1200 ; Can't move for this long afterwards

		GroundHitFX       = FX_RogashLeapLand
		GroundHitWeapon   = RogashLeapWarhead
		PreLandingStateTime = 200;75; Look ahead to the end of the arc, and get the ABOUT_TO_HIT flag this far in advance
	End
        End

 


AddModule ModuleTag_LeapEnabler	
        Behavior = UnpauseSpecialPowerUpgrade ModuleTag_LeapEnabler
		SpecialPowerTemplate = SpecialAbilityGimliLeap
		TriggeredBy = Upgrade_GimliLeapTrigger
	End
        End

AddModule ModuleTag_LeapStarter	
        Behavior = SpecialPowerModule ModuleTag_LeapStarter                      
		SpecialPowerTemplate		= SpecialAbilityGimliLeap
		UpdateModuleStartsAttack	= Yes
		StartsPaused			= Yes
		InitiateSound			= GimliVoiceAttackLeap
	End
        End

AddModule ModuleTag_LeapUpdate 	
        Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_LeapUpdate   
		SpecialPowerTemplate    = SpecialAbilityGimliLeap

		UnpackTime              = 600
		PackTime                = 300 ; Putting horn away

		AwardXPForTriggering    = 0
		MustFinishAbility	= Yes
		StartAbilityRange = 100.0
		
		SpecialWeapon = RohanGimliLeap
		BusyForDuration = 2000 ; don't accept any AI for this long... ai commands will be queued

;		ApproachRequiresLOS = No
		WhichSpecialWeapon = 2
        TriggerSound = GimliLeapVoice
	End
        End


AddModule ModuleTag_SlayerEnabler
        Behavior = UnpauseSpecialPowerUpgrade ModuleTag_SlayerEnabler
		SpecialPowerTemplate = SpecialAbilityGimliHeroMode
		TriggeredBy = Upgrade_GimliSlayerTrigger
	End
        End


AddModule ModuleTag_SlayerStarter
	Behavior = SpecialPowerModule ModuleTag_SlayerStarter                      
		SpecialPowerTemplate      = SpecialAbilityGimliHeroMode
		UpdateModuleStartsAttack  = Yes
		StartsPaused = Yes
	End
        End
 

AddModule ModuleTag_Slayer
	Behavior = HeroModeSpecialAbilityUpdate ModuleTag_Slayer   
		SpecialPowerTemplate    = SpecialAbilityGimliHeroMode
		UnpackingVariation		= 1

		UnpackTime              = 0 ;no special animations 
		PreparationTime         = 0    ;  
		PackTime                = 0 ;

		;PackSound               = 
		;UnpackSound             = 
		;TriggerSound            = 
		;PrepSoundLoop           = 
		AwardXPForTriggering    = 0
		
		HeroAttributeModifier = Slayer
		HeroEffectDuration = 20000
	End
        End

AddModule ModuleTag_SmiteEnabler
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_SmiteEnabler
		SpecialPowerTemplate = SpecialAbilitySpearThrow
		TriggeredBy = Upgrade_EomerSpear
	End
	End

AddModule ModuleTag_EowynSmiteStarter 
	Behavior = SpecialPowerModule ModuleTag_EowynSmiteStarter                      
		SpecialPowerTemplate		= SpecialAbilitySpearThrow
		UpdateModuleStartsAttack	= Yes
		StartsPaused			= Yes
		InitiateSound			= EomerVoiceAttackSpear
	End
	End

AddModule ModuleTag_SpecialAbilitySmiteUpdate
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_SpecialAbilitySmiteUpdate   
		SpecialPowerTemplate    = SpecialAbilitySpearThrow

		UnpackTime              = 2000
		PackTime                = 2000 

		AwardXPForTriggering    = 0
		
		StartAbilityRange		= 275.0
		ApproachRequiresLOS		= Yes
		
		SpecialWeapon = RohanEomerSpear
		WhichSpecialWeapon = 1
	End
	End
	
AddModule ModuleTag_WordEnabler
        Behavior = UnpauseSpecialPowerUpgrade ModuleTag_WordEnabler
		SpecialPowerTemplate = SpecialAbilityWordOfPower
		TriggeredBy = Upgrade_GandalfWordOfPower
	End
        End

AddModule ModuleTag_WordStarter
	Behavior = SpecialPowerModule ModuleTag_WordStarter       
		SpecialPowerTemplate      = SpecialAbilityWordOfPower
		UpdateModuleStartsAttack  = Yes
		StartsPaused		  	  = Yes
	End
        End

AddModule ModuleTag_WordWeaponFireUpdate
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_WordWeaponFireUpdate   
		SpecialPowerTemplate    = SpecialAbilityWordOfPower
		WhichSpecialWeapon		= 1
		SkipContinue			= Yes

		UnpackTime              = 1700 
		PackTime                = 1	
		FreezeAfterTriggerDuration = 2500 ; Hold AI for this long after we fire.
		
		AwardXPForTriggering    = 0		
		StartAbilityRange		= 80.0
		
		SpecialWeapon			= GandalfWordOfPower
	End
        End
	
AddModule ModuleTag_LightningEnabler
        Behavior = UnpauseSpecialPowerUpgrade ModuleTag_LightningEnabler
		SpecialPowerTemplate = SpecialAbilityLightningSword
		TriggeredBy = Upgrade_GandalfLightningSword
	End
        End

AddModule ModuleTag_11 
	Behavior = SpecialPowerModule ModuleTag_11                      
		SpecialPowerTemplate		= SpecialAbilityLightningSword
		UpdateModuleStartsAttack	= Yes
		StartsPaused			= Yes
		InitiateSound			= GandalfVoiceAttackLightningSword	;this plays when he targets, not when he fires
	End
        End

AddModule ModuleTag_12 
	Behavior = ArrowStormUpdate ModuleTag_12                
		SpecialPowerTemplate    = SpecialAbilityLightningSword
		StartAbilityRange       = 275.0
		UnpackingVariation		= 1
		
		UnpackTime              = 2500 ; Pull out arrow
		PreparationTime         = 1 ; Quick shot
		PersistentPrepTime      = 500 ; looping the quick shot
		PackTime                = 1500 ; back to idle

		ApproachRequiresLOS     = Yes ; required so that it doesn't shoot through walls
		AwardXPForTriggering    = 0
		
		 ActiveLoopSound		= GandalfLightningLoop  ; Sound loops entire time ability is actively firing

		;Specific to ArrowStorm
		WeaponTemplate  = WizardTowerLightningWeapon
		TargetRadius    = 120
		ShotsPerTarget  = 1
		ShotsPerBurst   = 1
		MaxShots        = 6  ;// will double up if run out of targets
	End
        End

AddModule
	Behavior = FireWeaponWhenDeadBehavior ModuleTag_DIELIKETHIS
    	StartsActive = Yes
    	DeathWeapon = SauronFiresOfDoomWeapon
  End
  End


End

ExperienceLevel	AragornLevelMP2
	TargetNames						=	ARAGORN	
	RequiredExperience				=	ARAGORN_LVL2_EXP_NEEDED
	ExperienceAward					=	ARAGORN_LVL2_EXP_AWARD 
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	Rank							=	2
	AttributeModifiers				=	HeroLevelUpDamage1
	Upgrades						=	Upgrade_AragornBladeMaster
        Upgrades                                                =       Upgrade_EomerSpear
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40
		MaxRadius					=	200
		MaxSelectedUnits			=	40
	End	
End	

ExperienceLevel	AragornLevelMP3
	TargetNames						=	ARAGORN	
	RequiredExperience				=	ARAGORN_LVL3_EXP_NEEDED
	ExperienceAward					=	ARAGORN_LVL3_EXP_AWARD 	
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	Rank							=	3
        Upgrades						=	Upgrade_GimliLeapTrigger
	AttributeModifiers				=	HeroLevelUpDamage2
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40
		MaxRadius					=	200
		MaxSelectedUnits			=	40
	End	
End

ExperienceLevel	AragornLevelMP4
	TargetNames						=	ARAGORN	
	RequiredExperience				=	ARAGORN_LVL4_EXP_NEEDED
	ExperienceAward					=	ARAGORN_LVL4_EXP_AWARD 	
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	Rank							=	4
	Upgrades                                                = Upgrade_CreateAHeroBombard_Level1
	AttributeModifiers				=	HeroLevelUpDamage3
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40
		MaxRadius					=	200
		MaxSelectedUnits			=	40
	End	
End	
	

ExperienceLevel	AragornLevelMP6
	TargetNames						=	ARAGORN	
	RequiredExperience				=	ARAGORN_LVL6_EXP_NEEDED
	ExperienceAward					=	ARAGORN_LVL6_EXP_AWARD 	
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	Rank							=	6
	AttributeModifiers				=	HeroLevelUpDamage5
	Upgrades						=	Upgrade_GandalfLightningSword
        Upgrades                                                =       Upgrade_CreateAHeroBombard_Level2
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%
		OpacityMax					=	100%
		MinRadius					=	40
		MaxRadius					=	200
		MaxSelectedUnits			=	40
	End	
End	

ExperienceLevel	AragornLevelMP9
	TargetNames						=	ARAGORN	
	RequiredExperience				=	ARAGORN_LVL9_EXP_NEEDED
	ExperienceAward					=	ARAGORN_LVL9_EXP_AWARD 	
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	Rank							=	9
        Upgrades						=	Upgrade_GimliSlayerTrigger
	AttributeModifiers				=	HeroLevelUpDamage8
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40
		MaxRadius					=	200
		MaxSelectedUnits			=	40
	End	
End	

ExperienceLevel	AragornLevelMP10
	TargetNames						=	ARAGORN	
	RequiredExperience				=	ARAGORN_LVL10_EXP_NEEDED
	ExperienceAward					=	ARAGORN_LVL10_EXP_AWARD
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	Rank							=	10
	Upgrades						=	Upgrade_GandalfWordOfPower
	AttributeModifiers				=	HeroLevelUpDamage9
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40
		MaxRadius					=	200
		MaxSelectedUnits			=	40
	End	
End	

Object GondorGandalf

CommandSet NewHaldirCommandSet

AddModule ModuleTag_SmiteEnabler
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_SmiteEnabler
		SpecialPowerTemplate = SpecialAbilitySpearThrow
		TriggeredBy = Upgrade_EomerSpear
	End
	End

AddModule ModuleTag_EowynSmiteStarter 
	Behavior = SpecialPowerModule ModuleTag_EowynSmiteStarter                      
		SpecialPowerTemplate		= SpecialAbilitySpearThrow
		UpdateModuleStartsAttack	= Yes
		StartsPaused			= Yes
		InitiateSound			= EomerVoiceAttackSpear
	End
	End

AddModule ModuleTag_SpecialAbilitySmiteUpdate
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_SpecialAbilitySmiteUpdate   
		SpecialPowerTemplate    = SpecialAbilitySpearThrow

		UnpackTime              = 2000
		PackTime                = 2000 

		AwardXPForTriggering    = 0
		
		StartAbilityRange		= 275.0
		ApproachRequiresLOS		= Yes
		
		SpecialWeapon = RohanEomerSpear
		WhichSpecialWeapon = 1
	End
	End

AddModule ModuleTag_08_new ; Module starts asleep, and wakes up when thrown.
    Behavior = BezierProjectileBehavior ModuleTag_08_new ; Module starts asleep, and wakes up when thrown.
		; To tweak a Bezier path
		FirstHeight = 75  ; Height of Bezier control points above highest intervening terrain
		SecondHeight = 35
		FirstPercentIndent = 20% ; Percentage of shot distance control points are placed
		SecondPercentIndent = 70%
		TumbleRandomly = Yes

		CrushStyle = Yes ; I don't detonate, I just hit

		BounceCount = 0   ; When I hit the ground, I'll arc again

		FinalStuckTime = 1200 ; Can't move for this long afterwards

		GroundHitFX       = FX_RogashLeapLand
		GroundHitWeapon   = RogashLeapWarhead
		PreLandingStateTime = 200;75; Look ahead to the end of the arc, and get the ABOUT_TO_HIT flag this far in advance
	End
        End

 


AddModule ModuleTag_LeapEnabler	
        Behavior = UnpauseSpecialPowerUpgrade ModuleTag_LeapEnabler
		SpecialPowerTemplate = SpecialAbilityGimliLeap
		TriggeredBy = Upgrade_GimliLeapTrigger
	End
        End

AddModule ModuleTag_LeapStarter	
        Behavior = SpecialPowerModule ModuleTag_LeapStarter                      
		SpecialPowerTemplate		= SpecialAbilityGimliLeap
		UpdateModuleStartsAttack	= Yes
		StartsPaused			= Yes
		InitiateSound			= GimliVoiceAttackLeap
	End
        End

AddModule ModuleTag_LeapUpdate 	
        Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_LeapUpdate   
		SpecialPowerTemplate    = SpecialAbilityGimliLeap

		UnpackTime              = 600
		PackTime                = 300 ; Putting horn away

		AwardXPForTriggering    = 0
		MustFinishAbility	= Yes
		StartAbilityRange = 100.0
		
		SpecialWeapon = RohanGimliLeap
		BusyForDuration = 2000 ; don't accept any AI for this long... ai commands will be queued

;		ApproachRequiresLOS = No
		WhichSpecialWeapon = 2
        TriggerSound = GimliLeapVoice
	End
        End

AddModule ModuleTag_SlayerEnabler
        Behavior = UnpauseSpecialPowerUpgrade ModuleTag_StompEnabler
		SpecialPowerTemplate = SpecialAbilityWildMountainGiantStomp
		TriggeredBy = Upgrade_GothmogCarnage
	End
        End


AddModule
	Behavior = SpecialPowerModule ModuleTag_StompStarter       
		SpecialPowerTemplate      = SpecialAbilityWildMountainGiantStomp
		UpdateModuleStartsAttack  = Yes
		StartsPaused		  	  = Yes
	End
        End

AddModule
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_StompWeaponFireUpdate   
		SpecialPowerTemplate    = SpecialAbilityWildMountainGiantStomp
		WhichSpecialWeapon		= 2		; SPECIAL_WEAPON_TWO
		SkipContinue			= Yes

		UnpackTime              = 1367		//Frames 1-41 (of 97)
		PackTime                = 1867		//Remaining frames 41-97
		;FreezeAfterTriggerDuration = 2500 ; Hold AI for this long after we fire.
		
		AwardXPForTriggering    = 0		
		StartAbilityRange		= 80.0
		
		SpecialWeapon			= ElvenFloodgateWeapon
	End
        End
	
AddModule ModuleTag_IncinerateUnpause
        Behavior = UnpauseSpecialPowerUpgrade ModuleTag_IncinerateUnpause
		SpecialPowerTemplate	= SpecialAbilityDrogothIncinerate
		TriggeredBy				= Upgrade_ObjectLevel10 ; Upgrade_ObjectLevel6
	End
        End

AddModule ModuleTag_IncinerateStarter
	Behavior = SpecialPowerModule ModuleTag_IncinerateStarter
		SpecialPowerTemplate		= SpecialAbilityDrogothIncinerate
		UpdateModuleStartsAttack	= Yes
		StartsPaused				= Yes
		InitiateSound				= DrogothVoxAttack
	End
        End

AddModule ModuleTag_IncinerateUpdate
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_IncinerateUpdate
		SpecialPowerTemplate    = SpecialAbilityDrogothIncinerate
		UnpackTime              = 1300
		PackTime                = 3700
		AwardXPForTriggering    = 0
		StartAbilityRange		= 40.0
		SpecialWeapon = IsengardExplosiveMineExplosionWeapon
	End
        End	


AddModule 
        Behavior = UnpauseSpecialPowerUpgrade ModuleTag_FiresOfDoomUnpause
		SpecialPowerTemplate	= FiresOfDoomSpecialPower
		TriggeredBy				= Upgrade_ObjectLevel10 ; Upgrade_ObjectLevel6
	End
        End

AddModule 
    Behavior = SpecialPowerModule ModuleTag_FiresOfDoom                   
		SpecialPowerTemplate		= FiresOfDoomSpecialPower
		UpdateModuleStartsAttack	= Yes
		StartsPaused				= Yes
		InitiateSound				= SauronVoxBlackspeechFiresOfDoom
	End
        End

AddModule
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_FiresOfDoomUpdate
		SpecialPowerTemplate    = FiresOfDoomSpecialPower
		WhichSpecialWeapon		= 1							; use MODELCONDITION_SPECIAL_WEAPON_ONE
		SkipContinue			= Yes

		UnpackTime              = 900
		PreparationTime         = 1   
		PersistentPrepTime      = 1500 
		PackTime                = 1100
		
		FreezeAfterTriggerDuration	= 2500					; make sure we can't move immediately after.

		AwardXPForTriggering    = 0		
		StartAbilityRange		= 300.0
		MustFinishAbility		= Yes
		SpecialWeapon			= SauronFiresOfDoomWeapon
		;TriggerSound			= SpellRainOfFireMS
	End
        End

AddModule
	Behavior = FireWeaponWhenDeadBehavior ModuleTag_DIELIKETHIS
    	StartsActive = Yes
    	DeathWeapon = SauronFiresOfDoomWeapon
  End
  End

AddModule ModuleTag_SlayerEnabler
        Behavior = UnpauseSpecialPowerUpgrade ModuleTag_SlayerEnabler
		SpecialPowerTemplate = SpecialAbilityGimliHeroMode
		TriggeredBy = Upgrade_GimliSlayerTrigger
	End
        End


AddModule ModuleTag_SlayerStarter
	Behavior = SpecialPowerModule ModuleTag_SlayerStarter                      
		SpecialPowerTemplate      = SpecialAbilityGimliHeroMode
		UpdateModuleStartsAttack  = Yes
		StartsPaused = Yes
	End
        End
 

AddModule ModuleTag_Slayer
	Behavior = HeroModeSpecialAbilityUpdate ModuleTag_Slayer   
		SpecialPowerTemplate    = SpecialAbilityGimliHeroMode
		UnpackingVariation		= 1

		UnpackTime              = 0 ;no special animations 
		PreparationTime         = 0    ;  
		PackTime                = 0 ;

		;PackSound               = 
		;UnpackSound             = 
		;TriggerSound            = 
		;PrepSoundLoop           = 
		AwardXPForTriggering    = 0
		
		HeroAttributeModifier = Slayer
		HeroEffectDuration = 20000
	End
        End



End


ExperienceLevel	GandalfLevel2
	TargetNames						=	GANDALF
	RequiredExperience				=	GANDALF_LVL2_EXP_NEEDED
	ExperienceAward					=	GANDALF_LVL2_EXP_AWARD 
	AttributeModifiers				=	HeroLevelUpDamage1
	Rank							=	2
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	Upgrades                                                =       Upgrade_EomerSpear Upgrade_GandalfWhite	
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%
		OpacityMax					=	100%
		MinRadius					=	40
		MaxRadius					=	200	
		MaxSelectedUnits				=	40
	End	
END	

ExperienceLevel	GandalfLevel3
	TargetNames						=	GANDALF
	RequiredExperience				=	GANDALF_LVL3_EXP_NEEDED
	ExperienceAward					=	GANDALF_LVL3_EXP_AWARD 
	 AttributeModifiers				=	HeroLevelUpDamage2
	Rank							=	3
        LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
        Upgrades                                                =       Upgrade_GimliLeapTrigger
	SelectionDecal      
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%
		OpacityMax					=	100%
		MinRadius					=	40
		MaxRadius					=	200	
		MaxSelectedUnits			=	40
	End	
END	

ExperienceLevel	GandalfLevel4
	TargetNames						=	GANDALF
	RequiredExperience				=	GANDALF_LVL4_EXP_NEEDED
	ExperienceAward					=	GANDALF_LVL4_EXP_AWARD 
	AttributeModifiers				=	HeroLevelUpDamage3
        Upgrades						=	Upgrade_AragornBladeMaster
	Rank							=	4
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%
		OpacityMax					=	100%
		MinRadius					=	40
		MaxRadius					=	200	
		MaxSelectedUnits			=	40
	End	
END	

ExperienceLevel	GandalfLevel5
	TargetNames						=	GANDALF
	RequiredExperience				=	GANDALF_LVL5_EXP_NEEDED
	ExperienceAward					=	GANDALF_LVL5_EXP_AWARD 
	Upgrades						=	Upgrade_GimliSlayerTrigger
        Upgrades                                        =       Upgrade_ObjectLevel6
        AttributeModifiers				=	HeroLevelUpDamage4	
	Rank							=	5
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%
		OpacityMax					=	100%
		MinRadius					=	40
		MaxRadius					=	200	
		MaxSelectedUnits				=	40
	End	
END	

ExperienceLevel	GandalfLevel6
	TargetNames						=	GANDALF
	RequiredExperience				=	GANDALF_LVL6_EXP_NEEDED
	ExperienceAward					=	GANDALF_LVL6_EXP_AWARD 
	AttributeModifiers				=	HeroLevelUpDamage5	
	Rank							=	6
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
        Upgrades                                        =       Upgrade_GothmogCarnage
	
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%
		OpacityMax					=	100%
		MinRadius					=	40
		MaxRadius					=	200	
		MaxSelectedUnits			=	40
	End	
END	


ExperienceLevel	GandalfLevel7
	TargetNames						=	GANDALF
	RequiredExperience				=	GANDALF_LVL7_EXP_NEEDED
	ExperienceAward					=	GANDALF_LVL7_EXP_AWARD 
	AttributeModifiers				=	HeroLevelUpDamage6	
	Rank							=	7
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	Upgrades						=	Upgrade_ObjectLevel10 Upgrade_ObjectLevel6

	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%
		OpacityMax					=	100%
		MinRadius					=	40
		MaxRadius					=	200	
		MaxSelectedUnits			=	40
	End	
END	

ExperienceLevel	GandalfLevel8
	TargetNames						=	GANDALF
	RequiredExperience				=	GANDALF_LVL8_EXP_NEEDED
	ExperienceAward					=	GANDALF_LVL8_EXP_AWARD 
	AttributeModifiers				=	HeroLevelUpDamage7
	Rank							=	8
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
        Upgrades                                                =       Upgrade_ObjectLevel10
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%
		OpacityMax					=	100%
		MinRadius					=	40
		MaxRadius					=	200	
		MaxSelectedUnits			=	40
	End	
END		

ExperienceLevel	GandalfLevel10
	TargetNames						=	GANDALF
	RequiredExperience				=	GANDALF_LVL10_EXP_NEEDED
	ExperienceAward					=	GANDALF_LVL10_EXP_AWARD 
	AttributeModifiers				=	HeroLevelUpDamage9
	Rank							=	10
	Upgrades						=	Upgrade_GandalfWordOfPower
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%
		OpacityMax					=	100%
		MinRadius					=	40
		MaxRadius					=	200	
		MaxSelectedUnits			=	40
	End	
END	



Object TomBombadil

CommandSet NewTomBombadilCommandSet

AddModule 
        Behavior = UnpauseSpecialPowerUpgrade ModuleTag_FiresOfDoomUnpause
		SpecialPowerTemplate	= FiresOfDoomSpecialPower
		TriggeredBy				= Upgrade_ObjectLevel10 ; Upgrade_ObjectLevel6
	End
        End

AddModule 
    Behavior = SpecialPowerModule ModuleTag_FiresOfDoom                   
		SpecialPowerTemplate		= FiresOfDoomSpecialPower
		UpdateModuleStartsAttack	= Yes
		StartsPaused				= Yes
		InitiateSound				= SauronVoxBlackspeechFiresOfDoom
	End
        End

AddModule
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_FiresOfDoomUpdate
		SpecialPowerTemplate    = FiresOfDoomSpecialPower
		WhichSpecialWeapon		= 1							; use MODELCONDITION_SPECIAL_WEAPON_ONE
		SkipContinue			= Yes

		UnpackTime              = 900
		PreparationTime         = 1   
		PersistentPrepTime      = 1500 
		PackTime                = 1100
		
		FreezeAfterTriggerDuration	= 2500					; make sure we can't move immediately after.

		AwardXPForTriggering    = 0		
		StartAbilityRange		= 300.0
		MustFinishAbility		= Yes
		SpecialWeapon			= SauronFiresOfDoomWeapon
		;TriggerSound			= SpellRainOfFireMS
	End
        End

AddModule
	Behavior = FireWeaponWhenDeadBehavior ModuleTag_DIELIKETHIS
    	StartsActive = Yes
    	DeathWeapon = SauronFiresOfDoomWeapon
  End
  End


AddModule ModuleTag_08_new ; Module starts asleep, and wakes up when thrown.
    Behavior = BezierProjectileBehavior ModuleTag_08_new ; Module starts asleep, and wakes up when thrown.
		; To tweak a Bezier path
		FirstHeight = 75  ; Height of Bezier control points above highest intervening terrain
		SecondHeight = 35
		FirstPercentIndent = 20% ; Percentage of shot distance control points are placed
		SecondPercentIndent = 70%
		TumbleRandomly = Yes

		CrushStyle = Yes ; I don't detonate, I just hit

		BounceCount = 0   ; When I hit the ground, I'll arc again

		FinalStuckTime = 1200 ; Can't move for this long afterwards

		GroundHitFX       = FX_RogashLeapLand
		GroundHitWeapon   = RogashLeapWarhead
		PreLandingStateTime = 200;75; Look ahead to the end of the arc, and get the ABOUT_TO_HIT flag this far in advance
	End
        End

 


AddModule ModuleTag_LeapEnabler	
        Behavior = UnpauseSpecialPowerUpgrade ModuleTag_LeapEnabler
		SpecialPowerTemplate = SpecialAbilityGimliLeap
		TriggeredBy = Upgrade_GimliLeapTrigger
	End
        End

AddModule ModuleTag_LeapStarter	
        Behavior = SpecialPowerModule ModuleTag_LeapStarter                      
		SpecialPowerTemplate		= SpecialAbilityGimliLeap
		UpdateModuleStartsAttack	= Yes
		StartsPaused			= Yes
		InitiateSound			= GimliVoiceAttackLeap
	End
        End

AddModule ModuleTag_LeapUpdate  	
        Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_LeapUpdate    
		SpecialPowerTemplate    = SpecialAbilityGimliLeap

		UnpackTime              = 600
		PackTime                = 300 ; Putting horn away

		AwardXPForTriggering    = 0
		MustFinishAbility	= Yes
		StartAbilityRange = 100.0
		
		SpecialWeapon = RohanGimliLeap
		BusyForDuration = 2000 ; don't accept any AI for this long... ai commands will be queued

;		ApproachRequiresLOS = No
		WhichSpecialWeapon = 2
        TriggerSound = GimliLeapVoice
	End
        End

AddModule ModuleTag_IncinerateUnpause
        Behavior = UnpauseSpecialPowerUpgrade ModuleTag_IncinerateUnpause
		SpecialPowerTemplate	= SpecialAbilityDrogothIncinerate
		TriggeredBy				= Upgrade_ObjectLevel10 ; Upgrade_ObjectLevel6
	End
        End

AddModule ModuleTag_IncinerateStarter
	Behavior = SpecialPowerModule ModuleTag_IncinerateStarter
		SpecialPowerTemplate		= SpecialAbilityDrogothIncinerate
		UpdateModuleStartsAttack	= Yes
		StartsPaused				= Yes
		InitiateSound				= DrogothVoxAttack
	End
        End

AddModule ModuleTag_IncinerateUpdate
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_IncinerateUpdate
		SpecialPowerTemplate    = SpecialAbilityDrogothIncinerate
		UnpackTime              = 1300
		PackTime                = 3700
		AwardXPForTriggering    = 0
		StartAbilityRange		= 40.0
		SpecialWeapon = IsengardExplosiveMineExplosionWeapon
	End
        End	

AddModule ModuleTag_SlayerEnabler
        Behavior = UnpauseSpecialPowerUpgrade ModuleTag_SlayerEnabler
		SpecialPowerTemplate = SpecialAbilityGimliHeroMode
		TriggeredBy = Upgrade_GimliSlayerTrigger
	End
        End


AddModule ModuleTag_SlayerStarter
	Behavior = SpecialPowerModule ModuleTag_SlayerStarter                      
		SpecialPowerTemplate      = SpecialAbilityGimliHeroMode
		UpdateModuleStartsAttack  = Yes
		StartsPaused = Yes
	End
        End
 

AddModule ModuleTag_Slayer
	Behavior = HeroModeSpecialAbilityUpdate ModuleTag_Slayer   
		SpecialPowerTemplate    = SpecialAbilityGimliHeroMode
		UnpackingVariation		= 1

		UnpackTime              = 0 ;no special animations 
		PreparationTime         = 0    ;  
		PackTime                = 0 ;

		;PackSound               = 
		;UnpackSound             = 
		;TriggerSound            = 
		;PrepSoundLoop           = 
		AwardXPForTriggering    = 0
		
		HeroAttributeModifier = Slayer
		HeroEffectDuration = 20000
	End
        End




AddModule ModuleTag_FloodEnabler
        Behavior = UnpauseSpecialPowerUpgrade ModuleTag_FloodEnabler
		SpecialPowerTemplate = SpecialAbilityPersonalFlood
		TriggeredBy = Upgrade_ArwenFloodTrigger
	End
        End

AddModule ModuleTag_FloodStarter  	
	Behavior = SpecialPowerModule ModuleTag_FloodStarter                      
		SpecialPowerTemplate		= SpecialAbilityPersonalFlood
		UpdateModuleStartsAttack	= Yes
		StartsPaused				= Yes
		InitiateSound				= ArwenVoiceFlood
	End
        End


AddModule ModuleTag_FloodUpdate
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_FloodUpdate   
		SpecialPowerTemplate    = SpecialAbilityPersonalFlood

		UnpackTime              = 1300
		PackTime                = 1500

		StartAbilityRange = 150.0
		
		
		SpecialWeapon = ArwenPersonalFlood
		WhichSpecialWeapon = 1
	End
        End
AddModule
  Behavior = AutoHealBehavior ModuleTag_FaramirHealing
		StartsActive = Yes
		HealingAmount = HERO_HEAL_AMOUNT
		HealingDelay = 1000
		StartHealingDelay = HERO_HEAL_DELAY
		HealOnlyIfNotInCombat = Yes
	End
        End
	
End

ExperienceLevel	TomBombadilLevel10
	TargetNames						=	TomBombadil TomBombadil_Summoned
	RequiredExperience				=	1
	ExperienceAward					=	40	
	Rank							=	10
	Upgrades						=	Upgrade_ArwenFloodTrigger
        Upgrades						=	Upgrade_GimliSlayerTrigger
        Upgrades						=	Upgrade_ObjectLevel6
        Upgrades						=	Upgrade_ObjectLevel10
        Upgrades                                                =       Upgrade_GimliLeapTrigger
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	80%
		OpacityMax					=	100%
		MinRadius					=	70
		MaxRadius					=	200	
		MaxSelectedUnits			=	40
	End	
END	

Object ElvenGlorfindel

CommandSet NewGlorfindelCommandSet



AddModule ModuleTag_08_new ; Module starts asleep, and wakes up when thrown.
    Behavior = BezierProjectileBehavior ModuleTag_08_new ; Module starts asleep, and wakes up when thrown.
		; To tweak a Bezier path
		FirstHeight = 75  ; Height of Bezier control points above highest intervening terrain
		SecondHeight = 35
		FirstPercentIndent = 20% ; Percentage of shot distance control points are placed
		SecondPercentIndent = 70%
		TumbleRandomly = Yes

		CrushStyle = Yes ; I don't detonate, I just hit

		BounceCount = 0   ; When I hit the ground, I'll arc again

		FinalStuckTime = 1200 ; Can't move for this long afterwards

		GroundHitFX       = FX_RogashLeapLand
		GroundHitWeapon   = RogashLeapWarhead
		PreLandingStateTime = 200;75; Look ahead to the end of the arc, and get the ABOUT_TO_HIT flag this far in advance
	End
        End

 


AddModule ModuleTag_LeapEnabler	
        Behavior = UnpauseSpecialPowerUpgrade ModuleTag_LeapEnabler
		SpecialPowerTemplate = SpecialAbilityGimliLeap
		TriggeredBy = Upgrade_GimliLeapTrigger
	End
        End

AddModule ModuleTag_LeapStarter	
        Behavior = SpecialPowerModule ModuleTag_LeapStarter                      
		SpecialPowerTemplate		= SpecialAbilityGimliLeap
		UpdateModuleStartsAttack	= Yes
		StartsPaused			= Yes
		InitiateSound			= GimliVoiceAttackLeap
	End
        End

AddModule ModuleTag_LeapUpdate 	
        Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_LeapUpdate   
		SpecialPowerTemplate    = SpecialAbilityGimliLeap

		UnpackTime              = 600
		PackTime                = 300 ; Putting horn away

		AwardXPForTriggering    = 0
		MustFinishAbility	= Yes
		StartAbilityRange = 100.0
		
		SpecialWeapon = RohanGimliLeap
		BusyForDuration = 2000 ; don't accept any AI for this long... ai commands will be queued

;		ApproachRequiresLOS = No
		WhichSpecialWeapon = 2
        TriggerSound = GimliLeapVoice
	End
        End

AddModule ModuleTag_SlayerEnabler
        Behavior = UnpauseSpecialPowerUpgrade ModuleTag_StompEnabler
		SpecialPowerTemplate = SpecialAbilityWildMountainGiantStomp
		TriggeredBy = Upgrade_GothmogCarnage
	End
        End


AddModule
	Behavior = SpecialPowerModule ModuleTag_StompStarter       
		SpecialPowerTemplate      = SpecialAbilityWildMountainGiantStomp
		UpdateModuleStartsAttack  = Yes
		StartsPaused		  	  = Yes
	End
        End

AddModule
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_StompWeaponFireUpdate   
		SpecialPowerTemplate    = SpecialAbilityWildMountainGiantStomp
		WhichSpecialWeapon		= 2		; SPECIAL_WEAPON_TWO
		SkipContinue			= Yes

		UnpackTime              = 1367		//Frames 1-41 (of 97)
		PackTime                = 1867		//Remaining frames 41-97
		;FreezeAfterTriggerDuration = 2500 ; Hold AI for this long after we fire.
		
		AwardXPForTriggering    = 0		
		StartAbilityRange		= 80.0
		
		SpecialWeapon			= ElvenFloodgateWeapon
	End
        End
             



AddModule ModuleTag_SlayerEnabler
        Behavior = UnpauseSpecialPowerUpgrade ModuleTag_SlayerEnabler
		SpecialPowerTemplate = SpecialAbilityGimliHeroMode
		TriggeredBy = Upgrade_GimliSlayerTrigger
	End
        End


AddModule ModuleTag_SlayerStarter
	Behavior = SpecialPowerModule ModuleTag_SlayerStarter                      
		SpecialPowerTemplate      = SpecialAbilityGimliHeroMode
		UpdateModuleStartsAttack  = Yes
		StartsPaused = Yes
	End
        End
 

AddModule ModuleTag_Slayer
	Behavior = HeroModeSpecialAbilityUpdate ModuleTag_Slayer   
		SpecialPowerTemplate    = SpecialAbilityGimliHeroMode
		UnpackingVariation		= 1

		UnpackTime              = 0 ;no special animations 
		PreparationTime         = 0    ;  
		PackTime                = 0 ;

		;PackSound               = 
		;UnpackSound             = 
		;TriggerSound            = 
		;PrepSoundLoop           = 
		AwardXPForTriggering    = 0
		
		HeroAttributeModifier = Slayer
		HeroEffectDuration = 20000
	End
        End

AddModule ModuleTag_SmiteEnabler
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_SmiteEnabler
		SpecialPowerTemplate = SpecialAbilitySpearThrow
		TriggeredBy = Upgrade_EomerSpear
	End
	End

AddModule ModuleTag_EowynSmiteStarter 
	Behavior = SpecialPowerModule ModuleTag_EowynSmiteStarter                      
		SpecialPowerTemplate		= SpecialAbilitySpearThrow
		UpdateModuleStartsAttack	= Yes
		StartsPaused			= Yes
		InitiateSound			= EomerVoiceAttackSpear
	End
	End

AddModule ModuleTag_SpecialAbilitySmiteUpdate
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_SpecialAbilitySmiteUpdate   
		SpecialPowerTemplate    = SpecialAbilitySpearThrow

		UnpackTime              = 2000
		PackTime                = 2000 

		AwardXPForTriggering    = 0
		
		StartAbilityRange		= 275.0
		ApproachRequiresLOS		= Yes
		
		SpecialWeapon = RohanEomerSpear
		WhichSpecialWeapon = 1
	End
	End

AddModule
	Behavior = FireWeaponWhenDeadBehavior ModuleTag_DIELIKETHIS
    	StartsActive = Yes
    	DeathWeapon = SauronFiresOfDoomWeapon
  End
  End



AddModule ModuleTag_LightningEnabler
        Behavior = UnpauseSpecialPowerUpgrade ModuleTag_LightningEnabler
		SpecialPowerTemplate = SpecialAbilityLightningSword
		TriggeredBy = Upgrade_GandalfLightningSword
	End
        End

AddModule ModuleTag_11 
	Behavior = SpecialPowerModule ModuleTag_11                      
		SpecialPowerTemplate		= SpecialAbilityLightningSword
		UpdateModuleStartsAttack	= Yes
		StartsPaused			= Yes
		InitiateSound			= GandalfVoiceAttackLightningSword	;this plays when he targets, not when he fires
	End
        End

AddModule ModuleTag_12 
	Behavior = ArrowStormUpdate ModuleTag_12                
		SpecialPowerTemplate    = SpecialAbilityLightningSword
		StartAbilityRange       = 275.0
		UnpackingVariation		= 1
		
		UnpackTime              = 2500 ; Pull out arrow
		PreparationTime         = 1 ; Quick shot
		PersistentPrepTime      = 500 ; looping the quick shot
		PackTime                = 1500 ; back to idle

		ApproachRequiresLOS     = Yes ; required so that it doesn't shoot through walls
		AwardXPForTriggering    = 0
		
		 ActiveLoopSound		= GandalfLightningLoop  ; Sound loops entire time ability is actively firing

		;Specific to ArrowStorm
		WeaponTemplate  = WizardTowerLightningWeapon
		TargetRadius    = 120
		ShotsPerTarget  = 1
		ShotsPerBurst   = 1
		MaxShots        = ISENGARD_WIZARDSTOWER_LIGHTNING_NUMSHOTS  ;// will double up if run out of targets
	End
        End

End

ExperienceLevel	GlorfindelLevel1
	TargetNames				=	ElvenGlorfindel
	RequiredExperience		=	1	
	ExperienceAward			=	GLORFINDEL_LVL1_EXP_AWARD 
	Rank					=	1
        Upgrades                                =       Upgrade_EomerSpear
	SelectionDecal
		Texture				=	decal_hero_good	
		Style				=	SHADOW_ALPHA_DECAL
		OpacityMin			=	50%	
		OpacityMax			=	100%
		MinRadius			=	40
		MaxRadius			=	200
		MaxSelectedUnits	=	40
	End	
End	

ExperienceLevel	GlorfindelLevel2
	TargetNames				=	ElvenGlorfindel
	RequiredExperience		=	GLORFINDEL_LVL2_EXP_NEEDED
	ExperienceAward			=	GLORFINDEL_LVL2_EXP_AWARD 				
	LevelUpFx				=	FX:GandalfLevelUp1FX
	;LevelUpOCL				=	OCL_GandalfLevelUp1OCL
	Rank					=	2
	AttributeModifiers		=	HeroLevelUpDamage1	
        Upgrades                                =       Upgrade_GimliLeapTrigger
	SelectionDecal
		Texture				=	decal_hero_good	
		Style				=	SHADOW_ALPHA_DECAL
		OpacityMin			=	50%	
		OpacityMax			=	100%
		MinRadius			=	40
		MaxRadius			=	200
		MaxSelectedUnits	=	40
	End	
End	

ExperienceLevel	GlorfindelLevel3
	TargetNames				=	ElvenGlorfindel
	RequiredExperience		=	Glorfindel_LVL3_EXP_NEEDED
	ExperienceAward			=	Glorfindel_LVL3_EXP_AWARD 	
	LevelUpFx				=	FX:GandalfLevelUp1FX
	;LevelUpOCL				=	OCL_GandalfLevelUp1OCL
	Rank					=	3
	AttributeModifiers		=	HeroLevelUpDamage2
	SelectionDecal
		Texture				=	decal_hero_good
		Style				=	SHADOW_ALPHA_DECAL
		OpacityMin			=	50%	
		OpacityMax			=	100%
		MinRadius			=	40
		MaxRadius			=	200
		MaxSelectedUnits	=	40
	End	
End	

ExperienceLevel	GlorfindelLevel4
	TargetNames				=	ElvenGlorfindel
	RequiredExperience		=	GLORFINDEL_LVL4_EXP_NEEDED
	ExperienceAward			=	GLORFINDEL_LVL4_EXP_AWARD 	
	LevelUpFx				=	FX:GandalfLevelUp1FX
	;LevelUpOCL				=	OCL_GandalfLevelUp1OCL
	Rank					=	4
	AttributeModifiers		=	HeroLevelUpDamage3
        Upgrades				=	Upgrade_GlorfindelBladeOfPurity
	SelectionDecal
		Texture				=	decal_hero_good
		Style				=	SHADOW_ALPHA_DECAL
		OpacityMin			=	50%	
		OpacityMax			=	100%
		MinRadius			=	40
		MaxRadius			=	200
		MaxSelectedUnits	=	40
	End	
End	

ExperienceLevel	GlorfindelLevel5
	TargetNames				=	ElvenGlorfindel
	RequiredExperience		=	GLORFINDEL_LVL5_EXP_NEEDED
	ExperienceAward			=	GLORFINDEL_LVL5_EXP_AWARD 	
	LevelUpFx				=	FX:GandalfLevelUp1FX
	;LevelUpOCL				=	OCL_GandalfLevelUp1OCL
	Rank					=	5
	AttributeModifiers		=	HeroLevelUpDamage4
	SelectionDecal
		Texture				=	decal_hero_good
		Style				=	SHADOW_ALPHA_DECAL
		OpacityMin			=	50%	
		OpacityMax			=	100%
		MinRadius			=	40
		MaxRadius			=	200
		MaxSelectedUnits	=	40
	End	
End	

ExperienceLevel	GlorfindelLevel6
	TargetNames				=	ElvenGlorfindel
	RequiredExperience		=	GLORFINDEL_LVL6_EXP_NEEDED
	ExperienceAward			=	GLORFINDEL_LVL6_EXP_AWARD 
	LevelUpFx				=	FX:GandalfLevelUp1FX
	;LevelUpOCL				=	OCL_GandalfLevelUp1OCL
	Rank					=	6
	AttributeModifiers		=	HeroLevelUpDamage5
	Upgrades				=	Upgrade_GothmogCarnage
	SelectionDecal
		Texture				=	decal_hero_good
		Style				=	SHADOW_ALPHA_DECAL
		OpacityMin			=	50%	
		OpacityMax			=	100%
		MinRadius			=	40
		MaxRadius			=	200
		MaxSelectedUnits	=	40
	End	
End	

ExperienceLevel	GlorfindelLevel7
	TargetNames				=	ElvenGlorfindel
	RequiredExperience		=	GLORFINDEL_LVL7_EXP_NEEDED
	ExperienceAward			=	GLORFINDEL_LVL7_EXP_AWARD 
	LevelUpFx				=	FX:GandalfLevelUp1FX
	;LevelUpOCL				=	OCL_GandalfLevelUp1OCL
	Rank					=	7
	AttributeModifiers		=	HeroLevelUpDamage6
	SelectionDecal
		Texture				=	decal_hero_good
		Style				=	SHADOW_ALPHA_DECAL
		OpacityMin			=	50%	
		OpacityMax			=	100%
		MinRadius			=	40
		MaxRadius			=	200
		MaxSelectedUnits	=	40
	End	
End	

ExperienceLevel	GlorfindelLevel8
	TargetNames				=	ElvenGlorfindel
	RequiredExperience		=	GLORFINDEL_LVL8_EXP_NEEDED
	ExperienceAward			=	GLORFINDEL_LVL8_EXP_AWARD 
	LevelUpFx				=	FX:GandalfLevelUp1FX
	;LevelUpOCL				=	OCL_GandalfLevelUp1OCL
	Rank					=	8
	AttributeModifiers		=	HeroLevelUpDamage7
	SelectionDecal
		Texture				=	decal_hero_good
		Style				=	SHADOW_ALPHA_DECAL
		OpacityMin			=	50%	
		OpacityMax			=	100%
		MinRadius			=	40
		MaxRadius			=	200
		MaxSelectedUnits	=	40
	End	
End	

ExperienceLevel	GlorfindelLevel9
	TargetNames				=	ElvenGlorfindel
	RequiredExperience		=	GLORFINDEL_LVL9_EXP_NEEDED
	ExperienceAward			=	GLORFINDEL_LVL9_EXP_AWARD 
	LevelUpFx				=	FX:GandalfLevelUp1FX
	;LevelUpOCL				=	OCL_GandalfLevelUp1OCL
	Rank					=	9
	AttributeModifiers		=	HeroLevelUpDamage8
        Upgrades                                =       Upgrade_GimliSlayerTrigger
	SelectionDecal
		Texture				=	decal_hero_good
		Style				=	SHADOW_ALPHA_DECAL
		OpacityMin			=	50%	
		OpacityMax			=	100%
		MinRadius			=	40
		MaxRadius			=	200
		MaxSelectedUnits	=	40
	End	
End	

ExperienceLevel	GlorfindelLevel10
	TargetNames				=	ElvenGlorfindel
	RequiredExperience		=	GLORFINDEL_LVL10_EXP_NEEDED
	ExperienceAward			=	GLORFINDEL_LVL10_EXP_AWARD 
	LevelUpFx				=	FX:GandalfLevelUp1FX
	;LevelUpOCL				=	OCL_GandalfLevelUp1OCL
	Upgrades                                =       Upgrade_GandalfLightningSword
	Rank					=	10
	AttributeModifiers		=	HeroLevelUpDamage9	
	SelectionDecal
		Texture				=	decal_hero_good
		Style				=	SHADOW_ALPHA_DECAL
		OpacityMin			=	50%	
		OpacityMax			=	100%
		MinRadius			=	40
		MaxRadius			=	200
		MaxSelectedUnits	=	40
	End	
End	

Object RohanLegolas

CommandSet NewLegolasCommandSet

AddModule ModuleTag_SlayerEnabler
        Behavior = UnpauseSpecialPowerUpgrade ModuleTag_StompEnabler
		SpecialPowerTemplate = SpecialAbilityWildMountainGiantStomp
		TriggeredBy = Upgrade_GothmogCarnage
	End
        End


AddModule
	Behavior = SpecialPowerModule ModuleTag_StompStarter       
		SpecialPowerTemplate      = SpecialAbilityWildMountainGiantStomp
		UpdateModuleStartsAttack  = Yes
		StartsPaused		  	  = Yes
	End
        End

AddModule
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_StompWeaponFireUpdate   
		SpecialPowerTemplate    = SpecialAbilityWildMountainGiantStomp
		WhichSpecialWeapon		= 2		; SPECIAL_WEAPON_TWO
		SkipContinue			= Yes

		UnpackTime              = 1367		//Frames 1-41 (of 97)
		PackTime                = 1867		//Remaining frames 41-97
		;FreezeAfterTriggerDuration = 2500 ; Hold AI for this long after we fire.
		
		AwardXPForTriggering    = 0		
		StartAbilityRange		= 80.0
		
		SpecialWeapon			= ElvenFloodgateWeapon
	End
        End

AddModule ModuleTag_IncinerateUnpause
        Behavior = UnpauseSpecialPowerUpgrade ModuleTag_IncinerateUnpause
		SpecialPowerTemplate	= SpecialAbilityDrogothIncinerate
		TriggeredBy				= Upgrade_ObjectLevel10 ; Upgrade_ObjectLevel6
	End
        End

AddModule ModuleTag_IncinerateStarter
	Behavior = SpecialPowerModule ModuleTag_IncinerateStarter
		SpecialPowerTemplate		= SpecialAbilityDrogothIncinerate
		UpdateModuleStartsAttack	= Yes
		StartsPaused				= Yes
		InitiateSound				= DrogothVoxAttack
	End
        End

AddModule ModuleTag_IncinerateUpdate
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_IncinerateUpdate
		SpecialPowerTemplate    = SpecialAbilityDrogothIncinerate
		UnpackTime              = 1300
		PackTime                = 3700
		AwardXPForTriggering    = 0
		StartAbilityRange		= 40.0
		SpecialWeapon = IsengardExplosiveMineExplosionWeapon
	End
        End	
	
AddModule ModuleTag_WordEnabler
        Behavior = UnpauseSpecialPowerUpgrade ModuleTag_WordEnabler
		SpecialPowerTemplate = SpecialAbilityWordOfPower
		TriggeredBy = Upgrade_GandalfWordOfPower
	End
        End

AddModule ModuleTag_WordStarter
	Behavior = SpecialPowerModule ModuleTag_WordStarter       
		SpecialPowerTemplate      = SpecialAbilityWordOfPower
		UpdateModuleStartsAttack  = Yes
		StartsPaused		  	  = Yes
	End
        End

AddModule ModuleTag_WordWeaponFireUpdate
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_WordWeaponFireUpdate   
		SpecialPowerTemplate    = SpecialAbilityWordOfPower
		WhichSpecialWeapon		= 1
		SkipContinue			= Yes

		UnpackTime              = 1700 
		PackTime                = 1	
		FreezeAfterTriggerDuration = 2500 ; Hold AI for this long after we fire.
		
		AwardXPForTriggering    = 0		
		StartAbilityRange		= 80.0
		
		SpecialWeapon			= GandalfWordOfPower
	End
        End

AddModule
  Behavior = UnpauseSpecialPowerUpgrade ModuleTag_BallLightningEnabler_L3
	SpecialPowerTemplate = SpecialAbilityBallLightning_L3
	TriggeredBy			 = Upgrade_CreateAHeroBallLightning_Level3
 End
 End

AddModule
  Behavior = SpecialPowerModule ModuleTag_SpecialAbilityBallLightning_L3
	SpecialPowerTemplate	 = SpecialAbilityBallLightning_L3
	UpdateModuleStartsAttack = Yes
	StartsPaused			 = Yes
	InitiateSound			 = HeroWizardVoiceAttack //this plays when he targets, not when he fires
 End
 End

AddModule
  Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_BallLightningUpdate_L3
	SpecialPowerTemplate = SpecialAbilityBallLightning_L3
	SkipContinue		 = Yes
	UnpackTime			 = 1000
	PreparationTime		 = 1  
	PersistentPrepTime	 = 1000
	PackTime			 = 500
	AwardXPForTriggering = 0
	StartAbilityRange	 = CREATE_A_HERO_BALL_LIGHTNING_START_RANGE //	Note: This has to be smaller than the weapon range or it'll	never succeed
	ApproachRequiresLOS	 = Yes		 
	SpecialWeapon		 = CreateAHerBallLightningWeapon_L3
	MustFinishAbility	 = Yes
	WhichSpecialWeapon	 = 3
	BusyForDuration		 = 2500
 End
 End

AddModule
	Behavior = FireWeaponWhenDeadBehavior ModuleTag_DIELIKETHIS
    	StartsActive = Yes
    	DeathWeapon = GandalfWordOfPower
  End
  End
End


ExperienceLevel	LegolasLevel1
	TargetNames						=	RohanLegolas ElvenLegolas
	RequiredExperience				=	1	
	ExperienceAward					=	LEGOLAS_LVL1_EXP_AWARD
	Rank							=	1
	SelectionDecal
		Texture						=	decal_hero_good	
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40 ;16
		MaxRadius					=	200 ;16
		MaxSelectedUnits			=	40 ;1
	End	
End	

ExperienceLevel	LegolasLevel2
	TargetNames						=	RohanLegolas ElvenLegolas
	RequiredExperience				=	LEGOLAS_LVL2_EXP_NEEDED 
	ExperienceAward					=	LEGOLAS_LVL2_EXP_AWARD
	AttributeModifiers				=	HeroLevelUpDamage1
	Rank							=	2
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	Upgrades						=	Upgrade_LegolasKnifeFighter
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40 ;16
		MaxRadius					=	200 ;16
		MaxSelectedUnits			=	40 ;1
	End
END	

ExperienceLevel	LegolasLevel3
	TargetNames						=	RohanLegolas ElvenLegolas
	RequiredExperience				=	LEGOLAS_LVL3_EXP_NEEDED 
	ExperienceAward					=	LEGOLAS_LVL3_EXP_AWARD	
	AttributeModifiers				=	HeroLevelUpDamage2
	Rank							=	3
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
        Upgrades						=	Upgrade_GothmogCarnage	
	SelectionDecal
		Texture						=	decal_hero_good	
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40 ;16
		MaxRadius					=	200 ;16
		MaxSelectedUnits			=	40 ;1
	End
END	

ExperienceLevel	LegolasLevel4
	TargetNames						=	RohanLegolas ElvenLegolas
	RequiredExperience				=	LEGOLAS_LVL4_EXP_NEEDED 
	ExperienceAward					=	LEGOLAS_LVL4_EXP_AWARD	
	AttributeModifiers				=	HeroLevelUpDamage3
	Rank							=	4
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	SelectionDecal
		Texture						=	decal_hero_good	
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40 ;16
		MaxRadius					=	200 ;16
		MaxSelectedUnits			=	40 ;1
	End
END	

ExperienceLevel	LegolasLevel5
	TargetNames						=	RohanLegolas ElvenLegolas
	RequiredExperience				=	LEGOLAS_LVL5_EXP_NEEDED 
	ExperienceAward					=	LEGOLAS_LVL5_EXP_AWARD	
	AttributeModifiers				=	HeroLevelUpDamage4
	Rank							=	5
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
        Upgrades                                                =       Upgrade_ObjectLevel10 Upgrade_ObjectLevel6
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40 ;16
		MaxRadius					=	200 ;16
		MaxSelectedUnits			=	40 ;1
	End
END	

ExperienceLevel	LegolasLevel6
	TargetNames						=	RohanLegolas ElvenLegolas
	RequiredExperience				=	LEGOLAS_LVL6_EXP_NEEDED 
	ExperienceAward					=	LEGOLAS_LVL6_EXP_AWARD	
	AttributeModifiers				=	HeroLevelUpDamage5
	Rank							=	6
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
        Upgrades                                                =       Upgrade_CreateAHeroBallLightning_Level3
	SelectionDecal
		Texture						=	decal_hero_good	
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40 ;16
		MaxRadius					=	200 ;16
		MaxSelectedUnits			=	40 ;1
	End	
END	

ExperienceLevel	LegolasLevel7
	TargetNames						=	RohanLegolas ElvenLegolas
	RequiredExperience				=	LEGOLAS_LVL7_EXP_NEEDED 
	ExperienceAward					=	LEGOLAS_LVL7_EXP_AWARD	
	AttributeModifiers				=	HeroLevelUpDamage6
	Rank							=	7
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	Upgrades						=	Upgrade_LegolasArrowWind
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40 ;16
		MaxRadius					=	200 ;16
		MaxSelectedUnits			=	40 ;1
	End	
END	

ExperienceLevel	LegolasLevel8
	TargetNames						=	RohanLegolas ElvenLegolas
	RequiredExperience				=	LEGOLAS_LVL8_EXP_NEEDED 
	ExperienceAward					=	LEGOLAS_LVL8_EXP_AWARD	
	AttributeModifiers				=	HeroLevelUpDamage7
	Rank							=	8
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40 ;16
		MaxRadius					=	200 ;16
		MaxSelectedUnits			=	40 ;1
	End	
END	

ExperienceLevel	LegolasLevel9
	TargetNames						=	RohanLegolas ElvenLegolas
	RequiredExperience				=	LEGOLAS_LVL9_EXP_NEEDED 
	ExperienceAward					=	LEGOLAS_LVL9_EXP_AWARD	
	AttributeModifiers				=	HeroLevelUpDamage8
	Rank							=	9
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40 ;16
		MaxRadius					=	200 ;16
		MaxSelectedUnits			=	40 ;1
	End	
END	

ExperienceLevel	LegolasLevel10
	TargetNames						=	RohanLegolas ElvenLegolas
	RequiredExperience				=	LEGOLAS_LVL10_EXP_NEEDED 
	ExperienceAward					=	LEGOLAS_LVL10_EXP_AWARD	
  	AttributeModifiers				=	HeroLevelUpDamage9
	Rank							=	10
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
        Upgrades                                                =       Upgrade_GandalfWordOfPower
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40 ;16
		MaxRadius					=	200 ;16
		MaxSelectedUnits			=	40 ;1
	End	
END	



SpecialPower SpellBookHeal
	InitiateAtLocationSound 	= SpellHeal
	Enum                		= SPECIAL_SPELL_BOOK_HEAL
	Flags				= WATER_OK RESPECT_RECHARGE_TIME_DISCOUNT
	ReloadTime         		= SPELL_RECHARGE_TIME_TIER_5
	RequiredSciences     		= SCIENCE_Heal
	RadiusCursorRadius  		= SPELL_HEAL_RADIUS_CURSOR	
End



Weapon GondorAragornSword
  LeechRangeWeapon      = Yes
  AttackRange           = STANDARD_MELEE_ATTACK_RANGE
  MeleeWeapon           = Yes

  DelayBetweenShots     = ARAGORN_DELAYBETWEENSHOTS 		; time between shots, msec
  PreAttackDelay        = ARAGORN_PREATTACKDELAY 			; 400 is sword swing delay time before contact with target.
  PreAttackType         = PER_SHOT						; Do the delay each time we attack a new target
  FireFX                = FX_GondorSwordHit
  ;FireFX                = FX_IsildurSword
  FiringDuration        = ARAGORN_FIRINGDURATION 			; Duration of the sword swing

  DamageNugget												; A basic Nugget that just does damage
    Damage        = ARAGORN_DAMAGE
    DamageScalar  = 50000% NONE +RohanOathbreaker
    Radius        = 15.0
    DelayTime     = 0
    DamageType    = HERO
    DamageFXType  = MAGIC
    DeathType     = EXPLODED
  End
End

Weapon GondorAragornHeroSword
	LeechRangeWeapon	= Yes
	AttackRange			= STANDARD_MELEE_ATTACK_RANGE
	MeleeWeapon			= Yes
  
	DelayBetweenShots     = ARAGORN_DELAYBETWEENSHOTS 		; time between shots, msec
	PreAttackDelay        = ARAGORN_PREATTACKDELAY 			; 400 is sword swing delay time before contact with target.
	PreAttackType         = PER_SHOT						; Do the delay each time we attack a new target
	FireFX                = FX_GondorSwordHit
	;FireFX                = FX_IsildurSword
	FiringDuration        = ARAGORN_FIRINGDURATION 			; Duration of the sword swing

  	RadiusDamageAffects = ENEMIES NEUTRALS

	DamageNugget												; A basic Nugget that just does damage
		Damage			= 1000
    		DamageScalar  		= 50000% NONE +RohanOathbreaker
		Radius			= 20.0
		DelayTime		= 0
		DamageType		= HERO
                DamageFXType            = MAGIC
		DeathType		= EXPLODED
	End
End

SpecialPower SpecialAbilityAragornElendil
	Enum						   = SPECIAL_GENERAL_TARGETLESS
	ReloadTime					   = 20000
	InitiateSound				   = AragornElendilEffect		   ;GenericSpell
End



SpecialPower SpecialAbilityLightningSword
  Enum              = SPECIAL_ARROW_STORM
  ReloadTime        = 40000 ; in milliseconds
  RadiusCursorRadius = 120.0
  ViewObjectDuration = 5000
  ViewObjectRange = 120
End


SpecialPower SpecialAbilityLightningSwordArveleg
  Enum              = SPECIAL_GENERAL_TARGETLESS
  ReloadTime        = 90000 ; in milliseconds
;  RadiusCursorRadius = 120.0
;  ViewObjectDuration = 5000
 ; ViewObjectRange = 120
End


Weapon ArvelegKABOOMBlastWeapon  ; BALANCE GandalfStaffWeapon
	IdleAfterFiringDelay = 0
	AttackRange			= 500				;600
	WeaponSpeed = 401         ; dist/sec 
	MinWeaponSpeed = 241
	MaxWeaponSpeed = 601      ; dist/sec Upper limit on scaling, when attacking past nominal "max" range
	ScaleWeaponSpeed = Yes ; Used for lob weapons, scales speed proportional to range
	DamageDealtAtSelfPosition = Yes 
	RadiusDamageAffects = ENEMIES NOT_SIMILAR
	DelayBetweenShots = 5000               ; time between shots, msec
	PreAttackDelay        = 2600
	PreAttackType         = PER_ATTACK ; Do the delay each time we attack a new target
	PreAttackFX           = FX_GandalfPreAttackBlastReal
	FireFX                = FX_ArvelegBlast
	FiringDuration      = 1400

	DamageNugget                        ; A basic Nugget that just does damage
		Damage			= 10000
		Radius			= 250.0
		DamageType		= HERO
		DamageFXType		= BOLT
		DeathType		= EXPLODED
		DamageSpeed		= 700.0 ; must match the ShockWaveSpeed below
	End
	MetaImpactNugget                    ; A Nugget that throws things back with force
;		HeroResist			= .75
;		SpecialObjectFilter = NONE +ENEMIES +NEUTRALS +ALLIES
		ShockWaveAmount   = 100.0
		ShockWaveRadius   = 400.0
		ShockWaveTaperOff = 1.0
		ShockWaveZMult    = 1.000
		ShockWaveSpeed	  = 700.0 
	End
End

Weapon GandalfWordOfPower ; Big Blue Ring Blast
	IdleAfterFiringDelay = 0
	AttackRange = GANDALF_PHASER_RANGE
	MinimumAttackRange = 0.8
	WeaponSpeed = 401         ; dist/sec 
	MinWeaponSpeed = 241
	MaxWeaponSpeed = 601      ; dist/sec Upper limit on scaling, when attacking past nominal "max" range
	ScaleWeaponSpeed = Yes ; Used for lob weapons, scales speed proportional to range
	RadiusDamageAffects = ENEMIES NOT_SIMILAR
	DelayBetweenShots = 5000               ; time between shots, msec
	PreAttackDelay        = 2600
	PreAttackType         = PER_ATTACK ; Do the delay each time we attack a new target
	PreAttackFX           = FX_GandalfPreAttackBlastReal
	FireFX                = FX_GandalfBlast
	FiringDuration      = 1400
	DamageNugget                        ; A basic Nugget that just does damage
		Damage			= GANDALF_PHASER_DAMAGE
		Radius			= 40.0
		DamageType		= MAGIC
		DamageFXType	= MAGIC
		DeathType		= EXPLODED
		DamageSpeed		= 700.0 ; must match the ShockWaveSpeed below
	End
	MetaImpactNugget                    ; A Nugget that throws things back with force
;		HeroResist			= .75
		ShockWaveAmount   = 75.0
		ShockWaveRadius   = 75.0
		ShockWaveTaperOff = 1.0
		ShockWaveZMult    = 1.000
		ShockWaveSpeed	  = 700.0 
	End
End

Weapon GandalfWizardBlast ; small microwave push
	IdleAfterFiringDelay = 0
	LeechRangeWeapon	 = Yes
	AttackRange = GANDALF_FORCE_ATTACK_RANGE
	WeaponSpeed = 401         ; dist/sec 
	RadiusDamageAffects = ENEMIES NEUTRALS NOT_SIMILAR
	DelayBetweenShots = 5000               ; time between shots, msec
	PreAttackDelay        = 100
	PreAttackType         = PER_ATTACK ; Do the delay each time we attack a new target
	FireFX                = FX_TelekinesisAtBone
	FiringDuration        = 100
	DamageDealtAtSelfPosition = Yes 
	IsAimingWeapon		= Yes
	AcceptableAimDelta	= 15
	AntiAirborneVehicle	= No
	AntiAirborneMonster	= No

	DamageNugget                        ; A basic Nugget that just does damage
		Damage			= GANDALF_FORCE_ATTACK_DAMAGE
		DamageArc 		= 100
		Radius			= 230.0
		DamageType		= MAGIC
		DamageFXType	= MAGIC
		DeathType		= EXPLODED
		DamageSpeed		= 700.0 ; must match the ShockWaveSpeed below
	End
	MetaImpactNugget                    ; A Nugget that throws things back with force
;		HeroResist			= .75
		ShockWaveAmount   = 70.0
		ShockWaveArc	  = 100
		ShockWaveRadius   = 230.0
		ShockWaveTaperOff = 0.75
		ShockWaveZMult    = 1.000
		ShockWaveSpeed	  = 700.0 
	End
End

SpecialPower SpecialAbilityGimliLeap
	Enum			= SPECIAL_GIMLI_LEAP
	ReloadTime		= 40000
	RadiusCursorRadius	= 35.0
	Flags			= PATHABLE_ONLY
End

SpecialPower SpecialAbilityPersonalFlood
  Enum					= SPECIAL_PERSONAL_FLOOD
  ReloadTime			= 90000 ; in milliseconds
  RadiusCursorRadius	= 100
	;InitiateAtLocationSound	= AragornAthelesEffect
End

SpecialPower SpecialAbilityFireDrakeInferno
	Enum			= SPECIAL_BALROG_BREATH
	ReloadTime		= 60000 ;20000
	RadiusCursorRadius = 80.0
End

SpecialPower SpecialAbilityWordOfPower
	Enum						   = SPECIAL_WORD_OF_POWER
	ReloadTime					   = 90000
End



SpecialPower SpecialAbilityCreateAHeroBombard_Level1
	Enum				= SPECIAL_SPELL_BOOK_BOMBARD
	ReloadTime       	= 60000 // // in milliseconds	
	RadiusCursorRadius	= CREATE_A_HERO_BOMBARD_RADIUS_L1
	InitiateAtLocationSound = CaH_DwarfBombardStartMS
End


Weapon FireDrakeInferno		; BALANCE
	IdleAfterFiringDelay = 0
	AttackRange = 60.0
	WeaponSpeed = 401         ; dist/sec 
	RadiusDamageAffects = ENEMIES NOT_SIMILAR
	DelayBetweenShots = 5000               ; time between shots, msec
	PreAttackDelay        = 2600
	PreAttackType         = PER_ATTACK ; Do the delay each time we attack a new target
	PreAttackFX           = FX_GandalfPreAttackBlast
	FireFX                = FX_DrakeFireBreath ;FX_BalrogBreath ---- commented out for E3, now controled by particle spawning
	FiringDuration      = 1400
	DamageDealtAtSelfPosition = Yes 

	DamageNugget                        ; A basic Nugget that just does damage
		Damage			= FIREDRAKE_INFERNO_DAMAGE
		Radius			= FIREDRAKE_INFERNO_RADIUS
		DelayTime		= 1000
		DamageType		= FLAME
		DamageFXType		= FLAME
		DeathType		= BURNED
		DamageArc		= 90
		DamageMaxHeight = 50 ;We won't hurt something far above us.  Birds fly at around 100
		DamageSpeed		= 400
	End
	;FireLogicNugget
	;	LogicType		= INCREASE_FUEL
	;	Radius			= FIREDRAKE_INFERNO_FUELINCREASE_RADIUS
	;	Damage			= FIREDRAKE_INFERNO_FUELINCREASE_AMOUNT
	;	MinMaxBurnRate	= FIREDRAKE_INFERNO_FUELINCREASE_MINMAXBURNRATE
	;	MaxResistance	= FIREDRAKE_INFERNO_FUELINCREASE_RESISTANCE
	;End
	FireLogicNugget
		LogicType		= INCREASE_BURN_RATE
		Radius			= FIREDRAKE_INFERNO_INCREASEBURNRATE_RADIUS
		Damage			= FIREDRAKE_INFERNO_INCREASEBURNRATE_AMOUNT
		DamageArc		= 90
	End
End

SpecialPower FiresOfDoomSpecialPower
	Enum				= SPECIAL_SPELL_BOOK_RAIN_OF_FIRE
	RadiusCursorRadius	= 100
	ReloadTime			= 90000 ; in milliseconds
	ViewObjectDuration	= 10000
	ViewObjectRange		= 200
	InitiateSound = SpellRainOfFireMS
End

Weapon GandalfSword
  LeechRangeWeapon = Yes
  AttackRange           = 20.0
  MeleeWeapon           = Yes
  FireFX                = FX_GandalfSwordHit
  DelayBetweenShots     = GANDALF_THE_GREY_DELAYBETWEENSHOTS 		; time between shots, msec
  PreAttackDelay        = GANDALF_THE_GREY_PREATTACKDELAY 
  FiringDuration		= GANDALF_THE_GREY_FIRINGDURATION 		
  PreAttackType         = PER_SHOT ; Do the delay each time we attack a new target

  DamageNugget                        ; A basic Nugget that just does damage
    Damage        = 500				
    Radius        = 20.0
    DelayTime     = 0
    DamageType    = HERO
    DamageFXType  = MAGIC
    DeathType     = EXPLODED
  End
End

Weapon SauronFiresOfDoomWeapon
	AttackRange			= 300
	WeaponSpeed			= 801	; dist/sec 
	HitPercentage		= 100		; When this weapon is used it will hit exactly 100% of the time.
	DelayBetweenShots	= 2000		; time between shots, msec
	PreAttackDelay      = 400
	PreAttackType       = PER_SHOT		; Do the delay each time we attack a new target
	
	FiringDuration      = 1100
	AntiAirborneVehicle	= Yes
	AntiAirborneMonster	= Yes

	RadiusDamageAffects = ENEMIES NOT_SIMILAR

	WeaponOCLNugget
		WeaponOCLName = OCL_FiresOfDoom
	End
End

Weapon IsengardExplosiveMineExplosionWeapon   ; BALANCE Mine Weapon
	AttackRange           = 4.0
	DelayBetweenShots     = 2000            ; time between shots, msec
	FireFX                = FX_ExplosiveMine
	RadiusDamageAffects = ENEMIES NEUTRALS NOT_SIMILAR

	; The highly destructive exposion that destroys everything. Consentrated to a small radius
	; so that it doesn't destroy objects with awkward bounding boxes, like walls.
	DamageNugget
		Damage        = ISENGARD_EXPLOSIVEMINE_MAIN_DAMAGE
		Radius        = 125.0
		DelayTime     = 0
		DamageType    = SIEGE
		DamageFXType  = FLAME
		DeathType     = BURNED
		DamageScalar  = 50000% NONE +HelmsDeepCulvert ; Make sure we one shot kill Culvert but Ballista have to shoot alot
	End

	MetaImpactNugget                    ; A Nugget that throws things back with force 
;		HeroResist			= .75
		ShockWaveAmount   = 90.0		
		ShockWaveRadius   = 125.0
		ShockWaveTaperOff = 0.66
	End
End

SpecialPower SpecialAbilityDrogothIncinerate
	Enum				= SPECIAL_BALROG_BREATH
	ReloadTime			= 60000
	RadiusCursorRadius	= 100
	Flags				= WATER_OK
End

Weapon ElvenFloodgateWeapon
  AttackRange               = ELVEN_FLOODGATEEXPANSION_RANGE    
  HitPercentage             = 100										;//When this weapon is used it will hit exactly 50% of the time.    
  PreAttackDelay            = ELVEN_FLOODGATEEXPANSION_PREATTACKDELAY   ;//prep time for the unit/structure to fire.
  PreAttackType             = PER_SHOT									;//Do the delay each time we attack a new target
  FiringDuration            = ELVEN_FLOODGATEEXPANSION_FIRINGDURATION   ;//Duration of the archer firing shot is 500ms.  
  AcceptableAimDelta		= 120.0										;//We want to be able to shoot all round, as we cant move.
  DelayBetweenShots         = ELVEN_FLOODGATEEXPANSION_DELAYBETWEENSHOTS

	WeaponOCLNugget
		WeaponOCLName = OCL_ElvenFloodgateFlood
	End

	FireLogicNugget
		LogicType		= DECREASE_BURN_RATE
		Radius			= ELVEN_FLOODGATEEXPANSION_DECREASEBURNRATE_RADIUS
		Damage			= ELVEN_FLOODGATEEXPANSION_DECREASEBURNRATE_AMOUNT
	End
End

Weapon GlorfindelSword
	LeechRangeWeapon			= Yes
	AttackRange					= 20.0
	MeleeWeapon					= Yes
	DelayBetweenShots			= GLORFINDEL_SWORD_DELAYBETWEENSHOTS
	PreAttackDelay				= GLORFINDEL_SWORD_PREATTACKDELAY
	PreAttackType				= PER_SHOT
	FireFX						= FX_GondorSwordHit
	FiringDuration				= GLORFINDEL_SWORD_FIRINGDURATION
	RadiusDamageAffects			= ENEMIES NEUTRALS NOT_SIMILAR
	DamageNugget
		Damage			= 500
		Radius			= 17.5
		DelayTime		= 0
		DamageType		= HERO
		DamageFXType		= MAGIC
		DeathType		= EXPLODED
	End
End

Object IsengardSiegeLadder

ShockwaveResistance = SHOCKWAVE_RESISTANCE_ALWAYS

End

SpecialPower SpellBookFreezingRain
  Enum              = SPECIAL_SPELL_BOOK_FREEZING_RAIN
  RequiredSciences   = SCIENCE_FreezingRain
  ReloadTime        = SPELL_RECHARGE_TIME_TIER_3
  InitiateSound     = ThunderStrikesStereo
  Flags				= RESPECT_RECHARGE_TIME_DISCOUNT
End

SpecialPower SpecialAbilityLightningStrike
	Enum              	= SPECIAL_ARROW_STORM
	ReloadTime        	= 60000 ; in milliseconds
	RadiusCursorRadius	= 120.0
End

SpecialPower SpecialAbilityBallLightning_L3
	Enum									  =	SPECIAL_WOUND_ARROW
	ReloadTime								  =	60000  // in	milliseconds
	PublicTimer								  =	No
	RadiusCursorRadius						  =	240.0
	ObjectFilter							  =	ALL	-BASE_FOUNDATION -INERT	-IGNORED_IN_GUI	-WALK_ON_TOP_OF_WALL -BLOCKING_GATE	-WALL_UPGRADE -UNATTACKABLE	-MOVE_ONLY
	InitiateAtLocationSound					  = CaH_BallLightning
End      