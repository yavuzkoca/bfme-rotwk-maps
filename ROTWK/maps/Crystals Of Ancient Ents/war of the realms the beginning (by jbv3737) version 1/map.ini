;^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
; WRITTEN BY JBV3737
;^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
;;Thank you {IP}BlackShadow For Giving me the Mumikill Without his Hodwah, i could have done it but that is some crazy shit, good job man! ; P lol
;
;
;
;
;
;
;^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Reference INI
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

;With this you can copy the reference in the find tool (Normaly Ctrl-F ) and it will take you right to that area of the INI.file. 
;
;Self Note: Please keep this nice, clean and updated
;Self Note: You can use the realms as reference also.
;Note for all useing this, seen as there is new animtions and a lot of shiut it may be easyer for you to find what u looking for if u look under the units ur looking for, 
;an example of this would be: I want to find Balrog Object Reference so i put in MotherDragonRef seen as its right below it, that way i by pass balrogs long aimations! :-)
;
;
;
;Spell Books Start
;
;1. FIRE REALM
;Guardian Drake Reference: 			GuardianDrakeRef
;Guardian Drake Modules Reference: 		GuardianDrakeModulesRef
;Fire Drake Reference: 			FireDrakeRef
;Normal Fire Drake Reference: 		NormalFireDrakeRef
;Balrog Reference: 				MordorBalrogRef
;Balrog Object Reference: 			MordorBalrogObjectRef
;Mother Dragon Reference: 			MotherDragonRef
;Mother Dragon Modules Reference: 		MotherDragonModulesRef
;
;2. GREEN REALM
;Wizard Ent Reference: 			WizardEntRef
;Wizard Ent Modules Reference:		WizardEntModulesRef
;Rohan Ent Base/Fir/Birch Reference: 		Birch/FirEntsRef
;Rohan Ent Birch Reference: 		RohanEntBirchRef
;Rohan Ent Fir Reference: 			RohanEntFirRef
;Elven Archers Reference: 			ElvenArchersRef
;Rohan Elven Worriors Horde Reference: 	RohanElvenWorriorsHordeRef
;Frodo Reference: 				FrodoRef
;Sam Reference: 				SamRef
;Pipin Reference: 				PipinRef
;Marry Reference: 				MarryRef
;
;3. SPIDER REALM
;Minor Slave Spiders Reference: 		MinorSlaveSpidersRef
;Default Spider Horde Reference: 		DefaultSpiderHordeRef
;Blue Spiderling Horde Reference: 		BlueSpiderlingHordeRef
;Dark Spiderling Horde Reference: 		DarkSpiderlingHordeRef
;Golden Spiderling Horde Reference: 		GoldenSpiderlingHordeRef
;Minor Spiders Reference: 			MinorSpidersRef
;Arctherna Gaint Spider Base Reference: 	ArcthernaGaintSpiderBaseRef
;Blue Spider Reference: 			BlueSpiderRef
;GuardianSpider Reference: 			GuardianSpiderRef
;
;4. EARTH REALM
;
;Uglk Reference: 				UglkRef
;Object Uglk Reference: 			UglkObjectRef
;Beserker Horde Reference: 			BeserkerHordeRef
;
;5. BEAST REALM
;
;Warg Horde Reference: 			WargHordeRef
;Mordor Troll Horde Unit Reference: 		MordorTrollHordeUnitRef
;Mordor Troll Horde Reference: 		MordorTrollHordeRef
;Mordor Mountain Troll Reference: 		MordorMountainTrollRef
;Half-Trolls Reference: 			HalfTrollRef
;Mountain Giants Reference: 		MountainGiantsRef
;Goblin Cave Troll Reference: 		GoblinCaveTrollsRef
;Gorzak Reference: 			GorzakRef
;Gorzak Object Reference: 			GorzakObjectRef
;
;
;6. HARAD REALM,  AKA DESERT REALM
;Easterling Swords Men Reference: 		EasterlingSwordsMenRef
;Easterling Fighter Object Unit Reference: 	EasterlingSwordsMenObjectRef
;Easterling Fighting Horde Reference: 		EasterlingSwordsMenHordeRef
;Elephant Without Hodwah Reference: 	ElephantHodwahRef
;Mordor Mumakil Reference: 			MordorMumakilRef
;Haradrim Archer Horde Reference: 		HaradrimArcherHordeRef
;Haradrim Archer Reference: 		HaradrimArcherRef
;Mordor Haradrim Lancers Reference: 		MordorHaradrimLancersRef
;Mordor Haradrim Lancers Horde Reference: 	MordorHaradrimLancersHordeRef
;Varil Reference: 				VarilRef
;Varil Object Reference: 			VarilObjectRef
;Mordor Easterlings Reference: 		MordorEasterlingsRef
;
; These are begining of realm that where, i have taken them out and saved their heros for new gladiator maps
;7. HERO HUMAN REALM
;exported all heros, Empty
;8. VALAR REALM
;exported all heros, Empty
;
;WOR Gates and armors
;
;A. Fire Realm Buildings And Costs
;
;Fire Drake Lair Reference: 			FireDrakeLairRef
;
;B. Green Realm Buildings And Costs
;
;Elven Fortress Reference: 			ElvenFortressRef
;Main Elven Foundation Reference: 		MainElvenFoundationRef
;Mallorn Tree Foundations Reference: 		MallornTreeFoundationsRef
;
;C. Spider Realm Buildings And Costs
;
;Spider Lair Hole Reference: 			SpiderLairHoleRef
;Wild Spider Pit Reference: 			WildSpiderPitRef
;Spider Lair Reference: 			SpiderLairRef
;
;D. Earth Realm Buildings And Costs
;
;Earth Fortress Reference: 			EarthFortress
;Isengard Uruk Pit Reference: 		IsengardUrukPitRef
;Isengard Battle Tower Reference: 		IsengardBattleTowerRef
;Mordor Orc Pit Refernce: 			MordorOrcPitRef
;Isengard Armory Reference: 		IsengardArmoryRef
;Isengard Siege Works Reference: 		IsengardSiegeWorksRef
;Earth Realm Main Foundation Reference: 	EarthRealmMainFoundationRef
;Isengard Furnace Reference: 		IsengardFurnaceRef
;
;E. Beast Realm Buildings And Costs
;
;Beast Realm Fortress Reference: 		BeastRealmFortressRef
;Warg Lair Reference: 			WargLairRef
;Cave Troll Lair Reference: 			CaveTrollLairRef
;
;F. Harad Realm Buildings And Costs
;
;Harad Fortress Reference: 			HaradFortressRef
;Harad Farm Reference: 			HaradFarmRef
;Mordor Haradrim Palace Reference: 		MordorHaradrimPalaceRef
;Mordor Mumakil Pen Reference: 		MordorMumakilPenRef
;Main Harad Building Foundation Reference: 	MainHaradBuildingFoundationRef
;
;The 6 Great Valar Reference: 		ValarRef
;
;Valar Fire Realm Reference: 		ValarFireRealmRef
;Valar Green Realm Reference: 		ValarGreenRealmRef
;Valar Spider Realm Reference: 		ValarSpiderRealmRef
;Valar Earth Realm Reference: 		ValarEarthRealmRef
;Valar Beast Realm Reference: 		ValarBeastRealmRef
;Valar Harad Realm Reference: 		ValarHaradRealm

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Spell Books Start
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Commandset
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

CommandSet WORSpellBookCommandSet
    1 = Command_SpellBookRallyingCall
    2 = Command_SpellBookFarsight  
    3 = Command_SpellBookArrowVolleyEvil

    4 = Command_SpellBookCloudBreak
    5 = Command_SpellBookScavenger
    6 = Command_SpellBookDarkness
    7 = Command_SpellBookAwakenWyrm

    8 = Command_SpellBookEvilBombard
    9 = Command_SpellBookWatcherAlly
    10 = Command_SpellBookRebuild
    
    11 = Command_SpellBookSunflare
    12 = Command_SpellBookHeal
End

CommandSet WORSpellStoreCommandSet
    1 = Command_PurchaseSpellRallyingCallMP
    2 = Command_PurchaseSpellFarsight
    3 = Command_PurchaseSpellArrowVolleyEvil

    4 = Command_PurchaseSpellCloudBreak
    5 = Command_PurchaseSpellScavenger
    6 = Command_PurchaseSpellDarkness
    7 = Command_PurchaseSpellAwakenWyrm

    8 = Command_PurchaseSpellEvilBombard
    9 = Command_PurchaseSpellWatcherAlly
    10 = Command_PurchaseSpellRebuild
    
    11 = Command_PurchaseSpellSunflare
    12 = Command_PurchaseSpellHeal
End
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Spell book Object
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
Object MordorSpellBook 
; most spells are from the mordor therefore 
; i will add the good spell books to mordor spellbook to save time.


    CommandSet          = WORSpellBookCommandSet


    	AddModule
    	Behavior = SpecialPowerModule ModuleTag_RallyingCall
        	SpecialPowerTemplate        = SpellBookRallyingCall
        	AttributeModifier            = SpellBookRallyingCallModifier
        	AttributeModifierRange        = 100
        	AttributeModifierAffects    = ANY +HORDE +INFANTRY -HERO
        	TriggerFX                    = FX_SpellRallyingCall
        	UpdateModuleStartsAttack    = No
        	AvailableAtStart            = No
        	RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
        	RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
    	End
    	End

	AddModule
	Behavior				 = OCLSpecialPower ModuleTag_Farsight
		SpecialPowerTemplate = SpellBookFarsight
		OCL                  = OCL_SpecialPowerFarSeeing
		CreateLocation       = CREATE_AT_LOCATION
		AvailableAtStart	 = No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
	End

	AddModule
	Behavior = CloudBreakSpecialPower	ModuleTag_CloudBreak
		SpecialPowerTemplate			= SpellBookCloudBreak
    	SunbeamObject					= CloudBreakSunbeam
		ObjectSpacing					= 300
		AttributeModifierAffects		= ANY +INFANTRY +CAVALRY +MONSTER -HERO ENEMIES
		ReEnableAntiCategory			= Yes ; cancel negative effects on good guys
		AttributeModifierWeatherBased	= Yes			
		WeatherDuration					= SPELL_CLOUDBREAK_DURATION
		ChangeWeather					= SUNNY
		AvailableAtStart				= No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
	End

	AddModule
	Behavior = OCLSpecialPower ModuleTag_Sunflare
		SpecialPowerTemplate 			= SpellBookSunflare
		OCL                  			= OCL_SpecialPowerSunflare
		CreateLocation       			= CREATE_AT_LOCATION
		AvailableAtStart	 			= No
		AttributeModifierAffects		= ANY +INFANTRY +CAVALRY +MONSTER -HERO ENEMIES
		ReEnableAntiCategory			= Yes
		AttributeModifierWeatherBased	= Yes			
		WeatherDuration					= SPELL_SUNFLARE_DURATION
		ChangeWeather					= SUNNY
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
	End

	AddModule
	Behavior = PlayerHealSpecialPower ModuleTag_Rebuild
		SpecialPowerTemplate = SpellBookRebuild
		HealAffects			 = STRUCTURE
		HealAsPercent		 	 = No
		HealAmount			 = 4000
		HealRadius			 = SPELL_REBUILD_RADIUS_STRUCTURE_SCAN
		HealFX				 = FX_SpellRebuild
		AvailableAtStart	 = No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
	End


      	AddModule
      	Behavior = PlayerHealSpecialPower ModuleTag_Heal
        	SpecialPowerTemplate  = SpellBookHeal
        	HealAffects              = INFANTRY CAVALRY MONSTER MACHINE SHIP DOZER
        	HealAmount              = 1.0    ; 0.5 = 50% of maximum health
        	HealRadius              = SPELL_HEAL_RADIUS_UNIT_SCAN
        	HealFX                  = FX_SpellHealUnitHealBuff        ;FX_DefaultUnitHealBuff
        	; To replenish hordes a bit
        	HealOCL               = OCL_HealSpellHordeReplenishPing
        	AvailableAtStart      = No
        	RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
        	RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
    	End
    	End

End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Sciences
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Science SCIENCE_RallyingCallMP
  PrerequisiteSciences = SCIENCE_EVIL OR SCIENCE_MORDOR
  SciencePurchasePointCostMP = 5
End

Science SCIENCE_Farsight
  PrerequisiteSciences = SCIENCE_EVIL OR SCIENCE_MORDOR
  SciencePurchasePointCostMP = 5
End

Science SCIENCE_ArrowVolleyEvil
  PrerequisiteSciences = SCIENCE_EVIL OR SCIENCE_MORDOR
  SciencePurchasePointCostMP = 6
  IsGrantable = Yes
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Science SCIENCE_CloudBreak
  PrerequisiteSciences = SCIENCE_EVIL OR SCIENCE_MORDOR SCIENCE_RallyingCallMP
  SciencePurchasePointCostMP = 10
  IsGrantable = Yes
End

Science SCIENCE_Scavenger
  PrerequisiteSciences = SCIENCE_EVIL OR SCIENCE_MORDOR SCIENCE_RallyingCallMP OR SCIENCE_MORDOR SCIENCE_Farsight
  SciencePurchasePointCostMP = 12
End

Science SCIENCE_Darkness
  PrerequisiteSciences = SCIENCE_EVIL OR SCIENCE_MORDOR SCIENCE_Farsight OR SCIENCE_MORDOR SCIENCE_ArrowVolleyEvil
  SciencePurchasePointCostMP = 10
End

Science SCIENCE_AwakenWyrm
  PrerequisiteSciences = SCIENCE_EVIL OR SCIENCE_MORDOR SCIENCE_ArrowVolleyEvil
  SciencePurchasePointCostMP = 12
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Science SCIENCE_EvilBombard
  PrerequisiteSciences = SCIENCE_EVIL OR SCIENCE_MORDOR SCIENCE_CloudBreak OR SCIENCE_MORDOR SCIENCE_Scavenger
  SciencePurchasePointCostMP = 16
End

Science SCIENCE_WatcherAlly
  PrerequisiteSciences = SCIENCE_EVIL OR SCIENCE_MORDOR SCIENCE_Scavenger OR SCIENCE_MORDOR SCIENCE_Darkness
  SciencePurchasePointCostMP = 15
End

Science SCIENCE_Rebuild
  PrerequisiteSciences = SCIENCE_EVIL OR SCIENCE_MORDOR SCIENCE_Darkness OR SCIENCE_MORDOR SCIENCE_AwakenWyrm
  SciencePurchasePointCostMP = 18
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Science SCIENCE_Sunflare
  PrerequisiteSciences = SCIENCE_EVIL OR SCIENCE_MORDOR SCIENCE_EvilBombard OR SCIENCE_MORDOR SCIENCE_WatcherAlly
  SciencePurchasePointCostMP = 25
End

Science SCIENCE_Heal
  PrerequisiteSciences = SCIENCE_EVIL OR SCIENCE_MORDOR SCIENCE_WatcherAlly OR SCIENCE_MORDOR SCIENCE_Rebuild
  SciencePurchasePointCostMP = 20
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Player Templates
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

PlayerTemplate FactionMen
    IntrinsicSciencesMP         = SCIENCE_MORDOR
    SpellBookMp                    = MordorSpellBook
    PurchaseScienceCommandSetMP    = WORSpellStoreCommandSet
End

PlayerTemplate FactionElves
    IntrinsicSciencesMP         = SCIENCE_MORDOR
    SpellBookMp                    = MordorSpellBook
    PurchaseScienceCommandSetMP    = WORSpellStoreCommandSet
End

PlayerTemplate FactionDwarves
    IntrinsicSciencesMP         = SCIENCE_MORDOR
    SpellBookMp                    = MordorSpellBook
    PurchaseScienceCommandSetMP    = WORSpellStoreCommandSet
End

PlayerTemplate FactionIsengard
    IntrinsicSciencesMP         = SCIENCE_MORDOR
    SpellBookMp                    = MordorSpellBook
    PurchaseScienceCommandSetMP    = WORSpellStoreCommandSet
End

PlayerTemplate FactionMordor
    IntrinsicSciencesMP         = SCIENCE_MORDOR
    SpellBookMp                    = MordorSpellBook
    PurchaseScienceCommandSetMP    = WORSpellStoreCommandSet
End

PlayerTemplate FactionWild
    IntrinsicSciencesMP         = SCIENCE_MORDOR
    SpellBookMp                    = MordorSpellBook
    PurchaseScienceCommandSetMP    = WORSpellStoreCommandSet
End


;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;End Spell book
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<


;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Base Keep ; AKA gondor keep
;Reference: Base Keep
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
; basicly take out its commadnset so the comps dont build heros.

CommandSet NewGenericKeepCommandSet

End

Object GondorCampKeep

	CommandSet			= NewGenericKeepCommandSet

End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Alright lets Start the Realms!
; There Are 6 Realms for 6 Players.
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
;1. FIRE REALM
;^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Guardian Drake
;Reference: GuardianDrakeRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;FXS
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

FXParticleSystem DrakeBreathSlave1
  System
    Priority = HIGH_OR_ABOVE  ;VERY_LOW_OR_ABOVE
    Type = GPU_PARTICLE
    ParticleName = EXFireScroll2.tga
    Lifetime = 60 60
    SystemLifetime = 30
    SortLevel = 1
    Size = 8 12
    BurstCount = 1 1
    InitialDelay = 30 30
    IsEmitAboveGroundOnly = Yes
  End
  Color = DefaultColor
    Color2 = R:17 G:19 B:105 5
    Color3 = R:137 G:62 B:61 40
    Color4 = R:0 G:0 B:0 60
  End
  Update = DefaultUpdate
    SizeRate = 0.5 1
    SizeRateDamping = 0.99 0.99
    AngleZ = 0 7
    AngularRateZ = -0.05 0.05
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
    DriftVelocity = X:0 Y:0 Z:0.25
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = 4 4
    Y = -0.5 0.5
    Z = -0.5 0.5
  End
  EmissionVolume = LineEmissionVolume
    StartPoint = X:10 Y:0 Z:0
    EndPoint = X:10 Y:0 Z:0
  End
  Draw = GpuDraw
    FramesPerRow = 4
    TotalFrames = 16
    SpeedMultiplier = 1
  End
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

FXParticleSystem DrakeHeadFire
  System
    Priority = VERY_LOW_OR_ABOVE
    ParticleName = EXFireScroll3.tga
    Lifetime = 17 17
    SortLevel = 1
    Size = 10 15
    BurstDelay = 5 8
    BurstCount = 1 1
  End
  Color = DefaultColor
    Color2 = R:98 G:69 B:51 2
    Color3 = R:0 G:0 B:0 10
    ColorScale = -5 -5
  End
  Update = DefaultUpdate
    SizeRate = -0.5 -0.25
    SizeRateDamping = 1 1
    AngleZ = -5 5
    AngularRateZ = -0.05 0.05
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.9 1
    DriftVelocity = X:0 Y:0 Z:1
  End
  EmissionVelocity = OutwardEmissionVelocity
    Speed = -0.3 -0.3
    OtherSpeed = -0.4 -0.4
  End
  EmissionVolume = LineEmissionVolume
    IsHollow = Yes
    StartPoint = X:6 Y:5 Z:0
    EndPoint = X:6 Y:5 Z:0
  End
  Draw = DefaultDraw
  End
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

FXParticleSystem GDWaveBlastHeat
  System
    Priority = HIGH_OR_ABOVE  ;VERY_LOW_OR_ABOVE
    Shader = ALPHA
    ParticleName = SMUDGE.tga
    Lifetime = 30 30
    Size = 40 40
    BurstDelay = 10 15
    BurstCount = 1 1
  End
  Color = DefaultColor
    Color1 = R:255 G:255 B:255 0
  End
  Alpha = DefaultAlpha
    Alpha1 = 1 1 0
  End
  Update = DefaultUpdate
    SizeRate = 1 1
    SizeRateDamping = 0.9 0.95
    AngleZ = 0.0025 0.005
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.96 0.97
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = -2 2
    Z = -1 1
  End
  EmissionVolume = LineEmissionVolume
    IsHollow = Yes
    StartPoint = X:24 Y:0 Z:24
    EndPoint = X:24 Y:0 Z:24
  End
  Draw = DefaultDraw
  End
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

FXParticleSystem BalrogManeEmbers1
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXEmbersLight.tga
    Lifetime = 50 50
    SortLevel = 1
    Size = 10 15
    BurstDelay = 12 15
    BurstCount = 1 1
  End
  Color = DefaultColor
    Color1 = R:255 G:135 B:80 0
    Color2 = R:0 G:0 B:0 50
    ColorScale = -5 0
  End
  Update = DefaultUpdate
    SizeRate = 6 6
    SizeRateDamping = 0.8 0.85
    AngleZ = -0.3 0.3
    AngularRateZ = -0.03 0.03
    AngularDamping = 0.99 0.99
  End
  Physics = DefaultPhysics
    Gravity = 0.008
    VelocityDamping = 0.9 0.9
    DriftVelocity = X:0 Y:0 Z:0.64
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = LineEmissionVolume
    IsHollow = Yes
    StartPoint = X:-22 Y:0 Z:28
    EndPoint = X:25 Y:0 Z:25
  End
  Draw = DefaultDraw
  End
  Wind = DefaultWind
    WindMotion = PingPong
    WindStrength = 0.5
    WindAngleChangeMin = 0.017453
    WindAngleChangeMax = 0.034907
    WindPingPongStartAngleMax = 0.785398
    WindPingPongEndAngleMin = 5.49779
    WindPingPongEndAngleMax = 6.28319
  End
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

FXParticleSystem BalrogManeEmbers2
  System
    Priority = HIGH_OR_ABOVE  ;ALWAYS_RENDER
    ParticleName = EXLnzFlar1.tga
    Lifetime = 50 50
    SortLevel = 1
    Size = 10 10
    BurstDelay = 10 15
    BurstCount = 1 1
  End
  Color = DefaultColor
    Color1 = R:255 G:135 B:80 0
    Color2 = R:0 G:0 B:0 50
    ColorScale = -5 0
  End
  Update = DefaultUpdate
    SizeRate = 6 6
    SizeRateDamping = 0.8 0.85
    AngleZ = -0.3 0.3
    AngularRateZ = -0.03 0.03
    AngularDamping = 0.99 0.99
  End
  Physics = DefaultPhysics
    Gravity = 0.008
    VelocityDamping = 0.9 0.9
    DriftVelocity = X:0 Y:0 Z:0.64
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = LineEmissionVolume
    IsHollow = Yes
    StartPoint = X:-22 Y:0 Z:10
    EndPoint = X:22 Y:0 Z:10
  End
  Draw = DefaultDraw
  End
  Wind = DefaultWind
    WindMotion = PingPong
    WindStrength = 0.7
    WindAngleChangeMin = 0.017453
    WindAngleChangeMax = 0.034907
    WindPingPongStartAngleMax = 0.785398
    WindPingPongEndAngleMin = 5.49779
    WindPingPongEndAngleMax = 6.28319
  End
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Guardian drakes commadnset
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

CommandSet GuardianDrakeCommandSet
	1	= Command_ToggleStance
	2	= Command_FireDrakeInferno	
	13 = Command_AttackMove
	14 = Command_Stop
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Armor GuardianDrakeArmor
  Armor = DEFAULT		60%     ;this sets the level for all nonspecified damage types
  Armor = CRUSH			50%     ;horseman damage
  Armor = SLASH			50%     ;soldier damage
  Armor = URUK			40%     ;soldier damage
  Armor = PIERCE		40%     ;archer damage - has to be low because he is such an easy target
  Armor = SIEGE			60%     ;siege damage
  Armor = STRUCTURAL		60%	  ;Structural damage (Ent rocks)
  Armor = HERO			60%     ;hero damage
  Armor = MAGIC			100%     ;magic damage
  Armor = HERO_RANGED		45%  ;200%     ;Hero bow damage
  Armor = FLAME			1%  ;150%     ;fire damage
  Armor = LOGICAL_FIRE		1%
  Armor = SPECIALIST    	50%     ;
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Guardian Drake Modules
;Reference: GuardianDrakeModulesRef 
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

ChildObject WildFireDrake_Summoned WildFireDrake

	CommandPoints = 50

;	RemoveModule ModuleTag_LifetimeUpdate
;	RemoveModule ModuleTag_Slave

	BountyValue = 500	


	ShockwaveResistance = SHOCKWAVE_RESISTANCE_STRONG

	AddModule
	Behavior = GrantUpgradeCreate ModuleTag_1
		UpgradeToGrant = Upgrade_GandalfWhite  ;
	End 
	End
	AddModule
	Behavior = SubObjectsUpgrade Costume_2
		TriggeredBy		= Upgrade_GandalfWhite ;
		UpgradeTexture	= WUDrake_C.tga 0 mubalrogash.tga  ;mubalrogwingsash.tga  ;mubalrogash.tga  ;fire.tga  ;
				RecolorHouse	= No
	End
	End
	AddModule
	Behavior = SubObjectsUpgrade Costume_3
		TriggeredBy		= Upgrade_GandalfWhite ;
		UpgradeTexture	= WUFireDrk_C.tga 0 mubalrogash.tga  ;mubalrogwingsash.tga  ;mubalrogwings.tga  ;mubalrogash.tga  ;fire.tga  ;
				RecolorHouse	= No
	End
	End



	; *** ART Parameters ***
	
	SelectPortrait  =  HPFireDrake
					;	BuildingNoArt

	; ButtonImage for Heros is button image on Hero Select UI to select hero. HI = HeroIcon or HeroImage.
    ButtonImage		= HIFireDrake
	


	ReplaceModule ModuleTag_01
	Draw = W3DScriptedModelDraw ModuleTag_011
		OkToChangeModelColor = Yes

		StaticModelLODMode = Yes
	
		
		ParticlesAttachedToAnimatedBones = yes

		DefaultModelConditionState
			Model						=	WUFireDrk_SKN
			Skeleton					=   WUFireDrk_SKL
			WeaponLaunchBone			=	PRIMARY B_JAW
		;	ParticleSysBone = B_JAW BalrogManeFlare FollowBone:yes
		;	ParticleSysBone = NONE BalrogManeEmbers1 FollowBone:yes
		;	ParticleSysBone = NONE BalrogManeEmbers2 FollowBone:yes
		;	ParticleSysBone = B_Neck BalrogManeFlare FollowBone:yes
		;	ParticleSysBone = B_Head DrakeHeadFire FollowBone:yes  
		;	ParticleSysBone = NONE GDWaveBlastHeat FollowBone:yes
		End
		
		; --- Idle Anims
		IdleAnimationState
			Animation				= IDLA
				AnimationName		= WUFireDrk_IDLA
				AnimationMode		= ONCE
				AnimationPriority   = 1
			End
			Flags				=	RESTART_ANIM_WHEN_COMPLETE
			ParticleSysBone = B_Head SummonedDragonFireSnort	FollowBone:Yes
			ParticleSysBone = B_Head SummonedDragonSnortEmbers	FollowBone:Yes

			ParticleSysBone = B_JAW BalrogManeFlare FollowBone:yes
			ParticleSysBone = NONE BalrogManeEmbers1 FollowBone:yes
			ParticleSysBone = NONE BalrogManeEmbers2 FollowBone:yes
			ParticleSysBone = B_Neck BalrogManeFlare FollowBone:yes
			ParticleSysBone = B_Head DrakeHeadFire FollowBone:yes  
			ParticleSysBone = NONE GDWaveBlastHeat FollowBone:yes
		End

		AnimationState          = DYING DEATH_2
			Animation
				AnimationName   = WUFireDrk_IDLA
				AnimationMode   = LOOP
			End
		End
		
		AnimationState						= DYING
			Animation						= DIEA
				AnimationName				= WUFireDrk_DIEA
				AnimationMode				= ONCE
			End
		End



;;-------- FALLING & FLYING

		AnimationState						= STUNNED_FLAILING
			Animation						= Falling
				AnimationName				= WUFireDrk_FLYA
				AnimationMode				= LOOP
			End
			Flags							= RANDOMSTART
			ParticleSysBone = B_JAW BalrogManeFlare FollowBone:yes
			ParticleSysBone = NONE BalrogManeEmbers1 FollowBone:yes
			ParticleSysBone = NONE BalrogManeEmbers2 FollowBone:yes
			ParticleSysBone = B_Neck BalrogManeFlare FollowBone:yes
			ParticleSysBone = B_Head DrakeHeadFire FollowBone:yes  
			ParticleSysBone = NONE GDWaveBlastHeat FollowBone:yes
		End
		
		AnimationState						= PASSENGER
			Animation						= Grabbed
				AnimationName				= WUFireDrk_FLYA
				AnimationMode				= LOOP
			End
			Flags							= RANDOMSTART
			ParticleSysBone = B_JAW BalrogManeFlare FollowBone:yes
			ParticleSysBone = NONE BalrogManeEmbers1 FollowBone:yes
			ParticleSysBone = NONE BalrogManeEmbers2 FollowBone:yes
			ParticleSysBone = B_Neck BalrogManeFlare FollowBone:yes
			ParticleSysBone = B_Head DrakeHeadFire FollowBone:yes  
			ParticleSysBone = NONE GDWaveBlastHeat FollowBone:yes
		End
		
		AnimationState        				= THROWN_PROJECTILE
			Animation           			= FlyA
				AnimationName      	 		= WUFireDrk_FLYA
				AnimationMode       		= LOOP
			End
			Flags               			= RANDOMSTART
			ParticleSysBone = B_JAW BalrogManeFlare FollowBone:yes
			ParticleSysBone = NONE BalrogManeEmbers1 FollowBone:yes
			ParticleSysBone = NONE BalrogManeEmbers2 FollowBone:yes
			ParticleSysBone = B_Neck BalrogManeFlare FollowBone:yes
			ParticleSysBone = B_Head DrakeHeadFire FollowBone:yes  
			ParticleSysBone = NONE GDWaveBlastHeat FollowBone:yes
		End
		
		AnimationState						= FREEFALL
			Animation						= Falling
				AnimationName				= WUFireDrk_FLYA
				AnimationMode				= LOOP
				AnimationBlendTime			= 10
			End
			ParticleSysBone = B_JAW BalrogManeFlare FollowBone:yes
			ParticleSysBone = NONE BalrogManeEmbers1 FollowBone:yes
			ParticleSysBone = NONE BalrogManeEmbers2 FollowBone:yes
			ParticleSysBone = B_Neck BalrogManeFlare FollowBone:yes
			ParticleSysBone = B_Head DrakeHeadFire FollowBone:yes  
			ParticleSysBone = NONE GDWaveBlastHeat FollowBone:yes
		End
						
		AnimationState						= STUNNED_STANDING_UP 
			Animation						= StandUp
				AnimationName				= WUFireDrk_GTPA
				AnimationMode				= ONCE
			End
			ParticleSysBone = B_JAW BalrogManeFlare FollowBone:yes
			ParticleSysBone = NONE BalrogManeEmbers1 FollowBone:yes
			ParticleSysBone = NONE BalrogManeEmbers2 FollowBone:yes
			ParticleSysBone = B_Neck BalrogManeFlare FollowBone:yes
			ParticleSysBone = B_Head DrakeHeadFire FollowBone:yes  
			ParticleSysBone = NONE GDWaveBlastHeat FollowBone:yes
		End
		
		AnimationState						= STUNNED
			Animation						= LNDA
				AnimationName				= WUFireDrk_LNDA
				AnimationMode				= ONCE
			End
			ParticleSysBone = B_JAW BalrogManeFlare FollowBone:yes
			ParticleSysBone = NONE BalrogManeEmbers1 FollowBone:yes
			ParticleSysBone = NONE BalrogManeEmbers2 FollowBone:yes
			ParticleSysBone = B_Neck BalrogManeFlare FollowBone:yes
			ParticleSysBone = B_Head DrakeHeadFire FollowBone:yes  
			ParticleSysBone = NONE GDWaveBlastHeat FollowBone:yes
		End		

		AnimationState						= SPECIAL_WEAPON_ONE
			Animation						= ATKA
				AnimationName				= WUFireDrk_ATKA
				AnimationMode				= ONCE
				;UseWeaponTiming				= Yes
			End
			ParticleSysBone = B_HEAD DrakeBreathProxy FOLLOWBONE:YES
			ParticleSysBone = B_HEAD DrakeBreathSlave1 FOLLOWBONE:YES
			ParticleSysBone = B_HEAD DrakeFireBreathSmoke FOLLOWBONE:YES
			ParticleSysBone = B_HEAD DrakeBreathWarmup FOLLOWBONE:YES
			ParticleSysBone = B_HEAD FireTest
		End
				
		AnimationState						= MOVING ATTACKING
			Animation						= ATA1
				AnimationName				= WUFireDrk_RUNA
				AnimationMode				= LOOP
				;UseWeaponTiming				= Yes
				AnimationSpeedFactorRange	= 0.87 0.87
			End
			ParticleSysBone = B_JAW BalrogManeFlare FollowBone:yes
			ParticleSysBone = NONE BalrogManeEmbers1 FollowBone:yes
			ParticleSysBone = NONE BalrogManeEmbers2 FollowBone:yes
			ParticleSysBone = B_Neck BalrogManeFlare FollowBone:yes
			ParticleSysBone = B_Head DrakeHeadFire FollowBone:yes  
			ParticleSysBone = NONE GDWaveBlastHeat FollowBone:yes
		End

		AnimationState						= ATTACKING
			Animation						= ATKB
				AnimationName				= WUFireDrk_ATKB
				AnimationMode				= ONCE
				;UseWeaponTiming				= Yes
			End

			ParticleSysBone = NONE BalrogManeEmbers1 FollowBone:yes
			ParticleSysBone = NONE BalrogManeEmbers2 FollowBone:yes
			ParticleSysBone = NONE GDWaveBlastHeat FollowBone:yes

			; this actually worked but will hook to animation sound instead
			;BeginScript		
			;	CurDrawablePlaySound("FireDrakeFireExhale")
			;EndScript

			Flags							= RESTART_ANIM_WHEN_COMPLETE
			ParticleSysBone = B_HEAD DrakeBreathProxy FOLLOWBONE:YES
			ParticleSysBone = B_HEAD DrakeBreathSlave1 FOLLOWBONE:YES
			ParticleSysBone = B_HEAD DrakeFireBreathSmoke FOLLOWBONE:YES
			ParticleSysBone = B_HEAD DrakeBreathWarmup FOLLOWBONE:YES
		End

		AnimationState = MOVING TURN_LEFT_HIGH_SPEED
			Animation = Moving
				AnimationName				= WUFireDrk_RUNA
				AnimationMode				= LOOP
				AnimationBlendTime			= 10
				AnimationSpeedFactorRange = 1.0 1.0
			End
			ParticleSysBone = B_JAW BalrogManeFlare FollowBone:yes
			ParticleSysBone = NONE BalrogManeEmbers1 FollowBone:yes
			ParticleSysBone = NONE BalrogManeEmbers2 FollowBone:yes
			ParticleSysBone = B_Neck BalrogManeFlare FollowBone:yes
			ParticleSysBone = B_Head DrakeHeadFire FollowBone:yes  
			ParticleSysBone = NONE GDWaveBlastHeat FollowBone:yes
		End

		AnimationState = MOVING TURN_RIGHT_HIGH_SPEED
			Animation = Moving
				AnimationName				= WUFireDrk_RUNA
				AnimationMode				= LOOP
				AnimationBlendTime			= 10
				AnimationSpeedFactorRange = 1.0 1.0
			End
			ParticleSysBone = B_JAW BalrogManeFlare FollowBone:yes
			ParticleSysBone = NONE BalrogManeEmbers1 FollowBone:yes
			ParticleSysBone = NONE BalrogManeEmbers2 FollowBone:yes
			ParticleSysBone = B_Neck BalrogManeFlare FollowBone:yes
			ParticleSysBone = B_Head DrakeHeadFire FollowBone:yes  
			ParticleSysBone = NONE GDWaveBlastHeat FollowBone:yes
		End

		AnimationState = TURN_LEFT
			Animation = Moving
				AnimationName				= WUFireDrk_TRNL
				AnimationMode				= LOOP
				AnimationBlendTime			= 10
				AnimationSpeedFactorRange = 1.8 1.8
			End
			ParticleSysBone = B_JAW BalrogManeFlare FollowBone:yes
			ParticleSysBone = NONE BalrogManeEmbers1 FollowBone:yes
			ParticleSysBone = NONE BalrogManeEmbers2 FollowBone:yes
			ParticleSysBone = B_Neck BalrogManeFlare FollowBone:yes
			ParticleSysBone = B_Head DrakeHeadFire FollowBone:yes  
			ParticleSysBone = NONE GDWaveBlastHeat FollowBone:yes
		End

		AnimationState = TURN_RIGHT
			Animation = Moving
				AnimationName				= WUFireDrk_TRNR
				AnimationMode				= LOOP
				AnimationBlendTime			= 10
				AnimationSpeedFactorRange = 1.8 1.8
			End
			ParticleSysBone = B_JAW BalrogManeFlare FollowBone:yes
			ParticleSysBone = NONE BalrogManeEmbers1 FollowBone:yes
			ParticleSysBone = NONE BalrogManeEmbers2 FollowBone:yes
			ParticleSysBone = B_Neck BalrogManeFlare FollowBone:yes
			ParticleSysBone = B_Head DrakeHeadFire FollowBone:yes  
			ParticleSysBone = NONE GDWaveBlastHeat FollowBone:yes
		End		

		AnimationState = MOVING ACCELERATE
			Animation = Moving
				AnimationName = WUFireDrk_ACCL
				AnimationMode = LOOP
				AnimationSpeedFactorRange	=  0.7 0.7
				AnimationBlendTime			= 10
			End
			;Flags = RANDOMSTART
			;ParticleSysBone = None InfantryDustTrails
			FXEvent	= Frame:17 FireWhenSkipped Name:FX_DrakeRightFootStep
			FXEvent	= Frame:6 FireWhenSkipped Name:FX_DrakeLeftFootStep

			ParticleSysBone = B_JAW BalrogManeFlare FollowBone:yes
			ParticleSysBone = NONE BalrogManeEmbers1 FollowBone:yes
			ParticleSysBone = NONE BalrogManeEmbers2 FollowBone:yes
			ParticleSysBone = B_Neck BalrogManeFlare FollowBone:yes
			ParticleSysBone = B_Head DrakeHeadFire FollowBone:yes  
			ParticleSysBone = NONE GDWaveBlastHeat FollowBone:yes
		End
				
		AnimationState = MOVING
			Animation = Moving
				AnimationName = WUFireDrk_RUNA
				AnimationMode = LOOP
				AnimationSpeedFactorRange	= 0.7 0.7
			End
			;Flags = RANDOMSTART
			;ParticleSysBone = None InfantryDustTrails
			FXEvent	= Frame:17 FireWhenSkipped Name:FX_DrakeRightFootStep
			FXEvent	= Frame:6 FireWhenSkipped Name:FX_DrakeLeftFootStep

			ParticleSysBone = B_JAW BalrogManeFlare FollowBone:yes
			ParticleSysBone = NONE BalrogManeEmbers1 FollowBone:yes
			ParticleSysBone = NONE BalrogManeEmbers2 FollowBone:yes
			ParticleSysBone = B_Neck BalrogManeFlare FollowBone:yes
			ParticleSysBone = B_Head DrakeHeadFire FollowBone:yes  
			ParticleSysBone = NONE GDWaveBlastHeat FollowBone:yes
		End

		
	End
	End
	
	WeaponSet
		Conditions	= None 
		Weapon		= PRIMARY    FireDrakeFlame
	End
	
	ArmorSet
		Conditions      = None
		Armor           = GuardianDrakeArmor
		DamageFX        = NormalDamageFX
	End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
; I want GDrakes to have very bad sight. so only 200 radius.
	
	VisionRange			= 200
	ShroudClearingRange = 230

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

	DisplayName			= GuardianDrake
	CrushableLevel		= 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrusherLevel		= 2
	RamPower = 30;
	RamZMult = 0.5;
	MinCrushVelocityPercent = 40
	CrushDecelerationPercent = 10%
	CrushRevengeWeapon	= RangedInfantryCrushRevenge

	CommandSet			= WildFireDrakeCommandSet	


	; *** ENGINEERING Parameters ***
	RadarPriority = UNIT
	KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS MONSTER CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT SCORE PATH_THROUGH_EACH_OTHER


	ReplaceModule ModuleTag_02
	Body = ActiveBody ModuleTag_021
		CheerRadius 	  = EMOTION_CHEER_RADIUS
		MaxHealth         = 6950
		RecoveryTime      = FIREDRAKE_HEALTH_RECOVERY_TIME
	End
	End

	LocomotorSet
		Locomotor = FiredrakeLocomotor
		Condition = SET_NORMAL
		Speed     = 75
	End

	LocomotorSet
		Locomotor = HumanWanderLocomotor
		Condition = SET_WANDER 
		Speed     = 75
	End

	AddModule
	Behavior = AutoHealBehavior ModuleTag_GDrakeHealing
		StartsActive = Yes
		HealingAmount = 25
		HealingDelay = 1000
		StartHealingDelay = 5000
		HealOnlyIfNotInCombat = Yes
	End
	End
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;GDrake's abillities
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<	
	;;; Inferno ;;;
	ReplaceModule ModuleTag_InfernoStarter
	Behavior = SpecialPowerModule ModuleTag_InfernoStarter1
		SpecialPowerTemplate		= SpecialAbilityFireDrakeInferno
		UpdateModuleStartsAttack	= Yes
		InitiateSound			= FireDrakeVoxInferno
	End
	End

	ReplaceModule ModuleTag_InfernoUpdate
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_InfernoUpdate1
		SpecialPowerTemplate    = SpecialAbilityFireDrakeInferno

		UnpackTime              = 1300 ; Drawing the horn
;		PreparationTime         = 1   ; nothing
;		PersistentPrepTime      = 1600 ; Blowing
		PackTime                = 3700 ; Putting horn away

		AwardXPForTriggering    = 0
		
		StartAbilityRange = 90.0
		
		SpecialWeapon = FireDrakeInferno
		WhichSpecialWeapon = 1
	End
	End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
	Scale = 1.30
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<		
	Geometry = CYLINDER
	GeometryMajorRadius = 39.0
	GeometryMinorRadius = 39.0
	GeometryHeight = 22.2
	GeometryIsSmall = Yes

    Shadow = SHADOW_VOLUME
    ShadowSizeX = 10;
    ShadowSizeY = 10;
    ShadowTexture = ShadowI;
End



;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Fire Drake
;Reference: FireDrakeRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<



;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
; Firedrakes Commandset
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

CommandSet FireDrakeCommandSet
	1	= Command_ToggleStance
	2	= Command_FireDrakeInferno	
	13 = Command_AttackMove
	14 = Command_Stop
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;FXs
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

FXParticleSystem NormalDrakeFireBreathSmoke
  System
    Priority = ALWAYS_RENDER
    Shader = ALPHA
    ParticleName = EXCloud06HiRes.tga
    Lifetime = 40 40
    SystemLifetime = 20
    SortLevel = 1
    Size = 20 40
    BurstCount = 3 3
    InitialDelay = 15 15
    IsEmitAboveGroundOnly = Yes
  End
  Color = DefaultColor
    Color2 = R:226 G:149 B:71 3
    Color3 = R:125 G:43 B:15 15
    Color4 = R:0 G:0 B:0 28
  End
  Alpha = DefaultAlpha
    Alpha2 = 0.25 0.5 20
    Alpha3 = -0.25 0 80
  End
  Update = DefaultUpdate
    SizeRate = 0.25 1
    SizeRateDamping = 0.99 0.99
    AngularRateZ = -0.05 0.05
    AngularDamping = 1 1
    AngularRateXY = 0.05 0.05
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
    DriftVelocity = X:0 Y:0 Z:0.1
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = 3 5
    Y = -0.5 0.5
    Z = -0.5 0.5
  End
  EmissionVolume = CylinderEmissionVolume
    Radius = 4
  End
  Draw = DefaultDraw
  End
  Wind = DefaultWind
    WindMotion = PingPong
    WindStrength = 0.1
    WindAngleChangeMin = 0.149924
    WindAngleChangeMax = 0.449946
    WindPingPongStartAngleMax = 0.785398
    WindPingPongEndAngleMin = 5.49779
    WindPingPongEndAngleMax = 6.28319
    TurbulenceAmplitude = 0.02
    TurbulenceFrequency = 25
  End
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

FXParticleSystem NormalDrakeBreathProxy
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXFire01.tga
    Lifetime = 20 20
    SystemLifetime = 30
    SortLevel = 1
    Size = 3 12
    BurstDelay = 5 5
    BurstCount = 1 1
    InitialDelay = 15 15
  End
  Color = DefaultColor
    Color1 = R:3 G:3 B:1 0
    Color2 = R:3 G:3 B:1 30
    Color3 = R:125 G:43 B:15 0
  End
  Update = DefaultUpdate
    SizeRate = -1 -1
    SizeRateDamping = 0.99 0.99
    AngularRateZ = -0.05 0.05
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    Gravity = -0.15
    VelocityDamping = 1 1
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = 1 1
  End
  EmissionVolume = CylinderEmissionVolume
    Radius = 4
  End
  Draw = DefaultDraw
  End
  Wind = DefaultWind
    WindMotion = PingPong
    WindStrength = 0.1
    WindAngleChangeMin = 0.149924
    WindAngleChangeMax = 0.449946
    WindPingPongStartAngleMax = 0.785398
    WindPingPongEndAngleMin = 5.49779
    WindPingPongEndAngleMax = 6.28319
    TurbulenceAmplitude = 0.02
    TurbulenceFrequency = 25
  End
  Event = TerrainCollision
    HeightOffset = 0 0
    EventFX = FX_DrakeFireBreath
    OrientFXToTerrain = Yes
    PerParticle = Yes
    KillAfterEvent = Yes
  End
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

FXParticleSystem NormalDrakeBreathSlave
  System
    Priority = VERY_LOW_OR_ABOVE
    Type = GPU_PARTICLE
    ParticleName = EXFireScroll2.tga
    Lifetime = 10 10
    SystemLifetime = 30
    SortLevel = 1
    Size = 13 18
    BurstCount = 2 2
    InitialDelay = 30 30
    IsEmitAboveGroundOnly = Yes
  End
  Color = DefaultColor
    Color2 = R:97 G:69 B:51 5
    Color3 = R:97 G:69 B:51 40
    Color4 = R:0 G:0 B:0 60
  End
  Update = DefaultUpdate
    SizeRate = 0.9 1.2
    SizeRateDamping = 0.99 0.99
    AngleZ = 0 7
    AngularRateZ = -0.05 0.05
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
    DriftVelocity = X:0 Y:0 Z:0.25
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = 4 4
    Y = -0.5 0.5
    Z = -0.5 0.5
  End
  EmissionVolume = LineEmissionVolume
    StartPoint = X:10 Y:0 Z:0
    EndPoint = X:10 Y:0 Z:0
  End
  Draw = GpuDraw
    FramesPerRow = 4
    TotalFrames = 16
    SpeedMultiplier = 1
  End
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;FX List
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

FXList FX_FireDrake

  ParticleSystem
    Name = GandalfWaveBlastHeat
     OrientToObject = Yes
    InitialDelay = 2000 2000 UNIFORM   ;In milliseconds
    Offset = X:0.0 Y:0.0 Z:0.0
  End
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Weapons
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Weapon NewFireDrakeFlame
	IdleAfterFiringDelay = 0
	LeechRangeWeapon	 = Yes
	AttackRange = 40
	WeaponSpeed = FIREDRAKE_FLAME_SPEED         ; dist/sec 
	RadiusDamageAffects = ENEMIES
	DelayBetweenShots = 3000               ; time between shots, msec
	PreAttackDelay        = FIREDRAKE_FLAME_PREATTACKDELAY
	PreAttackType         = PER_ATTACK ; Do the delay each time we attack a new target
	FireFX                = FX_FireDrake
	FiringDuration        = 1000
	DamageDealtAtSelfPosition = Yes 
	IsAimingWeapon		= Yes
	AcceptableAimDelta	= 15
	AntiAirborneVehicle	= No
	AntiAirborneMonster	= No

	DamageNugget                        ; A basic Nugget that just does damage
		Damage			= 100
		;DamageArc 		= 70
		Radius			= 70.0
		DamageType		= FLAME
		DamageFXType	= FLAME
		DeathType		= BURNED
		DamageSpeed		= 400.0 ; must match the ShockWaveSpeed below
	End

	DamageNugget                        ; A basic Nugget that just does damage
		Damage			= 100
		;DamageArc 		= 70
		Radius			= 70.0
	    	DamageType		= SLASH	
	    	DamageFXType	= FLAME
	    	DeathType		= BURNED
		DamageSpeed		= 400.0 ; must match the ShockWaveSpeed below
	End
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;CommandSet
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

CommandSet NormalFireDrakeCommandSet
	1	= Command_ToggleStance
; im taking off the normal firedrakes inferno.
	;2	= Command_FireDrakeInferno	

	13 = Command_AttackMove
	14 = Command_Stop
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Armor
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Armor NewFireDrakeArmor
  Armor = DEFAULT		100%     ;this sets the level for all nonspecified damage types
  Armor = CRUSH			100%     ;horseman damage
  Armor = SLASH			100%     ;soldier damage
  Armor = URUK			100%     ;soldier damage
  Armor = PIERCE		90%     ;archer damage - has to be low because he is such an easy target
  Armor = SIEGE			100%     ;siege damage
  Armor = STRUCTURAL		100%	  ;Structural damage (Ent rocks)
  Armor = HERO			120%     ;hero damage
  Armor = MAGIC			200%     ;magic damage
  Armor = HERO_RANGED		150%  ;Hero bow damage
  Armor = FLAME			1%  ;fire damage
  Armor = LOGICAL_FIRE		1%
  Armor = SPECIALIST    	100%     ;
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Normal Fire Drake
;Reference: NormalFireDrakeRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Object WildFireDrake

	BuildCost = 300				
	BuildTime = 25
	BountyValue = 30		


;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

	ReplaceModule ModuleTag_01
	Draw = W3DScriptedModelDraw ModuleTag_011
		OkToChangeModelColor = Yes

		StaticModelLODMode = Yes
		
		; specify options for static LODs
		
		ParticlesAttachedToAnimatedBones = yes

		DefaultModelConditionState
			Model						=	WUFireDrk_SKN
			Skeleton					=   WUFireDrk_SKL
			WeaponLaunchBone			=	PRIMARY B_JAW
		End
		
		; --- Idle Anims
		IdleAnimationState
			Animation				= IDLA
				AnimationName		= WUFireDrk_IDLA
				AnimationMode		= ONCE
				AnimationPriority   = 1
			End
			Flags				=	RESTART_ANIM_WHEN_COMPLETE
		End

		AnimationState          = DYING DEATH_2
			Animation
				AnimationName   = WUFireDrk_IDLA
				AnimationMode   = LOOP
			End
		End
		
		AnimationState						= DYING
			Animation						= DIEA
				AnimationName				= WUFireDrk_DIEA
				AnimationMode				= ONCE
			End
		End



;;-------- FALLING & FLYING

		AnimationState						= STUNNED_FLAILING
			Animation						= Falling
				AnimationName				= WUFireDrk_FLYA
				AnimationMode				= LOOP
			End
			Flags							= RANDOMSTART
		End
		
		AnimationState						= PASSENGER
			Animation						= Grabbed
				AnimationName				= WUFireDrk_FLYA
				AnimationMode				= LOOP
			End
			Flags							= RANDOMSTART
		End
		
		AnimationState        				= THROWN_PROJECTILE
			Animation           			= FlyA
				AnimationName      	 		= WUFireDrk_FLYA
				AnimationMode       		= LOOP
			End
			Flags               			= RANDOMSTART
		End
		
		AnimationState						= FREEFALL
			Animation						= Falling
				AnimationName				= WUFireDrk_FLYA
				AnimationMode				= LOOP
				AnimationBlendTime			= 10
			End
		End
						
		AnimationState						= STUNNED_STANDING_UP 
			Animation						= StandUp
				AnimationName				= WUFireDrk_GTPA
				AnimationMode				= ONCE
			End
		End
		
		AnimationState						= STUNNED
			Animation						= LNDA
				AnimationName				= WUFireDrk_LNDA
				AnimationMode				= ONCE
			End
		End		

		AnimationState						= SPECIAL_WEAPON_ONE
			Animation						= ATKA
				AnimationName				= WUFireDrk_ATKA
				AnimationMode				= ONCE
				;UseWeaponTiming				= Yes
			End
			ParticleSysBone = B_HEAD DrakeBreathProxy FOLLOWBONE:YES
			ParticleSysBone = B_HEAD DrakeBreathSlave FOLLOWBONE:YES
			ParticleSysBone = B_HEAD DrakeFireBreathSmoke FOLLOWBONE:YES
			ParticleSysBone = B_HEAD DrakeBreathWarmup FOLLOWBONE:YES
			ParticleSysBone = B_HEAD FireTest
		End
		
				
		AnimationState						= MOVING ATTACKING
			Animation						= ATA1
				AnimationName				= WUFireDrk_RUNA
				AnimationMode				= LOOP
				;UseWeaponTiming				= Yes
				AnimationSpeedFactorRange	= 0.87 0.87
			End
		End

		AnimationState						= ATTACKING
			Animation						= ATKB
				AnimationName				= WUFireDrk_ATKB
				AnimationMode				= ONCE
				;UseWeaponTiming				= Yes
			End

			; this actually worked but will hook to animation sound instead
			;BeginScript		
			;	CurDrawablePlaySound("FireDrakeFireExhale")
			;EndScript

			Flags							= RESTART_ANIM_WHEN_COMPLETE
			ParticleSysBone = B_HEAD NormalDrakeBreathProxy FOLLOWBONE:YES
			ParticleSysBone = B_HEAD NormalDrakeBreathSlave FOLLOWBONE:YES
			ParticleSysBone = B_HEAD NormalDrakeFireBreathSmoke FOLLOWBONE:YES
;			ParticleSysBone = B_HEAD DrakeBreathWarmup FOLLOWBONE:YES
		End

		AnimationState = MOVING TURN_LEFT_HIGH_SPEED
			Animation = Moving
				AnimationName				= WUFireDrk_RUNA
				AnimationMode				= LOOP
				AnimationBlendTime			= 10
				AnimationSpeedFactorRange = 1.5 1.5
			End
		End

		AnimationState = MOVING TURN_RIGHT_HIGH_SPEED
			Animation = Moving
				AnimationName				= WUFireDrk_RUNA
				AnimationMode				= LOOP
				AnimationBlendTime			= 10
				AnimationSpeedFactorRange = 1.5 1.5
			End
		End

		AnimationState = TURN_LEFT
			Animation = Moving
				AnimationName				= WUFireDrk_TRNL
				AnimationMode				= LOOP
				AnimationBlendTime			= 10
				AnimationSpeedFactorRange = 2.5 2.5
			End
		End

		AnimationState = TURN_RIGHT
			Animation = Moving
				AnimationName				= WUFireDrk_TRNR
				AnimationMode				= LOOP
				AnimationBlendTime			= 10
				AnimationSpeedFactorRange = 2.5 2.5
			End
		End
				

		AnimationState = MOVING ACCELERATE
			Animation = Moving
				AnimationName = WUFireDrk_ACCL
				AnimationMode = LOOP
				AnimationSpeedFactorRange	=  1.0 1.0
				AnimationBlendTime			= 10
			End
			;Flags = RANDOMSTART
			;ParticleSysBone = None InfantryDustTrails
			FXEvent	= Frame:17 FireWhenSkipped Name:FX_DrakeRightFootStep
			FXEvent	= Frame:6 FireWhenSkipped Name:FX_DrakeLeftFootStep
		End		
				
		AnimationState = MOVING
			Animation = Moving
				AnimationName = WUFireDrk_RUNA
				AnimationMode = LOOP
				AnimationSpeedFactorRange	= 1.0 1.0
			End
			;Flags = RANDOMSTART
			;ParticleSysBone = None InfantryDustTrails
			FXEvent	= Frame:17 FireWhenSkipped Name:FX_DrakeRightFootStep
			FXEvent	= Frame:6 FireWhenSkipped Name:FX_DrakeLeftFootStep
		End
		
	End
	End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

	ShockwaveResistance = 50	
	
	WeaponSet
		Conditions	= None 
		Weapon		= PRIMARY    NewFireDrakeFlame
	End
	
	ArmorSet
		Conditions      = None
		Armor           = NewFireDrakeArmor
		DamageFX        = NormalDamageFX
	End
	
	VisionRange			= VISION_STANDARD_LARGE_ANIMAL
	ShroudClearingRange = SHROUD_CLEAR_HERO

	DisplayName			= OBJECT:WildFireDrake
	CrushableLevel		= 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrusherLevel		= 2
	CrushDecelerationPercent = 10%
	CrushRevengeWeapon	= RangedInfantryCrushRevenge
	CommandSet			= NormalFireDrakeCommandSet	



	; *** ENGINEERING Parameters ***
	RadarPriority = UNIT
	KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS MONSTER CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT SCORE
	
	ReplaceModule ModuleTag_02
	Body = ActiveBody ModuleTag_021
		CheerRadius 	  = EMOTION_CHEER_RADIUS
		MaxHealth         = 2950
		RecoveryTime      = FIREDRAKE_HEALTH_RECOVERY_TIME
	End
	End

	AddModule
	Behavior = AutoHealBehavior ModuleTag_DrakeHealing
		StartsActive = Yes
		HealingAmount = 25
		HealingDelay = 1000
		StartHealingDelay = 30000
		HealOnlyIfNotInCombat = Yes
	End
	End
	
	LocomotorSet
		Locomotor = FiredrakeLocomotor
		Condition = SET_NORMAL
		Speed     = 110
	End

	LocomotorSet
		Locomotor = HumanWanderLocomotor
		Condition = SET_WANDER 
		Speed     = 110
	End
	
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
	Scale = 0.90
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

	Geometry = CYLINDER
	GeometryMajorRadius = 19.0
	GeometryMinorRadius = 19.0
	GeometryHeight = 19.2
	GeometryIsSmall = Yes

    Shadow = SHADOW_VOLUME
    ShadowSizeX = 17;
    ShadowSizeY = 14;
    ShadowTexture = ShadowI;

End


;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Balrog
;Reference: MordorBalrogRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<


;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;FXs
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Word of hell abillity
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
FXParticleSystem MorgothBlastFinalLight
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXexplo01.tga
    Lifetime = 10 10
    SystemLifetime = 5
    SortLevel = 1
    Size = 10 10
    BurstCount = 2 2
  End
  Color = DefaultColor
    Color1 = R:249 G:168 B:55 0
    Color2 = R:0 G:0 B:0 10
  End
  Update = DefaultUpdate
    SizeRate = 80 160
    SizeRateDamping = 0.8 0.7
    AngleZ = -1 1
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    Gravity = 1
    VelocityDamping = 1 1
  End
  EmissionVelocity = OutwardEmissionVelocity
    Speed = 1 1
  End
  EmissionVolume = PointEmissionVolume
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem MorgothBlastFinalShockWave
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXRing01.tga
    Lifetime = 50 50
    SystemLifetime = 50
    SortLevel = 1
    Size = 1 1
    BurstCount = 1 1
    IsGroundAligned = Yes
  End
  Color = DefaultColor
    Color1 = R:210 G:125 B:10 0
    Color2 = R:0 G:0 B:0 40
    ColorScale = -40 40
  End
  Update = DefaultUpdate
    SizeRate = 25 55
    SizeRateDamping = 0.9 0.95
    AngleZ = -1 1
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.8 0.8
  End
  EmissionVelocity = OutwardEmissionVelocity
  End
  EmissionVolume = PointEmissionVolume
    IsHollow = Yes
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem MorgothBlastDust
  System
    Priority = ALWAYS_RENDER
    Shader = ALPHA
    ParticleName = EXsmokeplume.tga
    PerParticleAttachedSystem = GandalfBlastDustCore
    Lifetime = 100 100
    SystemLifetime = 5
    SortLevel = 1
    Size = 1 2
    BurstCount = 25 50
    InitialDelay = 5 5
  End
  Color = DefaultColor
    Color1 = R:241 G:130 B:86 0
  End
  Alpha = DefaultAlpha
    Alpha1 = 0.2 0.3 0
    Alpha2 = -2 0 100
  End
  Update = DefaultUpdate
    SizeRate = 2 15
    SizeRateDamping = 0.8 0.8
    AngleZ = 0 7
    AngularRateZ = -0.1 -0.1
    AngularDamping = 0.92 0.94
    Rotation = ROTATE_V
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.92 0.94
    DriftVelocity = X:0.032 Y:0.064 Z:0.15
  End
  EmissionVelocity = OutwardEmissionVelocity
    Speed = 20 20
  End
  EmissionVolume = CylinderEmissionVolume
    Radius = 12
  End
  Draw = DefaultDraw
  End
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<




;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;FX lists
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

FXList FX_MorgothRedWordOfPower
  ParticleSystem
    Name = MorgothBlastFinalLight
    Offset = X:15.0 Y:0.0 Z:60   ;Z:8.0
  End
  ParticleSystem
    Name = MeteorExpEmbers
    Offset = X:15.0 Y:0.0 Z:20.0
  End

  ParticleSystem
    Name = MorgothBlastFinalShockWave
    InitialDelay = 6000 6000 UNIFORM   ;In milliseconds
    Offset = X:15.0 Y:0.0 Z:20.0
  End

  ParticleSystem
    Name = MeteorExp
    Offset = X:15.0 Y:0.0 Z:20.0
  End
  ParticleSystem
    Name = MeteorExp02
    Offset = X:15.0 Y:0.0 Z:20.0
  End
  ParticleSystem
    Name = MeteorExp03
    Offset = X:15.0 Y:0.0 Z:20.0
  End
  ParticleSystem
    Name = MorgothBlastDust
    Offset = X:15.0 Y:0.0 Z:15.0
  End

  Sound
    Name = GandalfBlastWeapon
  End

  CameraShakerVolume
    Radius = 800
    Duration_Seconds = 7.0
    Amplitude_Degrees = 0.5
  End

	DynamicDecal           ; A decal that belongs to nobody, but updates internally to fade and tint and such
                DecalName                   = EXScorch03
                Size                              = 700
                Color                             = R:255 G:220 B:220
                OpacityStart                  = 0
                OpacityFadeTimeOne     = 1500
                OpacityPeak                             = 215
                OpacityPeakTime                      = 10000
                OpacityFadeTimeTwo     = 27000
                OpacityEnd                               = 0
                StartingDelay     = 30
                Lifetime             = 29000
	End

End

FXList FX_BalrogCracks

	ParticleSystem
		Name = BalrogUnsummonLightShafts
		InitialDelay = 10 10 UNIFORM   ;In milliseconds
		Offset = X:20.0 Y:0.0 Z:0.0
	End

	ParticleSystem
		Name = BalrogSummonCracks
		InitialDelay = 10 10 UNIFORM   ;In milliseconds
		Offset = X:20.0 Y:0.0 Z:0.0
    	End
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Abillity Timers
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

SpecialPower SpecialAbilityRedWordOfPower
	Enum			= SPECIAL_WORD_OF_POWER
	ReloadTime		= 300000
	PublicTimer		= No
End

SpecialPower SpecialAbilityBalrogScream
	Enum			= SPECIAL_BALROG_SCREAM
	ReloadTime		= 60000
End

SpecialPower SpecialAbilityBalrogBreath
	Enum			= SPECIAL_BALROG_BREATH
	ReloadTime		= 180000
	RadiusCursorRadius = BALROG_BREATH_RADIUS
End

SpecialPower SpecialAbilityHeroMode
	Enum			= SPECIAL_HERO_MODE
	ReloadTime		= 100000
End

SpecialPower SpecialAbilityFireWhip
	Enum			= SPECIAL_FIRE_WHIP
	ReloadTime		= 90000
End



;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Balrog Weapons
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
Weapon RedWordOfPowerWeapon
	IdleAfterFiringDelay = 0
	AttackRange = GANDALF_WORD_OF_POWER_RANGE
	MinimumAttackRange = 0.8
	WeaponSpeed = 401
	MinWeaponSpeed = 241
	MaxWeaponSpeed = 601
	ScaleWeaponSpeed = Yes
	RadiusDamageAffects = ENEMIES NOT_SIMILAR
	DelayBetweenShots = 1500
	PreAttackDelay        = 2600
	PreAttackType         = PER_ATTACK
    	FireFX					= FX_MorgothRedWordOfPower

	DamageNugget
		Damage			= 250
		Radius			= 300.0
		DamageType		= MAGIC
		DamageFXType	= BALROG_SWORD
		DelayTime     = 900
		DeathType		= EXPLODED
		DamageSpeed		= 250
	End

	MetaImpactNugget
		ShockWaveAmount   	= 80.0
		ShockWaveRadius   	= 500.0
		ShockWaveTaperOff	= 1.0
		ShockWaveZMult   		= 1.0
		ShockWaveSpeed		= 250
		DelayTime     = 900
	End  

	DamageNugget
		Damage			= 250
		Radius			= 100.0
		DamageType		= MAGIC
		DamageFXType	= BALROG_SWORD
		DelayTime     = 50
		DeathType		= EXPLODED
		DamageSpeed		= 300
	End

	MetaImpactNugget
		ShockWaveAmount   	= 60.0
		ShockWaveRadius   	= 100.0
		ShockWaveTaperOff	= 1.0
		ShockWaveZMult   		= 1.0
		ShockWaveSpeed		= 300
		DelayTime     = 50
	End  
End

; hes weapon is hard coded so this may not even work
Weapon NewMordorBalrogSwordChop     ; BALANCE Balrog Weapon
  LeechRangeWeapon      = Yes		
  AttackRange           = 40.0
  MeleeWeapon           = Yes
  DelayBetweenShots     = 2000            ; time between shots, msec
  PreAttackDelay        = 1400
  PreAttackType         = PER_SHOT ; Do the delay each time we attack
  FireFX                = FX_BalrogSwordHit
  FiringDuration        = 1200    ; Duration of the mace swing 

  DamageNugget                        ; A basic Nugget that just does damage
    Damage        = BALROG_SWORD_CHOP_DAMAGE_FLAME	
    DamageScalar  = 25% NONE +COMMANDCENTER	
    DamageScalar  = 50% NONE +STRUCTURE	 ; hes weapon is hard coded so this may not even work
    Radius        = 20.0
    DamageType    = FLAME
    DamageFXType  = BALROG_SWORD
    DeathType     = BURNED
  End

  DamageNugget                        ; A basic Nugget that just does damage
    Damage        = BALROG_SWORD_CHOP_DAMAGE_STRUCTURAL	
    DamageScalar  = 20% NONE +COMMANDCENTER
    DamageScalar  = 50% NONE +STRUCTURE ; hes weapon is hard coded so this may not even work
    Radius        = 20.0
    DamageType    = SIEGE
    DamageFXType  = BALROG_SWORD
    DeathType     = NORMAL
    DamageScalar  = 25000% NONE +MinisGateDoor
  End
  
  	FireLogicNugget						; Lights flammables on fire
		LogicType	= INCREASE_BURN_RATE
		Radius		= 20.0
		Damage		= BALROG_SWORD_CHOP_DAMAGE_FLAME
	End
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;CommandButtons
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<


CommandButton Command_FiresOfDoom
  Command                 = SPECIAL_POWER 
  SpecialPower            = SpecialAbilityRedWordOfPower
  Options                 = NONE
  TextLabel               = CONTROLBAR:RedWordOfPower
  ButtonImage             = Gandolf_radcircle
  ButtonBorderType        = ACTION 
  DescriptLabel           = CONTROLBAR:ToolTipRedWordOfPower
  AutoAbility			  = Yes
  PresetRange			  = 120.0
  InPalantir			  = Yes
  UnitSpecificSound = BalrogVoiceAttack
End


;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Commandset
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
CommandSet NewBalrogCommandSet
	1  = Command_ToggleStance
	2  = Command_SpecialAbilityIgnite
	3  = Command_SpecialAbilityFireWhip
	4  = Command_SpecialAbilityBalrogScream
	5  = Command_SpecialAbilityBalrogBreath
	6  = Command_FiresOfDoom                        ;/Command_SpecialAbilityBalrogWings ; replace wings with word of hell
	13 = Command_AttackMove
	14 = Command_Stop
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Armor
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Armor BalrogArmor1
  Armor = DEFAULT	  	5%	;Likes to have things think they can attack him
  Armor = SIEGE		 	25%	;siege weapons can hurt him
  Armor = STRUCTURAL	 	10%	;Structural damage (Ent rocks)
  Armor = MAGIC			30%	;heros with magic can really hurt him,
  Armor = HERO		 	25%	;Other heroes can hurt him too.  Watch out for heroes Mr. Balrog!
  Armor = HERO_RANGED     	7%    	;Hero bow damage, such as legolas
  Armor = FLAME			1%  	;fire damage, dragons drakes fire weapons.
  Armor = LOGICAL_FIRE		0%	;landscape fire, fire from the ground not from fire arrows or dragons etc.
  
End


;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Balrog Object
;Reference: MordorBalrogObjectRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
Object MordorBalrog

	WeaponSet
		Conditions = None
		Weapon = PRIMARY	MordorBalrogSwordSwipe
		Weapon = SECONDARY	MordorBalrogWhip
		Weapon = TERTIARY	NewMordorBalrogSwordChop
		
		AutoChooseSources = SECONDARY None
		OnlyAgainst = TERTIARY STRUCTURE BIG_MONSTER
	End

	VisionRange = 250					
	ShroudClearingRange = 350

	BountyValue = 300	0


	ReplaceModule ModuleTag_BodyDraw
	Draw = W3DScriptedModelDraw ModuleTag_BodyDraw1
;		GlowEnabled = Yes
;		GlowEmissive = Yes
		
;		StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD

		OkToChangeModelColor = Yes
	
		ExtraPublicBone = ZZZPASSENGERBON
		ExtraPublicBone = ZZZWHIPCOIL
		ExtraPublicBone = SWORD

		;-------------------------
		ModelConditionState = NONE ; Not DefaultConditionState, because that keyword copies anything in here to every other state
			Model = MUBalrog_SKN
			ParticleSysBone = SWORD BalrogSwordFlare FollowBone:yes		; Not SWORDBONE, because SWORD is the bone that gets art-hidden mid animation in WIPX
			ParticleSysBone = SWORD BalrogSwordEmbers FollowBone:yes
			ParticleSysBone = MANEBONE BalrogManeFlare FollowBone:yes
			ParticleSysBone = MANEBONE BalrogManeEmbers FollowBone:yes
			ParticleSysBone = MANEBONE BalrogManeFire FollowBone:yes
			ParticleSysBone = RTWINGBONE BalrogWingSmokeLite FollowBone:yes
			ParticleSysBone = LFWINGBONE BalrogWingSmokeLite FollowBone:yes
		End

; This is triggered by the single player only HitReaction module for the lightningsword		
        ModelConditionState = HIT_LEVEL_2
			Model = MUBalLIT_SKN
		End

		ModelConditionState = HERO
			Model = MUBalIGNT_SKN
			ParticleSysBone = MANEBONE BalrogManeFlare FollowBone:yes
			ParticleSysBone = MANEBONE BalrogManeEmbers FollowBone:yes
			ParticleSysBone = MANEBONE BalrogManeFire FollowBone:yes
			ParticleSysBone = RTWINGBONE BalrogWingEmbers FollowBone:yes
			ParticleSysBone = LFWINGBONE BalrogWingEmbers FollowBone:yes

			ParticleSysBone = SWORD BalrogSwordFlare FollowBone:yes		; Not SWORDBONE, because SWORD is the bone that gets art-hidden mid animation in WIPX
			ParticleSysBone = SWORD BalrogSwordEmbers FollowBone:yes
	                ParticleSysBone = NONE BalrogIgniteHeatWave FollowBone:no
		End

		;-----------------		
		IdleAnimationState
			StateName = State_Idle
			Animation = Breathe 
				AnimationName = MUBalrog_SKL.MUBalrog_IDLA
				AnimationMode = ONCE
				AnimationBlendTime = 10
				AnimationPriority = 20
			End
			Animation = LookAround 
				AnimationName = MUBalrog_SKL.MUBalrog_IDLB
				AnimationMode = ONCE
				AnimationBlendTime = 10
				AnimationPriority = 2
			End
			Animation = SnortLikeABull 
				AnimationName = MUBalrog_SKL.MUBalrog_IDLC
				AnimationMode = ONCE
				AnimationBlendTime = 10
				AnimationPriority = 1
			End

			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "State_JustBuilt" 
					then CurDrawableSetTransitionAnimState("TRANS_JustBuilt_To_Idle") 
				end
				if Prev == "State_AboutToHitGround" 
					then CurDrawableSetTransitionAnimState("TRANS_AboutToHitGround_To_Idle") 
				end
			EndScript
		End 
		
		AnimationState					=	DYING DEATH_1
			Animation					=	Dying 
				AnimationName			=	MUBalrog_SKL.MUBalrog_DIEA 
				AnimationMode			=	ONCE
			End
			ParticleSysBone = None BalrogFallDust FollowBone:No
		End

		AnimationState					=	DYING DEATH_2
			Animation					=	FadingOut 
				AnimationName			=	MUBalrog_SKL.MUBalrog_RORC 
				AnimationMode			=	ONCE
			End
		End


; This is triggered by the single player only HitReaction module for the lightningsword	
; It is highest instead of lowest priority, because the hit reaction Paralyzes us, where for others it is just a fancy idle.	
		AnimationState					=	HIT_LEVEL_2
			Animation					=	Owowowowowowowow
				AnimationName			=	MUBalrog_SKL.MUBalrog_HITB 
				AnimationMode			=	ONCE
			End
		End
		
		AnimationState					=	EATING
			Animation					=	DoingHorribleThingToGrabbedGuy 
				AnimationName			=	MUBalrog_SKL.MUBalrog_BRNA 
				AnimationMode			=	ONCE
				AnimationBlendTime		=	0
			End

				ParticleSysBone = ZZZPassengerBon balrogHandSqueezeFlames FollowBone:Yes
                ParticleSysBone = ZZZPassengerBon balrogHandSqueezeFlames2 FollowBone:Yes
				ParticleSysBone = ZZZPassengerBon balrogHandSqueezeFlamesFinal FollowBone:Yes
                ParticleSysBone = ZZZPassengerBon BalrogHandSqueezeFlash FollowBone:Yes
                ParticleSysBone = ZZZPassengerBon BalrogHandSmoke FollowBone:Yes
                ParticleSysBone = RING_2_L balrogHandAsh FollowBone:Yes
                ParticleSysBone = RING_2_L balrogHandAshSmall FollowBone:Yes
		End

		AnimationState					=	UNPACKING PACKING_TYPE_3
			Animation					=	GrabbingToTouching
				AnimationName			=	MUBalrog_SKL.MUBalrog_GRBA 
				AnimationMode			=	ONCE
				AnimationBlendTime		=	0
			End
		End

		AnimationState					=	PACKING PACKING_TYPE_3
			Animation					=	GrabbingFollowThrough 
				AnimationName			=	MUBalrog_SKL.MUBalrog_GRBC 
				AnimationMode			=	ONCE
				AnimationBlendTime		=	0
			End	
		End

		AnimationState			= JUST_BUILT
			StateName = State_JustBuilt
			Animation
				AnimationName = MUBalrog_SKL.MUBalrog_RORA
				AnimationMode = MANUAL
				AnimationBlendTime = 0
			End
		End
		
	    TransitionState = TRANS_JustBuilt_To_Idle
			Animation = BeingSummoned
				AnimationName = MUBalrog_SKL.MUBalrog_RORA 
				AnimationMode = ONCE
			End
		End
		
		AnimationState = FIRING_OR_PREATTACK_B
			Animation = CrackThatWhip 
				AnimationName = MUBalrog_SKL.MUBalrog_WIPA
				AnimationMode = ONCE
			End
				ParticleSysBone = RTHANDBONE BalrogWhip2swordEfx FollowBone:Yes
		End

		AnimationState			= SPECIAL_POWER_1
			Animation			= RoaringFear 
				AnimationName	= MUBalrog_SKL.MUBalrog_RORB
				AnimationMode   = ONCE
			End
				ParticleSysBone = BAT_JAW BalrogScreamEffect FollowBone:Yes
				FXEvent			= Frame:20 Name:FX_BalrogScreamEfx
				ParticleSysBone = BAT_JAW balrogPixelDisplScrm FollowBone:Yes
				ParticleSysBone = BAT_JAW balrogScrmEmbers FollowBone:Yes
		End
			   
		AnimationState			= SPECIAL_WEAPON_ONE
			Animation			= BreathingFireAnimation
				AnimationName	= MUBalrog_SKL.MUBalrog_FIRA
				AnimationMode   = ONCE
			End
				;This is Balrog's fire breath efx
				ParticleSysBone = BAT_JAW balrogFireBreath FollowBone:Yes
				ParticleSysBone = BAT_JAW balrogBreathEmbers FollowBone:Yes
				ParticleSysBone = BAT_JAW balrogBreathSmoke FollowBone:Yes
				ParticleSysBone = BAT_JAW balrogBreathProxy FollowBone:Yes
			End
			   
		AnimationState			= SPECIAL_WEAPON_TWO UNPACKING
			StateName			= State_LeapStart
			Animation			= GettingReadyToLeap
				AnimationName	= MUBalrog_SKL.MUBalrog_JMP1
				AnimationMode   = ONCE
			End
		End
			   
	    AnimationState			= SPECIAL_WEAPON_TWO PACKING
			Animation			= FirstWingBeatGoingUp 
				AnimationName	= MUBalrog_SKL.MUBalrog_JMP2
				AnimationMode   = ONCE
			End
		End

;/////////////////////////////////////////////////////////////////////Word of hell animation////////////////////////////////////////////////////////////////////////
	AnimationState						= SPECIAL_WEAPON_THREE
		Animation
			AnimationName				= MUBalrog_SKL.MUBalrog_RORC  ;MUBalrog_SKL.MUBalrog_IGNTA
			AnimationMode				= ONCE
			AnimationSpeedFactorRange	= 0.5 0.5
			AnimationBlendTime = 40
		End
		; this dont work so i put the Fx into a list and put em in the modules
		;FXEvent	= Frame:1 FireWhenSkipped Name:FX_BalrogCracks

	End

;//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
			   
	    AnimationState			= ABOUT_TO_HIT						; Before ThrownProjectile, since by definition this set for nn frames while T_P is still on
			StateName			= State_AboutToHitGround
			Animation			= StartingToLandToTouchingGround 
				AnimationName	= MUBalrog_SKL.MUBalrog_LND1
				AnimationMode   = ONCE
			End
		End
			   
		AnimationState			= THROWN_PROJECTILE
			Animation			= HurtlingThroughAir 
				AnimationName	= MUBalrog_SKL.MUBalrog_FLYA
				AnimationMode   = LOOP
				AnimationBlendTime = 10
			End
		End
			   
	    TransitionState = TRANS_AboutToHitGround_To_Idle
			Animation = SplashAtEndOfJump
				AnimationName = MUBalrog_SKL.MUBalrog_LND2 
				AnimationMode = ONCE
				AnimationBlendTime = 0
			End
		End
		
		AnimationState			= TURN_RIGHT
			Animation			= TurningRight 
				AnimationName	= MUBalrog_SKL.MUBalrog_TRNA
				AnimationMode   = LOOP
				AnimationBlendTime = 10
			End
		End

		AnimationState			= TURN_LEFT
			Animation			= TurningLeft 
				AnimationName	= MUBalrog_SKL.MUBalrog_TRNB
				AnimationMode   = LOOP
				AnimationBlendTime = 10
			End
		End

		AnimationState			= MOVING
			Animation			= Running 
				AnimationName	= MUBalrog_SKL.MUBalrog_WLKA
				AnimationMode   = LOOP
				AnimationBlendTime = 10
			End
			Flags               = RANDOMSTART
			
			FXEvent	= Frame:20 FireWhenSkipped Name:FX_BalrogRightFootStep
			FXEvent	= Frame:44 FireWhenSkipped Name:FX_BalrogLeftFootStep
		End
      
		AnimationState			= WEAPONSET_HERO_MODE UNPACKING PACKING_TYPE_1
			Animation = StartIgniteRoar 
				AnimationName = MUBalrog_SKL.MUBalrog_IGNTA
				AnimationMode = ONCE
			End
		End
				
		AnimationState			= HERO PACKING PACKING_TYPE_1
			Animation = FinishIgniteRoar 
				AnimationName = MUBalrog_SKL.MUBalrog_IGNTB
				AnimationMode = ONCE
			End
           
            EnteringStateFX = FX_BalrogIgniteStart
		End
				
		AnimationState			= FIRING_OR_PREATTACK_A
			Animation			= Swipe
				AnimationName	= MUBalrog_SKL.MUBalrog_ATKB
				AnimationMode	= ONCE
				UseWeaponTiming	= Yes
			End
		End
		
		AnimationState			= FIRING_OR_PREATTACK_C
			Animation			= Chop
				AnimationName	= MUBalrog_SKL.MUBalrog_ATKA
				AnimationMode	= ONCE
				UseWeaponTiming	= Yes
			End
			ParticleSysBone		= SWORDBONE BalrogSword FollowBone:yes
		End
	End
	End

;--------------------------
	ReplaceModule ModuleTag_WhipDraw
	Draw = W3DScriptedModelDraw ModuleTag_WhipDraw1
		GlowEnabled = Yes
		GlowEmissive = Yes
		ShadowForceDisable = Yes	;The shadow setting is for the whole drawable, but this individual draw module wants to not have a shadow.
		
;		StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD

		DefaultModelConditionState
			Model = None
		End
		
		ModelConditionState = FIRING_OR_PREATTACK_B
			Model = MUBalsWhip_SKN
		End
		
		;------------------
		IdleAnimationState
		End
		
		AnimationState = FIRING_OR_PREATTACK_B
			Animation = CrackThatWhip 
				AnimationName = MUBalsWhip_SKL.MUBalsWhip_WIPA
				AnimationMode = ONCE
				AnimationBlendTime = 0
			End
		End
			WadingParticleSys = BalrogRiverSteam		
	End
	End

	CommandSet = NewBalrogCommandSet

	CanPathThroughGates	= Yes ;No ;/ this is so he can go throw gates if elves or other realm have walls and gates which they most likely will

	WeaponSet
		Conditions = None
		Weapon = PRIMARY	MordorBalrogSwordSwipe
		Weapon = SECONDARY	MordorBalrogWhip
		Weapon = TERTIARY	MordorBalrogSwordChop
		
		AutoChooseSources = SECONDARY None
		OnlyAgainst = TERTIARY STRUCTURE BIG_MONSTER
	End

	ArmorSet
		Conditions      = None
		Armor           = BalrogArmor1
		DamageFX        = NormalDamageFX
	End

  LocomotorSet
    Locomotor     = BalrogLocomotor
    Condition     = SET_NORMAL
    Speed         = 50
  End

  ReplaceModule ModuleTag_02
  Body            = ActiveBody ModuleTag_021
    MaxHealth         = 4000 ;/ 4000 is his default					;BALANCE Balrog Health
  End
  End


	AddModule 
	Behavior = AutoHealBehavior ModuleTag_BalrogHealing ; balrog is gona heal really slow.
		StartsActive = Yes
		HealingAmount = 20 
		HealingDelay = 1300
		StartHealingDelay = 30000
		HealOnlyIfNotInCombat = Yes
	End
	End


;*************************
	RemoveModule ModuleTag_LifetimeUpdate ; this will remove his life timer so he is a real hero that doesn't go away unless hes killed off

;/	Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate ; this is the module removed.
;/		MinLifetime		= BALROG_LIFETIME
;/		MaxLifetime		= BALROG_LIFETIME
;/		DeathType		= FADED
;/	End

;*************************

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
; Word of hell abillity from gladiator underwolrd return of morgoth version 2 by me JBV3737, : - ) Imported
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

      AddModule
 	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_wordofpowerEnabler
		SpecialPowerTemplate	= SpecialAbilityRedWordOfPower
		TriggeredBy				= Upgrade_GandalfWhite
	End
      End
      AddModule
	Behavior = SpecialPowerModule ModuleTag_WordStarter       
		SpecialPowerTemplate      = SpecialAbilityRedWordOfPower
		UpdateModuleStartsAttack  = Yes
		StartsPaused		  	= Yes
		InitiateSound			= BalrogVoiceAttack
            		TriggerFX                  = FX_BalrogCracks
	End
      End
      AddModule
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_WordWeaponFireUpdate   
		SpecialPowerTemplate    = SpecialAbilityRedWordOfPower
		WhichSpecialWeapon		= 3
		SkipContinue			= Yes
		UnpackTime              = 2700  ;600 
		PackTime                = 800		
		FreezeAfterTriggerDuration = 1200
		AwardXPForTriggering    = 0		
		StartAbilityRange		= 80.0
		SpecialWeapon			= RedWordOfPowerWeapon
	End
      End

End ; end of balrog

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Mother Dragon
;Reference: MotherDragonRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<



;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Timers and modifier lists
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
ModifierList DragonRoar
	Category = SPELL
	Modifier = ARMOR 50%			;// Additive.  Sum of these are subtracted from all entries in Armor.ini
	Modifier = DAMAGE_MULT 150%  ; this means it 50% more not 150%, 100% is default, thats just for mult		// Multiplicitive.  Damage multiplied by this, will compound in multiple bonuses
	Modifier = SPEED 200%
	Duration = 30000				;// lasts for 30 seconds
End

SpecialPower SpecialAbilityAragornBladeMaster
	Enum					   = SPECIAL_HERO_MODE
	ReloadTime				   = 180000
End

SpecialPower SpecialAbilityDragonCallFromTheDeep
  Enum						= SPECIAL_CALL_OF_THE_DEEP
  ReloadTime				= 600000   ; in milliseconds ; 10 minutes
  RadiusCursorRadius		= 50.0
  Flags						= LIMIT_DISTANCE NO_FORBIDDEN_OBJECTS PATHABLE_ONLY
  MaxCastRange				= CALL_OF_THE_DEEP_MAX_CAST_RANGE
  ForbiddenObjectFilter		= NO_SUMMON_NEAR_OBJECT_FILTER
  ForbiddenObjectRange		= 50
  InitiateAtLocationSound	= DrogothFireBreath
End


;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Weapons
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Weapon DragonFireBreath1
	IdleAfterFiringDelay		= 0
	AttackRange					= #MULTIPLY( SUMMONED_DRAGON_FLAME_RADIUS 0.25 )
	WeaponSpeed					= 401												; dist/sec 
	RadiusDamageAffects			= ENEMIES NOT_SIMILAR
	DelayBetweenShots			= 5000												; time between shots, msec
	PreAttackDelay				= 2000
	PreAttackType				= PER_SHOT
	FireFX						= FX_DragonFireBreath
	FiringDuration				= 3000
	;DamageDealtAtSelfPosition	= Yes 
	MeleeWeapon					= Yes

	DamageNugget                        ; The large 90 degree arc
		Damage			= 400
		Radius			= 120
		DelayTime		= 1000
		DamageType		= FLAME
		DamageFXType	= FLAME
		DeathType		= BURNED
		DamageArc		= 90
		DamageMaxHeight = 50 ;We won't hurt something far above us.  Birds fly at around 100
		DamageSpeed		= 400
	End
	
	DamageNugget						; The small area directly in front.
		Damage			= 400
		Radius			= 120
		DelayTime		= 1000
		DamageType		= FLAME
		DamageFXType	= FLAME
		DeathType		= BURNED
		DamageMaxHeight = 50 ;We won't hurt something far above us.  Birds fly at around 100
		DamageSpeed		= 400
	End

	DamageNugget
		Damage			= 400
		Radius			= 120
		DelayTime		= 1000
		DamageType		= MAGIC
		DamageArc		= 90
		DamageMaxHeight = 50 ;We won't hurt something far above us.  Birds fly at around 100
		DamageSpeed		= 400
	End

End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;CommandButtons
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

CommandButton Command_SpecialAbilityIgnite  ;Command_SpecialAbilityWordOfPower  ;Command_FireDrakeInferno   ;Command_SpecialAbilitySummonedDragonReposition
  Command                 = SPECIAL_POWER 
  SpecialPower            = SpecialAbilityAragornBladeMaster
  TextLabel               = CONTROLBAR:DragonBladeMaster
  ButtonImage             = HSAragornBladeMaster
  ButtonBorderType        = ACTION 
  DescriptLabel           = CONTROLBAR:ToolTipDragonBladeMaster
  InPalantir			  = Yes
  AutoAbility			  = Yes
  AutoDelay				  = 30.0 ; this should sync with the Aragorn's hero mode effect time
  PresetRange			  = 50.0
  ;UnitSpecificSound       = AragornVoiceBladeMaster
	CursorName				= NONE
End

CommandButton Command_GoblinKingCallFromTheDeep
  Command           = SPECIAL_POWER
  SpecialPower      = SpecialAbilityDragonCallFromTheDeep
  TextLabel         = CONTROLBAR:DragonSpawnFireDrakes
  ButtonImage       = HIFireDrake
  Options           = NEED_TARGET_POS CONTEXTMODE_COMMAND
  RadiusCursorType  = CallOfTheDeepRadiusCursor
  CursorName        = AttackObj
  InvalidCursorName = GenericInvalid  
  ButtonBorderType  = ACTION 
  DescriptLabel     = CONTROLBAR:TooltipDragonSpawnFireDrakes
  InPalantir	    = Yes
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
; Commandset
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

CommandSet NewSummonedDragonCommandSet
	1 = Command_ToggleStance
	2 = Command_SpecialAbilityIgnite   ;Command_SpecialAbilityWordOfPower   ;Command_FireDrakeInferno    ;Command_SpecialAbilitySummonedDragonReposition
	3 = Command_GoblinKingCallFromTheDeep
	13 = Command_AttackMove
	14 = Command_Stop
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Armor
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Armor NewSummonedDragonArmor
  Armor = DEFAULT		25%     ;this sets the level for all nonspecified damage types
  Armor = CRUSH			10%     ;horseman damage
  Armor = SLASH			35%     ;soldier damage
  Armor = URUK			35%     ;soldier damage
  Armor = PIERCE		30%     ;archer damage - has to be low because she is such an easy target
  Armor = SIEGE			95%     ;siege damage
  Armor = STRUCTURAL		95%	  ;Structural damage (Ent rocks)
  Armor = HERO			55%     ;hero damage
  Armor = MAGIC			50%     ;magic damage
  Armor = HERO_RANGED		40%  ;200%     ;Hero bow damage
  Armor = FLAME			1%  ;150%     ;fire damage
  Armor = LOGICAL_FIRE		1%
  Armor = SPECIALIST    	50%     ;
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Mother Dragon Modules
;Reference: MotherDragonModulesRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Object SummonedDragon

	BountyValue = 300	0

	RemoveModule ModuleTag_LifetimeUpdate
	RemoveModule ModuleTag_TeleportStarter
	RemoveModule ModuleTag_TeleportUpdate

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

	ReplaceModule ModuleTag_01
	Draw = W3DScriptedModelDraw ModuleTag_011
		StaticModelLODMode = Yes
		
		RandomTextureFixedRandomIndex	= Yes
		;// this set of replacements correspond (in number and in order) to ...
		RandomTexture					= SumnDragon_C.tga		0 SumnDragon_C.tga
		RandomTexture					= SumnDragonB_C.tga 	0 SumnDragon_C.tga
		RandomTexture					= SumnDragonC_C.tga 	0 SumnDragon_C.tga
		RandomTexture					= SumnDragonD_C.tga 	0 SumnDragon_C.tga
		RandomTexture					= SumnDragonE_C.tga 	0 SumnDragon_C.tga
		;// ... this set 
		RandomTexture					= SumnDragon2_C.tga		0 SumnDragon2_C.tga
		RandomTexture					= SumnDragonB2_C.tga 	0 SumnDragon2_C.tga
		RandomTexture					= SumnDragonC2_C.tga 	0 SumnDragon2_C.tga
		RandomTexture					= SumnDragonD2_C.tga 	0 SumnDragon2_C.tga
		RandomTexture					= SumnDragonE2_C.tga 	0 SumnDragon2_C.tga
	
;SumnDrag_SKN
;SumnDrag_SKNC
;SumnDrag_SKNL
;SumnDrag_SKNM

		DefaultModelConditionState
			Model = SumnDrag_SKNM
			Skeleton = SumnDrag_SKL
			ParticleSysBone = B_MAINBONE SummonedDragonWaves	FollowBone:Yes
			ParticleSysBone = B_MAINBONE SummonedDragonSmokeWaves FollowBone:Yes
		End

		ModelConditionState = WEAPONSET_HERO_MODE
			ParticleSysBone = BAT_HEAD GorzakBladeMaster FollowBone:Yes
			ParticleSysBone = B_MAINBONE GorzakBladeMaster FollowBone:Yes
			ParticleSysBone = BAT_NECK01 GDWaveBlastHeat FollowBone:Yes
			ParticleSysBone = B_MAINBONE GDWaveBlastHeat FollowBone:Yes
		End
		
		IdleAnimationState
			StateName = STATE_Idle
			Animation = Breathe
				AnimationName = SumnDrag_IDLA
				AnimationMode = ONCE
				AnimationPriority = 5
			End
			ParticleSysBone = BAT_HEAD SummonedDragonFireSnort	FollowBone:Yes
			ParticleSysBone = BAT_HEAD SummonedDragonSnortEmbers	FollowBone:Yes
			ParticleSysBone = B_MAINBONE SummonedDragonWaves	FollowBone:Yes
			ParticleSysBone = B_MAINBONE SummonedDragonSmokeWaves FollowBone:Yes

			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Selected"	then 
				CurDrawableSetTransitionAnimState("TRANS_Selected_to_Idle") return end
			EndScript
		End

		AnimationState			= USER_2
			StateName = State_JustBuilt
			Animation
				AnimationName = SumnDrag_LNDB
				AnimationMode = ONCE
				AnimationBlendTime = 0
				AnimationSpeedFactorRange	=	0.5 0.5
			End
			ParticleSysBone = NONE SummonedDragonDust	FollowBone:Yes
		End
	
		AnimationState					=	DYING DEATH_1
			Animation					=	Dying 
				AnimationName			=	SumnDrag_DIEA
				AnimationMode			=	ONCE
				AnimationBlendTime		=	15
			End
			ParticleSysBone = BAT_HEAD SummonedDragonDeathEmbers		FollowBone:Yes
			ParticleSysBone = BAT_HEAD SummonedDragonDeathSmoke			FollowBone:Yes
			ParticleSysBone = NONE SummonedDragonDeathDust		FollowBone:Yes
			
		End

		AnimationState					=	DYING DEATH_2
			Animation					=	JumpingAwayAtTimeUp 
				AnimationName			=	SumnDrag_JMPB
				AnimationMode			=	ONCE
				AnimationBlendTime		=	15
			End
			ParticleSysBone = BAT_HEAD SummonedDragonDeathEmbers		FollowBone:Yes
			ParticleSysBone = BAT_HEAD SummonedDragonDeathSmoke			FollowBone:Yes
		End

		AnimationState = FIRING_OR_PREATTACK_A MOVING	; Need this, otherwise we slide between attacks.
			Animation
				AnimationName				= SumnDrag_WLKA
				AnimationMode				= LOOP
				AnimationSpeedFactorRange	= 1.0 1.0
			End
			ParticleSysBone = B_MAINBONE SummonedDragonWaves	FollowBone:Yes
			ParticleSysBone = B_MAINBONE SummonedDragonSmokeWaves FollowBone:Yes
		End

		AnimationState = FIRING_OR_PREATTACK_A
			Animation			= Burninate
				AnimationName	= SumnDrag_ATKA
				AnimationMode	= ONCE
			End
			ParticleSysBone = BAT_HEAD SummonedDragonFireBreath2	FollowBone:Yes
			ParticleSysBone = BAT_HEAD SummonedDragonHeat	FollowBone:Yes
			ParticleSysBone = BAT_HEAD SummonedDragonEmbers		FollowBone:Yes
			ParticleSysBone = BAT_HEAD SummonedDragonSmoke			FollowBone:Yes
			ParticleSysBone = BAT_HEAD SummonedDragonFireProxy2			FollowBone:Yes
			ParticleSysBone = B_MAINBONE SummonedDragonWaves	FollowBone:Yes
			ParticleSysBone = B_MAINBONE SummonedDragonSmokeWaves FollowBone:Yes
		End

		AnimationState = HIT_REACTION HIT_LEVEL_1
			Animation
				AnimationName	= SumnDrag_HITA
				AnimationMode	= ONCE
			End
		End

		AnimationState = MOVING TURN_RIGHT_HIGH_SPEED
			Animation
				AnimationName	= SumnDrag_WLKA
				AnimationMode	= LOOP
				AnimationSpeedFactorRange = 1.1 1.1
				AnimationBlendTime		=	15
			End
		End
		
		AnimationState = MOVING TURN_LEFT_HIGH_SPEED
			Animation
				AnimationName	= SumnDrag_WLKA
				AnimationMode	= LOOP
				AnimationSpeedFactorRange = 1.1 1.1
				AnimationBlendTime		=	15
			End
		End
		
		AnimationState = TURN_LEFT
			Animation			= Left
				AnimationName	= SumnDrag_TRNL
				AnimationMode	= LOOP
				AnimationSpeedFactorRange = 0.55 0.55
				AnimationBlendTime		=	15
			End
		End

		AnimationState = TURN_RIGHT
			Animation			= YourOtherLeft
				AnimationName	= SumnDrag_TRNR
				AnimationMode	= LOOP
				AnimationSpeedFactorRange = 0.55 0.55
				AnimationBlendTime		=	15
			End
		End

		AnimationState = MOVING ACCELERATE
			Animation
				AnimationName	= SumnDrag_ACCL
				AnimationMode	= ONCE
				AnimationSpeedFactorRange = 2.0 2.0
				AnimationBlendTime		=	15
			End
		End

		AnimationState = MOVING DECELERATE
			Animation
				AnimationName	= SumnDrag_DECL
				AnimationMode	= ONCE
				AnimationSpeedFactorRange = 0.5 0.5
			End

		End
		
;		AnimationState = UNPACKING
;			StateName			= STATE_TakeOff
;			Animation
;				AnimationName	= SumnDrag_JMPB
;				AnimationMode	= ONCE
;			End
;			ParticleSysBone = NONE SummonedDragonDust	FollowBone:Yes
;		End
;
;		;// There is one frame between the unpacking and packing in which neither are set and
;		;// the IDLA is played. It causes all sorts of badness with the animation. Use PREPARING
;		;// to intercept and preempt IDLA.
;		AnimationState = PREPARING
;			Animation
;				AnimationName		= SumnDrag_JMPB
;				AnimationMode		= ONCE
;			End
;	        Flags = START_FRAME_LAST
;		End


;		AnimationState = PACKING
;			StateName				= STATE_Land
;			Animation
;				AnimationName		= SumnDrag_LNDB
;				AnimationMode		= ONCE
;				AnimationBlendTime	= 0
;				AnimationSpeedFactorRange = 0.6 0.6
;			End
;			ParticleSysBone = NONE SummonedDragonDust	FollowBone:Yes
;		End

		AnimationState = MOVING
			Animation
				AnimationName	= SumnDrag_WLKA
				AnimationMode	= LOOP
				AnimationSpeedFactorRange = 1.0 1.0
			End
		End

		AnimationState = SELECTED
			Animation
				AnimationName	= SumnDrag_IDLA
				AnimationMode	= LOOP
				AnimationSpeedFactorRange = 1.1 1.1
				AnimationBlendTime	= 20
			End
			
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Idle"	then 
					CurDrawableSetTransitionAnimState("TRANS_Idle_to_Selected") 
					return 
				end
			EndScript
		End

		TransitionState = TRANS_Idle_to_Selected
			Animation			= Salute
				AnimationName	= SumnDrag_RORA
				AnimationMode	= ONCE
			End
			ParticleSysBone = BAT_HEAD SummonedDragonFireRoar	FollowBone:Yes
			ParticleSysBone = BAT_HEAD SummonedDragonSmokeRoar	FollowBone:Yes
			ParticleSysBone = B_MAINBONE SummonedDragonWaves	FollowBone:Yes
			ParticleSysBone = B_MAINBONE SummonedDragonSmokeWaves FollowBone:Yes		
		End
		
		TransitionState = TRANS_Selected_to_Idle
			Animation			= ATNC
				AnimationName	= SumnDrag_IDLA
				AnimationMode	= ONCE
			End		
		End		

	    TransitionState = TRANS_JustBuilt_To_Idle
			Animation = BeingSummoned
				AnimationName = SumnDrag_LNDA 
				AnimationMode = ONCE
			End
		End


;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

		AnimationState			= SPECIAL_WEAPON_TWO UNPACKING
			StateName			= State_LeapStart
			Animation			= GettingReadyToLeap
				AnimationName	= SumnDrag_IDLA
				AnimationMode   = LOOP
				AnimationSpeedFactorRange = 1.0 1.0
				AnimationBlendTime = 10
			End
		End
			   
	    AnimationState			= SPECIAL_WEAPON_TWO PACKING
			Animation			= FirstWingBeatGoingUp 
				AnimationName	= SumnDrag_IDLA
				AnimationMode   = LOOP
				AnimationBlendTime = 10
				AnimationSpeedFactorRange = 6.0 6.0
			End
		End
			   
	    AnimationState			= ABOUT_TO_HIT						; Before ThrownProjectile, since by definition this set for nn frames while T_P is still on
			StateName			= State_AboutToHitGround
			Animation			= StartingToLandToTouchingGround 
				AnimationName	= SumnDrag_WLKA  SumnDrag_ATKA
				AnimationMode   = LOOP
				AnimationSpeedFactorRange = 4.0 4.0
			End
		End
			   
		AnimationState			= THROWN_PROJECTILE
			Animation			= HurtlingThroughAir 
				AnimationName	= SumnDrag_JMPB  ;SumnDrag_HITA  ;SumnDrag_ATKA
				AnimationMode   = LOOP
				AnimationBlendTime = 1
				AnimationSpeedFactorRange = 18.0 18.0
			End
		End
			   
	    TransitionState = TRANS_AboutToHitGround_To_Idle
			Animation = SplashAtEndOfJump
				AnimationName = SumnDrag_ATKA
				AnimationMode = ONCE
				AnimationBlendTime = 10
				AnimationSpeedFactorRange = 3.0 3.0
			End
		End

;		AnimationState						= WEAPONSET_HERO_MODE
;			Animation						= RUN
;				AnimationName	= SumnDrag_WLKA
;				AnimationMode	= LOOP
;				AnimationSpeedFactorRange = 1.8 1.8
;			End
;			Flags							= RANDOMSTART
;			;ParticleSysBone				= None InfantryDustTrails
;		End
;
;



	End
	End


	CommandSet			= NewSummonedDragonCommandSet

	DisplayName			= MotherDragon

	WeaponSet
		Conditions = None 
		Weapon = PRIMARY	DragonFireBreath1
	End
	
	ReplaceModule ModuleTag_Body
	Body = ActiveBody ModuleTag_Body1
		MaxHealth = 30000
	End
	End

	ArmorSet
		Conditions      = None
		Armor           = NewSummonedDragonArmor
		DamageFX        = FellBeastDamageFX
	End

	LocomotorSet
		Locomotor     = SummonedDragonLocomotor
		Condition     = SET_NORMAL
		Speed         = 30
	End

	AddModule
	Behavior = AutoHealBehavior ModuleTag_DragonHealing
		StartsActive = Yes
		HealingAmount = 50
		HealingDelay = 1000
		StartHealingDelay = 20000
		HealOnlyIfNotInCombat = Yes
	End
	End

	CrushableLevel = 3  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrusherLevel = 2
	
;	CrushOnlyWhileCharging = YES ; // the guardian is only supposed to crush during his special charge ability
	
	MinCrushVelocityPercent = 90% ; Has to be moving at least xx% of full speed
	CrushDecelerationPercent = 1% ; Lose xx% max velocity when crushing -- thus they only crush 1 row of infantry
	
	CrushKnockback = 70  ; how hard we knock back crushed units.
	CrushZFactor = 0.5  ; How much we knock upwards.

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

	AddModule
	Behavior = GrantUpgradeCreate ModuleTag_1
		UpgradeToGrant = Upgrade_AragornBladeMaster  ;
	End 
	End

	AddModule
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_AragornBladeMasterEnabler
		SpecialPowerTemplate = SpecialAbilityAragornBladeMaster
		TriggeredBy = Upgrade_AragornBladeMaster
	End
	End

	AddModule	
  	Behavior = SpecialPowerModule ModuleTag_AragornBladeMasterStarter                ;
		SpecialPowerTemplate    = SpecialAbilityAragornBladeMaster
		StartsPaused			= Yes
	End
	End
	
	AddModule
	Behavior = HeroModeSpecialAbilityUpdate ModuleTag_AragornBladeMasterUpdate   ;
		SpecialPowerTemplate    = SpecialAbilityAragornBladeMaster
		HeroAttributeModifier	= DragonRoar
		HeroEffectDuration		= 30000 ; this should sync with the auto ability delay re-fire time in commandButtons.ini
		UnpackTime              = 1 ; insant unpack
		TriggerSound			= DrogothFireBreath  ;AragornBladeMaster
	End
	End



	AddModule
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_CallFromTheDeepEnabler
		SpecialPowerTemplate = SpecialAbilityDragonCallFromTheDeep
		TriggeredBy = Upgrade_AragornBladeMaster
	End
	End

	AddModule
	Behavior = OCLSpecialPower ModuleTag_CallFromTheDeepPower
		SpecialPowerTemplate	= SpecialAbilityDragonCallFromTheDeep
		OCL						= OCL_WildFireDrakeEgg
		CreateLocation			= CREATE_AT_LOCATION
		StartsPaused			= Yes
		TriggerFX			 = FX_DrakeSummon
		SetModelCondition		= ModelConditionState:SELECTED
		SetModelConditionTime	= 3.5
		DisableDuringAnimDuration = Yes
	End
	End


End

;^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
;2. GREEN REALM
;^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^



;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Wizard Ent
;Reference: WizardEntRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

FXParticleSystem MagicEntRight
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXBlast3.tga
    Lifetime = 10 10
    SortLevel = 1
    Size = 5 15
    BurstCount = 1 1
  End
  Color = DefaultColor
    Color2 = R:175 G:200 B:255 1
    Color3 = R:27 G:34 B:140 3
    Color4 = R:12 G:22 B:82 5
  End
  Update = DefaultUpdate
    SizeRate = 1 1
    SizeRateDamping = 1 1
    AngleZ = 0 7
    AngularRateZ = -0.1 0.1
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    Gravity = -0.04
    VelocityDamping = 1 1
  End
  EmissionVelocity = OutwardEmissionVelocity
  End
  EmissionVolume = SphereEmissionVolume
    Radius = 2
  End
  Draw = DefaultDraw
  End
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

FXParticleSystem MagicEntLeft
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXBlast2.tga
    Lifetime = 5 5
    SortLevel = 1
    Size = 10 15
    BurstCount = 1 1
  End
  Color = DefaultColor
    Color2 = R:75 G:100 B:155 1
    Color3 = R:27 G:34 B:140 3
    Color4 = R:12 G:22 B:82 5
  End
  Update = DefaultUpdate
    SizeRate = 1 1
    SizeRateDamping = 1 1
    AngleZ = 0 7
    AngularRateZ = -0.1 0.1
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    Gravity = 0.07
    VelocityDamping = 1 1
  End
  EmissionVelocity = OutwardEmissionVelocity
  End
  EmissionVolume = SphereEmissionVolume
    Radius = 2
  End
  Draw = DefaultDraw
  End
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Wizard Ent WOP FX
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

FXParticleSystem NatureSpinningDust02
  System
    Priority = ALWAYS_RENDER
    Shader = ALPHA
    Type = GPU_PARTICLE
    ParticleName = EXCloud02.tga
    Lifetime = 50 50
    SystemLifetime = 30
    SortLevel = 1
    Size = 25 35
    BurstCount = 1 1
  End
  Color = DefaultColor
    Color2 = R:200 G:200 B:200 0
    Color3 = R:100 G:100 B:100 50
;    Color2 = R:80 G:60 B:9 0
;    Color3 = R:80 G:60 B:9 50
  End
  Alpha = DefaultAlpha
    Alpha2 = 0.5 0.5 15
    Alpha3 = 0 0 50
  End
  Update = DefaultUpdate
    SizeRate = 1 1
    SizeRateDamping = 1 1
    AngleZ = 0 7
    AngularDamping = 1 1
    AngleXY = 0 7
    AngularRateXY = 0.25 0.25
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
    DriftVelocity = X:0 Y:0 Z:2
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = -0.25 0.25
    Y = 0.25 0.25
  End
  EmissionVolume = CylinderEmissionVolume
    IsHollow = Yes
    Radius = 50
    Offset = X:20 Y:0 Z:20
  End
  Draw = GpuDraw
    FramesPerRow = 1
    TotalFrames = 1
    SpeedMultiplier = 1
  End
End

FXParticleSystem NatureMagic02
  System
    Priority = HIGH_OR_ABOVE
    ParticleName = EXGlow02.tga
    Lifetime = 50 50
    SystemLifetime = 80
    SortLevel = 1
    Size = 4 10
    BurstDelay = 1 1
    BurstCount = 3 3
    InitialDelay = 5 5
  End
  Color = DefaultColor
    Color1 = R:86 G:118 B:217 0
    Color2 = R:0 G:0 B:0 125
    Color3 = R:187 G:179 B:157 0
  End
  Alpha = DefaultAlpha
    Alpha2 = 0.5 0.5 5
    Alpha3 = 0.5 0.5 190
    Alpha4 = 0 0 200
  End
  Update = DefaultUpdate
    SizeRateDamping = 1 1
    AngleZ = 0 7
    AngularRateZ = -0.25 0.25
    AngularDamping = 1 1
    AngleXY = 0.1 0.1
    AngularRateXY = 0.5 0.9
    AngularDampingXY = 0.9 0.9
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
    DriftVelocity = X:0 Y:0 Z:0.5
    Swirly = Yes
  End
  EmissionVelocity = OutwardEmissionVelocity
    Speed = 20.5 1
  End
  EmissionVolume = CylinderEmissionVolume
    Radius = 100
    Length = 50
    Offset = X:0 Y:0 Z:15
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem NatureWaveRing
  System
    Priority = ALWAYS_RENDER
    IsOneShot = Yes
    ParticleName = EXLightningBolt04.tga ;EXexplo03.tga
    Lifetime = 30 30
    SystemLifetime = 30
    Size = 6 6
    BurstCount = 1 1
    InitialDelay = 5 5
  End
  Color = DefaultColor
    Color2 = R:5 G:5 B:25 5
    Color3 = R:0 G:0 B:0 50
  End
  Alpha = DefaultAlpha
    Alpha2 = 0.75 1 5
    Alpha3 = -0.5 0 10
  End
  Update = DefaultUpdate
    SizeRate = 5 10
    SizeRateDamping = 0.9 0.95
    AngleZ = -7 7
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = CylinderEmissionVolume
    IsHollow = Yes
    RadiusRate = 5
    Offset = X:0 Y:0 Z:6
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem NatureLightning
  System
    Priority = ALWAYS_RENDER
    Type = STREAK
    ParticleName = EXLightningBolt04.tga
    Lifetime = 20 20
    SystemLifetime = 30
    Size = 1 15
    BurstDelay = 40 150
    BurstCount = 10 10
    InitialDelay = 50 175
  End
  Color = DefaultColor
    Color1 = R:255 G:255 B:255 0
    Color2 = R:152 G:133 B:201 5
    Color3 = R:0 G:0 B:0 20
    ColorScale = -2 -2
  End
  Update = DefaultUpdate
    SizeRate = 0.5 3
    SizeRateDamping = 0.9 1
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.9 0.9
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = -0.3 0.3
    Y = -0.3 0.3
  End
  EmissionVolume = LightningEmission
    EndPoint = X:0 Y:0 Z:-170
    Amplitude1 = 100 100
    Frequency1 = 4 6
    Phase1 = 4 5
    Phase2 = 0 6.28
    Phase3 = 0 6.28
  End
  Draw = LightningDraw
    OffsetX = -5 5
    OffsetY = -5 5
    OffsetZ = -1 1
  End
End

FXParticleSystem NatureFire 
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXexplo01.tga
    Lifetime = 10 10
    SystemLifetime = 20
    SortLevel = 1
    Size = 20 30
    BurstCount = 2 2
  End
  Color = DefaultColor
    Color1 = R:100 G:154 B:242 0
    Color2 = R:0 G:0 B:0 10
  End
  Update = DefaultUpdate
    SizeRate = 20 40
    SizeRateDamping = 0.8 0.95
    AngleZ = -1 1
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    Gravity = 0.16
    VelocityDamping = 0.8 0.8
  End
  EmissionVelocity = OutwardEmissionVelocity
  End
  EmissionVolume = CylinderEmissionVolume
    Radius = 50
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem NatureFire1
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXexplo01.tga
    Lifetime = 10 10
    SystemLifetime = 20
    SortLevel = 1
    Size = 20 30
    BurstCount = 2 2
  End
  Color = DefaultColor
    Color1 = R:100 G:154 B:242 0
    Color2 = R:0 G:0 B:0 10
  End
  Update = DefaultUpdate
    SizeRate = 20 40
    SizeRateDamping = 0.8 0.95
    AngleZ = -1 1
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    Gravity = 0.16
    VelocityDamping = 0.8 0.8
  End
  EmissionVelocity = OutwardEmissionVelocity
  End
  EmissionVolume = CylinderEmissionVolume
    Radius = 100
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem NatureFire2
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXexplo01.tga
    Lifetime = 10 10
    SystemLifetime = 20
    SortLevel = 1
    Size = 20 30
    BurstCount = 2 2
  End
  Color = DefaultColor
    Color1 = R:100 G:154 B:242 0
    Color2 = R:0 G:0 B:0 10
  End
  Update = DefaultUpdate
    SizeRate = 20 40
    SizeRateDamping = 0.8 0.95
    AngleZ = -1 1
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    Gravity = 0.16
    VelocityDamping = 0.8 0.8
  End
  EmissionVelocity = OutwardEmissionVelocity
  End
  EmissionVolume = CylinderEmissionVolume
    Radius = 150
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem MagicEntBlastFinalShockWave
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXRing01.tga
    Lifetime = 30 30
    SystemLifetime = 5
    SortLevel = 1
    Size = 1 1
    BurstCount = 1 1
    IsGroundAligned = Yes
  End
  Color = DefaultColor
    Color1 = R:136 G:250 B:185 0
    Color2 = R:0 G:0 B:0 40
    ColorScale = -40 40
  End
  Update = DefaultUpdate
    SizeRate = 15 15
    SizeRateDamping = 1 1
    AngleZ = -1 1
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.8 0.8
  End
  EmissionVelocity = OutwardEmissionVelocity
  End
  EmissionVolume = PointEmissionVolume
    IsHollow = Yes
  End
  Draw = DefaultDraw
  End
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

FXParticleSystem WizardEntBladeMaster
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXRing01.tga
    Lifetime = 145 145
    SortLevel = 1
    Size = 5 5
    BurstCount = 1 1
  End
  Color = DefaultColor
    Color2 = R:15 G:35 B:20 5
    Color3 = R:0 G:0 B:0 15
    Color4 = R:32 G:32 B:32 0
  End
  Update = DefaultUpdate
    SizeRate = 1 1
    SizeRateDamping = 1 1
    AngleZ = 0 7
    AngularRateZ = -0.1 0.1
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    Gravity = 0.05
    VelocityDamping = 1 1
  End
  EmissionVelocity = OutwardEmissionVelocity
  End
  EmissionVolume = LineEmissionVolume
    IsHollow = Yes
    StartPoint = X:0 Y:0 Z:2
    EndPoint = X:0 Y:0 Z:10
  End
  Draw = DefaultDraw
  End
End


FXParticleSystem WizardEntBladeMasterMiddle
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXGlow02.tga  ;EXexplo01.tga  ;EXGlow02.tga  ;EXRing01.tga
    Lifetime = 200 200
    SortLevel = 1
    Size = 25 25
    BurstCount = 1 1
  End
  Color = DefaultColor
    Color2 = R:15 G:35 B:20 5
    Color3 = R:0 G:0 B:0 15
    Color4 = R:32 G:32 B:32 0
  End
  Update = DefaultUpdate
    SizeRate = 1 1
    SizeRateDamping = 1 1
    AngleZ = 0 7
    AngularRateZ = -0.1 0.1
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    Gravity = 0.06
    VelocityDamping = 1 1
  End
  EmissionVelocity = OutwardEmissionVelocity
  End
  EmissionVolume = LineEmissionVolume
    IsHollow = Yes
    StartPoint = X:0 Y:0 Z:2
    EndPoint = X:0 Y:0 Z:10
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem WizardEntBladeMasterRight
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXRing01.tga
    Lifetime = 145 145
    SortLevel = 1
    Size = 5 5
    BurstCount = 1 1
  End
  Color = DefaultColor
    Color2 = R:15 G:35 B:20 5
    Color3 = R:0 G:0 B:0 15
    Color4 = R:32 G:32 B:32 0
  End
  Update = DefaultUpdate
    SizeRate = 1 1
    SizeRateDamping = 1 1
    AngleZ = 0 7
    AngularRateZ = -0.1 0.1
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    Gravity = 0.05
    VelocityDamping = 1 1
  End
  EmissionVelocity = OutwardEmissionVelocity
  End
  EmissionVolume = LineEmissionVolume
    IsHollow = Yes
    StartPoint = X:0 Y:4 Z:-2
    EndPoint = X:0 Y:1 Z:-3
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem WizardEntShafts
  System
    Priority = ALWAYS_RENDER
    Shader = W3D_EMISSIVE
    Type = DRAWABLE
    ParticleName = exlight01.w3d
    Lifetime = 150 150
    SystemLifetime = 800
    SortLevel = 1
    Size = 0.1 0.1
    BurstDelay = 5 5
    BurstCount = 1 1
  End
  Color = DefaultColor
    Color1 = R:95 G:175 B:110 0
    Color2 = R:0 G:0 B:0 150
  End
  Alpha = DefaultAlpha
    Alpha2 = 0.5 0.5 10
    Alpha3 = 0 0 75
  End
  Update = RenderObjectUpdate
    StartSizeX = 0.1 0.1
    StartSizeY = 0.05 0.05
    StartSizeZ = 0.05 0.05
    SizeRateX = 0.05 0.05
    SizeRateY = 0.05 0.05
    SizeRateZ = 0.02 0.02
    SizeDampingX = 0.9 0.9
    SizeDampingY = 0.9 0.9
    SizeDampingZ = 0.98 0.98
    AngleZ = -5 5
    Rotation = ROTATE_Z
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = CylinderEmissionVolume
    Radius = 20
  End
  Draw = RenderObjectDraw
  End
End

FXParticleSystem WizardEntShaftsBig
  System
    Priority = ALWAYS_RENDER
    Shader = W3D_EMISSIVE
    Type = DRAWABLE
    ParticleName = exlight01.w3d
    Lifetime = 150 150
    SystemLifetime = 100
    SortLevel = 1
    Size = 8.1 8.1
    BurstDelay = 5 5
    BurstCount = 1 1
  End
  Color = DefaultColor
    Color1 = R:95 G:175 B:110 0
    Color2 = R:0 G:0 B:0 150
  End
  Alpha = DefaultAlpha
    Alpha2 = 0.5 0.5 10
    Alpha3 = 0 0 75
  End
  Update = RenderObjectUpdate
    StartSizeX = 0.1 0.1
    StartSizeY = 0.05 0.05
    StartSizeZ = 0.05 0.05
    SizeRateX = 0.05 0.05
    SizeRateY = 0.05 0.05
    SizeRateZ = 0.02 0.02
    SizeDampingX = 0.9 0.9
    SizeDampingY = 0.9 0.9
    SizeDampingZ = 0.98 0.98
    AngleZ = -5 5
    Rotation = ROTATE_Z
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = CylinderEmissionVolume
    Radius = 100
  End
  Draw = RenderObjectDraw
  End
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
; FX Lists
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

FXList FX_WizEntWave

  ParticleSystem
    Name = WizardEntShaftsBig
  End

  ParticleSystem
    Name = NatureWaveRing
    InitialDelay = 1 1 UNIFORM   ;In milliseconds
    Offset = X:20.0 Y:0.0 Z:20.0
  End

  ParticleSystem
    Name = ElvenAlliesButterflies
  End
  ParticleSystem
    Name = ElvenAlliesGrassA
  End
  ParticleSystem
    Name = ElvenAlliesGrassB
  End

    DynamicDecal	; A decal that belongs to nobody, but updates internally to fade and tint and such
		DecalName		= SCCHobbitSummon  ;SCCEntFoot
		Size			= 275				; Match radius in SpellBookSummonBalrog (this is square length, and there is radius, so this should be double that one)
		Color			= R:255 G:255 B:255

		OpacityStart		= 0
		OpacityFadeTimeOne	= 500
		OpacityPeak			= 255
		OpacityPeakTime		= 255
		OpacityFadeTimeTwo	= 20000
		OpacityEnd			= 0

		StartingDelay	= 0
		Lifetime		= 21000
	End


  ParticleSystem
    Name = NatureWaveRing
    InitialDelay = 1 1 UNIFORM   ;In milliseconds
    Offset = X:20.0 Y:0.0 Z:20.0
  End

  ParticleSystem
    Name = NatureSpinningDust02
    InitialDelay = 1 1 UNIFORM   ;In milliseconds
    Offset = X:20.0 Y:0.0 Z:20.0
  End

  ParticleSystem
    Name = NatureMagic02
    InitialDelay = 1 1 UNIFORM   ;In milliseconds
    Offset = X:20.0 Y:0.0 Z:20.0
  End

  ParticleSystem
    Name = NatureLightning
    InitialDelay = 1 1 UNIFORM   ;In milliseconds
    Offset = X:20.0 Y:0.0 Z:20.0
  End

  ParticleSystem
    Name = NatureFire
    InitialDelay = 1 1 UNIFORM   ;In milliseconds
    Offset = X:20.0 Y:0.0 Z:10.0
  End

  ParticleSystem
    Name = NatureFire1
    InitialDelay = 2000 2000 UNIFORM   ;In milliseconds
    Offset = X:20.0 Y:0.0 Z:10.0
  End

  ParticleSystem
    Name = NatureFire2
    InitialDelay = 3000 3000 UNIFORM   ;In milliseconds
    Offset = X:20.0 Y:0.0 Z:10.0
  End

  ParticleSystem
    Name = MagicEntBlastFinalShockWave
    InitialDelay = 1 1 UNIFORM   ;In milliseconds
    Offset = X:20.0 Y:0.0 Z:10.0
  End

  Sound
    Name = Gui_ScoreScreenSplash   ;GaladrielTerribleFurySFX
  End
End

FXList FX_WizardEntSprout
	ParticleSystem
		Name = WizardEntShafts
	End

    DynamicDecal	; A decal that belongs to nobody, but updates internally to fade and tint and such
		DecalName		= SCCHobbitSummon  ;SCCEntFoot
		Size			= 75				; Match radius in SpellBookSummonBalrog (this is square length, and there is radius, so this should be double that one)
		Color			= R:255 G:255 B:255

		OpacityStart		= 0
		OpacityFadeTimeOne	= 500
		OpacityPeak			= 255
		OpacityPeakTime		= 255
		OpacityFadeTimeTwo	= 55000
		OpacityEnd			= 0

		StartingDelay	= 0
		Lifetime		= 56000
	End


;	ParticleSystem
;		Name = ElvenWoodMist
;	End
;
;	ParticleSystem
;		Name = SummonEntMootRays
;	End
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
; Abillity Timers and mods
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

ModifierList WizardEntBladeMaster
	Category = SPELL
	Modifier = ARMOR 400%			// Additive.  Sum of these are subtracted from all entries in Armor.ini
	Modifier = SPEED 0%

	Duration = 30000				// lasts for 30 seconds
End

SpecialPower SpecialAbilityWizEntWave
	Enum			= SPECIAL_WORD_OF_POWER
	ReloadTime		= 120000
	PublicTimer		= No
End

SpecialPower SpecialAbilityWizardEntBladeMaster
	Enum									  =	SPECIAL_HERO_MODE
	ReloadTime								  =	100000
	PublicTimer								  =	No
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
; wizardent weapons
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Weapon MagicEntPunch  ; BALANCE TreeBeard Weapon Normal
  LeechRangeWeapon = Yes
  AttackRange				= 30.0
  MeleeWeapon				= Yes
  DelayBetweenShots			= 2200            ; time between shots, msec
  FiringDuration			= 1900            ; min 1900 for anim
  PreAttackDelay			= 2100
  PreAttackType				= PER_SHOT ; Do the delay each time we attack a new target
  FireFX					= FX_TreeBeardPunch
  RadiusDamageAffects		= ENEMIES NEUTRALS
  DamageDealtAtSelfPosition = Yes ; A melee based AoE.  Arc radiates from me, not them

  DamageNugget                        ; A basic Nugget that just does damage
    Damage        = 300
    Radius        = 100
    DelayTime     = 0
    DamageType    = MAGIC
    DamageFXType  = MAGIC
    DeathType     = NORMAL
    DamageArc	  = 60
  End
  MetaImpactNugget                    ; A Nugget that throws things back with force
    ShockWaveAmount   = 100.0
    ShockWaveRadius   = 100
    ShockWaveTaperOff = 1.0
    ShockWaveArc      = 60
    ShockWaveZMult   = 0.75
    HeroResist		  = 0.50		; 90% resistance to heroes
  End
End


Weapon HeroModeMagicEntPunch  ; BALANCE TreeBeard Weapon Normal
  LeechRangeWeapon = Yes
  AttackRange				= 60.0
  MeleeWeapon				= Yes
  DelayBetweenShots			= 2200            ; time between shots, msec
  FiringDuration			= 1900            ; min 1900 for anim
  PreAttackDelay			= 2100
  PreAttackType				= PER_SHOT ; Do the delay each time we attack a new target
  FireFX					= FX_TreeBeardPunch
  RadiusDamageAffects		= ENEMIES NEUTRALS
  DamageDealtAtSelfPosition = Yes ; A melee based AoE.  Arc radiates from me, not them

  DamageNugget                        ; A basic Nugget that just does damage
    Damage        = 400
    Radius        = 120
    DelayTime     = 0
    DamageType    = MAGIC
    DamageFXType  = MAGIC
    DeathType     = NORMAL
    DamageArc	  = 60
  End
  MetaImpactNugget                    ; A Nugget that throws things back with force
    ShockWaveAmount   = 100.0
    ShockWaveRadius   = 120
    ShockWaveTaperOff = 1.0
    ShockWaveArc      = 60
    ShockWaveZMult   = 0.75
    HeroResist		  = 0.50		; 90% resistance to heroes
  End
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Weapon WizEntWaveWeapon
	IdleAfterFiringDelay = 0
	AttackRange = GANDALF_WORD_OF_POWER_RANGE
	MinimumAttackRange = 0.8
	WeaponSpeed = 401
	MinWeaponSpeed = 241
	MaxWeaponSpeed = 601
	ScaleWeaponSpeed = Yes
;	FireSound	= ArmyDeadKill
	RadiusDamageAffects = ENEMIES NOT_SIMILAR
	DelayBetweenShots = 5000
	PreAttackDelay        = 19600
	PreAttackType         = PER_ATTACK
	PreAttackFX           = FX_GandalfPreAttackBlastReal
	FireFX                = FX_WizEntWave
	FiringDuration      = 1400
	DamageNugget
		Damage			= 500
		Radius			= 180.0
		DamageType		= MAGIC
		DamageFXType	= MAGIC ;BOLT  ;ELECTRIC                   ;TORNADO
		DeathType		= EXPLODED
		DamageSpeed		= 300.0
	End
	DamageNugget
		Damage			= 200
		Radius			= 350.0
		DamageType		= HERO
		DamageFXType	= SWORD_SLASH  ;ELECTRIC                   ;TORNADO
		DeathType		= EXPLODED
		DamageSpeed		= 300.0
	End
	MetaImpactNugget                    ; A Nugget that throws things back with force

		ShockWaveAmount   = 80
		ShockWaveRadius   = 80
		ShockWaveTaperOff = 1.0 
		ShockWaveZMult    = 1.2  
		ShockWaveSpeed	= 300.0
	End
	MetaImpactNugget                    ; A Nugget that throws things back with force

		ShockWaveAmount   = 60
		ShockWaveRadius   = 180
		ShockWaveTaperOff = 1.0 
		ShockWaveZMult    = 1.2  
		ShockWaveSpeed	= 300.0
	End
	MetaImpactNugget                    ; A Nugget that throws things back with force

		ShockWaveAmount   = 50
		ShockWaveRadius   = 260
		ShockWaveTaperOff = 1.0 
		ShockWaveZMult    = 0.7 
		ShockWaveSpeed	= 300.0
	End
	MetaImpactNugget                    ; A Nugget that throws things back with force

		ShockWaveAmount   = 30
		ShockWaveRadius   = 350
		ShockWaveTaperOff = 1.0 
		ShockWaveZMult    = 0.8  
		ShockWaveSpeed	= 300.0
	End
End


;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Commadnbuttons
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

CommandButton Command_SpecialAbilityElrondElvenGrace  ;Command_SpecialAbilityDeadEye  ;Command_PurchaseSpellElvenWood  ;Command_CreateAHero_BerserkerRage_Level1   ;Command_SpecialAbilityBladeMaster
  Command                 = SPECIAL_POWER 
  SpecialPower            = SpecialAbilityWizardEntBladeMaster
  TextLabel               = CONTROLBAR:WizardEntBladeMaster
  ButtonImage             = HSAragornBladeMaster
  ButtonBorderType        = ACTION 
  DescriptLabel           = CONTROLBAR:ToolTipWizardEntBladeMaster
  InPalantir			  = Yes
  AutoAbility			  = Yes
  AutoDelay				  = 30.0 ; this should sync with the Aragorn's hero mode effect time
  PresetRange			  = 50.0
  ;UnitSpecificSound       = AragornVoiceBladeMaster
End

CommandButton Command_SpecialAbilityWordOfPower
  Command                 = SPECIAL_POWER 
  SpecialPower            = SpecialAbilityWizEntWave
  Options                 = NONE
  TextLabel               = CONTROLBAR:WizEntWave
  ButtonImage             = Gandolf_radcircle;HSGandalfWordOfPower
  ButtonBorderType        = ACTION 
  DescriptLabel           = CONTROLBAR:ToolTipWizEntWave
  AutoAbility			  = Yes
  PresetRange			  = 120.0
  InPalantir			  = Yes
  UnitSpecificSound = EntsToWar  ;ElrondVoiceAttack
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
; commandset
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

CommandSet WizardEntCommandSet
	1	= Command_ToggleStance
	2	= Command_SpecialAbilityElrondElvenGrace   ;Command_SpecialAbilityDeadEye  ;Command_PurchaseSpellElvenWood  ;Command_CreateAHero_BerserkerRage_Level1
	3	= Command_SpecialAbilityWordOfPower
	13	= Command_AttackMove
	14	= Command_Stop
End


;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;XP
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

ExperienceLevel	FaramirLevel3
	TargetNames						=	GondorFaramir GondorFaramirCavalry	
	RequiredExperience				=	FARAMIR_LVL3_EXP_NEEDED
	ExperienceAward					=	FARAMIR_LVL3_EXP_AWARD 	
	LevelUpFx						=	FX:GandalfLevelUp1FX
	Rank							=	3
	Upgrades						=   Upgrade_AragornBladeMaster
	AttributeModifiers				=	HeroLevelUpDamage2
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40
		MaxRadius					=	200
		MaxSelectedUnits			=	40
	End	
End	

ExperienceLevel	FaramirLevel5
	TargetNames						=	GondorFaramir GondorFaramirCavalry	
	RequiredExperience				=	FARAMIR_LVL5_EXP_NEEDED
	ExperienceAward					=	FARAMIR_LVL5_EXP_AWARD 	
	LevelUpFx						=	FX:GandalfLevelUp1FX
	Rank							=	5
	AttributeModifiers				=	HeroLevelUpDamage4
	Upgrades						=	Upgrade_GandalfWordOfPower
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40
		MaxRadius					=	200
		MaxSelectedUnits			=	40
	End	
End	

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Armor
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<


Armor WizardEntArmor
  Armor = DEFAULT        40%    ;this sets the level for all nonspecified damage types
  Armor = CRUSH           20%    ;horseman damage
  Armor = SLASH          40%    ;1%	 ;soldier damage
  Armor = PIERCE          10%    ;archer damage
  Armor = FLAME         50%    ;fire damage
  Armor = SIEGE         60%    ;siege damage
  Armor = STRUCTURAL    50%    ;Structural damage (Ent rocks)
  Armor = SPECIALIST    20%    ;
  Armor = CHOP          50%    ;axe damage
  Armor = HERO          50%    ;hero damage
  Armor = HERO_RANGED     10%    ;Hero bow damage
  Armor = MAGIC         100%    ;hero damage
  
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Wizard Ent Modules
;Reference: WizardEntModulesRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;ObjectReskin RohanEntAsh RohanEntBase
;ChildObject RohanEntAsh RohanEntBase
;Object RohanEntAsh

Object GondorFaramir

	BountyValue = 500	

	AddModule
	Behavior = GrantUpgradeCreate ModuleTag_1
		UpgradeToGrant = Upgrade_GandalfWhite  ;
	End 
	End

	AddModule
	Behavior = SubObjectsUpgrade Body_zdhzd
		TriggeredBy			   = Upgrade_GandalfWhite
		UpgradeTexture		   = ruentash.tga	0 ruentoak_d.tga  ;ruentash_d.tga
		RecolorHouse		   = No
	End
	End

  	ShockwaveResistance = SHOCKWAVE_RESISTANCE_ALWAYS

 ;   ButtonImage = HIEnt  ;HITreebeard
	SelectPortrait = UPElven_Ent  ;HPTreeBeard
    ButtonImage = UPElven_Ent  ;HITreebeard

	KindOf			= PRELOAD SELECTABLE CAN_CAST_REFLECTIONS MONSTER SCORE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT PATH_THROUGH_INFANTRY CAN_ATTACK_WALLS SCARY HERO BIG_MONSTER HEAVY_MELEE_HITTER

	;ReplaceModule FireDeadTag
	AddModule
	Behavior = FireWeaponWhenDeadBehavior FireDeadTag1
		;RequiredStatus	= DEATH_1
		StartsActive	= Yes
		DelayTime		= 4300 
		DeathWeapon		= RohanEntDeath
		WeaponOffset	= X:-48 Y:0 Z:0	;Fire the death weapon right behind the object.
	End
	End	

	CrusherLevel		= 1
	UseCrushAttack		= No				; Don't attack using crush, just crush when you walk through. 

	MinCrushVelocityPercent = 0 ; Has to be moving at at least 50% of full speed.
	CrushDecelerationPercent = 0 ; Lose xx percent of max velocity when crushing.
	
	CrushKnockback = 20
	CrushZFactor = 1.0

	VoiceAttack				= EntVoiceSelect
	VoiceAttackAir				= EntVoiceSelect
	VoiceAttackCharge			= EntVoiceSelect
	VoiceAttackMachine		= EntVoiceSelect
	VoiceAttackStructure		= EntVoiceSelect
	;VoiceCreated			= EntVoiceSelect
	;VoiceFullyCreated 		= EntVoiceSelect
	VoiceMove				= EntVoiceSelect
	VoiceMoveToCamp			= EntVoiceSelect
	VoiceMoveWhileAttacking		= EntVoiceSelect
	VoicePriority			= 82
	VoiceRetreatToCastle		= EntVoiceSelect
	VoiceSelect				= EntVoiceSelect
	VoiceSelectBattle 		= EntVoiceSelect
	VoiceGuard				= EntVoiceSelect
	SoundMoveLoop			= EntVoxMoveLoop

	SoundImpact				= ImpactHorse

;FaramirRangerVoiceModeKnight
;FaramirRangerVoiceMoveTrees

	UnitSpecificSounds
		VoiceGarrison		= EntVoiceSelect
		VoiceEnterUnitElvenTransportShip	= EntVoiceSelect
		VoiceInitiateCaptureBuilding		= EntVoiceSelect
		VoiceMoveToTrees	= EntVoiceSelect				
	End

	EvaEventDieOwner					= None

	ReplaceModule ModuleTag_LGAU
	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU1		; Tie into LargeGroupAudio system
		Key = Ent Unit Infantry
		UnitWeight = 2						; Ents count as 2 infantry when computing group size
	End
	End

	ReplaceModule ModuleTag_AnimAudioBehavior
	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior1
		MaxUpdateRangeCap = 800
		AnimationSound = Sound:BuildingEntMootCouncil				Animation:RUTReeBerd_SKL.RUTreeberd_MOTA	Frames:1
		AnimationSound = Sound:EntFootStep			ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_MOTA	Frames:225 253
		AnimationSound = Sound:BuildingEntMootCouncil				Animation:RUTReeBerd_SKL.RUTreeberd_MOTB	Frames:1

		AnimationSound = Sound:EntFootStep			ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_GBA1	Frames:9 13
		AnimationSound = Sound:TrollTreeSwingLight				Animation:RUTReeBerd_SKL.RUTreeBerd_GBA1	Frames:10
		AnimationSound = Sound:EntGrabRock						Animation:RUTReeBerd_SKL.RUTreeberd_GBA1	Frames:16
		AnimationSound = Sound:EntFootStep			ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_GBA2	Frames:28 34
		AnimationSound = Sound:EntFootStep			ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_GBB1	Frames:18
		AnimationSound = Sound:TrollTreeSwingLight				Animation:RUTReeBerd_SKL.RUTreeBerd_GBB1	Frames:16
		AnimationSound = Sound:EntGrabRock						Animation:RUTReeBerd_SKL.RUTreeBerd_GBB1	Frames:21
		AnimationSound = Sound:EntGrabBuildingChunk				Animation:RUTReeBerd_SKL.RUTreeberd_GBB1	Frames:37
		AnimationSound = Sound:EntFootStep			ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_GBB2	Frames:24

		AnimationSound = Sound:EntFootStep			ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_GRBC	Frames:13 26 117 179 223
		AnimationSound = Sound:EntGrabRock						Animation:RUTReeBerd_SKL.RUTreeberd_GRBC	Frames:48
		AnimationSound = Sound:EntVoxEfforts					Animation:RUTReeBerd_SKL.RUTreeberd_GRBC	Frames:160
		AnimationSound = Sound:EntFootStep			ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_GRBD	Frames:13 26 117 179 223
		AnimationSound = Sound:EntGrabRock						Animation:RUTReeBerd_SKL.RUTreeberd_GRBD	Frames:48
		AnimationSound = Sound:EntVoxEfforts					Animation:RUTReeBerd_SKL.RUTreeberd_GRBD	Frames:160
		AnimationSound = Sound:EntFootStep			ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_GRBE	Frames:13 26 117 179 223
		AnimationSound = Sound:EntGrabRock						Animation:RUTReeBerd_SKL.RUTreeberd_GRBE	Frames:48
		AnimationSound = Sound:EntVoxEfforts					Animation:RUTReeBerd_SKL.RUTreeberd_GRBE	Frames:160
		AnimationSound = Sound:EntFootStep			ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_GRBF	Frames:13 26 117 179 223
		AnimationSound = Sound:EntGrabRock						Animation:RUTReeBerd_SKL.RUTreeberd_GRBF	Frames:48
		AnimationSound = Sound:EntVoxEfforts					Animation:RUTReeBerd_SKL.RUTreeberd_GRBF	Frames:160

		AnimationSound = Sound:EntFootStep			ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_ATKA	Frames:9 78
		AnimationSound = Sound:ImpactEntGenericPunch				Animation:RUTReeBerd_SKL.RUTreeberd_ATKA	Frames:31
 		AnimationSound = Sound:EntFootStep			ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_ATKD	Frames:65
		AnimationSound = Sound:ImpactEntGenericKick				Animation:RUTReeBerd_SKL.RUTreeberd_ATKD	Frames:32
		AnimationSound = Sound:EntFootStep			ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_ATKE	Frames:70
		AnimationSound = Sound:ImpactEntGenericKick				Animation:RUTReeBerd_SKL.RUTreeberd_ATKE	Frames:31
		AnimationSound = Sound:EntFootStep			ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_ATKF	Frames:16 82
		AnimationSound = Sound:ImpactEntGenericPunch				Animation:RUTReeBerd_SKL.RUTreeberd_ATKF	Frames:32

		AnimationSound = Sound:EntFootStep			ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeberd_ACLA	Frames:9
		AnimationSound = Sound:EntFootStep			ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeberd_DCLA	Frames:17 42
		AnimationSound = Sound:EntFootStep			ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeberd_DCLB	Frames:17 44
		AnimationSound = Sound:EntFootStep			ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeberd_DCLC	Frames:11 41
		AnimationSound = Sound:EntFootStep			ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeberd_DCLD	Frames:32

		AnimationSound = Sound:EntFootStep			ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_WLKA	Frames:33 76
		AnimationSound = Sound:EntFootStep			ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_WLKC	Frames:22 48 
		AnimationSound = Sound:EntRunStep			ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_RUNA	Frames:4 24

		AnimationSound = Sound:EntRunStep			ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_TRNL	Frames:12 27
		AnimationSound = Sound:EntRunStep			ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_TRNR	Frames:12 27
		AnimationSound = Sound:EntRunStep			ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_TNL2	Frames:18 38 
		AnimationSound = Sound:EntRunStep			ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_TNR2	Frames:18 38

		AnimationSound = Sound:EntFootStep			ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_THRB	Frames:12 44
		AnimationSound = Sound:TrollTreeSwing					Animation:RUTReeBerd_SKL.RUTreeBerd_THRB	Frames:36
		AnimationSound = Sound:TrollTreeSwingLight				Animation:RUTReeBerd_SKL.RUTreeBerd_THRC	Frames:29
		
		AnimationSound = Sound:EntFootStep			ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_MADA	Frames:75
		AnimationSound = Sound:EntPanic						Animation:RUTReeBerd_SKL.RUTreeBerd_MADA	Frames:17
		AnimationSound = Sound:EntRunStep			ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_MFDA	Frames:2 14

		AnimationSound = Sound:EntRunStep			ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_RCTD	Frames:5 120 206
		AnimationSound = Sound:EntSeeFirePart1					Animation:RUTReeBerd_SKL.RUTreeBerd_RCTD	Frames:40 
		AnimationSound = Sound:EntSeeFirePart2					Animation:RUTReeBerd_SKL.RUTreeBerd_RCTD	Frames:70
		AnimationSound = Sound:TrollTreeSwing					Animation:RUTReeBerd_SKL.RUTreeBerd_RCTD	Frames:121
		AnimationSound = Sound:EntPanic						Animation:RUTReeBerd_SKL.RUTreeBerd_RCTD	Frames:150

		AnimationSound = Sound:EntSplashWater					Animation:RUTReeBerd_SKL.RUTreeBerd_SPLA	Frames:0

		AnimationSound = Sound:EntFootStep			ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeberd_HITA	Frames:11 52
		AnimationSound = Sound:EntFootStep			ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeberd_GTPA	Frames:14 24
		AnimationSound = Sound:EntFootStep			ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeberd_DIEA	Frames:7 
		AnimationSound = Sound:EntDieFall						Animation:RUTReeBerd_SKL.RUTreeBerd_DIEA	Frames:63
		AnimationSound = Sound:EntDieFall						Animation:RUTReeBerd_SKL.RUTreeBerd_LNDA	Frames:3
		AnimationSound = Sound:EntBodyfall						Animation:RUTReeBerd_SKL.RUTreeBerd_LNDA	Frames:24

		;----------- water footsteps below -------------

		AnimationSound = Sound:EntFootstepWater		RequiredMC:WADING	Animation:RUTreeberd_SKL.RUTreeBerd_MOTA	Frames:225 253
		AnimationSound = Sound:EntFootstepWater		RequiredMC:WADING	Animation:RUTreeberd_SKL.RUTreeBerd_GBA1	Frames:9 13
		AnimationSound = Sound:EntFootstepWater		RequiredMC:WADING	Animation:RUTreeberd_SKL.RUTreeBerd_GBA2	Frames:28 34
		AnimationSound = Sound:EntFootstepWater		RequiredMC:WADING	Animation:RUTreeberd_SKL.RUTreeBerd_GBB1	Frames:18
		AnimationSound = Sound:EntFootstepWater		RequiredMC:WADING	Animation:RUTreeberd_SKL.RUTreeBerd_GBB2	Frames:24
		AnimationSound = Sound:EntFootstepWater		RequiredMC:WADING	Animation:RUTreeberd_SKL.RUTreeBerd_GRBC	Frames:13 26 117 179 223
		AnimationSound = Sound:EntFootstepWater		RequiredMC:WADING	Animation:RUTreeberd_SKL.RUTreeBerd_GRBD	Frames:13 26 117 179 223
		AnimationSound = Sound:EntFootstepWater		RequiredMC:WADING	Animation:RUTreeberd_SKL.RUTreeBerd_GRBE	Frames:13 26 117 179 223
		AnimationSound = Sound:EntFootstepWater		RequiredMC:WADING	Animation:RUTreeberd_SKL.RUTreeBerd_GRBF	Frames:13 26 117 179 223
		AnimationSound = Sound:EntFootstepWater		RequiredMC:WADING	Animation:RUTreeberd_SKL.RUTreeBerd_ATKA	Frames:9 78	
 		AnimationSound = Sound:EntFootstepWater		RequiredMC:WADING	Animation:RUTreeberd_SKL.RUTreeBerd_ATKD	Frames:65
		AnimationSound = Sound:EntFootstepWater		RequiredMC:WADING	Animation:RUTreeberd_SKL.RUTreeBerd_ATKE	Frames:70
		AnimationSound = Sound:EntFootstepWater		RequiredMC:WADING	Animation:RUTreeberd_SKL.RUTreeBerd_ATKF	Frames:16 82
		AnimationSound = Sound:EntFootstepWater		RequiredMC:WADING	Animation:RUTreeberd_SKL.RUTreeberd_ACLA	Frames:9
		AnimationSound = Sound:EntFootstepWater		RequiredMC:WADING	Animation:RUTreeberd_SKL.RUTreeberd_DCLA	Frames:17 42
		AnimationSound = Sound:EntFootstepWater		RequiredMC:WADING	Animation:RUTreeberd_SKL.RUTreeberd_DCLB	Frames:17 44
		AnimationSound = Sound:EntFootstepWater		RequiredMC:WADING	Animation:RUTreeberd_SKL.RUTreeberd_DCLC	Frames:11 41
		AnimationSound = Sound:EntFootstepWater		RequiredMC:WADING	Animation:RUTreeberd_SKL.RUTreeberd_DCLD	Frames:32 	
		AnimationSound = Sound:EntFootstepWater		RequiredMC:WADING	Animation:RUTreeberd_SKL.RUTreeBerd_WLKA	Frames:33 76
		AnimationSound = Sound:EntFootstepWater		RequiredMC:WADING	Animation:RUTreeberd_SKL.RUTreeBerd_WLKC	Frames:22 48
		AnimationSound = Sound:EntFootstepWater		RequiredMC:WADING	Animation:RUTreeberd_SKL.RUTreeBerd_THRB	Frames:12 44
		AnimationSound = Sound:EntFootstepWater		RequiredMC:WADING	Animation:RUTreeberd_SKL.RUTreeBerd_MADA	Frames:75	
		AnimationSound = Sound:EntFootstepWater		RequiredMC:WADING	Animation:RUTreeberd_SKL.RUTreeberd_HITA	Frames:11 52
		AnimationSound = Sound:EntFootstepWater		RequiredMC:WADING	Animation:RUTreeberd_SKL.RUTreeberd_GTPA	Frames:14 24
		AnimationSound = Sound:EntFootstepWater		RequiredMC:WADING	Animation:RUTreeberd_SKL.RUTreeberd_DIEA	Frames:7

		AnimationSound = Sound:EntFootstepWater		RequiredMC:WADING	Animation:RUTreeberd_SKL.RUTreeBerd_RUNA	Frames:4 24
		AnimationSound = Sound:EntFootstepWater		RequiredMC:WADING	Animation:RUTreeberd_SKL.RUTreeBerd_TRNL	Frames:12 27
		AnimationSound = Sound:EntFootstepWater		RequiredMC:WADING	Animation:RUTreeberd_SKL.RUTreeBerd_TRNR	Frames:12 27
		AnimationSound = Sound:EntFootstepWater		RequiredMC:WADING	Animation:RUTreeberd_SKL.RUTreeBerd_TNL2	Frames:18 38
		AnimationSound = Sound:EntFootstepWater		RequiredMC:WADING	Animation:RUTreeberd_SKL.RUTreeBerd_TNR2	Frames:18 38
		AnimationSound = Sound:EntFootstepWater		RequiredMC:WADING	Animation:RUTreeberd_SKL.RUTreeBerd_MFDA	Frames:2 14
		AnimationSound = Sound:EntFootstepWater		RequiredMC:WADING	Animation:RUTreeberd_SKL.RUTreeBerd_RCTD	Frames:5 120 206
	End
	End

	RemoveModule ModuleTag_FaramirLeadership
	RemoveModule ModuleTag_TheodenLeadership
	RemoveModule ModuleTag_TheodenLeadershipUpdate

	ArmorSet
		Conditions      = None
		Armor           = WizardEntArmor
		DamageFX        = EntDamageFX
	End

	;RemoveModule ModuleTag_CommandSetSwapper

	DisplayName			= WizardEnt

	;DisplayMeleeDamage = 400

	ReplaceModule ModuleTag_FaramirHealing
	Behavior = AutoHealBehavior ModuleTag_WizardEntHealing
		StartsActive = Yes
		HealingAmount = 50
		HealingDelay = 1000
		StartHealingDelay = 20000
		HealOnlyIfNotInCombat = Yes
	End
	End

	ReplaceModule ModuleTag_RespawnBody
	Body = RespawnBody ModuleTag_RespawnBody1
		CheerRadius 			= EMOTION_CHEER_RADIUS
		MaxHealth         		= 7000	;BALANCE Faramir Health
		PermanentlyKilledByFilter	= NONE		;Who kills me permanently?
   		DodgePercent      		= HERO_DODGE_PERCENT
	End
	End

	LocomotorSet
		Locomotor = RohanTreeBeardLocomotor
		Condition = SET_NORMAL
		Speed     = 25
	End

	CommandSet = WizardEntCommandSet

;	AddModule
;	Behavior = GrantUpgradeCreate ModuleTag_99999
;		UpgradeToGrant = Upgrade_GandalfWordOfPower  ;
;	End 
;	End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Word of The Ents
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

      AddModule
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_WordEnabler
		SpecialPowerTemplate = SpecialAbilityWizEntWave
		TriggeredBy = Upgrade_GandalfWordOfPower
	End
      End
      AddModule
	Behavior = SpecialPowerModule ModuleTag_WordStarter       
		SpecialPowerTemplate      = SpecialAbilityWizEntWave
		UpdateModuleStartsAttack  = Yes
		StartsPaused		  	  = Yes
		InitiateSound				= GaladrielTerribleFuryMS  ;ElrondVoiceAttack
	End
      End
      AddModule
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_WordWeaponFireUpdate   
		SpecialPowerTemplate    = SpecialAbilityWizEntWave
		WhichSpecialWeapon		= 1
		SkipContinue			= Yes
		UnpackTime              = 1400 
		PackTime                = 1		
		FreezeAfterTriggerDuration = 2500
		AwardXPForTriggering    = 0		
		StartAbilityRange		= 80.0
		SpecialWeapon			= WizEntWaveWeapon
	End
      End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Blade Master, aka grow fast thingy
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

	AddModule
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_AragornBladeMasterEnabler
		SpecialPowerTemplate = SpecialAbilityWizardEntBladeMaster
		TriggeredBy = Upgrade_AragornBladeMaster
	End
	End

	AddModule
  	Behavior = SpecialPowerModule ModuleTag_AragornBladeMasterStarter                ; SpecialAbility is a SpecialPower, SpecialPower is anyting special
		SpecialPowerTemplate    = SpecialAbilityWizardEntBladeMaster
		StartsPaused			= Yes
		TriggerFX                  = FX_WizardEntSprout
	End
	End

	AddModule
	Behavior = HeroModeSpecialAbilityUpdate ModuleTag_AragornBladeMasterUpdate   ; So the difference in SpecialAbility is that it takes timing from this Update, instead of simply firing.
		SpecialPowerTemplate    = SpecialAbilityWizardEntBladeMaster
		HeroAttributeModifier	= WizardEntBladeMaster
		HeroEffectDuration		= 30000 ; this should sync with the auto ability delay re-fire time in commandButtons.ini
		UnpackTime              = 1 ; insant unpack
		TriggerSound			= SpellElvenWood
	End
	End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

	WeaponSet
		Conditions          = None
		Weapon              = PRIMARY	MagicEntPunch  ;RohanTreeBeardPunch
	End

	WeaponSet
		Conditions          = WEAPONSET_HERO_MODE
		Weapon              = PRIMARY	HeroModeMagicEntPunch
	End

	ReplaceModule ModuleTag_DRAW
	Draw = W3DScriptedModelDraw ModuleTag_011
	
	StaticModelLODMode = Yes

	WadingParticleSys = EntRipples
	WadingParticleSys = EntSplash

	  OkToChangeModelColor = Yes
	  ExtraPublicBone = IMPACT

		DefaultModelConditionState
			Model               = RUEntAsh_SKN
			Skeleton			      = RUEntAsh_SKL
			WeaponLaunchBone    = PRIMARY Firepoint
			;ParticleSysBone     = NDEX_1_L MagicEntLeft FollowBone:yes
			;ParticleSysBone     = NDEX_1_R MagicEntRight FollowBone:yes
		End

		ModelConditionState = WEAPONSET_HERO_MODE
			ParticleSysBone     = NDEX_1_L MagicEntLeft FollowBone:yes
			ParticleSysBone     = NDEX_1_R MagicEntRight FollowBone:yes
			ParticleSysBone = BAT_FOOT_R WizardEntBladeMasterRight FollowBone:Yes
			ParticleSysBone = BAT_FOOT_L WizardEntBladeMaster FollowBone:Yes
			ParticleSysBone = BAT_PELVIS WizardEntBladeMasterMiddle FollowBone:Yes
		End
		
		;---------------------------------Burned model
   		ModelConditionState	 = WADING AFLAME
   			Model               = RUEntAshD_SKN
   			Skeleton            = RUEntAsh_SKL
			ParticleSysBone     = BAT_HEAD TreebeardSteam FollowBone:yes
			ParticleSysBone     = BAT_SPINE1 TreebeardSteam FollowBone:yes
			ParticleSysBone     = BAT_PELVIS TreebeardSteam1 FollowBone:yes
			ParticleSysBone     = BAT_CALFR TreebeardSteam FollowBone:yes
			ParticleSysBone     = B_POINT1L TrBrdWaterDrips FollowBone:yes
			ParticleSysBone     = B_POINT1R TrBrdWaterDrips FollowBone:yes
			ParticleSysBone     = B_THUMB1L TrBrdWaterDrips FollowBone:yes
			ParticleSysBone     = B_THUMB1R TrBrdWaterDrips FollowBone:yes
;			ParticleSysBone     = BAT_SPINE1 TrBrdWaterRipples FollowBone:no
;			ParticleSysBone     = BAT_SPINE1 TrBrdWaterRipples FollowBone:no
;			ParticleSysBone     = BAT_SPINE1 TrBrdWaterSplash2 FollowBone:yes
;			ParticleSysBone     = BAT_SPINE1 TrBrdWaterSplash2 FollowBone:yes
;			ParticleSysBone     = BAT_HANDR TrBrdWaterSplash2 FollowBone:yes
;			ParticleSysBone     = BAT_HANDL TrBrdWaterSplash2 FollowBone:yes
;			ParticleSysBone     = BAT_SPINE1 TrBrdWaterSplash3 FollowBone:yes
;			ParticleSysBone     = BAT_SPINE1 TrBrdWaterSplash3 FollowBone:yes
;			ParticleSysBone     = BAT_SPINE1 TrBrdWaterSplash4 FollowBone:yes


   		End
		

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

   		ModelConditionState   = BURNED
   			Model               = RUEntAshD_SKN
   			Skeleton            = RUEntAsh_SKL
   		End
   		
   		ModelConditionState   = BURNT_MODEL DYING
   			Model               = RUEntAshD_SKN
   			Skeleton            = RUEntAsh_SKL
   		End
   		
   		ModelConditionState   = BURNT_MODEL
   			Model               = RUEntAshD_SKN
   			Skeleton            = RUEntAsh_SKL
			

	;Final Fire
			
			ParticleSysBone     = BAT_HEAD TreebeardFire FollowBone:yes FXTrigger:NONE Persist:SPAWN
			ParticleSysBone     = BAT_HEAD TreebeardSmoke FollowBone:yes FXTrigger:NONE Persist:SPAWN

			ParticleSysBone     = BAT_SPINE1 TreebeardFire FollowBone:yes FXTrigger:NONE Persist:SPAWN

			ParticleSysBone     = BAT_PELVIS TreebeardFire FollowBone:yes FXTrigger:NONE Persist:SPAWN
			ParticleSysBone     = BAT_PELVIS TreebeardEmbers FollowBone:yes FXTrigger:NONE Persist:SPAWN
			ParticleSysBone     = BAT_PELVIS TreebeardFlare FollowBone:yes FXTrigger:NONE Persist:SPAWN

			ParticleSysBone     = BAT_CALFR TreebeardFire FollowBone:yes FXTrigger:NONE Persist:SPAWN

			ParticleSysBone     = BAT_HANDR TreebeardFire FollowBone:yes FXTrigger:NONE Persist:SPAWN
			ParticleSysBone     = BAT_HANDL TreebeardFire FollowBone:yes FXTrigger:NONE Persist:SPAWN


   		End
   		
 		
   		
		IdleAnimationState
			Animation = IDLA 
				AnimationName = RUEntAsh_IDLA ; Stand and breathe
				AnimationBlendTime  = 5
			End
			StateName = Idle
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.875 then CurDrawableSetTransitionAnimState("TRANS_Stop00") return end
				if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.625 then CurDrawableSetTransitionAnimState("TRANS_Stop75") return end
				if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.375 then CurDrawableSetTransitionAnimState("TRANS_Stop50") return end
				if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.125 then CurDrawableSetTransitionAnimState("TRANS_Stop25") return end
				if Prev == "Moving" then CurDrawableSetTransitionAnimState("TRANS_Stop00") return end
                if Prev == "STATE_JustBuilt" then CurDrawableSetTransitionAnimState("TRANS_Sprout") end
			EndScript			
            ParticleSysBone     = BAT_SPINE1 TreeBeardIdleLeaves FollowBone: no
		End

		; -------- DEBATE ANIMS ---------------
		AnimationState   = JUST_BUILT
			StateName		= STATE_JustBuilt
			Animation = Sprout
				AnimationName = RUEntAsh_MOTA  ;sprout animation
				AnimationMode = MANUAL ;; hold first frame
				AnimationBlendTime = 0
			End
		End
		
		
		AnimationState		= PREPARING
			StateName			= STATE_Debate
			Animation           = Debate
				AnimationName     = RUEntAsh_MOTB  ;debate animations
				AnimationMode      = LOOP
				AnimationBlendTime = 30
				AnimationSpeedFactorRange = 0.8 1.1
			End
			Flags               = RANDOMSTART
			
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_JustBuilt" then CurDrawableSetTransitionAnimState("TRANS_Sprout") end
			EndScript			
		End
		TransitionState   = TRANS_Sprout
			Animation = Sprout
				AnimationName = RUEntAsh_MOTA  ; sprout animation
				AnimationMode = ONCE
				AnimationBlendTime = 0
			End
			
						FXEvent	= Frame:25 Name:FX_EntSprout	
						FXEvent = Frame:25 Name:FX_EntSproutButterflies
		End



		
		;------ Stunned anims

		AnimationState        = STUNNED_FLAILING
			Animation           = StunFlail
				AnimationName     = RUEntAsh_FLYA
				AnimationMode      = LOOP
			End
			Flags               = RANDOMSTART
		End

		AnimationState        = STUNNED
			Animation           = Stun
				AnimationName     = RUEntAsh_LNDA
				AnimationMode      = ONCE
			End
				ParticleSysBone = BAT_SPINE1 TreebeardSplatDust1 FollowBone:Yes
		End

		AnimationState        = STUNNED_STANDING_UP
			Animation           = Stun
				AnimationName     = RUEntAsh_GTPA
				AnimationMode      = ONCE
			End
		End

		
		AnimationState        = DYING BURNINGDEATH
			Animation
				AnimationName     = RUEntAsh_DIEA
				AnimationMode      = ONCE
				AnimationBlendTime = 10
			End
		End

		;-------------------------------------- AFLAME states
		AnimationState        = AFLAME DYING SPLATTED
			Animation           = DieSplat
				AnimationName     = RUEntAsh_LNDA
				AnimationMode      = ONCE
			End
				ParticleSysBone = BAT_SPINE1 TreebeardSplatDust1 FollowBone:Yes
		End

		AnimationState        = AFLAME DYING
			Animation           = Die
				AnimationName     = RUEntAsh_DIEA
				AnimationMode      = ONCE
			End
			ParticleSysBone = BAT_SPINE1 TreebeardSplatDust FollowBone:Yes
		End
		
		AnimationState        = BURNINGDEATH
			Animation
				AnimationName     = RUEntAsh_MFDA
				AnimationMode      = LOOP
				Distance			= 100
			End
		End

		AnimationState        = USER_3 ;Panic prior to run. Used by FlammableUpdate
			Animation           = OnFire
				AnimationName     = RUEntAsh_RCTA			; Hey, if you ever update this guy, please note that this is the one filename difference.  It is _RCTD on the others.
				AnimationMode      = ONCE
				AnimationBlendTime = 20
			End
				FXEvent	= Frame:54 FireWhenSkipped Name:FX_EntRightFootStep	
		End


		AnimationState        = FIRING_OR_PREATTACK_C AFLAME
			Animation           = Attack
				AnimationName     = RUEntAsh_ATKC
				AnimationMode       = ONCE
				AnimationBlendTime = 0
				UseWeaponTiming		= Yes
			End
		End
	
		;-------------------------------------------------- Attack states
		AnimationState        = FIRING_OR_PREATTACK_A AIM_NEAR
			Animation       = CloseRock
				AnimationName     = RUEntAsh_THRB  ;RUEntAsh_THRC
				AnimationMode       = ONCE
				UseWeaponTiming		= Yes
;				AnimationBlendTime  = 5
				UseWeaponTiming		= Yes
			End
;			Animation           = Punch
;				AnimationName     = RUEntAsh_ATKA 
;				AnimationMode       = ONCE
;;				AnimationBlendTime = 5
;				UseWeaponTiming		= Yes
;			End
;			Animation           = Punt
;				AnimationName     = RUEntAsh_ATKD 
;				AnimationMode       = ONCE
;;				AnimationBlendTime = 5
;				UseWeaponTiming		= Yes
;			End

			FrameForPristineBonePositions = 39
			ParticleSysBone     = ParticleNode01 TreeBeardAttackLeavesFir
			ParticleSysBone     = NDEX_1_L MagicEntLeft FollowBone:yes
			ParticleSysBone     = NDEX_1_R MagicEntRight FollowBone:yes
		End

		AnimationState        = FIRING_OR_PREATTACK_A
			Animation       = FarRock
				AnimationName     = RUEntAsh_THRB  ;RUEntAsh_ATKA  ;RUEntAsh_THRB
				AnimationMode       = ONCE
				UseWeaponTiming		= Yes
				AnimationBlendTime  = 0
				AnimationPriority	= 2
				AnimationSpeedFactorRange = 1.6 1.6
			End
			Animation           = Punch
				AnimationName     = RUEntAsh_ATKA 
				AnimationMode       = ONCE
				AnimationBlendTime = 5
				UseWeaponTiming		= Yes
				AnimationPriority	= 3
				AnimationSpeedFactorRange = 0.9 0.9
			End

			FrameForPristineBonePositions = 39
			ParticleSysBone     = ParticleNode01 TreeBeardAttackLeavesFir
			ParticleSysBone     = NDEX_1_L MagicEntLeft FollowBone:yes
			ParticleSysBone     = NDEX_1_R MagicEntRight FollowBone:yes
		End

		AnimationState        = FIRING_OR_PREATTACK_B 
			Animation           = Punch
				AnimationName     = RUEntAsh_ATKA 
				AnimationMode       = ONCE
				AnimationBlendTime = 5
				UseWeaponTiming		= Yes
			End
			Animation           = Punt
				AnimationName     = RUEntAsh_ATKD 
				AnimationMode       = ONCE
				AnimationBlendTime = 5
				UseWeaponTiming		= Yes
			End
			Animation           = ShoulderBlock
				AnimationName     = RUEntAsh_ATKE 
				AnimationMode       = ONCE
				AnimationBlendTime = 5
				UseWeaponTiming		= Yes
			End
			BeginScript
				if CurDrawableIsCurrentTargetKindof("MONSTER") then
					return ("ShoulderBlock")
				else
					if GetClientRandomNumberReal(0,1) > 0.50 then
						return ("Punch")
					else
						return ("Punt")
					end
				end
			EndScript
		End
	
		AnimationState        = FIRING_OR_PREATTACK_C 
			Animation           = ShoulderBlockForBuilding
				AnimationName     = RUEntAsh_ATKE 
				AnimationMode       = ONCE
				AnimationBlendTime = 5
				UseWeaponTiming		= Yes
			End
			ParticleSysBone     = ParticleNode01 TreeBeardAttackLeavesFir
		End
	
;-----------------------
; Enraged is before Aflame, because if he can't find water to run too, he gets pissed instead of panicky.

;-----------------------

		
		AnimationState        = DYING SPLATTED
			Animation           = DieSplat
				AnimationName     = RUEntAsh_LNDA
				AnimationMode      = ONCE
			End
				;ParticleSysBone = BAT_SPINE1 TreebeardSplatDust1 FollowBone:Yes
		End

		AnimationState        = DYING
			Animation           = Die
				AnimationName     = RUEntAsh_DIEA
				AnimationMode      = ONCE
			End
			;ParticleSysBone = BAT_SPINE1 TreebeardSplatDust FollowBone:Yes
		End

		AnimationState        = PACKING
			Animation           = Pack
				AnimationName     = RUEntAsh_GRC2
				AnimationMode      = ONCE
			End
		End

		AnimationState        = UNPACKING
			Animation           = Pack
				AnimationName     = RUEntAsh_GRC1
				AnimationMode      = ONCE
			End
		End

		; --------- Moving anims.

		AnimationState				= TURN_RIGHT
			StateName				= Turn
			Animation				= Walk
				AnimationName		= RUEntAsh_TRNR 
				AnimationMode		= LOOP
			End
		End
		
		AnimationState				= TURN_LEFT
			StateName				= Turn
			Animation				= Walk
				AnimationName		= RUEntAsh_TRNL 
				AnimationMode		= LOOP
			End
		End
	
		AnimationState				= MOVING
			StateName				= Moving
			Animation				= Walk
				AnimationName		= RUEntAsh_WLKA 
				Distance			= 40  ;48.0
				AnimationMode		= LOOP
				AnimationBlendTime	= 5
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Accelerate") end
				if Prev == "Turn" then CurDrawableSetTransitionAnimState("TRANS_Accelerate") end
			EndScript			
			Flags = MAINTAIN_FRAME_ACROSS_STATES
			FXEvent	= Frame:0 FireWhenSkipped Name:FX_AshEntLeftFootStep
			FXEvent	= Frame:41 FireWhenSkipped Name:FX_AshEntRightFootStep
		End

		TransitionState = TRANS_Accelerate
			Animation = Transition
				AnimationName = RUEntAsh_ACLA
				AnimationMode = ONCE
				AnimationSpeedFactorRange 0.75 0.75
				AnimationBlendTime = 5
			End
		End

		TransitionState = TRANS_Stop75
			Animation = Transition
				AnimationName = RUEntAsh_DCLC
				AnimationMode = ONCE
				AnimationSpeedFactorRange 0.66 0.66
				AnimationBlendTime = 5
			End
		End

		TransitionState = TRANS_Stop50
			Animation = Transition
				AnimationName = RUEntAsh_DCLB
				AnimationMode = ONCE
				AnimationSpeedFactorRange 0.66 0.66
				AnimationBlendTime = 5
			End
		End

		TransitionState = TRANS_Stop25
			Animation = Transition
				AnimationName = RUEntAsh_DCLD
				AnimationMode = ONCE
				AnimationSpeedFactorRange 0.66 0.66
				AnimationBlendTime = 5
			End
		End

		TransitionState = TRANS_Stop00
			Animation = Transition
				AnimationName = RUEntAsh_DCLA
				AnimationMode = ONCE
				AnimationSpeedFactorRange 0.66 0.66
				AnimationBlendTime = 5
			End
		End
	End
	End
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
; ENTS	
;Reference: Birch/FirEntsRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Ent Armor
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
Armor NewEntArmor
  Armor = DEFAULT        50%    ;this sets the level for all nonspecified damage types
  Armor = CRUSH           1%    ;horseman damage
  Armor = SLASH          50%    ;1%	 ;soldier damage
  Armor = PIERCE          1%    ;archer damage
  Armor = FLAME         200%    ;fire damage
  Armor = SIEGE         150%    ;siege damage
  Armor = STRUCTURAL    75%    ;Structural damage (Ent rocks)
  Armor = SPECIALIST    100%    ;
  Armor = CHOP          500%    ;axe damage
  Armor = HERO          150%    ;hero damage
  Armor = HERO_RANGED     15%    ;Hero bow damage
  Armor = MAGIC         150%    ;hero damage
  
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
; All Ents base off this one ent.
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Object RohanGenericEnt

	BuildCost = 1500				
	BuildTime = 70
	BountyValue = 300		

End


Object RohanEntBase

	BountyValue = 300	

	WeaponSet
		Conditions          = None
		Weapon              = PRIMARY	RohanTreeBeardPunch
		Weapon              = SECONDARY	RohanBuildingTeardown
		OnlyAgainst         = SECONDARY	STRUCTURE BLOCKING_GATE
	End

	WeaponSet
		Conditions          = WEAPONSET_TOGGLE_1
		Weapon              = PRIMARY		RohanEntRockThrow
	End

	ArmorSet
		Conditions      = None
		Armor           = NewEntArmor
		DamageFX        = EntDamageFX
	End
	
	ReplaceModule ModuleTag_02
	Body = ActiveBody ModuleTag_021
		CheerRadius 			= EMOTION_CHEER_RADIUS
		MaxHealth         		= 1000
		BurningDeathBehavior	= Yes
	End
	End

	LocomotorSet
		Locomotor = RohanTreeBeardLocomotor
		Condition = SET_NORMAL
		Speed     = 25
	End

	LocomotorSet
		Locomotor = RohanTreeBeardLocomotor
		Condition = SET_ENRAGED
		Speed     = 25
	End

End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Rohan Ent Birch
;Reference: RohanEntBirchRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
; Birch Ents Are slower but have more health.

Locomotor RohanEntBirchLocomotor
	Surfaces                = GROUND
	TurnTime                = 7000
	TurnTimeDamaged         = 7000
	TurnThreshold           = 20		 ; If we are turning more than 5 degrees, we set the turning modelconditions		
	TurnThresholdHS         = 140	 ; If we are moving at speed, and the turn is less than this, we do a high speed turn.		
	EnableHighSpeedTurnModelconditions = Yes ; We only want turning model conditions for slow turns.  High speed turns just use the Moving animation. 
	SlowTurnRadius		    = 1.0 ;  From a standing starts, 0 foot radius.
	FastTurnRadius		    = 1.0 ; Once the catapult gets moving, still uses a 30 foot radius to turn.
	Acceleration			= 200  ; 1 second to accelerate to full speed.
	Braking					= 200  ; 1 second to brake from full speed.
	MinTurnSpeed            = 0%
	ZAxisBehavior           = NO_Z_MOTIVE_FORCE
	Appearance              = HUGE_TWO_LEGS
	StickToGround           = Yes       ; walking guys aren't allowed to catch huge (or even small) air.
	MaxOverlappedHeight     = 1 ; Just goes through things, doesn't even notice them.
End

Locomotor RohanEntFirLocomotor
	Surfaces                = GROUND
	TurnTime                = 5000
	TurnTimeDamaged         = 5000
	TurnThreshold           = 20		 ; If we are turning more than 5 degrees, we set the turning modelconditions		
	TurnThresholdHS         = 140	 ; If we are moving at speed, and the turn is less than this, we do a high speed turn.		
	EnableHighSpeedTurnModelconditions = No ; We only want turning model conditions for slow turns.  High speed turns just use the Moving animation. 
	SlowTurnRadius		    = 10.0 ;  From a standing starts, 0 foot radius.
	FastTurnRadius		    = 40.0 ; Once the catapult gets moving, still uses a 30 foot radius to turn.
	Acceleration			= 200  ; 1 second to accelerate to full speed.
	Braking					= 200  ; 1 second to brake from full speed.
	MinTurnSpeed            = 0%
	ZAxisBehavior           = NO_Z_MOTIVE_FORCE
	Appearance              = HUGE_TWO_LEGS
	StickToGround           = Yes       ; walking guys aren't allowed to catch huge (or even small) air.
	MaxOverlappedHeight     = 1 ; Just goes through things, doesn't even notice them.
End

ChildObject RohanEntBirch RohanEntBase

	BountyValue = 300	


	AddModule
	Behavior = GrantUpgradeCreate ModuleTag_1
		UpgradeToGrant = Upgrade_GandalfWhite  ;
	End 
	End

	AddModule
	Behavior = SubObjectsUpgrade Body_zdhzd
		TriggeredBy			   = Upgrade_GandalfWhite
		UpgradeTexture		   = ruentbirch.tga	0 ruentash_d.tga  ;ruentbirch_d.tga  ;ruentash_d.tga
		RecolorHouse		   = No
	End
	End

; This will make birch come back as they took it out! the losers.

	ReplaceModule ModuleTag_01
	Draw = W3DScriptedModelDraw ModuleTag_011
	
		StaticModelLODMode = Yes
		WadingParticleSys = EntRipples
		WadingParticleSys = EntSplash

		OkToChangeModelColor = Yes
	
		ExtraPublicBone = B_POINT1R
		ExtraPublicBone = PASSENGER
		ExtraPublicBone = IMPACT
		ExtraPublicBone = ROCK

		DefaultModelConditionState
			Model               = RUEntBirch_SKN  ;RUEntFir_SKN
			Skeleton			= RUTreeberd_SKL
			WeaponLaunchBone    = PRIMARY Firepoint
			WeaponLaunchBone    = SECONDARY Firepoint

			ParticleSysBone     = BAT_SPINE1 TreeBeardIdleLeaves FollowBone: no
   		End

 		ModelConditionState = AFLAME
			Model               = RUEntBirch_SKN  ;RUEntFir_SKN
			Skeleton			= RUTreeberd_SKL

			ParticleSysBone     = BAT_HEAD TreebeardFire FollowBone:yes FXTrigger:NONE Persist:SPAWN
  			ParticleSysBone     = BAT_HEAD TreebeardSmoke FollowBone:yes FXTrigger:NONE Persist:SPAWN
 			ParticleSysBone     = BAT_SPINE1 TreebeardFire FollowBone:yes FXTrigger:NONE Persist:SPAWN
  			ParticleSysBone     = BAT_PELVIS TreebeardFire FollowBone:yes FXTrigger:NONE Persist:SPAWN
 			ParticleSysBone     = BAT_PELVIS TreebeardEmbers FollowBone:yes FXTrigger:NONE Persist:SPAWN
 			ParticleSysBone     = BAT_PELVIS TreebeardFlare FollowBone:yes FXTrigger:NONE Persist:SPAWN
   		End



; Imported By Final.big,
 		   		
		IdleAnimationState
			StateName = Idle
			Animation = IDLA 
				AnimationName = RUTreeberd_IDLA ; Stand and breathe
				AnimationBlendTime  = 50
			End

			BeginScript
				CurDrawableHideSubObjectPermanently("ROCK")
	
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.875 then CurDrawableSetTransitionAnimState("TRANS_Stop00") return end
				if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.625 then CurDrawableSetTransitionAnimState("TRANS_Stop75") return end
				if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.375 then CurDrawableSetTransitionAnimState("TRANS_Stop50") return end
				if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.125 then CurDrawableSetTransitionAnimState("TRANS_Stop25") return end
				if Prev == "Moving" then CurDrawableSetTransitionAnimState("TRANS_Stop00") return end
                if Prev == "STATE_JustBuilt" then CurDrawableSetTransitionAnimState("TRANS_Sprout") end
			EndScript			
            ParticleSysBone     = BAT_SPINE1 TreeBeardIdleLeaves FollowBone: no
		End

		AnimationState = DYING BURNINGDEATH
			Animation
				AnimationName = RUTreeberd_DIEA
				AnimationMode = ONCE
				AnimationBlendTime = 10
			End
			Animation
				AnimationName = RUTreeberd_DIE
				AnimationMode = ONCE
				AnimationBlendTime = 20
			End
		End

		AnimationState = DYING DEATH_2				; fading out.
			Animation = Die
				AnimationName = RUTreeberd_IDLA
				AnimationMode = ONCE
			End
		End

		AnimationState = DYING WEAPONSET_TOGGLE_1
			Animation = Die
				AnimationName = RUTreeberd_DIEB
				AnimationMode = ONCE
			End
			ParticleSysBone = BAT_SPINE1 TreebeardSplatDust FollowBone:Yes
		End

		AnimationState = DYING
			Animation = Die
				AnimationName = RUTreeberd_DIEA
				AnimationMode = ONCE
			End
			ParticleSysBone = BAT_SPINE1 TreebeardSplatDust FollowBone:Yes
		End

		AnimationState			= BURNINGDEATH
			Animation
				AnimationName	= RUTreeberd_MFDA
				AnimationMode	= LOOP
				Distance		= 100
			End
			BeginScript
				CurDrawableHideSubObjectPermanently("ROCK")
			EndScript			
		End

		; -------- DEBATE ANIMS ---------------
		AnimationState   = JUST_BUILT
			StateName		= STATE_JustBuilt
			Animation = Sprout
				AnimationName = RUTreeberd_MOTC  ;sprout animation
				AnimationMode = ONCE    ;MANUAL ;; hold first frame
				AnimationBlendTime = 0
				AnimationSpeedFactorRange = 0.5 0.5
			End
			BeginScript
				CurDrawableShowSubObjectPermanently("ROCK")
			EndScript
			FXEvent	= Frame:25 Name:FX_EntSprout	
			FXEvent = Frame:25 Name:FX_EntSproutButterflies
		End

		;------ Stunned anims

		AnimationState        = STUNNED_FLAILING
			Animation           = StunFlail
				AnimationName     = RUTreeberd_FLYA
				AnimationMode      = LOOP
			End
			Flags               = RANDOMSTART
		End

		AnimationState        = STUNNED
			Animation           = Stun
				AnimationName     = RUTreeberd_LNDA
				AnimationMode      = ONCE
			End
			ParticleSysBone = BAT_SPINE1 TreebeardSplatDust1 FollowBone:Yes
		End

		AnimationState        = STUNNED_STANDING_UP
			Animation           = Stun
				AnimationName     = RUTreeberd_GTPA
				AnimationMode      = ONCE
			End
		End

		
		;-------------------------------------- AFLAME states
		AnimationState = AFLAME DYING SPLATTED
			Animation = DieSplat
				AnimationName = RUTreeberd_LNDA
				AnimationMode = ONCE
			End
			ParticleSysBone = BAT_SPINE1 TreebeardSplatDust1 FollowBone:Yes
		End

		AnimationState = AFLAME DYING
			Animation = Die
				AnimationName = RUTreeberd_DIEA
				AnimationMode = ONCE
			End
			ParticleSysBone = BAT_SPINE1 TreebeardSplatDust FollowBone:Yes
		End
		
		AnimationState = USER_3 ;Panic prior to run. Used by FlammableUpdate
			Animation = OnFire
				AnimationName = RUTreeberd_RCTD
				AnimationMode = ONCE
				AnimationBlendTime = 20
			End
			FXEvent	= Frame:54 Name:FX_EntRightFootStep	
		End


		;--------------------------------------------------
		;
		;	ROCK THROWING; WEAPONSET_TOGGLE_1
		;
		;-------------------------------------------------- 
		AnimationState = RELOADING_A WEAPONSET_TOGGLE_1
			Animation
				AnimationName		= RUTreeberd_GRBA
				AnimationMode		= ONCE
				AnimationBlendTime	= 0	; Need this so the rock doesn't blend and slide.
			End
			FXEvent	= Frame:20	Name: FX_EntRockGrab
			FXEvent	= Frame:24	Name: FX_EntRockYank			
			BeginScript
				CurDrawableShowSubObjectPermanently("ROCK")
			EndScript
		End
		
		AnimationState = FIRING_OR_PREATTACK_A AIM_NEAR WEAPONSET_TOGGLE_1				; Throw rock at feet
			Animation = CloseRock
				AnimationName		= RUTreeberd_THRC
				AnimationMode		= ONCE
				UseWeaponTiming		= Yes
				;AnimationBlendTime = 0
			End

			FrameForPristineBonePositions = 39
		End

		AnimationState = FIRING_OR_PREATTACK_A WEAPONSET_TOGGLE_1						; Throw rock at far target
			Animation = FarRock
				AnimationName		= RUTreeberd_THRB
				AnimationMode		= ONCE
				UseWeaponTiming		= Yes
				;AnimationBlendTime = 0
			End

			FrameForPristineBonePositions = 40
		End


		;--------------------------------------------------
		;
		;	HAND ATTACKS
		;
		;-------------------------------------------------- 

		AnimationState = MOVING FIRING_OR_PREATTACK_A WEAPONSET_ENRAGED
			Animation = RunAndFire
				AnimationName       = RUTreeberd_ATRB
				AnimationMode       = LOOP
			End
		End

		AnimationState = MOVING FIRING_OR_PREATTACK_A
			Animation = RunAndFire
				AnimationName       = RUTreeberd_ATRA
				AnimationMode       = LOOP
			End
		End
		
		AnimationState = FIRING_OR_PREATTACK_A
			Animation = Punch
				AnimationName		= RUTreeberd_ATKA 
				AnimationMode		= ONCE
				AnimationBlendTime	= 5
				UseWeaponTiming		= Yes
			End
			Animation = Punt
				AnimationName		= RUTreeberd_ATKD 
				AnimationMode		= ONCE
				AnimationBlendTime	= 5
				UseWeaponTiming		= Yes
			End
			Animation = FrontKick
				AnimationName		= RUTreeberd_ATKE 
				AnimationMode		= ONCE
				AnimationBlendTime	= 5
				UseWeaponTiming		= Yes
			End
			Animation = KirkPunch
				AnimationName		= RUTreeberd_ATKF 
				AnimationMode		= ONCE
				AnimationBlendTime	= 5
				UseWeaponTiming		= Yes
			End
			BeginScript
				if CurDrawableIsCurrentTargetKindof("MONSTER") then
					if GetClientRandomNumberReal(0,1) > 0.50 then
						return ("FrontKick")
					else
						return ("KirkPunch")
					end
				else
					if GetClientRandomNumberReal(0,1) > 0.50 then
						return ("Punch")
					else
						return ("Punt")
					end
				end
			EndScript
		End
	
		AnimationState = FIRING_OR_PREATTACK_B
			Animation = FrontKickOnBuilding
				AnimationName		= RUTreeberd_ATKE 
				AnimationMode		= ONCE
				AnimationBlendTime	= 5
				UseWeaponTiming		= Yes
			End
			Animation = KirkPunchOnBuilding
				AnimationName		= RUTreeberd_ATKF 
				AnimationMode		= ONCE
				AnimationBlendTime	= 5
				UseWeaponTiming		= Yes
			End
		End

		AnimationState				= INITIAL_ENRAGED
			StateName				= Enraged
			Animation				= RUTreeBerd_MADA
				AnimationName		= RUTreeBerd_MADA 
				AnimationMode		= ONCE
			End
		End

;-----------------------
; Enraged movement is before Aflame, because if he can't find water to run too, he gets pissed instead of panicky.
		AnimationState        = WEAPONSET_ENRAGED TURN_LEFT
			Animation           = Walk
				AnimationName     = RUTreeberd_TNL2 
				AnimationMode     = LOOP
				AnimationSpeedFactorRange = 1.1 1.1
			End
		End

		AnimationState        = WEAPONSET_ENRAGED TURN_RIGHT
			Animation           = Walk
				AnimationName     = RUTreeberd_TNR2 
				AnimationMode     = LOOP
				AnimationSpeedFactorRange = 1.1 1.1
			End
		End

		AnimationState        = WEAPONSET_ENRAGED MOVING
			Animation           = AngryStompWalk
				AnimationName     = RUTreeberd_WLKC 
				AnimationMode      = LOOP
				AnimationBlendTime  = 5
				Distance			= 50
			End
			Flags = MAINTAIN_FRAME_ACROSS_STATES
			FXEvent	= Frame:0 Name:FX_EntLeftFootStep
			FXEvent	= Frame:26 Name:FX_EntRightFootStep
		End
;-----------------------
		
		AnimationState = DYING SPLATTED
			Animation = DieSplat
				AnimationName	= RUTreeberd_LNDA
				AnimationMode	= ONCE
			End
			ParticleSysBone = BAT_SPINE1 TreebeardSplatDust1 FollowBone:Yes
		End

		AnimationState = DYING SPLATTED
			Animation = DieSplat
				AnimationName	= RUTreeberd_LNDA
				AnimationMode	= ONCE
			End
			ParticleSysBone = BAT_SPINE1 TreebeardSplatDust1 FollowBone:Yes
		End

		AnimationState = PACKING GRAB_BUILDING_CHUNK
			Animation = Pack
				AnimationName		= RUTreeberd_GBB2
				AnimationMode		= ONCE
				AnimationBlendTime	= 0		;We need to go instantly from unpacking to packing.
			End
		End

		AnimationState = UNPACKING GRAB_BUILDING_CHUNK
			Animation = Pack
				AnimationName		= RUTreeberd_GBB1
				AnimationMode		= ONCE
				AnimationBlendTime	= 20		
			End
			ParticleSysBone = ParticleNode01 TreeBeardAttackLeavesFir
		End

		AnimationState = PACKING
			Animation = Pack
				AnimationName	= RUTreeberd_GBA2
				AnimationMode	= ONCE
			End
		End

		AnimationState = UNPACKING
			Animation = Pack
				AnimationName	= RUTreeberd_GBA1
				AnimationMode	= ONCE
			End
		End

		; --------- Moving anims.
		
		AnimationState				= TURN_RIGHT WEAPONSET_TOGGLE_1
			StateName				= Turn
			Animation
				AnimationName		= RUTreeberd_TNR2
				AnimationMode		= LOOP
				AnimationSpeedFactorRange = 1.1 1.1
			End
		End

		AnimationState				= TURN_LEFT WEAPONSET_TOGGLE_1
			StateName				= Turn
			Animation
				AnimationName		= RUTreeberd_TNL2
				AnimationMode		= LOOP
				AnimationSpeedFactorRange = 1.1 1.1
			End
		End

		AnimationState				= MOVING WEAPONSET_TOGGLE_1
			StateName				= Moving
			Animation = WLKB
				AnimationName		= RUTreeberd_WLKB ;E
				Distance			= 50
				AnimationMode		= LOOP
				AnimationBlendTime	= 5
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_AccelerateR") end
				if Prev == "Turn" then CurDrawableSetTransitionAnimState("TRANS_AccelerateR") end
			EndScript
			Flags = MAINTAIN_FRAME_ACROSS_STATES
			FXEvent	= Frame:0 Name:FX_EntLeftFootStep
			FXEvent	= Frame:26 Name:FX_EntRightFootStep
		End


		AnimationState				= TURN_RIGHT
			StateName				= Turn
			Animation				= Walk
				AnimationName		= RUTreeberd_TRNR 
				AnimationMode		= LOOP
			End
		End
		
		AnimationState				= TURN_LEFT
			StateName				= Turn
			Animation				= Walk
				AnimationName		= RUTreeberd_TRNL 
				AnimationMode		= LOOP
			End
		End
		
		AnimationState = MOVING PANICKING
			Animation = Jump
				AnimationName				= RUTreeberd_MFDA 
				AnimationMode				= LOOP
				AnimationSpeedFactorRange	= 0.5 0.5
				AnimationBlendTime			= 5
				Distance					= 50
			End
			BeginScript
				CurDrawableHideSubObjectPermanently("ROCK")
			EndScript
			FXEvent	= Frame:4 Name:FX_EntLeftFootStep
			FXEvent	= Frame:18 Name:FX_EntRightFootStep
		End
	
		AnimationState				= MOVING
			StateName				= Moving
			Animation				= Walk
				AnimationName		= RUTreeberd_WLKA  ;C 
				Distance			= 50
				AnimationMode		= LOOP
				AnimationBlendTime	= 5
			End
			BeginScript
				CurDrawableHideSubObjectPermanently("ROCK")
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Accelerate") end
				if Prev == "Turn" then CurDrawableSetTransitionAnimState("TRANS_Accelerate") end
			EndScript			
			Flags = MAINTAIN_FRAME_ACROSS_STATES
			FXEvent	= Frame:0 Name:FX_EntLeftFootStep
			FXEvent	= Frame:39 Name:FX_EntRightFootStep
			FXEvent	= Frame:79 Name:FX_EntLeftFootStep
			FXEvent	= Frame:129 Name:FX_EntRightFootStep
		End


		AnimationState						= HIT_REACTION HIT_LEVEL_1 WEAPONSET_TOGGLE_1
			Animation						= Hit_Level_1_a
				AnimationName				= RUTreeberd_HITB
				AnimationMode				= ONCE
			End
		End
		
		AnimationState						= HIT_REACTION HIT_LEVEL_1
			Animation						= Hit_Level_1_a
				AnimationName				= RUTreeberd_HITA
				AnimationMode				= ONCE
			End
		End
		
		AnimationState						= WEAPONSET_TOGGLE_1			; Idle, holding rock.
			StateName						= Idle
			Animation
				AnimationName				= RUTreeberd_IDLB
				AnimationMode				= LOOP
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_JustBuilt" then CurDrawableShowSubObjectPermanently("ROCK") return end	; This is for the initial rock turn on.
				if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.875 then CurDrawableSetTransitionAnimState("TRANS_Stop00R") return end
				if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.625 then CurDrawableSetTransitionAnimState("TRANS_Stop75R") return end
				if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.375 then CurDrawableSetTransitionAnimState("TRANS_Stop50R") return end
				if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.125 then CurDrawableSetTransitionAnimState("TRANS_Stop25R") return end
				if Prev == "Moving" then CurDrawableSetTransitionAnimState("TRANS_Stop00R") return end
			EndScript			
			ParticleSysBone     = BAT_SPINE1 TreeBeardIdleLeaves FollowBone: no
		End
		
		AnimationState						= WEAPONSET_ENRAGED
			Animation						= AngryIdle
				AnimationName				= RUTreeberd_IDLC
				AnimationMode				= LOOP
			End
		End
		
		
		

	
		TransitionState = TRANS_Accelerate
			Animation = Transition
				AnimationName		= RUTreeberd_ACLA
				AnimationMode		= ONCE
				AnimationBlendTime	= 5
;				AnimationSpeedFactorRange 0.75 0.75
			End
		End

		TransitionState = TRANS_Stop75
			Animation = Transition
				AnimationName		= RUTreeberd_DCLC
				AnimationMode		= ONCE
				AnimationBlendTime	= 5
;				AnimationSpeedFactorRange 0.66 0.66
			End
		End

		TransitionState = TRANS_Stop50
			Animation = Transition
				AnimationName		= RUTreeberd_DCLB
				AnimationMode		= ONCE
				AnimationBlendTime	= 5
;				AnimationSpeedFactorRange 0.66 0.66
			End
		End

		TransitionState = TRANS_Stop25
			Animation = Transition
				AnimationName		= RUTreeberd_DCLD
				AnimationMode		= ONCE
				AnimationBlendTime	= 5
;				AnimationSpeedFactorRange 0.66 0.66
			End
		End

		TransitionState = TRANS_Stop00
			Animation = Transition
				AnimationName		= RUTreeberd_DCLA
				AnimationMode		= ONCE
				AnimationBlendTime	= 5
;				AnimationSpeedFactorRange 0.66 0.66
			End
		End
		
		; Rock holding versions-------------------------------
		
		TransitionState = TRANS_AccelerateR
			Animation = Transition
				AnimationName		= RUTreeberd_ACLB
				AnimationMode		= ONCE
				AnimationBlendTime	= 5
				;AnimationSpeedFactorRange 0.75 0.75
			End
		End
		
		TransitionState = TRANS_Stop75R
			Animation
				AnimationName		= RUTreeberd_DCLG
				AnimationMode		= ONCE
				AnimationBlendTime	= 5
				;AnimationSpeedFactorRange 0.66 0.66
			End
		End

		TransitionState = TRANS_Stop50R
			Animation
				AnimationName		= RUTreeberd_DCLF
				AnimationMode		= ONCE
				AnimationBlendTime	= 5
				;AnimationSpeedFactorRange 0.66 0.66
			End
		End

		TransitionState = TRANS_Stop25R
			Animation
				AnimationName		= RUTreeberd_DCLH
				AnimationMode		= ONCE
				AnimationBlendTime	= 5
				;AnimationSpeedFactorRange 0.66 0.66
			End
		End

		TransitionState = TRANS_Stop00R
			Animation
				AnimationName		= RUTreeberd_DCLE
				AnimationMode		= ONCE
				AnimationBlendTime	= 5
				;AnimationSpeedFactorRange 0.66 0.66
			End
		End


	End
	End


	Scale = 1.1


	ReplaceModule ModuleTag_02
	Body = ActiveBody ModuleTag_021
		CheerRadius 			= EMOTION_CHEER_RADIUS
		MaxHealth         		= 5000 ;ROHAN_ENT_HEALTH
		BurningDeathBehavior	= Yes
	End
	End

	AddModule 
	Behavior = AutoHealBehavior ModuleTag_EntHealing
		StartsActive = Yes
		HealingAmount = 50
		HealingDelay = 1000
		StartHealingDelay = 10000 ; faster start rate then the fir but slower heal rate
		HealOnlyIfNotInCombat = Yes
	End
	End

	ArmorSet
		Conditions      = None
		Armor           = NewEntArmor
		DamageFX        = EntDamageFX
	End

	LocomotorSet
		Locomotor = RohanEntBirchLocomotor  ;RohanTreeBeardFastTurnLocomotor  ;RohanTreeBeardLocomotor
		Condition = SET_NORMAL
		Speed     = 20
	End

	LocomotorSet
		Locomotor = RohanEntBirchLocomotor  ;	RohanTreeBeardFastTurnLocomotor  ;RohanTreeBeardLocomotor
		Condition = SET_ENRAGED
		Speed     = 20
	End
End

Object RohanTreeBerd

	LocomotorSet
		Locomotor = RohanTreeBeardLocomotor
		Condition = SET_ENRAGED
		Speed     = 50
	End

	LocomotorSet
		Locomotor = RohanTreeBeardFastTurnLocomotor
		Condition = SET_PANIC
		Speed	  = 50
	End

End


;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Rohan Ent Fir
;Reference: RohanEntFirRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Fir Ents Have less health but they are much faster

ChildObject RohanEntFir RohanEntBase

	BountyValue = 300	

	ReplaceModule ModuleTag_01
	Draw = W3DScriptedModelDraw ModuleTag_011
	
		StaticModelLODMode = Yes
		WadingParticleSys = EntRipples
		WadingParticleSys = EntSplash

		OkToChangeModelColor = Yes
	
		ExtraPublicBone = B_POINT1R
		ExtraPublicBone = PASSENGER
		ExtraPublicBone = IMPACT
		ExtraPublicBone = ROCK

		DefaultModelConditionState
			Model               = RUEntFir_SKN
			Skeleton			= RUTreeberd_SKL
			WeaponLaunchBone    = PRIMARY Firepoint
			WeaponLaunchBone    = SECONDARY Firepoint

			ParticleSysBone     = BAT_SPINE1 TreeBeardIdleLeaves FollowBone: no
   		End

 		ModelConditionState = AFLAME
			Model               = RUEntFir_SKN
			Skeleton			= RUTreeberd_SKL

			ParticleSysBone     = BAT_HEAD TreebeardFire FollowBone:yes FXTrigger:NONE Persist:SPAWN
  			ParticleSysBone     = BAT_HEAD TreebeardSmoke FollowBone:yes FXTrigger:NONE Persist:SPAWN
 			ParticleSysBone     = BAT_SPINE1 TreebeardFire FollowBone:yes FXTrigger:NONE Persist:SPAWN
  			ParticleSysBone     = BAT_PELVIS TreebeardFire FollowBone:yes FXTrigger:NONE Persist:SPAWN
 			ParticleSysBone     = BAT_PELVIS TreebeardEmbers FollowBone:yes FXTrigger:NONE Persist:SPAWN
 			ParticleSysBone     = BAT_PELVIS TreebeardFlare FollowBone:yes FXTrigger:NONE Persist:SPAWN
   		End


; Imported By Final.big,
 		   		
		IdleAnimationState
			StateName = Idle
			Animation = IDLA 
				AnimationName = RUTreeberd_IDLA ; Stand and breathe
				AnimationBlendTime  = 5
			End
			BeginScript
				CurDrawableHideSubObjectPermanently("ROCK")
	
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.875 then CurDrawableSetTransitionAnimState("TRANS_Stop00") return end
				if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.625 then CurDrawableSetTransitionAnimState("TRANS_Stop75") return end
				if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.375 then CurDrawableSetTransitionAnimState("TRANS_Stop50") return end
				if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.125 then CurDrawableSetTransitionAnimState("TRANS_Stop25") return end
				if Prev == "Moving" then CurDrawableSetTransitionAnimState("TRANS_Stop00") return end
                if Prev == "STATE_JustBuilt" then CurDrawableSetTransitionAnimState("TRANS_Sprout") end
			EndScript			
            ParticleSysBone     = BAT_SPINE1 TreeBeardIdleLeaves FollowBone: no
		End

		AnimationState = DYING BURNINGDEATH
			Animation
				AnimationName = RUTreeberd_DIEA
				AnimationMode = ONCE
				AnimationBlendTime = 10
			End
			Animation
				AnimationName = RUTreeberd_DIE
				AnimationMode = ONCE
				AnimationBlendTime = 20
			End
		End

		AnimationState = DYING DEATH_2				; fading out.
			Animation = Die
				AnimationName = RUTreeberd_IDLA
				AnimationMode = ONCE
			End
		End

		AnimationState = DYING WEAPONSET_TOGGLE_1
			Animation = Die
				AnimationName = RUTreeberd_DIEB
				AnimationMode = ONCE
			End
			ParticleSysBone = BAT_SPINE1 TreebeardSplatDust FollowBone:Yes
		End

		AnimationState = DYING
			Animation = Die
				AnimationName = RUTreeberd_DIEA
				AnimationMode = ONCE
			End
			ParticleSysBone = BAT_SPINE1 TreebeardSplatDust FollowBone:Yes
		End

		AnimationState			= BURNINGDEATH
			Animation
				AnimationName	= RUTreeberd_MFDA
				AnimationMode	= LOOP
				Distance		= 100
			End
			BeginScript
				CurDrawableHideSubObjectPermanently("ROCK")
			EndScript			
		End

		; -------- DEBATE ANIMS ---------------
		AnimationState   = JUST_BUILT
			StateName		= STATE_JustBuilt
			Animation = Sprout
				AnimationName = RUTreeberd_MOTC  ;sprout animation
				AnimationMode = ONCE    ;MANUAL ;; hold first frame
				AnimationBlendTime = 0
				AnimationSpeedFactorRange = 0.5 0.5
			End
			BeginScript
				CurDrawableShowSubObjectPermanently("ROCK")
			EndScript
			FXEvent	= Frame:25 Name:FX_EntSprout	
			FXEvent = Frame:25 Name:FX_EntSproutButterflies
		End

		;------ Stunned anims

		AnimationState        = STUNNED_FLAILING
			Animation           = StunFlail
				AnimationName     = RUTreeberd_FLYA
				AnimationMode      = LOOP
			End
			Flags               = RANDOMSTART
		End

		AnimationState        = STUNNED
			Animation           = Stun
				AnimationName     = RUTreeberd_LNDA
				AnimationMode      = ONCE
			End
			ParticleSysBone = BAT_SPINE1 TreebeardSplatDust1 FollowBone:Yes
		End

		AnimationState        = STUNNED_STANDING_UP
			Animation           = Stun
				AnimationName     = RUTreeberd_GTPA
				AnimationMode      = ONCE
			End
		End

		
		;-------------------------------------- AFLAME states
		AnimationState = AFLAME DYING SPLATTED
			Animation = DieSplat
				AnimationName = RUTreeberd_LNDA
				AnimationMode = ONCE
			End
			ParticleSysBone = BAT_SPINE1 TreebeardSplatDust1 FollowBone:Yes
		End

		AnimationState = AFLAME DYING
			Animation = Die
				AnimationName = RUTreeberd_DIEA
				AnimationMode = ONCE
			End
			ParticleSysBone = BAT_SPINE1 TreebeardSplatDust FollowBone:Yes
		End
		
		AnimationState = USER_3 ;Panic prior to run. Used by FlammableUpdate
			Animation = OnFire
				AnimationName = RUTreeberd_RCTD
				AnimationMode = ONCE
				AnimationBlendTime = 20
			End
			FXEvent	= Frame:54 Name:FX_EntRightFootStep	
		End


		;--------------------------------------------------
		;
		;	ROCK THROWING; WEAPONSET_TOGGLE_1
		;
		;-------------------------------------------------- 
		AnimationState = RELOADING_A WEAPONSET_TOGGLE_1
			Animation
				AnimationName		= RUTreeberd_GRBA
				AnimationMode		= ONCE
				AnimationBlendTime	= 0	; Need this so the rock doesn't blend and slide.
			End
			FXEvent	= Frame:20	Name: FX_EntRockGrab
			FXEvent	= Frame:24	Name: FX_EntRockYank			
			BeginScript
				CurDrawableShowSubObjectPermanently("ROCK")
			EndScript
		End
		
		AnimationState = FIRING_OR_PREATTACK_A AIM_NEAR WEAPONSET_TOGGLE_1				; Throw rock at feet
			Animation = CloseRock
				AnimationName		= RUTreeberd_THRC
				AnimationMode		= ONCE
				UseWeaponTiming		= Yes
				;AnimationBlendTime = 0
			End

			FrameForPristineBonePositions = 39
		End

		AnimationState = FIRING_OR_PREATTACK_A WEAPONSET_TOGGLE_1						; Throw rock at far target
			Animation = FarRock
				AnimationName		= RUTreeberd_THRB
				AnimationMode		= ONCE
				UseWeaponTiming		= Yes
				;AnimationBlendTime = 0
			End

			FrameForPristineBonePositions = 40
		End


		;--------------------------------------------------
		;
		;	HAND ATTACKS
		;
		;-------------------------------------------------- 

		AnimationState = MOVING FIRING_OR_PREATTACK_A WEAPONSET_ENRAGED
			Animation = RunAndFire
				AnimationName       = RUTreeberd_ATRB
				AnimationMode       = LOOP
			End
		End

		AnimationState = MOVING FIRING_OR_PREATTACK_A
			Animation = RunAndFire
				AnimationName       = RUTreeberd_ATRA
				AnimationMode       = LOOP
			End
		End
		
		AnimationState = FIRING_OR_PREATTACK_A
			Animation = Punch
				AnimationName		= RUTreeberd_ATKA 
				AnimationMode		= ONCE
				AnimationBlendTime	= 5
				UseWeaponTiming		= Yes
			End
			Animation = Punt
				AnimationName		= RUTreeberd_ATKD 
				AnimationMode		= ONCE
				AnimationBlendTime	= 5
				UseWeaponTiming		= Yes
			End
			Animation = FrontKick
				AnimationName		= RUTreeberd_ATKE 
				AnimationMode		= ONCE
				AnimationBlendTime	= 5
				UseWeaponTiming		= Yes
			End
			Animation = KirkPunch
				AnimationName		= RUTreeberd_ATKF 
				AnimationMode		= ONCE
				AnimationBlendTime	= 5
				UseWeaponTiming		= Yes
			End
			BeginScript
				if CurDrawableIsCurrentTargetKindof("MONSTER") then
					if GetClientRandomNumberReal(0,1) > 0.50 then
						return ("FrontKick")
					else
						return ("KirkPunch")
					end
				else
					if GetClientRandomNumberReal(0,1) > 0.50 then
						return ("Punch")
					else
						return ("Punt")
					end
				end
			EndScript
		End
	
		AnimationState = FIRING_OR_PREATTACK_B
			Animation = FrontKickOnBuilding
				AnimationName		= RUTreeberd_ATKE 
				AnimationMode		= ONCE
				AnimationBlendTime	= 5
				UseWeaponTiming		= Yes
			End
			Animation = KirkPunchOnBuilding
				AnimationName		= RUTreeberd_ATKF 
				AnimationMode		= ONCE
				AnimationBlendTime	= 5
				UseWeaponTiming		= Yes
			End
		End

		AnimationState				= INITIAL_ENRAGED
			StateName				= Enraged
			Animation				= RUTreeBerd_MADA
				AnimationName		= RUTreeBerd_MADA 
				AnimationMode		= ONCE
			End
		End

;-----------------------
; Enraged movement is before Aflame, because if he can't find water to run too, he gets pissed instead of panicky.
		AnimationState        = WEAPONSET_ENRAGED TURN_LEFT
			Animation           = Walk
				AnimationName     = RUTreeberd_TNL2 
				AnimationMode     = LOOP
				AnimationSpeedFactorRange = 1.1 1.1
			End
		End

		AnimationState        = WEAPONSET_ENRAGED TURN_RIGHT
			Animation           = Walk
				AnimationName     = RUTreeberd_TNR2 
				AnimationMode     = LOOP
				AnimationSpeedFactorRange = 1.1 1.1
			End
		End

		AnimationState        = WEAPONSET_ENRAGED MOVING
			Animation           = AngryStompWalk
				AnimationName     = RUTreeberd_WLKC 
				AnimationMode      = LOOP
				AnimationBlendTime  = 5
				Distance			= 50
			End
			Flags = MAINTAIN_FRAME_ACROSS_STATES
			FXEvent	= Frame:0 Name:FX_EntLeftFootStep
			FXEvent	= Frame:26 Name:FX_EntRightFootStep
		End
;-----------------------
		
		AnimationState = DYING SPLATTED
			Animation = DieSplat
				AnimationName	= RUTreeberd_LNDA
				AnimationMode	= ONCE
			End
			ParticleSysBone = BAT_SPINE1 TreebeardSplatDust1 FollowBone:Yes
		End

		AnimationState = DYING SPLATTED
			Animation = DieSplat
				AnimationName	= RUTreeberd_LNDA
				AnimationMode	= ONCE
			End
			ParticleSysBone = BAT_SPINE1 TreebeardSplatDust1 FollowBone:Yes
		End

		AnimationState = PACKING GRAB_BUILDING_CHUNK
			Animation = Pack
				AnimationName		= RUTreeberd_GBB2
				AnimationMode		= ONCE
				AnimationBlendTime	= 0		;We need to go instantly from unpacking to packing.
			End
		End

		AnimationState = UNPACKING GRAB_BUILDING_CHUNK
			Animation = Pack
				AnimationName		= RUTreeberd_GBB1
				AnimationMode		= ONCE
				AnimationBlendTime	= 20		
			End
			ParticleSysBone = ParticleNode01 TreeBeardAttackLeavesFir
		End

		AnimationState = PACKING
			Animation = Pack
				AnimationName	= RUTreeberd_GBA2
				AnimationMode	= ONCE
			End
		End

		AnimationState = UNPACKING
			Animation = Pack
				AnimationName	= RUTreeberd_GBA1
				AnimationMode	= ONCE
			End
		End

		; --------- Moving anims.
		
		AnimationState				= TURN_RIGHT WEAPONSET_TOGGLE_1
			StateName				= Turn
			Animation
				AnimationName		= RUTreeberd_TNR2
				AnimationMode		= LOOP
				AnimationSpeedFactorRange = 1.1 1.1
			End
		End

		AnimationState				= TURN_LEFT WEAPONSET_TOGGLE_1
			StateName				= Turn
			Animation
				AnimationName		= RUTreeberd_TNL2
				AnimationMode		= LOOP
				AnimationSpeedFactorRange = 1.1 1.1
			End
		End

		AnimationState				= MOVING WEAPONSET_TOGGLE_1
			StateName				= Moving
			Animation = WLKB
				AnimationName		= RUTreeberd_WLKB ;E
				Distance			= 50
				AnimationMode		= LOOP
				AnimationBlendTime	= 5
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_AccelerateR") end
				if Prev == "Turn" then CurDrawableSetTransitionAnimState("TRANS_AccelerateR") end
			EndScript
			Flags = MAINTAIN_FRAME_ACROSS_STATES
			FXEvent	= Frame:0 Name:FX_EntLeftFootStep
			FXEvent	= Frame:26 Name:FX_EntRightFootStep
		End


		AnimationState				= TURN_RIGHT
			StateName				= Turn
			Animation				= Walk
				AnimationName		= RUTreeberd_TRNR 
				AnimationMode		= LOOP
			End
		End
		
		AnimationState				= TURN_LEFT
			StateName				= Turn
			Animation				= Walk
				AnimationName		= RUTreeberd_TRNL 
				AnimationMode		= LOOP
			End
		End
		
		AnimationState = MOVING PANICKING
			Animation = Jump
				AnimationName				= RUTreeberd_MFDA 
				AnimationMode				= LOOP
				AnimationSpeedFactorRange	= 0.5 0.5
				AnimationBlendTime			= 5
				Distance					= 50
			End
			BeginScript
				CurDrawableHideSubObjectPermanently("ROCK")
			EndScript
			FXEvent	= Frame:4 Name:FX_EntLeftFootStep
			FXEvent	= Frame:18 Name:FX_EntRightFootStep
		End
	
		AnimationState				= MOVING
			StateName				= Moving
			Animation				= Walk
				AnimationName		= RUTreeberd_WLKA  ;C 
				Distance			= 50
				AnimationMode		= LOOP
				AnimationBlendTime	= 5
			End
			BeginScript
				CurDrawableHideSubObjectPermanently("ROCK")
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Accelerate") end
				if Prev == "Turn" then CurDrawableSetTransitionAnimState("TRANS_Accelerate") end
			EndScript			
			Flags = MAINTAIN_FRAME_ACROSS_STATES
			FXEvent	= Frame:0 Name:FX_EntLeftFootStep
			FXEvent	= Frame:39 Name:FX_EntRightFootStep
			FXEvent	= Frame:79 Name:FX_EntLeftFootStep
			FXEvent	= Frame:129 Name:FX_EntRightFootStep
		End


		AnimationState						= HIT_REACTION HIT_LEVEL_1 WEAPONSET_TOGGLE_1
			Animation						= Hit_Level_1_a
				AnimationName				= RUTreeberd_HITB
				AnimationMode				= ONCE
			End
		End
		
		AnimationState						= HIT_REACTION HIT_LEVEL_1
			Animation						= Hit_Level_1_a
				AnimationName				= RUTreeberd_HITA
				AnimationMode				= ONCE
			End
		End
		
		AnimationState						= WEAPONSET_TOGGLE_1			; Idle, holding rock.
			StateName						= Idle
			Animation
				AnimationName				= RUTreeberd_IDLB
				AnimationMode				= LOOP
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_JustBuilt" then CurDrawableShowSubObjectPermanently("ROCK") return end	; This is for the initial rock turn on.
				if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.875 then CurDrawableSetTransitionAnimState("TRANS_Stop00R") return end
				if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.625 then CurDrawableSetTransitionAnimState("TRANS_Stop75R") return end
				if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.375 then CurDrawableSetTransitionAnimState("TRANS_Stop50R") return end
				if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.125 then CurDrawableSetTransitionAnimState("TRANS_Stop25R") return end
				if Prev == "Moving" then CurDrawableSetTransitionAnimState("TRANS_Stop00R") return end
			EndScript			
			ParticleSysBone     = BAT_SPINE1 TreeBeardIdleLeaves FollowBone: no
		End
		
		AnimationState						= WEAPONSET_ENRAGED
			Animation						= AngryIdle
				AnimationName				= RUTreeberd_IDLC
				AnimationMode				= LOOP
			End
		End
		
		
		

	
		TransitionState = TRANS_Accelerate
			Animation = Transition
				AnimationName		= RUTreeberd_ACLA
				AnimationMode		= ONCE
				AnimationBlendTime	= 5
;				AnimationSpeedFactorRange 0.75 0.75
			End
		End

		TransitionState = TRANS_Stop75
			Animation = Transition
				AnimationName		= RUTreeberd_DCLC
				AnimationMode		= ONCE
				AnimationBlendTime	= 5
;				AnimationSpeedFactorRange 0.66 0.66
			End
		End

		TransitionState = TRANS_Stop50
			Animation = Transition
				AnimationName		= RUTreeberd_DCLB
				AnimationMode		= ONCE
				AnimationBlendTime	= 5
;				AnimationSpeedFactorRange 0.66 0.66
			End
		End

		TransitionState = TRANS_Stop25
			Animation = Transition
				AnimationName		= RUTreeberd_DCLD
				AnimationMode		= ONCE
				AnimationBlendTime	= 5
;				AnimationSpeedFactorRange 0.66 0.66
			End
		End

		TransitionState = TRANS_Stop00
			Animation = Transition
				AnimationName		= RUTreeberd_DCLA
				AnimationMode		= ONCE
				AnimationBlendTime	= 5
;				AnimationSpeedFactorRange 0.66 0.66
			End
		End
		
		; Rock holding versions-------------------------------
		
		TransitionState = TRANS_AccelerateR
			Animation = Transition
				AnimationName		= RUTreeberd_ACLB
				AnimationMode		= ONCE
				AnimationBlendTime	= 5
				;AnimationSpeedFactorRange 0.75 0.75
			End
		End
		
		TransitionState = TRANS_Stop75R
			Animation
				AnimationName		= RUTreeberd_DCLG
				AnimationMode		= ONCE
				AnimationBlendTime	= 5
				;AnimationSpeedFactorRange 0.66 0.66
			End
		End

		TransitionState = TRANS_Stop50R
			Animation
				AnimationName		= RUTreeberd_DCLF
				AnimationMode		= ONCE
				AnimationBlendTime	= 5
				;AnimationSpeedFactorRange 0.66 0.66
			End
		End

		TransitionState = TRANS_Stop25R
			Animation
				AnimationName		= RUTreeberd_DCLH
				AnimationMode		= ONCE
				AnimationBlendTime	= 5
				;AnimationSpeedFactorRange 0.66 0.66
			End
		End

		TransitionState = TRANS_Stop00R
			Animation
				AnimationName		= RUTreeberd_DCLE
				AnimationMode		= ONCE
				AnimationBlendTime	= 5
				;AnimationSpeedFactorRange 0.66 0.66
			End
		End


	End
	End



	AddModule
	Behavior = GrantUpgradeCreate ModuleTag_1
		UpgradeToGrant = Upgrade_GandalfWhite  ;
	End 
	End

	AddModule
	Behavior = SubObjectsUpgrade Body_zdhzd
		TriggeredBy			   = Upgrade_GandalfWhite
		UpgradeTexture		   = ruentfir.tga	0 ruentfir_d.tga  ;ruentash_d.tga
		RecolorHouse		   = No
	End
	End


	CrusherLevel		= 1
	UseCrushAttack		= No				; Don't attack using crush, just crush when you walk through. 

	CrushKnockback = 30  ; how hard we knock back crushed units.
	CrushZFactor = 1.0  ; How much we knock upwards.


	ReplaceModule ModuleTag_02
	Body = ActiveBody ModuleTag_021
		CheerRadius 			= EMOTION_CHEER_RADIUS
		MaxHealth         		= 3500 ;ROHAN_ENT_HEALTH
		BurningDeathBehavior	= Yes
	End
	End

	AddModule 
	Behavior = AutoHealBehavior ModuleTag_EntHealing
		StartsActive = Yes
		HealingAmount = 80 ; a little more heal rate then a Birch
		HealingDelay = 1000
		StartHealingDelay = 20000 ; slower then the birch but faster heal rate.
		HealOnlyIfNotInCombat = Yes
	End
	End

	ArmorSet
		Conditions      = None
		Armor           = NewEntArmor
		DamageFX        = EntDamageFX
	End

	LocomotorSet
		Locomotor = RohanEntBirchLocomotor  ;RohanTreeBeardLocomotor
		Condition = SET_NORMAL
		Speed     = 35
	End

	LocomotorSet
		Locomotor = RohanEntBirchLocomotor   ;RohanTreeBeardLocomotor
		Condition = SET_ENRAGED
		Speed     = 35
	End
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Elven Archers
;Reference: ElvenArchersRef
;I will mostly change the armor, horde speed.
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Armor
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

; this means if they arnt upgraded almost anything will kill it 1 shot.
Armor NewLorienArcherArmor
  Armor = DEFAULT         150%   ; Archer 100% ; Gondor 100%
  Armor = SLASH           300%   ; Archer 400% ; Gondor 200%
  Armor = PIERCE          50%   ; Archer 100% ; Gondor  80%
  Armor = SPECIALIST       200%   ;
  Armor = CRUSH           200%   ; Archer 200% ; Gondor 100%
  Armor = SIEGE           200%   ;
  Armor = FLAME           200%   ;
  Armor = MAGIC           200%   ;
  Armor = HERO            200%   ;
  Armor = HERO_RANGED     200%   ; 
  Armor = CAVALRY	  200%  
  Armor = STRUCTURAL	  200%	
  FlankedPenalty 	 = 50%      
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

;about 2 shots or slashes and one of these guys are dead.
Armor NewLorienArcherHeavyArmor
  Armor = DEFAULT             100% ;
  Armor = SLASH              200% ;
  Armor = PIERCE              20% ;
  Armor = SPECIALIST          100% ;
  Armor = CRUSH              100%  ;
  Armor = SIEGE               180% ;
  Armor = FLAME               150% ;
  Armor = MAGIC               150% ;
  Armor = HERO                150% ;
  Armor = HERO_RANGED         150% ;
  Armor = CAVALRY		150%
  Armor = STRUCTURAL	  100%	
  FlankedPenalty 	 = 50%    
End


;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;The Archer Horde Object
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Object ElvenLorienArcherHorde


	LocomotorSet
		Locomotor     = NormalMeleeHordeLocomotor
		Condition     = SET_NORMAL
		Speed         = 45 ;NORMAL_ELVEN_FAST_HORDE_SPEED	; 65	
	End
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Lorien Archer Object
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Object ElvenLorienArcher

	LocomotorSet
		Locomotor = HumanLocomotor
		Condition = SET_NORMAL 
		Speed     = 50 ; 60
	End

	ArmorSet
		Conditions      = None
		Armor           = NewLorienArcherArmor
		DamageFX        = NormalDamageFX
	End

	ArmorSet
		Conditions      = PLAYER_UPGRADE
		Armor           = NewLorienArcherHeavyArmor
		DamageFX        = NormalDamageFX
	End


End


;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Rohan Elven Worriors Horde
;Reference: RohanElvenWorriorsHordeRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Weapons
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
Weapon ElvenArcherMissileHordeRangefinder
	AttackRange			= 300 ;250.0 ; Slightly shorter than the archer's actual weapon

	RangeBonusMinHeight		= 10
	RangeBonus			= 1
	RangeBonusPerFoot		= #MULTIPLY( GONDOR_RANGER_RANGE .01 ) ; attempting to match the % vision increase on the units vision range. 

	DelayBetweenShots		= 1000
	LeechRangeWeapon		= Yes
	AcceptableAimDelta		= 45
	AntiAirborneVehicle		= Yes
	AntiAirborneMonster		= Yes
	FinishAttackOnceStarted = No
	HordeAttackNugget
	End
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;CommandSet
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

CommandButton Command_MithlondSentryPorcupineFormation  ;Command_MordorEasterlingPorcupineFormation
	Command			= HORDE_TOGGLE_FORMATION	;;Tower Guard
	Options			= TOGGLE_IMAGE_ON_FORMATION OK_FOR_MULTI_SELECT
	ButtonImage             = UCCommon_PorcupineFormation UCCommon_PorcupineFormationOff
	ButtonBorderType        = ACTION 
	TextLabel               = CONTROLBAR:ToggleElvenWarriorHordeFormation	CONTROLBAR:ToggleLineFormation
	DescriptLabel           = CONTROLBAR:ToolTipToggleElvenWarriorHordeFormation	CONTROLBAR:ToolTipToggleTowerGuardPorcupineToLineFormation
	InPalantir		= Yes
	DoubleClick		= Yes
	;UnitSpecificSound	= ElvenWarriorVoiceMove
	UnitSpecificSound	= WeaponSwitchBowForHordes WeaponSwitchBowForHordes
End

CommandSet NewRohanElvenWarriorHordeCommandSet
	1 	= Command_ToggleStance
	2 	= Command_ToggleElvenWarriorWeapon
	3 	= Command_MithlondSentryPorcupineFormation   ;Command_MordorEasterlingPorcupineFormation
	4 	= Command_PurchaseUpgradeElvenHeavyArmor
	5	= Command_PurchaseUpgradeElvenForgedBlades
	13 	= Command_AttackMove
	14 	= Command_Stop
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Object Modules.
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

;ChildObject LAGondorFighterHorde RohanElvenWarriorHorde
ChildObject DwarvenAxeThrowerHorde_Summoned RohanElvenWarriorHorde

;	RemoveModule ModuleTag_MPLevelBonus


	; This is required for garrisoned objects - please put in all objects.
	ButtonImage 	       = BEElvenBarracks_LorienWarrior
	SelectPortrait         = UPElven_LorienWarrior

	ReplaceModule ModuleTag_W3DModelDraw
	Draw = W3DScriptedModelDraw ModuleTag_W3DModelDraw1
	    DependencySharedModelFlags = EMOTION_ALERT EMOTION_MORALE_HIGH EMOTION_MORALE_LOW EMOTION_AFRAID EMOTION_COWER SELECTED EMOTION_TERROR
		DefaultModelConditionState
			Model = None ;InvisHrdeTmp5x2
		End
		ModelConditionState = HORDE_EMPTY
			Model = None
		End		
		ModelConditionState = WORLD_BUILDER
			Model = HordeTemp_5By2
		End
	End
	End
	
	Side = Elves  ;Obsolete
	EditorSorting = UNIT
	EmotionRange = 340
	DisplayName = OBJECT:HordeRohanElves
	
	WeaponSet
		Conditions = None 
		Weapon = PRIMARY    ElvenArcherMissileHordeRangefinder
	End
	WeaponSet
		Conditions = WEAPONSET_TOGGLE_1
		Weapon = PRIMARY	NormalMeleeHordeRangefinder
	End
	
	CommandSet = NewRohanElvenWarriorHordeCommandSet


 	CrushableLevel = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrusherLevel = 0

	BuildCost = 1200  ;ROHAN_ELVENWARRIOR_BUILDCOST			
	BuildTime = 30  ;ROHAN_ELVENWARRIOR_BUILDTIME			
	VisionRange = 400
	ShroudClearingRange = 661
	CommandPoints = 50

	
    TransportSlotCount = TRANSPORTSLOTCOUNT_SMALL_HORDE
	KindOf = SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT INFANTRY HORDE ARCHER ARMY_SUMMARY MELEE_HORDE LARGE_RECTANGLE_PATHFIND

;	AddModule
;	Behavior = ExperienceLevelCreate ModuleTag_MPLevelBonus
;		LevelToGrant = 2
;		MPOnly = No
;	End
;	End

	ReplaceModule ModuleTag_HordeContain
	Behavior = HordeContain ModuleTag_HordeContain1
		ObjectStatusOfContained = 
		InitialPayload = RohanElvenWarrior GOOD_MEN_HORDE_SIZE
		Slots = 10
		PassengerFilter = NONE +INFANTRY
		ShowPips = No
		ThisFormationIsTheMainFormation = Yes	;Used to determine which armorset to use (and anything else we want!)
		RandomOffset = X:0 Y:0
		
		; Banner Carrier info		
		BannerCarriersAllowed	= ElvenBanner										; types of units that are allowed as banner carriers
		BannerCarrierPosition	= UnitType:ElvenLorienArcher	Pos:X:35.0 Y:0.0	; (DEFAULT) position of banner carrier for elven warrior horde
		
		; Positions for 5
		RankInfo = RankNumber:1 UnitType:RohanElvenWarrior Position:X:15 Y:0	Position:X:15 Y:15		Position:X:15 Y:-15		Position:X:15 Y:30		Position:X:15 Y:-30		Position:X:0 Y:0		Position:X:0 Y:20		Position:X:0 Y:-20		Position:X:0 Y:40		Position:X:0 Y:-40
		
		AlternateFormation = RohanElvenWarriorHordePorcupine
		
		RanksToReleaseWhenAttacking = 1 
		MeleeAttackLeashDistance = 1   //How far the hordes	can	move from the center of	the	horde when melee attacking.				  
		BackUpMinDelayTime		 = 1	//The minimum amount of	time to	delay before backing up
		BackUpMaxDelayTime		 = 3000	//The maximum amount of	time to	delay before backing up
		BackUpMinDistance		 = 1	//The minimum number of	cells to backup
		BackUpMaxDistance		 = 3	//The maximum number of	cells to backup
		BackupPercentage		 = 80%	//The amount of	chance that	a unit will	back up.
	End
	End
	
	ReplaceModule ModuleTag_PhysicsBehavior
	Behavior = PhysicsBehavior ModuleTag_PhysicsBehavior1
		GravityMult = 0.9
	End
	End

	
	LocomotorSet
		Locomotor     = NormalMeleeHordeLocomotor
		Condition     = SET_NORMAL
		Speed         = 60  ;NORMAL_GOOD_FAST_HORDE_SPEED		
	End
	
	ReplaceModule ModuleTag_BasicTraining
	Behavior = LevelUpUpgrade ModuleTag_BasicTraining1
		TriggeredBy = Upgrade_ElvenBasicTraining  ;Upgrade_RohanBasicTraining
		LevelsToGain = 1
		LevelCap = 2
	End
	End

	ReplaceModule ModuleTag_ProductionLegality
	Behavior = StatusBitsUpgrade ModuleTag_ProductionLegality1
		TriggeredBy = Upgrade_ElvenHeavyArmor  ;Upgrade_RohanHeavyArmorForElves
	End
	End

	ReplaceModule ModuleTag_ProductionLegality2	
	Behavior = StatusBitsUpgrade ModuleTag_ProductionLegality21
		TriggeredBy = Upgrade_ElvenForgedBlades  ;Upgrade_RohanForgedBladesForElves
	End
	End
	
	Geometry = BOX
	GeometryMajorRadius = 30.0
	GeometryMinorRadius = 30.0
	GeometryHeight = 20.0
	GeometryIsSmall = No
End

ModifierList RohanElvenWarriorHordePorcupine
	Category = FORMATION
	Modifier = ARMOR 25%
	Modifier = RESIST_FEAR 75%
	Modifier = RESIST_TERROR 75%
	;Modifier = DAMAGE_MULT 100%
	Modifier = SPEED 75%
	Duration = 0			// Duration is forever when zero
End

;ChildObject EasterlingSwordHordePorcupine DwarvenAxeThrowerHorde
ChildObject RohanElvenWarriorHordePorcupine DwarvenAxeThrowerHorde_Summoned

;	// Note - for alternate formations, all info outside of the Contain Behavior module is ignored.
;	// Any modifications need to be done via the Attribute Modifiers in the contain module. 

	AddModule
	Behavior = HordeContain ModuleTag_HordeContain1
		FrontAngle = 360	//	Can't be flanked
		FlankedDelay = 2000
		ObjectStatusOfContained = 
		InitialPayload = RohanElvenWarrior GOOD_MEN_HORDE_SIZE
		Slots							= 10
		PassengerFilter					= NONE +INFANTRY
		ShowPips						= No
		ThisFormationIsTheMainFormation = No	//Used to determine which armorset to use (and anything else we want!)
		RandomOffset					= X:0 Y:0
		MeleeBehavior = Amoeba
		End
		
		RanksToReleaseWhenAttacking		= 1 2
		RanksToJustFreeWhenAttacking   = 1 2
		AttributeModifiers				= RohanElvenWarriorHordePorcupine
		IsPorcupineFormation			= No
		MinimumHordeSize				= 1

		AlternateFormation				= DwarvenAxeThrowerHorde_Summoned
		VisionRearOverride				= 100%
		VisionSideOverride				= 100%
		NotComboFormation				= Yes // this formation is not suitable for combo, so it will switch out of this when combo-ing

		; Banner Carrier info		
		BannerCarriersAllowed	= ElvenBanner										; types of units that are allowed as banner carriers
		BannerCarrierPosition	= UnitType:ElvenLorienArcher	Pos:X:0.0 Y:0.0	; (DEFAULT) position of banner carrier for elven warrior horde

		;RankInfo = RankNumber:1 UnitType:RohanElvenWarrior Position:X:15 Y:0	Position:X:15 Y:15		Position:X:15 Y:-15		Position:X:15 Y:30		Position:X:15 Y:-30		Position:X:0 Y:0		Position:X:0 Y:20		Position:X:0 Y:-20		Position:X:0 Y:40		Position:X:0 Y:-40
	
		RankInfo = RankNumber:1 UnitType:RohanElvenWarrior  Position:X:34 Y:0		Position:X:34 Y:15		Position:X:34 Y:-15		Position:X:34 Y:30		Position:X:34 Y:-30 
		RankInfo = RankNumber:2 UnitType:RohanElvenWarrior  Position:X:22 Y:0 Leader 1 0	Position:X:22 Y:15 Leader 1 1	Position:X:22 Y:-15 Leader 1 2	Position:X:22 Y:30 Leader 1 3	Position:X:22 Y:-30 Leader 1 4

		MeleeAttackLeashDistance = 1   //How far the hordes	can	move from the center of	the	horde when melee attacking.				  
		BackUpMinDelayTime		 = 1	//The minimum amount of	time to	delay before backing up
		BackUpMaxDelayTime		 = 3000	//The maximum amount of	time to	delay before backing up
		BackUpMinDistance		 = 1	//The minimum number of	cells to backup
		BackUpMaxDistance		 = 3	//The maximum number of	cells to backup
		BackupPercentage		 = 80%	//The amount of	chance that	a unit will	back up.

	End
	End

End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Elvenworrior Units, the persons in the horde.
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Weapons
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Weapon NewElvenWarriorSword 
	LeechRangeWeapon      = Yes
	AttackRange           = STANDARD_MELEE_ATTACK_RANGE
	MeleeWeapon           = Yes
	DelayBetweenShots     = 800            ; time between shots, msec
	PreAttackDelay        = 700             ; 567 is sword swing delay time before contact with target.
	PreAttackType         = PER_SHOT ; Do the delay each time we attack a new target
	FireFX                = FX_GondorSwordHit
	FireFlankFX			= FX_Flanking
	FiringDuration        = 800    ; Duration of the sword swing
	;OverrideVoiceAttackSound = ElvenWarriorVoiceAttack

	DamageNugget                        ; A basic Nugget that just does damage
	    Damage        = 75  ;ELVEN_FIGHTER_MELEE_DAMAGE
	    Radius        = 2.0
	    DelayTime     = 0
	    DamageType    = SLASH
	    DamageFXType  = SWORD_SLASH
	    DeathType     = NORMAL
	    FlankingBonus = 50%
	   	ForbiddenUpgradeNames      = Upgrade_ElvenForgedBlades
	End

	DamageNugget                        ; A basic Nugget that just does damage
		Damage        = 150  ;ELVEN_FIGHTER_MELEE_DAMAGE_UPGRADE
		Radius        = 5.0
		DelayTime     = 0
		DamageType    = SLASH
		DamageFXType  = SWORD_SLASH
		DeathType     = NORMAL
		FlankingBonus = 50%
		RequiredUpgradeNames      = Upgrade_ElvenForgedBlades
	End
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Weapon RohanElvenBow     ; BALANCE Elven warrior bow Weapon
	AttackRange         = 550 ;GONDOR_ARCHER_RANGE
	
	RangeBonusMinHeight	= 10
	RangeBonus		= 1
	RangeBonusPerFoot	= #MULTIPLY( GONDOR_ARCHER_RANGE .01 )
	
    LeechRangeWeapon    = Yes
	WeaponSpeed         = 321         ; dist/sec 
	MinWeaponSpeed      = 241
	MaxWeaponSpeed      = 481      ; dist/sec Upper limit on scaling, when attacking past nominal "max" range
	FireFX              = FX_RohanArcherBowWeapon
	ScaleWeaponSpeed    = Yes ; Used for lob weapons, scales speed proportional to range
	HitPercentage       = 100     ;When this weapon is used it will hit exactly 50% of the time.
	ScatterRadius       = 16.0     ;When this weapon misses it can randomly miss by as much as this distance.
	  
	AcceptableAimDelta	= 20	; prevent twitchy reaiming in horde on horde
	DelayBetweenShots   = 0
	PreAttackDelay      = GONDOR_ARCHER_BOW_PREATTACKDELAY  
	PreAttackRandomAmount     = 200  
	PreAttackType       = PER_POSITION
	FiringDuration      = 0
	  
	ClipSize			= 1
	AutoReloadsClip		= Yes
	AutoReloadWhenIdle	= 1	
	ClipReloadTime		= Min:GONDOR_ARCHER_BOW_RELOADTIME_MIN Max:GONDOR_ARCHER_BOW_RELOADTIME_MAX
	ContinuousFireOne	= 0
	ContinuousFireCoast	= GONDOR_ARCHER_BOW_RELOADTIME_MAX 
	  
	AntiAirborneVehicle	= Yes
	AntiAirborneMonster	= Yes
	HitPassengerPercentage	= 100%
	CanBeDodged				= Yes ; Will check for a DodgePercent on the target to have a second chance at failing HitPercent

	ProjectileNugget	; Default arrow
		ProjectileTemplateName  = GondorArcherArrow
		WarheadTemplateName     = GondorArcherBowWarhead
		ForbiddenUpgradeNames   = Upgrade_TechnologyGondorFireArrows  ;Upgrade_GondorFireArrows
	End
	ProjectileNugget	; Fire arrow available through fire upgrade
		ProjectileTemplateName  = GondorArcherFireArrow
		WarheadTemplateName     = GondorArcherBowFireWarhead
		RequiredUpgradeNames    = Upgrade_TechnologyGondorFireArrows  ;		Upgrade_GondorFireArrows
	End
End


;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Armor
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Armor RohanElvenWarriorArmor
  Armor = DEFAULT       80%     ;this sets the level for all nonspecified damage types
  Armor = CRUSH          50%     ;horseman damage
  Armor = SLASH         80%     ;soldier damage
  Armor = URUK          85%     ;Uruk + Mordor Soldier damage
  Armor = PIERCE        90%     ;archer damage
  Armor = FLAME          30%     ;
  Armor = STRUCTURAL	  100%	
  FlankedPenalty 	 = 75%  
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Armor RohanElvenWarriorHeavyArmor
  Armor = DEFAULT             40% ;sets the level for all nonspecified damage types
  Armor = CRUSH               25% ;damage
  Armor = SLASH               40% ;damage
  Armor = URUK           	40%      ;Uruk + Mordor Soldier damage
  Armor = PIERCE         45% ;damage
  Armor = FLAME           15% ;damage
  Armor = SIEGE            40% ;damage   
  Armor = STRUCTURAL    50%     ;Structural damage (Ent rocks)
  Armor = HERO           40% ;damage
  Armor = HERO_RANGED    40% ;damage
  Armor = MAGIC         40% ;damage
  FlankedPenalty 	 = 50%  
  
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Object Elven worrior aka the old elven worriors in bfme 1
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Object RohanElvenWarrior
;Object DwarvenAxeThrower_Summoned

	CrushRevengeWeapon = BasicInfantryCrushRevenge  ;SuperInfantryCrushRevenge ; This Damaged the enemy object insanly as it tried to crush it

	ButtonImage 	       = ElvenWarriorHorde1  ;BEElvenBarracks_LorienWarrior
	SelectPortrait         = ElvenWarriorHorde1  ;UPElven_LorienWarrior

	BountyValue = 25

	KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY SCORE THROWN_OBJECT PATH_THROUGH_EACH_OTHER ATTACK_NEEDS_LINE_OF_SIGHT GRAB_AND_DROP

	AddModule
	Behavior = AutoHealBehavior ModuleTag_Healing
		StartsActive = Yes
		HealingAmount = 10
		HealingDelay = 1000
		StartHealingDelay = 15000
		HealOnlyIfNotInCombat = Yes
	End
	End

	ReplaceModule ModuleTag_02
	Body = ActiveBody ModuleTag_021
		CheerRadius 	  = EMOTION_CHEER_RADIUS
		MaxHealth         = 500			;BALANCE RohanElvenWarrior
		MaxHealthDamaged  = 50		
		;RecoveryTime      = ROHAN_ELVENWARRIOR_HEALTH_RECOVERY_TIME		
	End
	End

	WeaponSet
		Conditions = None 
		Weapon = PRIMARY	RohanElvenBow
;		AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
	;bow upgrade
	WeaponSet
		Conditions = PLAYER_UPGRADE
		Weapon = PRIMARY	RohanElvenBow
;		AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
	WeaponSet
		Conditions = WEAPONSET_TOGGLE_1					; CONTESTING_BUILDING
		Weapon = PRIMARY NewElvenWarriorSword					;GondorRangerSword
;		AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
	; sword upgrade	
	WeaponSet
		Conditions = PLAYER_UPGRADE WEAPONSET_TOGGLE_1 CONTESTING_BUILDING
		Weapon = PRIMARY	NewElvenWarriorSword
;    	AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
		
	ArmorSet
		Conditions      = None
		Armor           = RohanElvenWarriorArmor
		DamageFX        = NormalDamageFX
	End

	ArmorSet
		Conditions      = PLAYER_UPGRADE
		Armor           = RohanElvenWarriorHeavyArmor
		DamageFX        = NormalDamageFX
	End

	LocomotorSet
		Locomotor = HumanLocomotor
		Condition = SET_NORMAL 
		Speed     = 65  ;NORMAL_GOOD_FAST_MEMBER_SPEED		
	End

	LocomotorSet
		Locomotor = HumanWanderLocomotor
		Condition = SET_WANDER
		Speed     = 65  ;NORMAL_GOOD_FAST_MEMBER_SPEED		
	End

	LocomotorSet
		Locomotor = HumanPanicLocomotor
		Condition = SET_PANIC
		Speed	  = 65  ;NORMAL_GOOD_FAST_MEMBER_SPEED		
	End
	
	LocomotorSet
		Locomotor = HumanScaredLocomotor
		Condition = SET_SCARED
		Speed	  = 65  ;NORMAL_GOOD_FAST_MEMBER_SPEED		
	End
	
	ReplaceModule WeaponSetUpgradeModuleTag
	Behavior = WeaponSetUpgrade WeaponSetUpgradeModuleTag1
		TriggeredBy = Upgrade_ElvenForgedBlades  ;Upgrade_RohanForgedBladesForElves
		CustomAnimAndDuration   = AnimState:USER_5 AnimTime:0 TriggerTime:0 ;set flag forever
	End
	End

	ReplaceModule Armor_Upgrade
	Behavior = SubObjectsUpgrade Armor_Upgrade1
		TriggeredBy		= Upgrade_ElvenHeavyArmor  ;Upgrade_RohanHeavyArmorForElves
		UpgradeTexture	= RUElvnWorrior.tga 0 RUElvnWorriorHA.tga
		UpgradeTexture	= RUElvnWorrior_L.tga 0 RUElvnWorriorHA.tga
		RecolorHouse	= Yes
	End
	End
	
	ReplaceModule ArmorUpgradeModuleTag
	Behavior = ArmorUpgrade ArmorUpgradeModuleTag1
		TriggeredBy = Upgrade_ElvenHeavyArmor  ;Upgrade_RohanHeavyArmorForElves
	End
	End
	
	ReplaceModule ForgedBlades_Upgrade
	Behavior = SubObjectsUpgrade ForgedBlades_Upgrade1
		TriggeredBy		= Upgrade_ElvenForgedBlades  ;Upgrade_RohanForgedBladesForElves
		ShowSubObjects	= Forged_Blade
	End
	End

	Geometry = CYLINDER
	GeometryMajorRadius = 10.0
	GeometryMinorRadius = 10.0
	GeometryHeight = 19.5
	GeometryIsSmall = Yes
	Shadow = SHADOW_DECAL
	ShadowSizeX = 14;
	ShadowSizeY = 14;
	ShadowTexture = ShadowI;


End


;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Frodo
;Reference: FrodoRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Object RohanFrodo

	BountyValue = 300	

	ReplaceModule ModuleTag_ActiveBody
	Body = ActiveBody ModuleTag_ActiveBody1
		MaxHealth         = 2000
	End
	End

	ReplaceModule ModuleTag_FrodoHealing
	Behavior = AutoHealBehavior ModuleTag_FrodoHealing1
		StartsActive = Yes
		HealingAmount = 50
		HealingDelay = 1000
		StartHealingDelay = 20000
		HealOnlyIfNotInCombat = Yes
	End
	End

	ReplaceModule ModuleTag_StingSeesOrcs
	Behavior = SpecialEnemySenseUpdate ModuleTag_StingSeesOrcs1
		SpecialEnemyFilter = ANY +ORC +URUK +MordorShelob
		ScanRange = 1000
		ScanInterval = 3000
	End
	End

	ReplaceModule ModuleTag_PhialUpdate
	Behavior = ModelConditionSpecialAbilityUpdate ModuleTag_PhialUpdate1
		SpecialPowerTemplate    = SpecialAbilityPhialOfGaladriel
		UnpackingVariation		= 1

		UnpackTime              = 2000 ; Drawing the horn
		PreparationTime         = 1   ; nothing
		PersistentPrepTime      = 600 ; Blowing
		PackTime                = 2666 ; Putting horn away

		GenerateTerror						= Yes
		GenerateUncontrollableFear			= Yes
		EmotionPulseRadius					= 175
		
		AwardXPForTriggering    = 0
		DisableWhenWearingTheRing = Yes
	End
	End

End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Sam
;Reference: SamRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Object RohanSam

	BountyValue = 200	

	ReplaceModule ModuleTag_ActiveBody
	Body = ActiveBody ModuleTag_ActiveBody1
		MaxHealth	= 1800
	End
	End

	LocomotorSet
		Locomotor = HeroHumanLocomotor
		Condition = SET_NORMAL 
		Speed = 30
	End

	;ReplaceModuleModuleTag_FrodoHealing
	AddModule
	Behavior = AutoHealBehavior ModuleTag_SamHealing1
		StartsActive = Yes
		HealingAmount = 40
		HealingDelay = 1000
		StartHealingDelay = 15000
		HealOnlyIfNotInCombat = Yes
	End
	End
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Pipin
;Reference: PipinRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Object RohanPippin

	BountyValue = 200	

	ReplaceModule ModuleTag_ActiveBody
	Body = ActiveBody ModuleTag_ActiveBody1
		MaxHealth         = 1600
	End
	End
End


;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Marry
;Reference: MarryRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Object RohanMerry

	BountyValue = 200	

	ReplaceModule ModuleTag_ActiveBody
	Body = ActiveBody ModuleTag_ActiveBody1
		MaxHealth         = 1600
	End
	End
End

;^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
;3. SPIDER REALM
;^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

CommandButton Command_ConstructWildSpiderlingHorde
	Command				= UNIT_BUILD
	Object				= WildSpiderling_Summoned  ;WildSpiderlingHordeMember  ;WildSpiderling  ;WildSpiderlingHorde
	Options				= CANCELABLE
	TextLabel			= CONTROLBAR:ConstructBlueSpider
	ButtonImage			= BWSpiderPit_Spiderling
	ButtonBorderType    = BUILD 
	DescriptLabel       = CONTROLBAR:ToolTipBuildBlueSpider
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount	= Yes      
End


;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Minor Slave Spiders
;Reference: MinorSlaveSpidersRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Object MinorSpider_Slaved

	ReplaceModule ModuleTag_Body
	Body = ActiveBody ModuleTag_Body1
		MaxHealth         = 250
		MaxHealthDamaged  = 250
		BurningDeathBehavior = Yes
		BurningDeathFX       = FX_InfantryBurningFlame
	End
	End

	ReplaceModule ModuleTag_Slave
	Behavior = SlavedUpdate ModuleTag_Slave1
		GuardMaxRange		= 350.0
		GuardWanderRange	= 200.0
		UseSlaverAsControlForEvaObjectSightedEvents = No ; It's a creep
	End
	End


End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

ChildObject MinorSpider_Slaved2 MinorSpider_Slaved

	AddModule
	Behavior = GrantUpgradeCreate ModuleTag_126247
		UpgradeToGrant = Upgrade_GandalfWhite  ;
	End 
	End

	AddModule
	Behavior = SubObjectsUpgrade Costume_56225
		TriggeredBy		= Upgrade_GandalfWhite ;
		UpgradeTexture	= mugntspdr.tga 0 MUShelobH.tga  ;mugntspdr_b.tga           ;mugntspdrbannercarrier.tga  ;mugntspdr_b.tga  ;mugntspdr.tga ;
				RecolorHouse	= No
	End
	End

	Scale = 1.1

	ReplaceModule ModuleTag_Body
	Body = ActiveBody ModuleTag_Body1
		MaxHealth         = 350
		MaxHealthDamaged  = 350
		BurningDeathBehavior = Yes
		BurningDeathFX       = FX_InfantryBurningFlame
	End
	End

	ReplaceModule ModuleTag_Slave
	Behavior = SlavedUpdate ModuleTag_Slave1
		GuardMaxRange		= 450.0
		GuardWanderRange	= 200.0
		UseSlaverAsControlForEvaObjectSightedEvents = No ; It's a creep
	End
	End

End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Weapon BabyBlueSpiderMandibles 
  LeechRangeWeapon      = Yes
  AttackRange           = 25.0
  MeleeWeapon           = Yes
  DelayBetweenShots     = 1666			; time between shots, msec
  PreAttackDelay        = 900				; 300 is mace swing delay time before contact with target.
  PreAttackType         = PER_SHOT 			; Do the delay each time we attack
  FireFX                = FX_SpiderStabHit
  FiringDuration        = 766				; Duration of the mace swing 
  RequireFollowThru	= Yes
  
  DamageNugget						; A basic Nugget that just does damage
    Damage        = 20
    Radius        = 0.0
    DelayTime     = 0
    DamageType    = HERO
    DamageFXType  = SWORD_SLASH
    DeathType     = NORMAL
    FlankingBonus = 50%
  End
  DOTNugget                        ; A basic Nugget that just does damage
	Damage        = 10
	AcceptDamageAdd = No
	Radius        = 0.0
	DelayTime     = 0
	DamageType    = POISON
	DamageFXType  = POISON
	DeathType     = NORMAL
	DamageInterval = 1000
	DamageDuration = 20000
	SpecialObjectFilter = AFFECTED_BY_POISON_OBJECTFILTER 
  End
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

ChildObject MinorSpider_Slaved3 MinorSpider_Slaved

	AddModule
	Behavior = GrantUpgradeCreate ModuleTag_126247
		UpgradeToGrant = Upgrade_GandalfWhite  ;
	End 
	End

	AddModule
	Behavior = SubObjectsUpgrade Costume_56225
		TriggeredBy		= Upgrade_GandalfWhite ;
		UpgradeTexture	= mugntspdr.tga 0 mugntspdr_b.tga  ;mugntspdr_b.tga           ;mugntspdrbannercarrier.tga  ;mugntspdr_b.tga  ;mugntspdr.tga ;
				RecolorHouse	= No
	End
	End

	WeaponSet
		Conditions			= None 
		Weapon				= PRIMARY    BabyBlueSpiderMandibles
		AutoChooseSources	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End

	Scale = 0.9

	ReplaceModule ModuleTag_Body
	Body = ActiveBody ModuleTag_Body1
		MaxHealth         = 150
		MaxHealthDamaged  = 150
		BurningDeathBehavior = Yes
		BurningDeathFX       = FX_InfantryBurningFlame
	End
	End

	ReplaceModule ModuleTag_Slave
	Behavior = SlavedUpdate ModuleTag_Slave1
		GuardMaxRange		= 350.0
		GuardWanderRange	= 120.0
		UseSlaverAsControlForEvaObjectSightedEvents = No ; It's a creep
	End
	End

End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Default Spider Horde
;Reference: DefaultSpiderHordeRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<


;Object WildSpiderlingHordeMember
ChildObject RandomSpiderling WildSpiderlingHordeMember

	Scale = 5.0

	VisionRange         = 100.0
	ShroudClearingRange = 200

	BuildCost = 30				
	BuildTime = 5
	BountyValue = 10
	CommandPoints = 3	

	BuildVariations = BlueSpiderling DarkSpiderling GoldenSpiderling BlackSpiderling

End


;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Blue Spiderling Horde
;Reference: BlueSpiderlingHordeRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

ChildObject BlueSpiderling WildSpiderling  ;WildSpiderlingHordeMember

	VisionRange         = 100.0
	ShroudClearingRange = 200


	BuildCost = 30				
	BuildTime = 3
	BountyValue = 10
	CommandPoints = 3	

	AddModule
	Behavior = GrantUpgradeCreate ModuleTag_12afokh
		UpgradeToGrant = Upgrade_GandalfWhite  ;
	End 
	End

	AddModule
	Behavior = SubObjectsUpgrade Costume_2
		TriggeredBy		= Upgrade_GandalfWhite ;
		UpgradeTexture	= mugntspdr.tga 0 mugntspdr_b.tga  ;mugntspdr_b.tga           ;mugntspdrbannercarrier.tga  ;mugntspdr_b.tga  ;mugntspdr.tga ;
				RecolorHouse	= No
	End
	End

	WeaponSet
		Conditions			= None 
		Weapon				= PRIMARY WildSpiderlingVenomMandibles
		AutoChooseSources	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End

	ReplaceModule ModuleTag_Body
	Body = ActiveBody ModuleTag_Body1
		MaxHealth 		= 500  
		MaxHealthDamaged 	= 250
		BurningDeathBehavior = Yes
		BurningDeathFX       = FX_InfantryBurningFlame
	End
	End


End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Dark Spiderling Horde
;Reference: DarkSpiderlingHordeRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

ChildObject DarkSpiderling BlueSpiderling  ;WildSpiderling  ;WildSpiderlingHordeMember

	VisionRange         = 100.0
	ShroudClearingRange = 200


	BuildCost = 30				
	BuildTime = 3
	BountyValue = 10
	CommandPoints = 3	

	AddModule
	Behavior = GrantUpgradeCreate ModuleTag_126247kjx
		UpgradeToGrant = Upgrade_GandalfWhite  ;
	End 
	End

	RemoveModule Costume_2

	AddModule
	Behavior = SubObjectsUpgrade Costume_3
		TriggeredBy		= Upgrade_GandalfWhite ;
		UpgradeTexture	= mugntspdr.tga 0 MUShelobH.tga  ;mugntspdr_b.tga           ;mugntspdrbannercarrier.tga  ;mugntspdr_b.tga  ;mugntspdr.tga ;
				RecolorHouse	= No
	End
	End

	ReplaceModule ModuleTag_Body1
	Body = ActiveBody ModuleTag_Body2
		MaxHealth 		= 800  
		MaxHealthDamaged 	= 400
		BurningDeathBehavior = Yes
		BurningDeathFX       = FX_InfantryBurningFlame
	End
	End


End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Golden Spiderling
;Reference: GoldenSpiderlingRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Weapon GoldenSpiderlingMandibles			; BALANCE Wild Spiderling Weapon 
  LeechRangeWeapon      = Yes
  AttackRange           = 25.0
  MeleeWeapon           = Yes
  DelayBetweenShots     = 1666				; time between shots, msec
  PreAttackDelay        = 900				; 300 is mace swing delay time before contact with target.
  PreAttackType         = PER_SHOT 			; Do the delay each time we attack
  FireFX                = FX_SpiderStabHit
  FiringDuration        = 766				; Duration of the mace swing 
  RequireFollowThru		= Yes
  
  DamageNugget						; A basic Nugget that just does damage
    Damage        = 100 ; default is 75
    Radius        = 0.0
    DelayTime     = 0
    DamageType    = CAVALRY
   ; DamageFXType  = SWORD_SLASH
    DeathType     = NORMAL
    FlankingBonus = 50%
  End

End

ChildObject GoldenSpiderling DarkSpiderling  ;WildSpiderling   ;WildSpiderlingHordeMember

	VisionRange         = 100.0
	ShroudClearingRange = 200


	AddModule
	Behavior = GrantUpgradeCreate ModuleTag_126247SFhgnjj
		UpgradeToGrant = Upgrade_GandalfWhite  ;
	End 
	End

	AddModule
	Behavior = SubObjectsUpgrade Costume_ausyioaleth
		TriggeredBy		= Upgrade_GandalfWhite ;
		UpgradeTexture	= mugntspdr.tga 0 mugntspdr.tga  ;mugntspdr_b.tga           ;mugntspdrbannercarrier.tga  ;mugntspdr_b.tga  ;mugntspdr.tga ;
				RecolorHouse	= No
	End
	End

	Scale = 1.1

	BuildCost = 30				
	BuildTime = 3
	BountyValue = 10
	CommandPoints = 3	

	ReplaceModule ModuleTag_Body2
	Body = ActiveBody ModuleTag_Body3
		MaxHealth 		= 600  
		MaxHealthDamaged 	= 300
		BurningDeathBehavior = Yes
		BurningDeathFX       = FX_InfantryBurningFlame
	End
	End

	WeaponSet
		Conditions			= None 
		Weapon				= PRIMARY GoldenSpiderlingMandibles
		AutoChooseSources	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End


End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Black Spiderling
;Reference: BlackSpiderlingRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Weapon DeadlyBlackSpiderlingMandibles			; BALANCE Wild Spiderling Weapon 
  LeechRangeWeapon      = Yes
  AttackRange           = 25.0
  MeleeWeapon           = Yes
  DelayBetweenShots     = 1666				; time between shots, msec
  PreAttackDelay        = 900				; 300 is mace swing delay time before contact with target.
  PreAttackType         = PER_SHOT 			; Do the delay each time we attack
  FireFX                = FX_SpiderStabHit
  FiringDuration        = 766				; Duration of the mace swing 
  RequireFollowThru		= Yes
  
  DamageNugget						; A basic Nugget that just does damage
    Damage        = 150 ; default is 75
    Radius        = 0.0
    DelayTime     = 0
    DamageType    = CAVALRY
   ; DamageFXType  = SWORD_SLASH
    DeathType     = NORMAL
    FlankingBonus = 50%
  End

 DOTNugget                        ; A basic Nugget that just does damage
	Damage        = 5
	AcceptDamageAdd = No
	Radius        = 0.0
	DelayTime     = 0
	DamageType    = POISON
	DamageFXType  = POISON
	DeathType     = NORMAL
	DamageInterval = 1000
	DamageDuration = 45000
	SpecialObjectFilter = AFFECTED_BY_POISON_OBJECTFILTER 
 End

End

ChildObject BlackSpiderling GoldenSpiderling  ;WildSpiderling   ;WildSpiderlingHordeMember

	VisionRange         = 100.0
	ShroudClearingRange = 200


	RemoveModule Costume_3

	AddModule
	Behavior = GrantUpgradeCreate ModuleTag_126247SFhg
		UpgradeToGrant = Upgrade_GandalfWhite  ;
	End 
	End

	AddModule
	Behavior = SubObjectsUpgrade Costume_4
		TriggeredBy		= Upgrade_GandalfWhite ;
		UpgradeTexture	= mugntspdr.tga 0 mugntspdrbannercarrier.tga  ;mugntspdr_b.tga           ;mugntspdrbannercarrier.tga  ;mugntspdr_b.tga  ;mugntspdr.tga ;
				RecolorHouse	= No
	End
	End

	BuildCost = 30				
	BuildTime = 3
	BountyValue = 10
	CommandPoints = 3	

	ReplaceModule ModuleTag_Body3
	Body = ActiveBody ModuleTag_Body4
		MaxHealth 		= 200  
		MaxHealthDamaged 	= 100
		BurningDeathBehavior = Yes
		BurningDeathFX       = FX_InfantryBurningFlame
	End
	End

	WeaponSet
		Conditions			= None 
		Weapon				= PRIMARY DeadlyBlackSpiderlingMandibles
		AutoChooseSources	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End


End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Minor Spiders 
;Reference: MinorSpidersRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<



;<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<SPIDER BASE>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
;<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<SHELOB>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
;<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<THE BIG ASS SPIDER>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
;Arctherna Gaint Spider Base
;Reference: ArcthernaGaintSpiderBaseRef
;<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

;<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
;FX and list
;<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

FXParticleSystem MotherSpiderShockwave
  System
    Priority = ALWAYS_RENDER
    Shader = ALPHA
    ParticleName = EXShockWav2.tga
    Lifetime = 30 30
    SystemLifetime = 6
    SortLevel = 1
    Size = 1 1
    ;BurstDelay = 2 2
    BurstCount = 1 1
    IsGroundAligned = Yes
  End
  Color = DefaultColor
    Color1 = R:148 G:145 B:132 0
    Color2 = R:119 G:106 B:87 40
    ColorScale = -5 3
  End
  Alpha = DefaultAlpha
    Alpha1 = 0.5 0.5 0
    Alpha2 = 0 0 20
  End
  Update = DefaultUpdate
    SizeRate = 5 5
    SizeRateDamping = 1 1
    AngleZ = -1 1
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.8 0.8
  End
  EmissionVelocity = OutwardEmissionVelocity
  End
  EmissionVolume = PointEmissionVolume
    IsHollow = Yes
  End
  Draw = DefaultDraw
  End
End

FXList FX_MotherSpiderWeapon

  ParticleSystem
    Name = MotherSpiderShockwave
    Offset = X:55 Y:0.0 Z:0.0
  End

  ParticleSystem
    Name = GiantStomp
    Offset = X:55.0 Y:0.0 Z:1.0
  End

  CameraShakerVolume
    Radius = 700
    Duration_Seconds = 0.5
    Amplitude_Degrees = 0.7
  End

End

;<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
;Stinger FX and list
;<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

FXParticleSystem MotherSpiderPoisonWaveBlastDust
  System
    Priority = ALWAYS_RENDER
    Shader = ALPHA
    ParticleName = EXWater04.tga
    Lifetime = 150 150
    SystemLifetime = 10
    Size = 10 15
    ;BurstDelay = 5 5
    BurstCount = 4 6
  End
  Color = DefaultColor
    Color1 = R:55 G:200 B:55 0
    Color2 = R:127 G:200 B:125 0
  End
  Alpha = DefaultAlpha
    Alpha1 = 0.5 0.5 0
    Alpha2 = -2 0 80
  End
  Update = DefaultUpdate
    SizeRate = 6 8
    SizeRateDamping = 0.9 0.9
    AngleZ = 0 14
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    Gravity = -0.0
    VelocityDamping = 0.8 0.9
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = -1 25
    Y = -8 8
    Z = -1 12
  End
  EmissionVolume = PointEmissionVolume
  End
  Draw = DefaultDraw
  End
End

FXList FX_MotherSpiderPoison

  ParticleSystem
    Name = MotherSpiderPoisonWaveBlastDust
     OrientToObject = Yes
  End

    DynamicDecal	; A decal that belongs to nobody, but updates internally to fade and tint and such
		DecalName		= SCCEntFoot  ;SCCHobbitSummon  ;SCCEntFoot
		Size			= 170				; Match radius in SpellBookSummonBalrog (this is square length, and there is radius, so this should be double that one)
		Color			= R:100 G:250 B:100
                	Offset			= X:75 Y:0
		OpacityStart		= 0
		OpacityFadeTimeOne	= 1000
		OpacityPeak			= 255
		OpacityPeakTime		= 255
		OpacityFadeTimeTwo	= 10000
		OpacityEnd			= 0

		StartingDelay	= 0
		Lifetime		= 11000
	End

  CameraShakerVolume
    Radius = 600
    Duration_Seconds = 0.5
    Amplitude_Degrees = 0.5
  End
End

FXList FX_MotherSpiderPoisonStinger ;B_BACK01 B_BACK02 SPINNER03 SPINNER04 SPINNER01 SPINNER02
;  Sound
;    Name = ShelobPoisonStingerStrike
;  End

	FXListAtBonePos
		FX = FX_MotherSpiderPoison
		BoneName = B_BACK01
	End

End


;<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>


SpecialPower SpecialAbilityDragonCallFromTheDeep1
  Enum						= SPECIAL_CALL_OF_THE_DEEP
  ReloadTime				= 600000   ; in milliseconds
  RadiusCursorRadius		= 50.0
  Flags						= LIMIT_DISTANCE NO_FORBIDDEN_OBJECTS PATHABLE_ONLY
  MaxCastRange				= CALL_OF_THE_DEEP_MAX_CAST_RANGE
  ForbiddenObjectFilter		= NO_SUMMON_NEAR_OBJECT_FILTER
  ForbiddenObjectRange		= 50
  InitiateAtLocationSound	= ShelobInstillTerrorMS
End

SpecialPower SpecialAbilityNewShelobPoisonedStinger
	Enum			= SPECIAL_AT_VISIBLE_OBJECT
	ReloadTime		= 160000
	ObjectFilter	= AFFECTED_BY_POISON_OBJECTFILTER
End



;<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

Armor NewShelobArmor
  Armor = DEFAULT		20%     ;this sets the level for all nonspecified damage types
  Armor = CRUSH			5%     ;horseman damage
  Armor = SLASH			20%     ;soldier damage
  Armor = URUK			20%     ;soldier damage
  Armor = PIERCE		20%     ;archer damage - has to be low because he is such an easy target
  Armor = SIEGE			40%     ;siege damage
  Armor = STRUCTURAL		40%	  ;Structural damage (Ent rocks)
  Armor = HERO			35%     ;hero damage
  Armor = MAGIC			25%     ;magic damage
  Armor = HERO_RANGED		35%  ;200%     ;Hero bow damage
  Armor = FLAME			35%  ;150%     ;fire damage
  Armor = LOGICAL_FIRE		1%
  Armor = SPECIALIST    	35%     ;
End

;<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>



Weapon MotherSpiderWeapon     ; BALANCE Shelob Weapon 
  LeechRangeWeapon      = Yes
  AttackRange           = 35.0
  MeleeWeapon           = Yes
  RadiusDamageAffects = ENEMIES NOT_SIMILAR
  DelayBetweenShots     = 1666           ; time between shots, msec
  PreAttackDelay        = 900            ; 300 is mace swing delay time before contact with target.
  PreAttackType         = PER_SHOT ; Do the delay each time we attack
  FireFX                = FX_MotherSpiderWeapon
  FiringDuration        = 766    ; Duration of the mace swing 
  RequireFollowThru		= No
  
  DamageNugget                        ; A basic Nugget that just does damage
    Damage        = 500
    Radius        = 60
    DelayTime     = 0
    DamageType    = HERO
    DamageFXType  = SWORD_SLASH
    DeathType     = NORMAL
    DamageArc	  = 120
  End
	MetaImpactNugget                    ; A Nugget that throws things back with force
		;HeroResist			= .75
		ShockWaveAmount   = 40.0
		ShockWaveRadius   = 55.0
		ShockWaveTaperOff = 0.75
	End  
	MetaImpactNugget                    ; A Nugget that throws things back with force
		HeroResist			= .75
		ShockWaveAmount   = 20.0
		ShockWaveRadius   = 65.0
		ShockWaveTaperOff = 0.75
	End  
End

Weapon NewWildShelobPoisonedStinger
  LeechRangeWeapon = Yes
  AttackRange			= 30.0
  MeleeWeapon			= Yes
  RadiusDamageAffects = ENEMIES NOT_SIMILAR
  FireFX				= FX_MotherSpiderPoisonStinger		;FX_GondorSwordHit
  DelayBetweenShots         = WILD_SHELOB_STINGER_DELAYBETWEENSHOTS
  PreAttackDelay            = WILD_SHELOB_STINGER_PREATTACKDELAY   ; 1467 is the prep time for archer.
  PreAttackType             = PER_SHOT ; Do the delay each time we attack a new target
  FiringDuration            = WILD_SHELOB_STINGER_FIRINGDURATION    ; Duration of the archer firing shot is 500ms.

	DOTNugget                        ; very powerful but only 30 seconds, should make heroes red and kill almost anything else, evne the dragon would go down to half with this.
		Damage        = 200 ; default is 300 ; FEAR HER! lol or die in 60 seconds!
		AcceptDamageAdd = No
		Radius        = 15.0
		DelayTime     = 300 ;75
		DamageType    = POISON
		DamageFXType  = POISON
		DeathType     = NORMAL
		DamageInterval = 1000
		DamageDuration = 30000
		SpecialObjectFilter = AFFECTED_BY_POISON_OBJECTFILTER
	End

	DOTNugget                        ; over a large area should kill almost anything over time. 1 minute time.
		Damage        = 50 ; default is 300
		AcceptDamageAdd = No
		Radius        = 75.0
		DelayTime     = 400  ;150
		DamageType    = POISON
		DamageFXType  = POISON
		DeathType     = NORMAL
		DamageInterval = 1000
		DamageDuration = 60000
		SpecialObjectFilter = AFFECTED_BY_POISON_OBJECTFILTER
	End

	DOTNugget                        ; very small damage just for the target, effects but for a long long long time.
		Damage        = 20 ; default is 300 ; very small damage just for the target, effects but for a long long long time.
		AcceptDamageAdd = No
		Radius        = 5.0
		DelayTime     = 200  ;150
		DamageType    = POISON
		DamageFXType  = POISON
		DeathType     = NORMAL
		DamageInterval = 1000
		DamageDuration = 180000 ; long long time lol.
		SpecialObjectFilter = AFFECTED_BY_POISON_OBJECTFILTER
	End

End

;<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>


CommandButton Command_WildShelobPoisonedStinger
  Command                 = SPECIAL_POWER
  SpecialPower            = SpecialAbilityNewShelobPoisonedStinger
  Options                 = NEED_TARGET_ENEMY_OBJECT
  TextLabel               = CONTROLBAR:WildShelobPoisonedStinger1
  CursorName              = EvilAbilityObj
  InvalidCursorName       = GenericInvalid
  ButtonImage             = HSShelobPoisonedStinger
  ButtonBorderType        = ACTION
  DescriptLabel           = CONTROLBAR:ToolTipWildShelobPoisonedStinger1
  ;UnitSpecificSound       = LurtzVoiceModeCripplingStrike
  InPalantir			  = Yes
  AutoAbility			  = Yes
End

CommandButton Command_SpellBookSpiderlingAllies
  Command           = SPECIAL_POWER
  SpecialPower      = SpecialAbilityDragonCallFromTheDeep1
  TextLabel         = CONTROLBAR:SpawnBlueSpiders
  ButtonImage       = HIFireDrake
  Options           = NEED_TARGET_POS CONTEXTMODE_COMMAND
  RadiusCursorType  = SpiderlingsRadiusCursor
  CursorName        = AttackObj
  InvalidCursorName = GenericInvalid  
  ButtonBorderType  = ACTION 
  DescriptLabel     = CONTROLBAR:TooltipSpawnBlueSpiders
  InPalantir	    = Yes
End

CommandButton Command_WildShelobInstillTerror
  Command                 = SPECIAL_POWER 
  SpecialPower            = SpecialAbilityScreech
  TextLabel               = CONTROLBAR:WildShelobInstillTerror1
  ButtonImage             = HSShelobInstillTerror
  ButtonBorderType        = ACTION 
  DescriptLabel           = CONTROLBAR:TooltipWildShelobInstillTerror1
  InPalantir			  = Yes
  AutoAbility			  = Yes
  PresetRange			  = 150
End

CommandSet NewShelobCommandSet
	1	= Command_ToggleStance
	2	= Command_SpellBookSpiderlingAllies
	3	= Command_WildShelobPoisonedStinger
	4	= Command_WildShelobInstillTerror
	13	= Command_AttackMove
	14	= Command_Stop
End

;<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
;The Big Ass Spider Object
;<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

Object MordorShelob

	VisionRange = 350				
	ShroudClearingRange = 450

	AddModule
	Behavior = StancesBehavior ModuleTag_StancesBehavior
		StanceTemplate = Hero
	End
	End

	 SelectPortrait = HPShelob
	ButtonImage = HIShelob

	ReplaceModule ModuleTag_01
	Draw = W3DScriptedModelDraw ModuleTag_011

	  OkToChangeModelColor = Yes
	  
		DefaultModelConditionState
			Model					= MUShelob_SKNL ; L ; M
			Skeleton				= MUShelob_SKL
		End

		IdleAnimationState
			Animation				= IDLA
				AnimationName		= MUShelob_IDLA
				AnimationMode		= ONCE
			End
		End

		; -------- STUNNED ANIMS ---------		
		AnimationState        = STUNNED_FLAILING
			Animation           = StunFlail
				AnimationName     = MUShelob_FLYA
				AnimationMode      = LOOP
			End
			Flags               = RANDOMSTART
		End
		
		AnimationState        = STUNNED
			Animation           = Stun
				AnimationName     = MUShelob_LNDA
				AnimationMode      = ONCE
			End
		End
		
		AnimationState        = STUNNED_STANDING_UP
			Animation           = Stun
				AnimationName     = MUShelob_GTPA
				AnimationMode      = ONCE
			End
		End
		
		; -------- DYING ANIMS ---------		
		AnimationState				= DYING
			Animation				= DIEA
				AnimationName		= MUShelob_DIEA
				AnimationMode		= ONCE
			End
		End
	
		; ------- MOVING ANIMS ---------	
		AnimationState				= TURN_LEFT
			StateName				= Turn
			Animation				= Walk
				AnimationName		= MUShelob_TRNL 
				AnimationMode		= LOOP
			End
		End
		
		AnimationState				= TURN_RIGHT
			StateName				= Turn
			Animation				= Walk
				AnimationName		= MUShelob_TRNR 
				AnimationMode		= LOOP
			End
		End

		AnimationState				= MOVING BACKING_UP
			Animation				= BAKA
				AnimationName		= MUShelob_BAKA
				AnimationMode		= LOOP
			End
			Flags					= RANDOMSTART
		End

		AnimationState				=	MOVING ATTACKING
			Animation				=	RUNA
				AnimationName		=	MUShelob_WLKA  ;MUShelob_RUNA
				AnimationMode		=	LOOP
				Distance			=	21
			End
		End
		AnimationState				=	MOVING 
			Animation				=	WLKA
				AnimationName		=	MUShelob_WLKA
				AnimationMode		=	LOOP
				Distance			=	21
			End
		End

;<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

		AnimationState			= SPECIAL_WEAPON_TWO					; InstillTerror
			Animation
				AnimationName	= MUShelob_ATKC
				AnimationMode	= ONCE
			End
			FXEvent				= Frame:10 Name:FX_FearBlast
		End

;<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

		; poisoned stinger
		AnimationState				= SPECIAL_WEAPON_ONE
			Animation
				AnimationName			= MUShelob_SPCA
				AnimationMode			= ONCE
				AnimationSpeedFactorRange = 0.50 0.50
			End
		End

;<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

		; ------- ATTACKING ANIMS ---------	
		AnimationState				= FIRING_OR_PREATTACK_A
			Animation				= ATKA
				AnimationName		= MUShelob_ATKA
				AnimationMode		= ONCE
			End
		End
				
		AnimationState				=	SELECTED
			Animation           = IDLA
				AnimationName     = MUShelob_IDLA
				AnimationMode     = ONCE
				AnimationPriority = 1
			End
			Animation           = IDLA
				AnimationName     = MUShelob_IDLA
				AnimationMode     = ONCE
				AnimationPriority = 1
			End
			Animation				=	AtAttention
				AnimationName		=	MUShelob_ATNA
				AnimationMode		=	ONCE
			End
			Flags					= RESTART_ANIM_WHEN_COMPLETE
		End
		
		; ------- HIT REACTION ANIMS ---------	
		AnimationState = HIT_REACTION HIT_LEVEL_1
			Animation = Hit_Level_1_a
				AnimationName = MUShelob_HITA
				AnimationMode = ONCE
			End
		End
	End
	End

	BountyValue = 5000

	CommandSet = NewShelobCommandSet

;<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

	AddModule
	Behavior = GrantUpgradeCreate ModuleTag_1
		UpgradeToGrant = Upgrade_AragornBladeMaster  ;
	End 
	End

;<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
;Spawn Blue spiders
;<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

	AddModule
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_CallFromTheDeepEnabler
		SpecialPowerTemplate = SpecialAbilityDragonCallFromTheDeep1
		TriggeredBy = Upgrade_AragornBladeMaster
	End
	End

	AddModule
	Behavior = OCLSpecialPower ModuleTag_CallFromTheDeepPower
		SpecialPowerTemplate	= SpecialAbilityDragonCallFromTheDeep1
		OCL						= OCL_SpawnSpiderlingsEgg
		CreateLocation			= CREATE_AT_LOCATION
		StartsPaused			= Yes
		TriggerFX			 = FX_SpiderlingsSummonStart
		SetModelCondition		= ModelConditionState:SELECTED
		SetModelConditionTime	= 3.5
		DisableDuringAnimDuration = Yes
	End
	End

;<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

	DisplayName = Arctherna

	Scale = 2.00

;<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

	AddModule
	Behavior = GrantUpgradeCreate ModuleTag_1zdgjzxSRhsdgjjfxdk
		UpgradeToGrant = Upgrade_GandalfWhite  ;
	End 
	End

;	AddModule
;	Behavior = SubObjectsUpgrade Costume_213567
;		TriggeredBy		= Upgrade_GandalfWhite ;
;		UpgradeTexture	= MUShelobH.tga 0 MUWtchKngFllBst.tga
;				RecolorHouse	= No
;	End
;	End

;	AddModule
;	Behavior = SubObjectsUpgrade Costume_3154
;		TriggeredBy		= Upgrade_GandalfWhite ;
;		UpgradeTexture	= MUShelobH.tga 0 DrogothArmor.tga  ;MUMntTroll.tga
;				RecolorHouse	= No
;	End
;	End

	AddModule
	Behavior = SubObjectsUpgrade Costume_562
		TriggeredBy		= Upgrade_GandalfWhite ;
		UpgradeTexture	= MUShelobH.tga 0 mugntspdr.tga           ;mugntspdrbannercarrier.tga  ;mugntspdr_b.tga  ;mugntspdr.tga ;
				RecolorHouse	= No
	End
	End

	WeaponSet
		Conditions = None 
		Weapon = PRIMARY    MotherSpiderWeapon
		AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End

	ArmorSet
		Conditions      = None
		Armor           = NewShelobArmor
		DamageFX        = NormalDamageFX
	End

	ShockwaveResistance = SHOCKWAVE_RESISTANCE_ALWAYS

	LocomotorSet
		Locomotor     = ShelobWallScalingLocomotor
		Condition     = SET_NORMAL
		Speed         = 50
	End

	ReplaceModule ModuleTag_RespawnBody
	Body = RespawnBody ModuleTag_RespawnBody1
		MaxHealth         = 15000                ;BALANCE Shelob Health
		PermanentlyKilledByFilter	= NONE		;Who kills me permanently?
	End
	End

;<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
;Terror Abillity
;<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

	AddModule
 	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_InstillTerrorEnabler
		SpecialPowerTemplate		= SpecialAbilityScreech
		TriggeredBy					= Upgrade_AragornBladeMaster  ;Upgrade_ObjectLevel3
	End
	End

	AddModule 
	Behavior = SpecialPowerModule ModuleTag_InstillTerror                  
		SpecialPowerTemplate		= SpecialAbilityScreech
		UpdateModuleStartsAttack	= Yes
		StartsPaused				= Yes
	End
	End

	AddModule	
	Behavior = SpecialAbilityUpdate ModuleTag_InstillTerrorSAUpdate  
		SpecialPowerTemplate		= SpecialAbilityScreech
		UnpackTime					= 1
		AwardXPForTriggering		= 0		
		TriggerSound				= ShelobInstillTerrorMS
		EffectRange					= 250
		UnpackTime					= 100
		PreparationTime				= 1
		PackTime					= 2500
		CustomAnimAndDuration		= AnimState:SPECIAL_WEAPON_TWO AnimTime:2500
	End
	End	

;<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
;Poison Wind
;<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

	AddModule
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_PoisonedStingerEnabler
		SpecialPowerTemplate = SpecialAbilityNewShelobPoisonedStinger
		TriggeredBy = Upgrade_AragornBladeMaster  ;Upgrade_ObjectLevel6
	End
	End

	AddModule
	Behavior = SpecialPowerModule ModuleTag_PoisonedStingerStarter
		SpecialPowerTemplate		= SpecialAbilityNewShelobPoisonedStinger
		UpdateModuleStartsAttack	= Yes
		StartsPaused			= Yes
		InitiateSound			= ShelobVoxPoisonStinger
	End
	End

	AddModule
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_PoisonedStingerUpdate
		SpecialPowerTemplate    = SpecialAbilityNewShelobPoisonedStinger
		SkipContinue			= Yes

		UnpackTime				= 250
		PreparationTime			= 500
		MustFinishAbility		= Yes
		
		AwardXPForTriggering		= 0
		StartAbilityRange			= 15.0
		
		SpecialWeapon				= NewWildShelobPoisonedStinger
		WhichSpecialWeapon			= 1
	End
	End

;<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
; this makes her big in size, units wont go under her to attack her.
;<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

	Geometry			= CYLINDER
	GeometryMajorRadius = 80.0
	GeometryHeight		= 80.0
	GeometryIsSmall		= No
	Shadow				= SHADOW_VOLUME ;SHADOW_DECAL	; SHADOW_VOLUME has trouble with his wings.  Possibly because of the transparent bits
	ShadowSizeX			= 100
	ShadowSizeY			= 80
	ShadowTexture		= ShadowI

End

;<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
;Blue Spider
;Reference: BlueSpiderRef
;<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
; FX
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
FXParticleSystem BlueSpiderVenom
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXGassmoke09.tga
    Lifetime = 7 7
    SortLevel = 1
    Size = 4 6
    BurstCount = 1 1
    IsGroundAligned = Yes
    IsParticleUpTowardsEmitter = Yes
  End
  Color = DefaultColor
    Color2 = R:13 G:14 B:50 3
    Color3 = R:13 G:30 B:14 5
    ColorScale = 2 2
  End
  Alpha = DefaultAlpha
    Alpha1 = 1 1 1
    Alpha2 = 1 1 10
    Alpha3 = 1 1 20
  End
  Update = DefaultUpdate
    SizeRateDamping = 0.8 0.8
    AngularRateZ = 2 2
    AngularDamping = 1 1
    Rotation = ROTATE_Z
    AngleXY = 45 45
    AngularRateXY = 0.1 0.3
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.9 0.9
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = CylinderEmissionVolume
    IsHollow = Yes
    Radius = 4
    Offset = X:3 Y:0 Z:0
  End
  Draw = DefaultDraw
  End
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Weapons
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Weapon BlueSpiderWeapon     ; BALANCE Shelob Weapon 
  LeechRangeWeapon      = Yes
  AttackRange           = 20.0
  MeleeWeapon           = Yes
  RadiusDamageAffects = ENEMIES NOT_SIMILAR
  DelayBetweenShots     = 1666           ; time between shots, msec
  PreAttackDelay        = 900            ; 300 is mace swing delay time before contact with target.
  PreAttackType         = PER_SHOT ; Do the delay each time we attack
  FireFX                = FX_GondorSwordHit
  FiringDuration        = 766    ; Duration of the mace swing 
  RequireFollowThru		= No
  
  DamageNugget                        ; A basic Nugget that just does damage
    Damage        = 100
    Radius        = 15
    DelayTime     = 0
    DamageType    = HERO
    DamageFXType  = SWORD_SLASH
    DeathType     = NORMAL
;    DamageArc	  = 120
  End
 DOTNugget                        ; A basic Nugget that just does damage
	Damage        = 20
	AcceptDamageAdd = No
	Radius        = 15.0
	DelayTime     = 0
	DamageType    = POISON
	DamageFXType  = POISON
	DeathType     = NORMAL
	DamageInterval = 1000
	DamageDuration = 90000
	SpecialObjectFilter = AFFECTED_BY_POISON_OBJECTFILTER 
 End
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Armor
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Armor BlueSpiderArmor
  Armor = DEFAULT         50%   ; 100%
  Armor = SLASH            35%   ; 100%
  Armor = URUK	35%   
  Armor = PIERCE           50%   ; 100%
  Armor = SPECIALIST      75%   ; 200%
  Armor = CRUSH           10%   ; 100%
  Armor = SIEGE           150%   ;
  Armor = FLAME           75%   ;  50%
  Armor = MAGIC           75%   ;
  Armor = HERO            70%   ; 100%
  Armor = HERO_RANGED     70%   ; 200%
  Armor = CAVALRY	  25% 
  Armor = STRUCTURAL	  150%	     
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
; Blue spider object modules
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Object WildSpiderling_Summoned

	VisionRange = 250				
	ShroudClearingRange = 300

	AddModule
	Behavior = StancesBehavior ModuleTag_StancesBehavior
		StanceTemplate = Hero
	End
	End

	BountyValue = 100	
	BuildCost = 600				
	BuildTime = 30
	CommandPoints = 80



	DisplayName = GiantBlueSpider

	ShockwaveResistance = SHOCKWAVE_RESISTANCE_STRONG

	AddModule
	Behavior = GrantUpgradeCreate ModuleTag_1
		UpgradeToGrant = Upgrade_GandalfWhite  ;
	End 
	End

	AddModule
	Behavior = SubObjectsUpgrade Costume_562
		TriggeredBy		= Upgrade_GandalfWhite ;
		UpgradeTexture	= MUShelobH.tga 0 mugntspdr_b.tga           ;mugntspdrbannercarrier.tga  ;mugntspdr_b.tga  ;mugntspdr.tga ;
				RecolorHouse	= No
	End
	End

	AddModule
	Behavior = SubObjectsUpgrade Costume_56256
		TriggeredBy		= Upgrade_GandalfWhite ;
		UpgradeTexture	= MUGntSpdr.tga 0 mugntspdr_b.tga           ;mugntspdrbannercarrier.tga  ;mugntspdr_b.tga  ;mugntspdr.tga ;
				RecolorHouse	= No
	End
	End


	ReplaceModule ModuleTag_01
	Draw = W3DHordeModelDraw ModuleTag_011
		
		OkToChangeModelColor = Yes

		DefaultModelConditionState
			Model               = MUGntSpdr_SKN
			Skeleton			= MUGntSpdr_SKL
			Texture =		MUShelobH.tga
			ParticleSysBone		= B_BACK02 SpiderlingVenomSacs FollowBone:Yes
			ParticleSysBone		= B_Head BlueSpiderVenom FollowBone:Yes
		End
		
		ModelConditionState = USER_1
			Model               = MUGntSpdr_SKN
			Skeleton			= MUGntSpdr_SKL
			ParticleSysBone		= B_BACK02 SpiderlingVenomSacs FollowBone:Yes
			Texture =		MUShelobH.tga
		End

		IdleAnimationState
			Animation           = IDLA
				AnimationName	= MUGntSpdr_IDLA
				AnimationMode	= ONCE
			End
			Flags               = RANDOMSTART
		End

		;//--------------Death---------------
		AnimationState			= DYING DEATH_1
			Animation
				AnimationName	= MUGntSpdr_IDLA
				AnimationMode	= LOOP
				AnimationBlendTime = 10
			End
		End

		AnimationState			= DYING BURNINGDEATH
			Animation
				AnimationName	= MUGntSpdr_DIEA
				AnimationMode	= ONCE
				AnimationBlendTime = 10
			End
		End

		AnimationState			= DYING
			Animation           = DIEA
				AnimationName	= MUGntSpdr_DIEA
				AnimationMode	= ONCE
			End
		End
		
		AnimationState			= BURNINGDEATH
			Animation
				AnimationName	= MUGntSpdr_MFDA
				AnimationMode	= LOOP
				Distance		= 50
			End
		End

		AnimationState						= PARALYZED
			Animation
				AnimationName				= MUGntSpdr_IDLA
				AnimationMode				= LOOP
			End
		End

		;//--------------Attacking---------------
		AnimationState			=  FIRING_OR_PREATTACK_A
			Animation						= ATKA
				AnimationName				= MUGntSpdr_ATKA
				AnimationMode				= ONCE
				AnimationSpeedFactorRange	= 0.8 1.25
			End
		End

		;//--------------WallScaling---------------
			
		AnimationState						= CLIMBING
			StateName						= STATE_Climbing
			Animation						= Climbing
				AnimationName				= MUGntSpdr_RUNA  ;MUGNTSPDR_WALB
				AnimationMode				= LOOP
				AnimationBlendTime			= 10
			End
			BeginScript;script to set transition from moving
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Running"  then CurDrawableSetTransitionAnimState("Trans_RunningToClimbing") return end
				;if Prev == "STATE_Rappelling"  then CurDrawableSetTransitionAnimState("Trans_RappellingToClimbing") return end
			EndScript
		End
		TransitionState = Trans_RunningToClimbing
			Animation = Transition
				AnimationName = MUGntSpdr_RUNA  ;MUGNTSPDR_WALA
				AnimationMode = ONCE
			End
		End
		;TransitionState = Trans_RappellingToClimbing
		;	Animation = Transition
		;		AnimationName = UNKNOWN
		;		AnimationMode = ONCE_BACKWARDS
		;	End
		;End
		AnimationState						= RAPPELLING
			StateName						= STATE_Rappelling
			Animation						= Rapelling
				AnimationName				= MUGntSpdr_RUNA  ;MUGNTSPDR_WALD
				AnimationMode				= LOOP
				AnimationBlendTime			= 10
			End
			BeginScript;script to set transition from moving
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Running"  then CurDrawableSetTransitionAnimState("Trans_RunningToRappelling") return end
				;if Prev == "STATE_Climbing"  then CurDrawableSetTransitionAnimState("Trans_ClimbingToRappelling") return end
			EndScript
		End
		TransitionState = Trans_RunningToRappelling
			Animation = Transition
				AnimationName = MUGntSpdr_RUNA  ;MUGNTSPDR_WALG
				AnimationMode = ONCE
			End
		End
		;TransitionState = Trans_ClimbingToRappelling
		;	Animation = Transition
		;		AnimationName = UNKNOWN
		;		AnimationMode = ONCE
		;	End
		;End		
		TransitionState = Trans_ClimbingToRunning
			Animation = Transition
				AnimationName = MUGntSpdr_RUNA  ;MUGNTSPDR_WALF
				AnimationMode = ONCE
			End
		End
		TransitionState = Trans_RappellingToRunning
			Animation = Transition
				AnimationName = MUGntSpdr_RUNA  ;MUGNTSPDR_WALE
				AnimationMode = ONCE
			End
		End
			
			
		;//--------------Movement---------------
		AnimationState			= TURN_LEFT
			StateName			= Turn
			Animation			= Walk
				AnimationName	= MUGntSpdr_TRNL 
				AnimationMode	= LOOP
			End
		End
		
		AnimationState			= TURN_RIGHT
			StateName			= Turn
			Animation			= Walk
				AnimationName	= MUGntSpdr_TRNR 
				AnimationMode	= LOOP
			End
		End
		
		AnimationState			= MOVING 
			Animation			= RUNA
				AnimationName	= MUGntSpdr_RUNA
				AnimationMode	= LOOP
			End
			
			BeginScript;script to set transition into moving
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Climbing"  then CurDrawableSetTransitionAnimState("Trans_ClimbingToRunning") return end
				if Prev == "STATE_Rappelling"  then CurDrawableSetTransitionAnimState("Trans_RappellingToRunning") return end
			EndScript
			
		End

		AnimationState			= MOVING BACKING_UP
			Animation           = BAKA
				AnimationName	= MUGntSpdr_BAKA
				AnimationMode	= LOOP
			End
			Flags               = RANDOMSTART
		End
		
		AnimationState			= STUNNED_FLAILING
			Animation           = StunFlail
				AnimationName	= MUGntSpdr_FLYA
				AnimationMode	= LOOP
			End
			Flags               = RANDOMSTART
		End
		
		AnimationState			= STUNNED
			Animation			= Stun
				AnimationName	= MUGntSpdr_LNDA
				AnimationMode	= ONCE
			End
		End
		
		AnimationState			= STUNNED_STANDING_UP
			Animation           = Stun
				AnimationName	= MUGntSpdr_GTPA
				AnimationMode	= ONCE
			End
		End
		
		AnimationState			= HIT_REACTION HIT_LEVEL_1
			Animation			= Hit_Level_1_a
				AnimationName	= MUGntSpdr_HITA
				AnimationMode	= ONCE
			End
		End
		
		AnimationState			= SELECTED
			Animation			= Selected
				AnimationName	= MUGntSpdr_IDLA
				AnimationMode	= ONCE
			End
		End
	End
	End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

	RemoveModule ModuleTag_LifetimeUpdate

	ReplaceModule ModuleTag_Body
	Body = ActiveBody ModuleTag_Body1
		MaxHealth 		= 3000
		MaxHealthDamaged 	= 50
		BurningDeathBehavior = No  ;Yes
		BurningDeathFX       = FX_InfantryBurningFlame
	End
	End

	AddModule
	Behavior = AutoHealBehavior ModuleTag_Healing
		StartsActive = Yes
		HealingAmount = 30
		HealingDelay = 1000
		StartHealingDelay = 25000
		HealOnlyIfNotInCombat = Yes
	End
	End	

	WeaponSet
		Conditions			= None 
		Weapon				= PRIMARY BlueSpiderWeapon
		AutoChooseSources	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End

	ArmorSet
		Conditions      = None
		Armor           = BlueSpiderArmor
		DamageFX        = NormalDamageFX
	End

	VisionRange			= WILD_SPIDERLING_VISION_RANGE
	ShroudClearingRange 		= SHROUD_CLEAR_HOBBIT  

;	LocomotorSet
;		Locomotor     = TestWallScalingHordeLocomotor
;		Condition     = SET_NORMAL
;		Speed         = 250  ;NORMAL_WILD_CAVALRY_FAST_HORDE_SPEED
;	End

	LocomotorSet
		Locomotor     = ShelobWallScalingLocomotor
		Condition     = SET_NORMAL
		Speed         = 60
	End

	CrushableLevel = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrusherLevel = 1
	
	MinCrushVelocityPercent = 50% ; Has to be moving at least xx% of full speed
	CrushDecelerationPercent = 10% ; Lose xx% max velocity when crushing -- thus they only crush 1 row of infantry
	
	CrushKnockback = 50  ; how hard we knock back crushed units.
	CrushZFactor = 0.7  ; How much we knock upwards.

	Scale = 2.20

	Geometry			= CYLINDER
	GeometryMajorRadius = 25.0
	GeometryMinorRadius = 25.0
	GeometryHeight		= 20.0
	GeometryIsSmall		= No  ;Yes

	Shadow			= SHADOW_DECAL ;SHADOW_VOLUME
	ShadowSizeX		= 22
	ShadowSizeY		= 18
	ShadowOffsetX	= -1
	ShadowTexture	= ShadowSpider2	;ShadowI

End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
; GuardianSpider
;Reference: GuardianSpiderRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;FX
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<


;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Weapons
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Weapon GuardianSpiderWeapon     ; BALANCE Shelob Weapon 
  LeechRangeWeapon      = Yes
  AttackRange           = 25.0
  MeleeWeapon           = Yes
  RadiusDamageAffects = ENEMIES NOT_SIMILAR
  DelayBetweenShots     = 1066           ; time between shots, msec
  PreAttackDelay        = 720            ; 300 is mace swing delay time before contact with target.
  PreAttackType         = PER_SHOT ; Do the delay each time we attack
  FireFX                = FX_GondorSwordHit
  FiringDuration        = 446    ; Duration of the mace swing 
  RequireFollowThru		= No
  
  DamageNugget                        ; A basic Nugget that just does damage
    Damage        = 150
    Radius        = 15
    DelayTime     = 0
    DamageType    = SIEGE
    DamageFXType  = SWORD_SLASH
    DeathType     = EXPLODED  ;NORMAL
  End
  DamageNugget                        ; A basic Nugget that just does damage
    Damage        = 150
    Radius        = 20
    DelayTime     = 0
    DamageType    = SLASH  ;HERO
    DamageFXType  = SWORD_SLASH
    DeathType     = NORMAL
  End
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
; Armor
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Armor GuardianSpiderArmor
  Armor = DEFAULT         50%   ; 100%
  Armor = SLASH            35%   ; 100%
  Armor = URUK	35%   
  Armor = PIERCE           25%   ; 100%
  Armor = SPECIALIST      35%   ; 200%
  Armor = CRUSH           50%   ; 100%
  Armor = SIEGE           50%   ;
  Armor = FLAME           50%   ;  50%
  Armor = MAGIC           85%   ;
  Armor = HERO            50%   ; 100%
  Armor = HERO_RANGED     20%   ; 200%
  Armor = CAVALRY	  35% 
  Armor = STRUCTURAL	  50%	     
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
; GuardianSpider Object Modules
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

;ChildObject GiantSpider WildSpiderling
;ChildObject IsengardSharku GiantSpider
ChildObject IsengardSharku WildSpiderling ; sharku is now the GuardianSpider, it gives good xp when it is killed.

	IsTrainable		= Yes ;Can gain experience

	VisionRange = 250				
	ShroudClearingRange = 300

	AddModule
	Behavior = StancesBehavior ModuleTag_StancesBehavior
		StanceTemplate = Hero
	End
	End

	BuildCost = 800
	BuildTime = 80
	BountyValue = 250	
	CommandPoints = 150

	ShockwaveResistance = SHOCKWAVE_RESISTANCE_STRONG

	DisplayName = GuardianSpider

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

	AddModule
	Behavior = GrantUpgradeCreate ModuleTag_126247
		UpgradeToGrant = Upgrade_GandalfWhite  ;
	End 
	End

	AddModule
	Behavior = SubObjectsUpgrade Costume_56225
		TriggeredBy		= Upgrade_GandalfWhite ;
		UpgradeTexture	= MUShelobH.tga 0 DrogothArmor.tga  ;mugntspdr_b.tga           ;mugntspdrbannercarrier.tga  ;mugntspdr_b.tga  ;mugntspdr.tga ;
				RecolorHouse	= No
	End
	End

	AddModule
	Behavior = SubObjectsUpgrade Costume_56256246789
		TriggeredBy		= Upgrade_GandalfWhite ;
		UpgradeTexture	= MUGntSpdr.tga 0 DrogothArmor.tga  ;mugntspdr_b.tga           ;mugntspdrbannercarrier.tga  ;mugntspdr_b.tga  ;mugntspdr.tga ;
				RecolorHouse	= No
	End
	End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

	ReplaceModule ModuleTag_01
	Draw = W3DHordeModelDraw ModuleTag_011
		
		OkToChangeModelColor = No

		DefaultModelConditionState
			Model               = MUGntSpdr_SKN
			Skeleton			= MUGntSpdr_SKL
			Texture =		MUShelobH.tga
			;ParticleSysBone		= B_BACK02 SpiderlingVenomSacs FollowBone:Yes
			;ParticleSysBone		= B_Head BlueSpiderVenom FollowBone:Yes
		End
		
		ModelConditionState = USER_1
			Model               = MUGntSpdr_SKN
			Skeleton			= MUGntSpdr_SKL
			ParticleSysBone		= B_BACK02 SpiderlingVenomSacs FollowBone:Yes
			Texture =		MUShelobH.tga
		End

		IdleAnimationState
			Animation           = IDLA
				AnimationName	= MUGntSpdr_IDLA
				AnimationMode	= ONCE
			End
			Flags               = RANDOMSTART
		End

		;//--------------Death---------------
		AnimationState			= DYING DEATH_1
			Animation
				AnimationName	= MUGntSpdr_IDLA
				AnimationMode	= LOOP
				AnimationBlendTime = 10
			End
		End

		AnimationState			= DYING BURNINGDEATH
			Animation
				AnimationName	= MUGntSpdr_DIEA
				AnimationMode	= ONCE
				AnimationBlendTime = 10
			End
		End

		AnimationState			= DYING
			Animation           = DIEA
				AnimationName	= MUGntSpdr_DIEA
				AnimationMode	= ONCE
			End
		End
		
		AnimationState			= BURNINGDEATH
			Animation
				AnimationName	= MUGntSpdr_MFDA
				AnimationMode	= LOOP
				Distance		= 50
			End
		End

		AnimationState						= PARALYZED
			Animation
				AnimationName				= MUGntSpdr_IDLA
				AnimationMode				= LOOP
			End
		End

		;//--------------Attacking---------------
		AnimationState			=  FIRING_OR_PREATTACK_A
			Animation						= ATKA
				AnimationName				= MUGntSpdr_ATKA
				AnimationMode				= ONCE
				AnimationSpeedFactorRange	= 1.6 1.6
			End
		End

		;//--------------WallScaling---------------
			
		AnimationState						= CLIMBING
			StateName						= STATE_Climbing
			Animation						= Climbing
				AnimationName				= MUGNTSPDR_WALB
				AnimationMode				= LOOP
				AnimationBlendTime			= 10
			End
			BeginScript;script to set transition from moving
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Running"  then CurDrawableSetTransitionAnimState("Trans_RunningToClimbing") return end
				;if Prev == "STATE_Rappelling"  then CurDrawableSetTransitionAnimState("Trans_RappellingToClimbing") return end
			EndScript
		End
		TransitionState = Trans_RunningToClimbing
			Animation = Transition
				AnimationName = MUGNTSPDR_WALA
				AnimationMode = ONCE
			End
		End
		;TransitionState = Trans_RappellingToClimbing
		;	Animation = Transition
		;		AnimationName = UNKNOWN
		;		AnimationMode = ONCE_BACKWARDS
		;	End
		;End
		AnimationState						= RAPPELLING
			StateName						= STATE_Rappelling
			Animation						= Rapelling
				AnimationName				= MUGNTSPDR_WALD
				AnimationMode				= LOOP
				AnimationBlendTime			= 10
			End
			BeginScript;script to set transition from moving
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Running"  then CurDrawableSetTransitionAnimState("Trans_RunningToRappelling") return end
				;if Prev == "STATE_Climbing"  then CurDrawableSetTransitionAnimState("Trans_ClimbingToRappelling") return end
			EndScript
		End
		TransitionState = Trans_RunningToRappelling
			Animation = Transition
				AnimationName = MUGNTSPDR_WALG
				AnimationMode = ONCE
			End
		End
		;TransitionState = Trans_ClimbingToRappelling
		;	Animation = Transition
		;		AnimationName = UNKNOWN
		;		AnimationMode = ONCE
		;	End
		;End		
		TransitionState = Trans_ClimbingToRunning
			Animation = Transition
				AnimationName = MUGNTSPDR_WALF
				AnimationMode = ONCE
			End
		End
		TransitionState = Trans_RappellingToRunning
			Animation = Transition
				AnimationName = MUGNTSPDR_WALE
				AnimationMode = ONCE
			End
		End
			
			
		;//--------------Movement---------------
		AnimationState			= TURN_LEFT
			StateName			= Turn
			Animation			= Walk
				AnimationName	= MUGntSpdr_TRNL 
				AnimationMode	= LOOP
			End
		End
		
		AnimationState			= TURN_RIGHT
			StateName			= Turn
			Animation			= Walk
				AnimationName	= MUGntSpdr_TRNR 
				AnimationMode	= LOOP
			End
		End
		
		AnimationState			= MOVING 
			Animation			= RUNA
				AnimationName	= MUGntSpdr_RUNA
				AnimationMode	= LOOP
			End
			
			BeginScript;script to set transition into moving
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Climbing"  then CurDrawableSetTransitionAnimState("Trans_ClimbingToRunning") return end
				if Prev == "STATE_Rappelling"  then CurDrawableSetTransitionAnimState("Trans_RappellingToRunning") return end
			EndScript
			
		End

		AnimationState			= MOVING BACKING_UP
			Animation           = BAKA
				AnimationName	= MUGntSpdr_BAKA
				AnimationMode	= LOOP
			End
			Flags               = RANDOMSTART
		End
		
		AnimationState			= STUNNED_FLAILING
			Animation           = StunFlail
				AnimationName	= MUGntSpdr_FLYA
				AnimationMode	= LOOP
			End
			Flags               = RANDOMSTART
		End
		
		AnimationState			= STUNNED
			Animation			= Stun
				AnimationName	= MUGntSpdr_LNDA
				AnimationMode	= ONCE
			End
		End
		
		AnimationState			= STUNNED_STANDING_UP
			Animation           = Stun
				AnimationName	= MUGntSpdr_GTPA
				AnimationMode	= ONCE
			End
		End
		
		AnimationState			= HIT_REACTION HIT_LEVEL_1
			Animation			= Hit_Level_1_a
				AnimationName	= MUGntSpdr_HITA
				AnimationMode	= ONCE
			End
		End
		
		AnimationState			= SELECTED
			Animation			= Selected
				AnimationName	= MUGntSpdr_IDLA
				AnimationMode	= ONCE
			End
		End
	End
	End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

	ReplaceModule ModuleTag_Body
	Body = ActiveBody ModuleTag_Body1
		MaxHealth 		= 5000
		MaxHealthDamaged 	= 200
		BurningDeathBehavior = No  ;Yes
		BurningDeathFX       = FX_InfantryBurningFlame
	End
	End

	AddModule
	Behavior = AutoHealBehavior ModuleTag_Healing
		StartsActive = Yes
		HealingAmount = 30
		HealingDelay = 1000
		StartHealingDelay = 30000
		HealOnlyIfNotInCombat = Yes
	End
	End	

	WeaponSet
		Conditions			= None 
		Weapon				= PRIMARY GuardianSpiderWeapon
		AutoChooseSources	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End

	ArmorSet
		Conditions      = None
		Armor           = GuardianSpiderArmor
		DamageFX        = NormalDamageFX
	End

;	LocomotorSet
;		Locomotor     = TestWallScalingHordeLocomotor
;		Condition     = SET_NORMAL
;		Speed         = 25  ;NORMAL_WILD_CAVALRY_FAST_HORDE_SPEED
;	End

	LocomotorSet
		Locomotor     = ShelobWallScalingLocomotor
		Condition     = SET_NORMAL
		Speed         = 70
	End

	CrushableLevel = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrusherLevel = 0
	
	MinCrushVelocityPercent = 80% ; Has to be moving at least xx% of full speed
	CrushDecelerationPercent = 20% ; Lose xx% max velocity when crushing -- thus they only crush 1 row of infantry
	
	CrushKnockback = 40  ; how hard we knock back crushed units.
	CrushZFactor = 0.7  ; How much we knock upwards.

	Scale = 3.40

	Geometry			= CYLINDER
	GeometryMajorRadius = 35.0
	GeometryMinorRadius = 35.0
	GeometryHeight		= 20.0
	GeometryIsSmall		= No

	Shadow			= SHADOW_DECAL ;SHADOW_VOLUME
	ShadowSizeX		= 32
	ShadowSizeY		= 24
	ShadowOffsetX	= -1
	ShadowTexture	= ShadowSpider2	;ShadowI

End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Object WildSpiderlingHorde

	AddModule
	Behavior = GrantUpgradeCreate ModuleTag_126247
		UpgradeToGrant = Upgrade_GandalfWhite  ;
	End 
	End

	ReplaceModule ModuleTag_ProductionLegality
	Behavior = StatusBitsUpgrade ModuleTag_ProductionLegality1
		TriggeredBy = Upgrade_GandalfWhite  ;Upgrade_WildSpiderVenomSacks
	End
	End

	ReplaceModule ModuleTag_BasicTraining
	Behavior = LevelUpUpgrade ModuleTag_BasicTraining1
		TriggeredBy			= Upgrade_GandalfWhite  ;Upgrade_WildBasicTraining
		LevelsToGain		= 1
		LevelCap			= 2
	End
	End


End

Object WildSpiderling
	
	Scale = 1.1

	WeaponSet
		Conditions			= None
		Weapon				= PRIMARY WildSpiderlingVenomMandibles
		AutoChooseSources	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End

	AddModule
	Behavior = GrantUpgradeCreate ModuleTag_126247
		UpgradeToGrant = Upgrade_GandalfWhite  ;
	End 
	End

	ReplaceModule ModuleTag_VenomUpgrade
	Behavior = WeaponSetUpgrade ModuleTag_VenomUpgrade1
		TriggeredBy				= Upgrade_GandalfWhite  ;Upgrade_WildSpiderVenomSacks
		CustomAnimAndDuration	= AnimState:USER_1 AnimTime:0
	End
	End

	ReplaceModule ModuleTag_Body
	Body = ActiveBody ModuleTag_Body1
		MaxHealth 		= 500
		MaxHealthDamaged 	= 250
		BurningDeathBehavior = Yes
		BurningDeathFX       = FX_InfantryBurningFlame
	End
	End


End



;^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
;4. EARTH REALM
;^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> Uglk <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<  
; Useable U's :    
;Reference: UglkRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;FXs
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

FXParticleSystem UglukBladeMaster
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXRing01.tga
    Lifetime = 15 15
    SortLevel = 1
    Size = 10 15
    BurstCount = 1 1
  End
  Color = DefaultColor
    Color2 = R:91 G:35 B:30 5
    Color3 = R:0 G:0 B:0 15
    Color4 = R:32 G:32 B:32 0
  End
  Update = DefaultUpdate
    SizeRate = 1 1
    SizeRateDamping = 1 1
    AngleZ = 0 7
    AngularRateZ = -0.1 0.1
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    Gravity = -0.01
    VelocityDamping = 1 1
  End
  EmissionVelocity = OutwardEmissionVelocity
  End
  EmissionVolume = SphereEmissionVolume
    Radius = 10
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem UglukFirebombHit
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXexplo01.tga
    Lifetime = 10 10
    SystemLifetime = 5
    SortLevel = 1
    Size = 5 5
    BurstCount = 2 2
  End
  Color = DefaultColor
    Color1 = R:249 G:168 B:55 0
    Color2 = R:0 G:0 B:0 10
  End
  Update = DefaultUpdate
    SizeRate = 80 160
    SizeRateDamping = 0.8 0.7
    AngleZ = -1 1
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    Gravity = 1
    VelocityDamping = 1 1
  End
  EmissionVelocity = OutwardEmissionVelocity
    Speed = 1 1
  End
  EmissionVolume = PointEmissionVolume
  End
  Draw = DefaultDraw
  End
End


FXParticleSystem FireBombFire1
  System
    Priority = ALWAYS_RENDER
    Type = GPU_PARTICLE
    ParticleName = EXFireScroll2.tga
    Lifetime = 5 5
    SortLevel = 1
    Size = 10 10
    BurstCount = 3 3
    IsEmitAboveGroundOnly = Yes
  End
  Color = DefaultColor
    Color2 = R:98 G:69 B:51 1
    Color3 = R:90 G:56 B:37 3
    Color4 = R:0 G:0 B:0 5
    ColorScale = -10 10
  End
  Update = DefaultUpdate
    SizeRate = -0.75 0
    SizeRateDamping = 1 1
    AngleZ = -7 7
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
  End
  EmissionVelocity = OutwardEmissionVelocity
  End
  EmissionVolume = PointEmissionVolume
  End
  Draw = GpuDraw
    FramesPerRow = 4
    TotalFrames = 16
    SpeedMultiplier = 1
  End
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
; New Fire bomb FX list
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

FXList FX_UglukFireBomb


;  ParticleSystem
;    Name = MorgothBlastFinalLight
;    Offset = X:0.0 Y:0.0 Z:10
;  End
  ParticleSystem
    Name = MeteorExpEmbers
    Offset = X:0.0 Y:0.0 Z:-1.0
  End

;  ParticleSystem
;    Name = MorgothBlastFinalShockWave
;    InitialDelay = 1 1 UNIFORM   ;In milliseconds
;    Offset = X:15.0 Y:0.0 Z:20.0
;  End


  ParticleSystem
    Name = ExplosiveMineFire02
    Offset = X:0.0 Y:0.0 Z:10.0
    OrientToObject = Yes
  End
  ParticleSystem
    Name = ExplosiveMineSparks
    Offset = X:0.0 Y:0.0 Z:10.0
    OrientToObject = Yes
  End
;  ParticleSystem
;    Name = ExplosiveMineFire
;    Offset = X:0.0 Y:0.0 Z:10.0
;    OrientToObject = Yes
;  End

;  ParticleSystem
;    Name = ExplosiveMineDebris
;    Offset = X:0.0 Y:0.0 Z:10.0
;    OrientToObject = Yes     
;  End


	ParticleSystem
		Name = FirebombHit
	End
	ParticleSystem
		Name = UglukFirebombHit
	End
	ParticleSystem
		Name = FirebombFlash
	End
	
	
	ParticleSystem
		Name = CorsairFireBombExplosion
	End


	ParticleSystem
		Name = CorsairFireBombExplosionGlow
	End

	DynamicDecal           ; A decal that belongs to nobody, but updates internally to fade and tint and such
                DecalName                   = EXScorch03
                Size                              = 400
                Color                             = R:250 G:240 B:230
                OpacityStart                  = 0
                OpacityFadeTimeOne     = 1500
                OpacityPeak                             = 215
                OpacityPeakTime                      = 10000
                OpacityFadeTimeTwo     = 27000
                OpacityEnd                               = 0
                StartingDelay     = 0
                Lifetime             = 29000
	End

  CameraShakerVolume
    Radius = 400
    Duration_Seconds = 1
    Amplitude_Degrees = 1.5
  End


  Sound
    Name = ImpactCatapultRock
  End
 
End


FXList FX_DainDieToRespawn1
  ParticleSystem
    Name = GandalfSwordHitSpark
    Offset = X:12.0 Y:0.0 Z:8.0
    OrientToObject = Yes
  End
  ParticleSystem
    Name = GandalfSwordHitFlash
    Offset = X:12.0 Y:0.0 Z:8.0
    OrientToObject = Yes
  End
End


FXList FX_DainInitialSpawn1
  Sound
	Name = GenericRespawn1
  End
  ParticleSystem
    Name = ResurrectionCenter
    Offset = X:0.0 Y:0.0 Z:5.0
    OrientToObject = Yes
  End
  ParticleSystem
    Name = ResurrectionLightShaft
    Offset = X:0.0 Y:0.0 Z:0.0
    OrientToObject = Yes
  End
  ParticleSystem
    Name = ResurrectionVortex
    Offset = X:0.0 Y:0.0 Z:5.0
    OrientToObject = Yes
  End
  ParticleSystem
    Name = ResurrectionWave
    Offset = X:0.0 Y:0.0 Z:5.0
    OrientToObject = Yes
  End
End


FXList FX_DainRespawn1
  Sound
	Name = GenericRespawn1
  End
  ParticleSystem
    Name = ResurrectionCenter
    Offset = X:0.0 Y:0.0 Z:5.0
    OrientToObject = Yes
  End
  ParticleSystem
    Name = ResurrectionLightShaft
    Offset = X:0.0 Y:0.0 Z:0.0
    OrientToObject = Yes
  End
  ParticleSystem
    Name = ResurrectionVortex
    Offset = X:0.0 Y:0.0 Z:5.0
    OrientToObject = Yes
  End
  ParticleSystem
    Name = ResurrectionWave
    Offset = X:0.0 Y:0.0 Z:5.0
    OrientToObject = Yes
  End
End


;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Special powers and modifiers
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

ModifierList UglukBladeMaster
	Category = SPELL
	Modifier = ARMOR 100%			// Additive.  Sum of these are subtracted from all entries in Armor.ini

	Duration = 30000				// lasts for 30 seconds
End

SpecialPower SpecialAbilityUglukBladeMaster
	Enum									  =	SPECIAL_HERO_MODE
	ReloadTime								  =	100000
	PublicTimer								  =	No
End

SpecialPower SpecialAbilityCreateAHeroFireBomb_Level4
	Enum			= SPECIAL_AT_VISIBLE_OBJECT
	ReloadTime		= 160000  ; in milliseconds
	PublicTimer		= No
	;// InitiateSound	= EomerSmiteSpearFly			// won't work because Eowyn also shares this
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Weapons
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<


Weapon UglukSword
  LeechRangeWeapon      = Yes
  AttackRange           = STANDARD_MELEE_ATTACK_RANGE
  MeleeWeapon           = Yes
  DelayBetweenShots     = GAMLING_DELAYBETWEENSHOTS 			
             ; time between shots, msec
  PreAttackDelay        = GAMLING_PREATTACKDELAY 				; 400 is sword swing delay time before contact with target.
  PreAttackType         = PER_SHOT ; Do the delay each time we attack a new target
  FireFX                = FX_GondorSwordHit
  FiringDuration        = GAMLING_FIRINGDURATION 				; Duration of the sword swing

  DamageNugget                        ; A basic Nugget that just does damage
    Damage        = 200					
    Radius        = 8.0 ; he swings his sword it should kill more then one unit if it does.
    DelayTime     = 0
    DamageType    = HERO
    DamageFXType  = SWORD_SLASH
    DeathType     = NORMAL
  End
End

Weapon UglukHeroSword
  LeechRangeWeapon      = Yes
  AttackRange           = STANDARD_MELEE_ATTACK_RANGE
  MeleeWeapon           = Yes
  DelayBetweenShots     = GAMLING_DELAYBETWEENSHOTS 			
             ; time between shots, msec
  PreAttackDelay        = GAMLING_PREATTACKDELAY 				; 400 is sword swing delay time before contact with target.
  PreAttackType         = PER_SHOT ; Do the delay each time we attack a new target
  FireFX                = FX_GondorSwordHit
  FiringDuration        = GAMLING_FIRINGDURATION 				; Duration of the sword swing

  DamageNugget                        ; A basic Nugget that just does damage
    Damage        = 400					
    Radius        = 16.0 ; he swings his sword it should kill more then one unit if it does.
    DamageType    = HERO
    DamageFXType  = SWORD_SLASH
    DeathType     = NORMAL
  End
	
	MetaImpactNugget                    ; A Nugget that throws things back with force
		HeroResist			= .75
		ShockWaveAmount			= 30.0
		ShockWaveRadius			= 5.0
		ShockWaveTaperOff		= 1
	End


End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
; New Fire Bomb Abillity
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Weapon UglukFireBombWarHead
	ProjectileCollidesWith	= ENEMIES
	RadiusDamageAffects		= ENEMIES ALLIES 
  	FireFX                = FX_UglukFireBomb

	DamageNugget
		Damage			= 2500
		Radius			= 100
		DamageType		= SIEGE
		DamageFXType	= FLAME
		DeathType		= EXPLODED  ;BURNED
		DamageScalar	= 40% NONE +STRUCTURE		; little bit less damage for buildings
		DamageScalar	= 50000% NONE +MINE ;// Make sure we one shot kill mines, without risking wasting some poor hero with a torch
		DamageSpeed	= 700
	End

	MetaImpactNugget                    ; A Nugget that throws things back with force
		HeroResist			= .75
		ShockWaveAmount			= 80.0
		ShockWaveRadius			= 50.0
		ShockWaveTaperOff		= 1
		ShockWaveSpeed			= 700
	End

	MetaImpactNugget                    ; A Nugget that throws things back with force
		HeroResist			= .75
		ShockWaveAmount			= 50.0
		ShockWaveRadius			= 130.0
		ShockWaveTaperOff		= 1
		ShockWaveSpeed			= 700
	End

End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;XP
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

ExperienceLevel	DainLevel3
	TargetNames						=	DwarvenDain
	RequiredExperience				=	DAIN_LVL3_EXP_NEEDED 
	ExperienceAward					=	DAIN_LVL3_EXP_AWARD	
	AttributeModifiers				=	HeroLevelUpDamage2
	Rank							=	3
	LevelUpFx						=	FX:GandalfLevelUp1FX
	Upgrades						=   Upgrade_AragornBladeMaster
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	SelectionDecal
		Texture						=	decal_hero_good	
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40 ;16
		MaxRadius					=	200 ;16
		MaxSelectedUnits			=	40 ;1
	End	
END	


ExperienceLevel	DainLevel5
	TargetNames						=	DwarvenDain
	RequiredExperience				=	DAIN_LVL5_EXP_NEEDED 
	ExperienceAward					=	DAIN_LVL5_EXP_AWARD	
	AttributeModifiers				=	HeroLevelUpDamage4
	Rank							=	5	
	LevelUpFx						=	FX:GandalfLevelUp1FX
	Upgrades						=   Upgrade_DreadVisage
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	SelectionDecal
		Texture						=	decal_hero_good	
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40 ;16
		MaxRadius					=	200 ;16
		MaxSelectedUnits			=	40 ;1
	End	
END	


ExperienceLevel	DainLevel10
	TargetNames						=	DwarvenDain
	RequiredExperience				=	DAIN_LVL10_EXP_NEEDED 
	ExperienceAward					=	DAIN_LVL10_EXP_AWARD	
  	AttributeModifiers				=	HeroLevelUpDamage9
	Rank							=	10
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	Upgrades						=   Upgrade_CreateAHeroFireBomb_Level4
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40 ;16
		MaxRadius					=	200 ;16
		MaxSelectedUnits			=	40 ;1
	End	
END	



;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;CommandButtons
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

CommandButton Command_CreateAHero_BerserkerRage_Level1   ;Command_SpecialAbilityBladeMaster
  Command                 = SPECIAL_POWER 
  SpecialPower            = SpecialAbilityUglukBladeMaster
  TextLabel               = CONTROLBAR:UglukBladeMaster
  ButtonImage             = HSAragornBladeMaster
  ButtonBorderType        = ACTION 
  DescriptLabel           = CONTROLBAR:ToolTipUglukBladeMaster
  InPalantir			  = Yes
  AutoAbility			  = Yes
  AutoDelay				  = 30.0 ; this should sync with the Aragorn's hero mode effect time
  PresetRange			  = 50.0
  ;UnitSpecificSound       = AragornVoiceBladeMaster
End


CommandButton Command_WitchKingDreadVisage
	Command                 = SPECIAL_POWER
	SpecialPower            = SpecialAbilityFakeLeadership
	Options					= NONPRESSABLE NEED_UPGRADE
	NeededUpgrade			= Upgrade_DreadVisage
	TextLabel               = CONTROLBAR:UglukDreadVisage
	ButtonImage             = HSNazgulDreadVisage
	RadiusCursorType        = TrainingRadiusCursor
	ButtonBorderType        = ACTION
	DescriptLabel           = CONTROLBAR:ToolTipUglukDreadVisage
	InPalantir				= Yes
End


CommandButton Command_CreateAHeroFireBomb_Level4
  Command			= SPECIAL_POWER 
  SpecialPower		= SpecialAbilityCreateAHeroFireBomb_Level4
  Options			= NEED_TARGET_ENEMY_OBJECT // NEED_TARGET_NEUTRAL_OBJECT CONTEXTMODE_COMMAND
  TextLabel			= CONTROLBAR:UglukBomb
  ButtonImage		= UCCommon_Firebomb
  CursorName		= Bombard
  ButtonBorderType	= ACTION 
  DescriptLabel		= CONTROLBAR:ToolTipUglukBomb
  InvalidCursorName	= GenericInvalid
  //UnitSpecificSound	= EomerVoiceModeThrow
  InPalantir		= Yes
  AutoAbility		= Yes
  PresetRange		= 200.0

End


CommandButton Command_SpecialAbilityDainLeadership
  Command					= SPECIAL_POWER
  SpecialPower				= SpecialAbilityFakeLeadership
  Options					= NONPRESSABLE
  TextLabel					= CONTROLBAR:UglukLeadership
  ButtonImage				= HSFaramirLeadership
  RadiusCursorType			= TrainingRadiusCursor  
  ButtonBorderType			= ACTION
  DescriptLabel				= CONTROLBAR:ToolTipUglukLeadership
  InPalantir				= Yes
  ;UnitSpecificSound		= TheodenVoiceSpeech
End



;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;CommandSet
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

CommandSet UglukCommandSet
	 1 = Command_ToggleStance
	 2 = Command_SpecialAbilityDainLeadership
	 3 = Command_CreateAHero_BerserkerRage_Level1   ;Command_SpecialAbilityBladeMaster
	 4 = Command_WitchKingDreadVisage
	 5 = Command_SpecialAbilityStubbornPride
	 6 = Command_CreateAHeroFireBomb_Level4


    	12 = Command_CaptureBuilding
	13 = Command_AttackMove
	14 = Command_Stop
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
; Ugluk Fire Bomb Object
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Object CorsairFireBombProjectile

	Scale = 1.3

	ReplaceModule ModuleTag_Draw
	Draw = W3DScriptedModelDraw ModuleTag_Draw1
		DefaultModelConditionState    
			Model = IBFMineProj  ;EXFirebomb
			;Model = NONE
			ParticleSysBone     = None FireBombFire1
;			Shadow			= SHADOW_ADDITIVE_DECAL
;			ShadowSizeX		= 150
;			ShadowSizeY		= 150
;			ShadowTexture	= MUCatapultFP01
;			ShadowMaxHeight   = 200
		End	
		
		IdleAnimationState
			Animation = EXFIREBOMB
			AnimationName = aslkhvgilaek  ;EXFIREBOMB.EXFIREBOMB
			AnimationMode = LOOP
			AnimationSpeedFactorRange = 0.3 0.3 ; this should make it go really slow
		End
			
			
	End
	End
	End ; not sure why but this needs another end, leave as self warning

	ReplaceModule ModuleTag_05
	Behavior = BezierProjectileBehavior ModuleTag_051
		FirstHeight						= 35	; Height of Bezier control points above highest intervening terrain
		SecondHeight					= 35
		FirstPercentIndent				= 20%	; Percentage of shot distance control points are placed
		SecondPercentIndent				= 90%
		GroundHitFX						= FX_UglukFireBomb
    		FlightPathAdjustDistPerSecond = 10
    		DetonateCallsKill = Yes
		CurveFlattenMinDist				= 5.0
	End
	End



  AddModule
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_DIELIKETHIS
    StartsActive = Yes
    DeathWeapon = UglukFireBombWarHead
  End
  End

  AddModule
  Behavior = FXListDie ModuleTag_06_Override111
    DeathTypes = ALL
    DeathFX = FX_UglukFireBomb
  End
  End



End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Object Uglk
;Reference: UglkObjectRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Object DwarvenDain

	BountyValue = 1000	

	EvaEventDieOwner 		= None

	RecruitText 	= CONTROLBAR:DwarvenDainRecruit
	ReviveText		= CONTROLBAR:DwarvenDainRevive

	RemoveModule Icon

	; make him a little big biger then the other uruks
	Scale = 1.1

	DisplayName = Uglk

	SelectPortrait = CPUruk
	ButtonImage = HICAHUrukhai


; this is where i took out what armors i want too and leave the ones i want
; and costume changes


; these are the 3 default uruk cah costumes
;	CHSS_UKLeather.tga
;	CHSS_UK.tga
;	CHSS_UK_FA.tga

	AddModule
	Behavior = GrantUpgradeCreate ModuleTag_1
		UpgradeToGrant = Upgrade_GandalfWhite  ;
	End 
	End

	AddModule
	Behavior = SubObjectsUpgrade Body_UKBOD01111111
		TriggeredBy			   = Upgrade_GandalfWhite
		UpgradeTexture		   = CHSS_UK.tga		0 CHSS_UKLeather.tga
		;UpgradeTexture		   = CHSS_UK_FA.tga	0 CHSS_UKLeather.tga
		RecolorHouse		   = No
	End
	End

	AddModule
	Behavior = SubObjectsUpgrade Ugluk_Upgrade1
	TriggeredBy			   = Upgrade_GandalfWhite
	;HideSubObjects		   = Uruk_Sword_01
	HideSubObjects		   = Belthronding
	;HideSubObjects		   = Uruk_Sword_02
	HideSubObjects		   = Uruk_Sword_03

	;HideSubObjects		   = SLDR_01
	;HideSubObjects		   = SLDR_02
	;HideSubObjects		   = SLDR_03

	;HideSubObjects		   = HLMT_01
	HideSubObjects		   = HLMT_02
	;HideSubObjects		   = HLMT_03
	HideSubObjects		   = HLMT_04

	;HideSubObjects		   = HAIR_01

	;HideSubObjects		   = GNLT_01
	;HideSubObjects		   = GNLT_02
	;HideSubObjects		   = GNLT_03

	;HideSubObjects		   = Shield_1OG
	;HideSubObjects		   = Shield_2OG
	;HideSubObjects		   = SHLD_01
	;HideSubObjects		   = SHLD_02

	;HideSubObjects		   = BOOT_01
	;HideSubObjects		   = BOOT_02
	;HideSubObjects		   = BOOT_03
	HideSubObjects		   = Gurthang

; one massive glitch that is now fixed! lol took me a fucking hour trying to find this BARREL to hide lol, it keeps apearing below his feet!
	HideSubObjects		   = BARREL

	FadeTimeInSeconds      = 0.0
	End
	End

;			Model               		= CHSS_UT_U_SKN
;			Skeleton            		= CHSS_UK_U_SKL

; uruk cah model is 	CHSS_UK_C_SKN
; here is the second model	CHSS_UT_U_SKN
; uruk cah Skeleton	CHSS_UK_C_SKL
; here is the 2nd skeleton	CHSS_UK_U_SKL

	;Draw module
	ReplaceModule ModuleTag_01
	Draw = W3DScriptedModelDraw ModuleTag_011

		DefaultModelConditionState
			Model               		= CHSS_UK_U_SKN
			Skeleton            		= CHSS_UK_U_SKL
			WeaponLaunchBone	= PRIMARY B_HandR
		End

		ModelConditionState = WEAPONSET_HERO_MODE
			ParticleSysBone = BAT_RIBS UglukBladeMaster FollowBone:Yes
		End


//-----------------------------------------------------------------------------
AnimationState = CREATE_A_HERO_IN_CREATION_SCREEN CREATE_A_HERO_SELECTED_CHEER
	StateName = STATE_SelectedCheer
	Animation = Foot_ATNB // Bored Idle
		AnimationName	   = CHSS_UK_C_ATNB CHSS_UK_C_ATND
		AnimationMode	   = ONCE
		AnimationPriority  = 90
		AnimationBlendTime = 20
	End
	Animation = Foot_ATND // Bored Fidget
		AnimationName	   = CHSS_UK_C_ATND CHSS_UK_C_ATNB
		AnimationMode	   = ONCE
		AnimationPriority  = 10
		AnimationBlendTime = 20
	End
	Animation = Foot_ATNE // Bored Fidget
		AnimationName	   = CHSS_UK_C_ATNE CHSS_UK_C_ATND CHSS_UK_C_ATNB
		AnimationMode	   = ONCE
		AnimationPriority  = 3
		AnimationBlendTime = 20
	End
	Flags =	RESTART_ANIM_WHEN_COMPLETE
	BeginScript //script to set transition from moving
		Prev = CurDrawablePrevAnimationState()
		if Prev == "STATE_Unselected" then 
			CurDrawableSetTransitionAnimState("Trans_SelectedCheer") 
		end
//  		if Prev == "STATE_SwapModels" then 
//  			CurDrawableSetTransitionAnimState("Trans_SwapModels") 
//  		end
	EndScript
End

AnimationState = CREATE_A_HERO_IN_CREATION_SCREEN
	StateName = STATE_Unselected
	Animation = Foot_ATNB // Bored Idle
		AnimationName       = CHSS_UK_C_ATNB CHSS_UK_C_ATND
		AnimationMode       = ONCE
		AnimationPriority   = 90
		AnimationBlendTime = 10
	End
	Animation = Foot_ATND // Bored Fidget
		AnimationName       = CHSS_UK_C_ATND CHSS_UK_C_ATNB
		AnimationMode       = ONCE
		AnimationPriority   = 10
		AnimationBlendTime = 10
	End
	Animation = Foot_ATNE // Bored Fidget
		AnimationName       = CHSS_UK_C_ATNE CHSS_UK_C_ATND CHSS_UK_C_ATNB
		AnimationMode       = ONCE
		AnimationPriority   = 3
		AnimationBlendTime = 10
	End
	Flags =	RESTART_ANIM_WHEN_COMPLETE
 	BeginScript //script to set transition from moving
 		Prev = CurDrawablePrevAnimationState()
 		if Prev == "STATE_SwapModels" then 
 			CurDrawableSetTransitionAnimState("Trans_SwapModels") 
 		end
 	EndScript
End

TransitionState = Trans_ExamineWeapon
	Animation = Transition
		AnimationName = CHSS_UK_C_WPNA
		AnimationMode = ONCE
		AnimationBlendTime = 20
	End
End
TransitionState = Trans_ExamineSelf
	Animation = Transition
		AnimationName = CHSS_UK_C_CLRA
		AnimationMode = ONCE
		AnimationBlendTime = 20
	End
End
TransitionState = Trans_SelectedCheer
	Animation = Transition
		AnimationName = CHSS_UK_C_SLCA
		AnimationMode = ONCE
		AnimationBlendTime = 20
	End
End

TransitionState = Trans_SwapModels
	StateName = STATE_Unselected
	Animation = Transition
		AnimationName = CHSS_UK_C_ATNB CHSS_UK_C_ATND
		AnimationMode = ONCE
		AnimationBlendTime = 0
	End
End


	



// --------- MOUNTED  ------------

;TransitionState				=	TRANS_Select
;	Animation
;		AnimationName		=	CHSS_UK_M_ATNA
;		AnimationMode		=	ONCE
;	End
;End


// --------- UNMOUNTED  ------------

//------------------  DYING -------------------------------------------------------------

// --- Flying through the air.
AnimationState        = STUNNED_FLAILING WEAPONSET_TOGGLE_1
	StateName           = STATE_Bow
	Animation
		AnimationName     = CHSS_UK_B_FLYA
		AnimationMode     = LOOP
	End
	Flags               = RANDOMSTART
End

AnimationState        = STUNNED_FLAILING 
	StateName           = STATE_Sword
	Animation
		AnimationName     = CHSS_UK_U_FLYA
		AnimationMode     = LOOP
	End
	Flags               = RANDOMSTART
End

// --- Dying anims
AnimationState        = DYING SPLATTED WEAPONSET_TOGGLE_1
	StateName           = STATE_Bow
	Animation
		AnimationName     = CHSS_UK_B_LNDA
		AnimationMode     = ONCE
	End
End

AnimationState        = DYING SPLATTED
	StateName           = STATE_Sword
	Animation
		AnimationName     = CHSS_UK_U_LNDA
		AnimationMode     = ONCE
	End
End

AnimationState        = DYING WEAPONSET_TOGGLE_1	//WEAPONSTATE_CLOSE_RANGE
	StateName           = STATE_Bow
	Animation
		AnimationName     = CHSS_UK_B_DIEA
		AnimationMode     = ONCE
	End
End

AnimationState        = DYING
	StateName           = STATE_Sword
	Animation
		AnimationName     = CHSS_UK_U_DIEA
		AnimationMode     = ONCE
	End
	Animation           = GUHero_DIEB
		AnimationName     = CHSS_UK_U_DIEB
		AnimationMode     = ONCE
	End
End


// --- Stunned anims


AnimationState        = STUNNED_STANDING_UP WEAPONSET_TOGGLE_1
	StateName           = STATE_Bow
	Animation
		AnimationName     = CHSS_UK_B_GTPA
		AnimationMode     = ONCE
		AnimationSpeedFactorRange = 1.5 1.5
	End
End

AnimationState        = STUNNED_STANDING_UP
	StateName           = STATE_Sword
	Animation
		AnimationName     = CHSS_UK_U_GTPA
		AnimationMode     = ONCE
		AnimationSpeedFactorRange = 1.5 1.5
	End
End

AnimationState        = STUNNED WEAPONSET_TOGGLE_1
	StateName           = STATE_Bow
	Animation
		AnimationName     = CHSS_UK_B_LNDA
		AnimationMode     = ONCE
	End
End

AnimationState        = STUNNED 
	StateName           = STATE_Sword
	Animation           = GUHero_LNDA
		AnimationName     = CHSS_UK_U_LNDA
		AnimationMode     = ONCE
	End
End				

//------------------ SPECIAL POWER ANIMS ---------------------


// RAIN OF ARROWS SPECIAL POWER //
AnimationState				= PACKING_TYPE_1  WEAPONSET_TOGGLE_1
	StateName				= rainofarrows
	Animation
		AnimationName		= CHSS_UK_B_ATKA2
		AnimationMode		= LOOP
	End
//			FXEvent	= Frame:6	Name: FX_SarumanDominateAtSelf
End

// DOMINATE SPECIAL POWER //
AnimationState				= PACKING_TYPE_1
	StateName				= Curse
	Animation
		AnimationName		= CHSS_UK_U_LVLA
		AnimationMode		= ONCE
	End
//			FXEvent	= Frame:6	Name: FX_SarumanDominateAtSelf
End

// TELEPORT SPECIAL POWER //
AnimationState				= PACKING_TYPE_3
	StateName				= Curse
	Animation
		AnimationName		= CHSS_UK_U_SPCA
		AnimationMode		= ONCE
	End
//			FXEvent	= Frame:6	Name: FX_SarumanDominateAtSelf
End

//--------------------- Wound Arrow anim
AnimationState        =  SPECIAL_WEAPON_TWO
	StateName = STATE_Bow
	Animation
		AnimationName       = CHSS_UK_U_SPCL CHSS_UK_U_ATKC
		AnimationMode       = ONCE
	End
	FrameForPristineBonePositions = 59
	BeginScript
		CurDrawableShowSubObject("arrow")
	EndScript
End
		
//------------------ ATTACKING --------------------------------------------------------------------
		// Attacking Anims [Weapon_A]

		AnimationState        = MOVING WEAPONSET_TOGGLE_1 FIRING_OR_PREATTACK_A
			Animation           = TrotAndFire
				AnimationName       = CHSS_UK_U_ATRA
				AnimationMode       = LOOP
			End
			Flags               = RANDOMSTART
			StateName = RunAndSwing
		End
		
		AnimationState        = FIRING_OR_PREATTACK_A WEAPONSET_TOGGLE_1
			StateName           = STATE_Sword	
			Animation           = ATKD
				AnimationName     = CHSS_UK_U_ATKD
				AnimationMode     = ONCE
				UseWeaponTiming		= Yes
				AnimationSpeedFactorRange = 1.149 1.149
			End
			
			Animation           = ATKE
				AnimationName    = CHSS_UK_U_ATKE
				AnimationMode     = ONCE
				UseWeaponTiming		= Yes
				AnimationSpeedFactorRange = 1.149 1.149
			End
			
			Animation           = ATKF
				AnimationName    = CHSS_UK_U_ATKF
				AnimationMode     = ONCE
				AnimationSpeedFactorRange = 1.47 1.47
			End
			Flags				=	RESTART_ANIM_WHEN_COMPLETE
			//	FrameForPristineBonePositions = 59
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Bow" then CurDrawableSetTransitionAnimState("TRANS_BowToSword") end
			EndScript
		End


		AnimationState				= FIRING_OR_PREATTACK_A // Melee attack.
			Animation
				AnimationName		= CHSS_UK_U_ATKA
				AnimationMode		= ONCE
				UseWeaponTiming		= Yes
				AnimationSpeedFactorRange = 1.2 1.2
			End
			Animation
				AnimationName		= CHSS_UK_U_ATKB
				AnimationMode		= ONCE
				UseWeaponTiming		= Yes
				AnimationSpeedFactorRange = 1.2 1.2
			End
			Animation
				AnimationName		= CHSS_UK_U_ATKC
				AnimationMode		= ONCE
				UseWeaponTiming		= Yes
				AnimationSpeedFactorRange = 1.2 1.2
			End
		End

		
//------------------ MOVING -------------------------------------------------------------

		AnimationState        = MOVING USER_4                 // Moving slaughter
			StateName           = Slaughter
			Flags               = RANDOMSTART
			//ParticleSysBone     = None InfantryDustTrails
			Animation           = GUHero_ATKE
				AnimationName     = CHSS_UK_U_ATKE
				AnimationMode     = LOOP
			End
			StateName           = NoSword
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Sword" then CurDrawableSetTransitionAnimState("TRANS_SwordToBow") end
			EndScript
		End

		//--- Running with bow
		AnimationState			= MOVING WEAPONSET_TOGGLE_1		//WEAPONSTATE_CLOSE_RANGE
			StateName           = STATE_RunningBow
			Flags               = RANDOMSTART
			//ParticleSysBone    = None InfantryDustTrails
			Animation
				AnimationName   = CHSS_UK_B_RUNA
//				AnimationMode   = LOOP
				AnimationSpeedFactorRange = 0.85 0.85
//				Distance		= 28
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwordToBow") end
				if Prev == "STATE_RunningSword" then CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Running") end
				if Prev == "STATE_Rappelling"  then CurDrawableSetTransitionAnimState("Trans_RappellingToRunning_WeaponToggle") return end
			EndScript
		End

		//--- Running with sword
		AnimationState			= MOVING
			StateName           = STATE_RunningSword
			Flags               = RANDOMSTART
			//ParticleSysBone    = None InfantryDustTrails
			Animation
				AnimationName   = CHSS_UK_U_RUNA
//				AnimationMode   = LOOP
				AnimationSpeedFactorRange = 0.85 0.85
//				Distance = 28
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Bow" then CurDrawableSetTransitionAnimState("TRANS_BowToSword") end
				if Prev == "STATE_RunningBow" then CurDrawableSetTransitionAnimState("TRANS_BowToSword_Running") end
				if Prev == "STATE_Rappelling"  then CurDrawableSetTransitionAnimState("Trans_RappellingToRunning") return end
			EndScript
		End

		//---------------------------------------------------
		//New style firing with bow


		//---------------------------------------------------

		AnimationState				= FIRING_OR_PREATTACK_A WEAPONSET_TOGGLE_1
			StateName				= STATE_Firing
			Animation
				AnimationName		= CHSS_UK_B_ATKA1
				AnimationMode		= ONCE
				UseWeaponTiming		= No			// UseWeaponTiming plus random weapon field equals desync.  Leaving as warning
			End
		End

		AnimationState				= FIRING_OR_PREATTACK_A // Melee attack.
			Animation
				AnimationName		= CHSS_UK_U_ATKA1 CHSS_UK_U_ATKA CHSS_UK_U_ATKB
				AnimationMode		= ONCE
				UseWeaponTiming		= Yes
			End
		End


		
//-------------------- HIT REACTIONS -----------------------------------------------------------

// this hit animation attack stance
		AnimationState = EMOTION_ALERT HIT_REACTION WEAPONSET_TOGGLE_1
			Animation
				AnimationName = CHSS_UK_B_HITA
				AnimationMode = ONCE
			End
		End

		AnimationState = HIT_REACTION WEAPONSET_TOGGLE_1
			Animation
				AnimationName = CHSS_UK_B_HITA
				AnimationMode = ONCE
			End
		End

		AnimationState = HIT_REACTION
			Animation = Sword_HITA
				AnimationName = CHSS_UK_U_HITA
				AnimationMode = ONCE
			End
			Animation = Sword_HITB
				AnimationName = CHSS_UK_U_HITB
				AnimationMode = ONCE
			End

			BeginScript
				PrevAnim = CurDrawablePrevAnimation()
				if PrevAnim == "Foot_IDLB"
				then
					return "Sword_HITB"
				else
					return "Swort_HITA"
				end
			EndScript
		End

//------------ SPECIAL POWERS ------------------------------------------------------------------		

		AnimationState				= SPECIAL_POWER_1							; Aragorn shouting Elendil anim
			StateName				= STATE_ready
			Animation
				AnimationName		= CHSS_UK_U_SPCA
				AnimationMode		= ONCE
			End
			ParticleSysBone			= B_SWORDBONE ElendilFlare FollowBone:yes
			ParticleSysBone			= B_SWORDBONE ElendilSwordFlare FollowBone:yes
;			FXEvent	= Name: FX_ElendilGlowEvent
		End

		// WORD OF POWER ANIMS ON FOOT //
		AnimationState		  =	SPECIAL_WEAPON_ONE
			StateName		  =	Attacking
			Animation
				AnimationName =	CHSS_UK_U_SPCA
				AnimationMode =	ONCE
			End
			//FXEvent			  =	Frame:5	Name:FX_GandalfPreAttackBlast
		End


	
		//	WIZARD BLAST ANIMS ON FOOT //
		AnimationState		  =	SPECIAL_WEAPON_TWO
			StateName		  =	Attacking
			Animation
				AnimationName =	CHSS_UK_U_SPCB CHSS_UK_U_ATKA
				AnimationMode =	ONCE
			End
		End

		//	ISTARI LIGHT STAFF WEAPON ON FOOT //
		AnimationState		  =	SPECIAL_WEAPON_THREE // FIRING_OR_PREATTACK_C
			StateName		  =	Attacking
			Animation		  =	StaffLaser
				AnimationName =	CHSS_UK_U_SPCE CHSS_UK_U_ATKA
				AnimationMode =	ONCE
			End
			FXEvent			  =	Frame:30 Name:FX_GandalfStaffFlare
		End
		
		; Throwing and cripple strike
		AnimationState		  =	SPECIAL_WEAPON_FOUR
			StateName		  =	Attacking
			Animation
				AnimationName =	CHSS_UK_U_SPCD
				AnimationMode =	ONCE
			End
			FrameForPristineBonePositions	= 44
		End

		AnimationState		  =	SPECIAL_WEAPON_FIVE
			StateName		  =	Attacking
			Animation
				AnimationName =	CHSS_UK_U_SPCE
				AnimationMode =	ONCE
			End
		End

		AnimationState		  =	SPECIAL_WEAPON_SIX
			StateName		  =	Attacking
			Animation
				AnimationName =	CHSS_UK_U_SPCF
				AnimationMode =	ONCE
			End
		End

		//	Special Power 1
		AnimationState		  =	PACKING_TYPE_1 UNPACKING
			StateName		  =	Attacking
			Animation		  =	LightningSwordStart
				AnimationName =	CHSS_UK_U_SPCC CHSS_UK_U_ATKA
				AnimationMode =	ONCE
			End
			FXEvent			  =	Frame:14 Name:FX_CreateAHeroLightningCharge
//			FXEvent			  =	Frame:70 Name:FX_GandalfLightningFizzle
			FXEvent			  =	Frame:14 Name:FX_GandalfLightningSword	FrameStop:70
		End
	
		AnimationState		  =	PACKING_TYPE_1 PREPARING
			StateName		  =	Attacking
			Animation		  =	LightningSwordLoop
				AnimationName =	CHSS_UK_U_SPCA CHSS_UK_U_ATKA
				AnimationMode =	LOOP
			End
		End

		AnimationState		  =	PACKING_TYPE_1 PACKING
			StateName		  =	Attacking
			Animation		  =	LightningSwordPutAway
				AnimationName =	CHSS_UK_U_SPCB CHSS_UK_U_ATKA
				AnimationMode =	ONCE
			End
		End

		// (specific) dwarf train allies.
		AnimationState		  =	PACKING_TYPE_2 CREATE_A_HERO_20 CREATE_A_HERO_21
			Animation
				AnimationName =	CHSS_UK_U_SPCC
				AnimationMode =	LOOP
			End
		End

		//	Special Power 2
		AnimationState		  =	PACKING_TYPE_2 UNPACKING
			StateName		  =	Attacking
			Animation		  =	LightningSwordStart
				AnimationName =	CHSS_UK_U_SPCC CHSS_UK_U_ATKA
				AnimationMode =	ONCE
			End
			FXEvent			  =	Frame:14 Name:FX_CreateAHeroLightningCharge
//			FXEvent			  =	Frame:70 Name:FX_GandalfLightningFizzle
			FXEvent			  =	Frame:14 Name:FX_GandalfLightningSword	FrameStop:70
		End
	
		AnimationState		  =	PACKING_TYPE_2 PREPARING
			StateName		  =	Attacking
			Animation		  =	LightningSwordLoop
				AnimationName =	CHSS_UK_U_SPCA CHSS_UK_U_ATKA
				AnimationMode =	LOOP
			End
		End

		AnimationState		  =	PACKING_TYPE_2 PACKING
			StateName		  =	Attacking
			Animation		  =	LightningSwordPutAway
				AnimationName =	CHSS_UK_U_SPCB CHSS_UK_U_ATKA
				AnimationMode =	ONCE
			End
		End
		
//----------- Captain of Gondor - Sword --------------------------------------------
		AnimationState        = PACKING_TYPE_2 WEAPONSET_TOGGLE_1
			StateName		  =	CaptainPower
			Animation           = GUHero_CHRC
				AnimationName     = CHSS_UK_U_CHRC
				AnimationMode     = ONCE
				AnimationSpeedFactorRange = 1.2 1.2
			End
		End

//----------- Captain of Gondor - Bow -----------------------------------------------
		AnimationState        = PACKING_TYPE_2
			StateName		  =	STATE_CaptainBow
			Animation           = GUHero_CHRD
				AnimationName     = CHSS_UK_U_SPCE CHSS_UK_U_SPCA CHSS_UK_U_CHRD
				AnimationMode     = ONCE
//				AnimationSpeedFactorRange = 0.75 0.75
			End
		End

		//	Special Power 3
		AnimationState		  =	PACKING_TYPE_3 UNPACKING
			StateName		  =	Attacking
			Animation		  =	LightningSwordStart
				AnimationName =	CHSS_UK_U_SPCC CHSS_UK_U_ATKA
				AnimationMode =	ONCE
			End
			FXEvent			  =	Frame:14 Name:FX_CreateAHeroLightningCharge
//			FXEvent			  =	Frame:70 Name:FX_GandalfLightningFizzle
			FXEvent			  =	Frame:14 Name:FX_GandalfLightningSword	FrameStop:70
		End
	
		AnimationState		  =	PACKING_TYPE_3 PREPARING
			StateName		  =	Attacking
			Animation		  =	LightningSwordLoop
				AnimationName =	CHSS_UK_U_SPCA CHSS_UK_U_ATKA
				AnimationMode =	LOOP
			End
		End

		AnimationState		  =	PACKING_TYPE_3 PACKING
			StateName		  =	Attacking
			Animation		  =	LightningSwordPutAway
				AnimationName =	CHSS_UK_U_SPCB CHSS_UK_U_ATKA
				AnimationMode =	ONCE
			End
		End
		
		//	Special Power 4
		AnimationState		  =	PACKING_TYPE_4 UNPACKING	  
			Animation		  
				AnimationName =	CHSS_UK_U_SPCA
				AnimationMode =	ONCE
			End
		End
	
		AnimationState		  =	PACKING_TYPE_4 PREPARING
			Animation		 
				AnimationName =	CHSS_UK_U_SPCA
				AnimationMode =	ONCE
			End
		End

		AnimationState		  =	PACKING_TYPE_4 PACKING
			Animation		  
				AnimationName =	CHSS_UK_U_SPCA
				AnimationMode =	ONCE
			End
		End
		
		//	Special Power 5
		
		//		AnimationState		  =	PACKING_TYPE_5 UNPACKING WEAPONSET_TOGGLE_1  


		AnimationState		  =	PACKING_TYPE_5 PACKING WEAPONSET_TOGGLE_1
			Animation		  
				AnimationName =	CHSS_UK_B_SPCB
				AnimationMode =	ONCE
				AnimationSpeedFactorRange = 0.7333 0.7333
			End
		End


		AnimationState		  =	PACKING_TYPE_5 PACKING
			Animation		  
				AnimationName =	CHSS_UK_U_SPCB
				AnimationMode =	ONCE
			End
		End
		

		AnimationState		  =	PACKING_TYPE_6 PACKING
			Animation		  
				AnimationName =	CHSS_UK_U_SPCD
				AnimationMode =	ONCE
			End
		End




//====== LEVELED
		AnimationState				= LEVELED WEAPONSET_TOGGLE_1	// This state clears itself in 3 seconds
			Animation				= LevelUp
				AnimationName		= CHSS_UK_B_CHRA CHSS_UK_B_LVLA
				AnimationMode		= ONCE
			End
		End

		AnimationState				= LEVELED 						// This state clears itself in 3 seconds
			Animation				= LevelUp
				AnimationName		= CHSS_UK_U_CHRA CHSS_UK_U_LVLA
				AnimationMode		= ONCE
			End
		End

//---------------------- EMOTIONS ---------------------------------------------------------------



		// cheer, on foot
		AnimationState				=	EMOTION_CELEBRATING
			Animation CHRA
				AnimationName		=	CHSS_UK_U_CHRA CHSS_UK_U_TNTA 
				AnimationMode		=	ONCE
			End
			Animation CHRB
				AnimationName		=	CHSS_UK_U_CHRB CHSS_UK_U_CHRA CHSS_UK_U_TNTA 
				AnimationMode		=	ONCE
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End

		
		// taunt, on foot
		AnimationState				=	EMOTION_TAUNTING
			Animation CHRA
				AnimationName		=	CHSS_UK_U_TNTA 
				AnimationMode		=	ONCE
			End
			Animation CHRB
				AnimationName		=	CHSS_UK_U_TNTB CHSS_UK_U_TNTA
				AnimationMode		=	ONCE
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End
		
		


//====== ENGAGED
		AnimationState				= ENGAGED
			StateName				= STATE_ready
			Animation
				AnimationName		= CHSS_UK_U_IDLA
				AnimationMode		= ONCE
			End
		End


		IdleAnimationState
			StateName					= STATE_Idle_Sword	
			Animation = Foot_IDLB // Bored Idle
				AnimationName       = CHSS_UK_U_IDLB
				AnimationMode       = ONCE
				AnimationPriority   = 20
				AnimationBlendTime	=	25
			End
			Animation = Foot_IDLC // Bored Fidget
				AnimationName       = CHSS_UK_U_IBFA
				AnimationMode       = ONCE
				AnimationPriority   = 5
				AnimationBlendTime	=	25
			End
			Animation = Foot_IDLD // Bored Fidget
				AnimationName       = CHSS_UK_U_IBFB
				AnimationMode       = ONCE
				AnimationPriority   = 5
				AnimationBlendTime	=	25
			End
			Animation = Foot_IDLE // Bored Fidget
				AnimationName       = CHSS_UK_U_ATNB
				AnimationMode       = ONCE
				AnimationPriority   = 5
				AnimationBlendTime	=	25
			End
			Animation = Foot_IDLF // Bored Fidget
				AnimationName       = CHSS_UK_U_IDLA
				AnimationMode       = ONCE
				AnimationPriority   = 5
				AnimationBlendTime	=	25
			End

			BeginScript
				CurDrawableHideSubObject("arrow")
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Selected_Sword" then CurDrawableSetTransitionAnimState("TRANS_SelectedToBoredSword") end
				if Prev == "STATE_Idle_Bow" then CurDrawableSetTransitionAnimState("TRANS_BowToSword") end
			EndScript
		End
		

	//---transitions--------------------------------------------

		TransitionState = TRANS_BoredToSelectedSword
		// Once we have proper animations for enter -> idle -> exit, fix this properly.
			Animation = ANTD
				AnimationName	= CHSS_UK_U_ATNA CHSS_UK_U_ATND CHSS_UK_U_IDLA
				AnimationMode	= ONCE
			End		
		End
		
		TransitionState = TRANS_SelectedToBoredSword
			Animation			= ATNF
				AnimationName	= CHSS_UK_U_ATNC CHSS_UK_U_ATNF CHSS_UK_U_ATNE
				AnimationMode	= ONCE
			End		
		End	

	End
	End

	ReplaceModule ModuleTag_RespawnUpdate
	Behavior = RespawnUpdate ModuleTag_RespawnUpdate1
		DeathAnim					= DYING					;//Model condition to play when killed-to-respawn
		DeathFX						= FX_DainDieToRespawn1	;//FXList to play when killed-to-respawn
		DeathAnimationTime			= 4100					;//How long DeathAnim will take.
		InitialSpawnFX				= FX_DainInitialSpawn1
		RespawnAnim					= LEVELED				;//Animation to play when respawning.
		RespawnFX					= FX_DainRespawn1		;//FXList to play when respawning.
		RespawnAnimationTime		= 2000					;//Time it takes for respawn to play.
		AutoRespawnAtObjectFilter	= NONE +CASTLE_KEEP		;//Respawn at this location -- and at it's exit production point if possible.
		ButtonImage					= HICAHUrukhai
		
		;//RespawnEntries determine the ruleset for how a character can be revived. Some units may automatically respawn, others
		;//may require a specific revive action performed on him. You can specify different values for each level... or use Level:Any
		RespawnRules =	AutoSpawn:No			Cost:1875		Time:60000		Health:100%		;//DEFAULT VALUES
	End
	End


	Side				= Isengard

	WeaponSet
		Conditions 			= None 
		Weapon     			= PRIMARY  UglukSword  		
		AutoChooseSources	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI		
	End

	WeaponSet
		Conditions		= WEAPONSET_HERO_MODE
		Weapon			= PRIMARY    UglukHeroSword
	End

	ArmorSet
		Conditions      = None
		Armor           = ToughHeroArmor
		DamageFX        = NormalDamageFX
	End

	CommandSet  = UglukCommandSet

	CommandPoints = 50

			VoiceAttack 							= HeroUrukHaiVoiceAttack
			VoiceAttackAir							= HeroUrukHaiVoiceAttack
			VoiceAttackCharge 						= HeroUrukHaiVoiceAttack
			VoiceAttackMachine 						= HeroUrukHaiVoiceAttack
			VoiceAttackStructure 					= HeroUrukHaiVoiceAttack
			VoiceCreated							= HeroUrukHaiVoiceSalute
			VoiceFear								= HeroUrukHaiVoiceHelpMe
			VoiceFullyCreated						= HeroUrukHaiVoiceSalute
			VoiceGuard								= HeroUrukHaiVoiceMove
			VoiceMove 								= HeroUrukHaiVoiceMove
			VoiceMoveToCamp 						= HeroUrukHaiVoiceMove
			VoiceMoveWhileAttacking 				= HeroUrukHaiVoiceMove
			VoicePriority							= 70
			VoiceRetreatToCastle 					= HeroUrukHaiVoiceMove
			VoiceSelect 							= HeroUrukHaiVoiceSelectMS
			VoiceSelectBattle  						= HeroUrukHaiVoiceSelectBattle
		
			SoundImpact								= ImpactHorse
		
			UnitSpecificSounds
				VoiceEnterUnitElvenTransportShip	= HeroUrukHaiVoiceMove
				VoiceEnterUnitMordorMumakil			= HeroUrukHaiVoiceMove
				VoiceEnterUnitSlaughterHouse		= HeroUrukHaiVoiceMove
				VoiceEnterUnitTransportShip			= HeroUrukHaiVoiceMove
				VoiceGarrison						= HeroUrukHaiVoiceMove
				VoiceInitiateCaptureBuilding		= HeroUrukHaiVoiceCaptureBuilding
			End

	CrowdResponseKey = Uruk

	ReplaceModule ModuleTag_RespawnBody
	Body = RespawnBody ModuleTag_RespawnBody1
		CheerRadius 				= EMOTION_CHEER_RADIUS
		MaxHealth         			= 3500	;//BALANCE Dain Health
		PermanentlyKilledByFilter	= NONE			;//Who kills me permanently?
   		DodgePercent      			= 80%	
	End
	End

	ReplaceModule ModuleTag_DainHealing
	Behavior = AutoHealBehavior ModuleTag_UglukHealing
		StartsActive			= Yes
		HealingAmount			= 60
		HealingDelay			= 1000
		StartHealingDelay		= HERO_HEAL_DELAY
		HealOnlyIfNotInCombat	= Yes
	End
	End

	LocomotorSet
		Locomotor = RohanGimliLocomotor
		Condition = SET_NORMAL 
		Speed     = 55
	End



;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Blade Master
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

	AddModule
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_AragornBladeMasterEnabler
		SpecialPowerTemplate = SpecialAbilityUglukBladeMaster
		TriggeredBy = Upgrade_AragornBladeMaster
	End
	End

	AddModule
  	Behavior = SpecialPowerModule ModuleTag_AragornBladeMasterStarter                ; SpecialAbility is a SpecialPower, SpecialPower is anyting special
		SpecialPowerTemplate    = SpecialAbilityUglukBladeMaster
		StartsPaused			= Yes
	End
	End

	AddModule
	Behavior = HeroModeSpecialAbilityUpdate ModuleTag_AragornBladeMasterUpdate   ; So the difference in SpecialAbility is that it takes timing from this Update, instead of simply firing.
		SpecialPowerTemplate    = SpecialAbilityUglukBladeMaster
		HeroAttributeModifier	= UglukBladeMaster
		HeroEffectDuration		= 30000 ; this should sync with the auto ability delay re-fire time in commandButtons.ini
		UnpackTime              = 1 ; insant unpack
		TriggerSound			= AragornBladeMaster
	End
	End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Dread Visage
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

	AddModule
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_DreadVisage
		SpecialPowerTemplate		= SpecialAbilityFakeLeadership
		TriggeredBy					= Upgrade_DreadVisage
	End
	End

	AddModule
	Behavior = SpecialPowerModule ModuleTag_DreadVisageUpdate
		SpecialPowerTemplate		= SpecialAbilityFakeLeadership
		UpdateModuleStartsAttack	= Yes
		StartsPaused				= Yes
	End
	End

	AddModule
	Behavior = AttributeModifierAuraUpdate ModuleTag_DreadVisageAura
		StartsActive	= No														;If no, requires upgrade to turn on.
		TriggeredBy		= Upgrade_DreadVisage
		RefreshDelay	= 2000
		Range			= WITCHKING_DREADVISAGE_EFFECT_RADIUS
		TargetEnemy		= Yes
		AntiCategory	= LEADERSHIP BUFF
		BonusName		= GenericDebuff
		ObjectFilter	= ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION  -HERO -HORDE
	End
	End

	AddModule
	Behavior = RadiateFearUpdate ModuleTag_DreadVisageFear
		InitiallyActive						= No
		TriggeredBy							= Upgrade_DreadVisage
		WhichSpecialPower					= 1
		GenerateFear						= Yes
		EmotionPulseRadius					= WITCHKING_DREADVISAGE_EFFECT_RADIUS
		EmotionPulseInterval				= 2000
	End	
	End
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Fire Bomb
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

	AddModule
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_CreateAHeroFireBombEnabler_Level4
		SpecialPowerTemplate = SpecialAbilityCreateAHeroFireBomb_Level4
		TriggeredBy = Upgrade_CreateAHeroFireBomb_Level4
	End
	End

	AddModule
	Behavior = SpecialPowerModule ModuleTag_CreateAHeroFireBombStarter_Level4
		SpecialPowerTemplate	 = SpecialAbilityCreateAHeroFireBomb_Level4
		UpdateModuleStartsAttack = Yes
		StartsPaused			 = Yes
		InitiateSound			= HeroUrukHaiVoiceAttack
	End
	End

	AddModule
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_CreateAHeroFireBombUpdate_Level4
		SpecialPowerTemplate    = SpecialAbilityCreateAHeroFireBomb_Level4

		UnpackTime              = 1500
		PackTime                = 2000 

		AwardXPForTriggering    = 0
	
		StartAbilityRange		= 300
		ApproachRequiresLOS		= Yes
	
		SpecialWeapon = CreateAHeroFireBomb_Level4  ; basicly u cant change this or the weapon but u can add a weapon to the object death module
		WhichSpecialWeapon = 4
	End
	End


End


;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Beserker Horde
;Reference: BeserkerHordeRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Weapon NewIsengardBerserkerSword   ; BALANCE Berserker Weapon
  LeechRangeWeapon      = Yes
  AttackRange           = STANDARD_MELEE_ATTACK_RANGE
  MeleeWeapon           = Yes
  DelayBetweenShots     = ISENGARD_BERSERKER_DELAYBETWEENSHOTS            ; time between shots, msec
  PreAttackDelay        = ISENGARD_BERSERKER_PREATTACKDELAY             ; 433 is natural time of the stabbing animation.
  PreAttackType         = PER_SHOT ; Do the delay each time we attack a new target
  FiringDuration        = ISENGARD_BERSERKER_FIRINGDURATION            ; min 600 for anim
  FireFX                = FX_GondorSwordHit
  

  DamageNugget                        ; A basic Nugget that just does damage
    Damage        = 250 ; - 50 damage of default. + Damage Arc
    Radius        = 10 ;-5 radius of default.
    DelayTime     = 0
    DamageType    = SLASH  ;HERO
    DamageFXType  = SWORD_SLASH
    DeathType     = NORMAL
    DamageArc	  = ISENGARD_BERSERKER_ARC
  End	

;  MetaImpactNugget      ; A Nugget that throws things back with force
;    ShockWaveAmount   = 20.0
;    ShockWaveRadius   = 10.0
;    ShockWaveTaperOff = 1.0
;    ShockWaveArc      = 90
;    HeroResist		  = 0.90		; 90% resistance to heroes
;  End


End

ChildObject DwarvenGuardian IsengardBeserker 

	WeaponSet
		Conditions = None 
		Weapon = PRIMARY    NewIsengardBerserkerSword
	End

	BountyValue = 50	

	CommandPoints = 5

	AddModule	
	Behavior = ExperienceLevelCreate ModuleTag_MPLevelBonus1
		LevelToGrant = 2
		;MPOnly = Yes
	End
	End

	DisplayName = OBJECT:IsengardBeserker

	CrushableLevel = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrusherLevel = 0 ;What can I crush?: 0 = small animals, 1 = infantry, 2 = trees, 3 = vehicles
	CrushRevengeWeapon = RangedInfantryCrushRevenge

	CommandSet = IsengardBeserkerHordeCommandSet

	Side				= Isengard
	ThreatLevel			= ISENGARD_BESERKER_THREAT_LEVEL


	VisionRange = ISENGARD_BERSERKER_VISION_RANGE  
	ShroudClearingRange = ISENGARD_BERSERKER_SHROUD_RANGE
	
	VisionSide = 35%
	VisionRear = 25%
	
	MaxVisionBonusPercent = 300%
	VisionBonusTestRadius = 200
	VisionBonusPercentPerFoot = 2.0%

	VoiceAttack				= BerserkerVoiceAttackMS
	VoiceAttackCharge			= BerserkerVoiceAttackCharge
	;VoiceCombineWithHorde		= BerserkerVoiceMove
	VoiceCreated			= EVA:BerserkerCreated
	VoiceFullyCreated 		= EVA:BerserkerCreated
	VoiceMove				= BerserkerVoiceMoveMS
	VoicePriority			= 14
	VoiceSelect				= BerserkerVoiceSelectMS
	VoiceSelectBattle 		= BerserkerVoiceSelectBattle
	VoiceGuard				= BerserkerVoiceMove
	
	VoiceEnterStateAttack		= BerserkerVoiceEnterStateAttack
	VoiceEnterStateAttackCharge	= BerserkerVoiceEnterStateAttackCharge	
	
	UnitSpecificSounds
		VoiceEnter							= BerserkerVoiceMoveMS				;for entering SiegeLadder
		VoiceEnterUnitEvilMenTransportShip	= BerserkerVoiceMoveMS
		VoiceEnterUnitMordorMumakil			= BerserkerVoiceMoveMS
		VoiceEnterUnitSlaughterHouse		= BerserkerVoiceMoveMS
		VoiceGarrison						= BerserkerVoiceMoveMS
		VoiceInitiateCaptureBuilding		= BerserkerVoiceMoveMS
	End

	CrowdResponseKey = Uruk

	LocomotorSet
		Locomotor     = BerserkerLocomotor ; HumanLocomotor
		Condition     = SET_NORMAL
		Speed         = 50  ;NORMAL_ISENGARD_FAST_MEMBER_SPEED
	End

	ReplaceModule ModuleTag_02
	Body = ActiveBody ModuleTag_021
		MaxHealth         = 500   ;
		MaxHealthDamaged  = ISENGARD_BERSERKER_HEALTH_DAMAGED		
		BurningDeathBehavior	= Yes
		BurningDeathFX			= FX_InfantryBurningFlame
		CheerRadius				= EMOTION_CHEER_RADIUS
    	DodgePercent      = 80%

	End
	End		
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

CommandSet IsengardBeserkerHordeCommandSet
	1	= Command_ToggleStance	
	12	= Command_CaptureBuilding
	13	= Command_AttackMove
	14	= Command_Stop
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Object DwarvenGuardianHorde

	AddModule	
	Behavior = ExperienceLevelCreate ModuleTag_MPLevelBonus1
		LevelToGrant = 2
		;MPOnly = Yes
	End
	End

	CommandPoints = 25

	DisplayName = BeserkerHorde

	ButtonImage		= WOR_Berserker
	SelectPortrait	= UPIsenguard_Beserker

	KindOf = SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_USE_SIEGE_TOWER INFANTRY HORDE MELEE_HORDE ARMY_SUMMARY URUK LARGE_RECTANGLE_PATHFIND;UNATTACKABLE 
	
	ThreatLevel			= ISENGARD_BESERKER_THREAT_LEVEL

	CrushableLevel = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrusherLevel = 0 ;What can I crush?: 0 = small animals, 1 = infantry, 2 = trees, 3 = vehicles
	CrushRevengeWeapon = RangedInfantryCrushRevenge

	CommandSet = IsengardBeserkerHordeCommandSet

	LocomotorSet
		Locomotor     = NormalChargeMeleeHordeLocomotor
		Condition     = SET_NORMAL
		Speed         = 45   ;NORMAL_ISENGARD_FAST_HORDE_SPEED
	End

	ReplaceModule ModuleTag_HordeContain
	Behavior = HordeContain ModuleTag_HordeContain1
		FrontAngle = 270
		FlankedDelay = 2000
		ObjectStatusOfContained			= 
		InitialPayload					= DwarvenGuardian 15
		Slots							= 15
		PassengerFilter					= NONE +INFANTRY
		ShowPips						= No
		ThisFormationIsTheMainFormation = Yes	;//Used to determine which armorset to use (and anything else we want!)
		RandomOffset = X:0 Y:0
		
		MeleeBehavior = Amoeba
		End					

		; Banner Carrier info		
		BannerCarriersAllowed	= IsengardBannerOrc   ;DwarvenBanner										;// types of units that are allowed as banner carriers
		BannerCarrierPosition	= UnitType:DwarvenGuardian	Pos:X:70.0 Y:0.0		;// (DEFAULT) position of banner carrier
		
		RankInfo = RankNumber:1 UnitType:DwarvenGuardian Position:X:50 Y:0		Position:X:50 Y:20		Position:X:50 Y:-20		Position:X:50 Y:40		Position:X:50 Y:-40 
		RankInfo = RankNumber:2 UnitType:DwarvenGuardian Position:X:30 Y:0 Leader 1 0	Position:X:30 Y:20 Leader 1 1	Position:X:30 Y:-20 Leader 1 2	Position:X:30 Y:40 Leader 1 3	Position:X:30 Y:-40 Leader 1 4
		RankInfo = RankNumber:3 UnitType:DwarvenGuardian Position:X:10 Y:0 Leader 2 0	Position:X:10 Y:20 Leader 2 1	Position:X:10 Y:-20 Leader 2 2	Position:X:10 Y:40 Leader 2 3	Position:X:10 Y:-40 Leader 2 4
		
		
		;// Positions for 5
		
		RanksToReleaseWhenAttacking		= 1 
		
		MeleeAttackLeashDistance		= 25	;// How far the hordes can move from the center of the horde when melee attacking.				
		BackUpMinDelayTime				= 1		;// The minimum amount of time to delay before backing up
		BackUpMaxDelayTime				= 3000	;// The maximum amount of time to delay before backing up
		BackUpMinDistance				= 1		;// The minimum number of cells to backup
		BackUpMaxDistance				= 3		;// The maximum number of cells to backup
		BackupPercentage				= 80%	;// The amount of chance that a unit will back up.
	End
	End


End



;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

;^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
;5. BEAST REALM
;^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Warg Horde
;Reference: WargHordeRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Weapon NewWargRiderWeapon
  LeechRangeWeapon		= Yes
  AttackRange           = 25.0
  MeleeWeapon           = Yes
  PreAttackType         = PER_SHOT ; Do the delay each time we attack a new target
  PreAttackDelay		= ISENGARD_WARGRIDER_PREATTACKDELAY
  DelayBetweenShots     = ISENGARD_WARGRIDER_DELAYBETWEENSHOTS            ; time between shots, msec
  FiringDuration		= ISENGARD_WARGRIDER_FIRINGDURATION
  
  FireFX                = FX_GondorSwordHit
  ;AimDirection			= 270		; In order to aim at something, we aim this far off (to the right would be aiming at -90 degrees)
  
  DamageNugget                        ; A basic Nugget that just does damage
    Damage        = 100
    Radius        = 0.0
    DelayTime     = 0
    DamageType    = CAVALRY
    DamageFXType  = SWORD_SLASH
    DeathType     = NORMAL
    DamageScalar  = 30% ANY +STRUCTURE
  End  
End




Object IsengardWargRider


	AddModule	
	Behavior = ExperienceLevelCreate ModuleTag_MPLevelBonus1
		LevelToGrant = 2
		MPOnly = No
	End
	End

	ButtonImage = BIWargSentry_Warg

	SelectPortrait         = UPLoneWarg

	AddModule
	Behavior = GrantUpgradeCreate ModuleTag_1
		UpgradeToGrant = Upgrade_AragornBladeMaster
	End 
	End

; lm_barduricon.tga decal_i_level4.tga   ;cusheep.tga    ;mugntspdrbannercarrier.tga  ;DrogothArmor.tga  ;GUGandalf.tga cugretb.tga

	AddModule
	Behavior = SubObjectsUpgrade Body_471438
		TriggeredBy			   = Upgrade_AragornBladeMaster
		UpgradeTexture		   = IUWargSntryA.tga	0 IUWarg_C.tga
		RecolorHouse		   = No
	End
	End

	ReplaceModule ModuleTag_01
	Draw = W3DHordeModelDraw ModuleTag_011


		OkToChangeModelColor = Yes
		  
		StaticModelLODMode = Yes
		; specify options for static LODs
		LodOptions	= LOW
			AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_LOW
			MaxRandomTextures		=	MAX_RANDOM_TEXTURES_LOW
			MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_LOW
			MaxAnimFrameDelta		=	MAX_ANIM_FRAME_DELTA_LOW
		End
		
		LodOptions	= MEDIUM
			AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_MED
			MaxRandomTextures		=	MAX_RANDOM_TEXTURES_MED
			MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_MED
			MaxAnimFrameDelta		=	MAX_ANIM_FRAME_DELTA_MED
		End
		
		LodOptions	= HIGH
			AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_HIGH
			MaxRandomTextures		=	MAX_RANDOM_TEXTURES_HIGH
			MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_HIGH
			MaxAnimFrameDelta		=	MAX_ANIM_FRAME_DELTA_HIGH
		End
		
		;RandomTexture = IUWargSntryA.tga 0 IUWarg_C.tga
		;RandomTexture = IUWargSntryB.tga 0 IUWarg_C.tga


		DefaultModelConditionState
			Model				= IUWarg_SKN
			Skeleton				= IUWarg_SKL
		End

		; -------------- STUNNED ANIMS ----------------
		AnimationState						= PASSENGER
			Animation						= Grabbed
				AnimationName				= IUWarg_GBDA
				AnimationMode				= LOOP
			End
		End
		
		AnimationState						= FREEFALL
			Animation						= freefall
				AnimationName				= IUWarg_FLYA
				AnimationMode				= LOOP
				AnimationBlendTime			= 10
			End
		End
		
		AnimationState				=	DYING BURNINGDEATH
			Animation
				AnimationName		=	IUWarg_DIEA
				AnimationMode		=	ONCE
				AnimationBlendTime	=	10
			End
		End

		AnimationState				=	DYING SPLATTED
			Animation				=	splatted
				AnimationName		=	IUWarg_LNDA
				AnimationMode		=	ONCE
			End
		End
		
		AnimationState				=	STUNNED_FLAILING 
			Animation				=	JustDie
				AnimationName       =	IUWarg_FLYA
				AnimationMode       =	LOOP
			End
		End

		AnimationState				=	DYING
			Animation				=	JustDie
				AnimationName		=	IUWarg_DIEA
				AnimationMode		=	ONCE
			End
		End		

		AnimationState				=	BURNINGDEATH
			Animation
				AnimationName       =	IUWarg_MFDA
				AnimationMode       =	LOOP
				Distance			=	50
			End
		End

		AnimationState				=	STUNNED 
			Animation				=	Land
				AnimationName       =	IUWarg_LNDA
				AnimationMode       =	ONCE
			End
		End

		AnimationState				=	STUNNED_STANDING_UP
			Animation				=	StandUp
				AnimationName       =	IUWarg_GTPA
				AnimationMode       =	ONCE
			End
		End
		
		; -------------- MOVING ANIMS ---------------
		AnimationState				=	TURN_LEFT_HIGH_SPEED  
			Animation				=	MTurnLeft
				AnimationName		=	IUWarg_TNL1
				AnimationMode		=	LOOP
			End
		End

		AnimationState				=	TURN_RIGHT_HIGH_SPEED
			Animation				=	MTurnRight
				AnimationName		=	IUWarg_TNR1
				AnimationMode		=	LOOP
			End
		End
		
		AnimationState				=	TURN_LEFT  
			Animation				=	TurnRight
				AnimationName		=	IUWarg_TRNL
				AnimationMode		=	LOOP
				AnimationSpeedFactorRange = 2.0 2.0
			End
		End

		AnimationState				=	TURN_RIGHT 
			Animation				=	TurnRight
				AnimationName		=	IUWarg_TRNR
				AnimationMode		=	LOOP
				AnimationSpeedFactorRange = 2.0 2.0
			End
		End

		AnimationState				=	MOVING ACCELERATE 
			Animation				=	Accelerate
				AnimationName		=	IUWarg_ACCL
				AnimationMode		=	ONCE
			End
            ParticleSysBone				= None GenericSiegeTrailDust
		End
	
		AnimationState				=	MOVING DECELERATE
			Animation				=	Decelerate
				AnimationName		=	IUWarg_DECL
				AnimationMode		=	ONCE
			End
            ParticleSysBone				= None GenericSiegeTrailDust
		End
		
		AnimationState				=	MOVING BACKING_UP
			Animation				=	BackingUp
				AnimationName		=	IUWarg_BAKA
				AnimationMode		=	LOOP
			End
		End
		
		AnimationState				=	MOVING
			ShareAnimation			=	Yes
			Animation				=	RunA
				AnimationName		=	IUWarg_RUNA
				AnimationMode		=	LOOP
			End
			;ParticleSysBone			=	None CalvaryDustTrails  
		End
		
		; ----------- ATTACKING ANIMS --------------		
		AnimationState				=	BETWEEN_FIRING_SHOTS_A
			Animation				=	BetweenFiringShots
				AnimationName		=	IUWarg_IDLA
				AnimationMode		=	LOOP
				AnimationBlendTime	=   10
			End
		End

		AnimationState				=	FIRING_OR_PREATTACK_A
			Animation				=	AttackA3
				AnimationName		=	IUWarg_ATKA
				AnimationMode		=	ONCE
				UseWeaponTiming		=	Yes
				AnimationBlendTime  =	10
			End
		End
		
		AnimationState				=	ATTACKING
			Animation				=	AttackA3
				AnimationName		=	IUWarg_ATKA
				AnimationMode		=	LOOP
				AnimationBlendTime	=   10
			End
		End

		; ----------- WAR CHANT ANIMS -------------
		AnimationState = WAR_CHANT
			Animation = Chant
				AnimationName = IUWarg_TNTA
				AnimationMode = LOOP
			End
		End

		; ----------- EMOTION ANIMS ---------------
		AnimationState					= EMOTION_TAUNTING
			Animation					= TNTA
				AnimationName			= IUWarg_TNTA
				AnimationMode			= LOOP
			End
		End
		
		AnimationState					= EMOTION_CELEBRATING
			Animation                   = CHRA
				AnimationName			= IUWarg_CHRA
				AnimationMode			= ONCE
			End
		End
		
		; ----------- IDLE ANIMS ---------------
		AnimationState							= EMOTION_ALERT
			StateName							= STATE_Ready 
			Animation							= ALERT
				AnimationName					= IUWarg_IDLA
				AnimationMode					= LOOP
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Selected" then CurDrawableSetTransitionAnimState("Selected_to_Ready") end
			EndScript	
		End
		
		; ----------- SELECTED ANIMS --------------
		AnimationState				=	SELECTED
			SimilarRestart			=   Yes
			Animation				=	AtAttention
				AnimationName		=	IUWarg_ATNB
				AnimationMode		=	LOOP
			End
			StateName				= Selected
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Idle" then CurDrawableSetTransitionAnimState("Idle_to_Selected") end
				if Prev == "STATE_Ready" then CurDrawableSetTransitionAnimState("Ready_to_Selected") end
			EndScript
		End

		IdleAnimationState
			Animation
				AnimationName		=	IUWarg_IDLA
				AnimationMode		=	ONCE
				AnimationBlendTime	=	10
				AnimationPriority   =	10
			End
			Animation
				AnimationName		=	IUWarg_IDLB
				AnimationMode		=	ONCE
				AnimationBlendTime	=	10
				AnimationPriority   =	10
			End
			Animation
				AnimationName		=	IUWarg_IDLC
				AnimationMode		=	ONCE
				AnimationBlendTime	=	10
				AnimationPriority   =	10
			End
			Animation
				AnimationName		=	IUWarg_IDLD
				AnimationMode		=	ONCE
				AnimationBlendTime	=	10
				AnimationPriority   =	10
			End
			Animation
				AnimationName		=	IUWarg_TNTA
				AnimationMode		=	ONCE
				AnimationBlendTime	=	10
				AnimationPriority   =	10
			End
			Animation
				AnimationName		=	IUWarg_CHRA
				AnimationMode		=	ONCE
				AnimationBlendTime	=	10
				AnimationPriority   =	10
			End
			Animation
				AnimationName		=	IUWarg_ATNC
				AnimationMode		=	ONCE
				AnimationBlendTime	=	30
				AnimationPriority   =	20
			End
			Animation
				AnimationName		=	IUWarg_ATNA
				AnimationMode		=	ONCE
				AnimationBlendTime	=	30
				AnimationPriority   =	20
			End
			StateName				= Idle 
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Selected" then CurDrawableSetTransitionAnimState("Selected_to_Idle") end
			EndScript
		End

		;------------ TRANSITION ANIMS ----------------
;		TransitionState       = Selected_to_Idle
;			Animation           = ATNE
;				AnimationName		=	IUWarg_ATNC
;				AnimationMode		=	ONCE
;				AnimationSpeedFactorRange = 0.7 1.3
;			End
;		End
		
;		TransitionState       = Idle_to_Selected
;			Animation           = ATND
;				AnimationName     = IUWarg_ATNA
;				AnimationMode   =	ONCE
;				AnimationSpeedFactorRange = 0.7 1.3
;			End
;		End

	End
	End


	WeaponSet
		Conditions = None 
		Weapon = PRIMARY    NewWargRiderWeapon
		AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End


	VoiceAttack							= NeutralWargVoxAttack
	VoiceAttackStructure				= NeutralWargVoxAttack
	VoiceAttackMachine					= NeutralWargVoxSelect
	VoiceAttackCharge					= NeutralWargVoxAttack
	VoiceCreated						= NeutralWargVoxSelect
	VoiceFullyCreated 					= NeutralWargVoxSelect
	VoiceMoveWhileAttacking				= NeutralWargVoxMove
	VoiceMove							= NeutralWargVoxMove
	VoiceMoveToCamp						= NeutralWargVoxMove
	VoicePriority						= 44
	VoiceRetreatToCastle				= NeutralWargVoxMove
	VoiceSelect							= NeutralWargVoxSelect
	VoiceSelectBattle 					= NeutralWargVoxSelect
	VoiceGuard							= NeutralWargVoxMove
	
	VoiceEnterStateAttack				= NeutralWargVoxAttack
	VoiceEnterStateAttackStructure		= NeutralWargVoxAttack
	VoiceEnterStateAttackMachine		= NeutralWargVoxSelect
	VoiceEnterStateAttackCharge			= NeutralWargVoxAttack
	VoiceEnterStateMoveWhileAttacking	= NeutralWargVoxMove
	VoiceEnterStateMove					= NeutralWargVoxMove
	VoiceEnterStateMoveToCamp			= NeutralWargVoxMove
	VoiceEnterStateRetreatToCastle		= NeutralWargVoxMove


	UnitSpecificSounds
		VoiceEnterUnitEvilMenTransportShip	= NeutralWargVoxMove
		VoiceEnterUnitMordorMumakil			= NeutralWargVoxMove
		VoiceEnterUnitSlaughterHouse		= NeutralWargVoxMove
		VoiceGarrison						= NeutralWargVoxMove
		VoiceInitiateCaptureBuilding		= NeutralWargVoxMove
	End

	ReplaceModule BodyModuleTag
	Body = ActiveBody BodyModuleTag1
		CheerRadius 		= EMOTION_CHEER_RADIUS
		MaxHealth			= 600			;BALANCE Warg Health
		MaxHealthDamaged	= 300		
		BurningDeathBehavior = Yes
		BurningDeathFX       = FX_CavalryBurningFlame
	End
	End

	LocomotorSet
		Locomotor = WargLocomotor
		Condition = SET_NORMAL 
		Speed     = 90 ; 90 is default
	End	

End

CommandSet NewWargRiderHordeCommandSet	
	1	= Command_ToggleStance	
	2  	= Command_SpecialAbilityWargHowl
	12 	= Command_CaptureBuilding
	13 	= Command_AttackMove
	14 	= Command_Stop
End

Object IsengardWargRiderHorde

	AddModule	
	Behavior = ExperienceLevelCreate ModuleTag_MPLevelBonus1
		LevelToGrant = 2
		MPOnly = No
	End
	End


	BuildCost = ISENGARD_WARGRIDER_BUILDCOST			
	BuildTime = ISENGARD_WARGRIDER_BUILDTIME


	ButtonImage = BIWargSentry_Warg
	SelectPortrait         = UPLoneWarg

	CommandSet = NewWargRiderHordeCommandSet


	ReplaceModule ModuleTag_HordeContain
	Behavior = HorseHordeContain ModuleTag_HordeContain1
	FrontAngle = 270
		FlankedDelay = 2000
		ObjectStatusOfContained = 
		InitialPayload = IsengardWargRider  10
		Slots = 10
		PassengerFilter = NONE +CAVALRY +IsengardWargRiderBanner
		ShowPips = No
		RandomOffset = X:10 y:5
		
		MeleeBehavior = Amoeba
		End
		
		
		ThisFormationIsTheMainFormation = Yes	;Used to determine which armorset to use (and anything else we want!)

		; Banner Carrier info		
		BannerCarriersAllowed	= IsengardWargRiderBanner										; types of units that are allowed as banner carriers
		BannerCarrierPosition	= UnitType:IsengardWargRider	Pos:X:70.0 Y:0.0		; (DEFAULT) position of banner carrier for archer horde
		
		RankInfo = RankNumber:1 UnitType:IsengardWargRider Position:X:40 Y:0		Position:X:40 Y:20		Position:X:40 Y:-20		Position:X:40 Y:40		Position:X:40 Y:-40 
		RankInfo = RankNumber:2 UnitType:IsengardWargRider Position:X:0 Y:0 Leader 1 0	Position:X:0 Y:25 Leader 1 1	Position:X:0 Y:-25 Leader 1 2	Position:X:0 Y:50 Leader 1 3	Position:X:0 Y:-50 Leader 1 4
		
		RanksToReleaseWhenAttacking = 1
		MeleeAttackLeashDistance = 50; How far the hordes can move from the center of the horde when melee attacking.
		AttributeModifiers = IsengardWargSkirmish		
	End
	End

	LocomotorSet
		Locomotor   = WargCavalryHordeLocomotor
		Condition     = SET_NORMAL
		Speed         = 80 ; 80 is default
	End


End









;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Mordor Troll Horde Unit
;Reference: MordorTrollHordeUnitRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Object DwarvenPhalanx

	BountyValue = 100	

	ButtonImage	= WOR_MountainTroll
	SelectPortrait	= UPMordor_MountainTroll


	AddModule
	Behavior = GrantUpgradeCreate ModuleTag_1
		UpgradeToGrant = Upgrade_GandalfWhite  ;
	End 
	End

	AddModule	
	Behavior = ExperienceLevelCreate ModuleTag_MPLevelBonus1
		LevelToGrant = 2
		MPOnly = No
	End
	End


	AddModule
	Behavior = SubObjectsUpgrade CorruptedWeapon_Upgrade01562
	TriggeredBy			   = Upgrade_GandalfWhite
	HideSubObjects		   = Trunk01
	FadeTimeInSeconds      = 0.0
	End
	End

	ReplaceModule ModuleTag_01
	Draw = W3DHordeModelDraw ModuleTag_011

		; Some conditions and their meaning:
		;
		;	WEAPONSTATE_ONE			using tree as club
		;	WEAPONSET_TOGGLE_1		rock throwing mode
		;	SPECIAL_WEAPON_ONE		hitting a friendly troll
		;	USER_2					set from MordorMtTrollBored weapon, used when hitting a friendly troll
		;	USER_3						"				"					"					"

		WadingParticleSys		= EntRipples
		OkToChangeModelColor	= Yes		  
		StaticModelLODMode		= Yes					; Will append M or L to the skin name depending on GameLOD
	    
	    ExtraPublicBone			= Trunk					; For the tree to attach to.


		DefaultModelConditionState
			Model				= MUMntTroll_SKN
			WeaponLaunchBone	= PRIMARY Firepoint
		End

		IdleAnimationState
			StateName				= Idle
			AllowRepeatInRandomPick = Yes
			SimilarRestart			= Yes
			
			Animation = IDLA
				AnimationName		= MUMntTroll_SKL.MUMntTroll_IDLA  ;JUST BREATHING
				AnimationMode		= ONCE
				AnimationBlendTime	= 10
				AnimationPriority	= 40
			End
			Animation = IDLC
				AnimationName		= MUMntTroll_SKL.MUMntTroll_IDLC  ;BELLY SCRATCH
				AnimationMode		= ONCE
				AnimationBlendTime	= 10
				AnimationPriority	= 10
			End
			Animation = IDLF
				AnimationName		= MUMntTroll_SKL.MUMntTroll_IDLF  ;BIG ROAR
				AnimationMode		= ONCE
				AnimationBlendTime	= 10
				AnimationPriority	= 3
			End
			Animation = IDLH
				AnimationName		= MUMntTroll_SKL.MUMntTroll_IDLH  ;SHORT ROAR
				AnimationMode		= ONCE
				AnimationBlendTime	= 10
				AnimationPriority	= 10
			End
			Animation = IDLI
				AnimationName		= MUMntTroll_SKL.MUMntTroll_IDLI  ;NOSE WIPE
				AnimationMode		= ONCE
				AnimationBlendTime	= 10
				AnimationPriority	= 10
			End
			Flags					= RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				CurDrawableHideSubObjectPermanently("ROCK")
			EndScript
		End

		; Splatted death goes first, independant of death flags
		ModelConditionState = DYING DECAY SPLATTED
			Model				= MUMntTroll_DISC
			RetainSubObjects	= Yes
		End;

		AnimationState = DYING DECAY SPLATTED 
			Animation = dead1
				AnimationName	= MUMntTroll_DISC.MUMntTroll_DISC
				AnimationMode	= ONCE
			End
		End

		ModelConditionState = DYING DECAY DEATH_1
			Model				= MUMntTroll_DISA
			RetainSubObjects	= Yes
		End

		AnimationState = DYING DECAY DEATH_1 
			Animation = dead1
				AnimationName	= MUMntTroll_DISA.MUMntTroll_DISA
				AnimationMode	= ONCE
			End
		End

		ModelConditionState = DYING DECAY DEATH_2
			Model				= MUMntTroll_DISB
			RetainSubObjects	= Yes
		End

		AnimationState = DYING DECAY DEATH_2 
			Animation = dead1
				AnimationName	= MUMntTroll_DISB.MUMntTroll_DISB
				AnimationMode	= ONCE
			End
		End

		AnimationState			= CHANT_FOR_GROND	; used for cine shot in-game.
			Animation			= playingDrums
				AnimationName	= MUMntTroll_SKL.MUMntTroll_DRMA
				AnimationMode	= ONCE
			End
		End

; Flailing must go before dying in case we are dead in the air
		AnimationState = STUNNED_FLAILING
			Animation
				AnimationName = MUMntTroll_SKL.MUMntTroll_FLYA
				AnimationMode = LOOP
			End
		End

		AnimationState = DYING DEATH_3
			Animation
				AnimationName = MUMntTroll_SKL.MUMntTroll_IDLA
				AnimationMode = LOOP
			End
		End
		AnimationState = DYING SPLATTED
			Animation
				AnimationName = MUMntTroll_SKL.MUMntTroll_LNDA
				AnimationMode = ONCE
			End
		End


		AnimationState = DYING DEATH_1
			Animation
				AnimationName = MUMntTroll_SKL.MUMntTroll_DIEA
				AnimationMode = ONCE
			End

			ParticleSysBone = B_PELVIS TrollSplatDust
			ParticleSysBone = BAT_HEAD TrollSplatDust
		End

		AnimationState = DYING DEATH_2
			Animation
				AnimationName = MUMntTroll_SKL.MUMntTroll_DIEB
				AnimationMode = ONCE
			End

			ParticleSysBone = BAT_SPINE1 TrollSplatDust1
			ParticleSysBone = BAT_HEAD TrollSplatDust1
		End

		ModelConditionState = DYING
			Model				= MUMntTroll_SKN			
		End

		AnimationState = DYING
			Animation
				AnimationName     =  MUMntTroll_SKL.MUMntTroll_DIEB
				AnimationMode     = ONCE
			End
		End

		//Stoned!
		ModelConditionState = STONED 
			Model			= MUMntTroll_SKN
			Texture			= MUMntTroll.tga MUMntTroll_R.tga
		End 			

		AnimationState		= STONED
			Animation			= Stoned
				AnimationName		= MUMntTroll_SKL.MUMntTroll_MFDA
				AnimationMode		= MANUAL
				AnimationBlendTime	= 40
			End
			Flags	= RANDOMSTART 
		End
		
		AnimationState = EATING
			Animation
				AnimationName = MUMntTroll_SKL.MUMntTroll_EATA
				AnimationMode = ONCE
			End
		End
	
; Flailing must go before dying in case we are dead in the air
		AnimationState = STUNNED_FLAILING
			Animation
				AnimationName = MUMntTroll_SKL.MUMntTroll_FLYA
				AnimationMode = LOOP
			End
		End

		AnimationState				= STUNNED_STANDING_UP
			Animation				= MUMntTroll_GTPA
				AnimationName		= MUMntTroll_SKL.MUMntTroll_GTPA
				AnimationMode		= ONCE
			End
		End	

		AnimationState				= STUNNED
			Animation
				AnimationName = MUMntTroll_SKL.MUMntTroll_LNDA
				AnimationMode = ONCE
			End
			ParticleSysBone = B_PELVIS TrollSplatDust2
			ParticleSysBone = BAT_HEAD TrollSplatDust2
		End


		AnimationState						= PARALYZED
			Animation
				AnimationName				= MUMntTroll_SKL.MUMntTroll_IDLA
				AnimationMode				= LOOP
			End
		End


		; --------- Just built ---------------------------------------------------------------------------------------------
	
		AnimationState = JUST_BUILT
			Animation
				AnimationName				= MUMntTroll_SKL.MUMntTroll_WLKC ; temp
				AnimationMode				= ONCE
				AnimationBlendTime			= 0
				AnimationSpeedFactorRange	= 0.9 0.9			
			End
			LuaEvent = Frame:1 Data: show_rock
			FXEvent	= Frame:0 FireWhenSkipped Name:FX_TrollRightFootStep
			FXEvent	= Frame:16 FireWhenSkipped Name:FX_TrollLeftFootStep
			FXEvent	= Frame:30 FireWhenSkipped Name:FX_TrollRightFootStep
			FXEvent	= Frame:44 FireWhenSkipped Name:FX_TrollLeftFootStep
		End	

		;---bop our friends on the head 
		AnimationState = SPECIAL_WEAPON_ONE
			Animation = Punch
				AnimationName = MUMntTroll_SKL.MUMntTroll_ATKH
				AnimationMode = ONCE
			End
			Animation = Backhand
				AnimationName = MUMntTroll_SKL.MUMntTroll_ATKI
				AnimationMode = ONCE
			End			
		End
			
		;---drop a tree
		AnimationState = SPECIAL_WEAPON_TWO
			Animation
				AnimationName = MUMntTroll_SKL.MUMntTroll_IDLE
				AnimationMode = ONCE
			End
		End
			
		;--Troll is angry
		AnimationState = WEAPONSET_RAMPAGE
			Animation = GetMad
				AnimationName = MUMntTroll_SKL.MUMntTroll_RPGC
				AnimationMode = LOOP
			End
		End

    ; --------- With Club ------------

		AnimationState = FIRING_OR_PREATTACK_A WEAPONSTATE_ONE
;			Animation
;				; Taking this one out since it doesn't work with the logic of the attack, which is a 180 knockback (this one is vertical clubbing, could be used as anti-monster anim, not anti bunch of inf)
;				AnimationName = MUMntTroll_SKL.MUMntTroll_ATKB
;			End
			Animation
				AnimationName = MUMntTroll_SKL.MUMntTroll_ATKC
				AnimationMode = ONCE
				UseWeaponTiming		= Yes
			End
			Animation
				AnimationName = MUMntTroll_SKL.MUMntTroll_ATKD
				AnimationMode = ONCE
				UseWeaponTiming		= Yes
			End
		End

		;Running attack
		AnimationState = FIRING_OR_PREATTACK_B WEAPONSTATE_ONE
			Animation
				AnimationName = MUMntTroll_SKL.MUMntTroll_ATRA
				AnimationMode = ONCE
				UseWeaponTiming		= Yes
			End
		End
			
		AnimationState = TURN_LEFT WEAPONSTATE_ONE
			Animation = Moving
				AnimationName = MUMntTroll_SKL.MUMntTroll_TRNL
				AnimationMode = LOOP
				AnimationBlendTime = 10
			End
			ParticleSysBone = None InfantryDustTrails
			BeginScript ; Here since normal Packing state can be skipped with a fast click.
				CurDrawableShowSubObjectPermanently("Trunk01")
			EndScript
		End

		AnimationState = TURN_RIGHT WEAPONSTATE_ONE
			Animation = Moving
				AnimationName = MUMntTroll_SKL.MUMntTroll_TRNR
				AnimationMode = LOOP
				AnimationBlendTime = 10
			End
			ParticleSysBone = None InfantryDustTrails
			BeginScript ; Here since normal Packing state can be skipped with a fast click.
				CurDrawableShowSubObjectPermanently("Trunk01")
			EndScript
		End

		AnimationState = MOVING WEAPONSTATE_ONE			; ATTACKING
			Animation
				AnimationName = MUMntTroll_SKL.MUMntTroll_RUNA  ; Running with club
				AnimationMode = LOOP
				;AnimationSpeedFactorRange = 0.77 0.77
			End
			Flags               = RANDOMSTART
			ParticleSysBone     = None InfantryDustTrails
			FXEvent	= Frame:5 FireWhenSkipped Name:FX_TrollRightFootStep
			FXEvent	= Frame:17 FireWhenSkipped Name:FX_TrollLeftFootStep
		End

		;AnimationState = MOVING WEAPONSTATE_ONE DAMAGED
		;	Animation
		;		AnimationName = MUMntTroll_SKL.MUMntTroll_WLKB ; Walking with club
		;		AnimationMode = LOOP
		;		AnimationSpeedFactorRange = 1.3 1.3
		;	End
		;	Flags               = RANDOMSTART
		;	ParticleSysBone     = None InfantryDustTrails
		;	FXEvent	= Frame:22 FireWhenSkipped Name:FX_TrollLeftFootStep
		;	FXEvent	= Frame:45 FireWhenSkipped Name:FX_TrollRightFootStep
		;End

		;AnimationState = MOVING WEAPONSTATE_ONE
		;	Animation
		;		AnimationName = MUMntTroll_SKL.MUMntTroll_WLKB ; Walking with club 
		;		AnimationMode = LOOP
		;		AnimationSpeedFactorRange = 1.36 1.36
		;	End
      	;	Flags               = RANDOMSTART
      	;	ParticleSysBone     = None InfantryDustTrails
		;	FXEvent	= Frame:22 FireWhenSkipped Name:FX_TrollLeftFootStep
		;	FXEvent	= Frame:45 FireWhenSkipped Name:FX_TrollRightFootStep	
		;
		;	BeginScript ; Here since normal Packing state can be skipped with a fast click.
		;		CurDrawableShowSubObjectPermanently("Trunk01")
		;	EndScript
		;End

		AnimationState = PREPARING									; Smash contained object on ground to remove leaves. note, WEAPONSTATE_ONE has 
			Animation												; not yet been set yet, so assume it's a tree.
				AnimationName = MUMntTroll_SKL.MUMntTroll_GRBC
				AnimationMode = ONCE
			End
		End

		AnimationState = PACKING WEAPONSTATE_ONE
			Animation
				AnimationName = MUMntTroll_SKL.MUMntTroll_GRBD
				AnimationMode = ONCE
			End
			BeginScript
				CurDrawableShowSubObjectPermanently("Trunk01")
			EndScript
		End

		AnimationState = EMOTION_CELEBRATING WEAPONSTATE_ONE
			Animation
				AnimationName	=	MUMntTroll_SKL.MUMntTroll_IDLF
				AnimationMode	=	LOOP
			End
		End

		AnimationState = USER_2 WEAPONSTATE_ONE
			Animation = ReactToTrollPoke ; The two comes from the special TrollBored weapon
				AnimationName = MUMntTroll_SKL.MUMntTroll_HITE
				AnimationMode = ONCE
			End
		End

		AnimationState = USER_3 WEAPONSTATE_ONE
			Animation = ExpectAnotherPoke ; The three comes from the special TrollBored weapon, and lasts longer than 2
				AnimationName = MUMntTroll_SKL.MUMntTroll_IDLJ
				AnimationMode = LOOP
			End
		End

		AnimationState					= EMOTION_TAUNTING WEAPONSTATE_ONE
			Animation
				AnimationName			= MUMntTroll_SKL.MUMntTroll_IDLB
				AnimationMode			= ONCE
				AnimationPriority		= 20
			End
			Animation					= Taunting3
				AnimationName			= MUMntTroll_SKL.MUMntTroll_IDLH
				AnimationMode			= ONCE
				AnimationPriority		= 10
			End
			Animation					= Taunting4
				AnimationName			= MUMntTroll_SKL.MUMntTroll_IDLE
				AnimationMode			= ONCE
				AnimationPriority		= 5
			End
		End
	
		AnimationState = WEAPONSTATE_ONE	;Idle with club
			AllowRepeatInRandomPick = Yes
			SimilarRestart			= Yes
		
			Animation = BreathWithClub
				AnimationName = MUMntTroll_SKL.MUMntTroll_IDLB
				AnimationMode = ONCE
				AnimationPriority = 30
				AnimationSpeedFactorRange = 0.8 1.0
			End
			Animation = BreathWithClub
				AnimationName = MUMntTroll_SKL.MUMntTroll_IDLB
				AnimationMode = ONCE
				AnimationPriority = 30
				AnimationSpeedFactorRange = 0.8 1.0
			End
			Animation = IDLE
				AnimationName = MUMntTroll_SKL.MUMntTroll_IDLE  ;ROAR THEN HIT GROUND (holding club only)
				AnimationMode = ONCE
				AnimationBlendTime = 10
				AnimationPriority = 5
			End
			Animation = IDLG
				AnimationName = MUMntTroll_SKL.MUMntTroll_IDLG  ;BUTT SCRATCH THEN BURP
				AnimationMode = ONCE
				AnimationBlendTime = 10
				AnimationPriority = 10
			End
			Flags = RESTART_ANIM_WHEN_COMPLETE
			BeginScript ; Here since normal Packing state can be skipped with a fast click.
				CurDrawableShowSubObjectPermanently("Trunk01")
			EndScript
		End

		; --------- With rock or infantry ----------------------------------------------------------------------------------

		;AnimationState = MOVING WEAPONSET_TOGGLE_1		; ATTACKING
		;	Animation
		;		AnimationName = MUMntTroll_SKL.MUMntTroll_RUNA 
		;		AnimationMode = LOOP
		;		;AnimationSpeedFactorRange = 0.77 0.77
		;	End
		;	Flags = RANDOMSTART
		;	ParticleSysBone = None InfantryDustTrails
		;	FXEvent	= Frame:5 FireWhenSkipped Name:FX_TrollRightFootStep
		;	FXEvent	= Frame:17 FireWhenSkipped Name:FX_TrollLeftFootStep
		;End

		;AnimationState = MOVING WEAPONSET_TOGGLE_1 DAMAGED
		;	Animation
		;		AnimationName = MUMntTroll_SKL.MUMntTroll_WLKB 
		;		AnimationMode = LOOP
		;		AnimationSpeedFactorRange = 1.3 1.3
		;	End
		;	Flags = RANDOMSTART
		;	ParticleSysBone = None InfantryDustTrails
		;	FXEvent	= Frame:22 FireWhenSkipped Name:FX_TrollLeftFootStep
		;	FXEvent	= Frame:45 FireWhenSkipped Name:FX_TrollRightFootStep
		;End

		;AnimationState = MOVING WEAPONSET_TOGGLE_1
		;	Animation
		;		AnimationName = MUMntTroll_SKL.MUMntTroll_WLKB 
		;		AnimationMode = LOOP
		;		AnimationSpeedFactorRange = 1.36 1.36
		;	End
		;	Flags = RANDOMSTART
		;	ParticleSysBone = None InfantryDustTrails
		;	FXEvent	= Frame:22 FireWhenSkipped Name:FX_TrollLeftFootStep
		;	FXEvent	= Frame:45 FireWhenSkipped Name:FX_TrollRightFootStep
		;End

;		AnimationState = FIRING_OR_PREATTACK_A USING_WEAPON_A
;			Animation
;				AnimationName		= MUMntTroll_SKL.MUMntTroll_THRW
;				AnimationMode		= ONCE
;				AnimationBlendTime	= 0
;				UseWeaponTiming		= Yes
;			End
;			FrameForPristineBonePositions = 16
;			StateName = Throw
;		End
	
		AnimationState = FIRING_OR_PREATTACK_A WEAPONSET_TOGGLE_1			; Throw rock.
			StateName = Throw
			Animation
				AnimationName		= MUMntTroll_SKL.MUMntTroll_THRA
				AnimationMode		= ONCE
;				AnimationBlendTime	= 0
				UseWeaponTiming		= Yes
			End
			LuaEvent = Frame:23 Data: hide_rock
			FrameForPristineBonePositions = 23
		End
		
		AnimationState = RELOADING_A WEAPONSET_TOGGLE_1						; Pickup rock.
			StateName = STATE_Reload
			Animation
				AnimationName		= MUMntTroll_SKL.MUMntTroll_GRBE ;MUMntTroll_SKL.MUMntTroll_GRBB
				AnimationMode		= ONCE
			End		
			LuaEvent = Frame:35 Data: show_rock
		End
		

		;Building attack, which you can do with a rock in yo hand
		AnimationState = FIRING_OR_PREATTACK_C WEAPONSET_TOGGLE_1
			Animation
				AnimationName	= MUMntTroll_SKL.MUMntTroll_ATKF
				AnimationMode	= ONCE
				UseWeaponTiming	= Yes
			End
		End

		AnimationState = TURN_LEFT WEAPONSET_TOGGLE_1
			Animation = Moving
				AnimationName = MUMntTroll_SKL.MUMntTroll_TRNL
				AnimationMode = LOOP
				AnimationBlendTime = 10
			End
			ParticleSysBone = None InfantryDustTrails
		End

		AnimationState = TURN_RIGHT WEAPONSET_TOGGLE_1
			Animation = Moving
				AnimationName = MUMntTroll_SKL.MUMntTroll_TRNR
				AnimationMode = LOOP
				AnimationBlendTime = 10
			End
			ParticleSysBone = None InfantryDustTrails
		End

		AnimationState = MOVING WEAPONSET_TOGGLE_1
			Animation
				AnimationName = MUMntTroll_SKL.MUMntTroll_RUNA 
				AnimationMode = LOOP
				;AnimationSpeedFactorRange = 0.77 0.77
			End
			Flags = RANDOMSTART
			ParticleSysBone = None InfantryDustTrails
			FXEvent	= Frame:5 FireWhenSkipped Name:FX_TrollRightFootStep
			FXEvent	= Frame:17 FireWhenSkipped Name:FX_TrollLeftFootStep
		End
		
		; --------- Click and Hit Reactions with Rock ----------------------------------------------------------------------------------
		
		AnimationState = HIT_REACTION HIT_LEVEL_1 WEAPONSET_TOGGLE_1
			Animation = Hit_Level_1_a
				AnimationName = MUMntTroll_SKL.MUMntTroll_HITC
				AnimationMode = ONCE
			End
		End

		AnimationState = HIT_REACTION HIT_LEVEL_2 WEAPONSET_TOGGLE_1
			Animation = Hit_Level_2
				AnimationName = MUMntTroll_SKL.MUMntTroll_HITB
				AnimationMode = ONCE
			End
		End

		AnimationState = HIT_REACTION HIT_LEVEL_3 WEAPONSET_TOGGLE_1
			Animation = Hit_Level_3
				AnimationName = MUMntTroll_SKL.MUMntTroll_HITA
				AnimationMode = ONCE
			End
		End

		AnimationState = REACT_1 WEAPONSET_TOGGLE_1
			Animation = Click_React_1
				AnimationName = MUMntTroll_SKL.MUMntTroll_RCTA
				AnimationMode = ONCE
			End
		End

		AnimationState = REACT_2 WEAPONSET_TOGGLE_1
			Animation = Click_React_2
				AnimationName = MUMntTroll_SKL.MUMntTroll_RCTB
				AnimationMode = ONCE
			End
		End

		AnimationState = REACT_3 WEAPONSET_TOGGLE_1
			Animation = Click_React_3
				AnimationName = MUMntTroll_SKL.MUMntTroll_RCTC
				AnimationMode = ONCE
			End
		End

		AnimationState = REACT_4 WEAPONSET_TOGGLE_1
			Animation = Click_React_4
				AnimationName = MUMntTroll_SKL.MUMntTroll_RCTD
				AnimationMode = ONCE
			End
		End

		AnimationState = REACT_5 WEAPONSET_TOGGLE_1
			Animation = Click_React_5
				AnimationName = MUMntTroll_SKL.MUMntTroll_RCTE
				AnimationMode = ONCE
			End
		End
	    
		AnimationState = USER_2 WEAPONSET_TOGGLE_1
			Animation = ReactToTrollPoke ; The two comes from the special TrollBored weapon
				AnimationName = MUMntTroll_SKL.MUMntTroll_HITE
				AnimationMode = ONCE
			End
		End

		AnimationState = USER_3 WEAPONSET_TOGGLE_1
			Animation = ExpectAnotherPoke ; The three comes from the special TrollBored weapon, and lasts longer than 2
				AnimationName = MUMntTroll_SKL.MUMntTroll_IDLJ
				AnimationMode = LOOP
			End
		End

		AnimationState = SWAPPING_TO_WEAPONSET_1 WEAPONSET_TOGGLE_1			; toggling to rock throwing. This get's the unit into a nice
			Animation														; pose to blend from, rather than playing an idle for one frame.
				AnimationName	= MUMntTroll_SKL.MUMntTroll_GRBE
				AnimationMode	= MANUAL
			End
		End
		
		AnimationState					= EMOTION_TAUNTING WEAPONSET_TOGGLE_1
			Animation
				AnimationName			= MUMntTroll_SKL.MUMntTroll_IDLB
				AnimationMode			= ONCE
				AnimationPriority		= 20
			End
			Animation					= Taunting3
				AnimationName			= MUMntTroll_SKL.MUMntTroll_IDLH
				AnimationMode			= ONCE
				AnimationPriority		= 10
			End
		End
	
		AnimationState = WEAPONSET_TOGGLE_1												; Rock throwing
			AllowRepeatInRandomPick = Yes
			SimilarRestart			= Yes
			Animation
				AnimationName				= MUMntTroll_SKL.MUMntTroll_IDLB			; sway
				AnimationMode				= ONCE
				AnimationPriority			= 10
				AnimationSpeedFactorRange	= 0.8 1.0
			End
			Flags = RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				CurDrawableShowSubObjectPermanently("ROCK")
			EndScript
		End


		
		;// --------- With Bare Hands ------------

		AnimationState = UNPACKING									; Reach for a tree.
			Animation
				AnimationName = MUMntTroll_SKL.MUMntTroll_GRBA
				AnimationMode = ONCE
			End
		End

		AnimationState = TURN_LEFT
			Animation = Moving
				AnimationName = MUMntTroll_SKL.MUMntTroll_TRNL
				AnimationMode = LOOP
				AnimationBlendTime = 10
			End
			ParticleSysBone = None InfantryDustTrails
		End

		AnimationState = TURN_RIGHT
			Animation = Moving
				AnimationName = MUMntTroll_SKL.MUMntTroll_TRNR
				AnimationMode = LOOP
				AnimationBlendTime = 10
			End
			ParticleSysBone = None InfantryDustTrails
		End



		; Normal fist attacks
		AnimationState = FIRING_OR_PREATTACK_A
			Animation
				AnimationName = MUMntTroll_SKL.MUMntTroll_ATKA
				AnimationMode = ONCE
				UseWeaponTiming		= Yes
			End
			Animation
				AnimationName = MUMntTroll_SKL.MUMntTroll_ATKE
				AnimationMode = ONCE
				UseWeaponTiming		= Yes
			End
			Animation
				AnimationName = MUMntTroll_SKL.MUMntTroll_ATKG
				AnimationMode = ONCE
				UseWeaponTiming		= Yes
			End
		End

		;Building attack
		AnimationState = FIRING_OR_PREATTACK_B
			Animation
				AnimationName = MUMntTroll_SKL.MUMntTroll_ATKF
				AnimationMode = ONCE
				UseWeaponTiming		= Yes
			End
		End

		;Running attack
		AnimationState = FIRING_OR_PREATTACK_C
			Animation
				AnimationName = MUMntTroll_SKL.MUMntTroll_ATRB
				AnimationMode = ONCE
				UseWeaponTiming		= Yes
			End
		End
			
		AnimationState				= MOVING PANICKING
			Animation				= RUNM
				AnimationName		=  MUMntTroll_SKL.MUMntTroll_MFDA
				AnimationMode		= LOOP
			End
			Flags					= RANDOMSTART
		End

		AnimationState = MOVING
			Animation
				AnimationName = MUMntTroll_SKL.MUMntTroll_RUNB
				AnimationMode = LOOP
				;AnimationSpeedFactorRange = 0.8 0.8
			End
			Flags = RANDOMSTART
			ParticleSysBone = None InfantryDustTrails
			FXEvent	= Frame:6 FireWhenSkipped Name:FX_TrollRightFootStep
			FXEvent	= Frame:17 FireWhenSkipped Name:FX_TrollLeftFootStep
		End

		AnimationState = ENGAGED
			Animation
				AnimationName = MUMntTroll_SKL.MUMntTroll_IDLA
				AnimationMode = LOOP
			End
			;BeginScript
			;	Prev = CurDrawablePrevAnimationState()
			;	if Prev == "Throw"	then CurDrawableSetTransitionAnimState("Trans_Throwing_To_Ready") return end	
			;EndScript
		End
	
;		AnimationState = DESTROYED_WEAPON    this is no longer coded
;			Animation
;				AnimationName = MUMntTroll_SKL.MUMntTroll_ATKA
;				AnimationMode = ONCE
;			End
;		End
		
		; --------- Click and Hit Reactions ----------------------------------------------------------------------------------
		
		AnimationState = HIT_REACTION HIT_LEVEL_1
			Animation = Hit_Level_1_a
				AnimationName = MUMntTroll_SKL.MUMntTroll_HITC
				AnimationMode = ONCE
			End
		End

		AnimationState = HIT_REACTION HIT_LEVEL_2
			Animation = Hit_Level_2
				AnimationName = MUMntTroll_SKL.MUMntTroll_HITB
				AnimationMode = ONCE
			End
		End

		AnimationState = HIT_REACTION HIT_LEVEL_3
			Animation = Hit_Level_3
				AnimationName = MUMntTroll_SKL.MUMntTroll_HITA
				AnimationMode = ONCE
			End
		End

		AnimationState = REACT_1
			Animation = Click_React_1
				AnimationName = MUMntTroll_SKL.MUMntTroll_RCTA
				AnimationMode = ONCE
			End
		End

		AnimationState = REACT_2
			Animation = Click_React_2
				AnimationName = MUMntTroll_SKL.MUMntTroll_RCTB
				AnimationMode = ONCE
			End
		End

		AnimationState = REACT_3
			Animation = Click_React_3
				AnimationName = MUMntTroll_SKL.MUMntTroll_RCTC
				AnimationMode = ONCE
			End
		End

		AnimationState = REACT_4
			Animation = Click_React_4
				AnimationName = MUMntTroll_SKL.MUMntTroll_RCTD
				AnimationMode = ONCE
			End
		End

		AnimationState = REACT_5
			Animation = Click_React_5
				AnimationName = MUMntTroll_SKL.MUMntTroll_RCTE
				AnimationMode = ONCE
			End
		End
	    
		AnimationState = USER_2
			Animation = ReactToTrollPoke ; The two comes from the special TrollBored weapon
				AnimationName = MUMntTroll_SKL.MUMntTroll_HITE
				AnimationMode = ONCE
			End
		End

		AnimationState = USER_3 
			Animation = ExpectAnotherPoke ; The three comes from the special TrollBored weapon, and lasts longer than 2
				AnimationName = MUMntTroll_SKL.MUMntTroll_IDLJ
				AnimationMode = LOOP
			End
		End

		;--------------------------------------------------------------------------------------------------------------------------------------------
		;Emotions

		AnimationState = EMOTION_CELEBRATING
			Animation
				AnimationName	=	MUMntTroll_SKL.MUMntTroll_IDLF
				AnimationMode	=	LOOP
			End
		End
	
		AnimationState					= EMOTION_TAUNTING
			Animation
				AnimationName			= MUMntTroll_SKL.MUMntTroll_IDLB
				AnimationMode			= ONCE
				AnimationPriority		= 20
			End
			Animation					= Taunting3
				AnimationName			= MUMntTroll_SKL.MUMntTroll_IDLH
				AnimationMode			= ONCE
				AnimationPriority		= 10
			End
		End
	End
	End


	;Scale = 0.60 ; im gond keep em normal.

	Side						= Mordor
	EditorSorting				= UNIT
	
	ThreatLevel					= MORDOR_MOUNTAINTROLL_THREAT_LEVEL
	ThreatBreakdown MordorMountainTroll_DetailedThreat
		AIKindOf = SIEGEWEAPON
	End
	
	TransportSlotCount			= TRANSPORTSLOTCOUNT_MONSTER
	ShowHealthInSelectionDecal	= Yes

	WeaponSet
		Conditions          = None
		Weapon              = PRIMARY	MordorCaveTrollPunch
		Weapon              = SECONDARY	MordorCaveTrollBash
		OnlyAgainst         = SECONDARY	STRUCTURE BLOCKING_GATE
		Weapon				= TERTIARY	MordorCaveTrollPunch
		OnlyInCondition		= TERTIARY	MOVING
	End

	WeaponSet
		Conditions			= WEAPONSET_TOGGLE_1
		Weapon				= PRIMARY	TrollRockThrow
	End

	WeaponSet
		Conditions          = RAMPAGE
		Weapon              = PRIMARY	MordorCaveTrollRampage
	End

	WeaponSet
		Conditions          = RAMPAGE PASSENGER_TYPE_ONE
		Weapon              = PRIMARY	MordorCaveTrollTreeRampage
	End

	WeaponSet
		Conditions          = PASSENGER_TYPE_ONE 
		Weapon              = PRIMARY	MordorCaveTrollClubSwing
		Weapon				= SECONDARY	MordorCaveTrollClubSwing
		OnlyInCondition		= SECONDARY	MOVING
	End
	
	ArmorSet
		Conditions      = None
		Armor           = TrollArmor
		DamageFX        = NormalDamageFX
	End

	ArmorSet
		Conditions      = PLAYER_UPGRADE
		Armor           = TrollHeavyArmor
		DamageFX        = NormalDamageFX
	End

	BuildFadeInOnCreateTime = 4.4
	
  	VisionRange				= VISION_STANDARD_MELEE
  	ShroudClearingRange		= SHROUD_CLEAR_TROLL

	DisplayName				= OBJECT:MordorMountainTroll
	CrushableLevel			= 2								;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles

	CommandSet				= MordorMountainTrollCommandSet
	CommandPoints			= 50

	CrusherLevel			= 2
	UseCrushAttack			= No							; Don't attack using crush, just crush when you walk through. 
	CrushWeapon				= TrollCrush

	RamPower				= 20
	RamZMult				= 0.5
	CrushKnockback			= 30
	CrushZFactor			= 1.0

 
	; *** AUDIO Parameters ***;

	VoiceAttack				= TrollVoiceAttack
	VoiceAttackCharge		= TrollVoiceAttack
	VoiceAttackMachine		= TrollVoiceAttack
	VoiceAttackStructure	= TrollVoiceAttack
	VoiceCreated			= EVA:MountainTrollCreated
	VoiceFullyCreated 		= EVA:MountainTrollCreated
	VoiceGuard				= TrollVoiceMove
	VoiceMove				= TrollVoiceMove
	VoiceMoveToCamp			= TrollVoiceMove
	VoiceMoveWhileAttacking	= TrollVoiceMove
	VoicePriority			= 19
	VoiceSelect				= TrollVoiceSelect
	VoiceSelectBattle 		= TrollVoiceSelect

	SoundImpact				= ImpactHorse		;TrollDie

	UnitSpecificSounds
		VoiceEnterUnitEvilMenTransportShip	= TrollVoiceMove
		VoiceEnterUnitMordorMumakil			= TrollVoiceMove
		VoiceEnterUnitSlaughterHouse		= TrollVoiceMove
		VoiceGarrison						= TrollVoiceMove
		VoiceInitiateCaptureBuilding		= TrollVoiceMove
	End

	ReplaceModule ModuleTag_AnimAudioBehavior
	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior1
		MaxUpdateRangeCap = 800
		AnimationSound = Sound:ImpactTrollGrabsOrc 		Animation:MUMntTroll_SKL.MUMntTroll_GRBA	Frames:6
		;AnimationSound = Sound:OrcEatenVox 			Animation:MUMntTroll_SKL.MUMntTroll_GRBB	Frames:0
		AnimationSound = Sound:OrcEatenVox 				Animation:MUMntTroll_SKL.MUMntTroll_EATA	Frames:0
		AnimationSound = Sound:TrollChomp 				Animation:MUMntTroll_SKL.MUMntTroll_EATA	Frames:20
		AnimationSound = Sound:TrollSwallow 			Animation:MUMntTroll_SKL.MUMntTroll_EATA	Frames:72
		AnimationSound = Sound:MordorTrollCreated 		Animation:MUMntTroll_SKL.MUMntTroll_WLKC	Frames:66 
		AnimationSound = Sound:TrollBodyfall 			Animation:MUMntTroll_SKL.MUMntTroll_LNDA	Frames:3 21 
		AnimationSound = Sound:TrollBodyfall 			Animation:MUMntTroll_SKL.MUMntTroll_DIEA	Frames:31 
		AnimationSound = Sound:TrollBodyfall 			Animation:MUMntTroll_SKL.MUMntTroll_DIEB	Frames:85
		AnimationSound = Sound:MordorGrondTrollAttack 	Animation:MUGRNDTRL_SKL.MUGRNDTRL_GAA2	Frames:78 
		AnimationSound = Sound:MordorGrondTrollAttack 	Animation:MUGRNDTRL_SKL.MUGRNDTRL_GAB2	Frames:80 
		AnimationSound = Sound:MordorGrondTrollAttack 	Animation:MUGRNDTRL_SKL.MUGRNDTRL_GATA	Frames:137 
		AnimationSound = Sound:MordorTrollIdleA 		Animation:MUMntTroll_SKL.MUMntTroll_IDLA	Frames:13 
		AnimationSound = Sound:TrollTreeShakeYell 		Animation:MUMntTroll_SKL.MUMntTroll_GRBC	Frames:26 
		AnimationSound = Sound:TrollTreeShakeYell 		Animation:MUMntTroll_SKL.MUMntTroll_GRBD	Frames:28 
		;AnimationSound = Sound:TrollTreeShakeYell 		Animation:MUMntTroll_SKL.MUMntTroll_GRBA	Frames:14 
		;AnimationSound = Sound:TrollTreeShakeYell 		Animation:MUMntTroll_SKL.MUMntTroll_GRBB	Frames:12 
		AnimationSound = Sound:MordorGrondTrollPush 	Animation:MUGRNDTRL_SKL.MUGRNDTRL_GWKA	Frames:41 
		AnimationSound = Sound:MordorTrollIdleB 		Animation:MUMntTroll_SKL.MUMntTroll_IDLB	Frames:7 
		;AnimationSound = Sound:MordorTrollIdleVox 		Animation:MUMntTroll_SKL.MUMntTroll_IDLE	Frames:8 
		;AnimationSound = Sound:MordorTrollIdleVox 		Animation:MUMntTroll_SKL.MUMntTroll_IDLF	Frames:31 
		;AnimationSound = Sound:MordorTrollIdleVox 		Animation:MUMntTroll_SKL.MUMntTroll_IDLG	Frames:76 
		;AnimationSound = Sound:MordorTrollIdleVox 		Animation:MUMntTroll_SKL.MUMntTroll_IDLH	Frames:0 
		;AnimationSound = Sound:MordorTrollIdleVox 		Animation:MUMntTroll_SKL.MUMntTroll_IDLI	Frames:102 
		AnimationSound = Sound:MordorTrollIdleE 		Animation:MUMntTroll_SKL.MUMntTroll_IDLE	Frames:6 
		AnimationSound = Sound:MordorTrollIdleF 		Animation:MUMntTroll_SKL.MUMntTroll_IDLF	Frames:31 
		AnimationSound = Sound:MordorTrollIdleG 		Animation:MUMntTroll_SKL.MUMntTroll_IDLG	Frames:76
		AnimationSound = Sound:MordorTrollIdleH 		Animation:MUMntTroll_SKL.MUMntTroll_IDLH	Frames:0
		AnimationSound = Sound:MordorTrollIdleI 		Animation:MUMntTroll_SKL.MUMntTroll_IDLI	Frames:102 
		AnimationSound = Sound:TrollFootstep 			Animation:MUMntTroll_SKL.MUMntTroll_RUNA	Frames:4 17 
		AnimationSound = Sound:TrollFootstep 			Animation:MUMntTroll_SKL.MUMntTroll_RUNB	Frames:4 17
		AnimationSound = Sound:TrollFootstep 			Animation:MUMntTroll_SKL.MUMntTroll_WLKA	Frames:0 15
		AnimationSound = Sound:TrollFootstep 			Animation:MUMntTroll_SKL.MUMntTroll_WLKB	Frames:0 22
		AnimationSound = Sound:TrollFootstep 			Animation:MUMntTroll_SKL.MUMntTroll_WLKC	Frames:14 29 44 59
		AnimationSound = Sound:TrollFootstep 			Animation:MUMntTroll_SKL.MUMntTroll_TRNL	Frames:15 29
		AnimationSound = Sound:TrollFootstep 			Animation:MUMntTroll_SKL.MUMntTroll_TRNR	Frames:15 29
		AnimationSound = Sound:TrollFootstep 			Animation:MUMntTroll_SKL.MUMntTroll_GTPA	Frames:12 80 97
		AnimationSound = Sound:TrollFootstepRampage 	Animation:MUMntTroll_SKL.MUMntTroll_MFDA	Frames:4 17 29 42
		AnimationSound = Sound:TrollFootstepRampage 	Animation:MUMntTroll_SKL.MUMntTroll_RCTD	Frames:6 66
		AnimationSound = Sound:TrollFootstepRampage 	Animation:MUMntTroll_SKL.MUMntTroll_RPGC	Frames:37 43 61 77 93 100 116 123 139 149
		AnimationSound = Sound:TrollFootstepRampage 	Animation:MUMntTroll_SKL.MUMntTroll_THRW	Frames:18
		AnimationSound = Sound:TrollTreeSwingLight 		Animation:MUMntTroll_SKL.MUMntTroll_IDLE	Frames:51
		AnimationSound = Sound:TrollTreeSwingLight 		Animation:MUMntTroll_SKL.MUMntTroll_RCTB	Frames:16
		AnimationSound = Sound:TrollTreeSwingLight 		Animation:MUMntTroll_SKL.MUMntTroll_MFDA	Frames:5 22
		AnimationSound = Sound:TrollTreeSwingLight 		Animation:MUMntTroll_SKL.MUMntTroll_RPGC	Frames:28 54 89 114
		AnimationSound = Sound:TrollTreeSwingLight 		Animation:MUMntTroll_SKL.MUMntTroll_RCTC	Frames:5
		AnimationSound = Sound:TrollTreeSwingLight 		Animation:MUMntTroll_SKL.MUMntTroll_RCTD	Frames:29
		AnimationSound = Sound:TrollTreeSwingLight 		Animation:MUMntTroll_SKL.MUMntTroll_RCTE	Frames:72
		AnimationSound = Sound:TrollTreeSwingLight 		Animation:MUMntTroll_SKL.MUMntTroll_THRW	Frames:17
		AnimationSound = Sound:TrollTreeSwingLight 		Animation:MUMntTroll_SKL.MUMntTroll_GRBA	Frames:6
		AnimationSound = Sound:TrollIdleRubHeadVox 		Animation:MUMntTroll_SKL.MUMntTroll_RCTB	Frames:3
		AnimationSound = Sound:TrollGetupShakeHeadVox 	Animation:MUMntTroll_SKL.MUMntTroll_GTPA	Frames:31
		AnimationSound = Sound:ImpactTrollTreeLight 	Animation:MUMntTroll_SKL.MUMntTroll_IDLE	Frames:53
		AnimationSound = Sound:TrollGrabRock 			Animation:MUMntTroll_SKL.MUMntTroll_GRBB	Frames:0
		AnimationSound = Sound:TrollRoar 				Animation:MUMntTroll_SKL.MUMntTroll_EATA	Frames:3
		AnimationSound = Sound:TrollRoar 				Animation:MUMntTroll_SKL.MUMntTroll_GTPA	Frames:105
		AnimationSound = Sound:TrollRoar 				Animation:MUMntTroll_SKL.MUMntTroll_HITA	Frames:21
		AnimationSound = Sound:TrollRoar 				Animation:MUMntTroll_SKL.MUMntTroll_HITB	Frames:10
		AnimationSound = Sound:TrollRoar 				Animation:MUMntTroll_SKL.MUMntTroll_HITC	Frames:13
		AnimationSound = Sound:TrollRoar 				Animation:MUMntTroll_SKL.MUMntTroll_HITE	Frames:10
		AnimationSound = Sound:TrollRoar 				Animation:MUMntTroll_SKL.MUMntTroll_RCTC	Frames:6
		AnimationSound = Sound:TrollRoar 				Animation:MUMntTroll_SKL.MUMntTroll_RCTD	Frames:30
		AnimationSound = Sound:TrollRoar 				Animation:MUMntTroll_SKL.MUMntTroll_RCTE	Frames:53
		AnimationSound = Sound:TrollRoar 				Animation:MUMntTroll_SKL.MUMntTroll_RPGC	Frames:1 33 58 92 117
		AnimationSound = Sound:TrollRoar 				Animation:MUMntTroll_SKL.MUMntTroll_EATA	Frames:1
		AnimationSound = Sound:TrollRoar 				Animation:MUMntTroll_SKL.MUMntTroll_DRMA	Frames:100
		AnimationSound = Sound:DrumHitSingleToSummonMountainGiants	Animation:MUMntTroll_SKL.MUMntTroll_DRMA	Frames:27 58 88 90
	End
	End

	ReplaceModule ModuleTag_LGAU
	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU1			  ; Tie into LargeGroupAudio system
	  	Key = Troll
	     ;UnitWeight = 2 ; Trollsie counts as 2 infantry when computing group size
	End
	End

	CrowdResponseKey = None  ;Orc


	RadarPriority	= UNIT
	KindOf			= PRELOAD SELECTABLE CAN_CAST_REFLECTIONS TROLL_BUFF_NUGGET MONSTER SCORE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT NO_FREEWILL_ENTER PATH_THROUGH_INFANTRY SCARY CAN_ATTACK_WALLS HEAVY_MELEE_HITTER ARMY_SUMMARY
	BuildCost		= MORDOR_TROLL_BUILDCOST
	BuildTime		= MORDOR_TROLL_BUILDTIME
	ShockwaveResistance = SHOCKWAVE_RESISTANCE_STRONG

	RemoveModule ModuleTag_porcupineFormation

	AddModule
	Body = DelayedDeathBody ModuleTag_021
		CheerRadius 				= EMOTION_CHEER_RADIUS
    	MaxHealth					= 1000                  
    	MaxHealthDamaged			= 500
    	MaxHealthReallyDamaged		= 10
		DoHealthCheck				= No			; Don't want to get the delayed death behaviour when we die normally.
		DelayedDeathTime			= 5000
		CanRespawn					= No			; Unit can't get revived.
  	End
	End

	AddModule
	Behavior = StancesBehavior ModuleTag_StancesBehavior11
        		StanceTemplate = Artillery
    	End
	End

	AddModule
	Behavior = BoredUpdate BoredModuleTagOne1
		ScanDelayTime	= 30000
		ScanDistance	= 70				; default value is 300 units 
		BoredFilter		= NONE +MordorMountainTroll +MordorCaveTroll +DwarvenPhalanx
		SpecialPowerTemplate = SpecialAbilityMountainTrollBored
	End
	End

	LocomotorSet
		Locomotor = TrollLocomotor
		Condition = SET_NORMAL 
		Speed     = 60
	End

	AddModule
	Behavior = HitReactionBehavior HitReactionBehaviorModuleTag1
		HitReactionLifeTimer1 = 1500 ; level 1 (light  damage)  hit reaction animations in frames (5 per sec)
		HitReactionLifeTimer2 = 1500 ; level 2 (medium damage)  hit reaction animations in frames (5 per sec)
		HitReactionLifeTimer3 = 3000 ; level 3 (heavy  damage)  hit reaction animations in frames (5 per sec)

		HitReactionThreshold1 = 0.0   ; level 1 (light  damage) threshold trigger
		HitReactionThreshold2 = 50.0  ; level 2 (medium damage) threshold trigger
		HitReactionThreshold3 = 200.0  ; level 3 (heavy  damage) threshold trigger
	End
	End

	AddModule
   	Behavior = EmotionTrackerUpdate	Module_EmotionTracker1
		AddEmotion			=	Terror_Base
		AddEmotion			=	Doom_Base
		AddEmotion			=   BraceForBeingCrushed_Base
		AddEmotion			=	UncontrollableFear_Base
		//	AddEmotion			=	FearIdle_Base
		//	AddEmotion			=	FearBusy_Base
		AddEmotion			=	Point_Base
		AddEmotion			=	Taunt_Base
 		AddEmotion			=	CheerIdle_Base
		AddEmotion			=	CheerBusy_Base
		AddEmotion			=	HeroCheerIdle_Base
		AddEmotion			=	HeroCheerBusy_Base
		AddEmotion			=	Alert_Base
	End	
	End	








End



;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Mordor Troll Horde
;Reference: MordorTrollHordeRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

CommandSet TrollHordeCommandSet
	1	= Command_ToggleStance

	12	= Command_CaptureBuilding
	13	= Command_AttackMove
	14	= Command_Stop
End


Object DwarvenPhalanxHorde

	AddModule	
	Behavior = ExperienceLevelCreate ModuleTag_MPLevelBonus1
		LevelToGrant = 2
		MPOnly = No
	End
	End


	CommandSet = TrollHordeCommandSet

	DisplayName = TrollHorde


	KindOf = SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT INFANTRY HORDE MELEE_HORDE NOTIFY_OF_PREATTACK LARGE_RECTANGLE_PATHFIND ;;UNATTACKABLE 
	

	ReplaceModule ModuleTag_HordeContain
	Behavior = HordeContain ModuleTag_HordeContain1
		FrontAngle = 360
		FlankedDelay = 50  ;2000
		ObjectStatusOfContained			= 
		InitialPayload					= DwarvenPhalanx 5
		Slots							= 5
		PassengerFilter					= ANY +INFANTRY +MONSTER ; this is so it will allow trolls or any thing in the horde, even balrog or a dragon lmao.
		ShowPips						= No
		ThisFormationIsTheMainFormation = Yes	;//Used to determine which armorset to use (and anything else we want!)
		RandomOffset = X:5 Y:-5
		
		MeleeBehavior = Amoeba
		End					

		; Banner Carrier info		
		BannerCarriersAllowed	= MordorBannerOrc									;// types of units that are allowed as banner carriers
		BannerCarrierPosition	= UnitType:MordorFighter	Pos:X:70.0 Y:0.0		;// (DEFAULT) position of banner carrier
		
		RankInfo = RankNumber:1 UnitType:DwarvenPhalanx Position:X:0 Y:0		Position:X:-17.95 Y:48.59		Position:X:43.06 Y:21.47		Position:X:28.04 Y:-57.66		Position:X:-46.81 Y:-34.39 

		
		;// Positions for 5
		
		RanksToReleaseWhenAttacking		= 1 
		
		MeleeAttackLeashDistance		= 40	;// How far the hordes can move from the center of the horde when melee attacking.				
		BackUpMinDelayTime				= 1		;// The minimum amount of time to delay before backing up
		BackUpMaxDelayTime				= 3000	;// The maximum amount of time to delay before backing up
		BackUpMinDistance				= 1		;// The minimum number of cells to backup
		BackUpMaxDistance				= 3		;// The maximum number of cells to backup
		BackupPercentage				= 80%	;// The amount of chance that a unit will back up.


	End
	End


	LocomotorSet
		Locomotor = TrollLocomotor
		Condition = SET_NORMAL 
		Speed     = 54
	End

	Geometry = BOX
	GeometryMajorRadius = 50.0
	GeometryMinorRadius = 70.0
	GeometryHeight = 40.0
	GeometryIsSmall = No

End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Mordor Mountain Troll
;Reference: MordorMountainTrollRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Weapons
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Weapon NewMordorCaveTrollPunch  ; BALANCE CaveTroll Weapon Normal
  LeechRangeWeapon		= Yes
  RadiusDamageAffects = ENEMIES 
  AttackRange           = STANDARD_MELEE_ATTACK_RANGE
  MeleeWeapon           = Yes
  DelayBetweenShots     = MORDOR_TROLL_PUNCH_DELAYBETWEENSHOTS
  FiringDuration        = MORDOR_TROLL_PUNCH_FIRINGDURATION
  PreAttackDelay        = MORDOR_TROLL_PUNCH_PREATTACKDELAY
  PreAttackType         = PER_SHOT ; Do the delay each time we attack a new target
  PreAttackFX          	= FX_TrollTreeSwing
  FireFX               	= FX_TrollPunchGeneric
  DamageDealtAtSelfPosition = Yes ; A melee based AoE.  Arc radiates from me, not them
  AcceptableAimDelta	= 15.0 

  DamageNugget                        ; A basic Nugget that just does damage
    Damage        = 150
    Radius        = 45.0
    DamageArc      = 45
    DamageType    = SLASH ;HERO  ;SIEGE
    DamageFXType  = CLUBBING
    DeathType     = NORMAL
  End
  MetaImpactNugget                    ; A Nugget that throws things back with force
    ShockWaveAmount   = 30.0
    ShockWaveRadius   = 45.0
    ShockWaveTaperOff = 1.0
    ShockWaveArc      = 45
    ShockWaveZMult    = 1.20
 ;   HeroResist		  = 0.90		; 90% resistance to heroes
  End
End


;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Commandset
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
; Basicly  i took out everything but stance
CommandSet NewMordorMountainTrollCommandSet
	1	= Command_ToggleStance
	;2  	= Command_ToggleMountainTrollRockThrow
	;3  	= Command_SpecialAbilityTrollFindTree 
	;4  	= Command_SpecialAbilityTrollFindTastyOrc
	
	13 	= Command_AttackMove
	14 	= Command_Stop
	;16	= Command_SpecialAbilityTrollGrabTree			; For context-sensitive tree grab
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
; the mordor troll it self
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

; these are the mordor type mountain trolls

Object MordorMountainTroll

	AddModule
	Behavior = AutoHealBehavior ModuleTag_GaintHealing
		StartsActive = Yes
		HealingAmount = 10 ; extremly slow heal.
		HealingDelay = 1000
		StartHealingDelay = HERO_HEAL_DELAY
		HealOnlyIfNotInCombat = Yes
	End
	End

	CommandPoints		= 25

	Scale = 1.2

	CommandSet				= NewMordorMountainTrollCommandSet

	WeaponSet
		Conditions          = None
		Weapon              = PRIMARY	NewMordorCaveTrollPunch
		Weapon              = SECONDARY	MordorCaveTrollBash
		OnlyAgainst         = SECONDARY	STRUCTURE BLOCKING_GATE
		Weapon				= TERTIARY	MordorCaveTrollPunch
		OnlyInCondition		= TERTIARY	MOVING
	End

	WeaponSet
		Conditions          = PASSENGER_TYPE_ONE 
		Weapon              = PRIMARY	MordorCaveTrollClubSwing
		Weapon				= SECONDARY	MordorCaveTrollClubSwing
		OnlyInCondition		= SECONDARY	MOVING
	End

	BuildCost = 400

	LocomotorSet
		Locomotor = TrollLocomotor
		Condition = SET_NORMAL 
		Speed     = 57
	End

	RemoveModule Module_DoCommandUpgrade ; this makes the troll NOT use rocks as default attack

	ReplaceModule ModuleTag_02
	Body = DelayedDeathBody ModuleTag_021
		CheerRadius 				= EMOTION_CHEER_RADIUS
    	MaxHealth					= 2500               
    	MaxHealthDamaged			= 1250
    	MaxHealthReallyDamaged		= 625
		DoHealthCheck				= No			; Don't want to get the delayed death behaviour when we die normally.
		DelayedDeathTime			= 5000
		CanRespawn					= No			; Unit can't get revived.
  	End
	End


End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Half-Trolls
;Reference: HalfTrollRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
; make em always fully upgraded

CommandSet NewWildMarauderHordeCommandSet
	1  	= Command_ToggleStance
	2  	= Command_WildMarauderPorcupineFormation
	12 	= Command_CaptureBuilding
	13 	= Command_AttackMove
	14 	= Command_Stop
End

Object WildMarauderHorde

	CommandSet  = NewWildMarauderHordeCommandSet

	BuildCost = 600
	BuildTime = 30

	AddModule	
	Behavior = ExperienceLevelCreate ModuleTag_MPLevelBonus1
		LevelToGrant = 2
		MPOnly = No
	End
	End

	AddModule
	Behavior = GrantUpgradeCreate ModuleTag_1269872q3
		UpgradeToGrant = Upgrade_GandalfWhite  ;
	End 
	End

	ReplaceModule ModuleTag_BasicTraining
	Behavior = LevelUpUpgrade ModuleTag_BasicTraining1
		TriggeredBy			= Upgrade_GandalfWhite  ;Upgrade_WildBasicTraining
		LevelsToGain		= 1
		LevelCap			= 2
	End
	End

	ReplaceModule ModuleTag_ProductionLegality2
	Behavior = StatusBitsUpgrade ModuleTag_ProductionLegality21
		TriggeredBy = Upgrade_GandalfWhite  ;Upgrade_WildHeavyArmor
	End
	End

	ReplaceModule ModuleTag_ProductionLegality3
	Behavior = StatusBitsUpgrade ModuleTag_ProductionLegality31
		TriggeredBy = Upgrade_GandalfWhite  ;Upgrade_WildForgedBlades
	End
	End

End

Object WildMarauder

	AddModule	
	Behavior = ExperienceLevelCreate ModuleTag_MPLevelBonus1
		LevelToGrant = 2
		MPOnly = No
	End
	End

	AddModule
	Behavior = GrantUpgradeCreate ModuleTag_1269872q3
		UpgradeToGrant = Upgrade_GandalfWhite  ;
	End 
	End

	CommandPoints		= 5

	ArmorSet
		Conditions      = None
		Armor           = WildMarauderHeavyArmor  ;WildMarauderArmor
		DamageFX        = NormalDamageFX
	End

	ReplaceModule ArmorUpgradeModuleTag
	Behavior = ArmorUpgrade ArmorUpgradeModuleTag1
		TriggeredBy		= Upgrade_GandalfWhite  ;Upgrade_WildHeavyArmor
		ArmorSetFlag	= PLAYER_UPGRADE
	End
	End

	ReplaceModule Armor_Upgrade
	Behavior = SubObjectsUpgrade Armor_Upgrade1
		TriggeredBy			= Upgrade_GandalfWhite  ;Upgrade_WildHeavyArmor
		UpgradeTexture		= WUMaraud_C.tga 0 WUMaraud_HA.tga
		RecolorHouse		= Yes
		ExcludeSubobjects	= Forged_Blade
	End
	End

	ReplaceModule ForgedBlades_Upgrade
	Behavior = SubObjectsUpgrade ForgedBlades_Upgrade1
		TriggeredBy		= Upgrade_GandalfWhite  ;Upgrade_WildForgedBlades
		ShowSubObjects	= Forged_Blade
	End
	End

	ReplaceModule ForgedBlades_UpgradeDetection
	Behavior = StatusBitsUpgrade ForgedBlades_UpgradeDetection1
		TriggeredBy		= Upgrade_GandalfWhite  ;Upgrade_WildForgedBlades
	End
	End



End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Mountain Giants
;Reference: MountainGiantsRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

; the two MountainGiants types

Object WildMountainGiant

	AddModule
	Behavior = AutoHealBehavior ModuleTag_GaintHealing
		StartsActive = Yes
		HealingAmount = 10 ; extremly slow heal.
		HealingDelay = 1000
		StartHealingDelay = HERO_HEAL_DELAY
		HealOnlyIfNotInCombat = Yes
	End
	End

	CommandPoints		= 50




End

Weapon NewWildMountainGiantStomp ; Special ability
	IdleAfterFiringDelay = 0
	AttackRange = WILD_MOUNTAIN_GIANT_STOMP_RADIUS
	MinimumAttackRange = 0.8
	WeaponSpeed = 401         ; dist/sec 
	MinWeaponSpeed = 241
	MaxWeaponSpeed = 601      ; dist/sec Upper limit on scaling, when attacking past nominal "max" range
	ScaleWeaponSpeed = Yes ; Used for lob weapons, scales speed proportional to range
	RadiusDamageAffects = ENEMIES NOT_SIMILAR
	DelayBetweenShots = 5000               ; time between shots, msec
	PreAttackDelay        = 2600
	PreAttackType         = PER_ATTACK ; Do the delay each time we attack a new target
	PreAttackFX           = FX_GandalfPreAttackBlast
	FireFX                = FX_GiantStomp
	FiringDuration      = 1400
	DamageNugget                        ; A basic Nugget that just does damage
		Damage			= 2000  ;WILD_MOUNTAIN_GIANT_STOMP_DAMAGE
		Radius			= 70  ;WILD_MOUNTAIN_GIANT_STOMP_RADIUS
		DamageType		= FORCE
		DeathType		= NORMAL
		DamageSpeed		= 700.0 ; must match the ShockWaveSpeed below
	End
	MetaImpactNugget                    ; A Nugget that throws things back with force
;		HeroResist			= .75
		ShockWaveAmount   = 50  ;35.0
		ShockWaveRadius   = 70; WILD_MOUNTAIN_GIANT_STOMP_RADIUS
		ShockWaveTaperOff = 1.0
		ShockWaveSpeed	  = 700.0 
	End
End

Armor NewMountainGiantArmor
  Armor = DEFAULT       50%    ;this sets the level for all nonspecified damage types
  Armor = CRUSH           50%    ;horseman damage
  Armor = SLASH         100%    ;1%	 ;soldier damage
  Armor = PIERCE        50%    ;archer damage
  Armor = SPECIALIST    200%   ; 200%
  Armor = FLAME         75%    ;fire damage
  Armor = SIEGE         100%    ;siege damage
  Armor = STRUCTURAL    75%    ;Structural damage (Ent rocks)
  Armor = CHOP          100%    ;axe damage
  Armor = HERO          125%    ;hero damage
  Armor = HERO_RANGED   125%    ;Hero bow damage
  Armor = MAGIC         100%    ;hero damage
End


ChildObject WildMountainGiant_Summoned WildMountainGiant

	CommandPoints		= 75

	DisplayName = TrainedMountainGiant

	AddModule
	Behavior = GrantUpgradeCreate ModuleTag_1269872q3
		UpgradeToGrant = Upgrade_GandalfWhite  ;
	End 
	End

	AddModule
	Behavior = SubObjectsUpgrade Costume_5lakjdfh
		TriggeredBy		= Upgrade_GandalfWhite ;
		UpgradeTexture	= wumntgiant_c.tga 0 muattktroll.tga  ;1;  ; mudrmtroll.tga  ;2;  
				RecolorHouse	= No
	End
	End

	AddModule
	Behavior = AutoHealBehavior ModuleTag_GaintHealing
		StartsActive = Yes
		HealingAmount = 30
		HealingDelay = 1000
		StartHealingDelay = HERO_HEAL_DELAY
		HealOnlyIfNotInCombat = Yes
	End
	End

	Scale = 1.2

	ArmorSet
		Conditions      = None
		Armor           = NewMountainGiantArmor
		DamageFX        = EntDamageFX
	End

	ReplaceModule ModuleTag_Body
	Body = ActiveBody ModuleTag_Body1
		CheerRadius		= EMOTION_CHEER_RADIUS
		MaxHealth		= 5000 ;1k more health then the smaller gaint
		MaxHealthDamaged	= 2500
	End
	End

	ReplaceModule ModuleTag_StompStarter
	Behavior = SpecialPowerModule ModuleTag_StompStarter1       
		SpecialPowerTemplate      = SpecialAbilityWildMountainGiantStomp
		UpdateModuleStartsAttack  = Yes
		StartsPaused		  	  = No
	End
	End

	ReplaceModule ModuleTag_StompWeaponFireUpdate
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_StompWeaponFireUpdate1   
		SpecialPowerTemplate    = SpecialAbilityWildMountainGiantStomp
		WhichSpecialWeapon		= 2		; SPECIAL_WEAPON_TWO
		SkipContinue			= Yes

		UnpackTime              = 1367		//Frames 1-41 (of 97)
		PackTime                = 1867		//Remaining frames 41-97
		;FreezeAfterTriggerDuration = 2500 ; Hold AI for this long after we fire.
		
		AwardXPForTriggering    = 0		
		StartAbilityRange		= 80.0
		
		SpecialWeapon			= NewWildMountainGiantStomp
	End
	End


End


;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Goblin Cave Troll
;Reference: GoblinCaveTrollsRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
; the goblins CaveTroll types that are more gray and smaller then the mordor ones

Object GoblinCaveTroll ; these guys are really really crapy, rock throw is the only useful thing.
;they have low health low armor and low meele attack

	CommandPoints		= 25

	BuildCost = 300

	AddModule
	Behavior = AutoHealBehavior ModuleTag_GaintHealing
		StartsActive = Yes
		HealingAmount = 10 ; extremly slow heal.
		HealingDelay = 1000
		StartHealingDelay = HERO_HEAL_DELAY
		HealOnlyIfNotInCombat = Yes
	End
	End

End



;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Gorzak
;Reference: GorzakRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;FXs
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<


FXParticleSystem GorzakBladeMaster
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXBlast.tga  ;EXRing02.tga
    Lifetime = 15 15
    SortLevel = 1
    Size = 15 25
    BurstCount = 1 1
  End
  Color = DefaultColor
    Color2 = R:100 G:45 B:30 5
    Color3 = R:0 G:0 B:0 15
    Color4 = R:32 G:32 B:32 0
  End
  Update = DefaultUpdate
    SizeRate = 1 1
    SizeRateDamping = 1 1
    AngleZ = 0 7
    AngularRateZ = -0.1 0.1
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    Gravity = -0.04
    VelocityDamping = 1 1
  End
  EmissionVelocity = OutwardEmissionVelocity
  End
  EmissionVolume = SphereEmissionVolume
    Radius = 20
  End
  Draw = DefaultDraw
  End
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;FX List
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

FXList FX_GloinDieToRespawn1
  ParticleSystem
    Name = GandalfSwordHitSpark
    Offset = X:12.0 Y:0.0 Z:8.0
    OrientToObject = Yes
  End
  ParticleSystem
    Name = GandalfSwordHitFlash
    Offset = X:12.0 Y:0.0 Z:8.0
    OrientToObject = Yes
  End
End

FXList FX_GloinInitialSpawn1
  Sound
	Name = GenericRespawn1
  End
  ParticleSystem
    Name = ResurrectionCenter
    Offset = X:0.0 Y:0.0 Z:5.0
    OrientToObject = Yes
  End
  ParticleSystem
    Name = ResurrectionLightShaft
    Offset = X:0.0 Y:0.0 Z:0.0
    OrientToObject = Yes
  End
  ParticleSystem
    Name = ResurrectionVortex
    Offset = X:0.0 Y:0.0 Z:5.0
    OrientToObject = Yes
  End
  ParticleSystem
    Name = ResurrectionWave
    Offset = X:0.0 Y:0.0 Z:5.0
    OrientToObject = Yes
  End
End

FXList FX_GloinRespawn1
  Sound
	Name = GenericRespawn1
  End
  ParticleSystem
    Name = ResurrectionCenter
    Offset = X:0.0 Y:0.0 Z:5.0
    OrientToObject = Yes
  End
  ParticleSystem
    Name = ResurrectionLightShaft
    Offset = X:0.0 Y:0.0 Z:0.0
    OrientToObject = Yes
  End
  ParticleSystem
    Name = ResurrectionVortex
    Offset = X:0.0 Y:0.0 Z:5.0
    OrientToObject = Yes
  End
  ParticleSystem
    Name = ResurrectionWave
    Offset = X:0.0 Y:0.0 Z:5.0
    OrientToObject = Yes
  End
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Timer and Modifierlists
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

ModifierList GorzakBladeMaster
	Category = SPELL
	Modifier = ARMOR 50%			; Additive.  Sum of these are subtracted from all entries in Armor.ini
	Modifier = DAMAGE_MULT 125%		; Multiplicitive.
	Modifier = SPEED 115%			; Multiplicitive.		
	Modifier = AUTO_HEAL 125%			; Additive
	Duration = 30000
End


SpecialPower SpecialAbilityGorzakBladeMaster
	Enum									  =	SPECIAL_HERO_MODE
	ReloadTime								  =	10000 ;120000
	PublicTimer								  =	No
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Weapons
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Weapon GorzakWeapon
	LeechRangeWeapon			= Yes
	RadiusDamageAffects			= ENEMIES								; Turning off friendly fire for all allies, but ya know, this could say NotSimilar and then he could hit friendlies except for trolls
	MeleeWeapon					= Yes
	AttackRange					= 20								; this was tuned with the Damage and shock wave nugget so it looks good with club
	FireFX						= FX_TrollClubHit
	ClipSize					= INFINITE_CLIP_SIZE					; how many shots in a Clip (0 == infinite)
	AutoReloadsClip				= No									; We need a rock explicitly picked up.
	DelayBetweenShots			= 1400	; time between shots, msec
	FiringDuration				= 1400
	PreAttackDelay				= 600
	PreAttackType				= PER_SHOT								; Do the delay each time we attack a new target
	PreAttackFX					= FX_TrollTreeSwing
	DamageDealtAtSelfPosition	= Yes									; A melee based AoE.  Arc radiates from me, not them
	AcceptableAimDelta			= 35.0 

	DamageNugget									; A basic Nugget that just does damage
		Damage			= 400  ;
		DamageScalar		= 50% NONE +HERO +PIKE
		DamageScalar		= 50% NONE +STRUCTURE
		Radius			= 55.0						; matches impact nugget so it throws them back and hurts them
		DamageArc		= 90
		DamageType		= SIEGE
		DamageFXType		= CLUBBING
		DeathType		= NORMAL
	End

	MetaImpactNugget								; A Nugget that throws things back with force
		ShockWaveAmount   = 60.0
		ShockWaveRadius   = 55.0
		ShockWaveTaperOff = 0.75
		ShockWaveArc      = 90
		ShockWaveZMult    = 1.20
;		HeroResist		  = 0.90					; 90% resistance to heroes
	End
End


Weapon GorzakHeroWeapon
	LeechRangeWeapon			= Yes
	RadiusDamageAffects			= ENEMIES								; Turning off friendly fire for all allies, but ya know, this could say NotSimilar and then he could hit friendlies except for trolls
	MeleeWeapon					= Yes
	AttackRange					= 20									; this was tuned with the Damage and shock wave nugget so it looks good with club
	FireFX						= FX_TrollClubHit
	ClipSize					= INFINITE_CLIP_SIZE					; how many shots in a Clip (0 == infinite)
	AutoReloadsClip				= No									; We need a rock explicitly picked up.
	DelayBetweenShots			= 1000	; These Are lower so that he hits just a bit more rapid then normal, means more ownage!
	FiringDuration				= 1000
	PreAttackDelay				= 400
	PreAttackType				= PER_SHOT								; Do the delay each time we attack a new target
	PreAttackFX					= FX_TrollTreeSwing
	DamageDealtAtSelfPosition	= Yes									; A melee based AoE.  Arc radiates from me, not them
	AcceptableAimDelta			= 35.0 

	DamageNugget									; A basic Nugget that just does damage
		Damage			= 400  ;
		DamageScalar		= 100% NONE +HERO +PIKE ; this means hes 100% More Damage to heroes and pikes
		DamageScalar		= 100% NONE +STRUCTURE ; this means hes 100% more damage to buildings
		Radius			= 55.0						; matches impact nugget so it throws them back and hurts them
		DamageArc		= 90
		DamageType		= SIEGE
		DamageFXType		= CLUBBING
		DeathType		= NORMAL
	End

	MetaImpactNugget								; A Nugget that throws things back with force
		ShockWaveAmount   = 60.0
		ShockWaveRadius   = 55.0
		ShockWaveTaperOff = 0.75
		ShockWaveArc      = 90
		ShockWaveZMult    = 1.20
;		HeroResist		  = 0.90					; 90% resistance to heroes
	End
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;XP
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<



ExperienceLevel	GloinLevel5
	TargetNames						=	DwarvenGloin
	RequiredExperience				=	GLOIN_LVL5_EXP_NEEDED 
	ExperienceAward					=	GLOIN_LVL5_EXP_AWARD	
	AttributeModifiers				=	HeroLevelUpDamage4
	Rank							=	5
	Upgrades						=	Upgrade_DreadVisage
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	SelectionDecal
		Texture						=	decal_hero_good	
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40 ;16
		MaxRadius					=	200 ;16
		MaxSelectedUnits			=	40 ;1
	End	
END	


ExperienceLevel	GloinLevel10
	TargetNames						=	DwarvenGloin
	RequiredExperience				=	GLOIN_LVL10_EXP_NEEDED 
	ExperienceAward					=	GLOIN_LVL10_EXP_AWARD	
  	AttributeModifiers				=	HeroLevelUpDamage9
	Rank							=	10
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	Upgrades						=	Upgrade_GimliSlayerTrigger
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40 ;16
		MaxRadius					=	200 ;16
		MaxSelectedUnits			=	40 ;1
	End	
END	

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;CommandButtons
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

CommandButton Command_SpecialAbilityRoar  ;Command_DominateTroll   ;Command_WitchKingDreadVisage
	Command                 = SPECIAL_POWER
	SpecialPower            = SpecialAbilityFakeLeadership
	Options					= NONPRESSABLE NEED_UPGRADE
	NeededUpgrade			= Upgrade_DreadVisage
	TextLabel               = CONTROLBAR:GorzakDread
	ButtonImage             = HSNazgulDreadVisage
	RadiusCursorType        = TrainingRadiusCursor
	ButtonBorderType        = ACTION
	DescriptLabel           = CONTROLBAR:ToolTipGorzakDread
	InPalantir				= Yes
End

CommandButton Command_CreateAHero_BerserkerRage_Level1  ;Command_SpecialAbilityBladeMaster
  Command                 = SPECIAL_POWER 
  SpecialPower            = SpecialAbilityGorzakBladeMaster
  TextLabel               = CONTROLBAR:GorzakBladeMaster
  ButtonImage             = HSAragornBladeMaster
  ButtonBorderType        = ACTION 
  DescriptLabel           = CONTROLBAR:ToolTipGorzakBladeMaster
  InPalantir			  = Yes
  AutoAbility			  = Yes
  AutoDelay				  = 30.0 ; this should sync with the Aragorn's hero mode effect time
  PresetRange			  = 50.0
  ;UnitSpecificSound       = AragornVoiceBladeMaster
End


;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Commandset
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

CommandSet GorzakCommandSet
	 1 = Command_ToggleStance
	 2 = Command_SpecialAbilityRoar
	 3 = Command_CreateAHero_BerserkerRage_Level1
    	12 = Command_CaptureBuilding
	13 = Command_AttackMove
	14 = Command_Stop
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Armor
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Armor GorzakArmor
  Armor = DEFAULT         20%   
  Armor = SLASH           20%   
  Armor = PIERCE          20%  
  Armor = SPECIALIST     25%
  Armor = CRUSH            1% 
  Armor = CAVALRY	  25%
  Armor = SIEGE           50% 	; just because you have so much armor on does not mean but ass rocks dont hurt.
  Armor = FLAME           75%	; It would get hot in all that armor
  Armor = MAGIC           75%	;Magic goes throw armor :-)
  Armor = HERO            50%	; heros can slash around armor eh?
  Armor = HERO_RANGED     75%	; im sure legolas or other archer heros can shoot at his head or neck?
  Armor = STRUCTURAL    75%    	; biger* ass rocks
  FlankedPenalty 	 = 50%    
End


;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Gorzak Object
;Reference: GorzakObjectRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Object DwarvenGloin

	EvaEventDieOwner 		= None

	RecruitText = CONTROLBAR:GloinRecruit
	ReviveText	= CONTROLBAR:GloinRevive


	RemoveModule Icon  ; This is the model module that makes that blueish glow ring around dwarven heroes.

	Scale = 1.1 ; make him a little biger then the other trolls.

	SelectPortrait = CPTroll
	ButtonImage = HICAHTroll

	DisplayName = Gorzak

	AddModule
	Behavior = GrantUpgradeCreate ModuleTag_1
		UpgradeToGrant = Upgrade_GandalfWhite  ;
	End 
	End

	AddModule
	Behavior = SubObjectsUpgrade CorruptedWeapon_Upgrade01562
	TriggeredBy			   = Upgrade_GandalfWhite
	HideSubObjects		   = TrollBane 
	;HideSubObjects		   = TrollMace
	HideSubObjects		   = TrollSword
	;HideSubObjects		   = TrollHammer 
	HideSubObjects		   = TrollTree
	;HideSubObjects		   = CLUB_01
	HideSubObjects		   = HMR_02


	;HideSubObjects		   = SLDR_01
	HideSubObjects		   = SLDR_02
	;HideSubObjects		   = SLDR_03
	;HideSubObjects		   = SLDR_04
	HideSubObjects		   = SLDR_05

	;HideSubObjects		   = HLMT_01
	HideSubObjects		   = HLMT_02
	;HideSubObjects		   = HLMT_03

	;HideSubObjects		   = GNLT_01
	HideSubObjects		   = GNLT_02
	HideSubObjects		   = GNLT_03

	;HideSubObjects		   = CHEST_01
	;HideSubObjects		   = CHEST_02
	;HideSubObjects		   = CHEST_03

	FadeTimeInSeconds      = 0.0
	RecolorHouse		   = No

	End
	End


; the 4 types of skins and skeletons two of each.
;	CHSS_TL_U_SKN
;	CHSS_TL_U_SKL
;
;	CHSS_TL_C_SKN
;	CHSS_TL_C_SKL


	ReplaceModule ModuleTag_01
	Draw = W3DScriptedModelDraw ModuleTag_011

		DefaultModelConditionState
			Model               = CHSS_TL_U_SKN      ;CHCM_CM_U_SKN1
			Skeleton            = CHSS_TL_U_SKL     ;CHCM_CM_U_SKL
	
			WeaponLaunchBone	= PRIMARY Bat_HandL
		End

		ModelConditionState = WEAPONSET_HERO_MODE
			ParticleSysBone = BAT_HEAD GorzakBladeMaster FollowBone:Yes
		End




AnimationState        = STUNNED_FLAILING 
	StateName           = STATE_Sword
	Animation
		AnimationName     = CHSS_TL_U_FLYA
		AnimationMode     = LOOP
	End
	Flags               = RANDOMSTART
End


AnimationState        = DYING SPLATTED
	StateName           = STATE_Sword
	Animation
		AnimationName     = CHSS_TL_U_LNDA
		AnimationMode     = ONCE
	End
End

AnimationState        = DYING
	StateName           = STATE_Sword
	Animation
		AnimationName     = CHSS_TL_U_DIEA
		AnimationMode     = ONCE
	End
	Animation           = GUHero_DIEB
		AnimationName     = CHSS_TL_U_DIEB
		AnimationMode     = ONCE
	End
End



AnimationState        = STUNNED_STANDING_UP
	StateName           = STATE_Sword
	Animation
		AnimationName     = CHSS_TL_U_GTPA
		AnimationMode     = ONCE
		AnimationSpeedFactorRange = 1.5 1.5
	End
End


AnimationState        = STUNNED 
	StateName           = STATE_Sword
	Animation           = GUHero_LNDA
		AnimationName     = CHSS_TL_U_LNDA
		AnimationMode     = ONCE
	End
End				



//------------------ MOVING -------------------------------------------------------------


		//--- Running with sword
		AnimationState			= MOVING
			StateName           = STATE_RunningSword
			Flags               = RANDOMSTART
			//ParticleSysBone    = None InfantryDustTrails
			Animation
				AnimationName   = CHSS_TL_U_RUNA
//				AnimationMode   = ONCE
				AnimationSpeedFactorRange = 0.85 0.85
//				Distance = 28
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Bow" then CurDrawableSetTransitionAnimState("TRANS_BowToSword") end
				if Prev == "STATE_RunningBow" then CurDrawableSetTransitionAnimState("TRANS_BowToSword_Running") end
				if Prev == "STATE_Rappelling"  then CurDrawableSetTransitionAnimState("Trans_RappellingToRunning") return end
			EndScript
		End

		//---------------------------------------------------




		AnimationState				= FIRING_OR_PREATTACK_A // Melee attack.
			Animation
				AnimationName		= CHSS_TL_U_ATKA
				AnimationMode		= ONCE
				UseWeaponTiming		= Yes
				AnimationPriority   = 20
				AnimationSpeedFactorRange = 1.2 1.2	
			End
			Animation
				AnimationName		= CHSS_TL_U_ATKD
				AnimationMode		= ONCE
				UseWeaponTiming		= Yes
				AnimationPriority   = 20
				AnimationSpeedFactorRange = 1.2 1.2	
			End
			Animation
				AnimationName		= CHSS_TL_U_ATKE
				AnimationMode		= ONCE
				UseWeaponTiming		= Yes
				AnimationPriority   = 20
				AnimationSpeedFactorRange = 1.2 1.2	
			End
			Animation
				AnimationName		= CHSS_TL_U_ATKF ; vs building
				AnimationMode		= ONCE
				UseWeaponTiming		= Yes
				AnimationPriority   = 1
				AnimationSpeedFactorRange = 1.2 1.2	
			End
			Animation
				AnimationName		= CHSS_TL_U_ATKG ; left hand hit
				AnimationMode		= ONCE
				UseWeaponTiming		= Yes
				AnimationPriority   = 8
				AnimationSpeedFactorRange = 1.2 1.2	
			End
			Animation
				AnimationName		= CHSS_TL_U_ATKI
				AnimationMode		= ONCE
				UseWeaponTiming		= Yes
				AnimationPriority   = 15
				AnimationSpeedFactorRange = 1.2 1.2	
			End
			Animation 					; hand punch
				AnimationName		= CHSS_TL_U_ATKH
				AnimationMode		= ONCE
				UseWeaponTiming		= Yes
				AnimationPriority   = 8
				AnimationSpeedFactorRange = 1.2 1.2	
			End


			;Animation 					; Very slow Hammer over head to ground, good for an abillity
			;	AnimationName		= CHSS_TL_U_ATKH
			;	AnimationMode		= ONCE
			;	UseWeaponTiming		= Yes
			;	AnimationSpeedFactorRange = 1.2 1.2	
			;End
		End


		
//-------------------- HIT REACTIONS -----------------------------------------------------------


		AnimationState = HIT_REACTION
			Animation = Sword_HITA
				AnimationName = CHSS_TL_U_HITA
				AnimationMode = ONCE
			End
			Animation = Sword_HITB
				AnimationName = CHSS_TL_U_HITB
				AnimationMode = ONCE
			End

			BeginScript
				PrevAnim = CurDrawablePrevAnimation()
				if PrevAnim == "Foot_IDLB"
				then
					return "Sword_HITB"
				else
					return "Swort_HITA"
				end
			EndScript
		End

//------------ SPECIAL POWERS ------------------------------------------------------------------		

		AnimationState				= SPECIAL_POWER_1							; Aragorn shouting Elendil anim
			StateName				= STATE_ready
			Animation
				AnimationName		= CHSS_TL_U_SPCA
				AnimationMode		= ONCE
			End
			ParticleSysBone			= B_SWORDBONE ElendilFlare FollowBone:yes
			ParticleSysBone			= B_SWORDBONE ElendilSwordFlare FollowBone:yes
;			FXEvent	= Name: FX_ElendilGlowEvent
		End
		
		; Throwing and cripple strike
		AnimationState		  =	SPECIAL_WEAPON_FOUR
			StateName		  =	Attacking
			Animation
				AnimationName =	CHSS_TL_U_SPCD
				AnimationMode =	ONCE
			End
			FrameForPristineBonePositions	= 44
		End

		AnimationState		  =	SPECIAL_WEAPON_FIVE
			StateName		  =	Attacking
			Animation
				AnimationName =	CHSS_TL_U_SPCE
				AnimationMode =	ONCE
			End
		End

		AnimationState		  =	SPECIAL_WEAPON_SIX
			StateName		  =	Attacking
			Animation
				AnimationName =	CHSS_TL_U_SPCF
				AnimationMode =	ONCE
			End
		End

		//	Special Power 1
		AnimationState		  =	PACKING_TYPE_1 UNPACKING
			StateName		  =	Attacking
			Animation		  =	LightningSwordStart
				AnimationName =	CHSS_TL_U_SPCC CHSS_TL_U_ATKA
				AnimationMode =	ONCE
			End
			FXEvent			  =	Frame:14 Name:FX_CreateAHeroLightningCharge
//			FXEvent			  =	Frame:70 Name:FX_GandalfLightningFizzle
			FXEvent			  =	Frame:14 Name:FX_GandalfLightningSword	FrameStop:70
		End
	
		AnimationState		  =	PACKING_TYPE_1 PREPARING
			StateName		  =	Attacking
			Animation		  =	LightningSwordLoop
				AnimationName =	CHSS_TL_U_SPCA CHSS_TL_U_ATKA
				AnimationMode =	LOOP
			End
		End

		AnimationState		  =	PACKING_TYPE_1 PACKING
			StateName		  =	Attacking
			Animation		  =	LightningSwordPutAway
				AnimationName =	CHSS_TL_U_SPCB CHSS_TL_U_ATKA
				AnimationMode =	ONCE
			End
		End

		// (specific) dwarf train allies.
		AnimationState		  =	PACKING_TYPE_2 CREATE_A_HERO_20 CREATE_A_HERO_21
			Animation
				AnimationName =	CHSS_TL_U_SPCC
				AnimationMode =	LOOP
			End
		End

		//	Special Power 2
		AnimationState		  =	PACKING_TYPE_2 UNPACKING
			StateName		  =	Attacking
			Animation		  =	LightningSwordStart
				AnimationName =	CHSS_TL_U_SPCC CHSS_TL_U_ATKA
				AnimationMode =	ONCE
			End
			FXEvent			  =	Frame:14 Name:FX_CreateAHeroLightningCharge
//			FXEvent			  =	Frame:70 Name:FX_GandalfLightningFizzle
			FXEvent			  =	Frame:14 Name:FX_GandalfLightningSword	FrameStop:70
		End
	
		AnimationState		  =	PACKING_TYPE_2 PREPARING
			StateName		  =	Attacking
			Animation		  =	LightningSwordLoop
				AnimationName =	CHSS_TL_U_SPCA CHSS_TL_U_ATKA
				AnimationMode =	LOOP
			End
		End

		AnimationState		  =	PACKING_TYPE_2 PACKING
			StateName		  =	Attacking
			Animation		  =	LightningSwordPutAway
				AnimationName =	CHSS_TL_U_SPCB CHSS_TL_U_ATKA
				AnimationMode =	ONCE
			End
		End
		
//----------- Captain of Gondor - Sword --------------------------------------------
		AnimationState        = PACKING_TYPE_2 WEAPONSET_TOGGLE_1
			StateName		  =	CaptainPower
			Animation           = GUHero_CHRC
				AnimationName     = CHSS_TL_U_CHRC
				AnimationMode     = ONCE
				AnimationSpeedFactorRange = 1.2 1.2
			End
		End

//----------- Captain of Gondor - Bow -----------------------------------------------
		AnimationState        = PACKING_TYPE_2
			StateName		  =	STATE_CaptainBow
			Animation           = GUHero_CHRD
				AnimationName     = CHSS_TL_U_SPCE CHSS_TL_U_SPCA CHSS_TL_U_CHRD
				AnimationMode     = ONCE
//				AnimationSpeedFactorRange = 0.75 0.75
			End
		End

		//	Special Power 3
		AnimationState		  =	PACKING_TYPE_3 UNPACKING
			StateName		  =	Attacking
			Animation		  =	LightningSwordStart
				AnimationName =	CHSS_TL_U_SPCC CHSS_TL_U_ATKA
				AnimationMode =	ONCE
			End
			FXEvent			  =	Frame:14 Name:FX_CreateAHeroLightningCharge
//			FXEvent			  =	Frame:70 Name:FX_GandalfLightningFizzle
			FXEvent			  =	Frame:14 Name:FX_GandalfLightningSword	FrameStop:70
		End
	
		AnimationState		  =	PACKING_TYPE_3 PREPARING
			StateName		  =	Attacking
			Animation		  =	LightningSwordLoop
				AnimationName =	CHSS_TL_U_SPCA CHSS_TL_U_ATKA
				AnimationMode =	LOOP
			End
		End

		AnimationState		  =	PACKING_TYPE_3 PACKING
			StateName		  =	Attacking
			Animation		  =	LightningSwordPutAway
				AnimationName =	CHSS_TL_U_SPCB CHSS_TL_U_ATKA
				AnimationMode =	ONCE
			End
		End
		
		//	Special Power 4
		AnimationState		  =	PACKING_TYPE_4 UNPACKING	  
			Animation		  
				AnimationName =	CHSS_TL_U_SPCA
				AnimationMode =	ONCE
			End
		End
	
		AnimationState		  =	PACKING_TYPE_4 PREPARING
			Animation		 
				AnimationName =	CHSS_TL_U_SPCA
				AnimationMode =	ONCE
			End
		End

		AnimationState		  =	PACKING_TYPE_4 PACKING
			Animation		  
				AnimationName =	CHSS_TL_U_SPCA
				AnimationMode =	ONCE
			End
		End

		AnimationState		  =	PACKING_TYPE_5 PACKING WEAPONSET_TOGGLE_1
			Animation		  
				AnimationName =	CHSS_TL_B_SPCB
				AnimationMode =	ONCE
				AnimationSpeedFactorRange = 0.7333 0.7333
			End
		End

		AnimationState		  =	PACKING_TYPE_5 PACKING
			Animation		  
				AnimationName =	CHSS_TL_U_SPCB
				AnimationMode =	ONCE
			End
		End

		AnimationState		  =	PACKING_TYPE_6 PACKING
			Animation		  
				AnimationName =	CHSS_TL_U_SPCD
				AnimationMode =	ONCE
			End
		End




		AnimationState				= LEVELED 						// This state clears itself in 3 seconds
			Animation				= LevelUp
				AnimationName		= CHSS_TL_U_CHRA CHSS_TL_U_LVLA
				AnimationMode		= ONCE
			End
		End

//---------------------- EMOTIONS ---------------------------------------------------------------


		// cheer, on foot
		AnimationState				=	EMOTION_CELEBRATING
			Animation CHRA
				AnimationName		=	CHSS_TL_U_CHRA CHSS_TL_U_TNTA
				AnimationMode		=	ONCE
			End
			Animation CHRB
				AnimationName		=	CHSS_TL_U_CHRB CHSS_TL_U_CHRA CHSS_TL_U_TNTA
				AnimationMode		=	ONCE
			End
			Animation CHRC
				AnimationName		=	CHSS_TL_U_SPCA
				AnimationMode		=	ONCE
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End
	
		
		// taunt, on foot
		AnimationState				=	EMOTION_TAUNTING
			Animation CHRA
				AnimationName		=	CHSS_TL_U_TNTA
				AnimationMode		=	ONCE
			End
			Animation CHRB
				AnimationName		=	CHSS_TL_U_TNTB CHSS_TL_U_TNTA CHSS_TL_U_SPCA
				AnimationMode		=	ONCE
			End
			Animation CHRC
				AnimationName		=	CHSS_TL_U_SPCA
				AnimationMode		=	ONCE
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End


//====== ENGAGED
		AnimationState				= ENGAGED
			StateName				= STATE_ready
			Animation
				AnimationName		= CHSS_TL_U_IDLA
				AnimationMode		= ONCE
			End
		End
		
// --- Idle Toggled
		AnimationState				= WEAPONSET_TOGGLE_1
			StateName				= STATE_Idle_Bow
			Animation
				AnimationName		=	CHSS_TL_B_IDLA
				AnimationPriority	=	20
				AnimationMode		=	ONCE
				AnimationBlendTime	=	15
			End
			Flags				=	RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Idle_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwordToBow") end
			EndScript
		End

		IdleAnimationState
			StateName					= STATE_Idle_Sword	
			Animation = Foot_IDLA // Bored Idle
				AnimationName       =CHSS_TL_U_IDLA
				AnimationMode       = ONCE
				AnimationPriority   = 20
				AnimationBlendTime	=	10
			End

			Animation = Foot_IDLB // Bored Idle
				AnimationName       =CHSS_TL_U_IDLB
				AnimationMode       = ONCE
				AnimationPriority   = 20
				AnimationBlendTime	=	10
			End
			Animation = Foot_IDLC // Bored Fidget
				AnimationName       = CHSS_TL_U_IBFA
				AnimationMode       = ONCE
				AnimationPriority   = 2
				AnimationBlendTime	=	10
			End
			Animation = Foot_IDLD // Bored Fidget
				AnimationName       = CHSS_TL_U_IBFB
				AnimationMode       = ONCE
				AnimationPriority   = 2
				AnimationBlendTime	=	10
				AnimationSpeedFactorRange = 0.7 0.7
			End
			Animation = Foot_IDLE // Bored Fidget
				AnimationName       = CHSS_TL_U_IBFC
				AnimationMode       = ONCE
				AnimationPriority   = 2
				AnimationBlendTime	=	10
				AnimationSpeedFactorRange = 0.7 0.7
			End
			Animation = Foot_IDLF // Bored Fidget
				AnimationName       = CHSS_TL_U_SPCA
				AnimationMode       = ONCE
				AnimationPriority   = 2
				AnimationBlendTime	=	20
				AnimationSpeedFactorRange = 1.0 1.0
			End
			Animation = Foot_IDLG // Bored Fidget
				AnimationName       = CHSS_TL_U_CLRA
				AnimationMode       = ONCE
				AnimationPriority   = 2
				AnimationBlendTime	=	20
				AnimationSpeedFactorRange = 1.0 1.0
			End
			Animation = Foot_IDLH // Bored Fidget
				AnimationName       = CHSS_TL_U_ATNB
				AnimationMode       = ONCE
				AnimationPriority   = 5
				AnimationBlendTime	=	20
				AnimationSpeedFactorRange = 0.5 0.5
			End
			BeginScript
				CurDrawableHideSubObject("arrow")
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Selected_Sword" then CurDrawableSetTransitionAnimState("TRANS_SelectedToBoredSword") end
				if Prev == "STATE_Idle_Bow" then CurDrawableSetTransitionAnimState("TRANS_BowToSword") end
			EndScript
		End
		

	//---transitions--------------------------------------------

		TransitionState = TRANS_BoredToSelectedSword
		// Once we have proper animations for enter -> idle -> exit, fix this properly.
			Animation = ANTD
				AnimationName	= CHSS_TL_U_ATNA CHSS_TL_U_ATND CHSS_TL_U_IDLA
				AnimationMode	= ONCE
			End		
		End
		
		TransitionState = TRANS_SelectedToBoredSword
			Animation			= ATNF
				AnimationName	= CHSS_TL_U_ATNC CHSS_TL_U_ATNF CHSS_TL_U_ATNE
				AnimationMode	= ONCE
			End		
		End	

		TransitionState = TRANS_BoredToSelectedBow
			Animation = ATNC
				AnimationName		= CHSS_TL_U_ATNF CHSS_TL_U_ATNE
				AnimationMode		= ONCE
			End		
		End
		
		TransitionState = TRANS_CaptainBowToSelectedBow
			Animation = ATNC
				AnimationName		= CHSS_TL_U_ATNF
				AnimationMode		= ONCE
				AnimationBlendTime	= 10
				AnimationSpeedFactorRange = 1.5 1.5
			End		
		End
		
		TransitionState = TRANS_SelectedToBoredBow
			Animation			= ATNA
				AnimationName	= CHSS_TL_U_ATNF
				AnimationMode	= ONCE
			End		
		End	


		TransitionState       = TRANS_BowToSword
			Animation           = CUHero_STHA
				AnimationName     = CHSS_TL_B_STHA
				AnimationMode     = ONCE
			End
		End

		TransitionState       = TRANS_SwordToBow
			Animation           = CUHero_STHB
				AnimationName     = CHSS_TL_U_STHA
				AnimationMode     = ONCE
			End
		End	

		TransitionState       		= TRANS_BowToSword_Running
			Animation           	= DrawSwords
				AnimationName       = CHSS_TL_B_STHB
				AnimationMode       = ONCE
			End
		End
		
		TransitionState       		= TRANS_SwordToBow_Running
			Animation           	= DrawBow
				AnimationName       = CHSS_TL_U_STHB
				AnimationMode       = ONCE
			End
		End		
	End
	End

	AddModule
	Draw = W3DScriptedModelDraw DustEffects1
	    DefaultModelConditionState
	      Model = None
	    End
	    IdleAnimationState
	    End
	    AnimationState =  MOVING WADING
			ParticleSysBone = None FootstepSlash
	    End
	    AnimationState = MOVING ACCELERATE
			ParticleSysBone = None GenericSiegeTrailDust
	    End
	    AnimationState =  MOVING ACCELERATE
			ParticleSysBone = None GenericSiegeTrailDust
	    End
	    AnimationState = MOUNTED MOVING
	    End
	End
	End





;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;End Of Animations
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<


	Side = Mordor


	WeaponSet
		Conditions					= None
		Weapon						= PRIMARY    GorzakWeapon
		AutoChooseSources			= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
		Weapon						= SECONDARY	 GorzakWeapon
		OnlyInCondition				= SECONDARY	 MOVING
	End

	WeaponSet
		Conditions					= RAMPAGE
		Weapon						= PRIMARY MordorCaveTrollRampage
	End

	WeaponSet
		Conditions		= WEAPONSET_HERO_MODE
		Weapon			= PRIMARY    GorzakHeroWeapon
	End


	ArmorSet
		Conditions					= None
		Armor						= GorzakArmor
		DamageFX					= NormalDamageFX
	End


	ShockwaveResistance = SHOCKWAVE_RESISTANCE_STRONG
	ShroudClearingRange 					= MORDOR_ATTACKTROLL_SHROUD_RANGE  
	     
	VisionRange 						= MORDOR_ATTACKTROLL_VISION_RANGE
	VisionSide = 35%
	VisionRear = 25%
	MaxVisionBonusPercent = 300%
	VisionBonusTestRadius = 200
	VisionBonusPercentPerFoot = 2.0%
	
	CrushableLevel					= 3  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CommandSet						= MordorAttackTrollCommandSet
	CommandPoints					= 50
	CrusherLevel					= 1
	UseCrushAttack					= No
	CrushWeapon						= TrollCrush
	RamPower						= 20
	RamZMult						= 0.5
	CrushKnockback					= 30
	CrushZFactor					= 1.0
	Side							= Mordor
	EditorSorting					= UNIT
	

	ThreatBreakdown GoblinFighterHorde_DetailedThreat
		AIKindOf = CAVALRY
	End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Voice
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
			VoiceAttack 							= TrollVoiceAttack
			VoiceAttackAir							= TrollVoiceAttack
			VoiceAttackCharge 						= TrollVoiceAttack
			VoiceAttackMachine 						= TrollVoiceAttack
			VoiceAttackStructure 					= TrollVoiceAttack
			VoiceCreated							= TrollVoiceAttack
			VoiceFear								= TrollDie
			VoiceFullyCreated						= TrollVoiceAttack
			VoiceGuard								= TrollVoiceMove
			VoiceMove 								= TrollVoiceMove
			VoiceMoveToCamp 						= TrollVoiceMove
			VoiceMoveWhileAttacking 				= TrollVoiceMove
			VoicePriority							= 95
			VoiceRetreatToCastle 					= TrollVoiceMove
			VoiceSelect 							= AttackTrollVoiceSelectMS
			VoiceSelectBattle  						= AttackTrollVoiceSelectMS
		
			SoundImpact								= ImpactHorse
		
			UnitSpecificSounds
				VoiceEnterUnitElvenTransportShip	= TrollVoiceMove
				VoiceEnterUnitMordorMumakil			= TrollVoiceMove
				VoiceEnterUnitSlaughterHouse		= TrollVoiceMove
				VoiceEnterUnitTransportShip			= TrollVoiceMove
				VoiceGarrison						= TrollVoiceMove
				VoiceInitiateCaptureBuilding		= TrollVoiceMove
			End

	ReplaceModule ModuleTag_LGAU
	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU1			  ; Tie into LargeGroupAudio system
		Key							= Troll
	End
	End

	AddModule 
	Behavior = RadiateFearUpdate ModuleTag_GoldenArrowDaylightUpdate1
		EmotionPulseRadius						= 300
		EmotionPulseInterval					= 1000
		GenerateFear				= Yes
		InitiallyActive							= Yes
		VictimFilter							= ALL ENEMIES
	End
	End




;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

	;KindOf	;Attack Troll Kindof			= PRELOAD HEAVY_MELEE_HITTER SELECTABLE CAN_CAST_REFLECTIONS TROLL_BUFF_NUGGET MONSTER SCORE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT NO_FREEWILL_ENTER PATH_THROUGH_INFANTRY SCARY CAN_ATTACK_WALLS ARMY_SUMMARY
	;KindOf	;CAH Kind Of			= HERO PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE ARMY_SUMMARY ATTACK_NEEDS_LINE_OF_SIGHT CAN_CLIMB_WALLS

	KindOf			= HERO PRELOAD SELECTABLE CAN_CAST_REFLECTIONS HEAVY_MELEE_HITTER TROLL_BUFF_NUGGET MONSTER SCORE ARMY_SUMMARY ATTACK_NEEDS_LINE_OF_SIGHT NO_FREEWILL_ENTER SCARY CAN_ATTACK_WALLS


	PathfindDiameter = 40.0
	CamouflageDetectionMultiplier	= 0.8

	CommandSet  = GorzakCommandSet
	CommandPoints = 50

	LocomotorSet
		Locomotor					= TrollLocomotor
		Condition					= SET_NORMAL
		Speed						= 57 ;make him a little faster ; TROLL_SPEED ; is default 55.
	End

	ReplaceModule ModuleTag_RespawnBody
	Body = RespawnBody ModuleTag_RespawnBody1
		CheerRadius 			= EMOTION_CHEER_RADIUS
		MaxHealth         		= 4000 
		PermanentlyKilledByFilter	= NONE		;Who kills me permanently?
   		DodgePercent      		= 80%	
	End
	End

	ReplaceModule ModuleTag_GloinHealing
	Behavior = AutoHealBehavior ModuleTag_GorzakHealing
		StartsActive = Yes
		HealingAmount = 70
		HealingDelay = 1300
		StartHealingDelay = 20000
		HealOnlyIfNotInCombat = Yes
	End
	End

	ReplaceModule ModuleTag_RespawnUpdate
	Behavior = RespawnUpdate ModuleTag_RespawnUpdate1
		DeathAnim					= DYING					;Model condition to play when killed-to-respawn
		DeathFX						= FX_GloinDieToRespawn1	;FXList to play when killed-to-respawn
		DeathAnimationTime			= 4100					;How long DeathAnim will take.
		InitialSpawnFX				= FX_GloinInitialSpawn1
		RespawnAnim					= LEVELED				;Animation to play when respawning.
		RespawnFX					= FX_GloinRespawn1		;FXList to play when respawning.
		RespawnAnimationTime		= 2000					;Time it takes for respawn to play.
		AutoRespawnAtObjectFilter	= NONE +CASTLE_KEEP		;Respawn at this location -- and at it's exit production point if possible.
		ButtonImage					= HICAHTroll
		
		;RespawnEntries determine the ruleset for how a character can be revived. Some units may automatically respawn, others
		;may require a specific revive action performed on him. You can specify different values for each level... or use Level:Any
		RespawnRules =				AutoSpawn:No	Cost:1500		Time:60000		Health:100%		;DEFAULT VALUES

	End
	End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
; Gorzak's DreadVisage
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<


	AddModule
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_DreadVisage
		SpecialPowerTemplate		= SpecialAbilityFakeLeadership
		TriggeredBy					= Upgrade_DreadVisage
	End
	End

	AddModule
	Behavior = SpecialPowerModule ModuleTag_DreadVisageUpdate
		SpecialPowerTemplate		= SpecialAbilityFakeLeadership
		UpdateModuleStartsAttack	= Yes
		StartsPaused				= Yes
	End
	End

	AddModule
	Behavior = AttributeModifierAuraUpdate ModuleTag_DreadVisageAura
		StartsActive	= No														;If no, requires upgrade to turn on.
		TriggeredBy		= Upgrade_DreadVisage
		RefreshDelay	= 2000
		Range			= WITCHKING_DREADVISAGE_EFFECT_RADIUS
		TargetEnemy		= Yes
		AntiCategory	= LEADERSHIP BUFF
		BonusName		= GenericDebuff
		ObjectFilter	= ANY +INFANTRY +CAVALRY +MONSTER -STRUCTURE -BASE_FOUNDATION  -HERO -HORDE
	End
	End

	AddModule
	Behavior = RadiateFearUpdate ModuleTag_DreadVisageFear
		InitiallyActive						= No
		TriggeredBy							= Upgrade_DreadVisage
		WhichSpecialPower					= 1
		GenerateFear						= Yes
		EmotionPulseRadius					= WITCHKING_DREADVISAGE_EFFECT_RADIUS
		EmotionPulseInterval				= 2000
	End	
	End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Blade Master
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

	AddModule
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_GorzakBladeMasterEnabler
		SpecialPowerTemplate = SpecialAbilityGorzakBladeMaster
		TriggeredBy = Upgrade_GimliSlayerTrigger
	End
	End

	AddModule
  	Behavior = SpecialPowerModule ModuleTag_GorzakBladeMasterStarter
		SpecialPowerTemplate    = SpecialAbilityGorzakBladeMaster
		StartsPaused			= Yes
	End
	End

	AddModule
	Behavior = HeroModeSpecialAbilityUpdate ModuleTag_GorzakBladeMasterUpdate
		SpecialPowerTemplate    = SpecialAbilityGorzakBladeMaster
		HeroAttributeModifier	= GorzakBladeMaster
		HeroEffectDuration		= 30000 ; this should sync with the auto ability delay re-fire time in commandButtons.ini
		UnpackTime              = 1 ; insant unpack
		TriggerSound			= AragornBladeMaster
	End
	End











;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

	;Attack Trolls Geo.
	Geometry						= CYLINDER
	GeometryMajorRadius				= 19.5
	GeometryHeight					= 33.0
	GeometryIsSmall					= No
	Shadow							= SHADOW_VOLUME_NON_SELF_2


	;Geometry			= CYLINDER
	;GeometryMajorRadius	= 8.0
	;GeometryMinorRadius	= 8.0
	;GeometryHeight		= 19.2
	;GeometryIsSmall		= Yes
	;Shadow				= SHADOW_DECAL
	;ShadowSizeX			= 20//
	;ShadowSizeY			= 20//
	;ShadowTexture		= ShadowI//



End

;^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
;6. HARAD REALM,  AKA DESERT REALM
;^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^


;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Easterling SwordsMen
;Reference: EasterlingSwordsMenRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Weapon MordorEasterlingSwords
  LeechRangeWeapon      = Yes
  AttackRange           = 25
  MeleeWeapon           = Yes ; Melee means to square off next to opponent.  This is more of a ranged weapon with no projectile
  PreAttackDelay        = MORDOR_SOLDIERRHUN_PREATTACKDELAY             ; 867 is lance pierce delay time before contact with target.
  FiringDuration        = MORDOR_SOLDIERRHUN_FIRINGDURATION    ; Duration of the lance pierce attack
  DelayBetweenShots     = MORDOR_SOLDIERRHUN_DELAYBETWEENSHOTS            ; time between shots, msec
  PreAttackType         = PER_SHOT ; Do the delay each time we attack
  FireFX                = FX_GondorSwordHit
  
  AcceptableAimDelta	= 15.0 
  RequireFollowThru		= Yes

  DamageNugget                        ; A basic Nugget that just does damage
    Damage        			= 30
    Radius        			= 0.0
    DelayTime     			= 0
    DamageType    			= SPECIALIST
    DamageFXType  			= SWORD_SLASH
    DeathType     			= NORMAL
  End

  DamageNugget                        ; A basic Nugget that just does damage
    Damage        			= 50
    Radius        			= 0.0
    DelayTime     			= 0
    DamageType    			= HERO
    DamageFXType  			= SWORD_SLASH
    DeathType     			= NORMAL
  End
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
CommandButton Command_MordorEasterlingPorcupineFormation
	Command			= HORDE_TOGGLE_FORMATION	;;Tower Guard
	Options			= TOGGLE_IMAGE_ON_FORMATION OK_FOR_MULTI_SELECT
	ButtonImage             = UCCommon_PorcupineFormation UCCommon_PorcupineFormationOff
	ButtonBorderType        = ACTION 
	TextLabel               = CONTROLBAR:ToggleEasterlingSwordsMenFormation	CONTROLBAR:ToggleLineFormation
	DescriptLabel           = CONTROLBAR:ToolTipToggleEasterlingSwordsMenFormation	CONTROLBAR:ToolTipToggleTowerGuardPorcupineToLineFormation
	InPalantir		= Yes
	DoubleClick		= Yes
	UnitSpecificSound	= EasterlingVoicePorcupineBegin EasterlingVoicePorcupineEnd
End


CommandSet EasterlingHordeSwordsCommandSet	
	1 = Command_ToggleStance
	2 = Command_MordorEasterlingPorcupineFormation
	12 = Command_CaptureBuilding
	13 = Command_AttackMove
	14 = Command_Stop
End



;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Armor EasterlingSwordsMenArmor
  Armor = DEFAULT         50%   ; 100%
  Armor = SLASH           50%   ; 100%
  Armor = PIERCE          40%   ;  50%
  Armor = SPECIALIST       40%   ;  50%
  Armor = CRUSH            40%   ; 200%
  Armor = SIEGE           80%   ;
  Armor = FLAME           80%   ;  30%
  Armor = MAGIC           100%   ;
  Armor = HERO            60%   ;
  Armor = HERO_RANGED     60%   ;
  Armor = CAVALRY	  40%  
    Armor = STRUCTURAL	  80%	
  FlankedPenalty 	 = 50%   
End



;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Easterling Fighter Unit
;Reference: EasterlingSwordsMenObjectRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Object DwarvenAxeThrower

	BountyValue = 50

	SelectPortrait         = UPMordor_Eastering  ;CPEasterling   ;UPDwarvenAxeThrower
	ButtonImage	       = BMHaradrimPalace_SoldiersRhun  ;HICAHEasterling   ;WOR_AxeThrower

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Weapons, armor, look of the easterling
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

	AddModule
	Behavior = GrantUpgradeCreate ModuleTag_1
		UpgradeToGrant = Upgrade_GandalfWhite  ;
	End 
	End

	AddModule
	Behavior = SubObjectsUpgrade CorruptedWeapon_Upgrade01562
	TriggeredBy			   = Upgrade_GandalfWhite
	HideSubObjects		   = CMSword01
	HideSubObjects		   = HMR_03
	HideSubObjects		   = SWRD_03
	HideSubObjects		   = CLUB_03  
	HideSubObjects		   = SWRD_04
	HideSubObjects		   = SLDR_02
	HideSubObjects		   = CHEST_02
	HideSubObjects		   = CHEST_01
	HideSubObjects		   = HLMT_01
	HideSubObjects		   = HLMT_04
	HideSubObjects		   = HLMT_03
	HideSubObjects		   = HLMT_05
	HideSubObjects		   = BOOT_02

	HideSubObjects		   = GNLT_02

	HideSubObjects		   = MITHLONDRECURVE
	HideSubObjects		   = ARROW
	HideSubObjects		   = MithlondBow
	HideSubObjects		   = BELTHRONDING
	FadeTimeInSeconds      = 0.0
	End
	End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Here is the moded cah animations just for the easterlings model
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

	ReplaceModule ModuleTag_01
	Draw = W3DHordeModelDraw ModuleTag_011

		DefaultModelConditionState
			Model               = CHCM_CM_U_SKN1   ;EUDwarfAxe_SKN
			Skeleton            = CHCM_CM_U_SKL      ;EUDwarfAxe_SKL
		;	WeaponLaunchBone	= PRIMARY Axe01
		;	WeaponLaunchBone	= TERTIARY Axe01
			WeaponLaunchBone	= PRIMARY ARROW
		End




AnimationState        = STUNNED_FLAILING 
	StateName           = STATE_Sword
	Animation
		AnimationName     = CHCM_CM_U_FLYA
		AnimationMode     = LOOP
	End
	Flags               = RANDOMSTART
End

AnimationState        = DYING SPLATTED
	StateName           = STATE_Sword
	Animation
		AnimationName     = CHCM_CM_U_LNDA
		AnimationMode     = ONCE
	End
End


AnimationState        = DYING
	StateName           = STATE_Sword
	Animation
		AnimationName     = CHCM_CM_U_DIEA
		AnimationMode     = ONCE
	End
	Animation           = GUHero_DIEB
		AnimationName     = CHCM_CM_U_DIEB
		AnimationMode     = ONCE
	End
End


AnimationState        = STUNNED_STANDING_UP
	StateName           = STATE_Sword
	Animation
		AnimationName     = CHCM_CM_U_GTPA
		AnimationMode     = ONCE
		AnimationSpeedFactorRange = 1.5 1.5
	End
End

AnimationState        = STUNNED 
	StateName           = STATE_Sword
	Animation           = GUHero_LNDA
		AnimationName     = CHCM_CM_U_LNDA
		AnimationMode     = ONCE
	End
End				

//------------------ SPECIAL POWER ANIMS ---------------------


		AnimationState        = MOVING USER_4                 // Moving slaughter
			StateName           = Slaughter
			Flags               = RANDOMSTART
			//ParticleSysBone     = None InfantryDustTrails
			Animation           = GUHero_ATKE
				AnimationName     = CHCM_CM_U_ATKE
				AnimationMode     = LOOP
			End
			StateName           = NoSword
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Sword" then CurDrawableSetTransitionAnimState("TRANS_SwordToBow") end
			EndScript
		End


		//--- Running with sword
		AnimationState			= MOVING
			StateName           = STATE_RunningSword
			Flags               = RANDOMSTART
			//ParticleSysBone    = None InfantryDustTrails
			Animation
				AnimationName   = CHCM_CM_U_RUNA
//				AnimationMode   = LOOP
				AnimationSpeedFactorRange = 0.85 0.85
//				Distance = 28
			End

			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Bow" then CurDrawableSetTransitionAnimState("TRANS_BowToSword") end
				if Prev == "STATE_RunningBow" then CurDrawableSetTransitionAnimState("TRANS_BowToSword_Running") end
				if Prev == "STATE_Rappelling"  then CurDrawableSetTransitionAnimState("Trans_RappellingToRunning") return end
			EndScript
		End

		AnimationState				= FIRING_OR_PREATTACK_A // Melee attack.
			Animation
				AnimationName		= CHCM_CM_U_ATKA
				AnimationMode		= ONCE
				UseWeaponTiming		= Yes
				AnimationSpeedFactorRange = 1.2 1.2	
			End

			Animation
				AnimationName		= CHCM_CM_U_ATKB
				AnimationMode		= ONCE
				UseWeaponTiming		= Yes
				AnimationSpeedFactorRange = 7.5 7.5	
			End

			Animation
				AnimationName		= CHCM_CM_U_ATKC
				AnimationMode		= ONCE
				UseWeaponTiming		= Yes
				AnimationSpeedFactorRange = 1.2 1.2	
			End

		End


		AnimationState = HIT_REACTION
			Animation = Sword_HITA
				AnimationName = CHCM_CM_U_HITA
				AnimationMode = ONCE
			End
			Animation = Sword_HITB
				AnimationName = CHCM_CM_U_HITB
				AnimationMode = ONCE
			End

			BeginScript
				PrevAnim = CurDrawablePrevAnimation()
				if PrevAnim == "Foot_IDLB"
				then
					return "Sword_HITB"
				else
					return "Swort_HITA"
				end
			EndScript
		End




		AnimationState				= LEVELED 						// This state clears itself in 3 seconds
			Animation				= LevelUp
				AnimationName		= CHCM_CM_U_CHRA CHCM_CM_U_LVLA
				AnimationMode		= ONCE
			End
		End


		// cheer, on foot
		AnimationState				=	EMOTION_CELEBRATING
			Animation CHRA
				AnimationName		=	CHCM_CM_U_CHRA CHCM_CM_U_TNTA
				AnimationMode		=	ONCE
			End
			Animation CHRB
				AnimationName		=	CHCM_CM_U_CHRB CHCM_CM_U_CHRA CHCM_CM_U_TNTA
				AnimationMode		=	ONCE
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End
		
		
		// taunt, on foot
		AnimationState				=	EMOTION_TAUNTING
			Animation CHRA
				AnimationName		=	CHCM_CM_U_TNTA
				AnimationMode		=	ONCE
			End
			Animation CHRB
				AnimationName		=	CHCM_CM_U_TNTB CHCM_CM_U_TNTA
				AnimationMode		=	ONCE
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End


//====== ENGAGED
		AnimationState				= ENGAGED
			StateName				= STATE_ready
			Animation
				AnimationName		= CHCM_CM_U_IDLA
				AnimationMode		= ONCE
			End
		End
		

		IdleAnimationState
			StateName					= STATE_Idle_Sword	
			Animation = Foot_IDLB // Bored Idle
				AnimationName       =CHCM_CM_U_IDLB
				AnimationMode       = ONCE
				AnimationPriority   = 20
				AnimationBlendTime	=	25
			End
			Animation = Foot_IDLC // Bored Fidget
				AnimationName       = CHCM_CM_U_IBFA
				AnimationMode       = ONCE
				AnimationPriority   = 2
				AnimationBlendTime	=	25
			End
			Animation = Foot_IDLD // Bored Fidget
				AnimationName       = CHCM_CM_U_IBFB
				AnimationMode       = ONCE
				AnimationPriority   = 2
				AnimationBlendTime	=	25
			End
			Animation = Foot_IDLE // Bored Fidget
				AnimationName       = CHCM_CM_U_IBFC
				AnimationMode       = ONCE
				AnimationPriority   = 2
				AnimationBlendTime	=	25
			End
			Animation = Foot_IDLF // Bored Fidget
				AnimationName       = CHCM_CM_U_IDLA
				AnimationMode       = ONCE
				AnimationPriority   = 5
				AnimationBlendTime	=	25
				AnimationSpeedFactorRange = 0.8 0.8
			End


			BeginScript
				CurDrawableHideSubObject("arrow")
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Selected_Sword" then CurDrawableSetTransitionAnimState("TRANS_SelectedToBoredSword") end
				if Prev == "STATE_Idle_Bow" then CurDrawableSetTransitionAnimState("TRANS_BowToSword") end
			EndScript
		End
		

	//---transitions--------------------------------------------

		TransitionState = TRANS_BoredToSelectedSword
		// Once we have proper animations for enter -> idle -> exit, fix this properly.
			Animation = ANTD
				AnimationName	= CHCM_CM_U_ATNA CHCM_CM_U_ATND CHCM_CM_U_IDLA
				AnimationMode	= ONCE
			End		
		End
		
		TransitionState = TRANS_SelectedToBoredSword
			Animation			= ATNF
				AnimationName	= CHCM_CM_U_ATNC CHCM_CM_U_ATNF CHCM_CM_U_ATNE
				AnimationMode	= ONCE
			End		
		End	

	End
	End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;End Of Animations
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

	Side				= Mordor
	DisplayName						=	OBJECT:MordorEasterling

	CrushableLevel					=	0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrusherLevel = 0 ;What can I crush?: 0 = small animals, 1 = infantry, 2 = trees, 3 = vehicles
	CrushRevengeWeapon = AntiCavalryInfantryCrushRevenge
	
	CommandSet = EasterlingSwordsCommandSet



	WeaponSet
		Conditions			= None 
		Weapon				= PRIMARY    MordorEasterlingSwords
	End

;	WeaponSet
;		Conditions			= -WEAPONSET_TOGGLE_1  ; i tryed to set
;		Weapon				= PRIMARY RohanRohirrimSpear
;		AutoChooseSources	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
;	End

;	WeaponSet
;		Conditions			= WEAPONSET_TOGGLE_1 
;		Weapon				= SECONDARY RohanRohirrimBow  ; taken out there bows
;		AutoChooseSources	= SECONDARY FROM_PLAYER FROM_SCRIPT FROM_AI
;	End

	ArmorSet
		Conditions      = None
		Armor           = EasterlingSwordsMenArmor
		DamageFX        = NormalDamageFX
	End



			VoiceAttack 							= HeroEvilManVoiceAttack
			VoiceAttackAir							= HeroEvilManVoiceAttack
			VoiceAttackCharge 						= HeroEvilManVoiceAttack
			VoiceAttackMachine 						= HeroEvilManVoiceAttack
			VoiceAttackStructure 					= HeroEvilManVoiceAttack
			VoiceCreated							= HeroEvilManVoiceSalute
			;VoiceFear								= HeroEvilManVoiceHelpMe
			VoiceFullyCreated						= HeroEvilManVoiceSalute
			VoiceGuard								= HeroEvilManVoiceMove
			VoiceMove 								= HeroEvilManVoiceMove
			VoiceMoveToHigherGround					= HeroEvilManVoiceMove
			VoiceMoveToCamp 						= HeroEvilManVoiceMove
			VoiceMoveWhileAttacking 				= HeroEvilManVoiceMove
			VoicePriority							= 95
			VoiceRetreatToCastle 					= HeroEvilManVoiceMove
			VoiceSelect 							= HeroEvilManVoiceSelectMS
			VoiceSelectBattle  						= HeroEvilManVoiceSelectBattle


	VoiceEnterStateAttack					= HeroEvilManVoiceAttack
	VoiceEnterStateAttackCharge				= HeroEvilManVoiceAttack
	VoiceEnterStateAttackMachine			= HeroEvilManVoiceAttack
	VoiceEnterStateAttackStructure			= HeroEvilManVoiceAttack
	VoiceEnterStateMove						= HeroEvilManVoiceMove
	VoiceEnterStateMoveToCamp				= HeroEvilManVoiceMove
	VoiceEnterStateMoveToHigherGround		= HeroEvilManVoiceMove
	VoiceEnterStateMoveWhileAttacking		= HeroEvilManVoiceMove
	VoiceEnterStateRetreatToCastle			= HeroEvilManVoiceMove


			CrowdResponseKey = EvilMen1
		
			UnitSpecificSounds
				VoiceEnterUnitElvenTransportShip	= HeroEvilManVoiceMove
				VoiceEnterUnitMordorMumakil			= HeroEvilManVoiceMove
				VoiceEnterUnitSlaughterHouse		= HeroEvilManVoiceMove
				VoiceEnterUnitTransportShip			= HeroEvilManVoiceMove
				VoiceGarrison						= HeroEvilManVoiceMove
				VoiceInitiateCaptureBuilding		= HeroEvilManVoiceCaptureBuilding

		VoiceCreatedFromInn					= HeroEvilManVoiceMove
		VoiceFullyCreatedFromInn	 		= HeroEvilManVoiceMove
		VoiceGarrison						= HeroEvilManVoiceMove
		VoiceInitiateCaptureBuilding		= HeroEvilManVoiceMove
		VoiceInitiateBlackArrowsAttack		= MenOfDaleVoiceAttack
			End


;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

	ReplaceModule ModuleTag_LGAU
	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU1		; Tie into LargeGroupAudio system
		Key	= Humanoid_Male Man Man_Male Easterling_Infantry
	End
	End
	
	ReplaceModule ModuleTag_foo
	ClientBehavior = ModelConditionAudioLoopClientBehavior ModuleTag_foo1
		ModelCondition = Required:EMOTION_CELEBRATING	Excluded:DYING ENGAGED	Sound:EmotionEasterlingVoxCheerLoop	;MOVING ATTACKING 
		ModelCondition = Required:EMOTION_TAUNTING		Excluded:DYING ENGAGED	Sound:EmotionEasterlingVoxTauntLoop	;MOVING ATTACKING
		;pointing in LGAS
		;ModelCondition = Required:EMOTION_POINTING		Excluded:DYING ENGAGED	Sound:EmotionEasterlingVoxTauntLoop
		ModelCondition = Required:RAISING_FLAG			Excluded:DYING ENGAGED	Sound:EmotionEasterlingVoxTauntLoop
	End
	End
	
	ReplaceModule ModuleTag_AnimAudioBehavior
	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior1
	      MaxUpdateRangeCap = 800
			AnimationSound = Sound:BodyFallSoldier 		Animation:MUEastern_SKL.MUEastern_LNDA 	Frames:2
			AnimationSound = Sound:BodyFallGeneric1 		Animation:MUEastern_SKL.MUEastern_DIEA 	Frames:52
	End
	End


;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;This needs to change
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
	KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE THROWN_OBJECT ATTACK_NEEDS_LINE_OF_SIGHT NOTIFY_OF_PREATTACK GRAB_AND_DROP
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<	
	ReplaceModule ModuleTag_02
	Body = ActiveBody ModuleTag_021
		CheerRadius 	  = EMOTION_CHEER_RADIUS
		MaxHealth         = 300
		MaxHealthDamaged  = 30
		BurningDeathBehavior = No
		BurningDeathFX       = FX_InfantryBurningFlame
	End
	End


	LocomotorSet
		Locomotor = HumanLocomotor
		Condition = SET_NORMAL 
		Speed     = NORMAL_GOOD_INFANTRY_MEMBER_SPEED
	End

End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Easterling Fighting Horde
;Reference: EasterlingSwordsMenHordeRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<


Object DwarvenAxeThrowerHorde

	AddModule	
	Behavior = ExperienceLevelCreate ModuleTag_MPLevelBonus1
		LevelToGrant = 2
		;MPOnly = Yes
	End
	End

	; This is required for garrisoned objects - please put in all objects.
	ButtonImage		= WOR_Easterling
	SelectPortrait	= UPMordor_Eastering

	ReplaceModule ModuleTag_W3DModelDraw
	Draw = W3DScriptedModelDraw ModuleTag_W3DModelDraw1
	    DependencySharedModelFlags = EMOTION_ALERT EMOTION_MORALE_HIGH EMOTION_MORALE_LOW EMOTION_AFRAID EMOTION_COWER EMOTION_TERROR EMOTION_LOOK_TO_SKY SELECTED
		DefaultModelConditionState
			Model = None ;InvisHrdeTmp5x2
		End

		ModelConditionState = HORDE_EMPTY
			Model = None
		End		
		
		ModelConditionState = WORLD_BUILDER
			Model = HordeMarkEUDfA
		End		
	End
	End
	
	Side			= Mordor
	EditorSorting	= UNIT
	EmotionRange	= 240
	DisplayName		= OBJECT:HordeMordorEasterlings
	DisplayNameStrategic = CONTROLBAR:LW_Unit_MordorEasterlingHorde
	DescriptionStrategic = CONTROLBAR:LW_ToolTip_MordorEasterlingHorde
		
	WeaponSet
		Conditions = None 
		Weapon = PRIMARY    TowerGuardHordeRangefinder
	End


	UnitSpecificSounds
		VoiceDesperateAttack  = GondorSoldierVoiceDesperateCharge 
	End

	BuildCost					= 500
	BuildTime					= 30
	
	
	ShroudClearingRange = MORDOR_SOLDIERRHUN_SHROUD_RANGE
	VisionRange = MORDOR_SOLDIERRHUN_HORDE_VISION_RANGE 
	VisionSide = 50%
	VisionRear = 25%
	
	MaxVisionBonusPercent = 300%
	VisionBonusTestRadius = 200
	VisionBonusPercentPerFoot = 1.0%

	CommandPoints				= 60
	
	FormationWidth				= 2 ; Width it occupies in formations. Current choices are 1 or 2.
	FormationDepth				= 1 ; Depth it occupies in formations. Current choices are 1 or 2.
	
	CrushableLevel				= 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrusherLevel				= 0	
	CrushZFactor				= 1.0  ; How much we knock upwards.
	UseCrushAttack				= No	;Archer hordes cannot crush or Bombard will not work

    TransportSlotCount = TRANSPORTSLOTCOUNT_SMALL_HORDE
	KindOf = SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT INFANTRY HORDE MELEE_HORDE ARMY_SUMMARY CAN_USE_SIEGE_TOWER LARGE_RECTANGLE_PATHFIND PIKE;UNATTACKABLE 
	
	ThreatLevel = MORDOR_EASTERLING_HORDE_THREAT
	ThreatBreakdown MordorEasterlingHorde_DetailedThreat
		AIKindOf = PIKEMAN
	End
	
	ReplaceModule ModuleTag_StancesBehavior
	Behavior = StancesBehavior ModuleTag_StancesBehavior1
      	  StanceTemplate = PikeHorde
    	End
	End
    
	ReplaceModule ModuleTag_HordeAIUpdate
	Behavior = HordeAIUpdate ModuleTag_HordeAIUpdate1
		AutoAcquireEnemiesWhenIdle	= Yes ATTACK_BUILDINGS
		MoodAttackCheckRate			= 500
		MaxCowerTime				= 5000
		MinCowerTime				= 3000
		CanAttackWhileContained		= No  ; Can fire out of garrisoned building
		AILuaEventsList				= InfantryFunctions
		AttackPriority				= AttackPriority_Infantry
	End
	End
	
	ReplaceModule ModuleTag_HordeContain
	Behavior = HordeContain ModuleTag_HordeContain1
		FrontAngle = 270
		FlankedDelay = 2000
		ObjectStatusOfContained = 
		InitialPayload = DwarvenAxeThrower 15
		Slots = 15
		PassengerFilter = NONE +INFANTRY
		ShowPips = No
		ThisFormationIsTheMainFormation = Yes	;Used to determine which armorset to use (and anything else we want!)
		RandomOffset=X:1 Y:2
		MeleeBehavior = Amoeba
		End

		// Banner Carrier info		
		BannerCarriersAllowed	= MordorBannerOrc									// types of units that are allowed as banner carriers
		BannerCarrierPosition	= UnitType:MordorEasterling	Pos:X:70.0 Y:0.0		// (DEFAULT) position of banner carrier
		
		RankInfo = RankNumber:1 UnitType:DwarvenAxeThrower Position:X:50 Y:0		Position:X:50 Y:20		Position:X:50 Y:-20		Position:X:50 Y:40		Position:X:50 Y:-40 
		RankInfo = RankNumber:2 UnitType:DwarvenAxeThrower Position:X:30 Y:0 Leader 1 0	Position:X:30 Y:20 Leader 1 1	Position:X:30 Y:-20 Leader 1 2	Position:X:30 Y:40 Leader 1 3	Position:X:30 Y:-40 Leader 1 4
		RankInfo = RankNumber:3 UnitType:DwarvenAxeThrower Position:X:10 Y:0 Leader 2 0	Position:X:10 Y:20 Leader 2 1	Position:X:10 Y:-20 Leader 2 2	Position:X:10 Y:40 Leader 2 3	Position:X:10 Y:-40 Leader 2 4
		
		RanksToReleaseWhenAttacking = 1 2 3

		AlternateFormation = EasterlingSwordHordePorcupine
		MeleeAttackLeashDistance = 1   //How far the hordes	can	move from the center of	the	horde when melee attacking.				  
		BackUpMinDelayTime		 = 1	//The minimum amount of	time to	delay before backing up
		BackUpMaxDelayTime		 = 3000	//The maximum amount of	time to	delay before backing up
		BackUpMinDistance		 = 1	//The minimum number of	cells to backup
		BackUpMaxDistance		 = 3	//The maximum number of	cells to backup
		BackupPercentage		 = 80%	//The amount of	chance that	a unit will	back up.
	End
	End
	
	LocomotorSet
		Locomotor     = NormalChargeMeleeHordeLocomotor
		Condition     = SET_NORMAL
		Speed         = NORMAL_GOOD_INFANTRY_HORDE_SPEED
	End
	
	LocomotorSet
		Locomotor     = ScaredMeleeHordeLocomotor
		Condition     = SET_SCARED
		Speed         = NORMAL_GOOD_INFANTRY_HORDE_SPEED
	End

;	//Toggle CommandSet Based on Weaponset condition flags
;	AddModule
;	Behavior = MonitorConditionUpdate ModuleTag_CommandSetSwapper
;		WeaponSetFlags			= WEAPONSET_TOGGLE_1
;		WeaponToggleCommandSet	= EasterlingHordeBowsCommandSet
;	End
;	End

	CommandSet = EasterlingHordeSwordsCommandSet

	
	Geometry = BOX
	GeometryMajorRadius = 30.0
	GeometryMinorRadius = 50.0
	GeometryHeight = 20.0
	GeometryIsSmall = No	
	
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

ModifierList EasterlingSwordHordePorcupine
	Category = FORMATION
	Modifier = ARMOR 25%
	Modifier = RESIST_FEAR 25%
	Modifier = RESIST_TERROR 25%
	Modifier = DAMAGE_MULT 75%
	Duration = 0			// Duration is forever when zero
End

ChildObject EasterlingSwordHordePorcupine DwarvenAxeThrowerHorde

;	// Note - for alternate formations, all info outside of the Contain Behavior module is ignored.
;	// Any modifications need to be done via the Attribute Modifiers in the contain module. 

	AddModule
	Behavior = HordeContain ModuleTag_HordeContain1
		FrontAngle = 360	//	Can't be flanked
		FlankedDelay = 2000
		ObjectStatusOfContained = 
		InitialPayload					= DwarvenAxeThrower 15
		Slots							= 15
		PassengerFilter					= NONE +INFANTRY
		ShowPips						= No
		ThisFormationIsTheMainFormation = No	//Used to determine which armorset to use (and anything else we want!)
		RandomOffset					= X:0 Y:0
		MeleeBehavior = Amoeba
		End
		
		RanksToReleaseWhenAttacking		= 1 2 3
		RanksToJustFreeWhenAttacking   = 0
		AttributeModifiers				= EasterlingSwordHordePorcupine
		IsPorcupineFormation			= No
		MinimumHordeSize				= 5

		AlternateFormation				= DwarvenAxeThrowerHorde
		VisionRearOverride				= 100%
		VisionSideOverride				= 100%
		NotComboFormation				= Yes // this formation is not suitable for combo, so it will switch out of this when combo-ing

		// Banner Carrier info		
		BannerCarriersAllowed			= MordorBannerOrc												// types of units that are allowed as banner carriers
		BannerCarrierPosition			= UnitType:MordorEasterling	Pos:X:0.0 Y:0.0		// (DEFAULT) position of banner carrier
		
		RankInfo = RankNumber:1 UnitType:DwarvenAxeThrower Position:X:20 Y:11		Position:X:20 Y:-11		Position:X:15 Y:28		Position:X:15 Y:-28		Position:X:20 Y:45 		Position:X:20 Y:-45 
		RankInfo = RankNumber:2 UnitType:DwarvenAxeThrower Position:X:0 Y:-20 Leader 1 0	Position:X:0 Y:20 Leader 1 1	Position:X:0 Y:-45 Leader 1 2	Position:X:0 Y:45 Leader 1 3
		RankInfo = RankNumber:3 UnitType:DwarvenAxeThrower Position:X:-20 Y:0 Leader 2 0	Position:X:-20 Y:-22.50 Leader 2 1	Position:X:-20 Y:22.5 Leader 2 2	Position:X:-20 Y:-45 Leader 2 3	Position:X:-20 Y:45		

	End
	End

;	LocomotorSet
;		Locomotor     = NormalMeleeHordeLocomotor
;		Condition     = SET_NORMAL
;		Speed         = 50
;	End

End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Elephant Without Hodwah, Thank you {IP}BlackShadow ur the best.
;Reference: ElephantHodwahRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<


Locomotor NewMumakilLocomotor
	Surfaces                = GROUND 

	SlowTurnRadius			= 5.0 ;12.0 
	FastTurnRadius		    = 32.0 ;12.0 
	TurnTime				= 3000
	TurnTimeDamaged			= 5000
	Acceleration			= 1000  
	
	TurnTime                = 3000
	TurnTimeDamaged         = 5000
	TurnThreshold           = 0.5       ; 30 degree turn threshold before using the TURN flags
	Acceleration			= 1000  ; 1 second to accelerate to full speed.

	Braking					= 1000  ; 1 second to brake from full speed.
	MinTurnSpeed            = 12%
	ZAxisBehavior           = NO_Z_MOTIVE_FORCE
	Appearance              = FOUR_LEGS_HUGE
	StickToGround           = Yes       
	MaxOverlappedHeight     = 1 
End

Locomotor NewMumakilLocomotor2
	SlowTurnRadius			= 5.0 ;12.0 
	FastTurnRadius		    = 32.0 ;12.0 
	Surfaces                = GROUND ; note - huge creatue (mumakil) cant path through RUBBLE, ie broken gates & buildings.
	TurnTime                = 3000
	TurnTimeDamaged         = 5000
	TurnThreshold           = 0.5       ; 30 degree turn threshold before using the TURN flags
	Acceleration			= 1000  ; 1 second to accelerate to full speed.

	Braking					= 1200  ; 1 second to brake from full speed.
	MinTurnSpeed            = 12%
	ZAxisBehavior           = NO_Z_MOTIVE_FORCE
	Appearance              = FOUR_LEGS_HUGE
	StickToGround           = Yes       ; walking guys aren't allowed to catch huge (or even small) air.
	MaxOverlappedHeight     = 1 ; Just goes through things, doesn't even notice them.

	ChargeAvailable			= Yes ; Locomotor has defined charging attack values to use
	ChargeSpeed             = 200%  ; in dist/sec
End

;---------------------------------------------------------------------------------------------------------------------------;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;weapons;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;---------------------------------------------------------------------------------------------------------------------------;
Weapon NewMordorMumakilKnockback  ; BALANCE Mumakil Weapon
	AttackRange					= 20.0	; Should be less than the damage radius, so we don't just barely catch the bad guy.
	DelayBetweenShots			= 2100            ; time between shots, msec
    	FiringDuration			= 2000	;2600 ;min 933 for anim              ; how long to reload a Clip, msec
    	PreAttackDelay			= 933
    	PreAttackType			= PER_SHOT ; Do the delay each time we attack a new target
	FireFX						= FX_MUMStructureAtk
	DamageDealtAtSelfPosition	= Yes ; A melee based AoE.  Arc radiates from me, not them
	AcceptableAimDelta			= 15.0 
	ChaseWeapon					= Yes ; Not full melee, but we get to move to attack a passive acquire, even if player owned.
	;CannotTargetCastleVictims	= Yes
	HoldAfterFiringDelay		= 2400
	
	DamageNugget                        ; A basic Nugget that just does damage
		Damage					= 400
		Radius					= 140.0
		DamageArc				= 30
		DamageType				= SIEGE
		DamageFXType			= CLUBBING
		DeathType				= NORMAL
		DamageScalar			= 0% NONE +WALK_ON_TOP_OF_WALL +BLOCKING_GATE ; This is a trick.  Marked as CanAttackWalls so he won't think he can walk on them, but then told he can't do damage to them so he won't attack.
		DamageScalar			= 50% NONE +MordorBalrog +MordorShelob +MinisGateDoor +IsengardOrthancDoor
	End
	
	DamageNugget                        ; A basic Nugget that just does damage
		Damage					= 400
		Radius					= 140.0
		DamageTaperOff 				= 70
		DamageArc				= 30
		DamageType				= HERO
		DamageFXType			= CLUBBING
		DeathType				= NORMAL
		DamageScalar  			= 0% ALL -WALL_UPGRADE -WALL_HUB -WALL_SEGMENT -DEFENSIVE_WALL			; No damage to allied structures.
		DamageScalar			= 0% NONE +WALK_ON_TOP_OF_WALL +BLOCKING_GATE ; This is a trick.  Marked as CanAttackWalls so he won't think he can walk on them, but then told he can't do damage to them so he won't attack.
		DamageScalar			= 50% NONE +MordorBalrog +MordorShelob +MinisGateDoor +IsengardOrthancDoor
	End
	
	MetaImpactNugget                    ; A Nugget that throws things back with force
		;HeroResist			= .75
		ShockWaveAmount			= 60.0
		ShockWaveRadius			= 100.0
		ShockWaveTaperOff		= 1
		ShockWaveArc			= 30
	End
End


CommandSet NewMumikillCommandSet
	1 	= Command_ToggleStance
	2	= Command_ChargeAttack
	13 	= Command_AttackMove
	14 	= Command_Stop
End

;---------------------------------------------------------------------------------------------------------------------------;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;Object Itself;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;---------------------------------------------------------------------------------------------------------------------------;

ChildObject MordorMumakilForGI01 MordorMumakil                         ;

	BountyValue = 300	

	ReplaceModule ModuleTag_01
	Draw = W3DQuadrupedDraw ModuleTag_011
  
  	  OkToChangeModelColor = Yes
  	  
    StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD
    ExtraPublicBone            = e_FrontLeft
    ExtraPublicBone            = e_FrontRight
    ExtraPublicBone            = e_BackLeft
    ExtraPublicBone            = e_BackRight
    ExtraPublicBone            = B_CARGO0
    ExtraPublicBone            = B_BANNER
    ExtraPublicBone            = B_LLLID

    DefaultModelConditionState
      Model               =  MUMumakil_SKN
    End
        
    ExtraPublicBone = DockWaiting01
    ExtraPublicBone = DockStart
;    ExtraPublicBone = DockExit			; No longer used
    ExtraPublicBone = DockAction
    
    ;-------------------------------------------------------------------
     
	; THE VETERAN/UPGRADED MODEL IS DEFINED BELOW ALL THE ANIMATIONS... DON'T MOVE IT !

    IdleAnimationState 

      Animation = IDLA ; 
        AnimationName = MUMumakil_SKL.MUMumakil_IDLA ; 
        AnimationPriority = 5 ; // will be chosen 5 times more often than a default (1) priority animation.
      End
      Animation = IDLB 
        AnimationName = MUMumakil_SKL.MUMumakil_IDLB ; 
      End
      
      BeginScript
        Prev = CurDrawablePrevAnimationState()
        if Prev == "Charging" then CurDrawableSetTransitionAnimState("TRANS_StopCharge") return end
        if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.66 then CurDrawableSetTransitionAnimState("TRANS_Stop66") return end
        if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.33 then CurDrawableSetTransitionAnimState("TRANS_Stop33") return end
        if Prev == "Moving" then CurDrawableSetTransitionAnimState("TRANS_Stop00") return end
      EndScript
      StateName = Idle
    End
        
	;; SPECIAL HACK CASE FOR RUNNING OFF THE MAP, SUPERCEEDS ANY OTHER ANIMS ;;;
    ; moving off map  - potentially E3 HACK
    AnimationState        = MOVING AFLAME RUNNING_OFF_MAP
      Animation           = MoveIt
        AnimationName		= MUMumakil_SKL.MUMumakil_RUNA
        AnimationMode       = LOOP
        AnimationBlendTime  = 15
      End
      ParticleSysBone     = BN_TENT_01 OliphantFire1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantSmoke1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantEmbers FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantFire2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantSmoke2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantEmbers FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireSmall FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireSmall FollowBone:yes
    End

	;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
	;;;; DYING VETERAN AFLAME ANIMS ;;;;
	;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;	
;-----------veteran
    ; Decay when dead flat for the VETERAN UPGRADED VERSION
    ModelConditionState    = USER_4 DYING DECAY DEATH_1 AFLAME USER_3
      Model                = MUMumakilVDIBF
      Texture				= MuMumakilUp.tga MuMumakilUPME.tga
    End;
    ModelConditionState    = USER_4 DYING DECAY DEATH_1 AFLAME
      Model                = MUMumakilVDIBF
    End;

    AnimationState         = USER_4 DYING DECAY DEATH_1 AFLAME 
      Animation            = dead1
        AnimationName       = MUMumakilVDIBFS.MUMumakilVDIBFA
        AnimationMode      = ONCE
      End
    End
    
    ; Decay when dead on the right side for the VETERAN UPGRADED VERSION
    ModelConditionState    = USER_4 DYING DECAY DEATH_2 AFLAME USER_3
      Model                = MUMumakilVDIAF
      Texture				= MuMumakilUp.tga MuMumakilUPME.tga
    End;    
    ModelConditionState    = USER_4 DYING DECAY DEATH_2 AFLAME 
      Model                = MUMumakilVDIAF
    End;

    AnimationState         = USER_4 DYING DECAY DEATH_2 AFLAME 
      Animation            = dead2
        AnimationName      = MUMumakilVDIAFS.MUMumakilVDIAFA
        AnimationMode      = ONCE
      End
    End

    ; Decay when dead on the left side for the VETERAN UPGRADED VERSION
    ModelConditionState    = USER_4 DYING DECAY DEATH_3 AFLAME USER_3
      Model                = MUMumakilVDICF
      Texture				= MuMumakilUp.tga MuMumakilUPME.tga
    End;     
    ModelConditionState    = USER_4 DYING DECAY DEATH_3 AFLAME 
      Model                = MUMumakilVDICF
    End;

    AnimationState         = USER_4 DYING DECAY DEATH_3 AFLAME 
      Animation            = dead3
        AnimationName      = MUMumakilVDICFS.MUMumakilVDICFA
        AnimationMode      = ONCE
      End
    End
;-----------veteran

	;;;;;;;;;;;;;;;;;;;;;;;;;;;;
	;;;; DYING AFLAME ANIMS ;;;;
	;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    ; Decay when dead flat
    ModelConditionState    = DYING DECAY DEATH_1 AFLAME USER_3
      Model                = MUMumakilDIEBF
      Texture				= MuMumakilUp.tga MuMumakilUPME.tga
    End;        
    ModelConditionState    = DYING DECAY DEATH_1 AFLAME
      Model                = MUMumakilDIEBF
    End;

    AnimationState         = DYING DECAY DEATH_1 AFLAME
      Animation            = dead1
        AnimationName       = MUMumakilDIEBFS.MUMumakilDIEBA
        AnimationMode      = ONCE
      End
    End
    
    ; Decay when dead on the right side
    ModelConditionState    = DYING DECAY DEATH_2 AFLAME USER_3
      Model                = MUMumakilDIEAF
      Texture				= MuMumakilUp.tga MuMumakilUPME.tga
    End;     
    ModelConditionState    = DYING DECAY DEATH_2 AFLAME
      Model                = MUMumakilDIEAF
    End;

    AnimationState         = DYING DECAY DEATH_2 AFLAME
      Animation            = dead2
        AnimationName      = MUMumakilDIEAFS.MUMumakilDIEAA
        AnimationMode      = ONCE
      End
    End

    ; Decay when dead on the left side
    ModelConditionState    = DYING DECAY DEATH_3 AFLAME USER_3
      Model                = MUMumakilDIECF
      Texture				= MuMumakilUp.tga MuMumakilUPME.tga
    End;     
    ModelConditionState    = DYING DECAY DEATH_3 AFLAME
      Model                = MUMumakilDIECF
    End;
    
    AnimationState         = DYING DECAY DEATH_3 AFLAME
      Animation            = dead3
        AnimationName      = MUMumakilDIECFS.MUMumakilDIECA
        AnimationMode      = ONCE
      End
    End
    
    ; Die - Fall flat
    AnimationState         = DYING DEATH_1 AFLAME
      Animation            = Die1
        AnimationName      = MUMumakil_SKL.MUMumakil_DIEB
        AnimationMode      = ONCE
      End
      ParticleSysBone     = BN_TENT_01 OliphantFire1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantSmoke1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantEmbers FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantFire2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantSmoke2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantEmbers FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireSmall FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireSmall FollowBone:yes            
    End
    
    ; Fall to right side aflame
    AnimationState         = DYING DEATH_2 AFLAME
      Animation            = Die1
        AnimationName      = MUMumakil_SKL.MUMumakil_DIEA
        AnimationMode      = ONCE
      End
      ParticleSysBone     = BN_TENT_01 OliphantFire1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantSmoke1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantEmbers FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantFire2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantSmoke2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantEmbers FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireSmall FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireSmall FollowBone:yes            
    End

    ; Fall to left side aflame
    AnimationState         = DYING DEATH_3 AFLAME
      Animation            = Die2
        AnimationName      = MUMumakil_SKL.MUMumakil_DIEC
        AnimationMode      = ONCE
      End
      ParticleSysBone     = BN_TENT_01 OliphantFire1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantSmoke1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantEmbers FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantFire2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantSmoke2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantEmbers FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireSmall FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireSmall FollowBone:yes            
    End

	;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
	;;;; DYING VETERAN ANIMS ;;;;
	;;;;;;;;;;;;;;;;;;;;;;;;;;;;;	
;-----------veteran
       ; Decay when dead flat for VETERAN UPGRADED UNITS
    ModelConditionState    = USER_4 DYING DEATH_1 DECAY USER_3
      Model                = MUMumakilVDIBF
      Texture				= MuMumakilUp.tga MuMumakilUPME.tga
    End;         
    ModelConditionState    = USER_4 DYING DEATH_1 DECAY 
      Model                = MUMumakilVDIBF
    End

    AnimationState         = USER_4 DYING DEATH_1 DECAY 
      Animation            = dead1
        AnimationName       = MUMumakilVDIBFS.MUMUMAKILVDIBFA
        AnimationMode      = ONCE
        AnimationBlendTime  = 0
      End
    End
     
    ; Decay when dead on the right side for VETERAN UPGRADED UNITS
    ModelConditionState    = USER_4 DYING DEATH_2 DECAY USER_3
      Model                = MUMumakilVDIAF
      Texture				= MuMumakilUp.tga MuMumakilUPME.tga
    End;       
    ModelConditionState    = USER_4 DYING DEATH_2 DECAY
      Model                = MUMumakilVDIAF
    End;

    AnimationState         = USER_4 DYING DEATH_2 DECAY
      Animation            = dead2
        AnimationName      = MUMumakilVDIAFS.MUMUMAKILVDIAFA
        AnimationMode      = ONCE
        AnimationBlendTime  = 0
      End
    End

    ; Decay when dead on the left side for VETERAN UPGRADED UNITS
    ModelConditionState    = USER_4 DYING DEATH_3 DECAY USER_3
      Model                = MUMumakilVDICF
      Texture				= MuMumakilUp.tga MuMumakilUPME.tga
    End;     
    ModelConditionState    = USER_4 DYING DEATH_3 DECAY
      Model                = MUMumakilVDICF
    End;

    AnimationState         = USER_4 DYING DEATH_3 DECAY
      Animation            = dead3
        AnimationName      = MUMumakilVDICFS.MUMUMAKILVDICFA
        AnimationMode      = ONCE
        AnimationBlendTime  = 0
      End
    End
;-----------veteran

		AnimationState			= BURNINGDEATH USER_4
			Animation
				AnimationName	= MUMumakil_SKL.MUMumakil_MFDA
				AnimationMode	= LOOP
				Distance		= 90
			End
			ParticleSysBone		= BN_TENT_01 OliphantFire1 FollowBone:yes
			ParticleSysBone		= BN_TENT_01 OliphantSmoke1 FollowBone:yes
			ParticleSysBone		= BN_TENT_01 OliphantEmbers FollowBone:yes
			ParticleSysBone		= BN_TENT_02 OliphantFire2 FollowBone:yes
			ParticleSysBone		= BN_TENT_02 OliphantSmoke2 FollowBone:yes
			ParticleSysBone		= BN_TENT_02 OliphantEmbers FollowBone:yes
			ParticleSysBone		= B_CARGO001 FireBuildingLargeSmoke FollowBone:yes
			ParticleSysBone		= B_CARGO001 FireSmall FollowBone:yes
			ParticleSysBone		= B_CARGO002 FireBuildingLargeSmoke FollowBone:yes
			ParticleSysBone		= B_CARGO002 FireSmall FollowBone:yes
			ParticleSysBone     = NONE NazgulSplatDust FollowBone:yes
			ParticleSysBone     = BN_TENT_01 OliphantSplatDust FollowBone:yes
		End

    ModelConditionState		= USER_4 USER_3
      Model					= MUMumakilUP
      Texture				= MuMumakilUp.tga MuMumakilUPME.tga
    End;
    
    ModelConditionState USER_4
		Model						= MUMumakilUP
	End
    
	;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
	;;;; DYING REGUALR ANIMS ;;;;
	;;;;;;;;;;;;;;;;;;;;;;;;;;;;;	
    ; Decay when dead flat 
    ModelConditionState		= DYING DECAY DEATH_1 USER_3
      Model					= MUMumakilDIEBF
      Texture				= MuMumakil.tga MuMumakilME.tga
    End;    
    ModelConditionState    = DYING DECAY DEATH_1
      Model                = MUMumakilDIEBF
    End;

    AnimationState         = DYING DECAY DEATH_1
      Animation            = dead1
        AnimationName       = MUMumakilDIEBFS.MUMumakilDIEBA
        AnimationMode      = ONCE
        AnimationBlendTime  = 0
      End
    End
   
    AnimationState         = DYING DEATH_1
      Animation            = Die1
        AnimationName      = MUMumakil_SKL.MUMumakil_DIEB
        AnimationMode      = ONCE
        AnimationBlendTime  = 0
      End
    End

    ; Decay when dead on the right side
    ModelConditionState		= DYING DECAY DEATH_2 USER_3
      Model					= MUMumakilDIEAF
      Texture				= MuMumakil.tga MuMumakilME.tga
    End;      
    ModelConditionState    = DYING DECAY DEATH_2
      Model                = MUMumakilDIEAF
    End;

    AnimationState         = DYING DECAY DEATH_2
      Animation            = dead2
        AnimationName      = MUMumakilDIEAFS.MUMumakilDIEAA
        AnimationMode      = ONCE
        AnimationBlendTime  = 0
      End
    End

    ; Decay when dead on the left side
    ModelConditionState		= DYING DECAY DEATH_3 USER_3
      Model					= MUMumakilDIECF
      Texture				= MuMumakil.tga MuMumakilME.tga
    End;      
    ModelConditionState    = DYING DECAY DEATH_3
      Model                = MUMumakilDIECF
    End;

    AnimationState         = DYING DECAY DEATH_3
      Animation            = dead3
        AnimationName      = MUMumakilDIECFS.MUMumakilDIECA
        AnimationMode      = ONCE
        AnimationBlendTime  = 0
      End
    End

    ; Fall to right side
    AnimationState         = DYING DEATH_2
      Animation            = Die1
        AnimationName      = MUMumakil_SKL.MUMumakil_DIEA
        AnimationMode      = ONCE
		
      End
		ParticleSysBone     = NONE NazgulSplatDust FollowBone:yes
		ParticleSysBone     = BN_TENT_01 OliphantSplatDust FollowBone:yes
    End

    ; Fall to left side
    AnimationState         = DYING DEATH_3
      Animation            = Die2
        AnimationName      = MUMumakil_SKL.MUMumakil_DIEC
        AnimationMode      = ONCE
      End
		ParticleSysBone     = NONE NazgulSplatDust FollowBone:yes
		ParticleSysBone     = BN_TENT_01 OliphantSplatDust FollowBone:yes
    End
    
    AnimationState         = DYING DEATH_4
      Animation            = Die4
        AnimationName      = MUMumakil_SKL.MUMumakil_DIED
        AnimationMode      = ONCE
      End
		ParticleSysBone     = NONE NazgulSplatDust FollowBone:yes
		ParticleSysBone     = BN_TENT_01 OliphantSplatDust FollowBone:yes
    End

	;;;;;;;;;;;;;;;;;;;
	; JUST BUILT ANIM ;
	;;;;;;;;;;;;;;;;;;;
    AnimationState  = JUST_BUILT
      Animation = Being_Built
        AnimationName		= MuMumakil_skl.MuMumakil_BLDA
        AnimationMode		= ONCE
        AnimationBlendTime	= 0 ; must be zero.
      End
    End
   
	;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
	; BEING MUMAKIL AFALME REALLYDAMAGED ANIMATION STATES ;
	;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    AnimationState      = MOVING TURN_LEFT_HIGH_SPEED AFLAME REALLYDAMAGED
      Animation = Turn
        AnimationName = MUMumakil_SKL.MUMumakil_TRNLB
        AnimationMode       = LOOP
        AnimationBlendTime  = 5
      End
      ParticleSysBone     = BN_TENT_01 OliphantFire1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantSmoke1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantEmbers FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantFire2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantSmoke2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantEmbers FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireSmall FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireSmall FollowBone:yes

      FXEvent	= Frame:7 FireWhenSkipped Name: FX_MUMLeftRearFootStep
	FXEvent	= Frame:28 FireWhenSkipped Name: FX_MUMLeftFrontFootStep	  
	FXEvent	= Frame:44 FireWhenSkipped Name: FX_MUMRightRearFootStep
	FXEvent	= Frame:50 FireWhenSkipped Name: FX_MUMRightFrontFootStep

      StateName           = Turn_Left_High_Speed_Damaged
      BeginScript
        Prev = CurDrawablePrevAnimationState()
        if Prev == "Moving" or Prev == "Turn_Right_High_Speed_Damaged" then CurDrawableAllowToContinue() return end
      EndScript
    End

    AnimationState        = MOVING TURN_RIGHT_HIGH_SPEED AFLAME REALLYDAMAGED
      Animation = Turn
        AnimationName = MUMumakil_SKL.MUMumakil_TRNRB
        AnimationMode       = LOOP
        AnimationBlendTime  = 5
      End
      ParticleSysBone     = BN_TENT_01 OliphantFire1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantSmoke1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantEmbers FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantFire2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantSmoke2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantEmbers FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireSmall FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireSmall FollowBone:yes

	  FXEvent	= Frame:7 FireWhenSkipped Name: FX_MUMLeftRearFootStep
	  FXEvent	= Frame:28 FireWhenSkipped Name: FX_MUMLeftFrontFootStep	  
	  FXEvent	= Frame:44 FireWhenSkipped Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:50 FireWhenSkipped Name: FX_MUMRightFrontFootStep

      StateName           = Turn_Right_High_Speed_Damaged
      BeginScript
        Prev = CurDrawablePrevAnimationState()
        if Prev == "Moving" or Prev == "Turn_Left_High_Speed_Damaged" then CurDrawableAllowToContinue() return end
      EndScript
    End
	
    AnimationState        = MOVING TURN_LEFT AFLAME REALLYDAMAGED
      Animation           = Turn
        AnimationName = MUMumakil_SKL.MUMumakil_TRNL
        AnimationMode       = LOOP
        AnimationBlendTime  = 20
        AnimationSpeedFactorRange = 1.4 1.4
      End
      ParticleSysBone     = BN_TENT_01 OliphantFire1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantSmoke1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantEmbers FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantFire2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantSmoke2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantEmbers FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireSmall FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireSmall FollowBone:yes

	  FXEvent	= Frame:01 FireWhenSkipped Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:40 FireWhenSkipped Name: FX_MUMRightFrontFootStep
	  FXEvent	= Frame:42 FireWhenSkipped Name: FX_MUMLeftRearFootStep
	  FXEvent	= Frame:44 FireWhenSkipped Name: FX_MUMLeftFrontFootStep
	  FXEvent	= Frame:45 FireWhenSkipped Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:85 FireWhenSkipped Name: FX_MUMLeftRearFootStep
	  FXEvent	= Frame:88 FireWhenSkipped Name: FX_MUMRightFrontFootStep
	  FXEvent	= Frame:89 FireWhenSkipped Name: FX_MUMLeftFrontFootStep

      StateName       = Turn_Slow
    End

    AnimationState        = MOVING TURN_RIGHT AFLAME REALLYDAMAGED
      Animation           = Turn
        AnimationName = MUMumakil_SKL.MUMumakil_TRNR
        AnimationMode       = LOOP
        AnimationBlendTime  = 20
        AnimationSpeedFactorRange = 1.4 1.4
      End
      ParticleSysBone     = BN_TENT_01 OliphantFire1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantSmoke1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantEmbers FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantFire2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantSmoke2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantEmbers FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireSmall FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireSmall FollowBone:yes

	  FXEvent	= Frame:01 FireWhenSkipped Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:40 FireWhenSkipped Name: FX_MUMRightFrontFootStep
	  FXEvent	= Frame:42 FireWhenSkipped Name: FX_MUMLeftRearFootStep
	  FXEvent	= Frame:44 FireWhenSkipped Name: FX_MUMLeftFrontFootStep
	  FXEvent	= Frame:45 FireWhenSkipped Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:85 FireWhenSkipped Name: FX_MUMLeftRearFootStep
	  FXEvent	= Frame:88 FireWhenSkipped Name: FX_MUMRightFrontFootStep
	  FXEvent	= Frame:89 FireWhenSkipped Name: FX_MUMLeftFrontFootStep

      StateName       = Turn_Slow
    End

   AnimationState         = MOVING WEAPONSET_RAMPAGE AFLAME
      Animation = Walk
        AnimationName = MUMumakil_SKL.MUMumakil_RPGA
        AnimationMode       = LOOP
        AnimationBlendTime  = 15
      End
      ParticleSysBone     = BN_TENT_01 OliphantFire1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantSmoke1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantEmbers FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantFire2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantSmoke2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantEmbers FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireSmall FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireSmall FollowBone:yes   
      
	  FXEvent	= Frame:41 FireWhenSkipped Name: FX_MUMLeftFrontFootStep
	  FXEvent	= Frame:43 FireWhenSkipped Name: FX_MUMRightFrontFootStep
	  FXEvent	= Frame:69 FireWhenSkipped Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:89 FireWhenSkipped Name: FX_MUMLeftFrontFootStep
	  FXEvent	= Frame:101 FireWhenSkipped Name: FX_MUMRightFrontFootStep
	  FXEvent	= Frame:110 FireWhenSkipped Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:111 FireWhenSkipped Name: FX_MUMLeftFrontFootStep
	  FXEvent	= Frame:123 FireWhenSkipped Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:127 FireWhenSkipped Name: FX_MUMRightFrontFootStep
	  FXEvent	= Frame:133 FireWhenSkipped Name: FX_MUMLeftFrontFootStep
	  FXEvent	= Frame:149 FireWhenSkipped Name: FX_MUMLeftRearFootStep
	  FXEvent	= Frame:185 FireWhenSkipped Name: FX_MUMLeftFrontFootStep
	  FXEvent	= Frame:195 FireWhenSkipped Name: FX_MUMRightFrontFootStep
	  FXEvent	= Frame:211 FireWhenSkipped Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:216 FireWhenSkipped Name: FX_MUMRightFrontFootStep
	  FXEvent	= Frame:235 FireWhenSkipped Name: FX_MUMLeftRearFootStep
               
      StateName           = Moving
      BeginScript
        Prev = CurDrawablePrevAnimationState()
        if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Accelerate1_aflame") end
      EndScript
    End

    AnimationState			= WEAPONSET_RAMPAGE AFLAME
      Animation				= Rampage
        AnimationName		= MUMumakil_SKL.MUMumakil_RPGA
        AnimationMode       = LOOP
        ;AnimationBlendTime  = 5
      End
      ParticleSysBone     = BN_TENT_01 OliphantFire1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantSmoke1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantEmbers FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantFire2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantSmoke2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantEmbers FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireSmall FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireSmall FollowBone:yes

	  FXEvent	= Frame:41 FireWhenSkipped Name: FX_MUMLeftFrontFootStep
	  FXEvent	= Frame:43 FireWhenSkipped Name: FX_MUMRightFrontFootStep
	  FXEvent	= Frame:69 FireWhenSkipped Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:89 FireWhenSkipped Name: FX_MUMLeftFrontFootStep
	  FXEvent	= Frame:101 FireWhenSkipped Name: FX_MUMRightFrontFootStep
	  FXEvent	= Frame:110 FireWhenSkipped Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:111 FireWhenSkipped Name: FX_MUMLeftFrontFootStep
	  FXEvent	= Frame:123 FireWhenSkipped Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:127 FireWhenSkipped Name: FX_MUMRightFrontFootStep
	  FXEvent	= Frame:133 FireWhenSkipped Name: FX_MUMLeftFrontFootStep
	  FXEvent	= Frame:149 FireWhenSkipped Name: FX_MUMLeftRearFootStep
	  FXEvent	= Frame:185 FireWhenSkipped Name: FX_MUMLeftFrontFootStep
	  FXEvent	= Frame:195 FireWhenSkipped Name: FX_MUMRightFrontFootStep
	  FXEvent	= Frame:211 FireWhenSkipped Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:216 FireWhenSkipped Name: FX_MUMRightFrontFootStep
	  FXEvent	= Frame:235 FireWhenSkipped Name: FX_MUMLeftRearFootStep
    End
    
	;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
	; END MUMAKIL AFALME REALLYDAMAGED ANIMATION STATES ;
	;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    


;;;;;;;;;;;;;;;;;;;;;;;;;;
; Attacking Animations
;;;;;;;;;;;;;;;;;;;;;;;;;;
    AnimationState				= TURN_LEFT ATTACKING
		Animation				= Turn
			AnimationName		= MUMumakil_SKL.MUMumakil_TRNLB
			AnimationMode       = LOOP
			AnimationBlendTime  = 5
			AnimationSpeedFactorRange = 1.4 1.4
		End

	  FXEvent	= Frame:7 FireWhenSkipped Name: FX_MUMLeftRearFootStep
	  FXEvent	= Frame:28 FireWhenSkipped Name: FX_MUMLeftFrontFootStep	  
	  FXEvent	= Frame:44 FireWhenSkipped Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:50 FireWhenSkipped Name: FX_MUMRightFrontFootStep
		
	End
	
    AnimationState			= TURN_RIGHT ATTACKING
      Animation				= Turn
        AnimationName		= MUMumakil_SKL.MUMumakil_TRNRB
        AnimationMode       = LOOP
        AnimationBlendTime  = 5
        AnimationSpeedFactorRange = 1.4 1.4
      End

	  FXEvent	= Frame:7 FireWhenSkipped Name: FX_MUMLeftRearFootStep
	  FXEvent	= Frame:28 FireWhenSkipped Name: FX_MUMLeftFrontFootStep	  
	  FXEvent	= Frame:44 FireWhenSkipped Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:50 FireWhenSkipped Name: FX_MUMRightFrontFootStep

	End	

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
; Charging animations
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     AnimationState        = MOVING TURN_LEFT_HIGH_SPEED CHARGING
      Animation = Turn
        AnimationName = MUMumakil_SKL.MUMumakil_WLKB1
        AnimationMode       = LOOP
        AnimationBlendTime  = 15
      End

	  FXEvent	= Frame:2 FireWhenSkipped Name: FX_MUMLeftRearFootStep
	  FXEvent	= Frame:27 FireWhenSkipped Name: FX_MUMLeftFrontFootStep	  
	  FXEvent	= Frame:43 FireWhenSkipped Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:68 FireWhenSkipped Name: FX_MUMRightFrontFootStep

      StateName           = Turn_Left_High_Speed
      BeginScript
        Prev = CurDrawablePrevAnimationState()
        if Prev == "Moving" or Prev == "Turn_Right_High_Speed" then CurDrawableAllowToContinue() return end
      EndScript
    End

    AnimationState         = MOVING TURN_RIGHT_HIGH_SPEED CHARGING
      Animation = Turn
        AnimationName = MUMumakil_SKL.MUMumakil_WLKB2
        AnimationMode       = LOOP
        AnimationBlendTime  = 15
      End

	  FXEvent	= Frame:2 FireWhenSkipped Name: FX_MUMLeftRearFootStep
	  FXEvent	= Frame:27 FireWhenSkipped Name: FX_MUMLeftFrontFootStep	  
	  FXEvent	= Frame:43 FireWhenSkipped Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:68 FireWhenSkipped Name: FX_MUMRightFrontFootStep

      StateName           = Turn_Right_High_Speed
      BeginScript
        Prev = CurDrawablePrevAnimationState()
        if Prev == "Moving" or Prev == "Turn_Left_High_Speed" then CurDrawableAllowToContinue() return end
      EndScript
    End
        
    AnimationState			= MOVING TURN_LEFT CHARGING
		Animation			= Turn
			AnimationName		= MUMumakil_SKL.MUMumakil_TRNLB
			AnimationMode       = LOOP
			AnimationBlendTime  = 5
		End

	  FXEvent	= Frame:2 FireWhenSkipped Name: FX_MUMLeftRearFootStep
	  FXEvent	= Frame:30 FireWhenSkipped Name: FX_MUMLeftFrontFootStep
	  FXEvent	= Frame:42 FireWhenSkipped Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:50 FireWhenSkipped Name: FX_MUMRightFrontFootStep

	End
	
    AnimationState          = MOVING TURN_RIGHT CHARGING
      Animation = Turn
        AnimationName = MUMumakil_SKL.MUMumakil_TRNRB
        AnimationMode       = LOOP
        AnimationBlendTime  = 5
      End

	  FXEvent	= Frame:2 FireWhenSkipped Name: FX_MUMLeftRearFootStep
	  FXEvent	= Frame:30 FireWhenSkipped Name: FX_MUMLeftFrontFootStep
	  FXEvent	= Frame:42 FireWhenSkipped Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:50 FireWhenSkipped Name: FX_MUMRightFrontFootStep

	End	

    AnimationState          = MOVING CHARGING
      Animation = Charge
        AnimationName = MUMumakil_SKL.MUMumakil_MFDA
        AnimationMode       = LOOP
        AnimationBlendTime  = 15
;       AnimationSpeedFactorRange = 0.5 0.5
      End

	  FXEvent	= Frame:2 FireWhenSkipped Name: FX_MUMLeftRearFootStep
	  FXEvent	= Frame:7 FireWhenSkipped Name: FX_MUMLeftFrontFootStep
	  FXEvent	= Frame:14 FireWhenSkipped Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:20 FireWhenSkipped Name: FX_MUMRightFrontFootStep

      StateName           = Charging
      BeginScript
        Prev = CurDrawablePrevAnimationState()
        if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Accelerate2") end
      EndScript

    End

   AnimationState				=	FIRING_OR_PREATTACK_B
		Animation				= Stomp
				AnimationName	= MUMumakil_SKL.MUMumakil_ATKA
				AnimationMode   = ONCE
				UseWeaponTiming	= No
		End
		Animation				= SwipeLeft
				AnimationName	= MUMumakil_SKL.MUMumakil_ATKB
				AnimationMode   = ONCE
				UseWeaponTiming	= Yes
		End
		Animation				= SwipeRight
				AnimationName	= MUMumakil_SKL.MUMumakil_ATKC
				AnimationMode   = ONCE
				UseWeaponTiming	= Yes
		End
		Animation				= Lunge
				AnimationName	= MUMumakil_SKL.MUMumakil_ATKD
				AnimationMode   = ONCE
				UseWeaponTiming	= Yes
		End
		BeginScript
			if CurDrawableIsCurrentTargetKindof("STRUCTURE") then
				return ("Lunge")
			else
				if GetClientRandomNumberReal(0,1) > 0.33 then
					return ("Stomp")
				else 
					if GetClientRandomNumberReal(0,1) > 0.50 then	; that's 50% of remaining 2/3 chance.
						return ("SwipeLeft")
					else
						return ("SwipeRight")
					end
				end
			end
		EndScript
	End

    AnimationState          = MOVING TURN_LEFT_HIGH_SPEED REALLYDAMAGED
      Animation = Turn
        AnimationName = MUMumakil_SKL.MUMumakil_TRNLB
        AnimationMode       = LOOP
        AnimationBlendTime  = 5
      End

	  FXEvent	= Frame:7 FireWhenSkipped Name: FX_MUMLeftRearFootStep
	  FXEvent	= Frame:28 FireWhenSkipped Name: FX_MUMLeftFrontFootStep	  
	  FXEvent	= Frame:44 FireWhenSkipped Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:50 FireWhenSkipped Name: FX_MUMRightFrontFootStep

      StateName           = Turn_Left_High_Speed_Damaged
      BeginScript
        Prev = CurDrawablePrevAnimationState()
        if Prev == "Moving" or Prev == "Turn_Right_High_Speed_Damaged" then CurDrawableAllowToContinue() return end
      EndScript
    End

    AnimationState        = MOVING TURN_RIGHT_HIGH_SPEED REALLYDAMAGED
      Animation = Turn
        AnimationName = MUMumakil_SKL.MUMumakil_TRNRB
        AnimationMode       = LOOP
        AnimationBlendTime  = 5
      End

	  FXEvent	= Frame:7 FireWhenSkipped Name: FX_MUMLeftRearFootStep
	  FXEvent	= Frame:28 FireWhenSkipped Name: FX_MUMLeftFrontFootStep	  
	  FXEvent	= Frame:44 FireWhenSkipped Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:50 FireWhenSkipped Name: FX_MUMRightFrontFootStep

      StateName           = Turn_Right_High_Speed_Damaged
      BeginScript
        Prev = CurDrawablePrevAnimationState()
        if Prev == "Moving" or Prev == "Turn_Left_High_Speed_Damaged" then CurDrawableAllowToContinue() return end
      EndScript
    End

	;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
	; BEING MUMAKIL AFALME ANIMATION STATES ;
	;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     AnimationState         = MOVING TURN_LEFT_HIGH_SPEED AFLAME
      Animation = Turn
        AnimationName = MUMumakil_SKL.MUMumakil_TRNLA
        AnimationMode       = LOOP
        AnimationBlendTime  = 15
      End
      ParticleSysBone     = BN_TENT_01 OliphantFire1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantSmoke1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantEmbers FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantFire2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantSmoke2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantEmbers FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireSmall FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireSmall FollowBone:yes  
      
	  FXEvent	= Frame:1 FireWhenSkipped Name: FX_MUMLeftRearFootStep
	  FXEvent	= Frame:8 FireWhenSkipped Name: FX_MUMLeftFrontFootStep
	  FXEvent	= Frame:13 FireWhenSkipped Name: FX_MUMRightRearFootStep	  
	  FXEvent	= Frame:20 FireWhenSkipped Name: FX_MUMRightFrontFootStep
                
      StateName           = Turn_Left_High_Speed
      BeginScript
        Prev = CurDrawablePrevAnimationState()
        if Prev == "Moving" or Prev == "Turn_Right_High_Speed" then CurDrawableAllowToContinue() return end
      EndScript
    End

    AnimationState        = MOVING TURN_RIGHT_HIGH_SPEED AFLAME
      Animation = Turn
        AnimationName = MUMumakil_SKL.MUMumakil_TRNRA
        AnimationMode       = LOOP
        AnimationBlendTime  = 15
      End
      ParticleSysBone     = BN_TENT_01 OliphantFire1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantSmoke1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantEmbers FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantFire2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantSmoke2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantEmbers FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireSmall FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireSmall FollowBone:yes 
      
	  FXEvent	= Frame:1 FireWhenSkipped Name: FX_MUMLeftRearFootStep
	  FXEvent	= Frame:8 FireWhenSkipped Name: FX_MUMLeftFrontFootStep
	  FXEvent	= Frame:13 FireWhenSkipped Name: FX_MUMRightRearFootStep	  
	  FXEvent	= Frame:20 FireWhenSkipped Name: FX_MUMRightFrontFootStep      
                 
      StateName           = Turn_Right_High_Speed
      BeginScript
        Prev = CurDrawablePrevAnimationState()
        if Prev == "Moving" or Prev == "Turn_Left_High_Speed" then CurDrawableAllowToContinue() return end
      EndScript
    End

    AnimationState        = MOVING TURN_LEFT AFLAME
      Animation           = Turn
        AnimationName = MUMumakil_SKL.MUMumakil_TRNL
        AnimationMode       = LOOP
        AnimationBlendTime  = 15
        AnimationSpeedFactorRange = 1.4 1.4
      End
      ParticleSysBone     = BN_TENT_01 OliphantFire1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantSmoke1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantEmbers FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantFire2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantSmoke2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantEmbers FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireSmall FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireSmall FollowBone:yes  
      
	  FXEvent	= Frame:01 FireWhenSkipped Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:40 FireWhenSkipped Name: FX_MUMRightFrontFootStep
	  FXEvent	= Frame:42 FireWhenSkipped Name: FX_MUMLeftRearFootStep
	  FXEvent	= Frame:44 FireWhenSkipped Name: FX_MUMLeftFrontFootStep
	  FXEvent	= Frame:45 FireWhenSkipped Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:85 FireWhenSkipped Name: FX_MUMLeftRearFootStep
	  FXEvent	= Frame:88 FireWhenSkipped Name: FX_MUMRightFrontFootStep
	  FXEvent	= Frame:89 FireWhenSkipped Name: FX_MUMLeftFrontFootStep      
                
      StateName       = Turn_Slow
    End

    AnimationState        = MOVING TURN_RIGHT AFLAME
      Animation           = Turn
        AnimationName = MUMumakil_SKL.MUMumakil_TRNR
        AnimationMode       = LOOP
        AnimationBlendTime  = 15
        AnimationSpeedFactorRange = 1.4 1.4
      End
      ParticleSysBone     = BN_TENT_01 OliphantFire1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantSmoke1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantEmbers FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantFire2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantSmoke2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantEmbers FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireSmall FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireSmall FollowBone:yes  
      
	  FXEvent	= Frame:01 FireWhenSkipped Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:40 FireWhenSkipped Name: FX_MUMRightFrontFootStep
	  FXEvent	= Frame:42 FireWhenSkipped Name: FX_MUMLeftRearFootStep
	  FXEvent	= Frame:44 FireWhenSkipped Name: FX_MUMLeftFrontFootStep
	  FXEvent	= Frame:45 FireWhenSkipped Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:85 FireWhenSkipped Name: FX_MUMLeftRearFootStep
	  FXEvent	= Frame:88 FireWhenSkipped Name: FX_MUMRightFrontFootStep
	  FXEvent	= Frame:89 FireWhenSkipped Name: FX_MUMLeftFrontFootStep      
                
      StateName       = Turn_Slow
    End

    AnimationState          = MOVING AFLAME
      Animation = Walk
        AnimationName       = MUMumakil_SKL.MUMumakil_RUNA
        AnimationMode       = LOOP
        AnimationBlendTime  = 5
      End
      ParticleSysBone     = BN_TENT_01 OliphantFire1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantSmoke1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantEmbers FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantFire2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantSmoke2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantEmbers FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireSmall FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireSmall FollowBone:yes  
      
	  FXEvent	= Frame:1 FireWhenSkipped Name: FX_MUMLeftRearFootStep
	  FXEvent	= Frame:8 FireWhenSkipped Name: FX_MUMLeftFrontFootStep
	  FXEvent	= Frame:11 FireWhenSkipped Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:20 FireWhenSkipped Name: FX_MUMRightFrontFootStep      
                
      StateName           = Moving
      BeginScript
        Prev = CurDrawablePrevAnimationState()
        if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Accelerate1_aflame") end
      EndScript
    End

    TransitionState = TRANS_Accelerate1_aflame
      Animation = Transition
        ; TRANS_Stand TRANS_Moving00     ; transition from the standing into the moving animation
        ;TRANS_Turn_Slow TRANS_Moving00 ; transition from the slow turn into the moving animation
        AnimationName = MUMumakil_SKL.MUMumakil_ACCL1
        AnimationMode       = ONCE
        AnimationBlendTime  = 10
      End
      ParticleSysBone     = BN_TENT_01 OliphantFire1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantSmoke1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantEmbers FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantFire2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantSmoke2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantEmbers FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireSmall FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireSmall FollowBone:yes 

	  FXEvent	= Frame:27 FireWhenSkipped Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:48 FireWhenSkipped Name: FX_MUMRightFrontFootStep
	  FXEvent	= Frame:50 FireWhenSkipped Name: FX_MUMLeftRearFootStep	  
    
    End

    TransitionState = TRANS_Accelerate2_aflame
      Animation = Transition
        AnimationName = MUMumakil_SKL.MUMumakil_ACCL2
        AnimationMode       = ONCE
        AnimationBlendTime  = 10
      End
      
      ParticleSysBone     = BN_TENT_01 OliphantFire1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantSmoke1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantEmbers FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantFire2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantSmoke2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantEmbers FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireSmall FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireSmall FollowBone:yes 

	  FXEvent	= Frame:21 FireWhenSkipped Name: FX_MUMRightFrontFootStep
	  FXEvent	= Frame:25 FireWhenSkipped Name: FX_MUMRightRearFootStep    
    End

    TransitionState    = TRANS_StopCharge_aflame
      Animation = Transition
        ;TRANS_Charging TRANS_Stand     ; transition from charging anim to the stop anim
        AnimationName = MUMumakil_SKL.MUMumakil_DECL4
        AnimationMode       = ONCE
        AnimationBlendTime  = 10
      End
      ParticleSysBone     = BN_TENT_01 OliphantFire1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantSmoke1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantEmbers FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantFire2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantSmoke2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantEmbers FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireSmall FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireSmall FollowBone:yes 

	  FXEvent	= Frame:1 FireWhenSkipped Name: FX_MUMRightFrontFootStep
	  FXEvent	= Frame:1 FireWhenSkipped Name: FX_MUMLeftRearFootStep
	  FXEvent	= Frame:11 FireWhenSkipped Name: FX_MUMLeftFrontFootStep
	  FXEvent	= Frame:18 FireWhenSkipped Name: FX_MUMRightRearFootStep    
	  FXEvent	= Frame:59 FireWhenSkipped Name: FX_MUMRightFrontFootStep
	  FXEvent	= Frame:59 FireWhenSkipped Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:68 FireWhenSkipped Name: FX_MUMLeftFrontFootStep
	  FXEvent	= Frame:75 FireWhenSkipped Name: FX_MUMLeftRearFootStep
    
    End

    TransitionState = TRANS_Stop66_aflame
      Animation = Transition
        ;TRANS_Moving66 TRANS_Stand     ; transition from between 66% - 100% of the moving animation
        AnimationName           = MUMumakil_SKL.MUMumakil_DECL3
        AnimationMode       = ONCE
        AnimationBlendTime  = 10
      End
      ParticleSysBone     = BN_TENT_01 OliphantFire1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantSmoke1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantEmbers FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantFire2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantSmoke2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantEmbers FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireSmall FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireSmall FollowBone:yes      
    End

    TransitionState = TRANS_Stop33_aflame
      Animation = Transition
        ;TRANS_Moving33 TRANS_Stand     ; transition from between 33% - 66% of the moving animation
        AnimationName = MUMumakil_SKL.MUMumakil_DECL2
        AnimationMode       = ONCE
        AnimationBlendTime  = 10
      End
      ParticleSysBone     = BN_TENT_01 OliphantFire1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantSmoke1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantEmbers FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantFire2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantSmoke2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantEmbers FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireSmall FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireSmall FollowBone:yes      
    End

    TransitionState = TRANS_Stop00_aflame
      Animation = Transition
        ;TRANS_Moving33 TRANS_Stand     ; transition from between 33% - 66% of the moving animation
        AnimationName = MUMumakil_SKL.MUMumakil_DECL1
        AnimationMode       = ONCE
        AnimationBlendTime  = 10
      End
      ParticleSysBone     = BN_TENT_01 OliphantFire1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantSmoke1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantEmbers FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantFire2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantSmoke2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantEmbers FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireSmall FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireSmall FollowBone:yes      
    End    
    
    
	;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
	; END MUMAKIL AFALME ANIMATION STATES ;
	;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

     AnimationState        = MOVING TURN_LEFT_HIGH_SPEED
      Animation = Turn
        AnimationName = MUMumakil_SKL.MUMumakil_WLKB1
        AnimationMode       = LOOP
        AnimationBlendTime  = 15
      End

	  FXEvent	= Frame:2 FireWhenSkipped Name: FX_MUMLeftRearFootStep
	  FXEvent	= Frame:27 FireWhenSkipped Name: FX_MUMLeftFrontFootStep	  
	  FXEvent	= Frame:43 FireWhenSkipped Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:68 FireWhenSkipped Name: FX_MUMRightFrontFootStep

      StateName           = Turn_Left_High_Speed
      BeginScript
        Prev = CurDrawablePrevAnimationState()
        if Prev == "Moving" or Prev == "Turn_Right_High_Speed" then CurDrawableAllowToContinue() return end
      EndScript
    End

    AnimationState        = MOVING TURN_RIGHT_HIGH_SPEED
      Animation = Turn
        AnimationName = MUMumakil_SKL.MUMumakil_WLKB2
        AnimationMode       = LOOP
        AnimationBlendTime  = 15
      End

	  FXEvent	= Frame:2 FireWhenSkipped Name: FX_MUMLeftRearFootStep
	  FXEvent	= Frame:27 FireWhenSkipped Name: FX_MUMLeftFrontFootStep	  
	  FXEvent	= Frame:43 FireWhenSkipped Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:68 FireWhenSkipped Name: FX_MUMRightFrontFootStep

      StateName           = Turn_Right_High_Speed
      BeginScript
        Prev = CurDrawablePrevAnimationState()
        if Prev == "Moving" or Prev == "Turn_Left_High_Speed" then CurDrawableAllowToContinue() return end
      EndScript
    End
    
    AnimationState				=	MOVING BACKING_UP
		Animation				=	BackingUp
			AnimationName		=	MUMumakil_SKL.MUMumakil_BAKA
			AnimationMode		=	LOOP
		End
		Flags					=	RANDOMSTART
	End

    AnimationState        = MOVING TURN_LEFT
      Animation           = Turn
        AnimationName = MUMumakil_SKL.MUMumakil_TRNL
        AnimationMode       = LOOP
        AnimationBlendTime  = 30
        AnimationSpeedFactorRange = 1.4 1.4
      End

	  FXEvent	= Frame:01 FireWhenSkipped Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:40 FireWhenSkipped Name: FX_MUMRightFrontFootStep
	  FXEvent	= Frame:42 FireWhenSkipped Name: FX_MUMLeftRearFootStep
	  FXEvent	= Frame:44 FireWhenSkipped Name: FX_MUMLeftFrontFootStep
	  FXEvent	= Frame:45 FireWhenSkipped Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:85 FireWhenSkipped Name: FX_MUMLeftRearFootStep
	  FXEvent	= Frame:88 FireWhenSkipped Name: FX_MUMRightFrontFootStep
	  FXEvent	= Frame:89 FireWhenSkipped Name: FX_MUMLeftFrontFootStep

      StateName       = Turn_Slow
    End

    AnimationState        = MOVING TURN_RIGHT
      Animation           = Turn
        AnimationName = MUMumakil_SKL.MUMumakil_TRNR
        AnimationMode       = LOOP
        AnimationBlendTime  = 30
        AnimationSpeedFactorRange = 1.4 1.4
      End

	  FXEvent	= Frame:01 FireWhenSkipped Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:40 FireWhenSkipped Name: FX_MUMRightFrontFootStep
	  FXEvent	= Frame:42 FireWhenSkipped Name: FX_MUMLeftRearFootStep
	  FXEvent	= Frame:44 FireWhenSkipped Name: FX_MUMLeftFrontFootStep
	  FXEvent	= Frame:45 FireWhenSkipped Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:85 FireWhenSkipped Name: FX_MUMLeftRearFootStep
	  FXEvent	= Frame:88 FireWhenSkipped Name: FX_MUMRightFrontFootStep
	  FXEvent	= Frame:89 FireWhenSkipped Name: FX_MUMLeftFrontFootStep

      StateName       = Turn_Slow
    End


   AnimationState        = MOVING REALLYDAMAGED
      Animation = Walk
        AnimationName = MUMumakil_SKL.MUMumakil_WLKC
        AnimationMode       = LOOP
        AnimationBlendTime  = 15
      End

	  FXEvent	= Frame:8 FireWhenSkipped Name: FX_MUMLeftRearFootStep
	  FXEvent	= Frame:31 FireWhenSkipped Name: FX_MUMLeftFrontFootStep
	  FXEvent	= Frame:46 FireWhenSkipped Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:55 FireWhenSkipped Name: FX_MUMRightFrontFootStep

      StateName           = Moving
      BeginScript
        Prev = CurDrawablePrevAnimationState()
        ;if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Accelerate1") end
      EndScript
    End   

    AnimationState        = MOVING
      Animation = Walk
        AnimationName       = MUMumakil_SKL.MUMumakil_WLKA
		AnimationSpeedFactorRange = 2 2
        AnimationMode       = LOOP
        AnimationBlendTime  = 10
      End

	  FXEvent	= Frame:9 FireWhenSkipped Name: FX_MUMLeftRearFootStep
	  FXEvent	= Frame:31 FireWhenSkipped Name: FX_MUMLeftFrontFootStep
	  FXEvent	= Frame:44 FireWhenSkipped Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:74 FireWhenSkipped Name: FX_MUMRightFrontFootStep

      StateName           = Moving
      BeginScript
        Prev = CurDrawablePrevAnimationState()
        ;if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Accelerate1") end
      EndScript
    End

    TransitionState = TRANS_Accelerate1
      Animation = Transition
        AnimationName		= MUMumakil_SKL.MUMumakil_ACCL1
        AnimationMode       = ONCE
        AnimationBlendTime	= 10
      End

	  FXEvent	= Frame:27 FireWhenSkipped Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:48 FireWhenSkipped Name: FX_MUMRightFrontFootStep
	  FXEvent	= Frame:50 FireWhenSkipped Name: FX_MUMLeftRearFootStep	

    End

    TransitionState = TRANS_Accelerate2
      Animation = Transition
        AnimationName		= MUMumakil_SKL.MUMumakil_ACCL2
        AnimationMode       = ONCE
        AnimationBlendTime  = 10
      End

	  FXEvent	= Frame:21 FireWhenSkipped Name: FX_MUMRightFrontFootStep
	  FXEvent	= Frame:25 FireWhenSkipped Name: FX_MUMRightRearFootStep 

    End

    TransitionState = TRANS_StopCharge
      Animation = Transition
        ;TRANS_Charging TRANS_Stand     ; transition from charging anim to the stop anim
        AnimationName = MUMumakil_SKL.MUMumakil_DECL4
        AnimationMode       = ONCE
        ;AnimationBlendTime  = 10
      End

	  FXEvent	= Frame:1 FireWhenSkipped Name: FX_MUMRightFrontFootStep
	  FXEvent	= Frame:1 FireWhenSkipped Name: FX_MUMLeftRearFootStep
	  FXEvent	= Frame:11 FireWhenSkipped Name: FX_MUMLeftFrontFootStep
	  FXEvent	= Frame:18 FireWhenSkipped Name: FX_MUMRightRearFootStep    
	  FXEvent	= Frame:59 FireWhenSkipped Name: FX_MUMRightFrontFootStep
	  FXEvent	= Frame:59 FireWhenSkipped Name: FX_MUMRightRearFootStep
	  FXEvent	= Frame:68 FireWhenSkipped Name: FX_MUMLeftFrontFootStep
	  FXEvent	= Frame:75 FireWhenSkipped Name: FX_MUMLeftRearFootStep

    End

    TransitionState = TRANS_Stop66
      Animation = Transition
        ;TRANS_Moving66 TRANS_Stand     ; transition from between 66% - 100% of the moving animation
        AnimationName           = MUMumakil_SKL.MUMumakil_DECL3
        AnimationMode       = ONCE
        ;AnimationBlendTime  = 10
      End
    End

    TransitionState = TRANS_Stop33
      Animation = Transition
        ;TRANS_Moving33 TRANS_Stand     ; transition from between 33% - 66% of the moving animation
        AnimationName = MUMumakil_SKL.MUMumakil_DECL2
        AnimationMode       = ONCE
        ;AnimationBlendTime  = 10
      End
    End

    TransitionState = TRANS_Stop00
      Animation = Transition
        ;TRANS_Moving33 TRANS_Stand     ; transition from between 33% - 66% of the moving animation
        AnimationName = MUMumakil_SKL.MUMumakil_DECL1
        AnimationMode       = ONCE
        ;AnimationBlendTime  = 10
      End
    End


    AnimationState			= AFLAME
      Animation = IDLA ; 
        AnimationName = MUMumakil_SKL.MUMumakil_IDLA ; 
        AnimationPriority = 5 ; // will be chosen 5 times more often than a default (1) priority animation.
        AnimationBlendTime  = 10
      End
      Animation = IDLB 
        AnimationName = MUMumakil_SKL.MUMumakil_IDLB ; 
        AnimationBlendTime  = 10
      End
      ParticleSysBone     = BN_TENT_01 OliphantFire1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantSmoke1 FollowBone:yes
      ParticleSysBone     = BN_TENT_01 OliphantEmbers FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantFire2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantSmoke2 FollowBone:yes
      ParticleSysBone     = BN_TENT_02 OliphantEmbers FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO001 FireSmall FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone     = B_CARGO002 FireSmall FollowBone:yes
      BeginScript
        Prev = CurDrawablePrevAnimationState()
        if Prev == "Charging" then CurDrawableSetTransitionAnimState("TRANS_StopCharge_aflame") return end
        if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.66 then CurDrawableSetTransitionAnimState("TRANS_Stop66_aflame") return end
        if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.33 then CurDrawableSetTransitionAnimState("TRANS_Stop33_aflame") return end
        if Prev == "Moving" then CurDrawableSetTransitionAnimState("TRANS_Stop00_aflame") return end
      EndScript
      StateName = Idle
    End
    
    AnimationState = HIT_REACTION HIT_LEVEL_1
		Animation = Hit_Level_1_a
			AnimationName = MUMumakil_SKL.MUMumakil_HITA
			AnimationMode = ONCE
		End
	End

    ModelConditionState		= USER_3
      Model					= MUMumakil_SKN
      Texture				= MuMumakil.tga MuMumakilME.tga
    End; 

    ; Used by FOUR_LEGS_HUGE locomotor type to balance on the ground
    LeftFrontFootBone           = e_FrontLeft
    RightFrontFootBone          = e_FrontRight
    LeftRearFootBone            = e_BackLeft
    RightRearFootBone           = e_BackRight

	End
	End


	CommandSet = NewMumikillCommandSet

	Scale = 1.1

	ReplaceModule ModuleTag_02
	Body = DelayedDeathBody ModuleTag_021
		CheerRadius 				= EMOTION_CHEER_RADIUS
		MaxHealth				= 10000  ;8000			; BALANCE Mumakil Health
		DoHealthCheck				= No			; Don't want to get the delayed death behaviour when we die normally.
		DelayedDeathTime			= 5000
		CanRespawn				= No			; Unit can't get revived.
		ImmortalUntilDeathTime		= No			; Not immune to damage during rampage.  So you can keep him from running stuff over.
		BurningDeathBehavior		= No ;--------------------------------------
		BurningDeathFX				= FX_CavalryBurningFlame
	End
	End


	RemoveModule ModuleTag_Level2Upgrade

	RemoveModule FadeInTheHodwah

	RemoveModule ModuleTag_12

	LocomotorSet
		Locomotor = NewMumakilLocomotor
		Condition = SET_NORMAL 
		Speed     = 45
	End
  
	LocomotorSet
		Locomotor	=	NewMumakilLocomotor2
		Condition	=	SET_PANIC
		Speed		=	80
	End
 
 
	LocomotorSet
		Locomotor	=	NewMumakilLocomotor
		Condition	=	SET_ENRAGED
		Speed		=	80
	End
	
	LocomotorSet
		Locomotor = BurningDeathLocomotorCavalry
		Condition = SET_BURNINGDEATH
		Speed	  = BURNINGDEATH_WANDERSPEED_ENT
	End

	AddModule
	Behavior = GrantUpgradeCreate ModuleTag_777 
		UpgradeToGrant = Upgrade_HaldirGoldenArrow

	End 
	End

	AddModule
	Behavior = SubObjectsUpgrade ModuleTag_mumastuff
		TriggeredBy				= Upgrade_HaldirGoldenArrow
		HideSubObjects	= Houda Houda01
		;ShowSubObjects	= SPIKES
;		UpgradeTexture	= mumumakilme.tga 0 mumumakilupme.tga 
;		UpgradeTexture	= mumumakilupme.tga 0 gbgen01c.tga
	End
	End

	AddModule
	Behavior = SubObjectsUpgrade Costume_5622567334
		TriggeredBy		= Upgrade_HaldirGoldenArrow ;
		UpgradeTexture	= mumumakil.tga 0 mumumakilupme.tga 
				RecolorHouse	= No
	End
	End

	AddModule	
	Behavior = ExperienceLevelCreate ModuleTag_MPLevelBonus1
		LevelToGrant = 5
		MPOnly = Yes
	End
	End

	AddModule
	Behavior = AutoHealBehavior ModuleTag_MumakilHealing
		StartsActive = Yes
		HealingAmount = 50
		HealingDelay = 1500
		StartHealingDelay = 15000
		HealOnlyIfNotInCombat = Yes
	End
	End

	CanPathThroughGates	= Yes

  GeometryIsSmall		= No
  
  Geometry				= BOX
  GeometryMajorRadius	= 50.0
  GeometryMinorRadius	= 25.0
  GeometryHeight		= 45.0
  GeometryOffset		= X:20 Y:0 Z:0
  
  AdditionalGeometry	= CYLINDER
  GeometryMajorRadius	= 20.0
  GeometryHeight		= 60.0
  GeometryOffset		= X:5 Y:0 Z:50

End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Mordor Mumakil
;Reference: MordorMumakilRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<


CommandSet NewMordorMumakilCommandSet
	1	= Command_ToggleStance	
	2	= Command_ChargeAttack
	;3	= Command_PurchaseUpgradeMordorFireArrows
	;4	= Command_PurchaseUpgradeMordorBasicTraining
	13	= Command_AttackMove
	14	= Command_Stop
End


ChildObject NewMumakill MordorMumakil

	BountyValue = 300	

	AddModule
	Behavior = AutoHealBehavior ModuleTag_MumakilHealing
		StartsActive = Yes
		HealingAmount = 70
		HealingDelay = 1000
		StartHealingDelay = 15000
		HealOnlyIfNotInCombat = Yes
	End
	End


	AddModule
	Behavior = GrantUpgradeCreate ModuleTag_777 
		UpgradeToGrant = Upgrade_MordorBasicTraining

	End 
	End

	AddModule
	Behavior = SubObjectsUpgrade ModuleTag_mumastuff
		TriggeredBy				= Upgrade_MordorBasicTraining
		ShowSubObjects	= Houda Houda01
	End
	End

	CanPathThroughGates	= Yes

	Scale = 0.9

	CommandSet = NewMordorMumakilCommandSet

End

Object MordorMumakil

	BountyValue = 300	
	BuildCost = 2000
	BuildTime = 45

	CanPathThroughGates	= Yes

	Scale = 0.9

	BuildVariations = NewMumakill MordorMumakilForGI01


End


;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Haradrim Archer Horde
;Reference: HaradrimArcherHordeRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

CommandSet NewMordorHaradrimArcherHordeCommandSet
	1	= Command_ToggleStance
	2	= Command_HaradrimArcherBarbedArrowAbility
	3	= Command_ArcherBombard
	12	= Command_CaptureBuilding
	13	= Command_AttackMove
	14	= Command_Stop
End

Object MordorHaradrimArcherHorde

	BuildCost = 800
	BuildTime = 25     


	CommandSet		= NewMordorHaradrimArcherHordeCommandSet

	WeaponSet
		Conditions	= None 
		Weapon		= PRIMARY    HaradrimArcherMissileHordeRangefinder
		Weapon		= TERTIARY   HaradrimArcherMissileHordeRangefinderBombard
		AutoChooseSources = TERTIARY FROM_PLAYER FROM_SCRIPT				; Not AI.
	End

	AddModule
	Behavior = GrantUpgradeCreate ModuleTag_1
		UpgradeToGrant = Upgrade_GandalfWhite  ;
	End 
	End


	ReplaceModule ModuleTag_BasicTraining
	Behavior = LevelUpUpgrade ModuleTag_BasicTraining1
		TriggeredBy			= Upgrade_GandalfWhite
		LevelsToGain		= 1
		LevelCap			= 2
	End
	End

	ReplaceModule ModuleTag_ProductionLegality
	Behavior = StatusBitsUpgrade ModuleTag_ProductionLegality1
		TriggeredBy			= Upgrade_GandalfWhite
	End
	End

	ReplaceModule ModuleTag_ProductionLegality2
	Behavior = StatusBitsUpgrade ModuleTag_ProductionLegality21
		TriggeredBy			= Upgrade_GandalfWhite
	End
	End



End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Haradrim Archer
;Reference: HaradrimArcherRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Weapon HaradrimBow ; BALANCE Archer Weapon ;orc archer
  AttackRange 			= MORDOR_HARADRIM_BOW_RANGE
  
  	RangeBonusMinHeight	= 10
	RangeBonus		= 1
	RangeBonusPerFoot	= #MULTIPLY( MORDOR_HARADRIM_BOW_RANGE .01 )   
  
  LeechRangeWeapon      = Yes
  WeaponSpeed 			= 401         ; dist/sec 
  MinWeaponSpeed 		= 121
  MaxWeaponSpeed 		= 601      ; dist/sec Upper limit on scaling, when attacking past nominal "max" range
  FireFX 				= FX_RohanArcherBowWeapon  
  ScaleWeaponSpeed	 	= Yes ; Used for lob weapons, scales speed proportional to range
  HitPercentage     	= 100     ;When this weapon is used it will hit exactly 50% of the time.
  ScatterRadius     	= 40.0     ;When this weapon misses it can randomly miss by as much as this distance.
  DelayBetweenShots 	= 800  ;MORDOR_HARADRIM_BOW_DELAYBETWEENSHOTS
  PreAttackDelay        = 1000  ;MORDOR_HARADRIM_BOW_PREATTACKDELAY
  PreAttackRandomAmount     = 50 
  PreAttackType         = PER_SHOT ; Do the delay each time we attack a new target
  FiringDuration      	= 700  ;MORDOR_HARADRIM_BOW_FIRINGDURATION    ; Duration of the archer firing shot is 500ms.
  AntiAirborneVehicle	= Yes
  AntiAirborneMonster	= Yes
  CanBeDodged				= Yes

  ProjectileNugget                    ; Default arrow
    ProjectileTemplateName    = EvilFactionArrow
    WarheadTemplateName       = HaradrimBowWarhead
    ForbiddenUpgradeNames	  = Upgrade_MordorFireArrows
  End
  ProjectileNugget	; Fire arrow available through fire upgrade
    ProjectileTemplateName  = EvilFactionFireArrow
	WarheadTemplateName     = HaradrimBowFireWarhead
	RequiredUpgradeNames    = Upgrade_MordorFireArrows
  End

End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Weapon HaradrimBowBombard ; BALANCE Archer Weapon ;orc archer
	AttackRange 			= MORDOR_HARADRIM_BOW_BOMBARD_MAXRANGE
	MinimumAttackRange	= #SUBTRACT( MORDOR_HARADRIM_BOW_BOMBARD_MINRANGE 75 )

	RangeBonusMinHeight	= 10
	RangeBonus		= 1
	RangeBonusPerFoot	= #MULTIPLY( MORDOR_HARADRIM_BOW_BOMBARD_MAXRANGE .01 )  
  
	LeechRangeWeapon      = Yes
	WeaponSpeed 			= 401         ; dist/sec 
	MinWeaponSpeed 		= 121
	MaxWeaponSpeed 		= 601      ; dist/sec Upper limit on scaling, when attacking past nominal "max" range
	FireFX 				= FX_RohanArcherBowWeapon  
	ScaleWeaponSpeed	 	= Yes ; Used for lob weapons, scales speed proportional to range
	HitPercentage     	= 0     ;Always scatter
	ScatterRadius     	= ARCHER_BOMBARD_SCATTER_RADIUS     ;When this weapon misses it can randomly miss by as much as this distance.
	DelayBetweenShots 	= 800  ;MORDOR_HARADRIM_BOW_DELAYBETWEENSHOTS
	PreAttackDelay        = 1000 ;MORDOR_HARADRIM_BOW_PREATTACKDELAY
	PreAttackRandomAmount     = 200 
	PreAttackType         = PER_SHOT ; Do the delay each time we attack a new target
	FiringDuration      	= 700  ;MORDOR_HARADRIM_BOW_FIRINGDURATION    ; Duration of the archer firing shot is 500ms.
	AntiAirborneVehicle	= Yes
	AntiAirborneMonster	= Yes
	CanBeDodged			= Yes
	NoVictimNeeded		= Yes
	BombardType			= Yes

	ProjectileNugget                    ; Default arrow
		ProjectileTemplateName    = EvilFactionArrowBombard
		WarheadTemplateName       = HaradrimBowBombardWarhead
		ForbiddenUpgradeNames	  = Upgrade_MordorFireArrows
	End
	ProjectileNugget	; Fire arrow available through fire upgrade
		ProjectileTemplateName  = EvilFactionFireArrowBombard
		WarheadTemplateName     = HaradrimBowBombardFireWarhead
		RequiredUpgradeNames    = Upgrade_MordorFireArrows
	End

End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<


Object MordorHaradrimArcher


	Scale = 1.1

	ButtonImage = WOR_HaradrimArcher

	SelectPortrait         = UPMordor_Haradrim



	WeaponSet
		Conditions = None 
		Weapon = PRIMARY    HaradrimBow
		Weapon = TERTIARY   HaradrimBowBombard
		Weapon = QUINARY	HaradrimBarbedArrow
		AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
		AutoChooseSources = TERTIARY FROM_PLAYER FROM_SCRIPT				; Not AI.
		AutoChooseSources = QUINARY FROM_PLAYER FROM_SCRIPT				; Not AI.
	End
	  

	WeaponSet
		Conditions = CLOSE_RANGE CONTESTING_BUILDING
		Weapon = PRIMARY    HaradrimBow
		Weapon = SECONDARY   MordorArcherBowMelee  
		Weapon = TERTIARY   HaradrimBowBombard
		Weapon = QUINARY	HaradrimBarbedArrow
 		OnlyAgainst = PRIMARY STRUCTURE
		AutoChooseSources = TERTIARY FROM_PLAYER FROM_SCRIPT				; Not AI.
		AutoChooseSources = QUINARY	FROM_PLAYER FROM_SCRIPT				; Not AI.
	End


	ArmorSet
		Conditions      = None
		Armor           = ArcherHeavyArmor
		DamageFX        = NormalDamageFX
	End

	AddModule	
	Behavior = ExperienceLevelCreate ModuleTag_MPLevelBonus1
		LevelToGrant = 2
		;MPOnly = Yes
	End
	End

	AddModule
	Behavior = GrantUpgradeCreate ModuleTag_1
		UpgradeToGrant = Upgrade_GandalfWhite  ;
		UpgradeToGrant = Upgrade_MordorFireArrows
	End 
	End

	ReplaceModule ModuleTag_FireArrowParticlesAndLegalityUpgrade
	Behavior = WeaponSetUpgrade ModuleTag_FireArrowParticlesAndLegalityUpgrade1
		TriggeredBy		= Upgrade_MordorFireArrows
	End
	End
	
	ReplaceModule ModuleTag_ArmorUpgrade
	Behavior = ArmorUpgrade ModuleTag_ArmorUpgrade1
		TriggeredBy = Upgrade_GandalfWhite
		ArmorSetFlag			= PLAYER_UPGRADE
	End
	End

	ReplaceModule ModuleTag_FireArrowSwapUpgrade
	Behavior = SubObjectsUpgrade ModuleTag_FireArrowSwapUpgrade1
		TriggeredBy		= Upgrade_MordorFireArrows
		ShowSubObjects	= ArrowNock FireArowTip
	End
	End
	
	ReplaceModule ModuleTag_HeavyArmorUpgrade
	Behavior = SubObjectsUpgrade ModuleTag_HeavyArmorUpgrade1
		TriggeredBy = Upgrade_GandalfWhite
		UpgradeTexture	= MUHaradim.tga 0 MUHaradim_HA.tga
		UpgradeTexture	= MUHaradim_M.tga 0 MUHaradim_M_HA.tga
		RecolorHouse	= Yes
		ExcludeSubobjects = FireArowTip
	End
	End


End


;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Mordor Haradrim Lancers
;Reference: MordorHaradrimLancersRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<


Object DwarvenMenOfDale

	ButtonImage = WOR_HaradrimArcher
	SelectPortrait         = UPMordor_Haradrim

  ReplaceModule ModuleTag_01
  Draw = W3DHordeModelDraw ModuleTag_011


	OkToChangeModelColor = Yes
		
	StaticModelLODMode = Yes
	;specify options for static LODs
	LodOptions	= LOW
		AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_LOW
		MaxRandomTextures		=	MAX_RANDOM_TEXTURES_LOW
		MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_LOW
		MaxAnimFrameDelta		=	MAX_ANIM_FRAME_DELTA_LOW
	End
	
	LodOptions	= MEDIUM
		AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_MED
		MaxRandomTextures		=	MAX_RANDOM_TEXTURES_MED
		MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_MED
		MaxAnimFrameDelta		=	MAX_ANIM_FRAME_DELTA_MED
	End
	
	LodOptions	= HIGH
		AllowMultipleModels		=	ALLOW_MULTIPLE_MODELS_HIGH
		MaxRandomTextures		=	MAX_RANDOM_TEXTURES_HIGH
		MaxRandomAnimations		=	MAX_RANDOM_ANIMATIONS_HIGH
		MaxAnimFrameDelta		=	MAX_ANIM_FRAME_DELTA_HIGH
	End
	

    DefaultModelConditionState
      Model = MUHaraLnc_SKN
      WeaponLaunchBone = PRIMARY LANCEBONE
    End

	IdleAnimationState
		StateName				=	Idle
		Animation = IDLC
			AnimationName = MUHaraLnc_SKL.MUHaraLnc_IDLC
			AnimationMode = ONCE
			AnimationPriority = 25
			AnimationBlendTime	=	15
		End
		
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "STATE_Selected"  then CurDrawableSetTransitionAnimState("TRANS_Selected_to_Idle") return end
			if Prev == "STATE_Emotion"; or Prev == "CloseRange" or Prev == "FarRange"
			then
				CurDrawableAllowToContinue();
			end
			CurDrawableSetTransitionAnimState("TRANS_Selected_NoHitch")		
		EndScript
		StateName = Idle
	End
 
	;-- CONTAINED ANIMATIONS
	ModelConditionState = WEAPONSTATE_CONTAINED
		Model = MUHaradim_SKN
		WeaponLaunchBone = PRIMARY ARRROW
	End

	AnimationState					=	FIRING_OR_PREATTACK_A AIM_HIGH WEAPONSTATE_CONTAINED
		Animation					=	ATKB
			AnimationName			=	MUHaradim_SKL.MUHaradim_ATKC 
			AnimationMode			=	ONCE
			UseWeaponTiming			=	Yes
		End
	End

	AnimationState					=	FIRING_OR_PREATTACK_A AIM_LOW WEAPONSTATE_CONTAINED
		Animation					=	ATKC
			AnimationName			=	MUHaradim_SKL.MUHaradim_ATKB 
			AnimationMode			=	ONCE
			UseWeaponTiming			=	Yes
		End
	End
	
	AnimationState = FIRING_OR_PREATTACK_A WEAPONSTATE_CONTAINED
 		Animation = Attacking
			AnimationName = MUHaradim_SKL.MUHaradim_ATKA
			AnimationMode = ONCE
			UseWeaponTiming		= Yes
		End
		FrameForPristineBonePositions = 64
	End

	AnimationState = AFLAME WEAPONSTATE_CONTAINED
		Animation = Flaming_Death
			AnimationName = MUHaradim_SKL.MUHaradim_FLLA
			AnimationMode = LOOP
		End
		ParticleSysBone     = BAT_HEAD FireBuildingLargeSmoke FollowBone:yes
		ParticleSysBone     = BAT_HEAD FireSmall FollowBone:yes
		ParticleSysBone     = BAT_SPINE1 FireBuildingLargeSmoke FollowBone:yes
		ParticleSysBone     = BAT_SPINE1 FireSmall FollowBone:yes
		ParticleSysBone     = BAT_SPINE2 FireBuildingLargeSmoke FollowBone:yes
		ParticleSysBone     = BAT_SPINE2 FireSmall FollowBone:yes
	End

	AnimationState = WEAPONSTATE_CONTAINED
		Animation = IDLA
			AnimationName = MUHaradim_SKL.MUHaradim_IDLA
			AnimationMode = ONCE
	    	AnimationBlendTime = 10
			AnimationPriority = 25
		End
		Animation = IDLB
			AnimationName = MUHaradim_SKL.MUHaradim_IDLB
			AnimationMode = ONCE
	    	AnimationBlendTime = 10
		End
		Animation = IDLC
			AnimationName = MUHaradim_SKL.MUHaradim_IDLC
			AnimationMode = ONCE
	    	AnimationBlendTime = 10
		End
		Flags =	RESTART_ANIM_WHEN_COMPLETE	
		StateName = Idle
		BeginScript
			CurDrawableShowSubObject("arrrow")
		EndScript
	End

	;-- ON THE GROUND ANIMATIONS
	
	AnimationState = THROWN_PROJECTILE
			Animation = Thrown
	      AnimationName = MUHaraLnc_SKL.MUHaraLnc_FLYA
		    AnimationMode = LOOP
			End
    End
	
	AnimationState				= PASSENGER FREEFALL
		Animation				= Wiggling
			AnimationName		= MUHaraLnc_SKL.MUHaraLnc_FLLA
		    AnimationMode		= LOOP
		End
		EnteringStateFX			= FX_ThrownRockPickUp
	 End
	 
	 AnimationState						= FREEFALL
		Animation						= Falling
			AnimationName				= MUHaraLnc_SKL.MUHaraLnc_FLYA
			AnimationMode				= LOOP
			AnimationBlendTime			= 10
			AnimationSpeedFactorRange	= 0.4	0.4
		End
	End
	
	; --- stunned anims
    AnimationState				= STUNNED_FLAILING
		Animation				= Flying
			AnimationName		= MUHaraLnc_SKL.MUHaraLnc_FLYA
			AnimationMode		= LOOP
		End
    End
	
	AnimationState = DYING SPLATTED
 		Animation = Splattered_On_Ground
			AnimationName = MUHaraLnc_SKL.MUHaraLnc_LNDA
			AnimationMode = ONCE
		End
		EnteringStateFX = FX_HaradrimHitGround
    End
	
	AnimationState			= DYING STUNNED_FLAILING
 		Animation			= Flying
			AnimationName	= MUHaraLnc_SKL.MUHaraLnc_FLYA
			AnimationMode	= LOOP
		End
    End  

    AnimationState = DYING AFLAME
		Animation = Flaming_Death
			AnimationName = MUHaraLnc_SKL.MUHaraLnc_DIEA
			AnimationMode = ONCE
		End
		ParticleSysBone     = BAT_HEAD FireBuildingLargeSmoke FollowBone:yes
		ParticleSysBone     = BAT_HEAD FireSmall FollowBone:yes
		ParticleSysBone     = BAT_SPINE1 FireBuildingLargeSmoke FollowBone:yes
		ParticleSysBone     = BAT_SPINE1 FireSmall FollowBone:yes
		ParticleSysBone     = BAT_SPINE2 FireBuildingLargeSmoke FollowBone:yes
		ParticleSysBone     = BAT_SPINE2 FireSmall FollowBone:yes
    End

    AnimationState = AFLAME
		Animation = Flaming_Death
			AnimationName = MUHaraLnc_SKL.MUHaraLnc_FLLA
			AnimationMode = LOOP
		End
		ParticleSysBone     = BAT_HEAD FireBuildingLargeSmoke FollowBone:yes
		ParticleSysBone     = BAT_HEAD FireSmall FollowBone:yes
		ParticleSysBone     = BAT_SPINE1 FireBuildingLargeSmoke FollowBone:yes
		ParticleSysBone     = BAT_SPINE1 FireSmall FollowBone:yes
		ParticleSysBone     = BAT_SPINE2 FireBuildingLargeSmoke FollowBone:yes
		ParticleSysBone     = BAT_SPINE2 FireSmall FollowBone:yes
    End

    AnimationState = DYING
		StateName			= STATE_Dying
		Animation = dead
			AnimationName = MUHaraLnc_SKL.MUHaraLnc_DIEA
			AnimationMode = MANUAL
		End
		Animation = dead_landed
			AnimationName = MUHaraLnc_SKL.MUHaraLnc_LNDA
			AnimationMode = MANUAL
		End
		Flags = START_FRAME_LAST
		BeginScript
			CurDrawableShowSubObject("LANCE")
			Prev = CurDrawablePrevAnimation()
			if Prev == "DyingTrans"
			then
				return "dead"
			elseif Prev == "Flying"
			then
				CurDrawableSetTransitionAnimState("DIE_LAND")
			elseif Prev == "Die_Land"
			then
				return "dead_landed"
			end
			
			CurDrawableSetTransitionAnimState("DIE_TRANSITION")
			
		EndScript
    End
    
    TransitionState = DIE_TRANSITION
   		Animation = DyingTrans
			AnimationName = MUHaraLnc_SKL.MUHaraLnc_DIEA
			AnimationMode = ONCE
		End
	End
	
	TransitionState = DIE_LAND
   		Animation = Die_Land
			AnimationName = MUHaraLnc_SKL.MUHaraLnc_LNDA
			AnimationMode = ONCE
		End
	End

	 
    
    
	AnimationState				= MOVING CLIMBING
		Animation				= Climbing
			AnimationName		= MUHaraLnc_SKL.MUHaraLnc_CLMA
			AnimationMode		= LOOP
		End
    End
    
    AnimationState				= MOVING DAMAGED AFLAME
		ShareAnimation			= Yes
		Animation				= Moving_Damaged
			AnimationName		= MUHaraLnc_SKL.MUHaraLnc_RUNA
		    AnimationMode		= LOOP
		End
		ParticleSysBone			= BAT_HEAD FireBuildingLargeSmoke FollowBone:yes
		ParticleSysBone			= BAT_HEAD FireSmall FollowBone:yes
		ParticleSysBone			= BAT_SPINE1 FireBuildingLargeSmoke FollowBone:yes
		ParticleSysBone			= BAT_SPINE1 FireSmall FollowBone:yes
		ParticleSysBone			= BAT_SPINE2 FireBuildingLargeSmoke FollowBone:yes
		ParticleSysBone			= BAT_SPINE2 FireSmall FollowBone:yes
    End

    AnimationState				= MOVING AFLAME
		ShareAnimation			= Yes
		Animation				= Moving
			AnimationName		= MUHaraLnc_SKL.MUHaraLnc_RUNA
			AnimationMode		= LOOP
		End
		ParticleSysBone			= BAT_HEAD FireBuildingLargeSmoke FollowBone:yes
		ParticleSysBone			= BAT_HEAD FireSmall FollowBone:yes
		ParticleSysBone			= BAT_SPINE1 FireBuildingLargeSmoke FollowBone:yes
		ParticleSysBone			= BAT_SPINE1 FireSmall FollowBone:yes
		ParticleSysBone			= BAT_SPINE2 FireBuildingLargeSmoke FollowBone:yes
		ParticleSysBone			= BAT_SPINE2 FireSmall FollowBone:yes
    End
    
    AnimationState				= MOVING PANICKING
		ShareAnimation			= Yes
		Animation				= RUNM
			AnimationName		= MUHaraLnc_SKL.MUHaraLnc_MFDA
			AnimationMode		= LOOP
		End
	End
		
	AnimationState				= MOVING BACKING_UP
		ShareAnimation			= Yes
		Animation				= BackingUp
			AnimationName		= MUHaraLnc_SKL.MUHaraLnc_BAKA
			AnimationMode		= LOOP
		End
	End
	
	AnimationState				= MOVING EMOTION_TERROR
		ShareAnimation			= Yes
		Animation				= Moving
		    AnimationName		= MUHaraLnc_SKL.MUHaraLnc_RUNA
			AnimationMode		= LOOP
		End
		ParticleSysBone			= None InfantryDustTrails
    End

    AnimationState				= MOVING
		ShareAnimation			= Yes
		Animation				= Moving
		    AnimationName		= MUHaraLnc_SKL.MUHaraLnc_RUNA
			AnimationMode		= LOOP
			AnimationSpeedFactorRange = 0.8 1.2
		End
		ParticleSysBone			= None InfantryDustTrails
    End
    
    AnimationState				= PASSENGER
		Animation				= Wiggling
			AnimationName		= MUHaraLnc_SKL.MUHaraLnc_FLLA
		    AnimationMode		= LOOP
		End
		EnteringStateFX			= FX_ThrownRockPickUp
	 End

    AnimationState				= TRANSPORT_MOVING
		Animation				= wobbling_on_transport
			AnimationName		= MUHaraLnc_SKL.MUHaraLnc_IDLC
		    AnimationMode		= LOOP
		End
    End
  
 
    
    AnimationState				= STUNNED_STANDING_UP
 		Animation				= Standing_Back_Up
			AnimationName		= MUHaraLnc_SKL.MUHaraLnc_GTPA
			AnimationMode		= ONCE
			AnimationSpeedFactorRange = 1.5 1.5
		End
    End
    
    AnimationState				= STUNNED
 		Animation				= Splattered_On_Ground
			AnimationName		= MUHaraLnc_SKL.MUHaraLnc_LNDA
			AnimationMode		= ONCE
		End
		EnteringStateFX = FX_HaradrimHitGround
    End

    
    
        AnimationState							= RELOADING_A
		StateName							= STATE_Ready
		Animation							= ALERT
			AnimationName					= MUHaraLnc_SKL.MUHaraLnc_IDLA
			AnimationMode					= LOOP
			AnimationBlendTime				= 0
		End
		BeginScript
			CurDrawableAllowToContinue()
		EndScript
	End
	
	AnimationState = FIRING_OR_PREATTACK_A WEAPONSTATE_CLOSE_RANGE
		Animation = CloseAttack
			AnimationName			= MUHaraLnc_SKL.MUHaraLnc_ATKA
			AnimationMode			= ONCE
			UseWeaponTiming			= Yes
		End
		;Animation = BIG_BLEND_B
		;	AnimationName			= MUHaraLnc_SKL.MUHaraLnc_ATKA
		;	AnimationMode			= ONCE
		;	UseWeaponTiming			= Yes
		;	AnimationBlendTime		= 20
		;End
	End
 
	AnimationState = FIRING_OR_PREATTACK_B
		StateName = CloseRange
		Animation = CloseAttack
			AnimationName			= MUHaraLnc_SKL.MUHaraLnc_ATKA
			AnimationMode			= ONCE
			UseWeaponTiming			= Yes
		End
		Animation = BIG_BLEND_B
			AnimationName			= MUHaraLnc_SKL.MUHaraLnc_ATKA
			AnimationMode			= ONCE
			UseWeaponTiming			= Yes
			AnimationBlendTime		= 20
		End
		
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "FarRange"
			then
				return "BIG_BLEND_B"
			else
				return "CloseAttack"
			end
		EndScript
	End
 
	AnimationState = FIRING_OR_PREATTACK_A
		StateName = FarRange
		Animation = FarAttack
			AnimationName = MUHaraLnc_SKL.MUHaraLnc_ATKB
			AnimationMode = ONCE
		End
		Animation = BIG_BLEND_A
			AnimationName = MUHaraLnc_SKL.MUHaraLnc_ATKB
			AnimationMode = ONCE
			AnimationBlendTime = 20
		End
		FrameForPristineBonePositions = 44
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "CloseRange"
			then
				return "BIG_BLEND_A"
			else
				return "FarAttack"
			end
		EndScript
	End    
    
;    AnimationState							= ATTACKING
;		StateName							= STATE_Ready
;		Animation							= ALERT
;			AnimationName					= MUHaraLnc_SKL.MUHaraLnc_IDLA
;			AnimationMode					= LOOP
;			AnimationBlendTime				= 0
;		End
;	End
    
    
    
    ; --- emotion animations --- ;
		
	AnimationState = WAR_CHANT
		Animation				= Chant
			AnimationName		= MUHaraLnc_SKL.MUHaraLnc_TNTA
			AnimationMode		= ONCE
		End
		Animation				= A
			AnimationName		= MUHaraLnc_SKL.MUHaraLnc_TNTA
			AnimationMode		= ONCE
		End
		Flags					= RESTART_ANIM_WHEN_COMPLETE
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "STATE_Emotion"
			then
				CurDrawableAllowToContinue();
			end
		EndScript
	End
	
	AnimationState							= EMOTION_UNCONTROLLABLY_AFRAID
		ShareAnimation						= Yes
		StateName							= STATE_Emotion
		Animation							= FERA
			AnimationName					= MUHaraLnc_SKL.MUHaraLnc_FERA
			AnimationMode					= ONCE
		End
		Animation							= A
			AnimationName					= MUHaraLnc_SKL.MUHaraLnc_FERA
			AnimationMode					= ONCE
		End
		Flags								= RESTART_ANIM_WHEN_COMPLETE
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "STATE_Emotion"
			then
				CurDrawableAllowToContinue();
			end
		EndScript
	End		
	
	AnimationState = ATTACKING
		Animation = IdleAllAttacksComeFrom
			AnimationName = MUHaraLnc_SKL.MUHaraLnc_IDLA
			AnimationMode = LOOP
		End
	End
    
	AnimationState							= EMOTION_AFRAID
		ShareAnimation						= Yes
		StateName							= STATE_Emotion
		Animation							= FERA
			AnimationName					= MUHaraLnc_SKL.MUHaraLnc_FERA
			AnimationMode					= ONCE
		End
		Animation							= A
			AnimationName					= MUHaraLnc_SKL.MUHaraLnc_FERA
			AnimationMode					= ONCE
		End
		Flags								= RESTART_ANIM_WHEN_COMPLETE
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "STATE_Emotion"
			then
				CurDrawableAllowToContinue();
			end
		EndScript
	End		
	
	AnimationState							= EMOTION_TAUNTING
		StateName							= STATE_Emotion
		Animation							= TNTA
			AnimationName					= MUHaraLnc_SKL.MUHaraLnc_TNTA
			AnimationMode					= ONCE
		End
		Animation							= A
			AnimationName					= MUHaraLnc_SKL.MUHaraLnc_TNTA
			AnimationMode					= ONCE
		End
		Flags								= RESTART_ANIM_WHEN_COMPLETE
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "STATE_Emotion"
			then
				CurDrawableAllowToContinue();
			end
		EndScript
	End
	
	AnimationState							= EMOTION_POINTING
		StateName							= STATE_Emotion
		Animation							= Pointing1
			AnimationName					= MUHaraLnc_SKL.MUHaraLnc_PNTA
			AnimationMode					= ONCE
		End
		Animation							= A
			AnimationName					= MUHaraLnc_SKL.MUHaraLnc_PNTA
			AnimationMode					= ONCE
		End
		Flags								= RESTART_ANIM_WHEN_COMPLETE
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "STATE_Emotion"
			then
				CurDrawableAllowToContinue();
			end
		EndScript
	End
	
	AnimationState							= EMOTION_CELEBRATING
		StateName							= STATE_Emotion
		Animation							= CHRA
			AnimationName					= MUHaraLnc_SKL.MUHaraLnc_CHRA
			AnimationMode					= ONCE
			AnimationPriority				= 10
		End
		Animation							= CHRB
			AnimationName					= MUHaraLnc_SKL.MUHaraLnc_CHRA
			AnimationMode					= ONCE
			AnimationPriority				= 10
		End
		Flags								= RESTART_ANIM_WHEN_COMPLETE	
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "STATE_Emotion"
			then
				CurDrawableAllowToContinue();
			end
		EndScript
	End
	
	AnimationState							= EMOTION_ALERT
		StateName							= STATE_Emotion
		Animation							= ALERT
			AnimationName					= MUHaraLnc_SKL.MUHaraLnc_IDLA
			AnimationMode					= ONCE
		End
		Animation							= A
			AnimationName					= MUHaraLnc_SKL.MUHaraLnc_IDLA
			AnimationMode					= ONCE
		End
		Flags								= RESTART_ANIM_WHEN_COMPLETE
		BeginScript
			Prev = CurDrawablePrevAnimationState()			
			if Prev == "STATE_Emotion"
			then
				CurDrawableAllowToContinue();
			end		
		EndScript
	End
	
	    ; --- hit reactions
    AnimationState = HIT_REACTION HIT_LEVEL_1
		Animation = GotHit
			AnimationName = MUHaraLnc_SKL.MUHaraLnc_HITA
			AnimationMode = ONCE
		End
    End    

			
	AnimationState							= SELECTED
		StateName							= STATE_Selected
		SimilarRestart						= Yes
		Animation							= AtAttention
			AnimationName					= MUHaraLnc_SKL.MUHaraLnc_ATNB
			AnimationMode					= LOOP
		End
		Animation							= BIG_BLEND_Selected
			AnimationName					= MUHaraLnc_SKL.MUHaraLnc_ATNB
			AnimationMode					= LOOP
			AnimationBlendTime				= 20
		End
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			CurDrawableShowSubObject("LANCE")
			if Prev == "Idle"  then CurDrawableSetTransitionAnimState("TRANS_Idle_to_Selected") return end
			if Prev == "STATE_Emotion"; or Prev == "CloseRange" or Prev == "FarRange"
			then
				CurDrawableAllowToContinue();
			end
			if Prev == "GotHit"
			then
				return "BIG_BLEND_Selected"
			end
			return "AtAttention"
		EndScript
	End
	
		TransitionState					=	TRANS_Idle_to_Selected
			Animation					=	ATNA
				AnimationName			=	MUHaraLnc_SKL.MUHaraLnc_ATNA
				AnimationMode			=	ONCE
			End
		End
		
		TransitionState					=	TRANS_Selected_to_Idle
			Animation					=	ATNA
				AnimationName			=	MUHaraLnc_SKL.MUHaraLnc_ATNC
				AnimationMode			=	ONCE
			End
		End
	
	
  End
  End



  ; ***DESIGN parameters ***
  Side = Mordor
  EditorSorting = UNIT
	ThreatLevel = 1.0
  TransportSlotCount = TRANSPORTSLOTCOUNT_UNIT
  CommandPoints = 2
  
  WeaponSet
   Conditions = None 
    Weapon = PRIMARY MordorLanceThrown
  End
  WeaponSet
    Conditions = CLOSE_RANGE
    Weapon = PRIMARY MordorLance
  End
  WeaponSet
    Conditions = CONTAINED
    Weapon = PRIMARY HaradrimBow
  End
  ;WeaponSet
  ;  Conditions = CLOSE_RANGE
  ;  Weapon = PRIMARY MordorLanceThrown
  ;  Weapon = SECONDARY MordorLance
  ;  OnlyAgainst = PRIMARY STRUCTURE
  ;End
  
  ArmorSet
    Conditions      = None
    Armor           = HaradrimArmor
    DamageFX        = NormalDamageFX
  End

  ShroudClearingRange = SHROUD_CLEAR_STANDARD
  VisionRange = MORDOR_HARADRIM_VISION_RANGE

  BountyValue = MORDOR_HARADRIM_BOUNTY_VALUE
  DisplayName = OBJECT:MordorHaradrimLancer
  CrushableLevel = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CrusherLevel = 0 ;What can I crush?: 0 = small animals, 1 = infantry, 2 = trees, 3 = vehicles
 	CrushRevengeWeapon = RangedInfantryCrushRevenge

  CommandSet = MordorHaradrimLancerCommandSet


  ; *** AUDIO Parameters ***;

	VoiceAttack				= HaradrimVoiceAttack
	VoiceAttackAir				= HaradrimVoiceAttack
	VoiceAttackCharge			= HaradrimVoiceAttackCharge
	VoiceAttackMachine			= HaradrimVoiceAttack
	VoiceAttackStructure			= HaradrimVoiceAttackBuilding
	VoiceCreated				= CampOrcCreateHaradrim
	VoiceFullyCreated 			= CampOrcCreateHaradrim
	VoiceGuard				= HaradrimVoiceMove
	VoiceMove				= HaradrimVoiceMove
	VoiceMoveToCamp				= HaradrimVoiceMoveCamp
	VoicePriority				= 34
	VoiceRetreatToCastle			= HaradrimVoiceRetreat
	VoiceSelect				= HaradrimVoiceSelectMS
	VoiceSelectBattle 			= HaradrimVoiceSelectBattle
	VoiceMoveToHigherGround					= HaradrimVoiceMove
	VoiceMoveWhileAttacking					= HaradrimVoiceMove

	MinZIncreaseForVoiceMoveToHigherGround	= 45

	VoiceEnterStateAttack			= HaradrimVoiceEnterStateAttack
	VoiceEnterStateAttackCharge		= HaradrimVoiceEnterStateAttackCharge
	VoiceEnterStateAttackMachine		= HaradrimVoiceEnterStateAttackBuilding
	VoiceEnterStateAttackStructure		= HaradrimVoiceEnterStateAttackBuilding
	VoiceEnterStateMove			= HaradrimVoiceEnterStateMove
	VoiceEnterStateMoveToCamp		= HaradrimVoiceEnterStateMoveCamp
	VoiceEnterStateRetreatToCastle		= HaradrimVoiceEnterStateRetreat
	VoiceEnterStateMoveToHigherGround		= HaradrimVoiceMove
	VoiceEnterStateMoveWhileAttacking		= HaradrimVoiceMove
	
	UnitSpecificSounds
		VoiceEnter				= HaradrimVoiceGarrison
		VoiceEnterHostile			= HaradrimVoiceGarrison
		VoiceGarrison			= HaradrimVoiceGarrison			
		VoiceEnterUnitMordorMumakil	= HaradrimVoiceGarrisonMumakil		
	End

	EvaEventDieOwner = None		;Eva event to trigger on unit's death. NOTICE THAT this is only for permanent deaths
							;For deaths you can respawn from, use the DeathFX

			CrowdResponseKey = EvilMen1

	ReplaceModule ModuleTag_AnimAudioBehavior
	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior1
      	MaxUpdateRangeCap = 800
			AnimationSound = Sound:BodyFallSoldier 		Animation:MUHaraLnc_SKL.MUHaraLnc_LNDA 	Frames:3
			AnimationSound = Sound:BodyFallGeneric1 		Animation:MUHaraLnc_SKL.MUHaraLnc_DIEA 	Frames:47
	End
	End


  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER CAN_USE_SIEGE_TOWER SCORE GRAB_AND_DROP ATTACK_NEEDS_LINE_OF_SIGHT ;THROWN_OBJECT


  ReplaceModule ModuleTag_02
  Body = ActiveBody ModuleTag_porcupineFormation
    CheerRadius       = EMOTION_CHEER_RADIUS
    MaxHealth         = 800
    MaxHealthDamaged  = MORDOR_HARADRIM_HEALTH_DAMAGED
    ;RecoveryTime      = MORDOR_HARADRIM_HEALTH_RECOVERY_TIME
  End
  End
 	AddModule
	Behavior = DeflectSpecialPower ModuleTag_02b
		SpecialPowerTemplate = SpecialAbilityDeflectProjectiles
	End
	End

	AddModule
	Behavior = StancesBehavior ModuleTag_StancesBehavior
		StanceTemplate = FighterHorde
	End
	End

  ReplaceModule ModuleTag_03
  Behavior = AIUpdateInterface ModuleTag_031
    AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
	StopChaseDistance = 674
    CanAttackWhileContained = Yes
    AttackPriority				= 	AttackPriority_Archer
  End
  End

	ReplaceModule HitReactionBehaviorModuleTag
	Behavior = HitReactionBehavior HitReactionBehaviorModuleTag1
		HitReactionLifeTimer1 = 1500	; level 1 (light  damage)  hit reaction animations in frames (5 per sec)
		HitReactionLifeTimer2 = 1500	; level 2 (medium damage)  hit reaction animations in frames (5 per sec)
		HitReactionLifeTimer3 = 1500	; level 3 (heavy  damage)  hit reaction animations in frames (5 per sec)

		HitReactionThreshold1 = 0.0		; level 1 (light  damage) threshold trigger
		HitReactionThreshold2 = 9999.0	; level 2 (medium damage) threshold trigger
		HitReactionThreshold3 = 9999.0	; level 3 (heavy  damage) threshold trigger
	End
	End
	

	LocomotorSet
		Locomotor = HumanLocomotor
		Condition = SET_NORMAL
		Speed     = NORMAL_EVIL_INFANTRY_MEMBER_SPEED	
	End

	LocomotorSet
		Locomotor = HumanWanderLocomotor
		Condition = SET_WANDER 
		Speed     = NORMAL_GOOD_INFANTRY_MEMBER_SPEED	
	End

	LocomotorSet
		Locomotor = BurningDeathLocomotorInfantry
		Condition = SET_BURNINGDEATH
		Speed	  = BURNINGDEATH_WANDERSPEED_INFANTRY
	End

  AddModule
  Behavior = DualWeaponBehavior ModuleTag_13
  		SwitchWeaponOnCloseRangeDistance = MORDOR_HARADRIM_LANCER_SWITCH_RANGE
  End
  End

  ReplaceModule ModuleTag_04
  Behavior = PhysicsBehavior ModuleTag_041
    GravityMult = 1.0
  End
  End

  ReplaceModule  ModuleTag_05
  Behavior = SlowDeathBehavior ModuleTag_051
	DeathTypes = ALL -KNOCKBACK
	SinkDelay = 5000
	SinkRate = 1.0     ; in Dist/Sec
	DestructionDelay = 17000
	Sound = INITIAL HaradrimVoiceDie		;CivMaleDie
  End
  End


 


  ; Tie into LargeGroupAudio system
  ReplaceModule ModuleTag_LGAU
  Behavior = LargeGroupAudioUpdate ModuleTag_LGAU1
	Key = Haradrim_Lancer
  End
  End
  
	AddModule
	Behavior = FireWeaponWhenDeadBehavior FireDeadTag
		DeathTypes	= NONE +CRUSHED
		StartsActive	= Yes
		DelayTime		= 0
		DeathWeapon		= HaradrimCrushedWeapon
		WeaponOffset	= X:0 Y:0 Z:0	
	End
	End	

  Geometry = CYLINDER
  GeometryMajorRadius = 9.0
  GeometryMinorRadius = 9.0
  GeometryHeight = 19.2
  GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 11;
  ShadowSizeY = 11;
  ShadowTexture = ShadowI;
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Mordor Haradrim Lancers Horde
;Reference: MordorHaradrimLancersHordeRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

CommandSet MordorHaradrimLancersCommandSet
	1 	= Command_ToggleStance
	;2 	= Command_PurchaseUpgradeDwarvenBasicTraining
	;3 	= Command_BlackArrows
	12 	= Command_CaptureBuilding
	13 	= Command_AttackMove
	14 	= Command_Stop
End

Weapon ShortRangedMissileHordeRangefinder1
	AttackRange			= 200 ; Slightly shorter than the archer's actual weapon
	DelayBetweenShots		= 50
	LeechRangeWeapon		= Yes
	AcceptableAimDelta		= 45
	AntiAirborneVehicle		= Yes
	AntiAirborneMonster		= Yes
	CanFireWhileMoving		= Yes		; When aboard a mumakil.
	HitPassengerPercentage	= 10%
	FinishAttackOnceStarted = No
	HordeAttackNugget
	End
End


Object DwarvenMenOfDaleHorde

	AddModule	
	Behavior = ExperienceLevelCreate ModuleTag_MPLevelBonus1
		LevelToGrant = 2
		;MPOnly = Yes
	End
	End

	BuildCost = 400
	BuildTime = 25

	DisplayName = HaradrimLancers

	CommandSet =  MordorHaradrimLancersCommandSet

;	WeaponSet
;		Conditions = None 
;		Weapon = PRIMARY    NormalMissileHordeRangefinder
;		Weapon = TERTIARY   NormalMissileHordeRangefinderBombard
;		AutoChooseSources = TERTIARY FROM_PLAYER FROM_SCRIPT				; Not AI.
;	End


	WeaponSet
		Conditions = None 
		Weapon = PRIMARY    ShortRangedMissileHordeRangefinder1
	End

	WeaponSet
		Conditions = CLOSE_RANGE; Haradrim switch weapon on contain, so we need to too. 
		Weapon = PRIMARY    NormalMeleeHordeRangefinder
	End
	
	WeaponSet
		Conditions = CONTAINED ; Haradrim switch weapon on contain, so we need to too. 
		Weapon = PRIMARY    HaradrimMountedHordeRangefinder
	End
	
	WeaponSet
		Conditions = CONTAINED CLOSE_RANGE; Haradrim switch weapon on contain, so we need to too. 
		Weapon = PRIMARY    HaradrimMountedHordeRangefinder
	End


	ReplaceModule ModuleTag_HordeContain
	Behavior = HordeContain ModuleTag_HordeContain1
		ObjectStatusOfContained = 
		InitialPayload = DwarvenMenOfDale 10
		Slots = 10
		PassengerFilter = NONE +INFANTRY
		ShowPips = No
		ThisFormationIsTheMainFormation = Yes	;Used to determine which armorset to use (and anything else we want!)
		MeleeBehavior = Amoeba
		End

		; Banner Carrier info		
		BannerCarriersAllowed	= MordorBannerOrc										; types of units that are allowed as banner carriers
		BannerCarrierPosition	= UnitType:MordorHaradrimArcher		Pos:X:40.0 Y:0.0		; (DEFAULT) position of banner carrier for archer horde
		
		; Positions for 5
		RandomOffset = X:0 Y:0
		
		RankInfo = RankNumber:1 UnitType:DwarvenMenOfDale Position:X:0 Y:0	Position:X:0 Y:25	Position:X:0 Y:-25	Position:X:0 Y:50	Position:X:0 Y:-50 
		RankInfo = RankNumber:2 UnitType:DwarvenMenOfDale Position:X:20 Y:0	Position:X:15 Y:25	Position:X:20 Y:-25	Position:X:20 Y:50	Position:X:20 Y:-50 

		RanksToReleaseWhenAttacking = 1 2 
				
		MeleeAttackLeashDistance = 1   //How far the hordes	can	move from the center of	the	horde when melee attacking.				  
		BackUpMinDelayTime		 = 1	//The minimum amount of	time to	delay before backing up
		BackUpMaxDelayTime		 = 3000	//The maximum amount of	time to	delay before backing up
		BackUpMinDistance		 = 1	//The minimum number of	cells to backup
		BackUpMaxDistance		 = 3	//The maximum number of	cells to backup
		BackupPercentage		 = 80%	//The amount of	chance that	a unit will	back up.
	End
	End


End







;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Varil
;Reference: VarilRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;FXs
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;FX Lists
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Timers
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

ModifierList VarilStrong
	Category = SPELL
	Modifier = ARMOR 50%			; Additive.  Sum of these are subtracted from all entries in Armor.ini	
	Modifier = DAMAGE_MULT 150%			; Multiplicitive.
	Duration = 0
End

SpecialPower SpecialAbilityFakeLeadership2
  Enum                = SPECIAL_FAKE_LEADERSHIP_BUTTON
  ReloadTime          = 1 ; in milliseconds
End

SpecialPower SpecialAbilityFakeLeadership3
  Enum                = SPECIAL_FAKE_LEADERSHIP_BUTTON
  ReloadTime          = 1 ; in milliseconds
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Weapons
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Weapon VarilSword
  LeechRangeWeapon      = Yes
  AttackRange           = 20
  MeleeWeapon           = Yes ; Melee means to square off next to opponent.  This is more of a ranged weapon with no projectile
  PreAttackDelay        = MORDOR_SOLDIERRHUN_PREATTACKDELAY             ; 867 is lance pierce delay time before contact with target.
  FiringDuration        = MORDOR_SOLDIERRHUN_FIRINGDURATION    ; Duration of the lance pierce attack
  DelayBetweenShots     = MORDOR_SOLDIERRHUN_DELAYBETWEENSHOTS            ; time between shots, msec
  PreAttackType         = PER_SHOT ; Do the delay each time we attack
  FireFX                = FX_GondorSwordHit
  
  AcceptableAimDelta	= 15.0 
  RequireFollowThru		= No

  DamageNugget                        ; A basic Nugget that just does damage
    Damage        			= 130
    Radius        			= 10.0
    DelayTime     			= 0
    DamageType    			= HERO
    DamageFXType  			= SWORD_SLASH
    DeathType     			= NORMAL
  End
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;XP
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<


ExperienceLevel	WildGoblinKingLevel5
	TargetNames					= WildGoblinKing
	RequiredExperience			= WILD_GOBLIN_KING_LVL5_EXP_NEEDED 
	ExperienceAward				= WILD_GOBLIN_KING_LVL5_EXP_AWARD	
	AttributeModifiers			= HeroLevelUpDamage4
	Rank						= 5
	Upgrades					= Upgrade_EomerOutlawLeader
	AttributeModifiers					= EomerPassiveOutlawLeadership
	LevelUpFx					= FX:GandalfLevelUp1FX
	SelectionDecal
		Texture					= decal_hero_evil
		Style					= SHADOW_ALPHA_DECAL
		OpacityMin				= 50%	
		OpacityMax				= 100%
		MinRadius				= 40
		MaxRadius				= 200
		MaxSelectedUnits		= 40
	End	
END	


ExperienceLevel	WildGoblinKingLevel10
	TargetNames					= WildGoblinKing
	RequiredExperience			= WILD_GOBLIN_KING_LVL10_EXP_NEEDED 
	ExperienceAward				= WILD_GOBLIN_KING_LVL10_EXP_AWARD	
	AttributeModifiers			= HeroLevelUpDamage9
	Rank						= 10
	LevelUpFx					= FX:GandalfLevelUp1FX
	
	Upgrades					= Upgrade_ObjectLevel10

	AttributeModifiers					= VarilStrong
	
	SelectionDecal
		Texture					= decal_hero_evil
		Style					= SHADOW_ALPHA_DECAL
		OpacityMin				= 50%	
		OpacityMax				= 100%
		MinRadius				= 40
		MaxRadius				= 200
		MaxSelectedUnits		= 40
	End	
END



;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Commandbuttons
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

CommandButton Command_RohanEomerOutlawLeadership
  Command                 = SPECIAL_POWER
  SpecialPower            = SpecialAbilityFakeLeadership2
  Options				  = NONPRESSABLE
  TextLabel               = CONTROLBAR:OutlawLeadership1
  ButtonImage             = UCCommon_Pillage
  RadiusCursorType        = TrainingRadiusCursor
  ButtonBorderType        = ACTION
  DescriptLabel           = CONTROLBAR:ToolTipOutlawLeadership1
  InPalantir		  = Yes
End

CommandButton Command_RohanGimliLeap
  Command                 = SPECIAL_POWER
  SpecialPower            = SpecialAbilityFakeLeadership3
  Options				  = NONPRESSABLE
  TextLabel               = CONTROLBAR:VarilWarrior
  ButtonImage             = UCCommon_Pillage
  RadiusCursorType        = TrainingRadiusCursor
  ButtonBorderType        = ACTION
  DescriptLabel           = CONTROLBAR:ToolTipVarilWarrior
  InPalantir		  = Yes
End

CommandButton Command_CreateAHero_CM_ToggleWeapon
	Command			   = TOGGLE_WEAPONSET 
	Options			   = UNMOUNTED_ONLY TOGGLE_IMAGE_ON_WEAPONSET
	FlagsUsedForToggle = WEAPONSET_TOGGLE_1
	TextLabel		   = CONTROLBAR:SpecialAbilityVarilToggleWeapon
	ButtonImage		   = CAHEvilToggleWeapon 
	ButtonBorderType   = ACTION	
	DescriptLabel	   = CONTROLBAR:ToolTipSpecialAbilityVarilToggleWeapon
	InPalantir		   = Yes   
					

End

CommandButton Command_GoblinKingFakeLeadershipButton
  Command               = SPECIAL_POWER
  SpecialPower          = SpecialAbilityFakeLeadership
  Options				= NONPRESSABLE
  TextLabel             = CONTROLBAR:Leadership1
  ButtonImage           = HSWitchKingLeadership
  ButtonBorderType      = ACTION
  DescriptLabel         = CONTROLBAR:ToolTipGoblinKingBattleFrenzy1
  InPalantir            = Yes
End



;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Commandset
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<


CommandSet VarilCommandSet
	1	= Command_ToggleStance
	2	= Command_CreateAHero_CM_ToggleWeapon
	3	= Command_GoblinKingFakeLeadershipButton
	4	= Command_RohanEomerOutlawLeadership
	5	= Command_RohanGimliLeap
	12 	= Command_CaptureBuilding
	13	= Command_AttackMove
	14	= Command_Stop
End


Armor VarilArmor
  Armor = DEFAULT         50%   ; 100%
  Armor = SLASH           40%   ; 100%
  Armor = PIERCE          40%   ;  50%
  Armor = SPECIALIST       40%   ;  50%
  Armor = CRUSH            30%   ; 200%
  Armor = SIEGE           50%   ;
  Armor = FLAME           50%   ;  30%
  Armor = MAGIC           100%   ;
  Armor = HERO            40%   ;
  Armor = HERO_RANGED     40%   ;
  Armor = CAVALRY	  40%  
    Armor = STRUCTURAL	  50%	
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Varil Object
;Reference: VarilObjectRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<


Object WildGoblinKing

	EvaEventDieOwner 		= None

	Scale = 1.2



	;DescriptionStrategic = CONTROLBAR:LW_ToolTip_GoblinKing

	SelectPortrait = CPHaradrim
	ButtonImage = HICAHHaradrim


	AddModule
	Behavior = GrantUpgradeCreate ModuleTag_1
		UpgradeToGrant = Upgrade_GandalfWhite  ;
	End 
	End

	AddModule
	Behavior = SubObjectsUpgrade CorruptedWeapon_Upgrade015624dcv
	TriggeredBy			   = Upgrade_GandalfWhite

	UpgradeTexture		   = CHCM_FN.tga 	0 CHCM_FN_03.tga 

	;HideSubObjects		   = CMSword01
	;HideSubObjects		   = CMSword02
	HideSubObjects		   = CMSword03
	HideSubObjects		   = CMSword04
	HideSubObjects		   = CMSword05

	HideSubObjects		   = HMR_01
	HideSubObjects		   = HMR_02
	HideSubObjects		   = HMR_03
	HideSubObjects		   = HMR_04

	;HideSubObjects		   = SWRD_01
	;HideSubObjects		   = SWRD_02
	HideSubObjects		   = SWRD_03
	HideSubObjects		   = SWRD_04
	HideSubObjects		   = SWRD_05
	HideSubObjects		   = SWRD_06
	HideSubObjects		   = CLUB_03  

	;HideSubObjects		   = SLDR_01
	;HideSubObjects		   = SLDR_02


	;HideSubObjects		   = CHEST_01
	HideSubObjects		   = CHEST_02
	;HideSubObjects		   = CHEST_03
	;HideSubObjects		   = CHEST_04

	HideSubObjects		   = HLMT_01
	;HideSubObjects		   = HLMT_02
	;HideSubObjects		   = HLMT_03
	HideSubObjects		   = HLMT_04
	HideSubObjects		   = HLMT_05
	HideSubObjects		   = HLMT_06

	;HideSubObjects		   = BOOT_01
	;HideSubObjects		   = BOOT_02
	;HideSubObjects		   = BOOT_03

	;HideSubObjects		   = GNLT_01
	;HideSubObjects		   = GNLT_02
	;HideSubObjects		   = GNLT_03
	;HideSubObjects		   = GNLT_04

	;HideSubObjects		   = MITHLONDRECURVE
	;HideSubObjects		   = ARROW
	HideSubObjects		   = BELTHRONDING
	FadeTimeInSeconds      = 0.0
	RecolorHouse	= Yes
	End
	End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Here is the moded cah animations just for the easterlings model
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

	ReplaceModule ModuleTag_DRAW
	Draw = W3DScriptedModelDraw ModuleTag_DRAW1

		DefaultModelConditionState
			Model               = CHCM_CM_U_SKN1   ;EUDwarfAxe_SKN
			Skeleton            = CHCM_CM_U_SKL      ;EUDwarfAxe_SKL
		;	WeaponLaunchBone	= PRIMARY Axe01
		;	WeaponLaunchBone	= TERTIARY Axe01
			WeaponLaunchBone	= PRIMARY ARROW
		End






// --- Flying through the air.
AnimationState        = STUNNED_FLAILING WEAPONSET_TOGGLE_1
	StateName           = STATE_Bow
	Animation
		AnimationName     = CHCM_CM_B_FLYA
		AnimationMode     = LOOP
	End
	Flags               = RANDOMSTART
End

AnimationState        = STUNNED_FLAILING 
	StateName           = STATE_Sword
	Animation
		AnimationName     = CHCM_CM_U_FLYA
		AnimationMode     = LOOP
	End
	Flags               = RANDOMSTART
End

// --- Dying anims
AnimationState        = DYING SPLATTED WEAPONSET_TOGGLE_1
	StateName           = STATE_Bow
	Animation
		AnimationName     = CHCM_CM_B_LNDA
		AnimationMode     = ONCE
	End
End

AnimationState        = DYING SPLATTED
	StateName           = STATE_Sword
	Animation
		AnimationName     = CHCM_CM_U_LNDA
		AnimationMode     = ONCE
	End
End

AnimationState        = DYING WEAPONSET_TOGGLE_1	//WEAPONSTATE_CLOSE_RANGE
	StateName           = STATE_Bow
	Animation
		AnimationName     = CHCM_CM_B_DIEA
		AnimationMode     = ONCE
	End
End

AnimationState        = DYING
	StateName           = STATE_Sword
	Animation
		AnimationName     = CHCM_CM_U_DIEA
		AnimationMode     = ONCE
	End
	Animation           = GUHero_DIEB
		AnimationName     = CHCM_CM_U_DIEB
		AnimationMode     = ONCE
	End
End


// --- Stunned anims


AnimationState        = STUNNED_STANDING_UP WEAPONSET_TOGGLE_1
	StateName           = STATE_Bow
	Animation
		AnimationName     = CHCM_CM_B_GTPA
		AnimationMode     = ONCE
		AnimationSpeedFactorRange = 1.5 1.5
	End
End

AnimationState        = STUNNED_STANDING_UP
	StateName           = STATE_Sword
	Animation
		AnimationName     = CHCM_CM_U_GTPA
		AnimationMode     = ONCE
		AnimationSpeedFactorRange = 1.5 1.5
	End
End

AnimationState        = STUNNED WEAPONSET_TOGGLE_1
	StateName           = STATE_Bow
	Animation
		AnimationName     = CHCM_CM_B_LNDA
		AnimationMode     = ONCE
	End
End

AnimationState        = STUNNED 
	StateName           = STATE_Sword
	Animation           = GUHero_LNDA
		AnimationName     = CHCM_CM_U_LNDA
		AnimationMode     = ONCE
	End
End				



//------------------ MOVING -------------------------------------------------------------

		AnimationState        = MOVING USER_4                 // Moving slaughter
			StateName           = Slaughter
			Flags               = RANDOMSTART
			//ParticleSysBone     = None InfantryDustTrails
			Animation           = GUHero_ATKE
				AnimationName     = CHCM_CM_U_ATKE
				AnimationMode     = LOOP
			End
			StateName           = NoSword
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Sword" then CurDrawableSetTransitionAnimState("TRANS_SwordToBow") end
			EndScript
		End

		//--- Running with bow
		AnimationState			= MOVING WEAPONSET_TOGGLE_1		//WEAPONSTATE_CLOSE_RANGE
			StateName           = STATE_RunningBow
			Flags               = RANDOMSTART
			//ParticleSysBone    = None InfantryDustTrails
			Animation
				AnimationName   = CHCM_CM_B_RUNA
//				AnimationMode   = LOOP
				AnimationSpeedFactorRange = 0.85 0.85
//				Distance		= 28
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwordToBow") end
				if Prev == "STATE_RunningSword" then CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Running") end
				if Prev == "STATE_Rappelling"  then CurDrawableSetTransitionAnimState("Trans_RappellingToRunning_WeaponToggle") return end
			EndScript
		End

		//--- Running with sword
		AnimationState			= MOVING
			StateName           = STATE_RunningSword
			Flags               = RANDOMSTART
			//ParticleSysBone    = None InfantryDustTrails
			Animation
				AnimationName   = CHCM_CM_U_RUNB
//				AnimationMode   = LOOP
				AnimationSpeedFactorRange = 0.85 0.85
//				Distance = 28
			End
			Animation
				AnimationName   = CHCM_CM_U_RUNA
//				AnimationMode   = LOOP
				AnimationSpeedFactorRange = 0.85 0.85
//				Distance = 28
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Bow" then CurDrawableSetTransitionAnimState("TRANS_BowToSword") end
				if Prev == "STATE_RunningBow" then CurDrawableSetTransitionAnimState("TRANS_BowToSword_Running") end
				if Prev == "STATE_Rappelling"  then CurDrawableSetTransitionAnimState("Trans_RappellingToRunning") return end
			EndScript
		End

		//---------------------------------------------------
		//New style firing with bow
		AnimationState					=	PREATTACK_A WEAPONSET_TOGGLE_1 SPECIAL_WEAPON_TWO
			StateName					=	STATE_Firing
			;StateName      				     = STATE_Bow
			Animation					=	ReadyToDrawn
				AnimationName			=	CHCM_CM_B_ATKA1
				AnimationMode			=	ONCE
//				UseWeaponTiming			=	Yes			// UseWeaponTiming plus random weapon field equals desync.  Leaving as warning
				//AnimationBlendTime		=	10
			End
		End

		AnimationState					=	FIRING_OR_RELOADING_A WEAPONSET_TOGGLE_1
			StateName					=	STATE_Firing
					;StateName           = STATE_Bow
			Animation					=	LooseReloadDraw
				AnimationName			=	CHCM_CM_B_ATKA2
				AnimationMode			=	ONCE
//				UseWeaponTiming			=	Yes			// UseWeaponTiming plus random weapon field equals desync.  Leaving as warning
				AnimationSpeedFactorRange = 1.1 1.1		// Therefore, this is all you get.  A slight speed up so that the animation can always finish before any possible random value Design sets the range for
				//AnimationBlendTime		=	10
			End
		End
		//---------------------End New style firing



;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; Attacking

		AnimationState				= FIRING_OR_PREATTACK_A WEAPONSET_TOGGLE_1
			StateName				= STATE_Firing
			Animation			=	AttackA1
				AnimationName		= CHCM_CM_B_ATKA1
				AnimationMode		= ONCE
				UseWeaponTiming		= No			// UseWeaponTiming plus random weapon field equals desync.  Leaving as warning
			End
		End

		AnimationState				= FIRING_OR_PREATTACK_A // Melee attack.
			Animation
				AnimationName		= CHCM_CM_U_ATKA
				AnimationMode		= ONCE
				UseWeaponTiming		= Yes
				AnimationSpeedFactorRange = 1.2 1.2	
			End
			Animation
				AnimationName		= CHCM_CM_U_ATKB
				AnimationMode		= ONCE
				UseWeaponTiming		= Yes
				AnimationSpeedFactorRange = 7.5 7.5	
			End
			Animation
				AnimationName		= CHCM_CM_U_ATKC
				AnimationMode		= ONCE
				UseWeaponTiming		= Yes
				AnimationSpeedFactorRange = 1.2 1.2	
			End
		End


		
//-------------------- HIT REACTIONS -----------------------------------------------------------

// this hit animation attack stance
		AnimationState = EMOTION_ALERT HIT_REACTION WEAPONSET_TOGGLE_1
			Animation
				AnimationName = CHCM_CM_B_HITA
				AnimationMode = ONCE
			End
		End

		AnimationState = HIT_REACTION WEAPONSET_TOGGLE_1
			Animation
				AnimationName = CHCM_CM_B_HITA
				AnimationMode = ONCE
			End
		End

		AnimationState = HIT_REACTION
			Animation = Sword_HITA
				AnimationName = CHCM_CM_U_HITA
				AnimationMode = ONCE
			End
			Animation = Sword_HITB
				AnimationName = CHCM_CM_U_HITB
				AnimationMode = ONCE
			End

			BeginScript
				PrevAnim = CurDrawablePrevAnimation()
				if PrevAnim == "Foot_IDLB"
				then
					return "Sword_HITB"
				else
					return "Swort_HITA"
				end
			EndScript
		End





//----------- Captain of Gondor - Bow -----------------------------------------------
		AnimationState        = PACKING_TYPE_2
			StateName		  =	STATE_CaptainBow
			Animation           = GUHero_CHRD
				AnimationName     = CHCM_CM_U_SPCE CHCM_CM_U_SPCA CHCM_CM_U_CHRD
				AnimationMode     = ONCE
//				AnimationSpeedFactorRange = 0.75 0.75
			End
		End

		//	Special Power 3
		AnimationState		  =	PACKING_TYPE_3 UNPACKING
			StateName		  =	Attacking
			Animation		  =	LightningSwordStart
				AnimationName =	CHCM_CM_U_SPCC CHCM_CM_U_ATKA
				AnimationMode =	ONCE
			End
			FXEvent			  =	Frame:14 Name:FX_CreateAHeroLightningCharge
//			FXEvent			  =	Frame:70 Name:FX_GandalfLightningFizzle
			FXEvent			  =	Frame:14 Name:FX_GandalfLightningSword	FrameStop:70
		End
	
		AnimationState		  =	PACKING_TYPE_3 PREPARING
			StateName		  =	Attacking
			Animation		  =	LightningSwordLoop
				AnimationName =	CHCM_CM_U_SPCA CHCM_CM_U_ATKA
				AnimationMode =	LOOP
			End
		End

		AnimationState		  =	PACKING_TYPE_3 PACKING
			StateName		  =	Attacking
			Animation		  =	LightningSwordPutAway
				AnimationName =	CHCM_CM_U_SPCB CHCM_CM_U_ATKA
				AnimationMode =	ONCE
			End
		End
		
		//	Special Power 4
		AnimationState		  =	PACKING_TYPE_4 UNPACKING	  
			Animation		  
				AnimationName =	CHCM_CM_U_SPCA
				AnimationMode =	ONCE
			End
		End
	
		AnimationState		  =	PACKING_TYPE_4 PREPARING
			Animation		 
				AnimationName =	CHCM_CM_U_SPCA
				AnimationMode =	ONCE
			End
		End

		AnimationState		  =	PACKING_TYPE_4 PACKING
			Animation		  
				AnimationName =	CHCM_CM_U_SPCA
				AnimationMode =	ONCE
			End
		End

		AnimationState		  =	PACKING_TYPE_5 PACKING WEAPONSET_TOGGLE_1
			Animation		  
				AnimationName =	CHCM_CM_B_SPCB
				AnimationMode =	ONCE
				AnimationSpeedFactorRange = 0.7333 0.7333
			End
		End

		AnimationState		  =	PACKING_TYPE_5 PACKING
			Animation		  
				AnimationName =	CHCM_CM_U_SPCB
				AnimationMode =	ONCE
			End
		End

		AnimationState		  =	PACKING_TYPE_6 PACKING
			Animation		  
				AnimationName =	CHCM_CM_U_SPCD
				AnimationMode =	ONCE
			End
		End




//====== LEVELED
		AnimationState				= LEVELED WEAPONSET_TOGGLE_1	// This state clears itself in 3 seconds
			Animation				= LevelUp
				AnimationName		= CHCM_CM_B_CHRA CHCM_CM_B_LVLA
				AnimationMode		= ONCE
			End
		End

		AnimationState				= LEVELED 						// This state clears itself in 3 seconds
			Animation				= LevelUp
				AnimationName		= CHCM_CM_U_CHRA CHCM_CM_U_LVLA
				AnimationMode		= ONCE
			End
		End

//---------------------- EMOTIONS ---------------------------------------------------------------

		// cheer, w/ bow on foot
		AnimationState				=	EMOTION_CELEBRATING WEAPONSET_TOGGLE_1
			Animation 
				AnimationName		=	CHCM_CM_B_CHRA
				AnimationMode		=	ONCE
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End

		// cheer, on foot
		AnimationState				=	EMOTION_CELEBRATING
			Animation CHRA
				AnimationName		=	CHCM_CM_U_CHRA CHCM_CM_U_TNTA
				AnimationMode		=	ONCE
			End
			Animation CHRB
				AnimationName		=	CHCM_CM_U_CHRB CHCM_CM_U_CHRA CHCM_CM_U_TNTA
				AnimationMode		=	ONCE
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End
		
		// taunt, w/ bow on foot
		AnimationState				=	EMOTION_TAUNTING WEAPONSET_TOGGLE_1
			Animation 
				AnimationName		=	CHCM_CM_B_TNTA
				AnimationMode		=	ONCE
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End
		
		// taunt, on foot
		AnimationState				=	EMOTION_TAUNTING
			Animation CHRA
				AnimationName		=	CHCM_CM_U_TNTA
				AnimationMode		=	ONCE
			End
			Animation CHRB
				AnimationName		=	CHCM_CM_U_TNTB CHCM_CM_U_TNTA
				AnimationMode		=	ONCE
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End


//====== ENGAGED
		AnimationState				= ENGAGED
			StateName				= STATE_ready
			Animation
				AnimationName		= CHCM_CM_U_IDLA
				AnimationMode		= ONCE
			End
		End
		
// --- Idle Toggled
		AnimationState				= WEAPONSET_TOGGLE_1
			StateName				= STATE_Idle_Bow
			Animation
				AnimationName		=	CHCM_CM_B_IDLA
				AnimationPriority	=	20
				AnimationMode		=	ONCE
				AnimationBlendTime	=	15
			End
			Flags				=	RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Idle_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwordToBow") end
			EndScript
		End

		IdleAnimationState
			StateName					= STATE_Idle_Sword	
			Animation = Foot_IDLB // Bored Idle
				AnimationName       =CHCM_CM_U_IDLB
				AnimationMode       = ONCE
				AnimationPriority   = 20
			End
			Animation = Foot_IDLC // Bored Fidget
				AnimationName       = CHCM_CM_U_IBFA
				AnimationMode       = ONCE
				AnimationPriority   = 4
			End
			Animation = Foot_IDLD // Bored Fidget
				AnimationName       = CHCM_CM_U_IBFB
				AnimationMode       = ONCE
				AnimationPriority   = 4
				AnimationBlendTime	=	5
			End
			Animation = Foot_IDLE // Bored Fidget
				AnimationName       = CHCM_CM_U_IBFC
				AnimationMode       = ONCE
				AnimationPriority   = 4
				AnimationBlendTime	=	5
			End
			Animation = Foot_IDLF // Bored Fidget
				AnimationName       = CHCM_CM_U_SPCB
				AnimationMode       = ONCE
				AnimationPriority   = 4
				AnimationBlendTime	=	15
				AnimationSpeedFactorRange = 0.8 0.8
			End


			BeginScript
				CurDrawableHideSubObject("arrow")
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Selected_Sword" then CurDrawableSetTransitionAnimState("TRANS_SelectedToBoredSword") end
				if Prev == "STATE_Idle_Bow" then CurDrawableSetTransitionAnimState("TRANS_BowToSword") end
			EndScript
		End
		

	//---transitions--------------------------------------------

		TransitionState = TRANS_BoredToSelectedSword
		// Once we have proper animations for enter -> idle -> exit, fix this properly.
			Animation = ANTD
				AnimationName	= CHCM_CM_U_ATNA CHCM_CM_U_ATND CHCM_CM_U_IDLA
				AnimationMode	= ONCE
			End		
		End
		
		TransitionState = TRANS_SelectedToBoredSword
			Animation			= ATNF
				AnimationName	= CHCM_CM_U_ATNC CHCM_CM_U_ATNF CHCM_CM_U_ATNE
				AnimationMode	= ONCE
			End		
		End	

		TransitionState = TRANS_BoredToSelectedBow
			Animation = ATNC
				AnimationName		= CHCM_CM_U_ATNF CHCM_CM_U_ATNE
				AnimationMode		= ONCE
			End		
		End
		
		TransitionState = TRANS_CaptainBowToSelectedBow
			Animation = ATNC
				AnimationName		= CHCM_CM_U_ATNF
				AnimationMode		= ONCE
				AnimationBlendTime	= 10
				AnimationSpeedFactorRange = 1.5 1.5
			End		
		End
		
		TransitionState = TRANS_SelectedToBoredBow
			Animation			= ATNA
				AnimationName	= CHCM_CM_U_ATNF
				AnimationMode	= ONCE
			End		
		End	


		TransitionState       = TRANS_BowToSword
			Animation           = CUHero_STHA
				AnimationName     = CHCM_CM_B_STHA
				AnimationMode     = ONCE
			End
		End

		TransitionState       = TRANS_SwordToBow
			Animation           = CUHero_STHB
				AnimationName     = CHCM_CM_U_STHA
				AnimationMode     = ONCE
			End
		End	

		TransitionState       		= TRANS_BowToSword_Running
			Animation           	= DrawSwords
				AnimationName       = CHCM_CM_B_STHB
				AnimationMode       = ONCE
			End
		End
		
		TransitionState       		= TRANS_SwordToBow_Running
			Animation           	= DrawBow
				AnimationName       = CHCM_CM_U_STHB
				AnimationMode       = ONCE
			End
		End	
	
	End
	End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;End Of Animations
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

	Side				= Mordor

	CrushableLevel					=	3  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrusherLevel = 0 ;What can I crush?: 0 = small animals, 1 = infantry, 2 = trees, 3 = vehicles
	CrushRevengeWeapon = AntiCavalryInfantryCrushRevenge
	
	CommandSet = EasterlingSwordsCommandSet



	WeaponSet
		Conditions			= None 
		Weapon				= PRIMARY    VarilSword
	End


	WeaponSet
		Conditions			= WEAPONSET_TOGGLE_1 
		Weapon				= PRIMARY FaramirBow   ;RohanRohirrimBow
		AutoChooseSources	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End	

	ArmorSet
		Conditions      = None
		Armor           = VarilArmor
		DamageFX        = NormalDamageFX
	End



			VoiceAttack 							= HeroEvilManVoiceAttack
			VoiceAttackAir							= HeroEvilManVoiceAttack
			VoiceAttackCharge 						= HeroEvilManVoiceAttack
			VoiceAttackMachine 						= HeroEvilManVoiceAttack
			VoiceAttackStructure 					= HeroEvilManVoiceAttack
			VoiceCreated							= HeroEvilManVoiceSalute
			VoiceFear								= HeroEvilManVoiceHelpMe
			VoiceFullyCreated						= HeroEvilManVoiceSalute
			VoiceGuard								= HeroEvilManVoiceMove
			VoiceMove 								= HeroEvilManVoiceMove
			VoiceMoveToCamp 						= HeroEvilManVoiceMove
			VoiceMoveWhileAttacking 				= HeroEvilManVoiceMove
			VoicePriority							= 95
			VoiceRetreatToCastle 					= HeroEvilManVoiceMove
			VoiceSelect 							= HeroEvilManVoiceSelectMS
			VoiceSelectBattle  						= HeroEvilManVoiceSelectBattle


			CrowdResponseKey = EvilMen2
		
			UnitSpecificSounds
				VoiceEnterUnitElvenTransportShip	= HeroEvilManVoiceMove
				VoiceEnterUnitMordorMumakil			= HeroEvilManVoiceMove
				VoiceEnterUnitSlaughterHouse		= HeroEvilManVoiceMove
				VoiceEnterUnitTransportShip			= HeroEvilManVoiceMove
				VoiceGarrison						= HeroEvilManVoiceMove
				VoiceInitiateCaptureBuilding		= HeroEvilManVoiceCaptureBuilding
			End





	BuildCost           = 2500
	BuildTime           = 60
	ShockwaveResistance = SHOCKWAVE_RESISTANCE_STRONG	


	DisplayName = Varil
;-------
;CUT CUT
	;RecruitText = CONTROLBAR:WildGoblinKingRecruit1	;;;;;;;;;;;; Anyone who gets revived should get these
	;ReviveText	= CONTROLBAR:WildGoblinKingRevive1	;;
;CUT CUT
;-------
	EvaEventDieOwner		= None

	ReplaceModule ModuleTag_04
	Behavior = PhysicsBehavior ModuleTag_041
		GravityMult = 1.0
		ShockStandingTime = 4500	;msec
	End
	End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

	CommandSet = VarilCommandSet

	CommandPoints = 50

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

	ReplaceModule ModuleTag_RespawnBody
	Body = RespawnBody ModuleTag_RespawnBody1
		MaxHealth         = 4000  ;BALANCE Goblin King Health
		PermanentlyKilledByFilter	= NONE		;Who kills me permanently?
   		DodgePercent      = HERO_DODGE_PERCENT
		BurningDeathBehavior = Yes
		BurningDeathFX       = FX_InfantryBurningFlame
	End
	End

	ReplaceModule ModuleTag_GoblinKingHealing
	Behavior = AutoHealBehavior ModuleTag_GoblinKingHealing1
		StartsActive = Yes
		HealingAmount = 40
		HealingDelay = 1000
		StartHealingDelay = 15000
		HealOnlyIfNotInCombat = Yes
	End
	End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

	AddModule
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_TheodenLeadership2
		SpecialPowerTemplate = SpecialAbilityFakeLeadership2
		TriggeredBy = Upgrade_EomerOutlawLeader
	End
	End

	AddModule
	Behavior = SpecialPowerModule ModuleTag_TheodenLeadershipUpdate2 
		SpecialPowerTemplate      = SpecialAbilityFakeLeadership2
		UpdateModuleStartsAttack  = No
		StartsPaused = Yes
	End
	End

	AddModule
	Behavior = AttributeModifierAuraUpdate ModuleTag_Leadership2
		StartsActive	= No ;If no, requires upgrade to turn on.
		BonusName		= EomerPassiveOutlawLeadership
		TriggeredBy		= Upgrade_EomerOutlawLeader
		RefreshDelay	= 2000
		Range			= 200
		AllowSelf		= Yes		
		ObjectFilter	= ANY +CAVALRY +INFANTRY -STRUCTURE -BASE_FOUNDATION -DOZER
	End
	End


	AddModule
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_TheodenLeadership3
		SpecialPowerTemplate = SpecialAbilityFakeLeadership3
		TriggeredBy = Upgrade_ObjectLevel10
	End
	End

	AddModule
	Behavior = SpecialPowerModule ModuleTag_TheodenLeadershipUpdate3
		SpecialPowerTemplate      = SpecialAbilityFakeLeadership3
		UpdateModuleStartsAttack  = No
		StartsPaused = Yes
	End
	End

	AddModule
	Behavior = AttributeModifierAuraUpdate ModuleTag_Leadership3
		StartsActive	= No ;If no, requires upgrade to turn on.
		BonusName		= None  ;EomerPassiveOutlawLeadership
		TriggeredBy		= Upgrade_ObjectLevel10
		RefreshDelay	= 2000
		Range			= 200
		AllowSelf		= Yes		
		ObjectFilter	= ANY +CAVALRY +INFANTRY -STRUCTURE -BASE_FOUNDATION -DOZER
	End
	End


End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Mordor Easterlings
;Reference: MordorEasterlingsRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

CommandButton Command_MordorEasterlingPorcupineFormation
	Command			= HORDE_TOGGLE_FORMATION	;;Tower Guard
	Options			= TOGGLE_IMAGE_ON_FORMATION OK_FOR_MULTI_SELECT
	ButtonImage             = UCCommon_PorcupineFormation UCCommon_PorcupineFormationOff
	ButtonBorderType        = ACTION 
	TextLabel               = CONTROLBAR:ToggleNewPikeMenFormation	CONTROLBAR:ToggleLineFormation
	DescriptLabel           = CONTROLBAR:ToolTipToggleNewPikeMenFormation	CONTROLBAR:ToolTipToggleTowerGuardPorcupineToLineFormation
	InPalantir		= Yes
	DoubleClick		= Yes
	UnitSpecificSound	= EasterlingVoicePorcupineBegin EasterlingVoicePorcupineEnd
End

CommandSet NewMordorEasterlingHordeCommandSet
	1 	= Command_ToggleStance
	2	= Command_MordorEasterlingPorcupineFormation
	12 	= Command_CaptureBuilding
	13 	= Command_AttackMove
	14 	= Command_Stop
End

Object MordorEasterlingHorde

	BuildCost = 600
	BuildTime = 35     

	CommandSet = NewMordorEasterlingHordeCommandSet

;	AddModule	
;	Behavior = ExperienceLevelCreate ModuleTag_MPLevelBonus1
;		LevelToGrant = 2
;		;MPOnly = Yes
;	End
;	End

	ReplaceModule ModuleTag_HordeContain
	Behavior = HordeContain ModuleTag_HordeContain1
		FrontAngle = 270
		FlankedDelay = 2000
		ObjectStatusOfContained = 
		InitialPayload = MordorEasterling 15
		Slots = 15
		PassengerFilter	= NONE +INFANTRY
		ShowPips = No
		ThisFormationIsTheMainFormation = Yes	;Used to determine which armorset to use (and anything else we want!)
		RandomOffset=X:2 Y:2
		MeleeBehavior = Amoeba
		End

		; Banner Carrier info		
		BannerCarriersAllowed	= MordorBannerOrc										; types of units that are allowed as banner carriers
		BannerCarrierPosition	= UnitType:MordorEasterling	Pos:X:70.0 Y:0.0		; (DEFAULT) position of banner carrier
		
		; Positions for 5
		RankInfo = RankNumber:1 UnitType:MordorEasterling Position:X:50 Y:0		Position:X:50 Y:20		Position:X:50 Y:-20		Position:X:50 Y:40		Position:X:50 Y:-40 
		RankInfo = RankNumber:2 UnitType:MordorEasterling Position:X:30 Y:0 Leader 1 0	Position:X:30 Y:20 Leader 1 1	Position:X:30 Y:-20 Leader 1 2	Position:X:30 Y:40 Leader 1 3	Position:X:30 Y:-40 Leader 1 4
		RankInfo = RankNumber:3 UnitType:MordorEasterling Position:X:10 Y:0 Leader 2 0	Position:X:10 Y:20 Leader 2 1	Position:X:10 Y:-20 Leader 2 2	Position:X:10 Y:40 Leader 2 3	Position:X:10 Y:-40 Leader 2 4
		
		RanksToReleaseWhenAttacking = 1 

		AlternateFormation = NewMordorEasterlingHordePorcupine
		MeleeAttackLeashDistance = 1; How far the hordes can move from the center of the horde when melee attacking.				
		BackUpMinDelayTime		= 1		; The minimum amount of time to delay before backing up
		BackUpMaxDelayTime		= 3000		; The maximum amount of time to delay before backing up
		BackUpMinDistance		= 1			; The minimum number of cells to backup
		BackUpMaxDistance		= 3			; The maximum number of cells to backup
		BackupPercentage		= 80%		; The amount of chance that a unit will back up.
	End
	End

	AddModule
	Behavior = GrantUpgradeCreate ModuleTag_1
		UpgradeToGrant = Upgrade_GandalfWhite  ;
	End 
	End

	ReplaceModule ModuleTag_BasicTraining
	Behavior = LevelUpUpgrade ModuleTag_BasicTraining1
		TriggeredBy = Upgrade_GandalfWhite
		LevelsToGain = 1
		LevelCap = 2
	End
	End
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

ModifierList NewMordorEasterlingHordePorcupine
	Category = FORMATION
	Modifier = SPEED 50%
	Modifier = ARMOR 50%
	Modifier = RESIST_KNOCKBACK 150%
	Modifier = CRUSHED_DECELERATE 1000%
	Duration = 0			// Duration is forever when zero
End

ChildObject NewMordorEasterlingHordePorcupine MordorEasterlingHorde

;	// Note - for alternate formations, all info outside of the Contain Behavior module is ignored.
;	// Any modifications need to be done via the Attribute Modifiers in the contain module. 

	AddModule
	Behavior = HordeContain ModuleTag_HordeContain1
		FrontAngle = 360	//	Can't be flanked
		FlankedDelay = 2000
		ObjectStatusOfContained = 
		InitialPayload					= MordorEasterling 15
		Slots							= 15
		PassengerFilter					= NONE +INFANTRY
		ShowPips						= No
		ThisFormationIsTheMainFormation = No	//Used to determine which armorset to use (and anything else we want!)
		RandomOffset					= X:2 Y:1
		MeleeBehavior = Amoeba
		End
		
		RanksToReleaseWhenAttacking		= 0  ;1 2 3
		RanksToJustFreeWhenAttacking   = 0
		AttributeModifiers				= NewMordorEasterlingHordePorcupine
		IsPorcupineFormation			= No
		MinimumHordeSize				= 5

		AlternateFormation				= MordorEasterlingHorde
		VisionRearOverride				= 100%
		VisionSideOverride				= 100%
		NotComboFormation				= Yes // this formation is not suitable for combo, so it will switch out of this when combo-ing

		// Banner Carrier info		
		BannerCarriersAllowed			= MordorBannerOrc												// types of units that are allowed as banner carriers
		BannerCarrierPosition			= UnitType:MordorEasterling	Pos:X:0.0 Y:0.0		// (DEFAULT) position of banner carrier
		
	;	RankInfo	= RankNumber:1 UnitType:MordorEasterling Position:X:20 Y:0	Position:X:-16.18 Y:11.76		Position:X:6.18 Y:-19.02	Position:X:6.18 Y:19.02	Position:X:-16.18 Y:-11.76	Position:X:36.54 Y:16.27	Position:X:-39.13 Y:8.32	Position:X:26.77 Y:-29.73	Position:X:-4.18 Y:39.78	Position:X:-20 Y:-34.64	Position:X:26.77 Y:29.73	Position:X:-39.13 Y:-8.32	Position:X:36.54 Y:-16.27	Position:X:-20 Y:34.64	Position:X:-4.18 Y:-39.78

		RankInfo = RankNumber:1 UnitType:MordorEasterling  Position:X:34 Y:0		Position:X:34 Y:15		Position:X:34 Y:-15		Position:X:34 Y:30		Position:X:34 Y:-30 
		RankInfo = RankNumber:2 UnitType:MordorEasterling  Position:X:22 Y:0 Leader 1 0	Position:X:22 Y:15 Leader 1 1	Position:X:22 Y:-15 Leader 1 2	Position:X:22 Y:30 Leader 1 3	Position:X:22 Y:-30 Leader 1 4
		RankInfo = RankNumber:3 UnitType:MordorEasterling  Position:X:10 Y:0 Leader 2 0	Position:X:10 Y:15 Leader 2 1	Position:X:10 Y:-15 Leader 2 2	Position:X:10 Y:30 Leader 2 3	Position:X:10 Y:-30 Leader 2 4


	End
	End

;	LocomotorSet
;		Locomotor     = NormalMeleeHordeLocomotor
;		Condition     = SET_NORMAL
;		Speed         = 50
;	End


End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Weapon NewMordorEasterlingPike     ; BALANCE Mordor Easterling Pike
  LeechRangeWeapon      = Yes
  AttackRange           = 30
  MeleeWeapon           = Yes ; Melee means to square off next to opponent.  This is more of a ranged weapon with no projectile
  PreAttackDelay        = MORDOR_SOLDIERRHUN_PREATTACKDELAY             ; 867 is lance pierce delay time before contact with target.
  FiringDuration        = MORDOR_SOLDIERRHUN_FIRINGDURATION    ; Duration of the lance pierce attack
  DelayBetweenShots     = MORDOR_SOLDIERRHUN_DELAYBETWEENSHOTS            ; time between shots, msec
  PreAttackType         = PER_SHOT ; Do the delay each time we attack
  FireFX                = FX_GondorSwordHit
  
  AcceptableAimDelta	= 15.0 
  RequireFollowThru		= Yes


  DamageNugget                        ; A basic Nugget that just does damage
    Damage        			= MORDOR_SOLDIERRHUN_DAMAGE_UPGRADED
    Radius        			= 0.0
    DelayTime     			= 0
    DamageType    			= SPECIALIST
    DamageFXType  			= SWORD_SLASH
    DeathType     			= NORMAL
  End
End

Object MordorEasterling

	AddModule	
	Behavior = ExperienceLevelCreate ModuleTag_MPLevelBonus1
		LevelToGrant = 2
		;MPOnly = Yes
	End
	End

	AddModule
	Behavior = GrantUpgradeCreate ModuleTag_1
		UpgradeToGrant = Upgrade_GandalfWhite  ;
	End 
	End

;	AddModule
;	Behavior = SubObjectsUpgrade CorruptedWeapon_Upgrade015624dcv
;	TriggeredBy			   = Upgrade_GandalfWhite
;
;		UpgradeTexture	= MUEastern.tga 0 MUEastern_HA.tga
;		RecolorHouse			= Yes
;		ShowSubObjects	= Forged_Blade
;	FadeTimeInSeconds      = 0.0
;	RecolorHouse	= Yes
;	End
;	End

	ReplaceModule ArmorUpgradeModuleTag
	Behavior = ArmorUpgrade ArmorUpgradeModuleTag1
		TriggeredBy = Upgrade_GandalfWhite
		ArmorSetFlag			= PLAYER_UPGRADE
	End
	End

	ReplaceModule Armor_Upgrade
	Behavior = SubObjectsUpgrade Armor_Upgrade1
		TriggeredBy		= Upgrade_GandalfWhite
		UpgradeTexture	= MUEastern.tga 0 MUEastern_HA.tga
		RecolorHouse			= Yes
		ExcludeSubobjects		= Forged_Blade
	End
	End
	
	ReplaceModule ForgedBlades_Upgrade
	Behavior = SubObjectsUpgrade ForgedBlades_Upgrade1
		TriggeredBy		= Upgrade_GandalfWhite
		ShowSubObjects	= Forged_Blade
	End
	End

	ReplaceModule ForgedBlades_UpgradeDetection
	Behavior = StatusBitsUpgrade ForgedBlades_UpgradeDetection1
		TriggeredBy		= Upgrade_GandalfWhite
	End
	End

	ArmorSet
		Conditions					=	None
		Armor						=	RhunHeavyArmor
		DamageFX					=	NormalDamageFX
	End

	WeaponSet
		Conditions					=	None 
		Weapon						=	PRIMARY NewMordorEasterlingPike
		AutoChooseSources			=	PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End


End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;WOR Gates and armors
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Armor WORGateArmor           ; generic wall armor 
  Armor = DEFAULT        10%     ;this sets the level for all nonspecified damage types
  Armor = SIEGE         200%     ;siege damage
  Armor = PIERCE          1%     ;archer damage
  Armor = FLAME           20%     ;
  Armor = STRUCTURAL	 200%	 ;structural damage - Grond inflicts this kind of damage
  Armor = LOGICAL_FIRE	  0%		 ;Fire
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Green Realm Gate
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Object IsengardOrthancDoor

	DisplayName = UPGRADE:StoneworkerUpgradeReinforcedGate ;"Reinforced Gate"

	ArmorSet
		Conditions        = None
		Armor             = WORGateArmor
		DamageFX          = GateDamageFX
	End

	ReplaceModule ModuleTag_05
	Body                        = StructureBody ModuleTag_051
		MaxHealth         		    = 8000 ;3000 ; a lot more armor then the other main WoR gate.
		MaxHealthDamaged  		    = 4000
		MaxHealthReallyDamaged 	  	= 2000
	End
	End


End


;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Both harad and earth realms gates are the same therefor there both here.
;Earth Realm Gate
;Harad Realm Gate
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Object MinisGateDoor

	DisplayName = UPGRADE:StoneworkerUpgradeReinforcedGate ;"Reinforced Gate"

  ReplaceModule ModuleTag_02
  Body                  = ActiveBody ModuleTag_021
    MaxHealth			= 6000.0
    MaxHealthDamaged		= 3000.0
    MaxHealthReallyDamaged	= 1500.0   
  End
  End

	ArmorSet
		Conditions        = None
		Armor             = WORGateArmor
		DamageFX          = GateDamageFX
	End


End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;End Realm Gates
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Building Armor Stuff
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Armor LairHoleArmor
  Armor = DEFAULT        0%		;nothing should kill it or hurt it.
End

Armor NewCitadelArmor
  Armor = DEFAULT        50%     ;this sets the level for all nonspecified damage types
  Armor = CRUSH          20%     ;horseman damage
  Armor = SLASH         50%     ;soldier damage
  Armor = URUK		50%  
  Armor = SPECIALIST	 50%
  Armor = PIERCE         20%     ;archer damage
  Armor = FLAME         75%     ;fire damage
  Armor = SIEGE         150%     ;siege damage
  Armor = STRUCTURAL	150%     ;Grond damage destroys all.  
  Armor = HERO          100%     ;Hero damage  
  Armor = HERO_RANGED    10%     ;Hero bow damage
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;A. Fire Realm Buildings And Costs
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Object FireDrakeLairHole

	KindOf            = PRELOAD STRUCTURE SELECTABLE IMMOBILE REBUILD_HOLE CAN_SEE_THROUGH_STRUCTURE NOT_AUTOACQUIRABLE IGNORE_FOR_VICTORY UNATTACKABLE

	CommandSet			= EmptyCommandSet

	AddModule
	Body = ImmortalBody ModuleTag_ImmortalBody
		MaxHealth = 99999999
	End
	End

	Scale = 0.5

	ReplaceModule ModuleTag_RebuildHole
	Behavior = RebuildHoleBehavior ModuleTag_RebuildHole1
		WorkerRespawnDelay			= 200000 ;in milliseconds
		HoleHealthRegen%PerSecond	= 0		; 0.1 by default.
	End
	End

	AddModule
	Behavior = KeepObjectDie ModuleTag_IWantRubble
	End
	End

	RemoveModule ModuleTag_Die

	ArmorSet
		Conditions      = None
		Armor           = LairHoleArmor
	End

	AddModule
	Behavior = RebuildHoleExposeDie ModuleTag_ExposeDie1
		ExemptStatus		= SOLD
		HoleName			= FireDrakeLairHole
		HoleMaxHealth		= 999999999999.0             ; will not die.
		FadeInTimeSeconds	= 2.0
		TransferAttackers	= No
	End
	End



End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Fire Drake Lair
;Reference: FireDrakeLairRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<


CommandSet NewNeutralFireDrakeLairCommandSet
	1 = Command_ConstructFireDrakeFromDefectedLair
End

Object FireDrakeLair

	AddModule
	Behavior = AutoDepositUpdate AutoDepositModuleTag
		DepositTiming       = 12000   ; in milliseconds
		DepositAmount       = 25   ; cash amount to deposit every DepositTiming
		InitialCaptureBonus = 0  ; initial one time bonus for capturing this structure
	End
	End

	ReplaceModule ModueTag_FactionCommandSet ; this is the new commandset!
	Behavior = CommandSetUpgrade ModueTag_FactionCommandSet1
		TriggeredBy		= Upgrade_IsengardFaction Upgrade_MordorFaction Upgrade_WildFaction Upgrade_MenFaction Upgrade_ElfFaction Upgrade_DwarfFaction
		CommandSet		= NewNeutralFireDrakeLairCommandSet
		CustomAnimAndDuration	= AnimState:USER_2 AnimTime:0
	End
	End

	;	CommandSet		= NewNeutralTrollCaveCommandSet

	Side				= Mordor

	ArmorSet
		Conditions		= None
		Armor			= StructureArmor
	End

	ReplaceModule ModuleTag_Body
	Body = ActiveBody ModuleTag_Body1
		MaxHealth				= 4000
		MaxHealthDamaged		= 2000
		MaxHealthReallyDamaged	= 1000
	End
	End

	RemoveModule ModuleTag_Spawn ; this lair wont have any spawns.

;	Behavior = SpawnBehavior ModuleTag_Spawn1
;		SpawnNumber			= 15
;		InitialBurst		= 1
;		SpawnTemplateName	= None
;		SpawnReplaceDelay	= 45000
;		CanReclaimOrphans	= Yes
;	End
;	End

	ReplaceModule ModuleTag_Exit
	Behavior = QueueProductionExitUpdate ModuleTag_111
		PlacementViewAngle	= 10
		UnitCreatePoint		= X:10.0 Y:10.0 Z:0.0
		NaturalRallyPoint	= X:90.0 Y:25.0 Z:0.0	;NaturalRallyPointX must always match GeometryMajorRadius! 
	End
	End

	ReplaceModule ModuleTag_ExposeDie
	Behavior = RebuildHoleExposeDie ModuleTag_ExposeDie1
		ExemptStatus		= NONE  ;SOLD
		HoleName			= FireDrakeLairHole
		HoleMaxHealth		= 999999999999.0             ; will not die.
		FadeInTimeSeconds	= 2.0
		TransferAttackers	= No
	End
	End


End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<





;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;B. Green Realm Buildings And Costs
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Elven Fortress
;Reference: ElvenFortressRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<


Object ElvenCivilianFarm01

	SelectPortrait = BPEFortress


	CommandSet = EmptyCommandSet

		DisplayName      = OBJECT:MenFortress

	ArmorSet
		Conditions        = None
		Armor             = NewCitadelArmor
		DamageFX          = None
	End

	KindOf					= STRUCTURE SELECTABLE IMMOBILE MP_COUNT_FOR_VICTORY FS_FACTORY AUTO_RALLYPOINT MADE_OF_WOOD SCORE


		ReplaceModule ModuleTag_03
		Body                  = ActiveBody ModuleTag_031
			MaxHealth				= 30000.0
			MaxHealthDamaged  		= 15000.0
			MaxHealthReallyDamaged 	= 7500.0
		End
		End



End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>Elven Buildings<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

CommandButton Command_ConstructElvenBarracks
	Command          = FOUNDATION_CONSTRUCT
	Object           = ElvenBarracks
	TextLabel        = CONTROLBAR:ConstructElvenBarracks
	ButtonImage      = BEElvenBarracks
	ButtonBorderType = BUILD 
	DescriptLabel    = CONTROLBAR:ToolTipElvenBarracks
	Radial           = Yes  
End



Object ElvenBarracks


  	BuildCost           = 0
  	BuildTime           = 90
	RefundValue			= 0


	ReplaceModule ModuleTag_05
	Body                = StructureBody ModuleTag_051
		MaxHealth         = 7000.0
		MaxHealthDamaged  = 3000.0
		MaxHealthReallyDamaged =1500.0
		
		DamageCreationList = OCL_BuildingDamageList01 CATAPULT_ROCK
		
		DamageCreationList = OCL_RBBarracks_Chunk1 CATAPULT_ROCK FRONT_DESTROYED
		DamageCreationList = OCL_RBBarracks_Chunk2 CATAPULT_ROCK BACK_DESTROYED
		DamageCreationList = OCL_RBBarracks_Chunk3 CATAPULT_ROCK RIGHT_DESTROYED
		DamageCreationList = OCL_RBBarracks_Chunk4 CATAPULT_ROCK LEFT_DESTROYED
		
	End
	End

End


;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

CommandButton Command_ConstructElvenGreenPasture
  Command          = FOUNDATION_CONSTRUCT
  Object           = ElvenGreenPasture
  TextLabel        = CONTROLBAR:ConstructElvenStable
  ButtonImage      = BEGreenPasture
  ButtonBorderType = BUILD 
  DescriptLabel    = CONTROLBAR:ToolTipGreenPasture
  Radial           = Yes  
End





Object ElvenGreenPasture

  	BuildCost           = 0
  	BuildTime           = 120
	RefundValue			= 0

	ReplaceModule ModuleTag_05
	Body                      = StructureBody ModuleTag_051
		MaxHealth               = 6000			
		MaxHealthDamaged        = 3000			
		MaxHealthReallyDamaged  = 1500		
	End
	End

End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

CommandButton Command_ConstructElvenWatchTower
  Command          = FOUNDATION_CONSTRUCT
  Object           = ElvenBattleTower
  TextLabel        = CONTROLBAR:ConstructElvenBattleTower
  ButtonImage      = BEBattleTower
  ButtonBorderType = BUILD 
  DescriptLabel    = CONTROLBAR:ToolTipBattleTower
  Radial           = Yes  
End



Object ElvenBattleTower


  	BuildCost           = 0
  	BuildTime           = 60
	RefundValue			= 0

	ReplaceModule ModuleTag_05
	Body                      = StructureBody ModuleTag_051
		MaxHealth               = 2500
		MaxHealthDamaged        = 1500
		MaxHealthReallyDamaged  = 750
		DamageCreationList = OCL_BuildingDamageList01 CATAPULT_ROCK
	    
		DamageCreationList = OCL_GBBtlTwrSD2_Chunk1 CATAPULT_ROCK FRONT_DESTROYED
		DamageCreationList = OCL_GBBtlTwrSD2_Chunk2 CATAPULT_ROCK RIGHT_DESTROYED
		DamageCreationList = OCL_GBBtlTwrSD2_Chunk3 CATAPULT_ROCK BACK_DESTROYED
		DamageCreationList = OCL_GBBtlTwrSD2_Chunk4 CATAPULT_ROCK LEFT_DESTROYED
	End
	End


End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

CommandButton Command_ConstructElvenMirrorOfGaladriel
  Command          = FOUNDATION_CONSTRUCT
  Object           = ElvenMirrorOfGaladriel
  TextLabel        = CONTROLBAR:ConstructGaladrielsWell
  ButtonImage      = BEMirrorGaladriel
  ButtonBorderType = BUILD 
  DescriptLabel    = OBJECT:HearthWellDescription
  Radial           = Yes  
End



Object ElvenMirrorOfGaladriel


  	BuildCost           = 0
  	BuildTime           = 30
	RefundValue			= 0

  ReplaceModule ModuleTag_05
  Body                      = StructureBody ModuleTag_051
		MaxHealth               = 1500				
		MaxHealthDamaged        = 1000			
  		MaxHealthReallyDamaged  = 500	
  End
  End

End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<


CommandButton Command_ConstructEregionForge
	Command          = FOUNDATION_CONSTRUCT
	Object           = EregionForge
	TextLabel        = CONTROLBAR:ConstructEregionForge
	ButtonImage      = BEEregionForge
	ButtonBorderType = BUILD 
	DescriptLabel    = CONTROLBAR:ToolTipEregionForge1
	Radial           = Yes  
End


; made so it starts at level 3.
Object EregionForge

  	BuildCost           = 0
  	BuildTime           = 300
	RefundValue			= 0

	AddModule
	Behavior = AutoDepositUpdate AutoDepositModuleTag
		DepositTiming       = 8000   ; in milliseconds
		DepositAmount       = 20   ; cash amount to deposit every DepositTiming
		InitialCaptureBonus = 0  ; initial one time bonus for capturing this structure
	End
	End

  ReplaceModule ModuleTag_05
  Body                      	= StructureBody ModuleTag_051
    MaxHealth         		  	= ELVEN_FORGE_HEALTH
    MaxHealthDamaged  		  	= ELVEN_FORGE_HEALTH_DAMAGED
    MaxHealthReallyDamaged 		= ELVEN_FORGE_HEALTH_REALLY_DAMAGED
    DamageCreationList = OCL_BuildingDamageList01 CATAPULT_ROCK
    
    DamageCreationList = OCL_GBBlkSmith_Chunk1 CATAPULT_ROCK FRONT_DESTROYED
    DamageCreationList = OCL_GBBlkSmith_Chunk2 CATAPULT_ROCK BACK_DESTROYED
    DamageCreationList = OCL_GBBlkSmith_Chunk3 CATAPULT_ROCK RIGHT_DESTROYED
    DamageCreationList = OCL_GBBlkSmith_Chunk4 CATAPULT_ROCK LEFT_DESTROYED
    
  End
  End

  CommandSet          = EregionForgeCommandSet

; this means it shoots arrows from any level
	WeaponSet
		Weapon				= PRIMARY EregionForgeLevel3Weapon
		Conditions			= None
		AutoChooseSources	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End


	AddModule
	Behavior = GrantUpgradeCreate ModuleTag_001
		UpgradeToGrant = Upgrade_StructureLevel1

	End 
	End




  ReplaceModule ModueTag_CaveLevel2CommandSet
  Behavior = CommandSetUpgrade ModueTag_CaveLevel2CommandSet1
		TriggeredBy      = Upgrade_StructureLevel1  ;Upgrade_EregionForgeLevel2
		ConflictsWith    = Upgrade_EregionForgeLevel3
		CommandSet       = EregionForgeCommandSetLevel2
  End
  End

  ReplaceModule ModueTag_CaveLevel3CommandSet
  Behavior = CommandSetUpgrade ModueTag_CaveLevel3CommandSet1
		TriggeredBy      = Upgrade_StructureLevel1  ;Upgrade_EregionForgeLevel3
		CommandSet       = EregionForgeCommandSetLevel3
  End
  End

  ReplaceModule ModuleTag_ForgeLevel2
  Behavior = LevelUpUpgrade ModuleTag_ForgeLevel21
		TriggeredBy    = Upgrade_StructureLevel1  ;Upgrade_EregionForgeLevel2    
		LevelsToGain   = 1
		LevelCap       = 3
  End
  End

  	ReplaceModule ModuleTag_Veterancy_Particles
	Behavior = StatusBitsUpgrade ModuleTag_Veterancy_Particles1
		TriggeredBy		= Upgrade_StructureLevel1  ;Upgrade_EregionForgeLevel2
		CustomAnimAndDuration   = AnimState:USER_4 AnimTime:0
	End
  	End

  	ReplaceModule ModuleTag_Veterancy_Particles_Two
	Behavior = StatusBitsUpgrade ModuleTag_Veterancy_Particles_Two1
		TriggeredBy		= Upgrade_StructureLevel1  ;Upgrade_EregionForgeLevel3
		CustomAnimAndDuration   = AnimState:USER_5 AnimTime:0
	End
	End

  ReplaceModule ModuleTag_ForgeLevel3
  Behavior = LevelUpUpgrade ModuleTag_ForgeLevel31
		TriggeredBy    = Upgrade_StructureLevel1  ;Upgrade_EregionForgeLevel3    
		LevelsToGain   = 1
		LevelCap       = 3
  End
  End

  	ReplaceModule ModuleTag_HideAll
	Behavior = SubObjectsUpgrade ModuleTag_HideAll1
		TriggeredBy		= Upgrade_StructureLevel1
		HideSubObjects	= V2* V2a V2b
	End
  	End

  	ReplaceModule ModuleTag_ShowPillarsAndWalls 
  	Behavior = SubObjectsUpgrade ModuleTag_ShowPillarsAndWalls1 
		TriggeredBy		= Upgrade_StructureLevel1  ;Upgrade_EregionForgeLevel2
		ShowSubObjects	= V2* V2a V2b
	End
  	End

  	ReplaceModule ModuleTag_ShowTower
	Behavior = SubObjectsUpgrade ModuleTag_ShowTower1
		TriggeredBy		= Upgrade_StructureLevel1  ;Upgrade_EregionForgeLevel3
		ShowSubObjects	= V2* V2a V2b
	End
  	End

  	ReplaceModule ModuleTag_WeaponLevel3
	Behavior = WeaponSetUpgrade ModuleTag_WeaponLevel31
			TriggeredBy		= Upgrade_StructureLevel1   ;Upgrade_EregionForgeLevel3
			WeaponCondition = SPECIAL_TWO
	End
  	End

  	ReplaceModule ModuleTag_WeaponLevel2
	Behavior = WeaponSetUpgrade ModuleTag_WeaponLevel21
			TriggeredBy		= Upgrade_StructureLevel1   ;Upgrade_EregionForgeLevel2
			WeaponCondition = SPECIAL_ONE
	End
  	End

  	ReplaceModule Geom_ModuleTag_HideAll
	Behavior = GeometryUpgrade Geom_ModuleTag_HideAll1
		TriggeredBy		= Upgrade_StructureLevel1
		ShowGeometry	= Geom_Orig
		HideGeometry	= Geom_V1 Geom_V2 
	End
  	End

  	ReplaceModule Geom_ModuleTag_ShowWalls
	Behavior = GeometryUpgrade Geom_ModuleTag_ShowWalls1
		TriggeredBy		= Upgrade_StructureLevel1  ;Upgrade_EregionForgeLevel2
		ShowGeometry	= Geom_Orig Geom_V1 
		HideGeometry	= Geom_V2 
	End
  	End

  	ReplaceModule Geom_ModuleTag_ShowFlagsAndTower
  	Behavior = GeometryUpgrade Geom_ModuleTag_ShowFlagsAndTower1
		TriggeredBy		= Upgrade_StructureLevel1  ;Upgrade_EregionForgeLevel3
		ShowGeometry	= Geom_Orig Geom_V1 Geom_V2
	End
	End


End



;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

CommandButton Command_ConstructElvenEntMoot
  Command          = FOUNDATION_CONSTRUCT
  Object           = ElvenEntMoot
  TextLabel        = CONTROLBAR:ConstructEntMoot
  ButtonImage      = BEEntMoot
  ButtonBorderType = BUILD 
  DescriptLabel    = CONTROLBAR:ToolTipElvenEntMoot
  Radial           = Yes  
End


Object ElvenEntMoot

  	BuildCost           = 0
  	BuildTime           = 180
	RefundValue			= 0


  ReplaceModule ModuleTag_05
  Body                = StructureBody ModuleTag_051
    MaxHealth         = 8000
    MaxHealthDamaged  = 5332
    MaxHealthReallyDamaged = 2666
  End
  End

End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Main Elven Foundation
;Reference: MainElvenFoundationRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

;Command_ConstructElvenMallornTree

CommandSet NewElvenFoundationCommandSet 
  1  = Command_ConstructElvenBarracks
  2  = Command_ConstructElvenWatchTower
  3  = Command_ConstructElvenMirrorOfGaladriel
  4  = Command_ConstructElvenGreenPasture
End

Object ElvenBuildingFoundation

  	CommandSet = NewElvenFoundationCommandSet

	AddModule
  	Draw = W3DFloorDraw ModuleTag_Draw1aef
      		ModelName = EBForge_Bib
  	End
	End

;	AddModule
;	Draw = W3DFloorDraw ModuleTag_Draw1aefcfb
;		ModelName = EBBbattleT_Bib  ;EBMalTree_Bib
;	End
;	End

	AddModule 
  	Draw = W3DScriptedModelDraw ModuleTag_Draw_HCBanner11
		OkToChangeModelColor  = Yes
		DefaultModelConditionState
			Model = EBHCForge
		End
		MultiPlayerOnly = No
  	End  
	End

  ReplaceModule ModuleTag_Draw
  Draw = W3DFloorDraw ModuleTag_Draw1
      ModelName = EBFoundationX
  End
  End

End


;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Mallorn Tree Foundations
;Reference: MallornTreeFoundationsRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<


CommandButton Command_ConstructElvenMallornTree
  Command          = FOUNDATION_CONSTRUCT
  Object           = ElvenMallornTree
  TextLabel        = CONTROLBAR:ConstructElvenMallornTree1
  ButtonImage      = BEMallornTree
  ButtonBorderType = BUILD 
  DescriptLabel    = CONTROLBAR:ToolTipMallornTree1
  Radial           = Yes  
End


CommandSet NewMallornFoundationCommandSet
  1  = Command_ConstructElvenMallornTree
  2  = Command_ConstructEregionForge


End

ChildObject ElvenBuildingFoundation_Independant ElvenBuildingFoundation
	
	AddModule
  	Draw = W3DFloorDraw ModuleTag_Draw1aef34fd
      		ModelName = EBBbattleT_Bib  ;EBMalTree_Bib
  	End
	End

	AddModule 
  	Draw = W3DScriptedModelDraw ModuleTag_Draw_HCBanner11hfg
		OkToChangeModelColor  = Yes
		DefaultModelConditionState
			Model = EBHCForge
		End
		MultiPlayerOnly = No
  	End  
	End

  ReplaceModule ModuleTag_Draw
  Draw = W3DFloorDraw ModuleTag_Draw1
      ModelName = EBFoundationX
  End
  End

	; Quite large to make a big footprint to prevent building structures close tegether.
	GeometryMajorRadius	= 30.0
	GeometryMinorRadius	= 30.0

  	CommandSet = NewMallornFoundationCommandSet


End




;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<


Object ElvenMallornTree


  	BuildCost           = 0
  	BuildTime           = 75
	RefundValue			= 0

	ReplaceModule ModuleTag_05
	Body                		= StructureBody ModuleTag_051
	  MaxHealth         		= 4500
	  MaxHealthDamaged        	= 3000
	  MaxHealthReallyDamaged  	= 1500
	End
	End

	RemoveModule ModuleTag_MoneyProduction

	AddModule
	Behavior = AutoDepositUpdate AutoDepositModuleTag
		DepositTiming       = 6000   ; in milliseconds
		DepositAmount       = 60   ; cash amount to deposit every DepositTiming
		InitialCaptureBonus = 0  ; initial one time bonus for capturing this structure
	End
	End


End
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;EntMoot
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

CommandButton Command_ConstructElvenEntMoot
  Command          = FOUNDATION_CONSTRUCT
  Object           = ElvenEntMoot
  TextLabel        = CONTROLBAR:ConstructEntMoot
  ButtonImage      = BEEntMoot
  ButtonBorderType = BUILD 
  DescriptLabel    = CONTROLBAR:ToolTipElvenEntMoot
  Radial           = Yes  
End


CommandSet NewEntFoundationCommandSet
  1  = Command_ConstructElvenEntMoot
End

Armor NewEntMootArmor
  Armor = DEFAULT       35%     ;this sets the level for all nonspecified damage types
  Armor = PIERCE          1%     ;archer damage
  Armor = FLAME         50%     ;fire damage
  Armor = SIEGE         75%     ;siege damage
  Armor = STRUCTURAL	75%     ;Grond damage destroys all.   
  Armor = HERO_RANGED    5%     ;Hero bow damage
  Armor = LOGICAL_FIRE	 2%
End


Object ElvenEntMoot

  ArmorSet
    Conditions			= None
    Armor				= NewEntMootArmor
    ;DamageFX			= StructureDamageFXNoShake
  End

End


;ChildObject EntBuildingFoundation ElvenBuildingFoundation

Object EntBuildingFoundation

  AddModule 
  Draw = W3DFloorDraw ModuleTag_Draw1dfae
      ModelName = FBEntmoot_Bib
  End
  End


  ReplaceModule ModuleTag_Draw
  Draw = W3DFloorDraw ModuleTag_Draw1
      ModelName = GBFoundationX
  End
  End


	CommandSet = NewEntFoundationCommandSet

End


;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;C. Spider Realm Buildings And Costs
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<


;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Spider Lair Holes
;Reference: SpiderLairHoleRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<


Object SpiderLairHole

	KindOf            = PRELOAD STRUCTURE SELECTABLE IMMOBILE REBUILD_HOLE CAN_SEE_THROUGH_STRUCTURE NOT_AUTOACQUIRABLE IGNORE_FOR_VICTORY UNATTACKABLE

	CommandSet			= EmptyCommandSet

	AddModule
	Body = ImmortalBody ModuleTag_ImmortalBody
		MaxHealth = 99999999
	End
	End

	Scale = 0.5

	ReplaceModule ModuleTag_RebuildHole
	Behavior = RebuildHoleBehavior ModuleTag_RebuildHole1
		WorkerRespawnDelay			= 200000 ;in milliseconds
		HoleHealthRegen%PerSecond	= 0		; 0.1 by default.
	End
	End

	AddModule
	Behavior = KeepObjectDie ModuleTag_IWantRubble
	End
	End

	RemoveModule ModuleTag_Die

	ArmorSet
		Conditions      = None
		Armor           = LairHoleArmor
	End

	AddModule
	Behavior = RebuildHoleExposeDie ModuleTag_ExposeDie1
		ExemptStatus		= SOLD
		HoleName			= SpiderLairHole
		HoleMaxHealth		= 999999999999.0             ; will not die.
		FadeInTimeSeconds	= 2.0
		TransferAttackers	= No
	End
	End



End

Object WildSpiderPitHole

	CommandSet			= EmptyCommandSet

	KindOf            = PRELOAD STRUCTURE SELECTABLE IMMOBILE REBUILD_HOLE CAN_SEE_THROUGH_STRUCTURE NOT_AUTOACQUIRABLE IGNORE_FOR_VICTORY UNATTACKABLE

	AddModule
	Body = ImmortalBody ModuleTag_ImmortalBody
		MaxHealth = 99999999
	End
	End

	ReplaceModule ModuleTag_RebuildHole
	Behavior = RebuildHoleBehavior ModuleTag_RebuildHole1
		WorkerRespawnDelay			= 200000 ;in milliseconds
		HoleHealthRegen%PerSecond	= 0		; 0.1 by default.
	End
	End

	RemoveModule ModuleTag_Die

	ArmorSet
		Conditions      = None
		Armor           = LairHoleArmor
	End

	AddModule
	Behavior = KeepObjectDie ModuleTag_IWantRubble
	End
	End

	Scale = 0.5

	AddModule
	Behavior = RebuildHoleExposeDie ModuleTag_ExposeDie1
		ExemptStatus		= SOLD
		HoleName			= WildSpiderPitHole
		HoleMaxHealth		= 999999999999.0             ; will not die.
		FadeInTimeSeconds	= 2.0
		TransferAttackers	= No
	End
	End


End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Wild Spider Pit
;Reference: WildSpiderPitRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

CommandButton Command_SpellBookSpiderlingAllies  ;Command_PurchaseUpgradeWildBasicTraining  ;Command_ConstructWildSpiderlingHorde
	Command				= UNIT_BUILD
	Object				= RandomSpiderling  ;TEST  ;WildSpiderlingHordeMember  ;WildSpiderling  ;WildSpiderlingHorde
	Options				= CANCELABLE
	TextLabel			= CONTROLBAR:ConstructRandomSpiderling
	ButtonImage			= BWSpiderPit_Spiderling
	ButtonBorderType    = BUILD 
	DescriptLabel       = CONTROLBAR:ToolTipBuildRandomSpiderling
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount	= Yes      
End

CommandSet NewWildSpiderPitCommandSet
	1 = Command_SpellBookSpiderlingAllies  ;Command_PurchaseUpgradeWildBasicTraining
	2 = Command_ConstructWildSpiderlingHorde
	3 = Command_PurchaseUpgradeWildSpiderPitLevel2
End

CommandSet NewWildSpiderPitCommandSetLevel2
	1 = Command_SpellBookSpiderlingAllies  ;Command_PurchaseUpgradeWildBasicTraining
	2 = Command_ConstructWildSpiderlingHorde
	3 = Command_PurchaseUpgradeWildSpiderPitLevel3
End

CommandSet NewWildSpiderPitCommandSetLevel3
	1 = Command_SpellBookSpiderlingAllies  ;Command_PurchaseUpgradeWildBasicTraining
	2 = Command_ConstructWildSpiderlingHorde
End


Object WildSpiderPit

	ReplaceModule ModueTag_SpiderPitLevel2CommandSet
	Behavior = CommandSetUpgrade ModueTag_SpiderPitLevel2CommandSet1
		TriggeredBy			= Upgrade_StructureLevel2
		ConflictsWith		= Upgrade_StructureLevel3
		CommandSet			= NewWildSpiderPitCommandSetLevel2
	End   
	End

	ReplaceModule ModueTag_SpiderPitLevel3CommandSet
	Behavior = CommandSetUpgrade ModueTag_SpiderPitLevel3CommandSet1
		TriggeredBy			= Upgrade_StructureLevel3		
		CommandSet			= NewWildSpiderPitCommandSetLevel3
	End  
	End 


	
;	Behavior = KeepObjectDie ModuleTag_IWantRubble
;	End

	CommandSet          = NewWildSpiderPitCommandSet

	BuildCost           = 600
	BuildTime           = GOBLIN_SPIDERPIT_BUILDTIME
	BountyValue         = GOBLIN_SPIDERPIT_BOUNTY_VALUE

	ReplaceModule ModuleTag_05
	Body                        = StructureBody ModuleTag_051
		MaxHealth         		    = 4000
		MaxHealthDamaged  		    = 2000
		MaxHealthReallyDamaged 	  	= 1000	    
	End
	End

	ReplaceModule ModuleTag_ExposeDie
	Behavior = RebuildHoleExposeDie ModuleTag_ExposeDie1
		ExemptStatus		= NONE  ;SOLD
		HoleName			= WildSpiderPitHole
		HoleMaxHealth		= 999999999999.0
		FadeInTimeSeconds	= 2.0
	End
	End

End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Spider Lairs
;Reference: SpiderLairRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

CommandButton Command_ConstructSpiderFromDefectedLair
	Command				= UNIT_BUILD
	Object				= IsengardSharku  ;GiantSpider  ;MinorSpider
	Options				= CANCELABLE
	TextLabel			= CONTROLBAR:ConstructSpider1
	ButtonImage			= BWSpiderPit_Spiderling
	ButtonBorderType	= BUILD											
	DescriptLabel		= CONTROLBAR:ToolTipBuildSpider1
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount	= Yes
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

CommandSet NewNeutralSpiderLairCommandSet
	1 = Command_ConstructSpiderFromDefectedLair
	;2 = Command_ConstructWildSpiderlingHorde
End


Object SpiderLair

	AddModule
	Behavior = AutoDepositUpdate AutoDepositModuleTag
		DepositTiming       = 6000   ; in milliseconds
		DepositAmount       = 30   ; cash amount to deposit every DepositTiming
		InitialCaptureBonus = 0  ; initial one time bonus for capturing this structure
	End
	End

	ReplaceModule ModueTag_FactionCommandSet ; this is the new commandset!
	Behavior = CommandSetUpgrade ModueTag_FactionCommandSet1
		TriggeredBy		= Upgrade_IsengardFaction Upgrade_MordorFaction Upgrade_WildFaction Upgrade_MenFaction Upgrade_ElfFaction Upgrade_DwarfFaction
		CommandSet		= NewNeutralSpiderLairCommandSet
		CustomAnimAndDuration	= AnimState:USER_2 AnimTime:0
	End
	End

	;	CommandSet		= NewNeutralTrollCaveCommandSet

	Side				= Mordor

	ArmorSet
		Conditions		= None
		Armor			= StructureArmor
	End

	ReplaceModule ModuleTag_Body
	Body = ActiveBody ModuleTag_Body1
		MaxHealth				= 4000
		MaxHealthDamaged		= 2000
		MaxHealthReallyDamaged	= 1000
	End
	End

	ReplaceModule ModuleTag_SpawnFighters
	Behavior = SpawnBehavior ModuleTag_Spawn1
		SpawnNumber			= 15
		InitialBurst		= 1
		SpawnTemplateName	= MinorSpider_Slaved MinorSpider_Slaved2 MinorSpider_Slaved3
		SpawnReplaceDelay	= 45000
		CanReclaimOrphans	= Yes
	End
	End

	ReplaceModule ModuleTag_11
	Behavior = QueueProductionExitUpdate ModuleTag_111
		UnitCreatePoint			= X:-40.0 Y:-2.0 Z:0.0
		NaturalRallyPoint		= X:-60 Y:-2 Z:0.0
	End
	End

	ReplaceModule ModuleTag_ExposeDie
	Behavior = RebuildHoleExposeDie ModuleTag_ExposeDie1
		ExemptStatus		= NONE  ;SOLD
		HoleName			= SpiderLairHole
		HoleMaxHealth		= 999999999999.0             ; will not die.
		FadeInTimeSeconds	= 2.0
		TransferAttackers	= No
	End
	End


End


;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<


;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;D. Earth Realm Buildings And Costs
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Earth Fortress
;Reference: EarthFortress
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Object IsengardCampKeep

	ArmorSet
		Conditions        = None
		Armor             = NewCitadelArmor
		DamageFX          = None
	End

	SelectPortrait = BPIFortress  ;BPICamp

	KindOf					= STRUCTURE SELECTABLE IMMOBILE MP_COUNT_FOR_VICTORY FS_FACTORY AUTO_RALLYPOINT MADE_OF_WOOD SCORE

;VITAL_FOR_BASE_SURVIVAL CASTLE_KEEP

	DisplayName      = OBJECT:MenFortress

	;BountyValue = 4000


	ReplaceModule ModuleTag_02
	Body              = ActiveBody ModuleTag_021
		MaxHealth       = 15000
	End
	End

	CommandSet = EmptyCommandSet


End


;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Isengard Uruk Pit
;Reference: IsengardUrukPitRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Object IsengardUrukPit


  	BuildCost           = 0
  	BuildTime           = 75
	RefundValue			= 0

  ReplaceModule ModuleTag_05
  Body                = StructureBody ModuleTag_051
    MaxHealth 			    = 7000			
    MaxHealthDamaged		    = 4000			
	MaxHealthReallyDamaged		= 2000			
    DamageCreationList		= OCL_BuildingDamageList01 CATAPULT_ROCK
  
    DamageCreationList		= OCL_IBUrukPit_Chunk1 CATAPULT_ROCK FRONT_DESTROYED
    DamageCreationList		= OCL_IBUrukPit_Chunk2 CATAPULT_ROCK RIGHT_DESTROYED
    DamageCreationList		= OCL_IBUrukPit_Chunk3 CATAPULT_ROCK BACK_DESTROYED
    DamageCreationList		= OCL_IBUrukPit_Chunk4 CATAPULT_ROCK LEFT_DESTROYED
  End
  End

End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Isengard Battle Tower
;Reference: IsengardBattleTowerRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Object IsengardBattleTower

  	BuildCost           = 0
  	BuildTime           = 60
	RefundValue			= 0

  ReplaceModule ModuleTag_05
  Body                = StructureBody ModuleTag_051
    MaxHealth 			    = 5000			
    MaxHealthDamaged		    = 3000			
	MaxHealthReallyDamaged		= 1500			
    DamageCreationList		= OCL_BuildingDamageList01 CATAPULT_ROCK
  
;    DamageCreationList		= OCL_IBUrukPit_Chunk1 CATAPULT_ROCK FRONT_DESTROYED
 ;   DamageCreationList		= OCL_IBUrukPit_Chunk2 CATAPULT_ROCK RIGHT_DESTROYED
  ;  DamageCreationList		= OCL_IBUrukPit_Chunk3 CATAPULT_ROCK BACK_DESTROYED
   ; DamageCreationList		= OCL_IBUrukPit_Chunk4 CATAPULT_ROCK LEFT_DESTROYED
  End
  End
	
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Mordor Orc Pit
;Refernce: MordorOrcPitRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

CommandButton Command_ConstructMordorOrcPit
  Command          = FOUNDATION_CONSTRUCT
  Object           = MordorOrcPit
  TextLabel        = CONTROLBAR:ConstructMordorOrcPit
  ButtonImage      = BMOrcPit
  ButtonBorderType = BUILD 
  DescriptLabel    = CONTROLBAR:ToolTipMordorOrcPit1
  Radial           = Yes  
End

CommandSet NewMordorOrcPitCommandSetLevel1
  1	= Command_ConstructMordorOrcFighterHorde
  6	= Command_Sell
End

CommandSet NewMordorOrcPitCommandSetLevel2
  1	= Command_ConstructMordorOrcFighterHorde
  6	= Command_Sell
End

CommandSet NewMordorOrcPitCommandSetLevel3
  1	= Command_ConstructMordorOrcFighterHorde
  6	= Command_Sell
End

Object MordorOrcPit



  	BuildCost           = 0
  	BuildTime           = 30
	RefundValue			= 0


	AddModule
	Behavior = AutoDepositUpdate AutoDepositModuleTag1
		DepositTiming       = 6000   ; in milliseconds
		DepositAmount       = 4   ; cash amount to deposit every DepositTiming
		InitialCaptureBonus = 0  ; initial one time bonus for capturing this structure
	End
	End


  ReplaceModule ModuleTag_05
  Body                = ActiveBody ModuleTag_051
    MaxHealth 			    = 5000			
    MaxHealthDamaged		    = 3000			
	MaxHealthReallyDamaged		= 1500			
    DamageCreationList		= OCL_BuildingDamageList01 CATAPULT_ROCK
  
    DamageCreationList		= OCL_MBOrcPit_Chunk1 CATAPULT_ROCK FRONT_DESTROYED
    DamageCreationList		= OCL_MBOrcPit_Chunk2 CATAPULT_ROCK RIGHT_DESTROYED
    DamageCreationList		= OCL_MBOrcPit_Chunk3 CATAPULT_ROCK BACK_DESTROYED
    DamageCreationList		= OCL_MBOrcPit_Chunk4 CATAPULT_ROCK LEFT_DESTROYED
  End
  End

  CommandSet          = NewMordorOrcPitCommandSetLevel1

	ReplaceModule ModuleTag_MordorOrcPitLevel2
	Behavior = CommandSetUpgrade ModuleTag_MordorOrcPitLevel21
		TriggeredBy		= Upgrade_MordorOrcPitLevel2
		ConflictsWith	= Upgrade_MordorOrcPitLevel3
		CommandSet		= NewMordorOrcPitCommandSetLevel2
	End
	End

	ReplaceModule ModuleTag_MordorOrcPitLevel3
	Behavior = CommandSetUpgrade ModuleTag_MordorOrcPitLevel31
		TriggeredBy		= Upgrade_MordorOrcPitLevel3
		CommandSet		= NewMordorOrcPitCommandSetLevel3
	End
	End

End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

CommandSet NewMordorFighterHordeCommandSet
	1 	= Command_ToggleStance
	12 	= Command_CaptureBuilding
	13 	= Command_AttackMove
	14 	= Command_Stop
End

Object MordorFighterHorde

  BuildCost           = 0
  BuildTime           = 25

	CommandSet = NewMordorFighterHordeCommandSet

  LocomotorSet
    Locomotor     = HumanLocomotor
    Condition     = SET_NORMAL
    Speed         = 40 ; -10 speed, their crapy little orcs so why should they outrun uruks, men, wargs, etc? 
  End

End

Object MordorFighter

	ReplaceModule ModuleTag_02
	Body = ActiveBody ModuleTag_021
		CheerRadius 	  = EMOTION_CHEER_RADIUS
		MaxHealth         = 95 ; -50 health. this will make em really really crappy* their just targets to let in the really good uruks by. :-D
		MaxHealthDamaged  = 25
		BurningDeathBehavior = Yes
		BurningDeathFX       = FX_InfantryBurningFlame
	End
	End

  LocomotorSet
    Locomotor     = HumanLocomotor
    Condition     = SET_NORMAL
    Speed         = 43 ; -12 speed, 3 more then the horde so they can *Just* catch up over a long time, Why wait for the orcs to line up, send em in one at a time! forget formations!
  End

End


;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Isengard Armory
;Reference: IsengardArmoryRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

CommandButton Command_ConstructIsengardArmory
  Command          = FOUNDATION_CONSTRUCT
  Object           = IsengardArmory
  TextLabel        = CONTROLBAR:ConstructIsengardArmory
  ButtonImage      = BIArmory
  ButtonBorderType = BUILD 
  DescriptLabel    = CONTROLBAR:ToolTipIsengardArmory1
  Radial           = Yes
End

Object IsengardArmory

	AddModule
	Behavior = GrantUpgradeCreate ModuleTag_zxvd 
		UpgradeToGrant = Upgrade_IsengardArmoryLevel2

	End 
	End

	AddModule
	Behavior = GrantUpgradeCreate ModuleTag_dcfgvd
		UpgradeToGrant = Upgrade_IsengardArmoryLevel3
	End 
	End

	ReplaceModule ModuleTag_HideAll
   	Behavior = SubObjectsUpgrade ModuleTag_HideAll1
		TriggeredBy		= Upgrade_StructureLevel1
		ShowSubObjects	= DrawFloor_Bib
		HideSubObjects	= DrawFloor_V1 V1A V2
	End
	End

	ReplaceModule Geom_ModuleTag_HideAll
	Behavior = GeometryUpgrade Geom_ModuleTag_HideAll1
		TriggeredBy		= Upgrade_StructureLevel1
		HideGeometry	= Geom_V1 Geom_V2
	End
	End

	ReplaceModule ModuleTag_ShowWalls 
  	Behavior = SubObjectsUpgrade ModuleTag_ShowWalls1
		TriggeredBy		= Upgrade_StructureLevel1 ;Upgrade_IsengardArmoryLevel2
		ShowSubObjects	= DrawFloor_V1 V1A
		HideSubObjects	= DrawFloor_Bib V2
	End
	End

	ReplaceModule Geom_ModuleTag_ShowWalls
	Behavior = GeometryUpgrade Geom_ModuleTag_ShowWalls1
		TriggeredBy		= Upgrade_StructureLevel1 ;Upgrade_IsengardArmoryLevel2
		ShowGeometry	= Geom_V1 Geom_Orig
		HideGeometry	= Geom_V2
	End
	End

	ReplaceModule ModuleTag_ShowFlagsAndTower
	Behavior = SubObjectsUpgrade ModuleTag_ShowFlagsAndTower1
		TriggeredBy		= Upgrade_StructureLevel1 ;Upgrade_IsengardArmoryLevel3
		ShowSubObjects	= DrawFloor_V1 V1A V2
		HideSubObjects	= DrawFloor_Bib
	End
	End

	ReplaceModule Geom_ModuleTag_ShowFlagsAndTower 
	Behavior = GeometryUpgrade Geom_ModuleTag_ShowFlagsAndTower1
		TriggeredBy		= Upgrade_StructureLevel1 ;Upgrade_IsengardArmoryLevel3
		ShowGeometry	= Geom_V2 Geom_Orig
		HideGeometry	= Geom_V1
	End
	End

	ReplaceModule ModuleTag_ThirdLevelBuildingArrows
  	Behavior = WeaponSetUpgrade ModuleTag_ThirdLevelBuildingArrows1
		TriggeredBy		= Upgrade_StructureLevel1 ;Upgrade_IsengardArmoryLevel3
		ConflictsWith	= Upgrade_EasyAIMultiPlayer
	End
	End


	AddModule
	Behavior = AutoDepositUpdate AutoDepositModuleTag1
		DepositTiming       = 20000   ; in milliseconds
		DepositAmount       = 20   ; cash amount to deposit every DepositTiming
		InitialCaptureBonus = 0  ; initial one time bonus for capturing this structure
	End
	End


  	BuildCost           = 0
  	BuildTime           = 160
	RefundValue			= 0

  ReplaceModule ModuleTag_05
  Body                = StructureBody ModuleTag_051
    MaxHealth 			    = 9000			
    MaxHealthDamaged		    = 6000			
	MaxHealthReallyDamaged		= 3000			
		DamageCreationList		= OCL_BuildingDamageList01 CATAPULT_ROCK
	  
		DamageCreationList		= OCL_IBArmory_Chunk1 CATAPULT_ROCK FRONT_DESTROYED
		DamageCreationList		= OCL_IBArmory_Chunk2 CATAPULT_ROCK RIGHT_DESTROYED
		DamageCreationList		= OCL_IBArmory_Chunk3 CATAPULT_ROCK BACK_DESTROYED
		DamageCreationList		= OCL_IBArmory_Chunk4 CATAPULT_ROCK LEFT_DESTROYED
  End
  End

End


;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Isengard Siege Works
;Reference: IsengardSiegeWorksRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

CommandButton Command_ConstructMordorCatapult
	Command				= UNIT_BUILD
	Object				= MordorCatapult
	Options				= CANCELABLE
	TextLabel			= CONTROLBAR:ConstructMordorCatapult
	ButtonImage			= BMGreatSiegeWorks_Catapult
	ButtonBorderType	= BUILD 
	DescriptLabel		= CONTROLBAR:ToolTipBuildMordorCatapult1
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount	= Yes
;    UnitSpecificSound   = GondorArcherVoiceBuy      
End

CommandButton Command_UpgradeIsengardSiegeWorksLevel2
	Command				= OBJECT_UPGRADE
	Object				= IsengardSiegeWorks
	Upgrade				= Upgrade_IsengardSiegeWorksLevel2
	Options				= CANCELABLE
	TextLabel			= CONTROLBAR:UpgradeIsengardSiegeWorksLevel2
	ButtonImage			= UCCommon_UpgradeStructureNew
	ButtonBorderType	= BUILD
	DescriptLabel		= CONTROLBAR:TooltipUpgradeIsengardSiegeWorksLevel21
	Radial				= Yes
End

CommandButton Command_UpgradeIsengardSiegeWorksLevel3
	Command				= OBJECT_UPGRADE
	Object				= IsengardSiegeWorks
	Upgrade				= Upgrade_IsengardSiegeWorksLevel3
	Options				= CANCELABLE
	TextLabel			= CONTROLBAR:UpgradeIsengardSiegeWorksLevel3
	ButtonImage			= UCCommon_UpgradeStructureNew
	ButtonBorderType	= BUILD
	DescriptLabel		= CONTROLBAR:TooltipUpgradeIsengardSiegeWorksLevel31
	Radial				= Yes
End

CommandSet NewIsengardSiegeWorksCommandSetLevel1
	1 = Command_ConstructMordorCatapult
	2 = Command_ConstructIsengardBallista
	3 = Command_UpgradeIsengardSiegeWorksLevel2
	6 = Command_Sell
End

CommandSet NewIsengardSiegeWorksCommandSetLevel2
	1 = Command_ConstructMordorCatapult
	2 = Command_ConstructIsengardBallista
	3 = Command_UpgradeIsengardSiegeWorksLevel3
	6 = Command_Sell
End

CommandSet NewIsengardSiegeWorksCommandSetLevel3
	1 = Command_ConstructMordorCatapult
	2 = Command_ConstructIsengardBallista
	6 = Command_Sell
End

Object IsengardSiegeWorks

  	BuildCost           = 0
  	BuildTime           = 120
	RefundValue			= 0

  ReplaceModule ModuleTag_05
  Body                = StructureBody ModuleTag_051
    MaxHealth 			    = 8000			
    MaxHealthDamaged		    = 4000			
	MaxHealthReallyDamaged		= 2000			
;    DamageCreationList		= OCL_BuildingDamageList01 CATAPULT_ROCK
  
 ;   DamageCreationList		= OCL_IBUrukPit_Chunk1 CATAPULT_ROCK FRONT_DESTROYED
  ;  DamageCreationList		= OCL_IBUrukPit_Chunk2 CATAPULT_ROCK RIGHT_DESTROYED
   ; DamageCreationList		= OCL_IBUrukPit_Chunk3 CATAPULT_ROCK BACK_DESTROYED
    ;DamageCreationList		= OCL_IBUrukPit_Chunk4 CATAPULT_ROCK LEFT_DESTROYED
  End
  End

  CommandSet = NewIsengardSiegeWorksCommandSetLevel1

	ReplaceModule ModuleTag_IsengardSiegeWorksLevel2CommandSet
	Behavior = CommandSetUpgrade ModuleTag_IsengardSiegeWorksLevel2CommandSet1
		TriggeredBy		= Upgrade_StructureLevel2
		ConflictsWith	= Upgrade_StructureLevel3
		CommandSet		= NewIsengardSiegeWorksCommandSetLevel2
	End
	End

	ReplaceModule ModuleTag_IsengardSiegeWorksLevel3CommandSet
	Behavior = CommandSetUpgrade ModuleTag_IsengardSiegeWorksLevel3CommandSet1
		TriggeredBy		= Upgrade_StructureLevel3
		CommandSet		= NewIsengardSiegeWorksCommandSetLevel3
	End
	End


End



;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Earth Realm Main Foundation
;Reference: EarthRealmMainFoundationRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

CommandSet NewIsengardFoundationCommandSet
  3  = Command_ConstructIsengardUrukPit
  4  = Command_ConstructIsengardBattleTower
  5  = Command_ConstructMordorOrcPit
  6  = Command_ConstructIsengardArmory
  7  = Command_ConstructIsengardSiegeWorks
End


Object IsengardBuildingFoundation

  ;KindOf              = STRUCTURE SELECTABLE UNATTACKABLE MP_COUNT_FOR_VICTORY NO_COLLIDE DO_NOT_CLASSIFY ;DOZER  ; PORTER ; DOZER ;BASE_FOUNDATION
  KindOf              = STRUCTURE SELECTABLE IMMOBILE BASE_FOUNDATION UNATTACKABLE MP_COUNT_FOR_VICTORY NO_COLLIDE DO_NOT_CLASSIFY
	AddModule 
  	Draw = W3DScriptedModelDraw ModuleTag_Draw_HCBanner11hfg
		OkToChangeModelColor  = Yes
		DefaultModelConditionState
			Model = IBHCBtlTwr
		End
		MultiPlayerOnly = No
  	End  
	End

;	AddModule 
;	Draw = W3DFloorDraw ModuleTag_Drawfbsfvaad
;		ModelName = IBWargSent_BIB
;	End
;	End

	AddModule 
	Draw = W3DFloorDraw ModuleTag_Drawfbsfvaadsdthy
		ModelName = MBOrcpit_Bib
	End
	End

	ReplaceModule ModuleTag_Draw
	Draw = W3DFloorDraw ModuleTag_Draw1
		ModelName = HBFoundationX
	End
	End


	CommandSet = NewIsengardFoundationCommandSet

End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Isengard Furnace
;Reference: IsengardFurnaceRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

CommandButton Command_PorterConstructIsengardFurnace
  Command          = FOUNDATION_CONSTRUCT
  Object           = IsengardFurnace
  TextLabel        = CONTROLBAR:ConstructFurnace
  ButtonImage      = BCFurnace
  ButtonBorderType = BUILD 
  DescriptLabel    = CONTROLBAR:ToolTipFurnace1
  Radial           = Yes  
End

CommandSet NewMordorFoundationCommandSet
  3  = Command_PorterConstructIsengardFurnace 
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Object IsengardFurnace

	BuildCost           		= 0
	BuildTime           		= 60
	RefundValue			= 0

	ReplaceModule ModuleTag_05
	Body                = StructureBody ModuleTag_051
		MaxHealth               = 6000
		MaxHealthDamaged        = 3000
		MaxHealthReallyDamaged  = 1500
   
		DamageCreationList		= OCL_BuildingDamageList01 CATAPULT_ROCK
  
	    DamageCreationList		= OCL_Furnace_Chunk1 CATAPULT_ROCK FRONT_DESTROYED
		DamageCreationList		= OCL_Furnace_Chunk2 CATAPULT_ROCK RIGHT_DESTROYED
		DamageCreationList		= OCL_Furnace_Chunk3 CATAPULT_ROCK BACK_DESTROYED
		DamageCreationList		= OCL_Furnace_Chunk4 CATAPULT_ROCK LEFT_DESTROYED
    
	End
	End

	AddModule
	Behavior = AutoDepositUpdate AutoDepositModuleTag1
		DepositTiming       = 6000   ; in milliseconds
		DepositAmount       = 30   ; cash amount to deposit every DepositTiming
		InitialCaptureBonus = 0  ; initial one time bonus for capturing this structure
	End
	End



	RemoveModule ModuleTag_NewMoney


End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Object MordorBaseDefenceFoundation

	Scale = 1.0

	AddModule 
  	Draw = W3DScriptedModelDraw ModuleTag_Draw_HCBanner11hfg
		OkToChangeModelColor  = Yes
		DefaultModelConditionState
			Model = MBHCFurnace
		End
		MultiPlayerOnly = No
  	End  
	End


;	ReplaceModule ModuleTag_Draw2
;	Draw = W3DScriptedModelDraw ModuleTag_Draw21
;	    DefaultModelConditionState
;			Model = OBBFoundationX
;		End
;		ModelConditionState = WORLD_BUILDER
;			Model = MBSizeTemplate
;		End;
;		
;	End
;	End

	ReplaceModule ModuleTag_Draw
	Draw = W3DFloorDraw ModuleTag_Draw1
		ModelName = MBFurnace_Bib  ;HBFoundationX
	End
	End

	AddModule 
	Draw = W3DFloorDraw ModuleTag_DrawExtra1
		ModelName = HBFoundationX
	End
	End


	CommandSet = NewMordorFoundationCommandSet

End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Outside of gate Tower
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

CommandButton Command_ConstructEvilSentryTower
  Command          = FOUNDATION_CONSTRUCT
  Object           = EvilSentryTower
  TextLabel        = CONTROLBAR:ConstructEvilSentryTower
  ButtonImage      = BISentryTwr
  ButtonBorderType = BUILD 
  DescriptLabel    = CONTROLBAR:ToolTipEvilBuildSentryTower
  Radial           = Yes  
End

Object EvilSentryTower

	BuildCost = 0
	BuildTime = 60

	ReplaceModule ModuleTag_05
	Body                      = StructureBody ModuleTag_051
		MaxHealth               = 2000.0
		MaxHealthDamaged        = 1000.0
		MaxHealthReallyDamaged  = 500.0
	End
	End

End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;E. Beast Realm Buildings
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<




;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Beast Realm Fortress
;Reference: BeastRealmFortressRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

CommandButton Command_ConstructMordorMountainTroll
	Command				= UNIT_BUILD
	Object				= MordorMountainTroll
	Options				= CANCELABLE
	TextLabel			= CONTROLBAR:ConstructMordorMountainTroll
	ButtonImage			= BMTrollCages_MountainTroll
	ButtonBorderType		= BUILD 
	DescriptLabel			= CONTROLBAR:ToolTipBuildMordorMountainTroll
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= Yes
;    UnitSpecificSound   		= GondorArcherVoiceBuy      
End


CommandButton Command_ConstructMordorAttackTroll
	Command				= UNIT_BUILD
	Object				= MordorAttackTroll
	Options				= CANCELABLE
	TextLabel			= CONTROLBAR:ConstructMordorAttackTroll
	ButtonImage			= BMTrollCages_AttackTroll
	ButtonBorderType		= BUILD 
	DescriptLabel			= CONTROLBAR:ToolTipBuildMordorAttackTroll1
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= Yes
End



CommandButton Command_ConstructGoblinTroll
	Command				= UNIT_BUILD
	Object				= GoblinCaveTroll
	Options				= CANCELABLE
	TextLabel			= CONTROLBAR:ConstructGoblinCaveTroll
	ButtonImage			= BWFissure_CaveTroll
	ButtonBorderType	= BUILD											
	DescriptLabel		= CONTROLBAR:ToolTipBuildGoblinCaveTroll1
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount	= Yes
End

CommandButton Command_ConstructWildMountainGiant
	Command				= UNIT_BUILD
	Object				= WildMountainGiant
	Options				= CANCELABLE
	TextLabel			= CONTROLBAR:ConstructWildMountainGiant
	ButtonImage			= BWFissure_Giant
	ButtonBorderType	= BUILD											
	DescriptLabel		= CONTROLBAR:ToolTipBuildWildMountainGiant1
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount	= Yes
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

CommandButton Command_PurchaseUpgradeDwarvenArcheryRangeLevel2
   Command           = OBJECT_UPGRADE
   Upgrade           = Upgrade_DwarvenArcheryRangeLevel2
   Options           = CANCELABLE
   TextLabel         = CONTROLBAR:ConstructDwarvenArcheryRangeLevel2Upgrade1
   ButtonImage       = UCCommon_UpgradeStructureNew
   ButtonBorderType  = UPGRADE
   DescriptLabel     = CONTROLBAR:ToolTipBuildDwarvenArcheryRangeLevel2Upgrade1
   Radial            = Yes
   InPalantir        = Yes
End

CommandButton Command_PurchaseUpgradeDwarvenArcheryRangeLevel3
   Command           = OBJECT_UPGRADE
   Upgrade           = Upgrade_DwarvenArcheryRangeLevel3
   Options           = CANCELABLE
   TextLabel         = CONTROLBAR:ConstructDwarvenArcheryRangeLevel3Upgrade1
   ButtonImage       = UCCommon_UpgradeStructureNew
   ButtonBorderType  = UPGRADE
   DescriptLabel     = CONTROLBAR:ToolTipBuildDwarvenArcheryRangeLevel3Upgrade1
   Radial            = Yes
   InPalantir        = Yes
End

CommandSet DwarvenArcheryRangeCommandSet1
	1 = Command_ConstructMordorMountainTroll	
	2 = Command_ConstructGoblinTroll
	3 = Command_ConstructWildMarauderHorde
	4 = Command_ConstructMordorAttackTroll	
	5 = Command_ConstructWildMountainGiant	
	6 = Command_PurchaseUpgradeDwarvenArcheryRangeLevel2

End

CommandSet DwarvenArcheryRangeCommandSet2
	1 = Command_ConstructMordorMountainTroll	
	2 = Command_ConstructGoblinTroll
	3 = Command_ConstructWildMarauderHorde
	4 = Command_ConstructMordorAttackTroll	
	5 = Command_ConstructWildMountainGiant	
	6 = Command_PurchaseUpgradeDwarvenArcheryRangeLevel3

End

CommandSet DwarvenArcheryRangeCommandSet3
	1 = Command_ConstructMordorMountainTroll	
	2 = Command_ConstructGoblinTroll
	3 = Command_ConstructWildMarauderHorde
	4 = Command_ConstructMordorAttackTroll	
	5 = Command_ConstructWildMountainGiant	

End


;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Object DwarvenArcheryRange

; This glitch is fixed, when the fortress levels up it

	ReplaceModule ModuleTag_DwarvenArcheryRangeLevel2CommandSet
	Behavior = CommandSetUpgrade ModuleTag_DwarvenArcheryRangeLevel2CommandSet1
		TriggeredBy		= Upgrade_StructureLevel2
		ConflictsWith	= Upgrade_StructureLevel3
		CommandSet		= DwarvenArcheryRangeCommandSet2
	End
	End
	
	ReplaceModule ModuleTag_DwarvenArcheryRangeLevel3CommandSet
	Behavior = CommandSetUpgrade ModuleTag_DwarvenArcheryRangeLevel3CommandSet1
		TriggeredBy		= Upgrade_StructureLevel3
		CommandSet		= DwarvenArcheryRangeCommandSet3
	End
	End


	Scale = 3.0


	AddModule
	Behavior = AutoDepositUpdate AutoDepositModuleTag1
		DepositTiming       = 6000   ; in milliseconds
		DepositAmount       = 50   ; cash amount to deposit every DepositTiming
		InitialCaptureBonus = 0  ; initial one time bonus for capturing this structure
	End
	End


	SelectPortrait = BPWCave ; WBGoblinTent


;      Model = WBGobTent5

	ReplaceModule ModuleTag_Draw
	Draw = W3DScriptedModelDraw ModuleTag_Draw1



		DefaultModelConditionState
			Model = WBGobTent5

		End

		ModelConditionState  = RUBBLE
		Model         = WBGobTent5  ;DBArchRnge_D3
		ParticleSysBone SmokeLarge01 SmokeBuildingLarge
		End

		;AnimationState = RUBBLE
		;	EnteringStateFX	= FX_StructureMediumCollapse
		;	Animation				=	RubbleAnimation
		;		AnimationName		=	DBArchRnge_D3SK.DBArchRnge_D3AN
		;		AnimationMode		=	ONCE
  		;	End
		;End
	End
	End

	RemoveModule ModuleTag_DrawFloor


	DisplayName         = OBJECT:MenFortress

	PlacementViewAngle  = 0

	CommandSet          = DwarvenArcheryRangeCommandSet1

	BuildCost           = 0			
	BuildTime           = 160			;// in seconds
	VisionRange         = 500			;// Shroud clearing distance
	ShroudClearingRange = 550

	ArmorSet
		Conditions        = None
		Armor             = NewCitadelArmor
		;//DamageFX          = StructureDamageFXNoShake
	End

; This means it wont shoot if it levels up lol.
	WeaponSet
		;Weapon				= PRIMARY RohanStructureBow
		Conditions			= PLAYER_UPGRADE
		AutoChooseSources	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End


	VoiceFullyCreated				= WildFissureSelect
	VoiceSelect						= WildFissureSelect
	VoiceSelectUnderConstruction	= BuildingEvilVoiceSelectUnderConstruction

	SoundAmbientDamaged				= BuildingDamageFireMediumLoop
	SoundAmbientReallyDamaged		= BuildingDamageFireMediumLoop
	SoundOnDamaged					= BuildingLightDamageStone
	SoundOnReallyDamaged			= BuildingHeavyDamageStone

	UnitSpecificSounds
		UnderConstruction			= BuildingConstructionLoop  ;// Built first time
		;//UnderRepairFromDamage	= NoSound					;// Repaired No animation on the building, so don't bother playing sound
		UnderRepairFromRubble		= BuildingConstructionLoop	;// Repaired from completely destroyed (not used???)
	End


	RemoveModule ModuleTag_AnimAudioBehavior



	;// *** ENGINEERING Parameters ***
	RadarPriority       = STRUCTURE
	KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE FS_FACTORY AUTO_RALLYPOINT MP_COUNT_FOR_VICTORY NEED_BASE_FOUNDATION MADE_OF_WOOD
	 
	ReplaceModule ModuleTag_04
	Behavior            = GettingBuiltBehavior ModuleTag_041
		WorkerName		  = WildLaborerNoSelect
		SpawnTimer	= 1000
	End
	End

	ReplaceModule ModuleTag_NewMoneyDeadSpot
	Behavior = TerrainResourceBehavior ModuleTag_NewMoneyDeadSpot1
		Radius			= 200		;// How far we try to claim ground
		MaxIncome		= 0			;// If we were to get all we wanted, how much we would earn.  Linear slope to 0 at 0% claim
		IncomeInterval	= 999999	;// How often (in msec) we give that much money
		HighPriority	= Yes		;// A high priority claim gets to pretend it was there first.
		Visible = No 		;// Don't show decal when a resource building is selected.
	End
	End

	ReplaceModule ModuleTag_05
	Body                      = ActiveBody ModuleTag_051
		MaxHealth               = 20000			
		MaxHealthDamaged        = 10000		
		MaxHealthReallyDamaged  = 5000	
	    
    DamageCreationList		= OCL_BuildingDamageList01 CATAPULT_ROCK
    DamageCreationList		= OCL_MBTrollPit_Chunk1 CATAPULT_ROCK FRONT_DESTROYED
    DamageCreationList		= OCL_MBTrollPit_Chunk2 CATAPULT_ROCK RIGHT_DESTROYED
    DamageCreationList		= OCL_MBTrollPit_Chunk3 CATAPULT_ROCK BACK_DESTROYED
    DamageCreationList		= OCL_MBTrollPit_Chunk4 CATAPULT_ROCK LEFT_DESTROYED
	End 
	End
	 
	 
	;// Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are 
	;// never truly destroyed, even when reduced to zero health. Also note that garrisonable
	;// buildings automatically stick around because GarrisonContain has it's own DieModule

	ReplaceModule ModuleTag_SlowDeathWithoutRubble
	Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble1
		DestructionDelay  = 7500
	End
	End

	ReplaceModule ModuleTag_Collapse
	Behavior = StructureCollapseUpdate ModuleTag_Collapse1
		MinCollapseDelay        = 000
		MaxCollapseDelay        = 000
		CollapseDamping         = .5
		MaxShudder              = 0.6
		MinBurstDelay           = 250
		MaxBurstDelay           = 800
		BigBurstFrequency       = 4
		FXList                  = INITIAL   FX_StructureMediumCollapse
		FXList                  = ALMOST_FINAL  FX_StructureAlmostCollapse
		DestroyObjectWhenDone	= Yes
		CollapseHeight			= 120
	End
	End

	RemoveModule ModuleTag_SoWeCanUseWeapon
  	RemoveModule ModuleTag_HideAll
	RemoveModule ModuleTag_ShowWalls
	RemoveModule ModuleTag_ShowPillars
	RemoveModule ModuleTag_ThirdLevelBuildingArrows

	ReplaceModule QueueProductionModuleTag
	Behavior = QueueProductionExitUpdate QueueProductionModuleTag1
		PlacementViewAngle  	= 180
   		UnitCreatePoint			= X:-10.0 Y:0.0 Z:0.0
		NaturalRallyPoint		= X:150.0 Y:5.0 Z:0.0
		ExitDelay				= STANDARD_HORDE_EXIT_DELAY		
		UseReturnToFormation	= Yes	
	End
	End

	RemoveModule BuildingModuleTag
	
	RemoveModule Geom_ModuleTag_HideAll
	RemoveModule Geom_ModuleTag_ShowWalls
	RemoveModule Geom_ModuleTag_ShowPillars

	;RemoveModule
	;RemoveModule
	;RemoveModule


	  
	Geometry	          = BOX
	GeometryName		  = Geom_Orig
	GeometryMajorRadius   = 150.0
	GeometryMinorRadius   = 110.0
	GeometryHeight        = 120.0
	GeometryOffset		  = X:0 Y:0.0 Z:0
	
	
	GeometryIsSmall       = No
	Shadow                = SHADOW_VOLUME
	BuildCompletion		  = PLACED_BY_PLAYER

	GeometryContactPoint	= X:-52		Y:-70		Z:0		Repair
	GeometryContactPoint	= X:72		Y:72	Z:0			Repair
	GeometryContactPoint	= X:36.154		Y:57.817	Z:0
	GeometryContactPoint	= X:-16.613		Y:-57.348	Z:0
	GeometryContactPoint	= X:29.704		Y:41.391	Z:75.577	Swoop
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Warg Lair
;Refererence: WargLairRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

CommandButton Command_ConstructWargFromDefectedLair
	Command				= UNIT_BUILD
	Object				= IsengardWargRiderHorde
	Options				= CANCELABLE
	TextLabel			= CONTROLBAR:ConstructWarg1
	ButtonImage			= BIWargSentry_Warg
	ButtonBorderType	= BUILD											
	DescriptLabel		= CONTROLBAR:ToolTipBuildWarg1
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount	= Yes
End

CommandSet NewNeutralWargLairCommandSet
	1 = Command_ConstructWargFromDefectedLair
End

Object NeutralWarg

	ReplaceModule ModuleTag_Slave
	Behavior = SlavedUpdate ModuleTag_Slave1
		GuardMaxRange		= 350
		GuardWanderRange	= 150
		UseSlaverAsControlForEvaObjectSightedEvents = Yes
	End
	End

	AddModule BodyModuleTag
	Body = ActiveBody BodyModuleTag1
		MaxHealth         = 800                  
		BurningDeathBehavior = Yes
		BurningDeathFX       = FX_CavalryBurningFlame
	End
	End

	WeaponSet
		Conditions = None 
		Weapon = PRIMARY    NewWargRiderWeapon
	End

End


Object WargLair

	ReplaceModule ModueTag_FactionCommandSet ; this is the new commandset!
	Behavior = CommandSetUpgrade ModueTag_FactionCommandSet1
		TriggeredBy		= Upgrade_IsengardFaction Upgrade_MordorFaction Upgrade_WildFaction Upgrade_MenFaction Upgrade_ElfFaction Upgrade_DwarfFaction
		CommandSet		= NewNeutralWargLairCommandSet
		CustomAnimAndDuration	= AnimState:USER_2 AnimTime:0
	End
	End

	AddModule
	Behavior = AutoDepositUpdate AutoDepositModuleTag
		DepositTiming       = 6000   ; in milliseconds
		DepositAmount       = 30   ; cash amount to deposit every DepositTiming
		InitialCaptureBonus = 0  ; initial one time bonus for capturing this structure
	End
	End

	Side				= Mordor

	ArmorSet
		Conditions		= None
		Armor			= StructureArmor
	End

	ReplaceModule ModuleTag_Body
	Body = ActiveBody ModuleTag_Body1
		MaxHealth				= 4000
		MaxHealthDamaged		= 2000
		MaxHealthReallyDamaged	= 1000
	End
	End

	ReplaceModule ModuleTag_Spawn
	Behavior = SpawnBehavior ModuleTag_Spawn1
		SpawnNumber			= 10
		InitialBurst		= 1
		SpawnTemplateName	= NeutralWarg
		SpawnReplaceDelay	= 60000
		CanReclaimOrphans	= Yes
	End
	End

	ReplaceModule ModuleTag_11
	Behavior = QueueProductionExitUpdate ModuleTag_111
		UnitCreatePoint			= X:0.0 Y:40.0 Z:0.0
		NaturalRallyPoint		= X:0.0 Y:90.0 Z:0.0
	End
	End

	ReplaceModule ModuleTag_ExposeDie
	Behavior = RebuildHoleExposeDie ModuleTag_ExposeDie1
		ExemptStatus		= SOLD
		HoleName			= WargLairHole
		HoleMaxHealth		= 999999999999.0             ; will not die.
		FadeInTimeSeconds	= 2.0
		TransferAttackers	= No
	End
	End



End

Object WargLairHole

	KindOf            = PRELOAD STRUCTURE SELECTABLE IMMOBILE REBUILD_HOLE CAN_SEE_THROUGH_STRUCTURE NOT_AUTOACQUIRABLE IGNORE_FOR_VICTORY UNATTACKABLE

	CommandSet			= EmptyCommandSet

	AddModule
	Body = ImmortalBody ModuleTag_ImmortalBody
		MaxHealth = 99999999
	End
	End

	Scale = 0.5

	ReplaceModule ModuleTag_RebuildHole
	Behavior = RebuildHoleBehavior ModuleTag_RebuildHole1
		WorkerRespawnDelay			= 200000 ;in milliseconds
		HoleHealthRegen%PerSecond	= 0		; 0.1 by default.
	End
	End

	AddModule
	Behavior = KeepObjectDie ModuleTag_IWantRubble
	End
	End

	RemoveModule ModuleTag_Die

	ArmorSet
		Conditions      = None
		Armor           = LairHoleArmor
	End

	AddModule
	Behavior = RebuildHoleExposeDie ModuleTag_ExposeDie1
		ExemptStatus		= SOLD
		HoleName			= WargLairHole
		HoleMaxHealth		= 999999999999.0             ; will not die.
		FadeInTimeSeconds	= 2.0
		TransferAttackers	= No
	End
	End



End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Cave Troll Lair
;Reference: CaveTrollLairRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Object CaveTroll_Slaved

	KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS TROLL_BUFF_NUGGET MONSTER CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT NO_FREEWILL_ENTER PATH_THROUGH_INFANTRY SCARY CAN_ATTACK_WALLS CREEP SCORE

	VisionRange = CREEP_VISION
	DisplayName = OBJECT:GenericCaveTroll

	AddModule
	Behavior = SlavedUpdate ModuleTag_Slave124
		GuardMaxRange		= 350
		GuardWanderRange	= 180
		UseSlaverAsControlForEvaObjectSightedEvents = Yes
	End
	End

	ReplaceModule ModuleTag_02
	Body = DelayedDeathBody ModuleTag_021
		MaxHealth				= 2500 ;BALANCE CaveTroll Health
		MaxHealthDamaged		= 250
		MaxHealthReallyDamaged	= 100
		;;RecoveryTime			= 5000
		DoHealthCheck			= No			;// Don't want to get the delayed death behaviour when we die normally.
		DelayedDeathTime		= 5000
		CanRespawn				= No			;// Unit can't get revived.
	End
	End

	AddModule
	Behavior = AIUpdateInterface ModuleTag_0312
		AutoAcquireEnemiesWhenIdle	= Yes ATTACK_BUILDINGS
		AILuaEventsList				= CreepTrollFunctions		// special version of TrollFunctions that does not start with a rock
		RampageTime					= 4470
		AttackPriority				= AttackPriority_Cavalry
	End
	End

End

Object CaveTrollLairHole

	CommandSet			= EmptyCommandSet

	KindOf            = PRELOAD STRUCTURE SELECTABLE IMMOBILE REBUILD_HOLE CAN_SEE_THROUGH_STRUCTURE NOT_AUTOACQUIRABLE IGNORE_FOR_VICTORY UNATTACKABLE

	AddModule
	Body = ImmortalBody ModuleTag_ImmortalBody
		MaxHealth = 99999999
	End
	End

	ReplaceModule ModuleTag_RebuildHole
	Behavior = RebuildHoleBehavior ModuleTag_RebuildHole1
		WorkerRespawnDelay			= 200000 ;in milliseconds
		HoleHealthRegen%PerSecond	= 0		; 0.1 by default.
	End
	End

	RemoveModule ModuleTag_Die

	ArmorSet
		Conditions      = None
		Armor           = LairHoleArmor
	End

	AddModule
	Behavior = KeepObjectDie ModuleTag_IWantRubble
	End
	End

	Scale = 0.5

	AddModule
	Behavior = RebuildHoleExposeDie ModuleTag_ExposeDie1
		ExemptStatus		= SOLD
		HoleName			= WildSpiderPitHole
		HoleMaxHealth		= 999999999999.0             ; will not die.
		FadeInTimeSeconds	= 2.0
		TransferAttackers	= No
	End
	End
End

CommandButton Command_ConstructGoblinTrollFromDefectedLair
	Command				= UNIT_BUILD
	Object				= GoblinCaveTroll_FromTrollLair
	Options				= CANCELABLE
	TextLabel			= CONTROLBAR:ConstructGoblinCaveTroll
	ButtonImage			= BWFissure_CaveTroll
	ButtonBorderType	= BUILD											
	DescriptLabel		= CONTROLBAR:ToolTipBuildGoblinCaveTroll1
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount	= Yes
End

CommandSet NewNeutralTrollCaveCommandSet
	1 = Command_ConstructGoblinTrollFromDefectedLair
End

Object CaveTrollLair

	AddModule
	Behavior = AutoDepositUpdate AutoDepositModuleTag
		DepositTiming       = 6000   ; in milliseconds
		DepositAmount       = 30   ; cash amount to deposit every DepositTiming
		InitialCaptureBonus = 0  ; initial one time bonus for capturing this structure
	End
	End

	ReplaceModule ModueTag_FactionCommandSet ; this is the new commandset!
	Behavior = CommandSetUpgrade ModueTag_FactionCommandSet1
		TriggeredBy		= Upgrade_IsengardFaction Upgrade_MordorFaction Upgrade_WildFaction Upgrade_MenFaction Upgrade_ElfFaction Upgrade_DwarfFaction
		CommandSet		= NewNeutralTrollCaveCommandSet
		CustomAnimAndDuration	= AnimState:USER_2 AnimTime:0
	End
	End

	;	CommandSet		= NewNeutralTrollCaveCommandSet

	Side				= Mordor

	ArmorSet
		Conditions		= None
		Armor			= StructureArmor
	End

	ReplaceModule ModuleTag_Body
	Body = ActiveBody ModuleTag_Body1
		MaxHealth				= 5000
		MaxHealthDamaged		= 2500
		MaxHealthReallyDamaged	= 1250
	End
	End

	ReplaceModule ModuleTag_Spawn
	Behavior = SpawnBehavior ModuleTag_Spawn1
		SpawnNumber			= 4
		InitialBurst		= 1
		SpawnTemplateName	= CaveTroll_Slaved
		SpawnReplaceDelay	= 45000
		CanReclaimOrphans	= Yes
	End
	End

	ReplaceModule ModuleTag_Exit
	Behavior = QueueProductionExitUpdate ModuleTag_111
		UnitCreatePoint			= X:0.0 Y:-40.0 Z:0.0
		NaturalRallyPoint		= X:0.0 Y:-90.0 Z:0.0
	End
	End

	ReplaceModule ModuleTag_ExposeDie
	Behavior = RebuildHoleExposeDie ModuleTag_ExposeDie1
		ExemptStatus		= SOLD
		HoleName			= CaveTrollLairHole
		HoleMaxHealth		= 999999999999.0             ; will not die.
		FadeInTimeSeconds	= 2.0
		TransferAttackers	= No
	End
	End

End


;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;F. Harad Realm Buildings And Costs
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Harad Fortress
;Reference: HaradFortressRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Object MordorKingPalace

	ArmorSet
		Conditions        = None
		Armor             = NewCitadelArmor
		DamageFX          = None
	End

  BountyValue         = 4000

	AddModule
	Behavior = AutoDepositUpdate AutoDepositModuleTag
		DepositTiming			= 8000		; in milliseconds
		DepositAmount			= 30		; cash amount to deposit every DepositTiming
		InitialCaptureBonus		= 0  ; no initial bonus
	End
	End

  CommandSet = EmptyCommandSet  ;MordorHaradrimPalaceCommandSet

	DisplayName = OBJECT:MenFortress

  ReplaceModule ModuleTag_05
  Body						= ActiveBody ModuleTag_051
    MaxHealth				      = 20000
    MaxHealthDamaged		  = 10000
	MaxHealthReallyDamaged	= 5000
    DamageCreationList		= OCL_BuildingDamageList01 CATAPULT_ROCK
  
    DamageCreationList		= OCL_MBHardPalace_Chunk1 CATAPULT_ROCK FRONT_DESTROYED
    DamageCreationList		= OCL_MBHardPalace_Chunk2 CATAPULT_ROCK RIGHT_DESTROYED
    DamageCreationList		= OCL_MBHardPalace_Chunk3 CATAPULT_ROCK BACK_DESTROYED
    DamageCreationList		= OCL_MBHardPalace_Chunk4 CATAPULT_ROCK LEFT_DESTROYED
  End
  End




End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Harad Farm and  Harad Farm Foundation
;Reference: HaradFarmRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

CommandButton Command_ConstructRohanFarm
  Command          = FOUNDATION_CONSTRUCT
  Object           = RohanFarm
  TextLabel        = CONTROLBAR:ConstructRohanFarm1
  ButtonImage      = BCFarm
  ButtonBorderType = BUILD 
  DescriptLabel    = CONTROLBAR:ToolTipRohanFarm1
  Radial           = Yes  
End

CommandSet HaradFoundationCommandSet
  1  = Command_ConstructRohanFarm
End

CommandSet NewHaradFarmCommandSet
	6	= Command_Sell
End

Object RohanFarm

	DisplayName = HaradFarm
	Description 	    = GeneratesIncome

	CommandSet          = NewHaradFarmCommandSet

	BuildCost           = 0
	BuildTime           = 30          ; in seconds
	RefundValue			= 0

	ReplaceModule ModuleTag_Draw
  	Draw = W3DScriptedModelDraw ModuleTag_Draw1


    OkToChangeModelColor  = Yes
	UseStandardModelNames = Yes
    StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD  
  
	DefaultModelConditionState
		Model = CBHaradFarm  ;GBFarm_SKN
    End

    ModelConditionState = WORLD_BUILDER
  		Model = GBFarm_WB
  	End

   
    ModelConditionState   = AWAITING_CONSTRUCTION 
      Model               = CBHaradFarm  ;GBFarm_A

		ParticleSysBone	  = NONE BuildingDoughnutCloud
		ParticleSysBone   = CONSTDUSTBONE01 BuildingContructDust FollowBone:Yes
		ParticleSysBone   = NONE BuildingContructDust FollowBone:Yes
		ParticleSysBone   = NONE SmokeBuildingLarge FollowBone:Yes
    End;

	   
    
     ;--damaged building
    ModelConditionState  = DAMAGED
		Model         = CBHaradFarm
		ParticleSysBone SmokeSmall01 FireBuildingMedium
		ParticleSysBone SmokeSmall02 FireBuildingLarge
		ParticleSysBone SmokeSmall03 SmokeBuildingLarge

    End
    AnimationState = DAMAGED
		EnteringStateFX	= FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
		Model         = CBHaradFarm
		ParticleSysBone SmokeSmall01 FireBuildingLarge
		ParticleSysBone SmokeSmall02 FireBuildingLarge
		ParticleSysBone SmokeSmall03 SmokeBuildingLarge


    End
    

    ModelConditionState  = RUBBLE
		Model         = None
		ParticleSysBone SmokeLarge01 SmokeBuildingLarge
		ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End
    
    ModelConditionState  = POST_RUBBLE
		Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    
	End
	End

	RemoveModule ModuleTag_DrawFloor 


	AddModule
	Behavior = AutoDepositUpdate AutoDepositModuleTag1asd
		DepositTiming       = 6000   ; in milliseconds
		DepositAmount       = 50   ; cash amount to deposit every DepositTiming
		InitialCaptureBonus = 0  ; initial one time bonus for capturing this structure
	End
	End

	ReplaceModule ModuleTag_05
	Body                = StructureBody ModuleTag_051
		MaxHealth         		  = 4500
		MaxHealthDamaged  		  = 2500
		MaxHealthReallyDamaged 	= 1000
    
		DamageCreationList = OCL_BuildingDamageList01 CATAPULT_ROCK
    
		DamageCreationList = OCL_GBFarm_Chunk1 CATAPULT_ROCK FRONT_DESTROYED
		DamageCreationList = OCL_GBFarm_Chunk2 CATAPULT_ROCK RIGHT_DESTROYED
		DamageCreationList = OCL_GBFarm_Chunk3 CATAPULT_ROCK BACK_DESTROYED
		DamageCreationList = OCL_GBFarm_Chunk4 CATAPULT_ROCK LEFT_DESTROYED
	End
	End

	RemoveModule AutoDepositModuleTag
	RemoveModule ModuleTag_CostModifier


  Geometry              = CYLINDER
  GeometryMajorRadius   = 63.0
  GeometryMinorRadius   = 63.0
  GeometryHeight        = 50
  GeometryOffset		= X:3 Y:1 Z:0  
  
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME


End



Object HaradBuildingFoundation

	ReplaceModule ModuleTag_Draw
    	Draw = W3DFloorDraw ModuleTag_Draw1
		ModelName = HBFoundationX
  	End
	End


  	CommandSet = HaradFoundationCommandSet

End


;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Mordor Haradrim Palace
;Reference: MordorHaradrimPalaceRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Upgrade Upgrade_MordorHaradrimPalaceLevel3
	Type		= OBJECT
	BuildCost	= 500 ; was 1000$
	BuildTime	= MORDOR_HARADRIMPALACE_LVL3_UPGRADE_TIME
	DisplayName	= UPGRADE:MordorHaradrimPalaceLevel3
End


CommandButton Command_ConstructInnMordorHaradrimHorde
	Command				= UNIT_BUILD
	Object				= DwarvenMenOfDaleHorde  ;MordorHaradrimHordeInn
	Options				= CANCELABLE
	TextLabel			= CONTROLBAR:ConstructMordorHaradrimHorde1
	ButtonImage			= BMHaradrimPalace_Haradrim
	ButtonBorderType	= BUILD 
	DescriptLabel		= CONTROLBAR:ToolTipBuildMordorHaradrimHorde1
	Radial				= Yes
	InPalantir	   		= 	Yes
	ShowProductionCount	= Yes
;    UnitSpecificSound   = GondorArcherVoiceBuy      
End


CommandSet NewMordorHaradrimPalaceCommandSetLevel1
  1	= Command_ConstructEasterlingHorde
  2	= Command_ConstructInnMordorHaradrimHorde
  3	= Command_ConstructMordorHaradrimArcherHorde
  4 	= Command_UpgradeMordorHaradrimPalaceLevel2
  6	= Command_Sell
End

CommandSet NewMordorHaradrimPalaceCommandSetLevel2
  1	= Command_ConstructEasterlingHorde
  2	= Command_ConstructInnMordorHaradrimHorde
  3	= Command_ConstructMordorHaradrimArcherHorde
  4 	= Command_UpgradeMordorHaradrimPalaceLevel3
  6	= Command_Sell
End

CommandSet NewMordorHaradrimPalaceCommandSetLevel3
  1	= Command_ConstructEasterlingHorde
  2	= Command_ConstructInnMordorHaradrimHorde
  4	= Command_ConstructMordorHaradrimArcherHorde
  6	= Command_Sell
End


Object MordorHaradrimPalace

  	BuildCost           = 0
  	BuildTime           = 90
	RefundValue			= 0

  CommandSet = NewMordorHaradrimPalaceCommandSetLevel1

  ReplaceModule ModuleTag_05
  Body						= ActiveBody ModuleTag_051
    MaxHealth				      = 3000   				; two times the health.
    MaxHealthDamaged		  = 1500      		
	MaxHealthReallyDamaged	= 750      		
    DamageCreationList		= OCL_BuildingDamageList01 CATAPULT_ROCK
  
    DamageCreationList		= OCL_MBHardPalace_Chunk1 CATAPULT_ROCK FRONT_DESTROYED
    DamageCreationList		= OCL_MBHardPalace_Chunk2 CATAPULT_ROCK RIGHT_DESTROYED
    DamageCreationList		= OCL_MBHardPalace_Chunk3 CATAPULT_ROCK BACK_DESTROYED
    DamageCreationList		= OCL_MBHardPalace_Chunk4 CATAPULT_ROCK LEFT_DESTROYED
  End
  End

	ReplaceModule ModuleTag_MordorHaradrimPalaceLevel2
	Behavior = CommandSetUpgrade ModuleTag_MordorHaradrimPalaceLevel21
		TriggeredBy		= Upgrade_MordorHaradrimPalaceLevel2
		ConflictsWith	= Upgrade_MordorHaradrimPalaceLevel3
		CommandSet		= NewMordorHaradrimPalaceCommandSetLevel2
	End
	End

	ReplaceModule ModuleTag_MordorHaradrimPalaceLevel3
	Behavior = CommandSetUpgrade ModuleTag_MordorHaradrimPalaceLevel31
		TriggeredBy		= Upgrade_MordorHaradrimPalaceLevel3
		CommandSet		= NewMordorHaradrimPalaceCommandSetLevel3
	End
	End



End


;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Mordor Mumakil Pen
;Reference: MordorMumakilPenRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

CommandButton Command_ConstructMordorMumakil
	Command				= UNIT_BUILD
	Object				= MordorMumakil
	Options				= CANCELABLE
	TextLabel			= CONTROLBAR:ConstructMordorMumakil1
	ButtonImage			= BMMumakilPen_Mumakil
	ButtonBorderType	= BUILD 
	DescriptLabel		= CONTROLBAR:ToolTipBuildMordorMumakil1
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount	= Yes
End

CommandSet MordorMumakilPenCommandSetLevel1
  1	= Command_ConstructMordorMumakil
  2 = Command_UpgradeMordorMumakilPenLevel2
  6	= Command_Sell
End


Object MordorMumakilPen

  BuildCost           = 0
  BuildTime           = 160


  ReplaceModule ModuleTag_05
  Body                = StructureBody ModuleTag_051
    MaxHealth         		= 4000
    MaxHealthDamaged  		= 2000
	MaxHealthReallyDamaged 	= 1000
	
	DamageCreationList = OCL_BuildingDamageList01 CATAPULT_ROCK
    
    DamageCreationList = OCL_MBMumkPenD2_Chunk1 CATAPULT_ROCK FRONT_DESTROYED
 ;   DamageCreationList = OCL_MBMumkPenD2_Chunk2 CATAPULT_ROCK RIGHT_DESTROYED
    DamageCreationList = OCL_MBMumkPenD2_Chunk3 CATAPULT_ROCK BACK_DESTROYED
    DamageCreationList = OCL_MBMumkPenD2_Chunk4 CATAPULT_ROCK LEFT_DESTROYED
  End
  End


End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Main Harad Building Foundation
;Reference: MainHaradBuildingFoundationRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

CommandButton Command_PorterConstructMordorHaradrimPalace
  Command          = FOUNDATION_CONSTRUCT
  Object           = MordorHaradrimPalace
  TextLabel        = CONTROLBAR:ConstructMordorHaradrimPalace1
  ButtonImage      = BMHaradrimPalace
  ButtonBorderType = BUILD 
  DescriptLabel    = CONTROLBAR:ToolTipMordorHaradrimPalace1
  Radial           = Yes  
End

CommandButton Command_PorterConstructMumakilPen
  Command          = FOUNDATION_CONSTRUCT
  Object           = MordorMumakilPen
  TextLabel        = CONTROLBAR:ConstructMordorMumakilPen1
  ButtonImage      = BMMumakilPen
  ButtonBorderType = BUILD 
  DescriptLabel    = CONTROLBAR:ToolTipMordorMumakilPen1
  Radial           = Yes  
End


CommandSet MainHaradFoundationCommandSet
  1  = Command_PorterConstructMordorHaradrimPalace
  2  = Command_PorterConstructMumakilPen
End

Object RohanBuildingFoundation

	ReplaceModule ModuleTag_Draw
   	Draw = W3DFloorDraw ModuleTag_Draw1
      		ModelName = RBFoundationX
  	End
	End


  	Side                = Mordor

  	CommandSet = MainHaradFoundationCommandSet


End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;The 6 Great Valar
;Reference: ValarRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

; The Valar Can not be attacked or hurt. just to make sure all armors 
; are at 0% that means it takes 0% of all damages, 9999999 damage times 0 = 0 right? lol
; its built into main ini so when an armor type is at 0% that type of sword cant attack it, therefore
; Nothing can attack a Valar, not even fire burning on the ground, not even god himself.

Armor ValarArmor
  Armor = DEFAULT         0%   
End

CommandSet ValarCommandSet
  	1	= Command_Stop
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Valar Fire Realm
;Reference: ValarFireRealmRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<


;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Fx
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

FXParticleSystem ValarFireRealmFireStaff1
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXFire03.tga  ;EXSplatHaze.tga
    Lifetime = 30 30
    SortLevel = 1
    Size = 6 6
    BurstCount = 1 1
    InitialDelay = 5 5
    IsParticleUpTowardsEmitter = Yes
  End
  Color = DefaultColor
    Color2 = R:185 G:106 B:40 5
    Color3 = R:255 G:106 B:40 20
  End
  Update = DefaultUpdate
    SizeRate = -0.25 -0.25
    SizeRateDamping = 1 1
    AngleZ = -7 7
    AngularDamping = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
    Gravity = 0.01
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = LineEmissionVolume
    StartPoint = X:26 Y:0 Z:0
    EndPoint = X:0 Y:0 Z:0
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem ValarFireRealmFireStaff2
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXBoltradial.tga  ;EXleadership2.tga  ;EXBarbstreaks.tga ;EXBlast4.tga ;EXldrshplvl3b.tga ;EXleadership2.tga ; EXBoltradial.tga ;EXdagonhead.tga ;EXSplatHaze.tga
    Lifetime = 5 5
    SortLevel = 1
    Size = 10 10
    BurstCount = 1 1
    BurstDelay = 10 10
    InitialDelay = 5 5
    IsParticleUpTowardsEmitter = Yes
  End
  Color = DefaultColor
    Color2 = R:150 G:180 B:245 5
;    Color3 = R:200 G:200 B:180 20
  End
  Update = DefaultUpdate
    SizeRate = -0.25 -0.25
    SizeRateDamping = 1 1
    AngleZ = -7 7
    AngularDamping = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = LineEmissionVolume
    StartPoint = X:27 Y:0 Z:0
    EndPoint = X:26 Y:0 Z:0
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem ValarFireRealmGlow
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXGlow02.tga
    Lifetime = 40 40
    SortLevel = 1
    BurstDelay = 1 1
    Size = 40 40
    BurstCount = 1 1
    IsGroundAligned = Yes
  End
  Color = DefaultColor
    Color2 = R:49 G:40 B:40 10
    Color3 = R:0 G:0 B:0 20
  End
  Alpha = DefaultAlpha
    Alpha1 = 1 1 0
  End
  Update = DefaultUpdate
    SizeRate = 4.5 4.5
    SizeRateDamping = 0.7 0.8
    AngleZ = -7 7
    AngularRateZ = -0.2 0.2
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = LineEmissionVolume
    EndPoint = X:0 Y:0 Z:25
  End
  Draw = DefaultDraw
  End
End


FXParticleSystem ValarFireRealmSmudge
  System
    Priority = ALWAYS_RENDER
    Shader = ALPHA
    ParticleName = SMUDGE.tga
    Lifetime = 10 10
    Size = 40 40
    BurstCount = 1 1
  End
  Color = DefaultColor
    Color1 = R:255 G:255 B:255 0
  End
  Alpha = DefaultAlpha
    Alpha1 = 1 1 0
  End
  Update = DefaultUpdate
    SizeRate = 1 1
    SizeRateDamping = 0.9 0.95
    AngleZ = 0.0025 0.005
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.96 0.97
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = -2 2
    Z = -1 1
  End
  EmissionVolume = LineEmissionVolume
    IsHollow = Yes
    StartPoint = X:0 Y:0 Z:10
    EndPoint = X:0 Y:0 Z:30
  End
  Draw = DefaultDraw
  End
End


;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Fire Realm Valar Object
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

MappedImage ValarFireRealmS
	Texture = mpmountdoom.tga  ;BuildingRadialbuttons_013.tga
	TextureWidth = 94
	TextureHeight = 94
	Coords = Left:0 Top:0 Right:73 Bottom:73
	Status = NONE
End

MappedImage ValarFireRealmB
	Texture = mpmountdoom.tga  ;BuildingRadialbuttons_013.tga
	TextureWidth = 84
	TextureHeight = 84
	Coords = Left:0 Top:0 Right:63 Bottom:63
	Status = NONE
End
Object RohanEowyn

	Scale = 1.3

;	SelectPortrait = HPEomer
;	ButtonImage = HIEomer

	SelectPortrait = ValarFireRealmS
	ButtonImage = ValarFireRealmB

	DisplayName = ValarOfFire

	CommandSet = ValarCommandSet

	WeaponSet
		Conditions          = None
		Weapon              = PRIMARY		None
		AutoChooseSources	= TERTIARY		NONE
	End

	ArmorSet
		Conditions      = None
		Armor           = ValarArmor
		DamageFX        = NormalDamageFX
	End

	ShockwaveResistance = SHOCKWAVE_RESISTANCE_ALWAYS ; can never lose footing and can never be kocked back by anything.

	VisionRange = 100				
	ShroudClearingRange = 150

	VoiceAttack			= SauronVoiceAttack
	VoiceAttackCharge		= SauronVoiceAttack
	VoiceAttackMachine	= SauronVoiceAttack
	VoiceAttackStructure	= SauronVoiceAttack
	VoiceFear 			= SauronVoiceAttack
	;VoiceCreated		= EomerVoiceSalute		;this conflicts with his respawn dialogue line -- rehooked to spawn FX
	;VoiceFullyCreated 	= EomerVoiceSalute		;this conflicts with his respawn dialogue line -- rehooked to spawn FX
	VoiceMove			= SauronVoiceMove
	VoiceMoveToCamp		= SauronVoiceMove
	VoiceMoveWhileAttacking	= SauronVoiceMove
	VoicePriority		= 99
	VoiceRetreatToCastle	= SauronVoiceMove
	VoiceSelect			= SauronVoiceSelect
	VoiceSelectBattle 	= SauronVoiceSelect
	VoiceGuard			= SauronVoiceSelect

	SoundImpact			= ImpactHorse

	UnitSpecificSounds
		VoiceGarrison						= EomerVoiceGarrison
		VoiceEnterUnitElvenTransportShip	= SauronVoiceSelect
		VoiceInitiateCaptureBuilding		= SauronVoiceSelect
	End

	RadarPriority = UNIT

	;This should make it completely unattackible and follow the rules of War of the realms, the valar will Not interact with anything.
	KindOf = HERO PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE ATTACK_NEEDS_LINE_OF_SIGHT IGNORES_SELECT_ALL UNATTACKABLE DONT_HIDE_IF_FOGGED REVEAL_TO_ALL ; NO_COLLIDE DO_NOT_CLASSIFY

	;Remove the normal health
	RemoveModule ModuleTag_RespawnBody

	; and replace it with a new immortalbody!
	AddModule
	Body = ImmortalBody ModuleTag_ImmortalBody
		MaxHealth = 10000
	End
	End

	AddModule
	Behavior = ExperienceLevelCreate ModuleTag_MPLevelBonus
		LevelToGrant = 10
		MPOnly = No
	End
	End

	; All valar will go 50
	LocomotorSet
		Locomotor = HeroHumanLocomotor
		Condition = SET_NORMAL 
		Speed     = 50
	End


	EvaEventDieOwner 		= none

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Animations models etc.
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

	AddModule
	Behavior = GrantUpgradeCreate ModuleTag_1
		UpgradeToGrant = Upgrade_AragornBladeMaster
	End 
	End

; lm_barduricon.tga decal_i_level4.tga   ;cusheep.tga    ;mugntspdrbannercarrier.tga  ;DrogothArmor.tga  ;GUGandalf.tga cugretb.tga

	AddModule
	Behavior = SubObjectsUpgrade Body_471438
		TriggeredBy			   = Upgrade_AragornBladeMaster
		UpgradeTexture		   = CHWZ_WD.tga	0 mubalrog.tga
		RecolorHouse		   = No
	End
	End

	AddModule
	Behavior = SubObjectsUpgrade ModuleTag_Upgrade1
	TriggeredBy			   = Upgrade_AragornBladeMaster

	HideSubObjects		   = SLDR_01
	HideSubObjects		   = SLDR_02


	HideSubObjects		   = HLMT_01
	HideSubObjects		   = HLMT_02
	HideSubObjects		   = HLMT_03
	;HideSubObjects		   = HLMT_04
	;HideSubObjects		   = HLMT_05
	HideSubObjects		   = HLMT_06
	;HideSubObjects		   = HLMT_07

	HideSubObjects		   = HAIR_01

	HideSubObjects		   = GNLT_01
	HideSubObjects		   = GNLT_02
	HideSubObjects		   = GNLT_03

	HideSubObjects		   = Shield_1OG
	HideSubObjects		   = Shield_2OG
	HideSubObjects		   = SHLD_01
	HideSubObjects		   = SHLD_02

	HideSubObjects		   = BOOT_01
	HideSubObjects		   = BOOT_02
	HideSubObjects		   = BOOT_03
	HideSubObjects		   = Gurthang

	HideSubObjects		   = BARREL

	FadeTimeInSeconds      = 0.0
	End
	End

;CHWZ_YW_U_SKN
;CHWZ_YW_C_SKN
;CHWZ_AV_U_SKN
;CHWZ_AV_C_SKN

	;Draw module
	ReplaceModule ModuleTag_DRAW
	Draw = W3DScriptedModelDraw ModuleTag_DRAW1

		GlowEnabled = Yes

		DefaultModelConditionState
			Model               		= CHWZ_AV_U_SKN
			Skeleton            		= CHWZ_YW_U_SKL
			WeaponLaunchBone	 = PRIMARY WizStaff02_FXBO
			ParticleSysBone = B_STAFF ValarFireRealmFireStaff1 FollowBone:Yes
			ParticleSysBone = B_STAFF ValarFireRealmFireStaff2 FollowBone:Yes
			ParticleSysBone = None ValarFireRealmSmudge FollowBone:Yes
			ParticleSysBone = None ValarFireRealmGlow FollowBone:Yes
		End

		
//------------------ MOVING -------------------------------------------------------------


		//--- Running with sword
		AnimationState			= MOVING
			StateName           = STATE_RunningSword
			Flags               = RANDOMSTART
			//ParticleSysBone    = None InfantryDustTrails
			Animation
				AnimationName   = CHWZ_YW_U_RUNA
//				AnimationMode   = LOOP
				AnimationSpeedFactorRange = 1.0 1.0	
//				Distance = 28
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Bow" then CurDrawableSetTransitionAnimState("TRANS_BowToSword") end
				if Prev == "STATE_RunningBow" then CurDrawableSetTransitionAnimState("TRANS_BowToSword_Running") end
				if Prev == "STATE_Rappelling"  then CurDrawableSetTransitionAnimState("Trans_RappellingToRunning") return end
			EndScript
		End


		
//-------------------- HIT REACTIONS -----------------------------------------------------------


		AnimationState = HIT_REACTION
			Animation = Sword_HITA
				AnimationName = CHWZ_YW_U_HITA
				AnimationMode = ONCE
			End
			Animation = Sword_HITB
				AnimationName = CHWZ_YW_U_HITB
				AnimationMode = ONCE
			End

			BeginScript
				PrevAnim = CurDrawablePrevAnimation()
				if PrevAnim == "Foot_IDLB"
				then
					return "Sword_HITB"
				else
					return "Swort_HITA"
				end
			EndScript
		End

		AnimationState				= LEVELED 						// This state clears itself in 3 seconds
			Animation				= LevelUp
				AnimationName		= CHWZ_YW_U_CHRA CHSS_UK_U_LVLA
				AnimationMode		= ONCE
			End
		End

//---------------------- EMOTIONS ---------------------------------------------------------------



		// cheer, on foot
		AnimationState				=	EMOTION_CELEBRATING
			Animation CHRA
				AnimationName		=	CHWZ_YW_U_CHRA CHWZ_YW_U_TNTA 
				AnimationMode		=	ONCE
			End
			Animation CHRB
				AnimationName		=	CHWZ_YW_U_CHRB CHWZ_YW_U_CHRA CHWZ_YW_U_TNTA 
				AnimationMode		=	ONCE
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End

		
;		// taunt, on foot
;		AnimationState				=	EMOTION_TAUNTING
;			Animation CHRA
;				AnimationName		=	CHWZ_YW_U_TNTA 
;				AnimationMode		=	ONCE
;			End
;			Animation CHRB
;				AnimationName		=	CHWZ_YW_U_TNTB CHWZ_YW_U_TNTA
;				AnimationMode		=	ONCE
;			End
;			Flags					=	RESTART_ANIM_WHEN_COMPLETE
;		End
		
		


//====== ENGAGED
		AnimationState				= ENGAGED
			StateName				= STATE_ready
			Animation
				AnimationName		= CHWZ_YW_U_IDLA
				AnimationMode		= ONCE
			End
		End
		
		IdleAnimationState
			StateName					= STATE_Idle_Sword	
			Animation = Foot_IDLB ; Bored Idle
				AnimationName       = CHWZ_YW_U_IDLB
				AnimationMode       = ONCE
				AnimationPriority   = 30
			End
			Animation = Foot_IDLC ; Bored Fidget
				AnimationName       = CHWZ_YW_U_IBFA
				AnimationMode       = ONCE
				AnimationPriority   = 1
			End
			Animation = Foot_IDLD ; Bored Fidget
				AnimationName       = CHWZ_YW_U_IBFB
				AnimationMode       = ONCE
				AnimationPriority   = 1
			End
			Animation = Foot_IDLE ; Bored Fidget
				AnimationName       = CHWZ_YW_U_WPNA
				AnimationMode       = ONCE
				AnimationPriority   = 1
			End

			Animation = Foot_IDLF ; Bored Fidget
				AnimationName       = CHWZ_YW_U_SPCB
				AnimationMode       = ONCE
				AnimationPriority   = 1
			End

			Animation = Foot_IDLG ; Bored Fidget
				AnimationName       = CHWZ_YW_U_IBFA
				AnimationMode       = ONCE
				AnimationPriority   = 1
				AnimationSpeedFactorRange = 0.5 0.5
				AnimationBlendTime = 30
			End

			Animation = Foot_IDLH ; Bored Fidget
				AnimationName       = CHWZ_YW_U_WPNA
				AnimationMode       = ONCE
				AnimationPriority   = 1
				AnimationSpeedFactorRange = 0.5 0.5
				AnimationBlendTime = 5
			End

			BeginScript
				CurDrawableHideSubObject("arrow")
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Selected_Sword" then CurDrawableSetTransitionAnimState("TRANS_SelectedToBoredSword") end
				if Prev == "STATE_Idle_Bow" then CurDrawableSetTransitionAnimState("TRANS_BowToSword") end
			EndScript
		End
		

	//---transitions--------------------------------------------

		TransitionState = TRANS_BoredToSelectedSword
		// Once we have proper animations for enter -> idle -> exit, fix this properly.
			Animation = ANTD
				AnimationName	= CHWZ_YW_U_ATNA CHWZ_YW_U_ATND CHWZ_YW_U_IDLA
				AnimationMode	= ONCE
			End		
		End
		
		TransitionState = TRANS_SelectedToBoredSword
			Animation			= ATNF
				AnimationName	= CHWZ_YW_U_ATNC CHWZ_YW_U_ATNF CHWZ_YW_U_ATNE
				AnimationMode	= ONCE
			End		
		End	
		


		TransitionState       = TRANS_BowToSword
			Animation           = CUHero_STHA
				AnimationName     = CHWZ_YW_B_STHA
				AnimationMode     = ONCE
			End
		End



		TransitionState       		= TRANS_BowToSword_Running
			Animation           	= DrawSwords
				AnimationName       = CHWZ_YW_B_STHB
				AnimationMode       = ONCE
			End
		End
		

	End
	End

End








;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Valar Green Realm
;Reference: ValarGreenRealmRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

FXParticleSystem ValarGreenRealmWeapon1
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXFire03.tga  ;EXSplatHaze.tga
    Lifetime = 10 10
    SortLevel = 1
    Size = 5 5
    BurstCount = 2 2
    ;BurstDelay = 3 3
    InitialDelay = 1 1
    IsParticleUpTowardsEmitter = Yes
  End
  Color = DefaultColor
    Color2 = R:20 G:120 B:40 5
    Color3 = R:255 G:106 B:40 20
  End
  Update = DefaultUpdate
    SizeRate = 0.05 0.05
    SizeRateDamping = 1 1
    AngleZ = -7 7
    AngularDamping = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
    Gravity = 0.001
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = LineEmissionVolume
    StartPoint = X:0 Y:0 Z:25
    EndPoint = X:0 Y:0 Z:1
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem ValarGreenRealmWeapon2
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXFire03.tga  ;EXSplatHaze.tga
    Lifetime = 5 5
    SortLevel = 1
    Size = 8 8
    BurstCount = 2 2
    ;BurstDelay = 3 3
    InitialDelay = 1 1
    IsParticleUpTowardsEmitter = Yes
  End
  Color = DefaultColor
    Color2 = R:20 G:120 B:40 5
    Color3 = R:255 G:106 B:40 20
  End
  Update = DefaultUpdate
    SizeRate = 0.05 0.05
    SizeRateDamping = 1 1
    AngleZ = -7 7
    AngularDamping = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
    Gravity = 0.001
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = LineEmissionVolume
    StartPoint = X:-3 Y:3 Z:25
    EndPoint = X:-3 Y:3 Z:1
  End
  Draw = DefaultDraw
  End
End

;SMUDGE.tga  ;EXBoltradial.tga  ;EXleadership2.tga  ;EXBarbstreaks.tga ;EXBlast4.tga ;EXldrshplvl3b.tga ;EXleadership2.tga ; EXBoltradial.tga ;EXdagonhead.tga ;EXSplatHaze.tga

FXParticleSystem ValarGreenRealmGlow
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXGlow02.tga
    Lifetime = 40 40
    SortLevel = 1
    BurstDelay = 1 1
    Size = 40 40
    BurstCount = 1 1
    IsGroundAligned = Yes
  End
  Color = DefaultColor
    Color2 = R:40 G:48 B:40 10
    Color3 = R:0 G:0 B:0 20
  End
  Alpha = DefaultAlpha
    Alpha1 = 1 1 0
  End
  Update = DefaultUpdate
    SizeRate = 4.5 4.5
    SizeRateDamping = 0.7 0.8
    AngleZ = -7 7
    AngularRateZ = -0.2 0.2
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = LineEmissionVolume
    EndPoint = X:0 Y:0 Z:25
  End
  Draw = DefaultDraw
  End
End


FXParticleSystem ValarGreenRealmSmudge
  System
    Priority = ALWAYS_RENDER
    Shader = ALPHA
    ParticleName = SMUDGE.tga
    Lifetime = 10 10
    Size = 50 50
    BurstCount = 1 1
  End
  Color = DefaultColor
    Color1 = R:255 G:255 B:255 0
  End
  Alpha = DefaultAlpha
    Alpha1 = 1 1 0
  End
  Update = DefaultUpdate
    SizeRate = 1 1
    SizeRateDamping = 0.9 0.95
    AngleZ = 0.0025 0.005
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.96 0.97
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = -2 2
    Z = -1 1
  End
  EmissionVolume = LineEmissionVolume
    IsHollow = Yes
    StartPoint = X:0 Y:0 Z:10
    EndPoint = X:0 Y:0 Z:-5
  End
  Draw = DefaultDraw
  End
End


;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Fire Realm Valar Object
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

MappedImage ValarGreenRealmS
	Texture = mpfangorn.tga   ;BuildingRadialbuttons_020.tga  ;285_rt_r1.tga
	TextureWidth = 144
	TextureHeight = 144
	Coords = Left:0 Top:0 Right:93 Bottom:93
	Status = NONE
End

MappedImage ValarGreenRealmB
	Texture = mpfangorn.tga   ;BuildingRadialbuttons_020.tga  ;285_rt_r1.tga
	TextureWidth = 84
	TextureHeight = 84
	Coords = Left:0 Top:0 Right:63 Bottom:63
	Status = NONE
End

Object GondorAragorn

	RemoveModule ModuleTag_Leadership
	RemoveModule ModuleTag_TheodenLeadership
	RemoveModule ModuleTag_TheodenLeadershipUpdate

	Scale = 1.4


	SelectPortrait = ValarGreenRealmS
	ButtonImage = ValarGreenRealmB

	DisplayName = ValarOfLife

	CommandSet = ValarCommandSet

	WeaponSet
		Conditions          = None
		Weapon              = PRIMARY		None
		AutoChooseSources	= TERTIARY		NONE
	End

	ArmorSet
		Conditions      = None
		Armor           = ValarArmor
		DamageFX        = NormalDamageFX
	End

	ShockwaveResistance = SHOCKWAVE_RESISTANCE_ALWAYS ; can never lose footing and can never be kocked back by anything.

	VisionRange = 100				
	ShroudClearingRange = 150

	VoiceAttack			= SauronVoiceAttack
	VoiceAttackCharge		= SauronVoiceAttack
	VoiceAttackMachine	= SauronVoiceAttack
	VoiceAttackStructure	= SauronVoiceAttack
	VoiceFear 			= SauronVoiceAttack
	;VoiceCreated		= EomerVoiceSalute		;this conflicts with his respawn dialogue line -- rehooked to spawn FX
	;VoiceFullyCreated 	= EomerVoiceSalute		;this conflicts with his respawn dialogue line -- rehooked to spawn FX
	VoiceMove			= SauronVoiceMove
	VoiceMoveToCamp		= SauronVoiceMove
	VoiceMoveWhileAttacking	= SauronVoiceMove
	VoicePriority		= 99
	VoiceRetreatToCastle	= SauronVoiceMove
	VoiceSelect			= SauronVoiceSelect
	VoiceSelectBattle 	= SauronVoiceSelect
	VoiceGuard			= SauronVoiceSelect

	SoundImpact			= ImpactHorse

	UnitSpecificSounds
		VoiceGarrison						= EomerVoiceGarrison
		VoiceEnterUnitElvenTransportShip	= SauronVoiceSelect
		VoiceInitiateCaptureBuilding		= SauronVoiceSelect
	End

	CrowdResponseKey = GoodMen

	RadarPriority = UNIT

	;This should make it completely unattackible and follow the rules of War of the realms, the valar will Not interact with anything.
	KindOf = HERO PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE ATTACK_NEEDS_LINE_OF_SIGHT IGNORES_SELECT_ALL UNATTACKABLE DONT_HIDE_IF_FOGGED REVEAL_TO_ALL ;NO_COLLIDE DO_NOT_CLASSIFY

	;Remove the normal health
	RemoveModule ModuleTag_RespawnBody

	; and replace it with a new immortalbody!
	AddModule
	Body = ImmortalBody ModuleTag_ImmortalBody
		MaxHealth = 99999999
	End
	End

	AddModule
	Behavior = ExperienceLevelCreate ModuleTag_MPLevelBonus
		LevelToGrant = 10
		MPOnly = No
	End
	End

	; All valar will go 50
	LocomotorSet
		Locomotor = HeroHumanLocomotor
		Condition = SET_NORMAL 
		Speed     = 50
	End


	EvaEventDieOwner 		= none

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Animations models etc.
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<


	AddModule
	Behavior = GrantUpgradeCreate ModuleTag_1
		UpgradeToGrant = Upgrade_GandalfWhite  ;
	End 
	End

;	AddModule
;	Behavior = SubObjectsUpgrade Body_zdhzd
;		TriggeredBy			   = Upgrade_GandalfWhite
;		UpgradeTexture		   = guaragorn_rotk.tga		0 CUHerob.tga  ;mushelob.tga  ;EUElrond.tga  ;guaragorn_rotk.tga
;		UpgradeTexture		   = GUAragfel.tga		0 guaragorn_rotk_m.tga
;		RecolorHouse		   = No
;	End
;	End

	ReplaceModule ModuleTag_DRAW
	Draw = W3DScriptedModelDraw ModuleTag_DRAW1

		GlowEnabled = Yes;

		OkToChangeModelColor = Yes
	StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD

		DefaultModelConditionState
			Model               = GUAragorn_SKNM
			;ParticleSysBone = B_SWORDBONE ValarGreenRealmWeapon1 FollowBone:Yes
			ParticleSysBone = None ValarGreenRealmGlow FollowBone:Yes
			ParticleSysBone = BAT_HEAD ValarGreenRealmSmudge FollowBone:Yes
		End

		TransitionState				= TRANS_boredToAttention
			Animation				= GUAragorn_ATND
				AnimationName		= GUAragorn_SKL.GUAragorn_ATND 
				AnimationMode		= ONCE
			End
			;FXEvent	= Name: FX_ElendilGlowEvent
			;ParticleSysBone = B_SWORDBONE ValarGreenSwordFlare FollowBone:Yes
			ParticleSysBone = B_SWORDBONE ValarGreenRealmWeapon1 FollowBone:Yes
		End
		
		TransitionState				= TRANS_attentionToBored
			Animation				= GUAragorn_ATND
				AnimationName		= GUAragorn_SKL.GUAragorn_ATND
				AnimationMode		= ONCE_BACKWARDS
			End
			Flags					= START_FRAME_LAST
			ParticleSysBone = B_SWORDBONE ValarGreenRealmWeapon1 FollowBone:Yes
		End

	; --- Idle Anims
		IdleAnimationState
			StateName				= STATE_bored
			
			Animation				= GUAragorn_IDLE		;no_fidget
				AnimationName		= GUAragorn_SKL.GUAragorn_IDLE
				AnimationMode		= ONCE
				AnimationPriority	= 30
			End
			
			Animation				= GUAragorn_IDLF		;fidget
				AnimationName		= GUAragorn_SKL.GUAragorn_IDLF
				AnimationMode		= ONCE
				AnimationPriority	= 1
			End

			Animation				= GUAragorn_IDLD		;fidget
				AnimationName		= GUAragorn_SKL.GUAragorn_ATKP
				AnimationMode		= ONCE
				AnimationPriority	= 1
				AnimationBlendTime	=	10
				AnimationSpeedFactorRange = 0.6 0.6
			End

			Animation				= GUAragorn_IDLDG	;fidget
				AnimationName		= GUAragorn_SKL.GUAragorn_CHRB
				AnimationMode		= ONCE
				AnimationPriority	= 1
				AnimationBlendTime	=	10
				AnimationSpeedFactorRange = 0.6 0.6
			End

			Animation				= GUAragorn_IDLDH	;fidget
				AnimationName		= GUAragorn_SKL.GUAragorn_IDLA
				AnimationMode		= ONCE
				AnimationPriority	= 1
				AnimationBlendTime	=	30
				AnimationSpeedFactorRange = 0.9 0.9
			End

			Animation				= GUAragorn_IDLDI	;fidget
				AnimationName		= GUAragorn_SKL.GUAragorn_ATKN
				AnimationMode		= ONCE
				AnimationPriority	= 1
				AnimationBlendTime	=	20
				AnimationSpeedFactorRange = 0.9 0.9
			End
			
			ParticleSysBone = B_SWORDBONE ValarGreenRealmWeapon1 FollowBone:Yes

			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if	Prev == "STATE_attention" or
					Prev == "STATE_running" or
					Prev == "OATH_BREAKERS" then CurDrawableSetTransitionAnimState("TRANS_attentionToBored") end
			EndScript
		End	

	; --- Moving Anims	
		AnimationState				= MOVING
			StateName				= STATE_running
			
			Animation				= GUAragorn_RUNB
				AnimationName		= GUAragorn_SKL.GUAragorn_RUNB
				AnimationMode		= LOOP
				AnimationSpeedFactorRange = 0.7 0.7
				AnimationBlendTime	=	5
			End
			ParticleSysBone = B_SWORDBONE ValarGreenRealmWeapon2 FollowBone:Yes
		End

		AnimationState				= LEVELED	; This state clears itself in 3 seconds
			Animation				= LevelUp
				AnimationName		= GUAragorn_SKL.GUAragorn_ATKO
				AnimationMode		= ONCE
			End
			ParticleSysBone = B_SWORDBONE ValarGreenRealmWeapon1 FollowBone:Yes
		End

		
		
		
	; --------- Click and Hit Reactions ------------

		AnimationState				= HIT_REACTION HIT_LEVEL_3
			StateName				= STATE_bored
			Animation				= Hit_Level_1_b
				AnimationName		= GUAragorn_SKL.GUAragorn_HITB
				AnimationMode		= ONCE
			End
			ParticleSysBone = B_SWORDBONE ValarGreenRealmWeapon1 FollowBone:Yes
		End
		
	;----Emotion Animations

;		AnimationState				= EMOTION_CELEBRATING
;			StateName				= STATE_ready
;			Animation				= CHRB
;				AnimationName		= GUAragorn_SKL.GUAragorn_CHRB
;				AnimationMode		= ONCE
;				AnimationPriority	= 1
;			End
;			ParticleSysBone = B_SWORDBONE ValarGreenRealmWeapon1 FollowBone:Yes
;			Flags					= RESTART_ANIM_WHEN_COMPLETE				
;		End
		
;		AnimationState				= EMOTION_TAUNTING
;			StateName				= STATE_ready
;			Animation				= CHRB
;				AnimationName		= GUAragorn_SKL.GUAragorn_CHRB
;				AnimationMode		= ONCE
;				AnimationPriority	= 1
;			End
;			ParticleSysBone = B_SWORDBONE ValarGreenRealmWeapon1 FollowBone:Yes
;			Flags					= RESTART_ANIM_WHEN_COMPLETE	
;			ParticleSysBone = B_SWORDBONE ValarGreenSwordFlare FollowBone:Yes			
;		End
		
;		AnimationState				= EMOTION_ALERT
;			StateName				= STATE_ready
;			Animation				= IDLA
;				AnimationName		= GUAragorn_SKL.GUAragorn_IDLA
;				AnimationMode		= ONCE
;				AnimationPriority	= 1
;			End
;			ParticleSysBone = B_SWORDBONE ValarGreenRealmWeapon1 FollowBone:Yes
;			ParticleSysBone = B_SWORDBONE ValarGreenSwordFlare FollowBone:Yes
;		End

		AnimationState				= EMOTION_MORALE_HIGH
			StateName				= STATE_ready
			Animation				= ATKN
				AnimationName		= GUAragorn_SKL.GUAragorn_ATKN
				AnimationMode		= ONCE
				AnimationPriority	= 1
			End
			Animation				= ATKP
				AnimationName		= GUAragorn_SKL.GUAragorn_ATKP
				AnimationMode		= ONCE
				AnimationPriority	= 15
			End
			Animation				= TNTC
				AnimationName		= GUAragorn_SKL.GUAragorn_TNTD
				AnimationMode		= ONCE
				AnimationPriority	= 30
			End
			Animation				= TNTD
				AnimationName		= GUAragorn_SKL.GUAragorn_TNTD
				AnimationMode		= ONCE
				AnimationPriority	= 30
			End
			ParticleSysBone = B_SWORDBONE ValarGreenRealmWeapon1 FollowBone:Yes
			Flags					= RESTART_ANIM_WHEN_COMPLETE				
		End
		
		AnimationState				= ENGAGED
			StateName				= STATE_ready
			Animation				= IDLA
				AnimationName		= GUAragorn_SKL.GUAragorn_IDLA
				AnimationMode		= ONCE
				UseWeaponTiming		= Yes
				AnimationPriority	= 1
			End
			ParticleSysBone = B_SWORDBONE ValarGreenRealmWeapon1 FollowBone:Yes
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End

		AnimationState				= SELECTED
			StateName				= STATE_attention
			Animation				= ATNE
				AnimationName		= GUAragorn_SKL.GUAragorn_ATNE
				AnimationMode		= LOOP
				AnimationBlendTime	= 5
				AnimationMustCompleteBlend = yes
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_bored" then CurDrawableSetTransitionAnimState("TRANS_boredToAttention") end
			EndScript

			ParticleSysBone = B_SWORDBONE ValarGreenRealmWeapon1 FollowBone:Yes
		End
				
	End
	End
End


;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Valar Spider Realm
;Reference: ValarSpiderRealmRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

FXParticleSystem ValarSpiderRealmWeapon1
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXFire03.tga  ;EXSplatHaze.tga
    Lifetime = 10 10
    SortLevel = 1
    Size = 5 5
    BurstCount = 1 1
    InitialDelay = 1 1
    IsParticleUpTowardsEmitter = Yes
  End
  Color = DefaultColor
    Color2 = R:185 G:106 B:50 5
    Color3 = R:255 G:106 B:40 20
  End
  Update = DefaultUpdate
    SizeRate = 0.05 0.05
    SizeRateDamping = 1 1
    AngleZ = 1 1
    AngularDamping = 5 5
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
    Gravity = -0.015
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = LineEmissionVolume
    StartPoint = X:-2 Y:-2 Z:16
    EndPoint = X:1 Y:0 Z:1
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem ValarSpiderRealmWeapon2
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXFire03.tga  ;EXSplatHaze.tga
    Lifetime = 5 5
    SortLevel = 1
    Size = 6 6
    BurstCount = 2 2
    InitialDelay = 1 1
    IsParticleUpTowardsEmitter = Yes
  End
  Color = DefaultColor
    Color2 = R:185 G:106 B:50 5
    Color3 = R:255 G:106 B:40 20
  End
  Update = DefaultUpdate
    SizeRate = 0.05 0.05
    SizeRateDamping = 1 1
    AngleZ = 1 1
    AngularDamping = 5 5
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
    Gravity = -0.015
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = LineEmissionVolume
    StartPoint = X:2 Y:-1 Z:16
    EndPoint = X:4 Y:0 Z:1
  End
  Draw = DefaultDraw
  End
End

;SMUDGE.tga  ;EXBoltradial.tga  ;EXleadership2.tga  ;EXBarbstreaks.tga ;EXBlast4.tga ;EXldrshplvl3b.tga ;EXleadership2.tga ; EXBoltradial.tga ;EXdagonhead.tga ;EXSplatHaze.tga

FXParticleSystem ValarSpiderRealmGlow
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXGlow02.tga
    Lifetime = 40 40
    SortLevel = 1
    BurstDelay = 1 1
    Size = 40 40
    BurstCount = 1 1
    IsGroundAligned = Yes
  End
  Color = DefaultColor
    Color2 = R:40 G:40 B:46 10
    Color3 = R:0 G:0 B:0 20
  End
  Alpha = DefaultAlpha
    Alpha1 = 1 1 0
  End
  Update = DefaultUpdate
    SizeRate = 4.5 4.5
    SizeRateDamping = 0.7 0.8
    AngleZ = -7 7
    AngularRateZ = -0.2 0.2
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = LineEmissionVolume
    EndPoint = X:0 Y:0 Z:25
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem ValarSpiderRealmSmudge
  System
    Priority = ALWAYS_RENDER
    Shader = ALPHA
    ParticleName = SMUDGE.tga
    Lifetime = 10 10
    Size = 50 50
    BurstCount = 1 1
  End
  Color = DefaultColor
    Color1 = R:255 G:255 B:255 0
  End
  Alpha = DefaultAlpha
    Alpha1 = 1 1 0
  End
  Update = DefaultUpdate
    SizeRate = 1 1
    SizeRateDamping = 0.9 0.95
    AngleZ = 0.0025 0.005
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.96 0.97
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = -2 2
    Z = -1 1
  End
  EmissionVolume = LineEmissionVolume
    IsHollow = Yes
    StartPoint = X:0 Y:0 Z:3
    EndPoint = X:0 Y:0 Z:-6
  End
  Draw = DefaultDraw
  End
End


;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Spider Realm Valar Object
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

MappedImage ValarSpiderRealmS
	Texture = mpcirithungol.tga  ;BuildingRadialbuttons_005.tga  ;285_rt_r1.tga
	TextureWidth = 94
	TextureHeight = 94
	Coords = Left:0 Top:0 Right:73 Bottom:73
	Status = NONE
End

MappedImage ValarSpiderRealmB
	Texture = mpcirithungol.tga  ;BuildingRadialbuttons_005.tga  ;285_rt_r1.tga
	TextureWidth = 84
	TextureHeight = 84
	Coords = Left:0 Top:0 Right:63 Bottom:63
	Status = NONE
End

Object RohanEomer

	RemoveModule ModuleTag_TheodenLeadership
	RemoveModule ModuleTag_TheodenLeadershipUpdate
	RemoveModule ModuleTag_Leadership1

	RemoveModule ModuleTag_TheodenLeadership2
	RemoveModule ModuleTag_TheodenLeadershipUpdate2
	RemoveModule ModuleTag_Leadership2

	Scale = 1.3


	SelectPortrait = ValarSpiderRealmS
	ButtonImage = ValarSpiderRealmB

	DisplayName = ValarOfDread

	CommandSet = ValarCommandSet

	WeaponSet
		Conditions          = None
		Weapon              = PRIMARY		None
		AutoChooseSources	= TERTIARY		NONE
	End

	ArmorSet
		Conditions      = None
		Armor           = ValarArmor
		DamageFX        = NormalDamageFX
	End

	ShockwaveResistance = SHOCKWAVE_RESISTANCE_ALWAYS ; can never lose footing and can never be kocked back by anything.

	VisionRange = 100				
	ShroudClearingRange = 150

	VoiceAttack			= SauronVoiceAttack
	VoiceAttackCharge		= SauronVoiceAttack
	VoiceAttackMachine	= SauronVoiceAttack
	VoiceAttackStructure	= SauronVoiceAttack
	VoiceFear 			= SauronVoiceAttack
	;VoiceCreated		= EomerVoiceSalute		;this conflicts with his respawn dialogue line -- rehooked to spawn FX
	;VoiceFullyCreated 	= EomerVoiceSalute		;this conflicts with his respawn dialogue line -- rehooked to spawn FX
	VoiceMove			= SauronVoiceMove
	VoiceMoveToCamp		= SauronVoiceMove
	VoiceMoveWhileAttacking	= SauronVoiceMove
	VoicePriority		= 99
	VoiceRetreatToCastle	= SauronVoiceMove
	VoiceSelect			= SauronVoiceSelect
	VoiceSelectBattle 	= SauronVoiceSelect
	VoiceGuard			= SauronVoiceSelect

	SoundImpact			= ImpactHorse

	UnitSpecificSounds
		VoiceGarrison						= EomerVoiceGarrison
		VoiceEnterUnitElvenTransportShip	= SauronVoiceSelect
		VoiceInitiateCaptureBuilding		= SauronVoiceSelect
	End

	CrowdResponseKey = GoodMen

	RadarPriority = UNIT

	;This should make it completely unattackible and follow the rules of War of the realms, the valar will Not interact with anything.
	KindOf = HERO PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE ATTACK_NEEDS_LINE_OF_SIGHT IGNORES_SELECT_ALL UNATTACKABLE DONT_HIDE_IF_FOGGED REVEAL_TO_ALL ;NO_COLLIDE DO_NOT_CLASSIFY

	;Remove the normal health
	RemoveModule ModuleTag_RespawnBody

	; and replace it with a new immortalbody!
	AddModule
	Body = ImmortalBody ModuleTag_ImmortalBody
		MaxHealth = 99999999
	End
	End

	AddModule
	Behavior = ExperienceLevelCreate ModuleTag_MPLevelBonus
		LevelToGrant = 10
		MPOnly = No
	End
	End

	; All valar will go 50
	LocomotorSet
		Locomotor = HeroHumanLocomotor
		Condition = SET_NORMAL 
		Speed     = 50
	End


	EvaEventDieOwner 		= none

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Animations models etc.
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<


	AddModule
	Behavior = GrantUpgradeCreate ModuleTag_1
		UpgradeToGrant = Upgrade_GandalfWhite  ;
	End 
	End

;	AddModule
;	Behavior = SubObjectsUpgrade Body_zdhzd
;		TriggeredBy			   = Upgrade_GandalfWhite
;		UpgradeTexture		   = guaragorn_rotk.tga		0 mushelob.tga  ;EUElrond.tga  ;guaragorn_rotk.tga
;		UpgradeTexture		   = GUAragfel.tga		0 guaragorn_rotk_m.tga
;		RecolorHouse		   = No
;	End
;	End



	ReplaceModule ModuleTag_01
	Draw = W3DScriptedModelDraw ModuleTag_DRAW1

		OkToChangeModelColor	= Yes
		StaticModelLODMode		= Yes
		GlowEnabled = Yes
		GlowEmissive = No
 
		DefaultModelConditionState
			Model						=	RUElrond_SKN
			;ParticleSysBone = B_SWORDBONE ValarSpiderRealmWeapon1 FollowBone:Yes
			ParticleSysBone = None ValarSpiderRealmGlow FollowBone:Yes
			ParticleSysBone = BAT_HEAD ValarSpiderRealmSmudge FollowBone:Yes
		End


		
		; ------------ Moving ------------- ;
		
		AnimationState        			= MOVING
			StateName					= Moving_Sword
			SimilarRestart				= Yes
			Animation           		= run_s
				AnimationName       	= RUElrond_SKL.RUElrond_RUNS
				AnimationMode       	= LOOP
				Distance				= 40
				AnimationSpeedFactorRange = 0.8 0.8
			End
			Animation					= finishrun_b
				AnimationName       	= RUElrond_SKL.RUElrond_RUNB
				AnimationMode       	= ONCE
				AnimationBlendTime		= 0
				Distance				= 40
				AnimationSpeedFactorRange = 0.8 0.8
			End
			Animation					= runtrans_bs
				AnimationName       	= RUElrond_SKL.RUElrond_RUNC
				AnimationMode       	= ONCE
				AnimationBlendTime		= 0
				Distance				= 70
				AnimationSpeedFactorRange = 0.8 0.8
			End
			Animation					= runtrans_sb_finish
				AnimationName       	= RUElrond_SKL.RUElrond_RUNT
				AnimationMode       	= ONCE
				AnimationBlendTime		= 0
				Distance				= 70
				AnimationSpeedFactorRange = 0.8 0.8
			End
			Animation					= runnoblend_s
				AnimationName       	= RUElrond_SKL.RUElrond_RUNS
				AnimationMode       	= LOOP
				AnimationBlendTime		= 0
				Distance				= 40
				AnimationSpeedFactorRange = 0.8 0.8
			End
			Flags = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
			
			ParticleSysBone = B_SWORDBONE ValarSpiderRealmWeapon2 FollowBone:Yes

			BeginScript
				PrevAnim	= CurDrawablePrevAnimation()
				PrevState	= CurDrawablePrevAnimationState()
				
				if PrevState == "GetUp"  or PrevAnim == "DrawSwords"
				then
					if PrevAnim == "DrawSwords"
					then
						return "runtrans_bs"
					else
						return
					end
				elseif PrevAnim == "finishrun_b" or PrevAnim == "runtrans_sb_finish"
				then
					return "runtrans_bs"
				elseif PrevAnim == "runtrans_bs" or PrevAnim == "run_s" or PrevAnim == "runnoblend_s"
				then
					return "runnoblend_s"
				else
					return "run_s"
				end				
			EndScript
		End
		
		

		AnimationState					= USER_1
			Animation
				AnimationName			= RUElrond_SKL.RUElrond_TNTSV1
				AnimationMode			= ONCE
			End
			ParticleSysBone = B_SWORDBONE ValarSpiderRealmWeapon1 FollowBone:Yes
		End

		AnimationState				= LEVELED
			Animation				= LevelUp
				AnimationName		= RUElrond_SKL.RUElrond_CHRST2
				AnimationMode		= ONCE
				AnimationBlendTime	= 20
			End
			ParticleSysBone = B_SWORDBONE ValarSpiderRealmWeapon1 FollowBone:Yes
		End
		
		; -------- Alert ------- ;
		
		AnimationState					= EMOTION_ALERT
			StateName					= Ready_Sword
			
			Animation					= Alert_1
				AnimationName			= RUElrond_SKL.RUElrond_IDLST1
				AnimationMode			= ONCE
				AnimationPriority		= 20
			End
			Animation					= Alert_1
				AnimationName			= RUElrond_SKL.RUElrond_IDLST1	; Secondary to solve the 'no play last anim' feature.
				AnimationMode			= ONCE
				AnimationPriority		= 20
			End
			Animation					= Alert_2
				AnimationName			= RUElrond_SKL.RUElrond_TNTSV1
				AnimationMode			= ONCE
				AnimationPriority		= 5
			End
			Flags						= RESTART_ANIM_WHEN_COMPLETE
			
			ParticleSysBone = B_SWORDBONE ValarSpiderRealmWeapon1 FollowBone:Yes

			BeginScript
				Prev = CurDrawablePrevAnimationState()
				PrevName = CurDrawablePrevAnimation()
				
				CurDrawableHideSubObject("ArrowNock")
				CurDrawableHideSubObject("arrow")

				if		Prev == "Bored_Sword"		then CurDrawableSetTransitionAnimState("TRANS_BR_Sword")
				elseif	Prev == "Selected_Sword"		then CurDrawableSetTransitionAnimState("TRANS_SR_Sword")
				end
			EndScript
		End
		
		; --------- Hit Reactions ---------- ;
		
		AnimationState = HIT_REACTION HIT_LEVEL_1
			StateName					= Bored_Sword
			Animation					= Hit_Level_1_a
				AnimationName			= RUElrond_SKL.RUElrond_HITSv1
				AnimationMode			= ONCE
				AnimationBlendTime		= 20
			End
			ParticleSysBone = B_SWORDBONE ValarSpiderRealmWeapon1 FollowBone:Yes
		End

		
		AnimationState				= RAISING_FLAG
			Animation					= Alert_1
				AnimationName			= RUElrond_SKL.RUElrond_CHRST2
				AnimationMode			= LOOP
				AnimationBlendTime	= 10
			End
			ParticleSysBone = B_SWORDBONE ValarSpiderRealmWeapon1 FollowBone:Yes
		End
	
		; ------ Emotions ------ ;
		AnimationState					= EMOTION_TAUNTING
			Animation
				AnimationName			= RUElrond_SKL.RUElrond_TNTSV1
				AnimationMode			= LOOP
				AnimationBlendTime	= 10
			End
			ParticleSysBone = B_SWORDBONE ValarSpiderRealmWeapon1 FollowBone:Yes
		End

		AnimationState				=	EMOTION_CELEBRATING
			Animation
				AnimationName		=	RUElrond_SKL.RUElrond_CHRST2
				AnimationMode		=	LOOP
				AnimationBlendTime	= 10
			End
			ParticleSysBone = B_SWORDBONE ValarSpiderRealmWeapon1 FollowBone:Yes
		End
		
		; ------ Selected ------ ;

		AnimationState				=	SELECTED
			StateName				=	Selected_Sword
			
			Animation				=	ATNA
				AnimationName		=	RUElrond_SKL.RUElrond_ATNS
				AnimationMode		=	LOOP
				AnimationBlendTime	= 20
			End

			ParticleSysBone = B_SWORDBONE ValarSpiderRealmWeapon1 FollowBone:Yes
			
			BeginScript
				CurDrawableHideSubObject("ARROW")
				CurDrawableHideSubObject("ARROWNOCK")
				
				Prev = CurDrawablePrevAnimationState()
				PrevName = CurDrawablePrevAnimation()
				if Prev == "Bored_Sword"		then CurDrawableSetTransitionAnimState("TRANS_BS_Sword")
				elseif Prev == "Ready_Sword"		then CurDrawableSetTransitionAnimState("TRANS_RS_Sword")
				end	
			EndScript
		End

		
		; ------- Bored -------- ;
		
		IdleAnimationState
			StateName					= Bored_Sword
			
			Animation           		= IDLCX1
				AnimationName       	= RUElrond_SKL.RUElrond_IDLF
				AnimationMode       	= ONCE
				AnimationPriority		= 20
				AnimationBlendTime	= 20
			End
			Animation           		= IDLCX1
				AnimationName       	= RUElrond_SKL.RUElrond_IDLF	; Secondary to solve the 'no play last anim' feature.
				AnimationMode       	= ONCE
				AnimationPriority		= 5
				AnimationBlendTime	= 20
			End
			Animation           		= IDLCt3
				AnimationName       	= RUElrond_SKL.RUElrond_IDLCT3
				AnimationMode       	= ONCE
				AnimationPriority		= 5
				AnimationBlendTime	= 20
			End
			Animation           		= IDLCT1
				AnimationName       	= RUElrond_SKL.RUElrond_IDLCT1
				AnimationMode       	= ONCE
				AnimationPriority		= 5
				AnimationBlendTime	= 20
			End
			Animation           		= IDLCT2
				AnimationName       	= RUElrond_SKL.RUElrond_CHRST2
				AnimationMode       	= ONCE
				AnimationPriority		= 5
				AnimationBlendTime	= 20
			End
			Animation           		= IDLCT4
				AnimationName       	= RUElrond_SKL.RUElrond_ATNS
				AnimationMode       	= ONCE
				AnimationPriority		= 5
				AnimationBlendTime	= 20
			End


			ParticleSysBone = B_SWORDBONE ValarSpiderRealmWeapon1 FollowBone:Yes

			
			Flags						= RESTART_ANIM_WHEN_COMPLETE

			BeginScript
				CurDrawableHideSubObject("ARROW")
				CurDrawableHideSubObject("ARROWNOCK")				

				Prev = CurDrawablePrevAnimationState()
				PrevName = CurDrawablePrevAnimation()
				if Prev == "Selected_Sword"		then CurDrawableSetTransitionAnimState("TRANS_SB_Sword")
				elseif Prev == "Ready_Sword"		then CurDrawableSetTransitionAnimState("TRANS_RB_Sword")
				end	
			EndScript
		End
		
		;----------------- Sword Transitions -------------------------;
		
		TransitionState       			= TRANS_BS_Sword
			Animation           		= TRANS_BS_Sword
				AnimationName     		= RUElrond_SKL.RUElrond_ATNA
				AnimationMode     		= ONCE
				AnimationBlendTime	= 20
			End
			Animation           		= ATNAX1
				AnimationName     		= RUElrond_SKL.RUElrond_ATNX1
				AnimationMode     		= ONCE
				AnimationBlendTime	= 20
			End
			ParticleSysBone = B_SWORDBONE ValarSpiderRealmWeapon1 FollowBone:Yes
		End
		
		TransitionState       			= TRANS_SR_Sword
			Animation           		= TRANS_SR_Sword
				AnimationName     		= RUElrond_SKL.RUElrond_ATNC
				AnimationMode     		= ONCE
				AnimationBlendTime	= 20
			End
			ParticleSysBone = B_SWORDBONE ValarSpiderRealmWeapon1 FollowBone:Yes
		End
		
		TransitionState       			= TRANS_SB_Sword
			Animation           		= TRANS_SB_Sword
				AnimationName     		= RUElrond_SKL.RUElrond_ATNA
				AnimationMode     		= ONCE_BACKWARDS
				AnimationBlendTime	= 20
			End

			ParticleSysBone = B_SWORDBONE ValarSpiderRealmWeapon1 FollowBone:Yes

			Flags = START_FRAME_LAST
		End
		
		TransitionState       			= TRANS_RS_Sword
			Animation           		= TRANS_RS_Sword
				AnimationName     		= RUElrond_SKL.RUElrond_ATNC
				AnimationMode     		= ONCE_BACKWARDS
				AnimationBlendTime	= 20
			End

			ParticleSysBone = B_SWORDBONE ValarSpiderRealmWeapon1 FollowBone:Yes

			Flags = START_FRAME_LAST
		End
		
		TransitionState       			= TRANS_BR_Sword
			Animation           		= TRANS_BR_Sword
				AnimationName     		= RUElrond_SKL.RUElrond_ATNS
				AnimationMode     		= ONCE
				AnimationBlendTime		= 20
			End
			ParticleSysBone = B_SWORDBONE ValarSpiderRealmWeapon1 FollowBone:Yes
		End
		
		TransitionState       			= TRANS_RB_Sword
			Animation           		= TRANS_RB_Sword
				AnimationName     		= RUElrond_SKL.RUElrond_IDLG
				AnimationMode     		= ONCE
				AnimationBlendTime		= 20
			End
			ParticleSysBone = B_SWORDBONE ValarSpiderRealmWeapon1 FollowBone:Yes
		End
		
	End
	End

End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Valar Earth Realm
;Reference: ValarEarthRealmRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

FXParticleSystem ValarEarthRealmWeapon1
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXFire03.tga  ;EXSplatHaze.tga
    Lifetime = 10 10
    SortLevel = 1
    Size = 5 5
    BurstCount = 1 1
    InitialDelay = 1 1
    IsParticleUpTowardsEmitter = Yes
  End
  Color = DefaultColor
    Color2 = R:185 G:126 B:70 5
    Color3 = R:255 G:106 B:40 20
  End
  Update = DefaultUpdate
    SizeRate = 0.05 0.05
    SizeRateDamping = 1 1
    AngleZ = 1 1
    AngularDamping = 5 5
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
    Gravity = -0.015
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = LineEmissionVolume
    StartPoint = X:-2 Y:-2 Z:16
    EndPoint = X:1 Y:0 Z:1
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem ValarEarthRealmWeapon2
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXFire03.tga  ;EXSplatHaze.tga
    Lifetime = 5 5
    SortLevel = 1
    Size = 6 6
    BurstCount = 2 2
    InitialDelay = 1 1
    IsParticleUpTowardsEmitter = Yes
  End
  Color = DefaultColor
    Color2 = R:185 G:106 B:50 5
    Color3 = R:255 G:106 B:40 20
  End
  Update = DefaultUpdate
    SizeRate = 0.05 0.05
    SizeRateDamping = 1 1
    AngleZ = 1 1
    AngularDamping = 5 5
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
    Gravity = -0.015
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = LineEmissionVolume
    StartPoint = X:2 Y:-1 Z:16
    EndPoint = X:4 Y:0 Z:1
  End
  Draw = DefaultDraw
  End
End

;SMUDGE.tga  ;EXBoltradial.tga  ;EXleadership2.tga  ;EXBarbstreaks.tga ;EXBlast4.tga ;EXldrshplvl3b.tga ;EXleadership2.tga ; EXBoltradial.tga ;EXdagonhead.tga ;EXSplatHaze.tga

FXParticleSystem ValarEarthRealmGlow
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXGlow02.tga
    Lifetime = 30 30
    SortLevel = 1
    BurstDelay = 1 1
    Size = 45 45
    BurstCount = 1 1
    IsGroundAligned = Yes
  End
  Color = DefaultColor
    Color2 = R:50 G:45 B:40 10
    Color3 = R:0 G:0 B:0 20
  End
  Alpha = DefaultAlpha
    Alpha1 = 1 1 0
  End
  Update = DefaultUpdate
    SizeRate = 4.5 4.5
    SizeRateDamping = 0.7 0.8
    AngleZ = -7 7
    AngularRateZ = -0.2 0.2
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = LineEmissionVolume
    EndPoint = X:0 Y:0 Z:25
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem ValarEarthRealmSmudge
  System
    Priority = ALWAYS_RENDER
    Shader = ALPHA
    ParticleName = SMUDGE.tga
    Lifetime = 10 10
    Size = 50 50
    BurstCount = 1 1
  End
  Color = DefaultColor
    Color1 = R:255 G:255 B:255 0
  End
  Alpha = DefaultAlpha
    Alpha1 = 1 1 0
  End
  Update = DefaultUpdate
    SizeRate = 1 1
    SizeRateDamping = 0.9 0.95
    AngleZ = 0.0025 0.005
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.96 0.97
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = -2 2
    Z = -1 1
  End
  EmissionVolume = LineEmissionVolume
    IsHollow = Yes
    StartPoint = X:0 Y:0 Z:3
    EndPoint = X:0 Y:0 Z:-6
  End
  Draw = DefaultDraw
  End
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Earth Realm Valar Object
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

MappedImage ValarEarthRealmS
	Texture = mpnurn.tga  ;BuildingRadialbuttons_011.tga  ;285_rt_r1.tga
	TextureWidth = 104
	TextureHeight = 104
	Coords = Left:0 Top:0 Right:83 Bottom:83
	Status = NONE
End

MappedImage ValarEarthRealmB
	Texture = mpnurn.tga  ;BuildingRadialbuttons_011.tga  ;285_rt_r1.tga
	TextureWidth = 94
	TextureHeight = 94
	Coords = Left:0 Top:0 Right:73 Bottom:73
	Status = NONE
End

Object RohanTheoden

	RemoveModule ModuleTag_Leadership
	RemoveModule ModuleTag_TheodenLeadership
	RemoveModule ModuleTag_TheodenLeadershipUpdate

	Scale = 1.3


	SelectPortrait = ValarEarthRealmS
	ButtonImage = ValarEarthRealmB

	DisplayName = ValarOfStone

	CommandSet = ValarCommandSet

	WeaponSet
		Conditions          = None
		Weapon              = PRIMARY		None
		AutoChooseSources	= TERTIARY		NONE
	End

	ArmorSet
		Conditions      = None
		Armor           = ValarArmor
		DamageFX        = NormalDamageFX
	End

	ShockwaveResistance = SHOCKWAVE_RESISTANCE_ALWAYS ; can never lose footing and can never be kocked back by anything.

	VisionRange = 100				
	ShroudClearingRange = 150

	VoiceAttack			= SauronVoiceAttack
	VoiceAttackCharge		= SauronVoiceAttack
	VoiceAttackMachine	= SauronVoiceAttack
	VoiceAttackStructure	= SauronVoiceAttack
	VoiceFear 			= SauronVoiceAttack
	;VoiceCreated		= EomerVoiceSalute		;this conflicts with his respawn dialogue line -- rehooked to spawn FX
	;VoiceFullyCreated 	= EomerVoiceSalute		;this conflicts with his respawn dialogue line -- rehooked to spawn FX
	VoiceMove			= SauronVoiceMove
	VoiceMoveToCamp		= SauronVoiceMove
	VoiceMoveWhileAttacking	= SauronVoiceMove
	VoicePriority		= 99
	VoiceRetreatToCastle	= SauronVoiceMove
	VoiceSelect			= SauronVoiceSelect
	VoiceSelectBattle 	= SauronVoiceSelect
	VoiceGuard			= SauronVoiceSelect

	SoundImpact			= ImpactHorse

	UnitSpecificSounds
		VoiceGarrison						= EomerVoiceGarrison
		VoiceEnterUnitElvenTransportShip	= SauronVoiceSelect
		VoiceInitiateCaptureBuilding		= SauronVoiceSelect
	End

	CrowdResponseKey = GoodMen

	RadarPriority = UNIT

	;This should make it completely unattackible and follow the rules of War of the realms, the valar will Not interact with anything.
	KindOf = HERO PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE ATTACK_NEEDS_LINE_OF_SIGHT IGNORES_SELECT_ALL UNATTACKABLE DONT_HIDE_IF_FOGGED REVEAL_TO_ALL ;NO_COLLIDE DO_NOT_CLASSIFY

	;Remove the normal health
	RemoveModule ModuleTag_RespawnBody

	; and replace it with a new immortalbody!
	AddModule
	Body = ImmortalBody ModuleTag_ImmortalBody
		MaxHealth = 99999999
	End
	End

	AddModule
	Behavior = ExperienceLevelCreate ModuleTag_MPLevelBonus
		LevelToGrant = 10
		MPOnly = No
	End
	End

	; All valar will go 50
	LocomotorSet
		Locomotor = HeroHumanLocomotor
		Condition = SET_NORMAL 
		Speed     = 50
	End


	EvaEventDieOwner 		= none

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Animations models etc.
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<


	AddModule
	Behavior = GrantUpgradeCreate ModuleTag_1
		UpgradeToGrant = Upgrade_GandalfWhite  ;
	End 
	End

;	AddModule
;	Behavior = SubObjectsUpgrade Body_zdhzd
;		TriggeredBy			   = Upgrade_GandalfWhite
;		UpgradeTexture		   = RUTheoden.tga 0 CUHerob.tga ;CUHerob.tga ; CUHeroc.tga ; CUHerod.tga
;		RecolorHouse		   = No
;	End
;	End


	ReplaceModule ModuleTag_DRAW
	Draw = W3DScriptedModelDraw ModuleTag_DRAW1

		OkToChangeModelColor	= Yes
		StaticModelLODMode		= Yes
		GlowEnabled = Yes
		GlowEmissive = No
 
		DefaultModelConditionState
			Model						=	EUCELEB_SKN
			;ParticleSysBone = B_SWORDBONE ValarEarthRealmWeapon1 FollowBone:Yes
			ParticleSysBone = None ValarEarthRealmGlow FollowBone:Yes
			ParticleSysBone = BAT_HEAD ValarEarthRealmSmudge FollowBone:Yes
		End


		
		; ------------ Moving ------------- ;
		
		AnimationState        			= MOVING
			StateName					= Moving_Sword
			SimilarRestart				= Yes
			Animation           		= run_s
				AnimationName       	= RUElrond_SKL.RUElrond_RUNT
				AnimationMode       	= ONCE ;LOOP
				Distance				= 40
				AnimationBlendTime	= 20
				AnimationSpeedFactorRange = 0.7 0.7
			End
			Animation					= finishrun_b
				AnimationName       	= RUElrond_SKL.RUElrond_RUNC ; B is runing with sword on his back
				AnimationMode       	= ONCE
				AnimationBlendTime		= 0
				Distance				= 40
				AnimationSpeedFactorRange = 0.8 0.8
			End
			Animation					= runtrans_bs
				AnimationName       	= RUElrond_SKL.RUElrond_RUNC ; C is drawing the sword out from his back
				AnimationMode       	= ONCE
				AnimationBlendTime		= 0
				Distance				= 70
				AnimationSpeedFactorRange = 0.8 0.8
			End
			Animation					= runtrans_sb_finish
				AnimationName       	= RUElrond_SKL.RUElrond_RUNBC ; T is puts sword away
				AnimationMode       	= ONCE
				AnimationBlendTime		= 0
				Distance				= 70
				AnimationSpeedFactorRange = 0.8 0.8
			End
			Animation					= runnoblend_s
				AnimationName       	= RUElrond_SKL.RUElrond_RUNB
				AnimationMode       	= LOOP
				AnimationBlendTime		= 0
				Distance				= 40
				AnimationSpeedFactorRange = 0.8 0.8
			End
			Flags = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
			
			ParticleSysBone = B_SWORDBONE ValarEarthRealmWeapon2 FollowBone:Yes

			BeginScript
				PrevAnim	= CurDrawablePrevAnimation()
				PrevState	= CurDrawablePrevAnimationState()
				
				if PrevState == "GetUp"  or PrevAnim == "DrawSwords"
				then
					if PrevAnim == "DrawSwords"
					then
						return "runtrans_bs"
					else
						return
					end
				elseif PrevAnim == "finishrun_b" or PrevAnim == "runtrans_sb_finish"
				then
					return "runtrans_bs"
				elseif PrevAnim == "runtrans_bs" or PrevAnim == "run_s" or PrevAnim == "runnoblend_s"
				then
					return "runnoblend_s"
				else
					return "run_s"
				end				
			EndScript
		End
		
		

		AnimationState					= USER_1
			Animation
				AnimationName			= RUElrond_SKL.RUElrond_TNTSV1
				AnimationMode			= ONCE
			End
			ParticleSysBone = B_SWORDBONE ValarEarthRealmWeapon1 FollowBone:Yes
		End

		AnimationState				= LEVELED
			Animation				= LevelUp
				AnimationName		= RUElrond_SKL.RUElrond_CHRST2
				AnimationMode		= ONCE
				AnimationBlendTime	= 20
			End
			ParticleSysBone = B_SWORDBONE ValarEarthRealmWeapon1 FollowBone:Yes
		End
		
		; -------- Alert ------- ;
		
		AnimationState					= EMOTION_ALERT
			StateName					= Ready_Sword
			
			Animation					= Alert_1
				AnimationName			= RUElrond_SKL.RUElrond_IDLST1
				AnimationMode			= ONCE
				AnimationPriority		= 20
			End
			Animation					= Alert_1
				AnimationName			= RUElrond_SKL.RUElrond_IDLST1	; Secondary to solve the 'no play last anim' feature.
				AnimationMode			= ONCE
				AnimationPriority		= 20
			End
			Animation					= Alert_2
				AnimationName			= RUElrond_SKL.RUElrond_TNTSV1
				AnimationMode			= ONCE
				AnimationPriority		= 5
			End
			Flags						= RESTART_ANIM_WHEN_COMPLETE
			
			ParticleSysBone = B_SWORDBONE ValarEarthRealmWeapon1 FollowBone:Yes

			BeginScript
				Prev = CurDrawablePrevAnimationState()
				PrevName = CurDrawablePrevAnimation()
				
				CurDrawableHideSubObject("ArrowNock")
				CurDrawableHideSubObject("arrow")

				if		Prev == "Bored_Sword"		then CurDrawableSetTransitionAnimState("TRANS_BR_Sword")
				elseif	Prev == "Selected_Sword"		then CurDrawableSetTransitionAnimState("TRANS_SR_Sword")
				end
			EndScript
		End
		
		; --------- Hit Reactions ---------- ;
		
		AnimationState = HIT_REACTION HIT_LEVEL_1
			StateName					= Bored_Sword
			Animation					= Hit_Level_1_a
				AnimationName			= RUElrond_SKL.RUElrond_HITSv1
				AnimationMode			= ONCE
				AnimationBlendTime		= 20
			End
			ParticleSysBone = B_SWORDBONE ValarEarthRealmWeapon1 FollowBone:Yes
		End

		
		AnimationState				= RAISING_FLAG
			Animation					= Alert_1
				AnimationName			= RUElrond_SKL.RUElrond_CHRST2
				AnimationMode			= LOOP
				AnimationBlendTime	= 10
			End
			ParticleSysBone = B_SWORDBONE ValarEarthRealmWeapon1 FollowBone:Yes
		End
	
		; ------ Emotions ------ ;
		AnimationState					= EMOTION_TAUNTING
			Animation
				AnimationName			= RUElrond_SKL.RUElrond_TNTSV1
				AnimationMode			= LOOP
				AnimationBlendTime	= 10
			End
			ParticleSysBone = B_SWORDBONE ValarEarthRealmWeapon1 FollowBone:Yes
		End

		AnimationState				=	EMOTION_CELEBRATING
			Animation
				AnimationName		=	RUElrond_SKL.RUElrond_CHRST2
				AnimationMode		=	LOOP
				AnimationBlendTime	= 10
			End
			ParticleSysBone = B_SWORDBONE ValarEarthRealmWeapon1 FollowBone:Yes
		End
		
		; ------ Selected ------ ;

		AnimationState				=	SELECTED
			StateName				=	Selected_Sword
			
			Animation				=	ATNA
				AnimationName		=	RUElrond_SKL.RUElrond_ATNS
				AnimationMode		=	LOOP
				AnimationBlendTime	= 25
			End

			ParticleSysBone = B_SWORDBONE ValarEarthRealmWeapon1 FollowBone:Yes
			
			BeginScript
				CurDrawableHideSubObject("ARROW")
				CurDrawableHideSubObject("ARROWNOCK")
				
				Prev = CurDrawablePrevAnimationState()
				PrevName = CurDrawablePrevAnimation()
				if Prev == "Bored_Sword"		then CurDrawableSetTransitionAnimState("TRANS_BS_Sword")
				elseif Prev == "Ready_Sword"		then CurDrawableSetTransitionAnimState("TRANS_RS_Sword")
				end	
			EndScript
		End

		
		; ------- Bored -------- ;
		
		IdleAnimationState
			StateName					= Bored_Sword
			
			Animation           		= IDLCX1
				AnimationName       	= RUElrond_SKL.RUElrond_IDLF
				AnimationMode       	= ONCE
				AnimationPriority		= 20
				AnimationBlendTime	= 20
			End
			Animation           		= IDLCX1
				AnimationName       	= RUElrond_SKL.RUElrond_IDLF	; Secondary to solve the 'no play last anim' feature.
				AnimationMode       	= ONCE
				AnimationPriority		= 5
				AnimationBlendTime	= 20
			End
			Animation           		= IDLCt3
				AnimationName       	= RUElrond_SKL.RUElrond_IDLCT3
				AnimationMode       	= ONCE
				AnimationPriority		= 5
				AnimationBlendTime	= 20
			End
			Animation           		= IDLCT1
				AnimationName       	= RUElrond_SKL.RUElrond_IDLCT1
				AnimationMode       	= ONCE
				AnimationPriority		= 5
				AnimationBlendTime	= 20
			End

			Animation           		= IDLCT2
				AnimationName       	= RUElrond_SKL.RUElrond_CHRST2
				AnimationMode       	= ONCE
				AnimationPriority		= 5
				AnimationBlendTime	= 20
			End

			Animation           		= IDLCT4
				AnimationName       	= RUElrond_SKL.RUElrond_ATNS
				AnimationMode       	= ONCE
				AnimationPriority		= 5
				AnimationBlendTime	= 20
			End


			ParticleSysBone = B_SWORDBONE ValarEarthRealmWeapon1 FollowBone:Yes

			
			Flags						= RESTART_ANIM_WHEN_COMPLETE

			BeginScript
				CurDrawableHideSubObject("ARROW")
				CurDrawableHideSubObject("ARROWNOCK")				

				Prev = CurDrawablePrevAnimationState()
				PrevName = CurDrawablePrevAnimation()
				if Prev == "Selected_Sword"		then CurDrawableSetTransitionAnimState("TRANS_SB_Sword")
				elseif Prev == "Ready_Sword"		then CurDrawableSetTransitionAnimState("TRANS_RB_Sword")
				end	
			EndScript
		End
		
		;----------------- Sword Transitions -------------------------;
		
		TransitionState       			= TRANS_BS_Sword
			Animation           		= TRANS_BS_Sword
				AnimationName     		= RUElrond_SKL.RUElrond_ATNA
				AnimationMode     		= ONCE
				AnimationBlendTime	= 20
			End
			Animation           		= ATNAX1
				AnimationName     		= RUElrond_SKL.RUElrond_ATNX1
				AnimationMode     		= ONCE
				AnimationBlendTime	= 20
			End
			ParticleSysBone = B_SWORDBONE ValarEarthRealmWeapon1 FollowBone:Yes
		End
		
		TransitionState       			= TRANS_SR_Sword
			Animation           		= TRANS_SR_Sword
				AnimationName     		= RUElrond_SKL.RUElrond_ATNC
				AnimationMode     		= ONCE
				AnimationBlendTime	= 20
			End
			ParticleSysBone = B_SWORDBONE ValarEarthRealmWeapon1 FollowBone:Yes
		End
		
		TransitionState       			= TRANS_SB_Sword
			Animation           		= TRANS_SB_Sword
				AnimationName     		= RUElrond_SKL.RUElrond_ATNA
				AnimationMode     		= ONCE_BACKWARDS
				AnimationBlendTime	= 20
			End

			ParticleSysBone = B_SWORDBONE ValarEarthRealmWeapon1 FollowBone:Yes

			Flags = START_FRAME_LAST
		End
		
		TransitionState       			= TRANS_RS_Sword
			Animation           		= TRANS_RS_Sword
				AnimationName     		= RUElrond_SKL.RUElrond_ATNC
				AnimationMode     		= ONCE_BACKWARDS
				AnimationBlendTime	= 20
			End

			ParticleSysBone = B_SWORDBONE ValarEarthRealmWeapon1 FollowBone:Yes

			Flags = START_FRAME_LAST
		End
		
		TransitionState       			= TRANS_BR_Sword
			Animation           		= TRANS_BR_Sword
				AnimationName     		= RUElrond_SKL.RUElrond_ATNS
				AnimationMode     		= ONCE
				AnimationBlendTime		= 20
			End
			ParticleSysBone = B_SWORDBONE ValarEarthRealmWeapon1 FollowBone:Yes
		End
		
		TransitionState       			= TRANS_RB_Sword
			Animation           		= TRANS_RB_Sword
				AnimationName     		= RUElrond_SKL.RUElrond_IDLG
				AnimationMode     		= ONCE
				AnimationBlendTime		= 20
			End
			ParticleSysBone = B_SWORDBONE ValarEarthRealmWeapon1 FollowBone:Yes
		End
		
	End
	End

End
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Valar Beast Realm
;Reference: ValarBeastRealmRef
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

FXParticleSystem ValarBeastRealmWeapon1
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXSplatHaze.tga
    Lifetime = 10 10
    SortLevel = 1
    Size = 7 7
    BurstCount = 3 3
    InitialDelay = 1 1
    IsParticleUpTowardsEmitter = Yes
  End
  Color = DefaultColor
    Color2 = R:185 G:106 B:40 5
    Color3 = R:255 G:106 B:40 20
  End
  Update = DefaultUpdate
    SizeRate = 0.15 0.15
    SizeRateDamping = 1 1
    AngleZ = -7 7
    AngularDamping = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
    Gravity = -0.01
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = LineEmissionVolume
    StartPoint = X:18 Y:0 Z:2
    EndPoint = X:3 Y:0 Z:0
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem ValarBeastRealmWeapon2
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXSplatHaze.tga
    Lifetime = 5 5
    SortLevel = 1
    Size = 10 10
    BurstCount = 3 3
    InitialDelay = 1 1
    IsParticleUpTowardsEmitter = Yes
  End
  Color = DefaultColor
    Color2 = R:185 G:106 B:40 5
    Color3 = R:255 G:106 B:40 20
  End
  Update = DefaultUpdate
    SizeRate = 0.15 0.15
    SizeRateDamping = 1 1
    AngleZ = -7 7
    AngularDamping = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
    Gravity = -0.01
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = LineEmissionVolume
    StartPoint = X:24 Y:0 Z:0
    EndPoint = X:11 Y:0 Z:0
  End
  Draw = DefaultDraw
  End
End

;SMUDGE.tga  ;EXBoltradial.tga  ;EXleadership2.tga  ;EXBarbstreaks.tga ;EXBlast4.tga ;EXldrshplvl3b.tga ;EXleadership2.tga ; EXBoltradial.tga ;EXdagonhead.tga ;EXSplatHaze.tga

FXParticleSystem ValarBeastRealmGlow
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXGlow02.tga
    Lifetime = 40 40
    SortLevel = 1
    BurstDelay = 1 1
    Size = 40 40
    BurstCount = 1 1
    IsGroundAligned = Yes
  End
  Color = DefaultColor
    Color2 = R:40 G:40 B:46 10
    Color3 = R:0 G:0 B:0 20
  End
  Alpha = DefaultAlpha
    Alpha1 = 1 1 0
  End
  Update = DefaultUpdate
    SizeRate = 4.5 4.5
    SizeRateDamping = 0.7 0.8
    AngleZ = -7 7
    AngularRateZ = -0.2 0.2
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = LineEmissionVolume
    EndPoint = X:0 Y:0 Z:25
  End
  Draw = DefaultDraw
  End
End


FXParticleSystem ValarBeastRealmSmudge
  System
    Priority = ALWAYS_RENDER
    Shader = ALPHA
    ParticleName = SMUDGE.tga
    Lifetime = 10 10
    Size = 50 50
    BurstCount = 1 1
  End
  Color = DefaultColor
    Color1 = R:255 G:255 B:255 0
  End
  Alpha = DefaultAlpha
    Alpha1 = 1 1 0
  End
  Update = DefaultUpdate
    SizeRate = 1 1
    SizeRateDamping = 0.9 0.95
    AngleZ = 0.0025 0.005
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.96 0.97
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = -2 2
    Z = -1 1
  End
  EmissionVolume = LineEmissionVolume
    IsHollow = Yes
    StartPoint = X:0 Y:0 Z:3
    EndPoint = X:0 Y:0 Z:-6
  End
  Draw = DefaultDraw
  End
End


;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Fire Realm Valar Object
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

MappedImage ValarBeastRealmS
	Texture = mpanorien.tga   ;BuildingRadialbuttons_023.tga  ;285_rt_r1.tga
	TextureWidth = 114
	TextureHeight = 114
	Coords = Left:0 Top:0 Right:77 Bottom:67
	Status = NONE
End

MappedImage ValarBeastRealmB
	Texture = mpanorien.tga   ;BuildingRadialbuttons_023.tga  ;285_rt_r1.tga
	TextureWidth = 94
	TextureHeight = 94
	Coords = Left:0 Top:0 Right:67 Bottom:63
	Status = NONE
End

Object GondorBoromir

	RemoveModule ModuleTag_BoromirLeadership
	RemoveModule ModuleTag_UnpauseLeadership
	RemoveModule ModuleTag_BoromirLeadershipUpdate

	Scale = 1.3


	SelectPortrait = ValarBeastRealmS
	ButtonImage = ValarBeastRealmB

	DisplayName = ValarOfStrength

	CommandSet = ValarCommandSet

	WeaponSet
		Conditions          = None
		Weapon              = PRIMARY		None
		AutoChooseSources	= TERTIARY		NONE
	End

	ArmorSet
		Conditions      = None
		Armor           = ValarArmor
		DamageFX        = NormalDamageFX
	End

	ShockwaveResistance = SHOCKWAVE_RESISTANCE_ALWAYS ; can never lose footing and can never be kocked back by anything.

	VisionRange = 100				
	ShroudClearingRange = 150

	VoiceAttack			= SauronVoiceAttack
	VoiceAttackCharge		= SauronVoiceAttack
	VoiceAttackMachine	= SauronVoiceAttack
	VoiceAttackStructure	= SauronVoiceAttack
	VoiceFear 			= SauronVoiceAttack
	;VoiceCreated		= EomerVoiceSalute		;this conflicts with his respawn dialogue line -- rehooked to spawn FX
	;VoiceFullyCreated 	= EomerVoiceSalute		;this conflicts with his respawn dialogue line -- rehooked to spawn FX
	VoiceMove			= SauronVoiceMove
	VoiceMoveToCamp		= SauronVoiceMove
	VoiceMoveWhileAttacking	= SauronVoiceMove
	VoicePriority		= 99
	VoiceRetreatToCastle	= SauronVoiceMove
	VoiceSelect			= SauronVoiceSelect
	VoiceSelectBattle 	= SauronVoiceSelect
	VoiceGuard			= SauronVoiceSelect

	SoundImpact			= ImpactHorse

	UnitSpecificSounds
		VoiceGarrison						= EomerVoiceGarrison
		VoiceEnterUnitElvenTransportShip	= SauronVoiceSelect
		VoiceInitiateCaptureBuilding		= SauronVoiceSelect
	End

	CrowdResponseKey = GoodMen

	RadarPriority = UNIT

	;This should make it completely unattackible and follow the rules of War of the realms, the valar will Not interact with anything.
	KindOf = HERO PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE ATTACK_NEEDS_LINE_OF_SIGHT IGNORES_SELECT_ALL UNATTACKABLE DONT_HIDE_IF_FOGGED REVEAL_TO_ALL ;NO_COLLIDE DO_NOT_CLASSIFY

	;Remove the normal health
	RemoveModule ModuleTag_RespawnBody

	; and replace it with a new immortalbody!
	AddModule
	Body = ImmortalBody ModuleTag_ImmortalBody
		MaxHealth = 99999999
	End
	End

	AddModule
	Behavior = ExperienceLevelCreate ModuleTag_MPLevelBonus
		LevelToGrant = 10
		MPOnly = No
	End
	End

	; All valar will go 50
	LocomotorSet
		Locomotor = HeroHumanLocomotor
		Condition = SET_NORMAL 
		Speed     = 50
	End


	EvaEventDieOwner 		= none

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Animations models etc.
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<


	AddModule
	Behavior = GrantUpgradeCreate ModuleTag_1
		UpgradeToGrant = Upgrade_GandalfWhite  ;
	End 
	End

;	AddModule
;	Behavior = SubObjectsUpgrade Body_zdhzd
;		TriggeredBy			   = Upgrade_GandalfWhite
;		UpgradeTexture		   = guaragorn_rotk.tga		0 mushelob.tga  ;EUElrond.tga  ;guaragorn_rotk.tga
;		UpgradeTexture		   = GUAragfel.tga		0 guaragorn_rotk_m.tga
;		RecolorHouse		   = No
;	End
;	End


	ReplaceModule ModuleTag_DRAW
	Draw = W3DScriptedModelDraw ModuleTag_DRAW1

		;WadingParticleSys = EntRipples
		StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD
		OkToChangeModelColor = Yes
		GlowEnabled = Yes
		GlowEmissive = No
	
		DefaultModelConditionState
			Model					= EUGlrfdl_SKN
			Skeleton				= EUGlrfdl_SKL

			ParticleSysBone = None ValarBeastRealmGlow FollowBone:Yes
			ParticleSysBone = BAT_HEAD ValarBeastRealmSmudge FollowBone:Yes

		End

		


		; --- Transition Anims

		; --- Idle Anims
		IdleAnimationState
			Animation				= IDLB
				AnimationName		= EUGlrfdl_IDLB
				AnimationMode		= ONCE
			End
			Animation				= IDLC
				AnimationName		= EUGlrfdl_IDLC
				AnimationMode		= ONCE
			End
			Animation				= IDLD
				AnimationName		= EUGlrfdl_IDLD
				AnimationMode		= ONCE
			End
			Animation				= IDLE
				AnimationName		= EUGlrfdl_IDLE
				AnimationMode		= ONCE
			End
			Animation				= IDLF
				AnimationName		= EUGlrfdl_SPCA
				AnimationMode		= ONCE
				AnimationBlendTime = 30
				AnimationSpeedFactorRange = 0.6 0.6
			End
			Animation				= IDLG
				AnimationName		= EUGlrfdl_SPCA
				AnimationMode		= ONCE
				AnimationBlendTime = 30
				AnimationSpeedFactorRange = 0.6 0.6
			End
			StateName				= Idle
			BeginScript
				CurDrawableHideSubObject("spear")
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Selected" then CurDrawableSetTransitionAnimState("TRANS_Selected_To_Idle") end
			EndScript

			ParticleSysBone = B_SWORD ValarBeastRealmWeapon1 FollowBone:Yes

		End

	

		AnimationState				=	MOVING ATTACKING
			Flags					=	RANDOMSTART
			Animation				=	RUNB
				AnimationName		=	EUGlrfdl_RUNB
				AnimationMode		=	LOOP
				AnimationSpeedFactorRange = 0.6 0.6
			End
			StateName				=	NoSword
			BeginScript
				CurDrawableHideSubObject("spear")
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Sword" then CurDrawableSetTransitionAnimState("TRANS_SheatheSword") end
			EndScript
			ParticleSysBone = B_SWORD ValarBeastRealmWeapon2 FollowBone:Yes
		End


		AnimationState				=	MOVING
			Flags					=	RANDOMSTART
			Animation				=	RUNA
				AnimationName		=	EUGlrfdl_RUNA
				AnimationMode		=	LOOP
				AnimationSpeedFactorRange = 0.6 0.6
			End
			StateName				=	NoSword
			BeginScript
				CurDrawableHideSubObject("spear")
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Sword" then CurDrawableSetTransitionAnimState("TRANS_SheatheSword") end
			EndScript
			ParticleSysBone = B_SWORD ValarBeastRealmWeapon2 FollowBone:Yes
		End


		
		; --------- Click and Hit Reactions ------------
		AnimationState			= HIT_REACTION HIT_LEVEL_1
			StateName			= STATE_Bored_Sword
			Animation			= Hit_Level_1_A
				AnimationName	= EUGlrfdl_HITA
				AnimationMode	= ONCE
			End
		End
		
		AnimationState			= HIT_REACTION HIT_LEVEL_2
			StateName			= STATE_Bored_Sword
			Animation			= Hit_Level_1_A
				AnimationName	= EUGlrfdl_HITA
				AnimationMode	= ONCE
			End
		End
		
		AnimationState			= HIT_REACTION HIT_LEVEL_3
			StateName			= STATE_Bored_Sword
			Animation			= Hit_Level_1_A
				AnimationName	= EUGlrfdl_HITA
				AnimationMode	= ONCE
			End
		End
		
		; --------- Selected Anims and Transitions
		TransitionState					=	TRANS_Idle_to_Selected
			Animation					=	ATNA
				AnimationName			=	EUGlrfdl_ATNA
				AnimationMode			=	ONCE
			End
			ParticleSysBone = B_SWORD ValarBeastRealmWeapon1 FollowBone:Yes
		End
		
		TransitionState					=	TRANS_Selected_To_Idle
			Animation					=	ATNC
				AnimationName			=	EUGlrfdl_ATNC
				AnimationMode			=	ONCE
			End
			ParticleSysBone = B_SWORD ValarBeastRealmWeapon1 FollowBone:Yes
		End
		
		AnimationState						= LEVELED
			Animation						= LevelUp
				AnimationName				= EUGlrfdl_LVLA
				AnimationMode				= ONCE
				AnimationSpeedFactorRange	= 0.75 0.75
			End
			ParticleSysBone = B_SWORD ValarBeastRealmWeapon1 FollowBone:Yes
		End
		

		AnimationState				=	SELECTED
			StateName				=	Selected
			SimilarRestart			=   Yes			
			Animation				=	ATNB
				AnimationName		=	EUGlrfdl_ATNB
				AnimationMode		=	LOOP
			End

			ParticleSysBone = B_SWORD ValarBeastRealmWeapon1 FollowBone:Yes

			BeginScript
				CurDrawableHideSubObject("spear")
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Idle_to_Selected") end
			EndScript
		End
		
		;----Emotion Animations
		AnimationState				=	EMOTION_CELEBRATING
			Animation				=	CHRA
				AnimationName		=	EUGlrfdl_CHRA
				AnimationMode		=	ONCE
				AnimationPriority	=	10
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE	
			ParticleSysBone = B_SWORD ValarBeastRealmWeapon1 FollowBone:Yes			
		End
		
		AnimationState					= EMOTION_TAUNTING
			Animation
				AnimationName			= EUGlrfdl_TNTA
				AnimationMode			= LOOP
			End
			ParticleSysBone = B_SWORD ValarBeastRealmWeapon1 FollowBone:Yes
		End
		
		AnimationState					= EMOTION_ALERT EMOTION_MORALE_HIGH
			Animation					= Taunting
				AnimationName			= EUGlrfdl_TNTA
				AnimationMode			= ONCE
			End
			ParticleSysBone = B_SWORD ValarSpiderRealmWeapon1 FollowBone:Yes
			Flags						= RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
		End
		
		; READY IDLE
		AnimationState        = EMOTION_ALERT
			Animation           = ALERT_1
				AnimationName     = EUGlrfdl_IDLA
				AnimationMode     = ONCE
			End
			ParticleSysBone = B_SWORD ValarBeastRealmWeapon1 FollowBone:Yes
			Flags               = RESTART_ANIM_WHEN_COMPLETE
		End	
		
	End
	End

End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Valar Harad Realm
;Reference: ValarHaradRealm
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

FXParticleSystem ValarHaradRealmWeapon1
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXFire03.tga  ;EXSplatHaze.tga
    Lifetime = 50 50
    SortLevel = 1
    Size = 10 10
    BurstCount = 1 1
    BurstDelay = 10 10
    InitialDelay = 1 1
    IsParticleUpTowardsEmitter = Yes
  End
  Color = DefaultColor
    Color2 = R:185 G:106 B:40 5
    Color3 = R:255 G:106 B:40 20
  End
  Update = DefaultUpdate
    SizeRate = -0.25 -0.25
    SizeRateDamping = 1 1
    AngleZ = -7 7
    AngularDamping = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
    Gravity = 0.005
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = LineEmissionVolume
    StartPoint = X:1 Y:0 Z:0
    EndPoint = X:-1 Y:0 Z:0
  End
  Draw = DefaultDraw
  End
End

;SMUDGE.tga  ;EXBoltradial.tga  ;EXleadership2.tga  ;EXBarbstreaks.tga ;EXBlast4.tga ;EXldrshplvl3b.tga ;EXleadership2.tga ; EXBoltradial.tga ;EXdagonhead.tga ;EXSplatHaze.tga

FXParticleSystem ValarHaradRealmGlow
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXGlow02.tga
    Lifetime = 40 40
    SortLevel = 1
    BurstDelay = 1 1
    Size = 40 40
    BurstCount = 1 1
    IsGroundAligned = Yes
  End
  Color = DefaultColor
    Color2 = R:60 G:45 B:25 10
    Color3 = R:0 G:0 B:0 20
  End
  Alpha = DefaultAlpha
    Alpha1 = 1 1 0
  End
  Update = DefaultUpdate
    SizeRate = 4.5 4.5
    SizeRateDamping = 0.7 0.8
    AngleZ = -7 7
    AngularRateZ = -0.2 0.2
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = LineEmissionVolume
    EndPoint = X:0 Y:0 Z:25
  End
  Draw = DefaultDraw
  End
End


FXParticleSystem ValarHaradRealmSmudge
  System
    Priority = ALWAYS_RENDER
    Shader = ALPHA
    ParticleName = SMUDGE.tga
    Lifetime = 10 10
    Size = 40 40
    BurstCount = 1 1
  End
  Color = DefaultColor
    Color1 = R:255 G:255 B:255 0
  End
  Alpha = DefaultAlpha
    Alpha1 = 1 1 0
  End
  Update = DefaultUpdate
    SizeRate = 1 1
    SizeRateDamping = 0.9 0.95
    AngleZ = 0.0025 0.005
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.96 0.97
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = -2 2
    Z = -1 1
  End
  EmissionVolume = LineEmissionVolume
    IsHollow = Yes
    StartPoint = X:0 Y:0 Z:10
    EndPoint = X:0 Y:0 Z:20
  End
  Draw = DefaultDraw
  End
End


;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Fire Realm Valar Object
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

MappedImage ValarHaradRealm
	Texture = mprhun.tga
	TextureWidth = 84
	TextureHeight = 84
	Coords = Left:0 Top:0 Right:63 Bottom:63
	Status = NONE
End

Object GondorGandalf

	Scale = 1.4

	SelectPortrait = ValarHaradRealm
	ButtonImage = ValarHaradRealm

	DisplayName = ValarOfDust

	CommandSet = ValarCommandSet

	WeaponSet
		Conditions          = None
		Weapon              = PRIMARY		None
		AutoChooseSources	= TERTIARY		NONE
	End

	ArmorSet
		Conditions      = None
		Armor           = ValarArmor
		DamageFX        = NormalDamageFX
	End

	ShockwaveResistance = SHOCKWAVE_RESISTANCE_ALWAYS ; can never lose footing and can never be kocked back by anything.

	VisionRange = 100				
	ShroudClearingRange = 150

	VoiceAttack			= SauronVoiceAttack
	VoiceAttackCharge		= SauronVoiceAttack
	VoiceAttackMachine	= SauronVoiceAttack
	VoiceAttackStructure	= SauronVoiceAttack
	VoiceFear 			= SauronVoiceAttack
	;VoiceCreated		= EomerVoiceSalute		;this conflicts with his respawn dialogue line -- rehooked to spawn FX
	;VoiceFullyCreated 	= EomerVoiceSalute		;this conflicts with his respawn dialogue line -- rehooked to spawn FX
	VoiceMove			= SauronVoiceMove
	VoiceMoveToCamp		= SauronVoiceMove
	VoiceMoveWhileAttacking	= SauronVoiceMove
	VoicePriority		= 99
	VoiceRetreatToCastle	= SauronVoiceMove
	VoiceSelect			= SauronVoiceSelect
	VoiceSelectBattle 	= SauronVoiceSelect
	VoiceGuard			= SauronVoiceSelect

	SoundImpact			= ImpactHorse

	UnitSpecificSounds
		VoiceGarrison						= EomerVoiceGarrison
		VoiceEnterUnitElvenTransportShip	= SauronVoiceSelect
		VoiceInitiateCaptureBuilding		= SauronVoiceSelect
	End

	CrowdResponseKey = GoodMen

	RadarPriority = UNIT

	;This should make it completely unattackible and follow the rules of War of the realms, the valar will Not interact with anything.
	KindOf = HERO PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE ATTACK_NEEDS_LINE_OF_SIGHT IGNORES_SELECT_ALL UNATTACKABLE DONT_HIDE_IF_FOGGED REVEAL_TO_ALL ;NO_COLLIDE DO_NOT_CLASSIFY

	;Remove the normal health
	RemoveModule ModuleTag_RespawnBody

	; and replace it with a new immortalbody!
	AddModule
	Body = ImmortalBody ModuleTag_ImmortalBody
		MaxHealth = 99999999
	End
	End

	AddModule
	Behavior = ExperienceLevelCreate ModuleTag_MPLevelBonus
		LevelToGrant = 10
		MPOnly = No
	End
	End

	; All valar will go 50
	LocomotorSet
		Locomotor = HeroHumanLocomotor
		Condition = SET_NORMAL 
		Speed     = 50
	End


	EvaEventDieOwner 		= none

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Animations models etc.
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<


	AddModule
	Behavior = GrantUpgradeCreate ModuleTag_1
		UpgradeToGrant = Upgrade_GandalfWhite  ;
	End 
	End

	AddModule
	Behavior = SubObjectsUpgrade Body_UKBOD01111111
		TriggeredBy			   = Upgrade_GandalfWhite
		UpgradeTexture		   = GUGandalf.tga		0 IUSaruman.tga
		RecolorHouse		   = No
	End
	End



	ReplaceModule ModuleTag_01
	Draw = W3DScriptedModelDraw ModuleTag_011

		GlowEnabled = Yes
		GlowEmissive = No
		
		OkToChangeModelColor = Yes
		
		StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD

		ExtraPublicBone = STAFF
		ExtraPublicBone = B_SWORDBONE
		ExtraPublicBone = PASSENGERBONE
		DependencySharedModelFlags = TURN_LEFT_HIGH_SPEED TURN_RIGHT_HIGH_SPEED MOVING ACCELERATE DECELERATE TURN_LEFT TURN_RIGHT ATTACKING BACKING_UP
		
		;;; MODEL STATES ;;;
		DefaultModelConditionState ;gandalf is grey to start out with
			Model               = GUGdfHrs_SKN_M  ;GUGandalfG_SKN
			WeaponLaunchBone    = TERTIARY STAFF 
			;ParticleSysBone = STAFF ValarHaradRealmWeapon1 FollowBone:Yes
			ParticleSysBone = NONE ValarHaradRealmGlow FollowBone:Yes
			ParticleSysBone = NONE ValarHaradRealmSmudge FollowBone:Yes
		End

		;;; White Only versions of Gandalf (for solo missions excluding Moria) ;;;
		ModelConditionState		= USER_2 MOUNTED
			Model               = GUGdfHrs_SKN_M
			WeaponLaunchBone    = PRIMARY PASSENGERBONE
			WeaponLaunchBone    = TERTIARY STAFF
		End

		ModelConditionState		= USER_2
			Model               = GUGandalf_SKN
			WeaponLaunchBone    = TERTIARY STAFF 
		End
		
		;;; Grey versions of Gandalf USER MODELS (For Moria only) -- never becomes white;;;
		ModelConditionState		= USER_1 MOUNTED
			Model               = GUGdfGHrs_SKN
			WeaponLaunchBone    = PRIMARY PASSENGERBONE
			WeaponLaunchBone    = TERTIARY STAFF
            Shadow				= SHADOW_ADDITIVE_DECAL
            ShadowSizeX			= 200;
            ShadowSizeY			= 200;
            ShadowTexture		= EXGandalfGlow;
		End

		ModelConditionState		= USER_1
			Model               = GUGandalfG_SKN
			WeaponLaunchBone    = TERTIARY STAFF 
;			ParticleSysBone     = STAFF GandalfMoriaLight FollowBone:Yes
;			ParticleSysBone     = STAFF GandalfMoriaLightCenter FollowBone:Yes
            Shadow				= SHADOW_ADDITIVE_DECAL
            ShadowSizeX			= 200;
            ShadowSizeY			= 200;
            ShadowTexture		= EXGandalfGlow;
		End
		
		;;; Mounted version of Gandalf White ;;;
		ModelConditionState		= MOUNTED HERO
			Model               = GUGdfHrs_SKN_M
			WeaponLaunchBone    = PRIMARY PASSENGERBONE
			WeaponLaunchBone    = TERTIARY STAFF
		End

		;;; Mounted version of Gandalf Grey ;;;
		ModelConditionState		= MOUNTED
			Model               = GUGdfGHrs_SKN
			WeaponLaunchBone    = PRIMARY PASSENGERBONE
			WeaponLaunchBone    = TERTIARY STAFF
		End
		
		;;; Gandalf the White version on foot ;;;
		ModelConditionState = HERO ;turn me white when the spell is cast
			Model               = GUGandalf_SKN
			WeaponLaunchBone    = TERTIARY STAFF 
		End

		ModelConditionState = WORLD_BUILDER
			Model = None
		End		

		IdleAnimationState
			StateName = Idle
			Animation = Foot_IDLB ; Bored Idle
				AnimationName       = GUGandalfG_SKL.GUGandalfG_IDLB
				AnimationMode       = ONCE
				AnimationPriority   = 20
			End
			Animation = Foot_IDLC ; Bored Fidget
				AnimationName       = GUGandalfG_SKL.GUGandalfG_IDLC
				AnimationMode       = ONCE
				AnimationPriority   = 2
			End
			Animation = Foot_IDLD ; Bored Fidget
				AnimationName       = GUGandalfG_SKL.GUGandalfG_IDLD
				AnimationMode       = ONCE
				AnimationPriority   = 1
			End
			Animation = Foot_IDLE ; Bored Fidget
				AnimationName       = GUGandalfG_SKL.GUGandalfG_IDLE
				AnimationMode       = ONCE
				AnimationPriority   = 2
			End
			;Animation = Foot_IDLF ; Bored Fidget
			;	AnimationName       = GUGandalfG_SKL.GUGandalfF_IDLF	does not exist...
			;	AnimationMode       = ONCE
			;	AnimationPriority   = 1
			;End
			
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Selected" then CurDrawableSetTransitionAnimState("TRANS_Selected_To_Idle") end
				CurDrawableHideSubObject("STAFF_LIGHT")		
			EndScript	

		
		ParticleSysBone = STAFF ValarHaradRealmWeapon1 FollowBone:Yes
		ParticleSysBone = NONE Predator02 FollowBone:Yes
				
		End

		; --- stunned anims  Which must go before deaths in case we are dying in the air.  Plus, DyingSplatted must of course be before Dying

		
		
		
		
		

		AnimationState        =  PASSENGER EATING
			StateName = BeingEaten
			Animation
				AnimationName           = GUGandalfG_SKL.GUGandalfG_EATA
				AnimationMode       = ONCE
				AnimationBlendTime	=	4
			End
		End
	
		AnimationState        =  PASSENGER
		StateName = BeingEaten
			Animation
				AnimationName           = GUGandalfG_SKL.GUGandalfG_FLLA
				AnimationMode       = LOOP
				AnimationBlendTime	=	4
			End
		End


		;;; Moving Anims ;;;
		
		
		
		AnimationState        = MOVING WANDER
			Animation = Wandering
				AnimationName           = GUGandalfG_SKL.GUGandalfG_WLKA ;32
				AnimationMode       = LOOP
			End
		End
	
		AnimationState        = MOVING
			Animation = Moving
				AnimationName           = GUGandalfG_SKL.GUGandalfG_RUNB ;20
				AnimationMode       = LOOP
			End
			Flags               = RANDOMSTART
		End
		
	
		AnimationState        = EMOTION_ALERT
			Animation           = ALERT_1
				AnimationName     = GUGandalfG_SKL.GUGandalfG_IDLA
				AnimationMode     = ONCE
			End
			Flags               = RESTART_ANIM_WHEN_COMPLETE ; acts like an idle animation & keeps running the animations.
		End

		AnimationState        = LEVELED	USER_1; This state clears itself in 3 of your Earth seconds
			Animation = Yippee
				AnimationName           = GUGandalfG_SKL.GUGandalfG_LVLA
				AnimationMode       = ONCE
			End
			BeginScript
				CurDrawableShowSubObject("STAFF_LIGHT")			
			EndScript						
		End

		AnimationState        = LEVELED	; This state clears itself in 3 of your Earth seconds
			Animation = Yippee
				AnimationName           = GUGandalfG_SKL.GUGandalfG_LVLA
				AnimationMode       = ONCE
			End
		End
		

		AnimationState        = MOUNTED RAISING_FLAG
			Animation
				AnimationName           = GUGdfHrs_SKL.GUGdfHrs_LVLA
				AnimationMode       = LOOP
			End
		End

		AnimationState        = MOUNTED EMOTION_CELEBRATING
			Animation
				AnimationName           = GUGdfHrs_SKL.GUGdfHrs_LVLA
				AnimationMode       = LOOP
			End
		End

		AnimationState        = MOUNTED EMOTION_TAUNTING
			Animation
				AnimationName           = GUGdfHrs_SKL.GUGdfHrs_LVLA
				AnimationMode       = LOOP
			End
		End


		
		TransitionState					=	TRANS_Idle_to_Selected
			Animation					=	ATNA
				AnimationName			=	GUGandalfG_SKL.GUGandalfG_ATNA
				AnimationMode			=	ONCE
			End
		End
		
		TransitionState					=	TRANS_Selected_To_Idle
			Animation					=	ATNE ;ATNC
				AnimationName			=	GUGandalfG_SKL.GUGandalfG_ATNE ;C
				AnimationMode			=	ONCE
			End
		End

		AnimationState				=	SELECTED USER_1
			StateName				=	Selected
			SimilarRestart			=   Yes			
			Animation				=	ATNB			
				AnimationName		=	GUGandalfG_SKL.GUGandalfG_ATNB
				AnimationMode		=	LOOP
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Idle_to_Selected") end
			EndScript
		End

		AnimationState        = RAISING_FLAG
			Animation
				AnimationName           = GUGandalfG_SKL.GUGandalfG_LVLA
				AnimationMode       = LOOP
			End
		End

		AnimationState        = EMOTION_CELEBRATING
			Animation
				AnimationName           = GUGandalfG_SKL.GUGandalfG_LVLA
				AnimationMode       = LOOP
			End
		End

		AnimationState        = EMOTION_TAUNTING
			Animation
				AnimationName           = GUGandalfG_SKL.GUGandalfG_LVLA
				AnimationMode       = LOOP
			End
		End

		AnimationState				=	SELECTED
			StateName				=	Selected
			SimilarRestart			=   Yes			
			Animation				=	ATNB			
				AnimationName		=	GUGandalfG_SKL.GUGandalfG_ATNB
				AnimationMode		=	LOOP
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Idle_to_Selected") end
				CurDrawableHideSubObject("STAFF_LIGHT")			
			EndScript
		End
		

		AnimationState = HIT_REACTION HIT_LEVEL_1
			Animation = Hit_Level_1_a
				AnimationName = GUGandalfG_SKL.GUGandalfG_HITA
				AnimationMode = ONCE
			End
		End
		
		
		AnimationState        =  USER_1
			StateName = user_1_idle
			Animation = Foot_IDLB ; Bored Idle
				AnimationName       = GUGandalfG_SKL.GUGandalfG_IDLB
				AnimationMode       = ONCE
				AnimationPriority   = 2
			End
			Animation = Foot_IDLC ; Bored Fidget
				AnimationName       = GUGandalfG_SKL.GUGandalfG_IDLC
				AnimationMode       = ONCE
				AnimationPriority   = 2
			End
			Animation = Foot_IDLD ; Bored Fidget
				AnimationName       = GUGandalfG_SKL.GUGandalfG_IDLD
				AnimationMode       = ONCE
				AnimationPriority   = 1
			End
			Animation = Foot_IDLE ; Bored Fidget
				AnimationName       = GUGandalfG_SKL.GUGandalfG_IDLE
				AnimationMode       = ONCE
				AnimationPriority   = 2
			End
			;Animation = Foot_IDLF ; Bored Fidget
			;	AnimationName       = GUGandalfG_SKL.GUGandalfF_IDLF	 does not exist...
			;	AnimationMode       = ONCE
			;	AnimationPriority   = 1
			;End
			
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Selected" then CurDrawableSetTransitionAnimState("TRANS_Selected_To_Idle") end
				CurDrawableShowSubObject("STAFF_LIGHT")			
			EndScript			
		End

	End
	End


End


;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Map FXs
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

FXParticleSystem MapEnshroudingMist
  System
    Priority = ALWAYS_RENDER
    Shader = ALPHA
    ParticleName = EXsmokeplume.tga
    Lifetime = 250 250
    SortLevel = 1
    Size = 25 25
    StartSizeRate = 1 1
    BurstCount = 0 2
    IsGroundAligned = Yes
  End
  Color = DefaultColor
    Color1 = R:202 G:207 B:213 0
    Color2 = R:236 G:207 B:203 0
    Color3 = R:235 G:207 B:204 100
    ColorScale = -30 20
  End
  Alpha = DefaultAlpha
    Alpha2 = 0.30 0.30 50
    Alpha3 = 0 0 100
  End
  Update = DefaultUpdate
    SizeRate = 0.3 0.4
    SizeRateDamping = 1.01 1.01
    AngleZ = 0 7
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 1.03 1.03
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = -0.2 0.2
    Y = -0.2 0.2
  End
  EmissionVolume = CylinderEmissionVolume
    IsHollow = No
    Radius = 700
    Length = 6
    Offset = X:0 Y:0 Z:30
  End
  Draw = DefaultDraw
  End
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<


Object CINE_ParticleSysProxy6

	AddModule
	Draw = W3DScriptedModelDraw ModuleTag_011
		DefaultModelConditionState
			Model = NONE
			ParticleSysBone = None MapEnshroudingMist


		End
	End
	End

End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<


FXParticleSystem WhiteCreationWave
  System
    Priority = ALWAYS_RENDER
    Shader = W3D_EMISSIVE
    Type = DRAWABLE
    ParticleName = exwatersphere.w3d
    Lifetime = 250 250
    SystemLifetime = 10
    StartSizeRate = 0.2 0.2
    BurstCount = 1 1
  End
  Color = DefaultColor
    Color1 = R:255 G:255 B:255 0
    Color2 = R:0 G:0 B:0 39
  End
  Alpha = DefaultAlpha
    Alpha1 = 0.05 0.05 0
  End
  Update = DefaultUpdate
    SizeRate = 0.9 0.9
    SizeRateDamping = 1 1
    AngleZ = -500 500
    AngularRateZ = -0.1 0.1
    AngularDamping = 0.97 0.97
    Rotation = ROTATE_Z
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = PointEmissionVolume
  End
  Draw = RenderObjectDraw
  End
End
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Object CINE_ParticleSysProxy5

	AddModule
	Draw = W3DScriptedModelDraw ModuleTag_011
		DefaultModelConditionState
			Model = NONE
			ParticleSysBone = None WhiteCreationWave


		End
	End
	End

End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<



;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

FXParticleSystem FireRealmFireGlow
  System
    Priority = ALWAYS_RENDER  ;HIGH_OR_ABOVE  ;ALWAYS_RENDER
    ParticleName = EXLnzFlar1.tga
    Lifetime = 50 50
    SortLevel = 1
    Size = 5 10
    BurstDelay = 8 8
    BurstCount = 1 1
  End
  Color = DefaultColor
    Color1 = R:255 G:135 B:80 0
    Color2 = R:0 G:0 B:0 50
    ColorScale = -5 0
  End
  Update = DefaultUpdate
    SizeRate = 6 2
    SizeRateDamping = 0.8 0.85
    AngleZ = -0.3 0.3
    AngularRateZ = -0.03 0.03
    AngularDamping = 0.99 0.99
  End
  Physics = DefaultPhysics
    Gravity = 0.004
    VelocityDamping = 0.9 0.9
    DriftVelocity = X:0 Y:0 Z:0.64
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = -0.4 0.4
    Y = -0.4 0.4
    Z = 0 0
  End
  EmissionVolume = CylinderEmissionVolume
    IsHollow = No
    Radius = 20
    Length = 6
    Offset = X:0 Y:0 Z:5
  End
  Draw = DefaultDraw
  End
  Wind = DefaultWind
    WindMotion = PingPong
    WindStrength = 0.7
    WindAngleChangeMin = 0.017453
    WindAngleChangeMax = 0.034907
    WindPingPongStartAngleMax = 0.785398
    WindPingPongEndAngleMin = 5.49779
    WindPingPongEndAngleMax = 6.28319
  End
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

FXParticleSystem FireRealmHeat
  System
    Priority = ALWAYS_RENDER  ;VERY_LOW_OR_ABOVE
    Shader = ALPHA
    ParticleName = SMUDGE.tga
    Lifetime = 30 30
    Size = 40 40
    BurstDelay = 10 15
    BurstCount = 1 1
  End
  Color = DefaultColor
    Color1 = R:255 G:255 B:255 0
  End
  Alpha = DefaultAlpha
    Alpha1 = 1 1 0
  End
  Update = DefaultUpdate
    SizeRate = 1 1
    SizeRateDamping = 0.9 0.95
    AngleZ = 0.0025 0.005
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.96 0.97
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = -2 2
    Z = -1 1
  End
  EmissionVolume = LineEmissionVolume
    IsHollow = Yes
    StartPoint = X:0 Y:0 Z:15
    EndPoint = X:0 Y:0 Z:5
  End
  Draw = DefaultDraw
  End
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

FXParticleSystem FireRealmFireEmbers
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXEmbersLight.tga
    Lifetime = 50 50
    SortLevel = 1
    Size = 10 15
    BurstDelay = 12 15
    BurstCount = 1 1
  End
  Color = DefaultColor
    Color1 = R:255 G:135 B:80 0
    Color2 = R:0 G:0 B:0 50
    ColorScale = -5 0
  End
  Update = DefaultUpdate
    SizeRate = 6 6
    SizeRateDamping = 0.8 0.85
    AngleZ = -0.3 0.3
    AngularRateZ = -0.03 0.03
    AngularDamping = 0.99 0.99
  End
  Physics = DefaultPhysics
    Gravity = 0.008
    VelocityDamping = 0.9 0.9
    DriftVelocity = X:0 Y:0 Z:0.64
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = CylinderEmissionVolume
    IsHollow = No
    Radius = 20
    Length = 6
    Offset = X:0 Y:0 Z:5
  End
  Draw = DefaultDraw
  End
  Wind = DefaultWind
    WindMotion = PingPong
    WindStrength = 0.4
    WindAngleChangeMin = 0.017453
    WindAngleChangeMax = 0.034907
    WindPingPongStartAngleMax = 0.785398
    WindPingPongEndAngleMin = 5.49779
    WindPingPongEndAngleMax = 6.28319
  End
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

FXParticleSystem FireRealmSmoke
  System
    Priority = ALWAYS_RENDER  ;HIGH_OR_ABOVE  ;VERY_LOW_OR_ABOVE
    Shader = ALPHA
    ParticleName = EXsmokeplume.tga
    Lifetime = 250 250
    Size = 10 10
    BurstDelay = 2 2
    BurstCount = 1 1
  End
  Color = DefaultColor
    Color1 = R:77 G:71 B:68 0
  End
  Alpha = DefaultAlpha
    Alpha2 = 0.1 0.2 5
    Alpha3 = 0.1 0.4 25
    Alpha4 = 0 0 150
  End
  Update = DefaultUpdate
    SizeRate = 0.25 0.5
    SizeRateDamping = 0.95 1
    AngleZ = 5 -5
    AngularRateZ = -0.03 0.03
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.99 0.99
    DriftVelocity = X:0.24 Y:0.024 Z:0.024
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = -0.7 0.7
    Y = -0.7 0.7
    Z = 1 1
  End
  EmissionVolume = CylinderEmissionVolume
    IsHollow = No
    Radius = 20
    Length = 6
    Offset = X:0 Y:0 Z:5
  End
  Draw = DefaultDraw
  End
  Wind = DefaultWind
    WindMotion = PingPong
    WindStrength = 0.3
    WindFullStrengthDist = 15
    WindZeroStrengthDist = 150
    WindAngleChangeMin = 0.017453
    WindAngleChangeMax = 0.034907
    WindPingPongStartAngleMax = 0.785398
    WindPingPongEndAngleMin = 5.49779
    WindPingPongEndAngleMax = 6.28319
  End
End


Object CINE_ParticleSysProxy4

	AddModule
	Draw = W3DScriptedModelDraw ModuleTag_011
		DefaultModelConditionState
			Model = NONE
			ParticleSysBone = None FireRealmFireGlow
			;ParticleSysBone = None FireRealmHeat ; will make to much lag.
			ParticleSysBone = None FireRealmFireEmbers
			ParticleSysBone = None FireRealmSmoke


		End
	End
	End

End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

FXParticleSystem IntroMagic1
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXGlow02.tga
    Lifetime = 150 150
    SystemLifetime = 370
    SortLevel = 1
    Size = 4 10
    BurstDelay = 1 1
    BurstCount = 3 3
    InitialDelay = 5 5
  End
  Color = DefaultColor
    Color1 = R:86 G:118 B:217 0
    Color2 = R:0 G:0 B:0 125
    Color3 = R:187 G:179 B:157 0
  End
  Alpha = DefaultAlpha
    Alpha2 = 0.5 0.5 5
    Alpha3 = 0.5 0.5 190
    Alpha4 = 0 0 200
  End
  Update = DefaultUpdate
    SizeRate = -0.25 -0.25
    SizeRateDamping = 1 1
    AngleZ = 0 7
    AngularRateZ = -0.25 0.25
    AngularDamping = 1 1
    AngleXY = 0.1 0.1
    AngularRateXY = 0.5 0.9
    AngularDampingXY = 0.9 0.9
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
    DriftVelocity = X:0 Y:0 Z:0.5
    Swirly = Yes
  End
  EmissionVelocity = OutwardEmissionVelocity
    Speed = 20.5 1
  End
  EmissionVolume = CylinderEmissionVolume
    Radius = 100
    Length = 50
    Offset = X:0 Y:0 Z:15
  End
  Draw = DefaultDraw
  End
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

FXParticleSystem NewTornadoSpinningDust
  System
    Priority = ALWAYS_RENDER
    Shader = ALPHA
    ParticleName = EXCloud06.tga
    Lifetime = 80 80
    SystemLifetime = 470
    SortLevel = 1
    Size = 25 35
    BurstCount = 5 5
  End
  Color = DefaultColor
    Color1 = R:86 G:118 B:217 0
    Color2 = R:0 G:0 B:0 125
    Color3 = R:187 G:179 B:157 0
  End
  Alpha = DefaultAlpha
    Alpha2 = 0.25 0.5 10
    Alpha3 = 0 0 25
  End
  Update = DefaultUpdate
    SizeRate = 1 1
    SizeRateDamping = 1 1
    AngleZ = 0 7
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
    DriftVelocity = X:0 Y:0 Z:0.25
  End
  EmissionVelocity = OutwardEmissionVelocity
    Speed = -3 -3
  End
  EmissionVolume = CylinderEmissionVolume
    IsHollow = Yes
    Radius = 100
    Offset = X:0 Y:0 Z:15
  End
  Draw = DefaultDraw
  End
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

FXParticleSystem MagicBallTrail
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXGlow02.tga  ;EXexplo03.tga
    Lifetime = 30 30
    SortLevel = 1
    Size = 3 1
    BurstCount = 1 1
    BurstDelay = 1 1
  End
  Color = DefaultColor
    Color1 = R:86 G:118 B:217 0
    Color2 = R:0 G:0 B:0 125
    Color3 = R:187 G:179 B:157 0
  End
  Alpha = DefaultAlpha
    Alpha1 = 0.1 0.1 0
    Alpha2 = -0.5 0 120
  End
  Update = DefaultUpdate
    SizeRate = 2 3
    SizeRateDamping = 0.85 0.9
    AngleZ = -7 7
    AngularRateZ = -0.1 0.1
    AngularDamping = 0.9 0.95
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.9 0.95
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = PointEmissionVolume
  End
  Draw = DefaultDraw
  End
End


FXParticleSystem MagicBalls
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXSmokePuf07.tga
    PerParticleAttachedSystem = MagicBallTrail
    Lifetime = 500 500
    SystemLifetime = 370
    SortLevel = 1
    Size = 1 1
    BurstDelay = 5 8
    BurstCount = 0 1.1
  End
  Color = DefaultColor
    Color1 = R:86 G:118 B:217 0
    Color2 = R:0 G:0 B:0 125
    Color3 = R:187 G:179 B:157 0
  End
  Alpha = DefaultAlpha
    Alpha1 = 0.01 0.01 0
    Alpha2 = 0 0 500
  End
  Update = DefaultUpdate
    SizeRateDamping = 1 1
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    Gravity = -0.1
    VelocityDamping = 1 1
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = -5 5
    Y = -5 5
    Z = 3 6
  End
  EmissionVolume = SphereEmissionVolume
    IsHollow = Yes
    Radius = 5
  End
  Draw = DefaultDraw
  End
End


;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

Object CINE_ParticleSysProxy3

	AddModule
	Draw = W3DScriptedModelDraw ModuleTag_011
		DefaultModelConditionState
			Model = NONE
			ParticleSysBone = None IntroMagic1
			ParticleSysBone = None NewTornadoSpinningDust
			ParticleSysBone = None MagicBalls


		End
	End
	End

End
;----------------------------------------------------------------------------------------------------------------------------------------------------------------------
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;END OF INI
;MADE BY JBV3737
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>><<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;----------------------------------------------------------------------------------------------------------------------------------------------------------------------