;INI FILE FOR COMING OF DARKNESS MADE 
;BY GRIZZLEZ AND ARAGON94 AND CODSTERMANDUDE and scarebaby =o
;MAP BY WRATHCHILD
;DO NOT USE OR STEAL THIS FILE OR ANY PARTS OF IT THX
;FOR MORE GREAT MAPS VISIT ISTARI PRODUCTION FORUMS...http://z11.invisionfree.com/Istari_Productions_2/index.php?
;We are currently looking for new mappers, experienced or totally inexperienced to join and learn from us or work with us
;We have a team of the best bfme/bfme2/rotwk/cnc3 mappers all of whom are ready to help mappers/ini writers
;we will help to teach beginner ini writers how to produce maps with all new stuff like powers, heroes etc
;even mappers who just want to view the latest maps we are producing can visit the site, join up and give us some criticism
;and ideas
;so come along to our forums :
;<<<<<<<<<<<<<<<<BUILDERS>>>>>>>>>>>>>>>>>

PlayerTemplate FactionAngmar
StartingUnit1 = NONE
StartingUnitOffset1 = X:30 Y:215 Z:0

StartingUnit0 = NONE
StartingUnitOffset0 = X:1 Y:120 Z:0
End

PlayerTemplate FactionDwarves
StartingUnit1 = NONE
StartingUnitOffset1 = X:30 Y:215 Z:0

StartingUnit0 = NONE
StartingUnitOffset0 = X:1 Y:120 Z:0
End

PlayerTemplate FactionElves
StartingUnit1 = NONE
StartingUnitOffset1 = X:30 Y:215 Z:0

StartingUnit0 = NONE
StartingUnitOffset0 = X:1 Y:120 Z:0
End

PlayerTemplate FactionMen
StartingUnit1 = NONE
StartingUnitOffset1 = X:30 Y:215 Z:0

StartingUnit0 = NONE
StartingUnitOffset0 = X:1 Y:120 Z:0
End

PlayerTemplate FactionIsengard
StartingUnit1 = NONE
StartingUnitOffset1 = X:30 Y:215 Z:0

StartingUnit0 = NONE
StartingUnitOffset0 = X:1 Y:120 Z:0
End

PlayerTemplate FactionMordor
StartingUnit1 = NONE
StartingUnitOffset1 = X:30 Y:215 Z:0

StartingUnit0 = NONE
StartingUnitOffset0 = X:1 Y:120 Z:0
End

PlayerTemplate FactionWild
StartingUnit1 = NONE
StartingUnitOffset1 = X:30 Y:215 Z:0

StartingUnit0 = NONE
StartingUnitOffset0 = X:1 Y:120 Z:0
End
;<<<<<<<<<<<<<<<<Hobbit heroes>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
;*****************************************************************************************************************************
;                                                   PIPPIN
;**************************************************************************************************************************

Weapon HobbitSword  ; BALANCE Hobbit Sword Weapon
  LeechRangeWeapon      = Yes
  AttackRange           = 20.0
  MeleeWeapon           = Yes
  DelayBetweenShots     = HOBBIT_SWORD_DELAYBETWEENSHOTS             ; time between shots, msec
  PreAttackDelay        = HOBBIT_SWORD_PREATTACKDELAY              ; 433 is natural time of the stabbing animation.
  PreAttackType         = PER_SHOT ; Do the delay each time we attack a new target
  FiringDuration        = HOBBIT_SWORD_FIRINGDURATION            ; min 600 for anim
  FireFX                = FX_GondorSwordHit
  FireFlankFX		= FX_Flanking
  DamageNugget                        ; A basic Nugget that just does damage
    Damage        = 200
    Radius        = 0.0
    DelayTime     = 0
    DamageType    = HERO
    DamageFXType  = SWORD_SLASH
    DeathType     = NORMAL
    FlankingBonus = 50%
  End
End
Weapon Pippinrockhit
  DamageNugget                        ; A basic Nugget that just does damage
    Damage        = 200
    Radius        = 2.0
    DelayTime     = 0
    DamageType    = HERO_RANGED
    DamageFXType  = SMALL_ROCK
    DeathType     = NORMAL
  End
End
Weapon DaleBeastSlayerArrow
	AttackRange           = HOBBIT_ROCK_RANGE
	WeaponSpeed           = 150.0        ; dist/sec (huge value == effectively instant)
	AcceptableAimDelta    = 20 
	PreAttackDelay        = 500
	PreAttackType         = PER_SHOT ; Do the delay each time we attack a new target
	HitPercentage	      = 0 ; never auto hits, always hits ground
	ScatterRadius	      = 0.0     ;When this weapon misses it can randomly miss by as much as this distance.
	FiringDuration			= 1200
	DelayBetweenShots		= 1
	CanFireWhileMoving		= Yes

	ProjectileNugget										; A Nugget that creates an Object and sends it to the target with a Warhead
		ProjectileTemplateName	= BlackArrowsProjectile
		WarheadTemplateName	= DaleBeastSlayerWarhead
	End
End
ChildObject BlackArrowsProjectile HobbitRockProjectile
End
Weapon ThranduilThornofVengeance
	AttackRange				= FARAMIR_WOUNDING_ARROW_RANGE
	LeechRangeWeapon			= Yes
	WeaponSpeed				= 150				 ; dist/sec 
	FireFX					= FX_ThranduilThornOfVengeance	;FX_FaramirWoundingArrow
	ScaleWeaponSpeed		= Yes ; Used for lob weapons, scales speed proportional to range
	HitStoredTarget			= Yes	; Always hits initial target.
	HitPercentage			= 100		 
	ScatterRadius			= 0.0		 ;When this weapon misses it can randomly miss by as much as this distance.
	DelayBetweenShots		= 15000									; time between shots, msec
	PreAttackDelay			= 1										; we want isntant
	PreAttackType			= PER_POSITION
	FiringDuration			= 1										; Duration of the archer firing shot is 500ms.
	ClipSize				= 1
	AutoReloadsClip			= Yes
	AutoReloadWhenIdle		= 1	
	ClipReloadTime			= 1
	AntiAirborneVehicle		= Yes
	AntiAirborneMonster		= Yes
	
	
	ProjectileNugget										; A Nugget that creates an Object and sends it to the target with a Warhead
		ProjectileTemplateName	= ThranSpecialArrow
		WarheadTemplateName	= ThranduilThornofVengeanceWarhead
	End
End
SpecialPower SpecialAbilityPippinDeadeye
	Enum					   = SPECIAL_HERO_MODE
	ReloadTime				   = 70000
End
;<>><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><
;><><><><><><><><><><><><><><>><><><><><><><><
Weapon RohanGimliAxeThrown
	AttackRange         = HOBBIT_ROCK_RANGE
	WeaponSpeed = 150.0         ; dist/sec 
	MinWeaponSpeed = 201
	MaxWeaponSpeed = 241      ; dist/sec Upper limit on scaling, when attacking past nominal "max" range
	FireFX = FX_GoodShipBowArrowWeaponFire
	ScaleWeaponSpeed = Yes ; Used for lob weapons, scales speed proportional to range
	HitPercentage = 100
	ScatterRadius     = 0.0      ;When this weapon misses it can randomly miss by as much as this distance.
	DelayBetweenShots = 0        ; time between shots, msec
  	
    AntiAirborneVehicle	= Yes ; added so he can attack fellbeast and birds
    AntiAirborneMonster	= Yes ; added so he can attack fellbeast and birds
  	
  	ClipSize			= 1			; how many shots in a Clip (0 == infinite)
	ClipReloadTime		= 10     ; how long to reload a Clip, msec
	AutoReloadsClip		= Yes
	;IdleAfterFiringDelay = 2500;
	;HoldAfterFiringDelay = 2500 ; So I don't move while the weapon needs to complete
    InstantLoadClipOnActivate = Yes

	PreAttackDelay        = 1400; 1500             ; 1467 is the prep time for archer.
	PreAttackType         = PER_SHOT ; Do the delay each time we attack a new target
	FiringDuration      = 1450; 1567    ; Duration of the archer firing shot is 500ms.

	ProjectileNugget
		ProjectileTemplateName = GimliAxeProjectile
		WarheadTemplateName = RohanGimliAxeThrownWarhead
	End
End

Object GimliAxeProjectile
AddModule
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_DIELIKETHIS
    StartsActive = Yes
    DeathWeapon = Pippinrockhit
  End
  End
End

SpecialPower SpecialAbilityGimliAxe
	Enum			= SPECIAL_AT_VISIBLE_OBJECT
	ReloadTime		= 2000
End

ChildObject GimliAxeProjectile HobbitRockProjectile
  AddModule
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_DIELIKETHIS
    StartsActive = Yes
    DeathWeapon = Pippinrockhit
  End
  End
End
SpecialPower SpecialAbilityRockStorm
  Enum              = SPECIAL_ARROW_STORM
  ReloadTime        = 80000 ; in milliseconds
  RadiusCursorRadius = 120.0 ;Changing this??? Don't, unless you are changing ArrowStormUpdate's TargetRadius. They need to match.
  ;InitiateAtLocationSound = GenericSpell
	ViewObjectDuration = 5000
	ViewObjectRange = 70
End
SpecialPower SpecialAbilityThornRock
  Enum                = SPECIAL_WOUND_ARROW
  ReloadTime          = 90000 ; in milliseconds
  InitiateAtLocationSound = GenericSpell
  ObjectFilter = ALL -BASE_FOUNDATION -INERT -IGNORED_IN_GUI -WALK_ON_TOP_OF_WALL -BLOCKING_GATE -WALL_UPGRADE -UNATTACKABLE -MOVE_ONLY
End
;---------------------------Command Buttons----------------------------
CommandButton Command_SpecialAbilityDeadEye
  Command                 = SPECIAL_POWER 
  SpecialPower            = SpecialAbilityPippinDeadeye
  TextLabel               = CONTROLBAR:RapidFire
  ButtonImage             = HSThranduilDeadeye
  ButtonBorderType        = ACTION 
  DescriptLabel           = CONTROLBAR:ToolTipRapidFire
  InPalantir			  = Yes
  AutoAbility			  = Yes
  AutoDelay				  = 30.0 ; this should sync with the Thranduil's hero mode effect time
  EnableOnModelCondition 	= WEAPONSET_TOGGLE_1				
End
CommandButton Command_SpecialAbilityArrowStorm
  Command                 = SPECIAL_POWER 
  SpecialPower            = SpecialAbilityRockStorm
  Options                 = NEED_TARGET_POS CONTEXTMODE_COMMAND
  TextLabel               = CONTROLBAR:Volley
  ButtonImage             = HSLegolasArrowWind
  CursorName              = Bombard
  RadiusCursorType        = ArrowStormRadiusCursor
  InvalidCursorName       = GenericInvalid
  ButtonBorderType        = ACTION 
  DescriptLabel           = CONTROLBAR:ToolTipVolley
  InPalantir			  = Yes
  AutoAbility			  = No
  EnableOnModelCondition 	= WEAPONSET_TOGGLE_1
End
CommandButton Command_SpecialAbilityThornofVengeance
	Command                 = SPECIAL_POWER
	SpecialPower            = SpecialAbilityThornRock
	Options                 = NEED_TARGET_ENEMY_OBJECT
	TextLabel               = CONTROLBAR:SilverRock
	ButtonImage             = HSThranduilThornofVengeance
	CursorName              = Bombard
	InvalidCursorName       = GenericInvalid
	ButtonBorderType        = ACTION
	DescriptLabel           = CONTROLBAR:ToolTipSilverRock		
	InPalantir			  = Yes
	AutoAbility			  = Yes
End

;----------------------------Modifiers----------------------

ModifierList PippinRockMaster
	Category = SPELL
	Modifier = RATE_OF_FIRE 20%			// Additive.  Sum of these are subtracted from all entries in Armor.ini
	Modifier = DAMAGE_MULT 115%		// Multiplicitive.  Damage multiplied by this, will compound in multiple bonuses
	Duration = 20000				// lasts for 20 seconds
End
CommandSet NewPippinCommandSet
   1 = Command_ToggleStance
   2 = Command_ToggleHobbitRockThrow
   3 = Command_SpecialAbilityDeadEye          ;3
   4 = Command_SpecialAbilityArrowStorm        ;5
   5 = Command_SpecialAbilityThornofVengeance   ;8
End

Armor PippinArmor
  Armor = DEFAULT         40%   
  Armor = SLASH           40%   
  Armor = PIERCE          45%   
  Armor = SPECIALIST      45%   
  Armor = CRUSH            1%   
  Armor = CAVALRY	  40% 
  Armor = SIEGE           45%   
  Armor = FLAME           45%   
  Armor = MAGIC           50%   
  Armor = HERO            45%   
  Armor = HERO_RANGED     45%   
  Armor = POISON	  40% 
  Armor = STRUCTURAL	 50%	
  
  ;FlankedPenalty 	 = 50%    
End
Object RohanPippin
CommandSet = NewPippinCommandSet
	ArmorSet
		Conditions      = None
		Armor           = PippinArmor
		DamageFX        = NormalDamageFX
	End
        ReplaceModule ModuleTag_ActiveBody
	Body = ActiveBody ModuleTag_ActiveBody_fE
		MaxHealth	= 3000
	End
        End
End

;--------------------LEVEL UP-----------------------------------------------------------------------------
ExperienceLevel	PippinLevel1
	AttributeModifiers		=	HobbitResistKnockback
	TargetNames						=	RohanPippin RohanPippen_Summoned
	RequiredExperience				=	1	
	ExperienceAward					=	HOBBIT_LVL1_EXP_AWARD 
	Rank							=	1
	SelectionDecal
		Texture						=	decal_hero_good	
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40
		MaxRadius					=	200
		MaxSelectedUnits			=	40
	End	
End	
ExperienceLevel	PippinLevel3
	TargetNames						=	RohanPippin
	RequiredExperience				=	HOBBIT_LVL3_EXP_NEEDED
	ExperienceAward					=	HOBBIT_LVL3_EXP_AWARD 	
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	Rank							=	3
	AttributeModifiers				=	HobbitLevelUpDamage2
        Upgrades                                        = Upgrade_AragornBladeMaster
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40
		MaxRadius					=	200
		MaxSelectedUnits			=	40
	End	
End	
ExperienceLevel	PippinLevel6
	TargetNames						=	RohanPippin
	RequiredExperience				=	HOBBIT_LVL6_EXP_NEEDED
	ExperienceAward					=	HOBBIT_LVL6_EXP_AWARD 	
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	Rank							=	6
	AttributeModifiers				=	HobbitLevelUpDamage5
        Upgrades                                        = Upgrade_LegolasArrowWind
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40
		MaxRadius					=	200
		MaxSelectedUnits			=	40
	End	
End	
ExperienceLevel	PippinLevel10
	TargetNames						=	RohanPippin
	RequiredExperience				=	HOBBIT_LVL10_EXP_NEEDED
	ExperienceAward					=	HOBBIT_LVL10_EXP_AWARD 	
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	Rank							=	10
	AttributeModifiers				=	HobbitLevelUpDamage9
        Upgrades                                        = Upgrade_ThranduilThornofVengeance
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40
		MaxRadius					=	200
		MaxSelectedUnits			=	40
	End	
End	
Object RohanPippin
	ShockwaveResistance = 100
	WeaponSet
		Conditions = None 
		Weapon = PRIMARY    HobbitSword
		Weapon = SECONDARY    Pippinrockhit  
		AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
		AutoChooseSources = SECONDARY NONE
	End
	WeaponSet
		Conditions = WEAPONSET_HERO_MODE
		Weapon = PRIMARY    DaleBeastSlayerArrow  
		AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
	WeaponSet
		Conditions = WEAPONSET_TOGGLE_1
		Weapon = PRIMARY    RohanGimliAxeThrown
		AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
      AddModule
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_AragornBladeMasterEnabler
		SpecialPowerTemplate = SpecialAbilityPippinDeadeye
		TriggeredBy = Upgrade_AragornBladeMaster
	End
      End
      AddModule
  	Behavior = SpecialPowerModule ModuleTag_AragornBladeMasterStarter                ; SpecialAbility is a SpecialPower, SpecialPower is anyting special
		SpecialPowerTemplate    = SpecialAbilityPippinDeadeye
		StartsPaused			= Yes
	End
      End
      AddModule
	Behavior = HeroModeSpecialAbilityUpdate ModuleTag_AragornBladeMasterUpdate   ; So the difference in SpecialAbility is that it takes timing from this Update, instead of simply firing.
		SpecialPowerTemplate    = SpecialAbilityPippinDeadeye
		HeroAttributeModifier	= PippinRockMaster
		HeroEffectDuration		= 30000 ; this should sync with the auto ability delay re-fire time in commandButtons.ini
		UnpackTime              = 1 ; insant unpack
		TriggerSound			= AragornBladeMaster
	End
      End
      AddModule
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_ArrowWindEnabler
		SpecialPowerTemplate = SpecialAbilityRockStorm
		TriggeredBy = Upgrade_LegolasArrowWind
	End
      End
      AddModule
	Behavior = SpecialPowerModule ModuleTag_ArrowWindStarter                      
		SpecialPowerTemplate		= SpecialAbilityRockStorm
		UpdateModuleStartsAttack	= Yes
		StartsPaused			= Yes
		;InitiateSound			= LegolasVoiceModeArrowWind		;this plays when he targets, not when he fires
	End
      End
      AddModule
	Behavior = ArrowStormUpdate ModuleTag_ArrowWindUpdate                
		SpecialPowerTemplate    = SpecialAbilityRockStorm
		StartAbilityRange       = 320.0
		
		UnpackTime              = 1000	; Pull out arrow
		PreparationTime         = 200	; Quick shot
		PersistentPrepTime      = 1600	; looping the quick shot
		PackTime                = 1200	; back to idle
		UnpackingVariation		= 1		; Use custom variation to not interfere with Archer Training ability.
		ParalyzeDurationWhenCompleted = 600	;Once the unit SUCCESSFULLY COMPLETES an ability, paralyze unit briefly to deal with animation transitions.
		ParalyzeDurationWhenAborted = 800	;If the unit ABORTS the ability, paralyze the unit briefly to deal with animation transitions.

		ApproachRequiresLOS     = Yes ; required so that it doesn't shoot through walls

		AwardXPForTriggering    = 0

		;Specific to ArrowStorm
		WeaponTemplate  = HobbitRockThrow
		TargetRadius    = 60	;CHANGING THIS??? Change RadiusCursorRadius to match this value in the appropriate SpecialPower.ini template.
		ShotsPerTarget  = 1
		ShotsPerBurst   = 5
		MaxShots        = 30  ; can end sooner if no targets
  		CanShootEmptyGround = Yes ; ...unless this is set
	End
      End
      AddModule
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_ThornArrowEnabler
		SpecialPowerTemplate		= SpecialAbilityThornRock
		TriggeredBy					= Upgrade_ThranduilThornofVengeance
	End
      End
      AddModule
	Behavior = SpecialPowerModule ModuleTag_ThornArrow
		SpecialPowerTemplate		= SpecialAbilityThornRock
		UpdateModuleStartsAttack	= Yes
		StartsPaused				= Yes
	End
      End
      AddModule
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_ThornArrowUpdate
		SpecialPowerTemplate		= SpecialAbilityThornRock
		SkipContinue				= Yes
		UnpackTime					= 1600
		PreparationTime				= 2
		PackTime					= 850
		AwardXPForTriggering		= 0
		StartAbilityRange			= 325.0									; Note: This has to be smaller than the weapon range or it'll never succeed
		ApproachRequiresLOS			= Yes		
		SpecialWeapon				= ThranduilThornofVengeance
		WhichSpecialWeapon			= 1
		RejectedConditions			= WEAPON_TOGGLE
	End
      End
      AddModule
	Behavior = AutoAbilityBehavior ModuleTag_ThornArrowAutoAbility
		SpecialAbility				= SpecialAbilityThornRock
		MaxScanRange				= 300
		Query						= 1 ANY ENEMIES +HERO +MONSTER
		Query						= 1 ALL ENEMIES
	End
      End
End
ChildObject ThranSpecialArrow HobbitRockProjectile
End

Object RohanPippin
	ShockwaveResistance = 100

ReplaceModule ModuleTag_01
Draw = W3DScriptedModelDraw ModuleTag_01_new
	  
	  OkToChangeModelColor = Yes
	  
	   StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD

		DefaultModelConditionState
			Model               = RUPippin_SKN
			Skeleton            = RUFrodo_SKL
			WeaponLaunchBone    = PRIMARY B_HANDR		;sometimes it's in primary sometimes in secondary.
			WeaponLaunchBone    = SECONDARY B_HANDR
			ParticleSysBone		= NONE Predator FollowBone:Yes Persist:HOLD PersistID:100
			ParticleSysBone = None MerryBodyGlow FollowBone:Yes
		End
		
		ModelConditionState		= PASSENGER_VARIATION_1
			Model               = RUPippin_SKN
			Skeleton			= RUFrodo_SKL
			WeaponLaunchBone	= PRIMARY B_HANDR
			WeaponLaunchBone	= SECONDARY B_HANDR
			ParticleSysBone		= NONE Predator FollowBone:Yes Persist:HOLD PersistID:100
		End
		
		ModelConditionState		= PASSENGER_VARIATION_2
			Model               = RUPippin_SKN
			Skeleton		= RUFrodo_SKL
			WeaponLaunchBone	= PRIMARY B_HANDL
			WeaponLaunchBone	= SECONDARY B_HANDL
			ParticleSysBone		= NONE Predator FollowBone:Yes Persist:HOLD PersistID:100
		End

		ModelConditionState		= INVISIBLE_STEALTH
			ParticleSysBone		= NONE Predator FollowBone:Yes Persist:SPAWN PersistID:100
		End
;----------------------------riding TreeBerd----------------------------------------------------
		
		AnimationState = PASSENGER_VARIATION_1 FIRING_OR_PREATTACK_A
			Animation = Rar
				AnimationName = Rufro_TB_thra
				AnimationMode = ONCE
			End
			FrameForPristineBonePositions = 18
		End
		
		AnimationState =PASSENGER PASSENGER_VARIATION_1
			Animation = idleTreeBerd
				AnimationName = Rufro_TB_idla
				AnimationMode = LOOP
			End
		End

		
		AnimationState = PASSENGER_VARIATION_2 FIRING_OR_PREATTACK_A
			Animation = Rar2
				AnimationName = Rufro_tb_thrb
				AnimationMode = ONCE
			End
			FrameForPristineBonePositions = 18
		End
		
		AnimationState = PASSENGER_VARIATION_2
			Animation = idleTreeBerd2
				AnimationName = Rufro_tb_idlb
				AnimationMode = LOOP
			End
		End
;---------------------------------------------------------------------------------------------			
		
		
;------------------------------mounted with a hero----------------------------------------
		AnimationState        =  PASSENGER FIRING_OR_PREATTACK_A
			Animation           = THRA
				AnimationName     = RUFrodo_THRA
				AnimationMode     = ONCE
				UseWeaponTiming		= Yes
				AnimationBlendTime = 0
			End
			StateName           = NoSword
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Sword" then CurDrawableSetTransitionAnimState("TRANS_SheatheSword") end
			EndScript
		End
		
		AnimationState = PASSENGER MOVING ACCELERATE
			Animation = RUFro_HH_RUNA
				AnimationName = RUFro_HH_ACCL
				AnimationMode =LOOP
				AnimationBlendTime = 0
			End
			StateName           = Mounted
		End
		
  		AnimationState = PASSENGER MOVING DECELERATE
  			Animation = RUFro_HH_RUNA
  				AnimationName = RUFro_HH_DECL
  				AnimationMode =LOOP
  				AnimationBlendTime = 0
  			End
  			StateName           = Mounted
  		End
   		
  		AnimationState = PASSENGER MOVING TURN_LEFT 
  			Animation = RUFro_HH_RUNA
  				AnimationName = RUFro_HH_TNL2
  				AnimationMode =LOOP
  				AnimationBlendTime = 0
  			End
  			StateName           = Mounted
  		End
  		
  		AnimationState = PASSENGER MOVING TURN_RIGHT 
  			Animation = RUFro_HH_RUNA
  				AnimationName = RUFro_HH_TNL1
  				AnimationMode =LOOP
  				AnimationBlendTime = 0
  			End
  			StateName           = Mounted
  		End
  		
  		AnimationState = PASSENGER TURN_LEFT_HIGH_SPEED
  			Animation = RUFro_HH_RUNA
  				AnimationName = RUFro_HH_TRNL
  				AnimationMode =LOOP
  				AnimationBlendTime = 0
  			End
  			StateName           = Mounted
  		End
  		
  		AnimationState = PASSENGER TURN_RIGHT_HIGH_SPEED
  			Animation = RUFro_HH_RUNA
  				AnimationName = RUFro_HH_TRNR
  				AnimationMode =LOOP
  				AnimationBlendTime = 0
  			End
  			StateName           = Mounted
  		End
  		
		
		AnimationState = PASSENGER MOVING
			Animation = RUFro_HH_RUNA
				AnimationName = RUFro_HH_RUNA
				AnimationMode =LOOP
				AnimationBlendTime = 0
			End
			StateName           = Mounted
		End
		
		AnimationState = PASSENGER SELECTED
			Animation = RUFro_HH_RUNA
				AnimationName = RUFro_HH_IDLA
				AnimationMode =LOOP
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Mounted" then CurDrawableSetTransitionAnimState("TRANS_MountedSelect") end
			EndScript
		End
		
		
		TransitionState				=	TRANS_MountedSelect
			Animation				=	ATNA
				AnimationName		=	RUFro_HH_ATNA
				AnimationMode		=	ONCE
			End
		End
		
		
		
		
		AnimationState = PASSENGER
			Animation = IDLE1
				AnimationName = RUFro_HH_IDLA
				AnimationMode =ONCE
			;	AnimationBlendTime = 0
			End
			Animation = IDLE2
				AnimationName = RUFro_HH_IDLB
				AnimationMode = ONCE
			;	AnimationBlendTime = 0
			End
	;		Animation = IDLE3  once
	;			AnimationName = RUFro_HH_IDLC
	;			AnimationMode =LOOP
	;			AnimationBlendTime = 0
	;		End
			Animation = IDLE4
				AnimationName = RUFro_HH_IDLH
				AnimationMode = ONCE
			;	AnimationBlendTime = 0
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
			StateName           = Mounted
		End
;;--------------- DYING & FLYING --------------------------------------------------
;;======= DYING

		AnimationState					= STUNNED_FLAILING WEAPONSET_TOGGLE_1
			StateName					= STATE_Bored_Rocks
			Animation					= FLYA
				AnimationName			= RUMerry_FLYA
				AnimationMode			= LOOP
				AnimationBlendTime		= 0
				AnimationSpeedFactorRange	= 0.4 0.6
			End
			Flags						= RANDOMSTART
		End
		AnimationState					= STUNNED_FLAILING
			StateName					= STATE_Bored_Rocks
			Animation					= FLYA
				AnimationName			= RUMerry_FLYA
				AnimationMode			= LOOP
				AnimationBlendTime		= 0
				AnimationSpeedFactorRange	= 0.4 0.6
			End
			Flags						= RANDOMSTART
		End

		AnimationState					= DYING SPLATTED WEAPONSET_TOGGLE_1
			StateName					= STATE_Bored_Rocks
			Animation					= LNDA
				AnimationName			= RUMerry_LNDA						;&&FRODO ANIM&&
				AnimationMode			= ONCE
			End
		End
		AnimationState					= DYING SPLATTED
			StateName					= STATE_Bored_Rocks				;;<-- be careful
			Animation					= &&SPLAT WITH SWORD&&
				AnimationName			= RUMerry_LNDA
				AnimationMode			= ONCE
			End
		End
		AnimationState					= DYING WEAPONSET_TOGGLE_1
			StateName					= STATE_Bored_Rocks
			Animation					= DIEA
				AnimationName			= RUMerry_DIEA
				AnimationMode			= ONCE
			End
		End

		AnimationState						= DYING DEATH_2
			Animation
				AnimationName				= RUMerry_IDLA
				AnimationMode				= LOOP
			End
		End

		AnimationState					= DYING EMOTION_ALERT
			Animation					= DIEB
				AnimationName			= RUMerry_DIEB
				AnimationMode			= ONCE
			End
		End

		AnimationState					= DYING
			Animation					= DIEA
				AnimationName			= RUMerry_DIEA
				AnimationMode			= ONCE
			End
		End

		AnimationState						= PARALYZED
			Animation
				AnimationName				= RUMerry_IDLA
				AnimationMode				= LOOP
			End
		End

;;======= STUNNED

		AnimationState					= STUNNED_STANDING_UP WEAPONSET_TOGGLE_1
			StateName					= STATE_Ready_Rocks
			Animation					= GTPA
				AnimationName			= RUMerry_GTPA
				AnimationMode			= ONCE
				AnimationSpeedFactorRange = 1.5 1.5
			End
		End
		AnimationState					= STUNNED_STANDING_UP
			StateName					= STATE_Ready_Rocks
			Animation					= &&GET UP WITH SWORD&&
				AnimationName			= RUMerry_GTPA
				AnimationMode			= ONCE
				AnimationSpeedFactorRange = 1.5 1.5
			End
		End		
		
		AnimationState					= STUNNED WEAPONSET_TOGGLE_1
			StateName					= STATE_Bored_Rocks
			Animation					= LNDA
				AnimationName			= RUMerry_LNDA
				AnimationMode			= ONCE
			End
		End
		AnimationState					= STUNNED
			StateName					= STATE_Bored_Rocks
			Animation					= LNDA
				AnimationName			= RUMerry_LNDA
				AnimationMode			= ONCE
			End
		End
		
		

;;---------------- ATTAFIRING_OR_RELOADING_ACKING -----------------------------------------------------------------

		AnimationState					= BETWEEN_FIRING_SHOTS_A WEAPONSET_TOGGLE_1
			StateName					= STATE_Ready_Rocks
			Animation					= IDLA
				AnimationName			= RUMerry_IDLA
				AnimationMode			= LOOP
				AnimationBlendTime		= 20
			End
			BeginScript
				CurDrawableAllowToContinue()
			EndScript
		End
		
		
		AnimationState        = MOVING FIRING_OR_PREATTACK_A
			ShareAnimation		= Yes
			Animation           = RunAndFire
				AnimationName       = RUMerry_ATRA
				AnimationMode       = LOOP
			End
			Flags               = RANDOMSTART 
		End
		
		AnimationState					= BETWEEN_FIRING_SHOTS_A
			StateName					= STATE_Ready_Sword
			Animation					= IDLB
				AnimationName			= RUMerry_IDLB
				AnimationMode			= LOOP
				AnimationBlendTime		= 10
			End
			BeginScript
				CurDrawableAllowToContinue()
			EndScript
		End
		
		AnimationState					= FIRING_OR_PREATTACK_A WEAPONSET_TOGGLE_1
			StateName					= STATE_Ready_Rocks
			Animation					= THRA
				AnimationName			= RUMerry_THRA
				AnimationMode			= ONCE
				UseWeaponTiming			= Yes
			End
			FrameForPristineBonePositions = 21
			Flags						= RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Bored_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
				if Prev == "STATE_Ready_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
				if Prev == "STATE_Attention_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
				if Prev == "STATE_Running_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
			EndScript
		End
		AnimationState        = PREPARING PACKING_TYPE_1
			Animation           = Bow ;ATKA2
				AnimationName     = RUMerry_THRA
				AnimationMode     = LOOP
				AnimationSpeedFactorRange = 1.328 1.328
			End
			StateName           = STATE_Bow
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwitchToBow") end
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End
		AnimationState					= FIRING_OR_PREATTACK_A WEAPONSET_HERO_MODE
			StateName					= STATE_Ready_Rocks
			Animation					= THRA
				AnimationName			= RUMerry_THRA
				AnimationMode			= ONCE
				UseWeaponTiming			= Yes
			End
			FrameForPristineBonePositions = 21
			Flags						= RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Bored_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
				if Prev == "STATE_Ready_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
				if Prev == "STATE_Attention_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
				if Prev == "STATE_Running_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
			EndScript
		End
		AnimationState					= FIRING_OR_PREATTACK_A 
			StateName					= STATE_Ready_Sword
			Animation					= ATKA
				AnimationName			= RUMerry_ATKA
				AnimationMode			= ONCE
				UseWeaponTiming			= Yes
				AnimationBlendTime		= 10
			End
			Animation					= ATKB
				AnimationName			= RUMerry_ATKB
				AnimationMode			= ONCE
				UseWeaponTiming			= Yes
				AnimationBlendTime		= 10
			End
			Animation					= ATKB
				AnimationName			= RUMerry_ATKB
				AnimationMode			= ONCE
				UseWeaponTiming			= Yes
				AnimationBlendTime		= 10
			End
			Flags						= RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Bored_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Ready_RocksToSword") end
				if Prev == "STATE_Ready_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Ready_RocksToSword") end
				if Prev == "STATE_Attention_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Ready_RocksToSword") end
				if Prev == "STATE_Running_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Ready_RocksToSword") end
			EndScript
		End

;;--------------------- MOVING ---------------------------------------------------------------------
;;======= MOVING



		

		AnimationState					= MOVING WEAPONSET_TOGGLE_1
			StateName					= STATE_Running_Rocks
			Animation					= RUNA
				AnimationName			= RUMerry_RUNC
				AnimationMode			= LOOP
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Bored_Sword" then CurDrawableSetTransitionAnimState("TRANS_Running_SwordToRocks") end
				if Prev == "STATE_Ready_Sword" then CurDrawableSetTransitionAnimState("TRANS_Running_SwordToRocks") end
				if Prev == "STATE_Attention_Sword" then CurDrawableSetTransitionAnimState("TRANS_Running_SwordToRocks") end
				if Prev == "STATE_Running_Sword" then CurDrawableSetTransitionAnimState("TRANS_Running_SwordToRocks") end
			EndScript
		End
		AnimationState					= MOVING EMOTION_ALERT
			StateName					= STATE_Running_Sword
			Animation					= RUNA
				AnimationName			= RUMerry_RUNA
				AnimationMode			= LOOP
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Bored_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Running_RocksToSword") end
				if Prev == "STATE_Ready_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Running_RocksToSword") end
				if Prev == "STATE_Attention_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Running_RocksToSword") end
				if Prev == "STATE_Running_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Running_RocksToSword") end
			EndScript
		End
		AnimationState					= MOVING
			StateName					= STATE_Running_Rocks
			Animation					= RUNA
				AnimationName			= RUMerry_RUNC
				AnimationMode			= LOOP
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Bored_Sword" then CurDrawableSetTransitionAnimState("TRANS_Running_SwordToRocks") end
				if Prev == "STATE_Ready_Sword" then CurDrawableSetTransitionAnimState("TRANS_Running_SwordToRocks") end
				if Prev == "STATE_Attention_Sword" then CurDrawableSetTransitionAnimState("TRANS_Running_SwordToRocks") end
				if Prev == "STATE_Running_Sword" then CurDrawableSetTransitionAnimState("TRANS_Running_SwordToRocks") end
			EndScript
		End

;;---------------------- HIT REACTIONS ----------------------------------------------------------

;		AnimationState					= HIT_REACTION WEAPONSET_TOGGLE_1
;			Animation           
;				AnimationName			= RUMerry_HITA
;				AnimationMode			= ONCE
;			End
;		End

;;---------------------- EMOTIONS ---------------------------------------------------------------

		AnimationState					= EMOTION_CELEBRATING
			Animation
				AnimationName			= RUMerry_CHRA
				AnimationMode			= ONCE
			End
			Animation
				AnimationName			= RUMerry_CHRB
				AnimationMode			= ONCE
			End
			Flags						= RESTART_ANIM_WHEN_COMPLETE
		End
		
		AnimationState					= EMOTION_TAUNTING
			Animation
				AnimationName			= RUMerry_TNTB
				AnimationMode			= LOOP
			End
		End

		AnimationState					= EMOTION_ALERT WEAPONSET_TOGGLE_1
			StateName					= STATE_Ready_Rocks
			Animation					= IDLA
				AnimationName			= RUMerry_IDLA
				AnimationMode			= LOOP
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Bored_Sword" then CurDrawableSetTransitionAnimState("TRANS_Bored_SwordToRocks") end
				if Prev == "STATE_Ready_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
				if Prev == "STATE_Attention_Sword" then CurDrawableSetTransitionAnimState("TRANS_Attention_SwordToRocks") end
				if Prev == "STATE_Running_Sword" then CurDrawableSetTransitionAnimState("TRANS_Bored_SwordToRocks") end
			EndScript
		End
		AnimationState					= EMOTION_ALERT
			StateName					= STATE_Ready_Sword
			Animation
				AnimationName			= RUMerry_IDLB
				AnimationMode			= LOOP
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Bored_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Ready_RocksToSword") end
				if Prev == "STATE_Ready_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Ready_RocksToSword") end
				if Prev == "STATE_Attention_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Ready_RocksToSword") end
				if Prev == "STATE_Running_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Ready_RocksToSword") end
			EndScript
		End
		
		AnimationState					= RAISING_FLAG
			Animation
				AnimationName			= RUMerry_CHRA
				AnimationMode			= ONCE
			End
			Animation
				AnimationName			= RUMerry_CHRB
				AnimationMode			= ONCE
			End
			Flags						= RESTART_ANIM_WHEN_COMPLETE
		End
		

;;------------------ SELECTED STATE -------------------------------------------------------------

		AnimationState					= SELECTED
			StateName					= STATE_Attention_Rocks
			Animation					= IDLA
				AnimationName			= RUMerry_ATNB
				AnimationMode			= LOOP
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Bored_Sword" then CurDrawableSetTransitionAnimState("TRANS_Attention_SwordToRocks") end
				if Prev == "STATE_Ready_Sword" then CurDrawableSetTransitionAnimState("TRANS_Attention_SwordToRocks") end
				if Prev == "STATE_Attention_Sword" then CurDrawableSetTransitionAnimState("TRANS_Attention_SwordToRocks") end
				if Prev == "STATE_Running_Sword" then CurDrawableSetTransitionAnimState("TRANS_Attention_SwordToRocks") end
				if Prev == "STATE_Bored_Rocks" then CurDrawableSetTransitionAnimState("TRANS_BoredToAttention_Rocks") end
			EndScript
		End

;;------------------ IDLE STATES ----------------------------------------------------------------

		IdleAnimationState
			StateName					= STATE_Bored_Rocks
			Animation					= IDLA
				AnimationName			= RUMerry_IDLA
				AnimationMode			= ONCE
				AnimationPriority		= 100
			End
			Animation					= IDLW
				AnimationName			= RUMerry_IDLW
				AnimationMode			= ONCE
				AnimationPriority		= 10
			End
			Animation					= IDLY
				AnimationName			= RUMerry_IDLY
				AnimationMode			= ONCE
				AnimationPriority		= 10
			End
			Animation					= IDLZ
				AnimationName			= RUMerry_IDLZ
				AnimationMode			= ONCE
				AnimationPriority		= 10
			End
			Animation					= IDLC
				AnimationName			= RUMerry_IDLC
				AnimationMode			= ONCE
				AnimationPriority		= 5
			End
			Animation					= IDLS
				AnimationName			= RUMerry_IDLS
				AnimationMode			= ONCE
				AnimationPriority		= 5
			End
			Animation					= IDLV
				AnimationName			= RUMerry_IDLV
				AnimationMode			= ONCE
				AnimationPriority		= 5
			End
			Animation					= IDLX
				AnimationName			= RUMerry_IDLX
				AnimationMode			= ONCE
				AnimationPriority		= 1
			End
			Animation					= IDLU
				AnimationName			= RUMerry_IDLU
				AnimationMode			= ONCE
				AnimationPriority		= 1
			End
			Animation					= IDLD
				AnimationName			= RUMerry_IDLD
				AnimationMode			= ONCE
				AnimationPriority		= 1
			End
			Flags						= RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Bored_Sword" then CurDrawableSetTransitionAnimState("TRANS_Bored_SwordToRocks") end
				if Prev == "STATE_Ready_Sword" then CurDrawableSetTransitionAnimState("TRANS_Bored_SwordToRocks") end
				if Prev == "STATE_Attention_Sword" then CurDrawableSetTransitionAnimState("TRANS_Bored_SwordToRocks") end
				if Prev == "STATE_Running_Sword" then CurDrawableSetTransitionAnimState("TRANS_Bored_SwordToRocks") end
				if Prev == "STATE_Attention_Rocks" then CurDrawableSetTransitionAnimState("TRANS_AttentionToBored_Rocks") end
			EndScript
		End

;;------------------ TRANSITIONS ----------------------------------------------------------------
;;===== HORSE
		TransitionState					= TRANS_unMount
			Animation					= unmount
				AnimationName			= RUFro_HH_IDLB
				AnimationMode			= ONCE
				AnimationBlendTime		= 0
			End
		End

;;====== GETTING SWORD
		TransitionState					= TRANS_Bored_RocksToSword
			Animation					= STHA
				AnimationName			= RUMerry_STHA
				AnimationMode			= ONCE
			End
		End
		TransitionState					= TRANS_Ready_RocksToSword
			Animation					= STHA
				AnimationName			= RUMerry_STHA
				AnimationMode			= ONCE
			End
		End
		TransitionState					= TRANS_Attention_RocksToSword
			Animation					= STHA
				AnimationName			= RUMerry_STHA
				AnimationMode			= ONCE
			End
		End
		TransitionState					= TRANS_Running_RocksToSword
			Animation					= STHA
				AnimationName			= RUMerry_STHD
				AnimationMode			= ONCE
			End
		End

;;===== GETTING ROCKS
		TransitionState					= TRANS_Bored_SwordToRocks
			Animation					= STHA
				AnimationName			= RUMerry_STHB
				AnimationMode			= ONCE
			End
		End
		TransitionState					= TRANS_Ready_SwordToRocks
			Animation					= STHA
				AnimationName			= RUMerry_STHB
				AnimationMode			= ONCE
			End
		End
		TransitionState					= TRANS_Attention_SwordToRocks
			Animation					= STHA
				AnimationName			= RUMerry_STHB
				AnimationMode			= ONCE
			End
		End
		TransitionState					= TRANS_Running_SwordToRocks
			Animation					= STHA
				AnimationName			= RUMerry_STHC
				AnimationMode			= ONCE
			End
		End
		TransitionState					= TRANS_BoredToAttention_Rocks
			Animation					= ATNA
				AnimationName			= RUMerry_ATNA
				AnimationMode			= ONCE
			End
		End
		TransitionState					= TRANS_AttentionToBored_Rocks
			Animation					= ATNC
				AnimationName			= RUMerry_ATNC
				AnimationMode			= ONCE
			End
		End
		End
End
End
;<<<<<<<<<<<<<<<<<SAM>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
;Made by Aragon94 and Codstermandude

FXParticleSystem SamResistEffect
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXBarbStreaks.tga
    Lifetime = 15 15
    SortLevel = 1
    Size = 20 25
    BurstCount = 1 2
    IsGroundAligned = Yes
  End
  Color = DefaultColor
    Color2 = R:37 G:31 B:1 15
    Color3 = R:0 G:0 B:0 10
  End
  Alpha = DefaultAlpha
    Alpha1 = 1 1 20
  End
  Update = DefaultUpdate
    SizeRate = 3 5
    SizeRateDamping = 1 1
    AngleZ = -6 6
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0 8.07921e+33
    ParticlesAttachToBone = Yes
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = PointEmissionVolume
  End
  Draw = DefaultDraw
  End
End
;--------------------------------------------------------------SPECIAL POWER-------------------------------------------

SpecialPower SpecialAbilitySamResist
	Enum					   = SPECIAL_HERO_MODE
	ReloadTime				   = 75000	;60000
End

SpecialPower SpecialAbilitySamHeroicStrike
	Enum									  =	SPECIAL_AT_VISIBLE_OBJECT
	ReloadTime								  =	90000
	PublicTimer								  =	No
	//InitiateAtLocationSound           = LurtzVoiceAttackCripplingStrike
	ObjectFilter							  = NONE
End

SpecialPower SpecialAbilitySamDemoralizingShout
  Enum                = SPECIAL_GENERAL_TARGETLESS
  ReloadTime          = 1 ; in millisecondst
  PublicTimer         =	No
End

SpecialPower SpecialAbilitySamBladeMaster
	Enum					   = SPECIAL_HERO_MODE
	ReloadTime				   = 80000	;60000
End

SpecialPower SpecialAbilityEarthquakeSam
	Enum						   = SPECIAL_WORD_OF_POWER
	ReloadTime					   = 90000
End

SpecialPower SpecialAbilitySamAdrenalineRush
	Enum									  =	SPECIAL_GENERAL_TARGETLESS
	ReloadTime								  =	120000 //  in	milliseconds
	PublicTimer								  =	No
End

;-----------------------------------------------------------------COMMANDBUTTON--------------------------------------------

CommandButton Command_CreateAHero_Invulnerability_Level3
  Command                 = SPECIAL_POWER 
  SpecialPower            = SpecialAbilitySamResist
  TextLabel               = CONTROLBAR:Resist
  ButtonImage             = HSAragornBladeMaster
  ButtonBorderType        = ACTION 
  DescriptLabel           = CONTROLBAR:ToolTipResist
  InPalantir			  = Yes
  AutoAbility			  = Yes
  AutoDelay				  = 20.0 ; this should sync with the Aragorn's hero mode effect time
  PresetRange			  = 50.0
  UnitSpecificSound       = AragornVoiceBladeMaster
End


CommandButton Command_MouthOfSauronDoubt
  Command               = SPECIAL_POWER
  SpecialPower          = SpecialAbilitySamDemoralizingShout
  Options				= NONPRESSABLE
  TextLabel             = CONTROLBAR:DemoralisingShout
  ButtonImage           = HSMouthSauronDoubt
  CursorName			= Bombard
  RadiusCursorType		= DoubtRadiusCursor
  InvalidCursorName		= GenericInvalid
  ButtonBorderType      = ACTION 
  DescriptLabel         = CONTROLBAR:ToolTipDemoralisingShout
  InPalantir            = Yes
  AutoAbility			= No
  ;UnitSpecificSound     = 
End
CommandButton Command_CreateAHero_EarthShaker_Level1
  Command                 = SPECIAL_POWER 
  SpecialPower            = SpecialAbilityEarthquakeSam
  TextLabel               = CONTROLBAR:Stomp
  ButtonImage             = HSEarthShaker
  ButtonBorderType        = ACTION 
  DescriptLabel           = CONTROLBAR:ToolTipStomp
  InPalantir			  = Yes
  AutoAbility			  = No
End

CommandButton Command_CreateAHero_HotW_CrippleStrikeMelee_Level2
  Command                 = SPECIAL_POWER 
  SpecialPower            = SpecialAbilitySamHeroicStrike
  Options                 = NEED_TARGET_ENEMY_OBJECT // CONTEXTMODE_COMMAND
  TextLabel               = CONTROLBAR:HeroicStrike
  CursorName              = Bombard
  InvalidCursorName       = GenericInvalid 
  ButtonImage             = HSCrippleStrikeMelee
  ButtonBorderType        = ACTION 
  DescriptLabel           = CONTROLBAR:ToolTipHeroicStrike
  InPalantir			  = Yes
End

CommandButton Command_CreateAHero_Toughness
	Command					= SPECIAL_POWER
	SpecialPower			= SpecialAbilitySamAdrenalineRush
	Options					= NONPRESSABLE
	TextLabel				= CONTROLBAR:AdrenalineRush
	DescriptLabel			= CONTROLBAR:ToolTipAdrenalineRush
	ButtonImage				= HSKingDainStubbornPride
	ButtonBorderType		= ACTION
	InPalantir				= Yes
End

;--------------------------------------------------------WEAPONS------------------------------------------------------------------------
Weapon SamHeroicStrikeWeapon       // BALANCE Archer Weapon //orc archer
	LeechRangeWeapon		  =	Yes
	AttackRange				  =	15.0
	MeleeWeapon				  =	Yes
	//FireFX					  =	FX_LurtzCripplingStrike	//FX_GondorSwordHit
	DelayBetweenShots		  =	GLOIN_DELAYBETWEENSHOTS	// time between shots, msec
	PreAttackDelay			  =	GLOIN_PREATTACKDELAY	// 433 is natural time of the stabbing animation.
	PreAttackType			  =	PER_SHOT				// Do the delay	each time we attack	a new target
	FiringDuration			  =	GLOIN_FIRINGDURATION	// min 600 for anim

	// Hero damage.
	DamageNugget										// A basic Nugget that just does damage
		Damage			= 1500
		Radius			= 0.0
		DelayTime		= 0
		DamageType		= HERO
		DamageFXType	= MAGIC
		DeathType		= NORMAL
	End
End

Weapon SamSmashWeapon ; Big Brown Ring Blast
	IdleAfterFiringDelay = 0
	RadiusDamageAffects = ENEMIES NOT_SIMILAR
	DelayBetweenShots = 5000               ; time between shots, msec
	PreAttackDelay        = 2600
	PreAttackType         = PER_ATTACK ; Do the delay each time we attack a new target
	PreAttackFX           = FX_GloinShatterPre
	FireFX                = FX_GloinShatterhammer
	FiringDuration      = 1400
	DamageNugget                        ; A basic Nugget that just does damage
		Damage			= 300
		Radius			= 150
		DamageType		= MAGIC
		DamageFXType	= MAGIC
		DeathType		= EXPLODED
		DamageSpeed		= 700.0 ; must match the ShockWaveSpeed below
	End
	MetaImpactNugget                    ; A Nugget that throws things back with force
;		HeroResist			= .75
		ShockWaveAmount   = 30.0
		ShockWaveRadius   = 225.0
		ShockWaveTaperOff = 1.0
		ShockWaveZMult    = 1.000
		ShockWaveSpeed	  = 700.0 
	End
End

;-------------------------------------------------ARMOR-------------------------------------------------------------------------------

Armor SamArmor
  Armor = DEFAULT         35%   
  Armor = SLASH           35%   
  Armor = PIERCE          35%   
  Armor = SPECIALIST      35%   
  Armor = CRUSH            1%   
  Armor = CAVALRY	  40% 
  Armor = SIEGE           35%   
  Armor = FLAME           40%   
  Armor = MAGIC           35%   
  Armor = HERO            30%   
  Armor = HERO_RANGED     30%   
  Armor = POISON	  1% 
  Armor = STRUCTURAL	 20%	
  
  ;FlankedPenalty 	 = 50%    
End

;----------------------------------------------ATRIBUTE MODIFIERS----------------------------------------------------------------------

ModifierList SamResistModifier
	Category = SPELL
	Modifier = ARMOR 250%			// Additive.  Sum of these are subtracted from all entries in Armor.ini
	Duration = 30000				// lasts for 30 seconds
End

ModifierList SamDemoralizeModifier
	Category					= DEBUFF
	Modifier					= DAMAGE_MULT 5%
	Modifier					= ARMOR -10%
	Duration					= 30000
	FX							= FX_GenericDebuff30
	ReplaceInCategoryIfLongest	= Yes
End

ModifierList SamAdrenalineRushBonus
	Modifier = ARMOR 300%
End
ModifierList CreateAHeroToughnessBonus
	Modifier = HEALTH_MULT 110%
End
;-----------------------------------------------------LEVEL UPS----------------------------------------------------------------------

ExperienceLevel	SamLevel1
	AttributeModifiers		=	HobbitResistKnockback
	TargetNames						=	RohanSam RohanSam_Summoned
	RequiredExperience				=	1	
	ExperienceAward					=	HOBBIT_LVL1_EXP_AWARD 
	Rank							=	1
        Upgrades                                                = Upgrade_AragornBladeMaster
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40
		MaxRadius					=	200
		MaxSelectedUnits			=	40
	End	
End
ExperienceLevel	SamLevel3
	TargetNames						=	RohanSam
	RequiredExperience				=	HOBBIT_LVL3_EXP_NEEDED 	
	ExperienceAward					=	HOBBIT_LVL3_EXP_AWARD 	
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	Rank							=	3
	AttributeModifiers				=	HobbitLevelUpDamage2
	Upgrades						=	Upgrade_MouthOfSauronDoubt
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40
		MaxRadius					=	200
		MaxSelectedUnits			=	40
	End	
End	
ExperienceLevel	SamLevel5
	TargetNames						=	RohanSam
	RequiredExperience				=	HOBBIT_LVL5_EXP_NEEDED 	
	ExperienceAward					=	HOBBIT_LVL5_EXP_AWARD 	
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	Rank							=	5
	AttributeModifiers				=	HobbitLevelUpDamage4
	Upgrades						=	Upgrade_EnableGloinSmash
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40
		MaxRadius					=	200
		MaxSelectedUnits			=	40
	End	
End	
ExperienceLevel	SamLevel8
	TargetNames						=	RohanSam
	RequiredExperience				=	HOBBIT_LVL8_EXP_NEEDED 	
	ExperienceAward					=	HOBBIT_LVL8_EXP_AWARD 	
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	Rank							=	8
	AttributeModifiers				=	HobbitLevelUpDamage7
        Upgrades                                                = Upgrade_CreateAHeroCrippleStrikeMelee_Level2
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40
		MaxRadius					=	200
		MaxSelectedUnits			=	40
	End	
End		
ExperienceLevel	SamLevel10
	TargetNames						=	RohanSam
	RequiredExperience				=	HOBBIT_LVL10_EXP_NEEDED 	
	ExperienceAward					=	HOBBIT_LVL10_EXP_AWARD 	
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	Rank							=	10
	AttributeModifiers				=	HobbitLevelUpDamage9
        Upgrades                                                = Upgrade_CreateAHeroToughness
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40
		MaxRadius					=	200
		MaxSelectedUnits			=	40
	End	
End	

;-----------------------------------------------------COMMANDSET----------------------------------------------------------------------

CommandSet NewSamCommandSet
   1 = Command_ToggleStance
   2 = Command_CreateAHero_Invulnerability_Level3
   3 = Command_MouthOfSauronDoubt          ;3
   4 = Command_CreateAHero_EarthShaker_Level1        ;5
   5 = Command_CreateAHero_HotW_CrippleStrikeMelee_Level2   ;8
   6 = Command_CreateAHero_Toughness
End

;------------------------------------------------------PARAMETERS----------------------------------------------------------------------

Object RohanSam

CommandSet = NewSamCommandSet

	ArmorSet
		Conditions      = None
		Armor           = SamArmor
		DamageFX        = NormalDamageFX
	End
        ReplaceModule ModuleTag_ActiveBody
	Body = ActiveBody ModuleTag_ActiveBody_sam
		MaxHealth	= 4000
	End
        End
End

;------------------------------------------------------------MODULES AND STUFF---------------------------------------------------------------------

Object RohanSam

	ShockwaveResistance = 100

;---resist---
      AddModule
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_AragornBladeMasterEnabler
		SpecialPowerTemplate = SpecialAbilitySamResist
		TriggeredBy = Upgrade_AragornBladeMaster
	End
      End
      AddModule
  	Behavior = SpecialPowerModule ModuleTag_AragornBladeMasterStarter                ; SpecialAbility is a SpecialPower, SpecialPower is anyting special
		SpecialPowerTemplate    = SpecialAbilitySamResist
		StartsPaused			= Yes
	End
      End
      AddModule
	Behavior = HeroModeSpecialAbilityUpdate ModuleTag_AragornBladeMasterUpdate   ; So the difference in SpecialAbility is that it takes timing from this Update, instead of simply firing.
		SpecialPowerTemplate    = SpecialAbilitySamResist
		HeroAttributeModifier	= SamResistModifier
		HeroEffectDuration		= 20000 ; this should sync with the auto ability delay re-fire time in commandButtons.ini
		UnpackTime              = 1 ; insant unpack
		TriggerSound			= AragornBladeMaster
	End
      End

;---blade master---
      AddModule
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_DeadeyeEnabler
		SpecialPowerTemplate = SpecialAbilitySamBladeMaster
		TriggeredBy = Upgrade_ThranduilDeadeye
	End
      End
      AddModule
  	Behavior = SpecialPowerModule ModuleTag_DeadeyeStarter					; SpecialAbility is a SpecialPower, SpecialPower is anyting special
		SpecialPowerTemplate    = SpecialAbilitySamBladeMaster
		StartsPaused			= Yes
	End
      End
      AddModule
	Behavior = HeroModeSpecialAbilityUpdate ModuleTag_DeadeyeUpdate			; So the difference in SpecialAbility is that it takes timing from this Update, instead of simply firing.
		SpecialPowerTemplate    = SpecialAbilitySamBladeMaster
		HeroEffectDuration		= 30000										; this should sync with the auto ability delay re-fire time in commandButtons.ini
		UnpackTime              = 1											; insant unpack
		TriggerSound			= AragornBladeMaster
		PackTime				= 2500
		UnpackingVariation		= 1
	End
      End
;---earthquake---
      AddModule
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_SmashEnabler
		SpecialPowerTemplate = SpecialAbilityEarthquakeSam
		TriggeredBy = Upgrade_EnableGloinSmash
	End
      End
      AddModule
	Behavior = SpecialPowerModule ModuleTag_SmashStarter       
		SpecialPowerTemplate      = SpecialAbilityEarthquakeSam
		UpdateModuleStartsAttack  = Yes
		StartsPaused		  	  = Yes
	End
      End
      AddModule
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_SmashWeaponFireUpdate   
		SpecialPowerTemplate    = SpecialAbilityEarthquakeSam
		WhichSpecialWeapon		= 1
		SkipContinue			= Yes

		UnpackTime              = 1500 
		PackTime                = 1200		
		FreezeAfterTriggerDuration = 0 ; Hold AI for this long after we fire.
		
		AwardXPForTriggering    = 0		
		
		SpecialWeapon			= SamSmashWeapon
	End
      End
;---heroic strike---
AddModule
Behavior = UnpauseSpecialPowerUpgrade ModuleTag_CreateAHeroHotWCrippleStrikeMeleeEnabler_Level2
	SpecialPowerTemplate = SpecialAbilitySamHeroicStrike
	TriggeredBy			 = Upgrade_CreateAHeroCrippleStrikeMelee_Level2
End 
End
AddModule
Behavior = SpecialPowerModule ModuleTag_CreateAHeroHotWCrippleStrikeMeleeStarter_Level2
	SpecialPowerTemplate	 = SpecialAbilitySamHeroicStrike
	UpdateModuleStartsAttack = Yes
	StartsPaused			 = Yes
;		InitiateSound			 = LurtzVoiceAttackCripplingStrike
End
End
AddModule
Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_CreateAHeroHotWCrippleStrikeMeleeUpdate_Level2
	SpecialPowerTemplate = SpecialAbilitySamHeroicStrike
	SkipContinue		 = Yes

	UnpackTime			 = 1100	//Pull out arrow
	PreparationTime		 = 1	//Quick	shot
	PersistentPrepTime	 = 500	//looping the quick	shot
	PackTime			 = 500	//back to idle
	MustFinishAbility	 = Yes
	
	AwardXPForTriggering = 0	 
	StartAbilityRange	 = 15.0
	
	SpecialWeapon		 = SamHeroicStrikeWeapon
	WhichSpecialWeapon	 = 1
;	RejectedConditions	 = WEAPON_TOGGLE
End
End
;---adrenaline rush lol---
AddModule
Behavior = UnpauseSpecialPowerUpgrade ModuleTag_CreateAHeroToughnessEnabler
	SpecialPowerTemplate = SpecialAbilitySamAdrenalineRush
	TriggeredBy = Upgrade_CreateAHeroToughness
End
End
AddModule
Behavior = SpecialPowerModule ModuleTag_CreateAHeroToughnessStarter
	SpecialPowerTemplate		= SpecialAbilitySamAdrenalineRush
	UpdateModuleStartsAttack	= Yes
	StartsPaused				= Yes
End
End
AddModule
Behavior = AttributeModifierAuraUpdate ModuleTag_CreateAHeroToughnessUpdate	//	TODO figure out how to do this as a one time thing
	StartsActive		= No ;If no, requires upgrade to turn on.
	BonusName		= CreateAHeroToughnessBonus
	TriggeredBy		= Upgrade_CreateAHeroToughness
	RefreshDelay	= 2000
	Range			= 0
	AllowSelf		= Yes
End
End
;2nd power
AddModule
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_DeathMaskUnpause
		SpecialPowerTemplate      = SpecialAbilitySamDemoralizingShout
		TriggeredBy		  = Upgrade_MouthOfSauronDoubt
	End
End
AddModule
	Behavior = SpecialPowerModule ModuleTag_NecroDeathMaskUpdate
		SpecialPowerTemplate		= SpecialAbilitySamDemoralizingShout
		UpdateModuleStartsAttack	= Yes
		StartsPaused			= Yes
	End
End
AddModule
	Behavior = AttributeModifierAuraUpdate ModuleTag_DeathMask
		StartsActive			= No ;If no, requires upgrade to turn on.
		TriggeredBy		  	= Upgrade_MouthOfSauronDoubt
		BonusName			= DeathMaskModifier
		RefreshDelay			= 2000
		Range				= 110
		TargetEnemy			= Yes
		AntiCategory			= LEADERSHIP BUFF ; This means cancel all previous leadership bonuses
		ObjectFilter			= ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION -HERO -HORDE
	End
End
        ReplaceModule ModuleTag_01
	Draw = W3DScriptedModelDraw ModuleTag_01_Replace
	  
	  OkToChangeModelColor = Yes
	  
	   StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD

		DefaultModelConditionState
			Model               = RUSam_SKN
			Skeleton            = RUSam_SKL
			;WeaponLaunchBone    = PRIMARY B_FARMR		;sometimes it's in primary sometimes in secondary.
			;WeaponLaunchBone    = SECONDARY B_FARMR
			WeaponLaunchBone	= PRIMARY B_HANDR
			WeaponLaunchBone	= SECONDARY B_HANDR
			ParticleSysBone		= NONE Predator FollowBone:Yes Persist:HOLD PersistID:100
		End
		
		ModelConditionState		= PASSENGER_VARIATION_1
			Model               = RUSam_SKN
			Skeleton            = RUSam_SKL
			WeaponLaunchBone	= PRIMARY B_HANDR
			WeaponLaunchBone	= SECONDARY B_HANDR
			ParticleSysBone		= NONE Predator FollowBone:Yes Persist:HOLD PersistID:100
		End
	 	ModelConditionState		= WEAPONSET_HERO_MODE
			Model               = RUSam_SKN
			Skeleton            = RUSam_SKL
			WeaponLaunchBone	= PRIMARY B_HANDR
			WeaponLaunchBone	= SECONDARY B_HANDR
			ParticleSysBone		= NONE Predator FollowBone:Yes Persist:HOLD PersistID:100
                        ParticleSysBone         = BAT_RIBS SamResistEffect FollowBone:Yes
		End
		ModelConditionState		= PASSENGER_VARIATION_2
			Model               = RUSam_SKN
			Skeleton            = RUSam_SKL
			WeaponLaunchBone	= PRIMARY B_HANDL
			WeaponLaunchBone	= SECONDARY B_HANDL
			ParticleSysBone		= NONE Predator FollowBone:Yes Persist:HOLD PersistID:100
		End

		ModelConditionState		= INVISIBLE_STEALTH
			ParticleSysBone		= NONE Predator FollowBone:Yes Persist:SPAWN PersistID:100
		End
		
		

;;================== ANIMATIONS ===============================================================
;;------------------ FLYING & DYING -----------------------------------------------------------
;;======= DYING

		AnimationState					= STUNNED_FLAILING
			StateName					= STATE_Bored_Rocks
			Animation					= &&FLYING&&
				AnimationName			= RUSam_FLYA
				AnimationMode			= LOOP
				AnimationBlendTime		= 0
				AnimationSpeedFactorRange	= 0.4 0.6
			End
			Flags						= RANDOMSTART
		End

		AnimationState						= DYING DEATH_2
			Animation
				AnimationName				= RUSam_IDLA
				AnimationMode				= LOOP
			End
		End

		AnimationState					= DYING SPLATTED
			StateName					= STATE_Bored_Rocks
			Animation					= &&LANDING&&
				AnimationName			= RUSam_LNDA
				AnimationMode			= ONCE
			End
		End

		AnimationState					= DYING WEAPONSET_TOGGLE_1
			StateName					= STATE_Bored_Rocks
			Animation					= DIEA
				AnimationName			= RUSam_DIEA
				AnimationMode			= ONCE
			End
		End
		
		AnimationState					= DYING EMOTION_ALERT
			StateName					= STATE_Dead.
			Animation					= DIEB
				AnimationName			= RUSam_DIEB
				AnimationMode			= ONCE
			End
		End
		
		AnimationState					= DYING
			StateName					= STATE_Dead.
			Animation					= DIEA
				AnimationName			= RUSam_DIEA
				AnimationMode			= ONCE
			End
		End
		
		AnimationState						= PARALYZED
			Animation
				AnimationName				= RUSam_IDLA
				AnimationMode				= LOOP
			End
		End



;		AnimationState					= STUNNED WEAPONSET_TOGGLE_1
;			StateName					= STATE_Bored_Rocks
;			Animation					= &&LANDING&&
;				AnimationName			= RUSam_LNDA
;				AnimationMode			= ONCE
;				AnimationBlendTime		= 0
;			End
;			BeginScript
;				CurDrawableHideSubObject("pan")
;				CurDrawableHideSubObject("sword")
;			EndScript
;		End

		AnimationState					= STUNNED_STANDING_UP
			StateName					= STATE_Ready_Sword
			Animation					= GTPA
				AnimationName			= RUSam_GTPA
				AnimationMode			= ONCE
				;AnimationSpeedFactorRange = 2.0 2.0
			End
		End
		
		AnimationState					= STUNNED
			StateName					= STATE_Bored_Sword
			Animation					= &&LANDING&&
				AnimationName			= RUSam_LNDA
				AnimationMode			= ONCE
				AnimationBlendTime		= 0
			End
		End

		
		
;;------------------ MOVING -------------------------------------------------------------------
;;======= RIDING

;		AnimationState					= PASSENGER MOVING ACCELERATE
;			Animation					= RUFro_HH_RUNA
;				AnimationName			= RUFro_HH_ACCL
;				AnimationMode			= LOOP
;				AnimationBlendTime		= 0
;			End
;			StateName					= Mounted
;		End
;		AnimationState					= PASSENGER MOVING
;			Animation					= RUFro_HH_RUNA
;				AnimationName			= RUFro_HH_RUNA
;				AnimationMode			= LOOP
;				AnimationBlendTime		= 0
;			End
;			StateName					= Mounted
;		End

		AnimationState        = MOVING FIRING_OR_PREATTACK_A
			ShareAnimation		= Yes
			Animation           = RunAndFire
				AnimationName       = RUSam_ATRA
				AnimationMode       = LOOP
			End
			Flags               = RANDOMSTART 
		End


;;======== RUNNING
		
		AnimationState					= MOVING EMOTION_ALERT
			StateName					= STATE_Running_Sword
			Animation					= RUNC
				AnimationName			= RUSam_RUNC
				AnimationMode			= LOOP
			End
			Flags						= RANDOMSTART
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Running_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Running_RocksToSword") end
				if Prev == "STATE_Bored_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Running_RocksToSword") end
				if Prev == "STATE_Ready_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Running_RocksToSword") end
				if Prev == "STATE_Attention_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Running_RocksToSword") end
			EndScript
		End
		
		AnimationState					= MOVING
			StateName					= STATE_Running_Rocks
			Animation					= RUNA
				AnimationName			= RUSam_RUNA
				AnimationMode			= LOOP
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Running_Sword" then CurDrawableSetTransitionAnimState("TRANS_Running_SwordToRocks") end
				if Prev == "STATE_Bored_Sword" then CurDrawableSetTransitionAnimState("TRANS_Running_SwordToRocks") end
				if Prev == "STATE_Ready_Sword" then CurDrawableSetTransitionAnimState("TRANS_Running_SwordToRocks") end
				if Prev == "STATE_Attention_Sword" then CurDrawableSetTransitionAnimState("TRANS_Running_SwordToRocks") end
			EndScript
		End
		
;;------------------- ATTACKING --------------------------------------------------------------
		
		AnimationState					= PASSENGER FIRING_OR_PREATTACK_A
			StateName					= NoSword
			Animation					= THRA
				AnimationName			= RUSam_THRA
				AnimationMode			= ONCE
				UseWeaponTiming			= Yes
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Sword" then CurDrawableSetTransitionAnimState("TRANS_SheatheSword") end
			EndScript
		End
		
		AnimationState					= FIRING_OR_RELOADING_A WEAPONSET_TOGGLE_1
			StateName					= STATE_Ready_Rocks
			Animation					= IDLA
				AnimationName			= RUSam_IDLA
				AnimationMode			= LOOP
				AnimationBlendTime		= 20
			End
			;BeginScript
			;	CurDrawableAllowToContinue()
			;EndScript
		End
		
		AnimationState					= FIRING_OR_RELOADING_A
			StateName					= STATE_Ready_Sword
			Animation					= IDLB
				AnimationName			= RUSam_IDLB
				AnimationMode			= LOOP
				AnimationBlendTime		= 10
			End
			BeginScript
				CurDrawableAllowToContinue()
			EndScript
		End
		
		AnimationState					= FIRING_OR_PREATTACK_A WEAPONSET_TOGGLE_1
			StateName					= STATE_Ready_Rocks
			Animation					= THRA
				AnimationName			= RUSam_THRA
				AnimationMode			= ONCE
				UseWeaponTiming			= Yes
			End
			FrameForPristineBonePositions	= 42
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Ready_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
				if Prev == "STATE_Bored_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
				if Prev == "STATE_Attention_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
				if Prev == "STATE_Running_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
			EndScript
		End

		AnimationState					= FIRING_OR_PREATTACK_A 
			StateName					= STATE_Ready_Sword
			Animation					= ATKA
				AnimationName			= RUSam_ATKA
				AnimationMode			= ONCE
				UseWeaponTiming			= Yes
				AnimationBlendTime		= 10
				AnimationPriority		= 10
			End
			Animation					= ATKH
				AnimationName			= RUSam_ATKH
				AnimationMode			= ONCE
				UseWeaponTiming			= Yes
				AnimationBlendTime		= 10
				AnimationPriority		= 10
			End
; PUT BACK IN (PAN FLOATING)
;			Animation					= ATKI
;				AnimationName			= RUSam_ATKI
;				AnimationMode			= ONCE
;				UseWeaponTiming			= Yes
;				AnimationBlendTime		= 10
;				AnimationPriority		= 10
;			End
;			Animation					= ATKE
;				AnimationName			= RUSam_ATKE
;				AnimationMode			= ONCE
;				UseWeaponTiming			= No
;				AnimationBlendTime		= 10
;				AnimationPriority		= 2
;				AnimationSpeedFactorRange = 1.4 1.4
;			End			
			Flags						= RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Running_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Ready_RocksToSword") end
				if Prev == "STATE_Bored_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Ready_RocksToSword") end
				if Prev == "STATE_Ready_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Ready_RocksToSword") end
				if Prev == "STATE_Attention_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Ready_RocksToSword") end
			EndScript
		End

		AnimationState					= FIRING_OR_PREATTACK_B 
			StateName					= STATE_Ready_Sword
			Animation					= ATKA
				AnimationName			= RUSam_ATKE
				AnimationMode			= ONCE
				UseWeaponTiming			= Yes
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Running_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Ready_RocksToSword") end
				if Prev == "STATE_Bored_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Ready_RocksToSword") end
				if Prev == "STATE_Ready_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Ready_RocksToSword") end
				if Prev == "STATE_Attention_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Ready_RocksToSword") end
			EndScript
		End
;;------------------- HIT REACTIONS -----------------------------------------------------------

;		AnimationState					= HIT_REACTION HIT_LEVEL_1 WEAPONSET_TOGGLE_1
;			Animation					= Hit_Level_1_a
;				AnimationName			= RUSam_HITA
;				AnimationMode			= ONCE
;				AnimationBlendTime		= 0
;			End
;		End
;		AnimationState					= HIT_REACTION HIT_LEVEL_1
;			StateName					= STATE_Bored_Sword
;			Animation					= Hit_Level_1_a
;				AnimationName			= RUSam_HITC
;				AnimationMode			= ONCE
;				AnimationBlendTime		= 0
;			End
;		End
		
;;------------------- SPECIAL ANIMATIONS ------------------------------------------------------

		; -- Phial anims (No art yet, use Boromir for reference when hooking up)
		AnimationState					= UNPACKING PACKING_TYPE_1
                ParticleSysBone			= ZZZ_Phial PhialofGaladrielDelay FollowBone:Yes
			Animation           
				AnimationName			= RUSam_PHLA
				AnimationMode			= ONCE
			End
		End
		AnimationState					= PREPARING PACKING_TYPE_1
                ParticleSysBone			= ZZZ_Phial PhialofGaladriel FollowBone:Yes
			Animation           
				AnimationName			= RUSam_PHLB
				AnimationMode			= ONCE
			End
		End
		AnimationState					= PACKING PACKING_TYPE_1
			Animation           
				AnimationName			= RUSam_PHLC
				AnimationMode			= ONCE
			End
		End
		AnimationState					= PACKING_TYPE_1
			Animation           
				AnimationName			= RUSam_PHLC
				AnimationMode			= LOOP
			End
		End
;;------------------- EMOTIONS ----------------------------------------------------------------

		AnimationState					= EMOTION_CELEBRATING
			Animation
				AnimationName			= RUSam_CHRA
				AnimationMode			= LOOP
			End
		End
		
		AnimationState					= EMOTION_TAUNTING
			Animation
				AnimationName			= RUSam_TNTA
				AnimationMode			= ONCE
			End
			Animation
				AnimationName			= RUSam_TNTB
				AnimationMode			= ONCE
			End
			Flags						= RESTART_ANIM_WHEN_COMPLETE
		End
		
		AnimationState					= EMOTION_ALERT	WEAPONSET_TOGGLE_1
			StateName					= STATE_Ready_Rocks
			Animation           
				AnimationName			= RUSam_IDLA
				AnimationMode			= LOOP
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Ready_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
				if Prev == "STATE_Bored_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
				if Prev == "STATE_Attention_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
				if Prev == "STATE_Running_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
			EndScript
		End
		AnimationState					= EMOTION_ALERT
			StateName					= STATE_Ready_Sword
			Animation           
				AnimationName			= RUSam_IDLB
				AnimationMode			= LOOP
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Running_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Ready_RocksToSword") end
				if Prev == "STATE_Bored_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Ready_RocksToSword") end
				if Prev == "STATE_Ready_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Ready_RocksToSword") end
				if Prev == "STATE_Attention_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Ready_RocksToSword") end
			EndScript
		End
		
		AnimationState					= RAISING_FLAG
			Animation
				AnimationName			= RUSam_CHRA
				AnimationMode			= LOOP
			End
		End

;;------------------- SELECTED ----------------------------------------------------------------
	
		AnimationState					= SELECTED
			StateName					= STATE_Attention_Rocks
			Animation           
				AnimationName			= RUSam_ATNB
				AnimationMode			= LOOP
			End
			BeginScript
				CurDrawableHideSubObject("pan")
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Running_Rocks"
				then CurDrawableSetTransitionAnimState("TRANS_BoredToAttention_Rocks") end
				if Prev == "STATE_Bored_Rocks" then CurDrawableSetTransitionAnimState("TRANS_BoredToAttention_Rocks") end
				if Prev == "STATE_Ready_Rocks" then CurDrawableSetTransitionAnimState("TRANS_BoredToAttention_Rocks") end
				if Prev == "STATE_Attention_Rocks" then CurDrawableSetTransitionAnimState("TRANS_BoredToAttention_Rocks") end
				if Prev == "STATE_Ready_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
				if Prev == "STATE_Bored_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
				if Prev == "STATE_Attention_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
				if Prev == "STATE_Running_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
			EndScript
		End

;;------------------- IDLE STATE --------------------------------------------------------------

;	REMOVED - No longer a passenger
;		AnimationState					= PASSENGER
;			Animation					= IDLE1
;				AnimationName			= RUFro_HH_IDLA
;				AnimationMode			= ONCE
;			;	AnimationBlendTime		= 0
;			End
;			Animation					= IDLE2
;				AnimationName			= RUFro_HH_IDLB
;				AnimationMode			= ONCE
;			;	AnimationBlendTime		= 0
;			End
;	;		Animation					= IDLE3  once
;	;			AnimationName			= RUFro_HH_IDLC
;	;			AnimationMode			= LOOP
;	;			AnimationBlendTime		= 0
;	;		End
;			Animation					= IDLE4
;				AnimationName			= RUFro_HH_IDLH
;				AnimationMode			= ONCE
;			;	AnimationBlendTime		= 0
;			End
;			Flags						= RESTART_ANIM_WHEN_COMPLETE
;			StateName					= Mounted
;		End

		AnimationState					= WEAPONSET_TOGGLE_1
			StateName					= STATE_Bored_Rocks
			Animation					= IDLA
				AnimationName			= RUSam_IDLA
				AnimationMode			= LOOP
			End
			BeginScript
				CurDrawableHideSubObject("pan")
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Ready_Sword" then CurDrawableSetTransitionAnimState("TRANS_Bored_SwordToRocks") end
				if Prev == "STATE_Bored_Sword" then CurDrawableSetTransitionAnimState("TRANS_Bored_SwordToRocks") end
				if Prev == "STATE_Attention_Sword" then CurDrawableSetTransitionAnimState("TRANS_Bored_SwordToRocks") end
				if Prev == "STATE_Running_Sword" then CurDrawableSetTransitionAnimState("TRANS_Bored_SwordToRocks") end
			EndScript
		End
		
		IdleAnimationState
			StateName					= STATE_Bored_Rocks
			Animation					= IDLA
				AnimationName			= RUSam_IDLA
				AnimationMode			= ONCE
			End
			BeginScript
				CurDrawableHideSubObject("pan")
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Ready_Sword" then CurDrawableSetTransitionAnimState("TRANS_Bored_SwordToRocks") end
				if Prev == "STATE_Bored_Sword" then CurDrawableSetTransitionAnimState("TRANS_Bored_SwordToRocks") end
				if Prev == "STATE_Attention_Sword" then CurDrawableSetTransitionAnimState("TRANS_AttentionToBored_Rocks") end
				if Prev == "STATE_Running_Sword" then CurDrawableSetTransitionAnimState("TRANS_Bored_SwordToRocks") end
			EndScript
		End
;;--------------------- TRANSITIONS -------------------------------------------------------------

;		TransitionState					= TRANS_unMount
;			Animation					= unmount
;				AnimationName			= RUFro_HH_IDLB
;				AnimationMode			= ONCE
;				AnimationBlendTime		= 0
;			End
;		End

		TransitionState					= TRANS_DrawSword
			Animation					= STHA
				AnimationName			= RUSam_STHA
				AnimationMode			= ONCE
				AnimationBlendTime		= 0
			End
		End
		TransitionState					= TRANS_Bored_RocksToSword
			Animation					= STHC
				AnimationName			= RUSam_STHC
				AnimationMode			= ONCE
			End
		End
		TransitionState					= TRANS_Ready_RocksToSword
			Animation					= STHC
				AnimationName			= RUSam_STHC
				AnimationMode			= ONCE
			End
		End
		TransitionState					= TRANS_Attention_RocksToSword
			Animation					= STHC
				AnimationName			= RUSam_STHC
				AnimationMode			= ONCE
			End
		End

		TransitionState					= TRANS_SheatheSword
			Animation					= STHA
				AnimationName			= RUSam_STHA
				AnimationMode			= ONCE_BACKWARDS
			End
			Flags						= START_FRAME_LAST 
		End
		TransitionState					= TRANS_Bored_SwordToRocks
			Animation					= STHD
				AnimationName			= RUSam_STHD
				AnimationMode			= ONCE
			End
		End
		TransitionState					= TRANS_Ready_SwordToRocks
			Animation					= STHD
				AnimationName			= RUSam_STHD
				AnimationMode			= ONCE
			End
		End
		TransitionState					= TRANS_Attention_SwordToRocks
			Animation					= STHD
				AnimationName			= RUSam_STHD
				AnimationMode			= ONCE
			End
		End
		
		TransitionState					= TRANS_DrawSword_Running
			Animation					= STHE
				AnimationName			= RUSam_STHE
				AnimationMode			= ONCE
				AnimationBlendTime		= 0
			End
		End
		TransitionState					= TRANS_Running_RocksToSword
			Animation					= STHE
				AnimationName			= RUSam_STHE
				AnimationMode			= ONCE
				AnimationBlendTime		= 0
			End
		End
		
		TransitionState					= TRANS_SheatheSword_Running
			Animation					= STHF
				AnimationName			= RUSam_STHF
				AnimationMode			= ONCE
			End
		End
		TransitionState					= TRANS_Running_SwordToRocks
			Animation					= STHF
				AnimationName			= RUSam_STHF
				AnimationMode			= ONCE
				AnimationBlendTime		= 0
			End
		End
		
		TransitionState					= TRANS_BoredToAttention_Rocks
			Animation					= RUND
				AnimationName			= RUSam_ATNA
				AnimationMode			= ONCE
			End
		End
		
		TransitionState					= TRANS_AttentionToBored_Rocks
			Animation					= RUND
				AnimationName			= RUSam_ATNC
				AnimationMode			= ONCE
			End
		End
		
;;-------------------------------------------------------------------------------
	End
	End
End
;*************************************************************************************************************************
;                                                        MERRY         
;*************************************************************************************************************************
;-------------------------------------------------------------PARTICLESYSTEM------------------------------------------
FXParticleSystem MerryIstariLightRays
  System
    Priority = ALWAYS_RENDER
    Shader = W3D_EMISSIVE
    Type = DRAWABLE
    ParticleName = EXLightShafts01.W3D
    Lifetime = 100 100
    SystemLifetime = 7
    SortLevel = 1
    Size = 0.5 1.2
    BurstDelay = 2 2
    BurstCount = 1 1
  End
  Color = DefaultColor
    Color1 = R:26 G:23 B:0 10
  End
  Alpha = DefaultAlpha
    Alpha1 = 0.08 0.08 0
    Alpha2 = 0 0 100
  End
  Update = RenderObjectUpdate
    StartSizeX = 0.1 0.1
    StartSizeY = 1 1
    StartSizeZ = 0.1 0.1
    SizeRateX = 0.05 0.05
    SizeRateZ = 0.05 0.05
    SizeDampingX = 0.95 0.95
    SizeDampingY = 1 1
    SizeDampingZ = 0.95 0.95
    AngleZ = 1.45 1.45
    AngularRateZ = -0.003 0.003
    AngularDamping = 0.99 0.99
    Rotation = ROTATE_Z
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = PointEmissionVolume
  End
  Draw = RenderObjectDraw
  End
End
FXParticleSystem MerryBlastFinalLight
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXexplo01.tga
    Lifetime = 15 15
    SystemLifetime = 5
    SortLevel = 1
    Size = 10 10
    BurstCount = 2 2
  End
  Color = DefaultColor
    Color1 = R:60 G:56 B:0 0
    Color2 = R:0 G:0 B:0 10
  End
  Update = DefaultUpdate
    SizeRate = 20 60
    SizeRateDamping = 0.4 0.5
    AngleZ = -1 1
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    Gravity = 1
    VelocityDamping = 1 1
  End
  EmissionVelocity = OutwardEmissionVelocity
    Speed = 1 1
  End
  EmissionVolume = PointEmissionVolume
  End
  Draw = DefaultDraw
  End
End
FXParticleSystem MerryBlastFinalShockWave
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXRing01.tga
    Lifetime = 40 40
    SystemLifetime = 5
    SortLevel = 1
    Size = 1 1
    BurstCount = 1 1
    IsGroundAligned = Yes
  End
  Color = DefaultColor
    Color1 = R:60 G:56 B:0 0
    Color2 = R:0 G:0 B:0 40
    ColorScale = -40 40
  End
  Update = DefaultUpdate
    SizeRate = 15 25
    SizeRateDamping = 1 1
    AngleZ = -1 1
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.3 0.4
  End
  EmissionVelocity = OutwardEmissionVelocity
  End
  EmissionVolume = PointEmissionVolume
    IsHollow = Yes
  End
  Draw = DefaultDraw
  End
End
FXParticleSystem MerryBlastDust
  System
    Priority = VERY_LOW_OR_ABOVE
    Shader = ALPHA
    ParticleName = EXsmokeplume.tga
    PerParticleAttachedSystem = GandalfBlastDustCore
    Lifetime = 100 100
    SystemLifetime = 5
    SortLevel = 1
    Size = 1 2
    BurstCount = 25 50
    InitialDelay = 5 5
  End
  Color = DefaultColor
    Color1 = R:181 G:190 B:196 0
  End
  Alpha = DefaultAlpha
    Alpha1 = 0.2 0.3 0
    Alpha2 = -2 0 100
  End
  Update = DefaultUpdate
    SizeRate = 2 15
    SizeRateDamping = 0.8 0.8
    AngleZ = 0 7
    AngularRateZ = -0.1 -0.1
    AngularDamping = 0.92 0.94
    Rotation = ROTATE_V
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.92 0.94
    DriftVelocity = X:0.032 Y:0.064 Z:0.15
  End
  EmissionVelocity = OutwardEmissionVelocity
    Speed = 20 20
  End
  EmissionVolume = CylinderEmissionVolume
    Radius = 12
  End
  Draw = DefaultDraw
  End
End
;---------------------------------------------------------------FX-----------------------------------------------------
FXList FX_MerryBeamWeapon
  Sound
    Name = GandalfBeamWeapon
  End
  ParticleSystem 
    Name = MerryIstariLightRays
    Offset = X:0.0 Y:0.0 Z:10.0
    OrientToObject = Yes
    SetTargetMatrix = Yes
  End
End
FXList FX_MerryBlast
  ParticleSystem
    Name = MerryBlastFinalLight
    Offset = X:0.0 Y:0.0 Z:40   ;Z:8.0
  End
  ParticleSystem
    Name = MerryBlastFinalShockWave
    Offset = X:0.0 Y:0.0 Z:20.0
  End
  ParticleSystem
    Name = MerryBlastDust
    Offset = X:0.0 Y:0.0 Z:15.0
  End
;	ViewShake
;    Type = CINE_EXTREME
;  End
  Sound
    Name = GandalfBlastWeapon
  End
End
;--------------------------------------------------------------SPECIAL POWER-------------------------------------------

SpecialPower MerryHeal
	InitiateAtLocationSound 	= SpellHeal
	Enum                		= SPECIAL_SPELL_BOOK_HEAL
	Flags				= WATER_OK RESPECT_RECHARGE_TIME_DISCOUNT
	ReloadTime         		= 60000
	RadiusCursorRadius  		= 90
        MaxCastRange			= 70	
End

SpecialPower SpecialAbilityMerryLeadership
	Enum									  =	SPECIAL_GENERAL_TARGETLESS
	ReloadTime								  =	120000 //  in	milliseconds
	PublicTimer								  =	No
End

SpecialPower SpecialAbilityMerryMightyRage
	Enum						   = SPECIAL_GENERAL_TARGETLESS_TWO
	ReloadTime					   = 80000
	RadiusCursorRadius			   = 30
	InitiateAtLocationSound		   = DainMightyRage
End

SpecialPower SpecialAbilityHolyLight
	Enum						   = SPECIAL_WOUND_ARROW
	ReloadTime					   = 90000	; in milliseconds
	RadiusCursorRadius			   = 120.0
	ObjectFilter				   = ALL -BASE_FOUNDATION -INERT -IGNORED_IN_GUI -WALK_ON_TOP_OF_WALL -BLOCKING_GATE -WALL_UPGRADE -UNATTACKABLE -MOVE_ONLY
End

SpecialPower SpecialAbilityMerryWordOfPower
	Enum						   = SPECIAL_WORD_OF_POWER
	ReloadTime					   = 120000
End

;-------------------------------------------------------------COMMANDBUTTONS----------------------------------------------------

CommandButton Command_SpellBookHeal
	Command = SPECIAL_POWER
	TextLabel			= CONTROLBAR:PoH
;	Options				= NEED_TARGET_POS ; Huh, you can't have this flag and a radius cursor: CONTEXTMODE_COMMAND
	DescriptLabel		= CONTROLBAR:TooltipPoH    
	SpecialPower		= MerryHeal
    ButtonImage			= SBGood_Heal
	ButtonBorderType	= ACTION 
;	RadiusCursorType	= HealRadiusCursor
        InPalantir              = Yes
End

CommandButton Command_CreateAHero_Toughness
	Command					= SPECIAL_POWER
	SpecialPower			= SpecialAbilityMerryLeadership
	Options					= NONPRESSABLE
	TextLabel				= CONTROLBAR:PoF
	DescriptLabel			= CONTROLBAR:ToolTipPoF
	ButtonImage				= HSKingDainStubbornPride
	ButtonBorderType		= ACTION
	InPalantir				= Yes
End

CommandButton Command_SpecialAbilityDainMightyRage
	Command				= SPECIAL_POWER 
	SpecialPower		= SpecialAbilityMerryMightyRage
	Options				= NEED_TARGET_POS
	TextLabel			= CONTROLBAR:BoP
	ButtonImage			= HSKingDainMightyRage
	CursorName			= Bombard
	RadiusCursorType	= MightyRageRadiusCursor
	InvalidCursorName	= GenericInvalid
	ButtonBorderType	= ACTION 
	DescriptLabel		= CONTROLBAR:ToolTipBoP
	InPalantir			= Yes
	NeedDamagedTarget	= Yes
End

CommandButton Command_GondorGandalfIstariLight
	Command                 = SPECIAL_POWER
	SpecialPower            = SpecialAbilityHolyLight 
	Options                 = NEED_TARGET_ENEMY_OBJECT ; CONTEXTMODE_COMMAND
	TextLabel               = CONTROLBAR:HolyLight
	ButtonImage             = HSGandalfIstariLight
	CursorName              = Bombard
	InvalidCursorName       = GenericInvalid
	ButtonBorderType        = ACTION
	DescriptLabel           = CONTROLBAR:ToolTipHolyLight
	AutoAbility			  = Yes
	InPalantir			  = Yes
End
CommandButton Command_SpecialAbilityWordOfPower
  Command                 	= SPECIAL_POWER 
  SpecialPower            	= SpecialAbilityMerryWordOfPower
;  Options                 	= 
  TextLabel               	= CONTROLBAR:Smite
  ButtonImage             	= Gandolf_radcircle;HSGandalfWordOfPower
  ButtonBorderType        	= ACTION 
  DescriptLabel           	= CONTROLBAR:ToolTipSmite
  AutoAbility			= Yes
  PresetRange			= 120.0
;  UnitSpecificSound       	= 
  InPalantir			= Yes
End

;-------------------------------------------------ARMOR-------------------------------------------------------------------------------
Armor MerryArmor
  Armor = DEFAULT         55%   
  Armor = SLASH           55%   
  Armor = PIERCE          55%   
  Armor = SPECIALIST      55%   
  Armor = CRUSH            1%   
  Armor = CAVALRY	  55% 
  Armor = SIEGE           55%   
  Armor = FLAME           65%   
  Armor = MAGIC           45%   
  Armor = HERO            60%   
  Armor = HERO_RANGED     50%   
  Armor = POISON	  45% 
  Armor = STRUCTURAL	 45%	
  
  ;FlankedPenalty 	 = 50%    
End
;-------------------------------------------------------WEAPON----------------------------------------------------------------------------
Weapon MerryLightWeapon  ; BALANCE GandalfStaffWeapon
	AttackRange			= GANDALF_PHASER_RANGE				;600
	LeechRangeWeapon	= Yes
	WeaponSpeed			= 801      ; dist/sec 
	HitPercentage		= 100		; When this weapon is used it will hit exactly 100% of the time.
	DelayBetweenShots	= 4500		; time between shots, msec
	FireFX              = FX_MerryBeamWeapon
	FiringDuration      = 1
	AntiAirborneVehicle	= Yes
	AntiAirborneMonster	= Yes
	AcceptableAimDelta	= 15

	RadiusDamageAffects = ENEMIES NOT_SIMILAR

	DamageNugget                        ; A basic Nugget that just does damage
		Damage        = 3500	
		DamageScalar  = 200% NONE +MordorWitchKingOnFellBeast +GondorGwaihir +Drogoth
		DamageScalar  = 180% NONE +MordorFellBeast
		Radius        = 17.6
		DelayTime     = 200           ;The target is dying before the laser appears in the new laser tweak, so try to kill when the laser turns on
		DamageType    = MAGIC
		DamageFXType  = FLAME
		DeathType     = NORMAL
	End
	MetaImpactNugget                    ; A Nugget that throws things back with force
;		HeroResist          =   0.75
		ShockWaveAmount		= 50.0
		ShockWaveRadius		= 17.6
		ShockWaveTaperOff	= 0.5
		DelayTime			= 200		;The target is dying before the laser appears in the new laser tweak, so try to kill when the laser turns on
	End
End
Weapon MerryWordOfPower ;Golden Blast
	IdleAfterFiringDelay = 0
	AttackRange = 70
	MinimumAttackRange = 0.8
	WeaponSpeed = 401         ; dist/sec 
	MinWeaponSpeed = 241
	MaxWeaponSpeed = 601      ; dist/sec Upper limit on scaling, when attacking past nominal "max" range
	ScaleWeaponSpeed = Yes ; Used for lob weapons, scales speed proportional to range
	RadiusDamageAffects = ENEMIES NOT_SIMILAR
	DelayBetweenShots = 5000               ; time between shots, msec
	PreAttackDelay        = 2600
	PreAttackType         = PER_ATTACK ; Do the delay each time we attack a new target
	;PreAttackFX           = FX_GandalfPreAttackBlastReal
	FireFX                = FX_MerryBlast
	FiringDuration      = 1400
	DamageNugget                        ; A basic Nugget that just does damage
		Damage			= 3000
		Radius			= 70.0
		DamageType		= MAGIC
		DamageFXType	= MAGIC
		DeathType		= EXPLODED
		DamageSpeed		= 500.0 ; must match the ShockWaveSpeed below
	End
	MetaImpactNugget                    ; A Nugget that throws things back with force
;		HeroResist			= .75
		ShockWaveAmount   = 40.0
		ShockWaveRadius   = 100.0
		ShockWaveTaperOff = 1.0
		ShockWaveZMult    = 1.000
		ShockWaveSpeed	  = 500.0 
	End
End
;---------------------------------------------------------LEVEL UPS------------------------------------------------------------------------
ExperienceLevel	MerryLevel1
	AttributeModifiers		=	HobbitResistKnockback
	TargetNames						=	RohanMerry RohanMerry_Summoned
	RequiredExperience				=	1	
	ExperienceAward					=	HOBBIT_LVL1_EXP_AWARD 
	Rank							=	1
        Upgrades                                                = Upgrade_EnableGloinSmash
	SelectionDecal
		Texture						=	decal_hero_good	
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40
		MaxRadius					=	200
		MaxSelectedUnits			=	40
	End	
End
ExperienceLevel	MerryLevel3
	TargetNames						=	RohanMerry
	RequiredExperience				=	HOBBIT_LVL3_EXP_NEEDED
	ExperienceAward					=	HOBBIT_LVL3_EXP_AWARD 	
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	Rank							=	3
	AttributeModifiers				=	HobbitLevelUpDamage2
        Upgrades                                        = Upgrade_CreateAHeroToughness
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40
		MaxRadius					=	200
		MaxSelectedUnits			=	40
	End	
End
ExperienceLevel	MerryLevel5
	TargetNames						=	RohanMerry
	RequiredExperience				=	HOBBIT_LVL5_EXP_NEEDED
	ExperienceAward					=	HOBBIT_LVL5_EXP_AWARD 	
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	Rank							=	5
	AttributeModifiers				=	HobbitLevelUpDamage4
	Upgrades						= Upgrade_CreateAHeroInvulnerability_Level2	
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40
		MaxRadius					=	200
		MaxSelectedUnits			=	40
	End	
End	
ExperienceLevel	MerryLevel7
	TargetNames						=	RohanMerry
	RequiredExperience				=	HOBBIT_LVL7_EXP_NEEDED
	ExperienceAward					=	HOBBIT_LVL7_EXP_AWARD 	
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	Rank							=	7
	AttributeModifiers				=	HobbitLevelUpDamage6
        Upgrades                                        = Upgrade_GandalfIstariLight
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40
		MaxRadius					=	200
		MaxSelectedUnits			=	40
	End	
End	
ExperienceLevel	MerryLevel10
	TargetNames						=	RohanMerry
	RequiredExperience				=	HOBBIT_LVL10_EXP_NEEDED
	ExperienceAward					=	HOBBIT_LVL10_EXP_AWARD 	
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	Rank							=	10
	AttributeModifiers				=	HobbitLevelUpDamage9
        Upgrades                                        = Upgrade_GandalfWordOfPower
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40
		MaxRadius					=	200
		MaxSelectedUnits			=	40
	End	
End
;-------------------------------------------------------MODIFIER LIST-----------------------------------------------------
ModifierList MerryGeneralToughnessBonus
	Modifier = HEALTH_MULT 110%
        FX       = FX_GenericLeadership30
End	
;----------------------------------------------------------COMMANDSET--------------------------------------------------
CommandSet NewMerryCommandSet
   1 = Command_ToggleStance
   2 = Command_SpellBookHeal
   3 = Command_CreateAHero_Toughness          ;3
   4 = Command_SpecialAbilityDainMightyRage        ;5
   5 = Command_GondorGandalfIstariLight   ;8
   6 = Command_SpecialAbilityWordOfPower
End
;------------------------------------------------------PARAMETERS----------------------------------------------------------------------
Object RohanMerry

CommandSet = NewMerryCommandSet
	ArmorSet
		Conditions      = None
		Armor           = MerryArmor
		DamageFX        = NormalDamageFX
	End
        ReplaceModule ModuleTag_ActiveBody
	Body = ActiveBody ModuleTag_ActiveBody_sam
		MaxHealth	= 2500
	End
        End
End
;----------------------------------------------------------------MODULES----------------------------------------------------------------------
Object RohanMerry
	ShockwaveResistance = 100
;---heal---

      AddModule
  	Behavior = PlayerHealSpecialPower ModuleTag_Heal
		SpecialPowerTemplate  = MerryHeal
		HealAffects			  = INFANTRY CAVALRY MONSTER MACHINE SHIP DOZER
		HealAmount			  = 0.8	; 0.5 = 50% of maximum health
		HealRadius			  = 90
		HealFX				  = FX_SpellHealUnitHealBuff		;FX_DefaultUnitHealBuff
		; To replenish hordes a bit
		HealOCL               = OCL_HealSpellHordeReplenishPing
		AvailableAtStart	  = Yes
		RequirementsFilterMPSkirmish = NONE
		RequirementsFilterStrategic = NONE
	End
      End
;---leadership---
AddModule
Behavior = UnpauseSpecialPowerUpgrade ModuleTag_CreateAHeroToughnessEnabler
	SpecialPowerTemplate = SpecialAbilityMerryLeadership
	TriggeredBy = Upgrade_CreateAHeroToughness
End
End
AddModule
Behavior = SpecialPowerModule ModuleTag_CreateAHeroToughnessStarter
	SpecialPowerTemplate		= SpecialAbilityMerryLeadership
	UpdateModuleStartsAttack	= Yes
	StartsPaused				= Yes
End
End
AddModule
Behavior = AttributeModifierAuraUpdate ModuleTag_CreateAHeroToughnessUpdate	//	TODO figure out how to do this as a one time thing
	StartsActive		= No ;If no, requires upgrade to turn on.
	BonusName		= MerryGeneralToughnessBonus
	TriggeredBy		= Upgrade_CreateAHeroToughness
	RefreshDelay	= 2000
	Range			= 80 ;affects entire map... lol     ;NOT ANYMORE, MUHAHAHA!
	AllowSelf		= Yes
	ObjectFilter	= ALL
End
End
;---invulnerability---
AddModule
Behavior = UnpauseSpecialPowerUpgrade ModuleTag_CreateAHeroInvulnerabilityEnabler_Level2
	SpecialPowerTemplate = SpecialAbilityMerryMightyRage
	TriggeredBy			 = Upgrade_CreateAHeroInvulnerability_Level2
End
End
AddModule
Behavior = SpecialPowerModule ModuleTag_CreateAHeroInvulnerabilityStarter_Level2
	SpecialPowerTemplate		 = SpecialAbilityMerryMightyRage
	UpdateModuleStartsAttack	 = No
	StartsPaused				 = Yes
	AttributeModifier			 = CreateAHeroInvulnerabilityBonus_Level2
	AttributeModifierRange		 = 30
	AttributeModifierAffectsSelf = Yes   Heres your mistake you put no here
	AttributeModifierAffects	 = ANY +CAVALRY	+INFANTRY +HERO +RohanMerry ;added him here just in case
	AttributeModifierFX			 = FX_CreateAHeroInvulnerability_Start
End
End
;---holy light---
      AddModule
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_IstariLightEnabler
		SpecialPowerTemplate = SpecialAbilityHolyLight
		TriggeredBy = Upgrade_GandalfIstariLight
	End
      End
      AddModule
	Behavior = SpecialPowerModule ModuleTag_IstariLightPower                      
		SpecialPowerTemplate		= SpecialAbilityHolyLight
		UpdateModuleStartsAttack	= Yes
		StartsPaused			= Yes
		InitiateSound			= MerryVoiceAttack	;this plays when he targets, not when he fires
	End
      End
      AddModule
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_IstariLightUpdate
		SpecialPowerTemplate    = SpecialAbilityHolyLight
		SkipContinue			= Yes
		UnpackTime              = 2000 
 		PreparationTime         = 1  
 		PersistentPrepTime      = 2000
 		PackTime                = 500
		AwardXPForTriggering    = 0
		StartAbilityRange		= GANDALF_PHASER_CAST_RANGE ; Note: This has to be smaller than the weapon range or it'll never succeed
		ApproachRequiresLOS		= Yes		
		SpecialWeapon			= MerryLightWeapon
		MustFinishAbility		= Yes
		WhichSpecialWeapon		= 3
		BusyForDuration			= 2500
	End
      End
;---smite---
      AddModule
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_WordEnabler
		SpecialPowerTemplate = SpecialAbilityMerryWordOfPower
		TriggeredBy = Upgrade_GandalfWordOfPower
	End
      End
      AddModule
	Behavior = SpecialPowerModule ModuleTag_WordStarter       
		SpecialPowerTemplate      = SpecialAbilityMerryWordOfPower
		UpdateModuleStartsAttack  = Yes
		StartsPaused		  	  = Yes
	End
      End
      AddModule
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_WordWeaponFireUpdate   
		SpecialPowerTemplate    = SpecialAbilityMerryWordOfPower
		WhichSpecialWeapon		= 1
		SkipContinue			= Yes

		UnpackTime              = 1700 
		PackTime                = 1	
		FreezeAfterTriggerDuration = 2500 ; Hold AI for this long after we fire.
		
		AwardXPForTriggering    = 0		
		StartAbilityRange		= 80.0
		
		SpecialWeapon			= MerryWordOfPower
	End
      End
End	

;------Tom Bombadil----------
Armor TomBombadilArmor
  Armor = DEFAULT            	 40% 	; originally 50%	
  Armor = SLASH              	 40% 	; originally 50%
  Armor = PIERCE             	 40% 	; originally 50%
  Armor = SPECIALIST         	 40% 	; originally 100%
  Armor = CAVALRY	      	  1% 	; 
  Armor = CRUSH               	  1% 	;
  Armor = SIEGE              	  1% 	;
  Armor = FLAME              	 40% 	;
  Armor = FROST          	 40%   ;
  Armor = MAGIC              	 60% 	;
  Armor = HERO                	 40% 	;
  Armor = HERO_RANGED         	 50% 	;
  Armor = STRUCTURAL	 	 20%	; originally 100%
  FlankedPenalty 	       = 50%    
End

;-----------------------RANGERS-----------------------------------
;-----DMG-----
Weapon GondorRangerBowWarhead
  ProjectileCollidesWith = ENEMIES NEUTRAL STRUCTURES WALLS ;ALLIES ( 4/23/04 removed friendly fire)
  RadiusDamageAffects = ENEMIES NEUTRALS ALLIES NOT_SIMILAR
  HitStoredTarget = Yes	; Always hits initial target.
  DamageNugget                        ; A basic Nugget that just does damage
    Damage        = 300
    Radius        = 0.0	; HitStoredTarget means we hurt the person we launched at.  And nobody else.  So a miss hurts nobody.
    DelayTime     = 0
    DamageType    = PIERCE
    DamageFXType  = GOOD_ARROW_PIERCE
    DeathType     = NORMAL
  End
End

;----GFX----
Object GondorRanger

Scale = 1.0
	AddModule
	Behavior = GrantUpgradeCreate ModuleTag_1234
		UpgradeToGrant = Upgrade_GandalfWhite  ;
	End 
	End
	AddModule
	Behavior = SubObjectsUpgrade Costume_2
		TriggeredBy		= Upgrade_GandalfWhite 
		UpgradeTexture	= guranger.tga 0 guranger_gry.tga 
				RecolorHouse	= No
	End
	End
End
;<<<<<<<<<<<<<<<<EVIL UNITS>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
//------------------------------------------------------------------------------
;-----------------------BIG BAD WOLF(NEW)-------------------

FXParticleSystem Wolf_Ambient_Embers
  System
    Priority = VERY_LOW_OR_ABOVE
    ParticleName = EXcloudnazgul.tga
    Lifetime = 20 20
    SortLevel = 1
    Size = 10 15
    BurstCount = 1 1
  End
  Color = DefaultColor
    Color1 = R:100 G:100 B:100 0
    Color2 = R:100 G:100 B:100 5
    Color3 = R:100 G:100 B:100 20
    ColorScale = -5 5
  End
  Update = DefaultUpdate
    SizeRate = 1 1.35
    SizeRateDamping = 1 1
    AngleZ = -7 7
    AngularRateZ = -0.03 0.03
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    Gravity = -0.02
    VelocityDamping = 1 1
    DriftVelocity = X:0.3 Y:0 Z:-0.3
  End
  EmissionVelocity = OrthoEmissionVelocity
    Z = 20 0
  End
  EmissionVolume = SphereEmissionVolume
    Radius = 5
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem Wolf_Ambient_Embers01
  System
    Priority = VERY_LOW_OR_ABOVE
    Type = GPU_PARTICLE
    ParticleName = EXcloudnazgul.tga
    Lifetime = 80 80
    Size = 10 40
    BurstCount = 2 2
    IsEmitAboveGroundOnly = Yes
  End
  Color = DefaultColor
    Color2 = R:100 G:100 B:100 10
    Color3 = R:100 G:100 B:100 15
    Color4 = R:100 G:100 B:100 25
    Color5 = R:0 G:0 B:0 80
    ColorScale = -5 5
  End
  Update = DefaultUpdate
    SizeRate = -0.2 0
    SizeRateDamping = 0.99 0.99
    AngleZ = 0 7
    AngularRateZ = -0.05 0.05
    AngularDamping = 1 1
    Rotation = ROTATE_X
    AngleXY = 0.1 0.1
    AngularRateXY = -0.05 0.05
    AngularDampingXY = 0 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.5 0.5
    DriftVelocity = X:0 Y:0 Z:-0.7
    Swirly = Yes
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = -0.75 0.75
    Y = -0.75 0.75
  End
  EmissionVolume = CylinderEmissionVolume
    Radius = 30
    Length = 45
    Offset = X:0 Y:0 Z:50
  End
  Draw = GpuDraw
    FramesPerRow = 1
    TotalFrames = 2
    SpeedMultiplier = 2
  End
  Wind = DefaultWind
    WindStrength = 0.1
    WindAngleChangeMin = 0.149924
    WindAngleChangeMax = 0.449946
    WindPingPongStartAngleMax = 0.785398
    WindPingPongEndAngleMin = 5.49779
    WindPingPongEndAngleMax = 6.28319
  End
End

FXParticleSystem Wolf_Ambient_fog
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXcloudnazgul.tga
    Lifetime = 10 10
    SortLevel = 1
    Size = 30 30
    BurstCount = 1 2
  End
  Color = DefaultColor
    Color1 = R:100 G:100 B:100 0
    Color2 = R:100 G:100 B:100 10
  End
  Alpha = DefaultAlpha
    Alpha2 = 0.2 0.25 5
    Alpha3 = 0 0 10
  End
  Update = DefaultUpdate
    SizeRateDamping = 0.9 0.97
    AngleZ = 0 7
    AngularRateZ = -0.01 0.01
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    Gravity = -0.05
    VelocityDamping = 0.9 0.9
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = -1 1
    Y = -1 1
  End
  EmissionVolume = CylinderEmissionVolume
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem Wolf_Ambient_fog01
  System
    Priority = VERY_LOW_OR_ABOVE
    Type = GPU_PARTICLE
    ParticleName = EXcloudnazgul.tga
    Lifetime = 70 70
    Size = 40 80
    BurstCount = 3 4
    IsEmitAboveGroundOnly = Yes
  End
  Color = DefaultColor
    Color2 = R:100 G:100 B:100 10
    Color3 = R:100 G:100 B:100 70
  End
  Update = DefaultUpdate
    SizeRate = -0.2 0
    SizeRateDamping = 0.99 0.99
    AngleZ = 0 7
    AngularRateZ = -0.05 0.05
    AngularDamping = 1 1
    AngleXY = 0.05 0.1
    AngularRateXY = 0.02 0.15
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
    DriftVelocity = X:0 Y:0 Z:-1
    Swirly = Yes
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = -0.75 0.75
    Y = -0.75 0.75
  End
  EmissionVolume = CylinderEmissionVolume
    Radius = 35
    Length = 60
    Offset = X:0 Y:0 Z:60
  End
  Draw = GpuDraw
    FramesPerRow = 1
    TotalFrames = 1
    SpeedMultiplier = 1
  End
  Wind = DefaultWind
    WindMotion = PingPong
    WindStrength = 0.1
    WindAngleChangeMin = 0.149924
    WindAngleChangeMax = 0.449946
    WindPingPongStartAngleMax = 0.785398
    WindPingPongEndAngleMin = 5.49779
    WindPingPongEndAngleMax = 6.28319
  End
End



;--STATS--
Object AngmarShadeWolf

RemoveModule ModuleTag_LifetimeUpdate
End

SpecialPower SpecialAbilityAngmarShadeEatMeGrab
Enum = SPECIAL_AT_VISIBLE_OBJECT
ObjectFilter = NONE +INFANTRY +HERO
ReloadTime = 90000
End
;-------------------------
;----------Wolf-----------
;-------------------------
;---STATS-----
;------------------------------------------------------------------------------
Armor ShadeofWolfArmor
  Armor = DEFAULT		 50%	; Likes to have things think they can attack him
  Armor = SIEGE			 50%	; siege weapons can hurt him
  Armor = STRUCTURAL		 50%	; Structural damage (Ent rocks)
  Armor = FLAME          	 50%   ;
  Armor = MAGIC			 50%	; Gandalf can really hurt him.
  Armor = HERO			 50%	; Other heroes can hurt him too.  Watch out for heroes Mr. Balrog!
  Armor = HERO_RANGED   	 50%    ; Hero bow damage
  
End
Object ShadeofWolfArmor

AddModule BodyModuleTag
Body = ActiveBody BodyModuleTag_new
		MaxHealth 		= 70000  
		MaxHealthDamaged 	= 65000
		BurningDeathBehavior = Yes
		BurningDeathFX       = FX_InfantryBurningFlame
	End
End
End


;----------------GFX-------------------
FXParticleSystem SoWolf_Ambient_Embers
  System
    Priority = VERY_LOW_OR_ABOVE
    ParticleName = EXGlow.tga
    Lifetime = 10 10
    SortLevel = 1
    Size = 10 15
    BurstCount = 1 1
  End
  Color = DefaultColor
    Color1 = R:10 G:10 B:10 20
    Color2 = R:10 G:10 B:10 20
    Color3 = R:10 G:10 B:10 20
    ColorScale = -5 5
  End
  Update = DefaultUpdate
    SizeRate = 1 1.35
    SizeRateDamping = 1 1
    AngleZ = -7 7
    AngularRateZ = -0.03 0.03
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    Gravity = -0.02
    VelocityDamping = 1 1
    DriftVelocity = X:0.3 Y:0 Z:-0.3
  End
  EmissionVelocity = OrthoEmissionVelocity
    Z = 20 0
  End
  EmissionVolume = SphereEmissionVolume
    Radius = 5
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem SoWolf_Ambient_Embers01
  System
    Priority = VERY_LOW_OR_ABOVE
    Type = GPU_PARTICLE
    ParticleName = EXGlow.tga
    Lifetime = 20 20
    Size = 5 20
    BurstCount = 2 2
    IsEmitAboveGroundOnly = Yes
  End
  Color = DefaultColor
    Color1 = R:10 G:10 B:10 20
    Color2 = R:10 G:10 B:10 20
    Color3 = R:10 G:10 B:10 20
    ColorScale = -5 5
  End
  Update = DefaultUpdate
    SizeRate = -0.2 0
    SizeRateDamping = 0.99 0.99
    AngleZ = 0 7
    AngularRateZ = -0.05 0.05
    AngularDamping = 1 1
    Rotation = ROTATE_X
    AngleXY = 0.1 0.1
    AngularRateXY = -0.05 0.05
    AngularDampingXY = 0 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.5 0.5
    DriftVelocity = X:0 Y:0 Z:-0.7
    Swirly = Yes
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = -0.75 0.75
    Y = -0.75 0.75
  End
  EmissionVolume = CylinderEmissionVolume
    Radius = 30
    Length = 45
    Offset = X:0 Y:0 Z:50
  End
  Draw = GpuDraw
    FramesPerRow = 1
    TotalFrames = 2
    SpeedMultiplier = 2
  End
  Wind = DefaultWind
    WindStrength = 0.1
    WindAngleChangeMin = 0.149924
    WindAngleChangeMax = 0.449946
    WindPingPongStartAngleMax = 0.785398
    WindPingPongEndAngleMin = 5.49779
    WindPingPongEndAngleMax = 6.28319
  End
End

FXParticleSystem SoWolf_Ambient_fog
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXGlow.tga
    Lifetime = 10 10
    SortLevel = 1
    Size = 10 20
    BurstCount = 1 2
  End
  Color = DefaultColor
    Color1 = R:10 G:10 B:10 20
    Color2 = R:10 G:10 B:10 20
    Color3 = R:10 G:10 B:10 20
  End
  Alpha = DefaultAlpha
    Alpha2 = 0.2 0.25 5
    Alpha3 = 0 0 10
  End
  Update = DefaultUpdate
    SizeRateDamping = 0.9 0.97
    AngleZ = 0 7
    AngularRateZ = -0.01 0.01
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    Gravity = -0.05
    VelocityDamping = 0.9 0.9
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = -1 1
    Y = -1 1
  End
  EmissionVolume = CylinderEmissionVolume
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem SoWolf_Ambient_fog01
  System
    Priority = VERY_LOW_OR_ABOVE
    Type = GPU_PARTICLE
    ParticleName = EXGlow.tga
    Lifetime = 20 20
    Size = 20 30
    BurstCount = 3 4
    IsEmitAboveGroundOnly = Yes
  End
  Color = DefaultColor
    Color1 = R:10 G:10 B:10 20
    Color2 = R:10 G:10 B:10 20
    Color3 = R:10 G:10 B:10 20
  End
  Update = DefaultUpdate
    SizeRate = -0.2 0
    SizeRateDamping = 0.99 0.99
    AngleZ = 0 7
    AngularRateZ = -0.05 0.05
    AngularDamping = 1 1
    AngleXY = 0.05 0.1
    AngularRateXY = 0.02 0.15
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
    DriftVelocity = X:0 Y:0 Z:-1
    Swirly = Yes
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = -0.75 0.75
    Y = -0.75 0.75
  End
  EmissionVolume = CylinderEmissionVolume
    Radius = 35
    Length = 60
    Offset = X:0 Y:0 Z:60
  End
  Draw = GpuDraw
    FramesPerRow = 1
    TotalFrames = 1
    SpeedMultiplier = 1
  End
  Wind = DefaultWind
    WindMotion = PingPong
    WindStrength = 0.1
    WindAngleChangeMin = 0.149924
    WindAngleChangeMax = 0.449946
    WindPingPongStartAngleMax = 0.785398
    WindPingPongEndAngleMin = 5.49779
    WindPingPongEndAngleMax = 6.28319
  End
End

FXParticleSystem SoWolf_Ambient_snow
  System
    Priority = VERY_LOW_OR_ABOVE
    ParticleName = EXGlow.TGA
    Lifetime = 10 10
    Size = 3 5
    BurstCount = 1 1
    InitialDelay = 4 6
  End
  Color = DefaultColor
    Color1 = R:10 G:10 B:10 20
    Color2 = R:10 G:10 B:10 20
    Color3 = R:10 G:10 B:10 20
    ColorScale = -5 0
  End
  Update = DefaultUpdate
    SizeRateDamping = 0.9 0.95
    AngleZ = 0 7
    AngularRateZ = -0.03 0.03
    AngularDamping = 0.99 0.99
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = -0.1 0.1
    Y = -0.1 0.1
    Z = -0.35 -0.25
  End
  EmissionVolume = CylinderEmissionVolume
    Radius = 20
    Length = 60
    Offset = X:0 Y:0 Z:60
  End
  Draw = DefaultDraw
  End
  Wind = DefaultWind
    WindMotion = PingPong
    WindStrength = 0.2
    WindFullStrengthDist = 50
    WindZeroStrengthDist = 100
    WindAngleChangeMin = 0.017453
    WindAngleChangeMax = 0.034907
    WindPingPongStartAngleMax = 0.785398
    WindPingPongEndAngleMin = 5.49779
    WindPingPongEndAngleMax = 6.28319
  End
End

Object AngmarShadeWolf

	CrusherLevel	= 0
Scale = 1.0
	AddModule
	Behavior = GrantUpgradeCreate ModuleTag_1234
		UpgradeToGrant = Upgrade_GandalfWhite  ;
	End 
	End
	AddModule
	Behavior = SubObjectsUpgrade Costume_2
		TriggeredBy		= Upgrade_GandalfWhite 
		UpgradeTexture	= kuwwolf.tga 0 kudirewolfbnr.tga 
				RecolorHouse	= No
	End
	End
End

Weapon NewAngmarShadeofWolfSwipe     ; BALANCE Balrog Weapon
  ;LeechRangeWeapon      = Yes
  AttackRange           = 30.0
  MeleeWeapon           = Yes
  DelayBetweenShots     = 1000            ; time between shots, msec
  PreAttackDelay        = 1000             ; 300 is mace swing delay time before contact with target.
  PreAttackType         = PER_SHOT ; Do the delay each time we attack
  FireFX                = FX_SauronMaceHit
  FiringDuration        = 1000    ; Duration of the mace swing 
  DamageDealtAtSelfPosition = Yes ; A melee based AoE.  Arc radiates from me, not them

  DamageNugget                        ; A basic Nugget that just does damage
    Damage        = 250
;    DamageScalar  = 25% NONE +COMMANDCENTER			
    Radius        = 70.0
    DamageType    = FROST
    DamageFXType  = MAGIC
    DeathType     = BURNED
    DamageArc      = 90
  End

  DamageNugget                        ; A basic Nugget that just does damage
    Damage        = 250
;    DamageScalar  = 20% NONE +COMMANDCENTER		
    Radius        = 70.0
    DamageType    = HERO
    DamageFXType  = MAGIC
    DeathType     = NORMAL
    DamageArc      = 90
  End
  
;	FireLogicNugget						; Lights flammables on fire
;		LogicType	= INCREASE_BURN_RATE
;		Radius		= 70.0
;		Damage		= BALROG_SWORD_SWIPE_DAMAGE_FLAME
;	End

  MetaImpactNugget                    ; A Nugget that throws things back with force
	KillObjectFilter  = INSTANT_DEATH_ON_METAIMPACT_OBJFILTER
    ShockWaveAmount   = 140.0
    ShockWaveRadius   = 70.0
    ShockWaveTaperOff = 0.75
    ShockWaveArc      = 90
    ShockWaveZMult    = 0.600
  End
End

Object AngmarShadeWolf
WeaponSet
		Conditions = None
		Weapon = PRIMARY	NewAngmarShadeofWolfSwipe
	End
End

;------------Spider Boss------------


;----STINGER-------
Weapon WildShelobPoisonedStinger
  LeechRangeWeapon = Yes
  AttackRange			= 30.0
  MeleeWeapon			= Yes
  FireFX				= FX_ShelobPoisonStingerStrike		;FX_GondorSwordHit
  DelayBetweenShots         = WILD_SHELOB_STINGER_DELAYBETWEENSHOTS
  PreAttackDelay            = WILD_SHELOB_STINGER_PREATTACKDELAY   ; 1467 is the prep time for archer.
  PreAttackType             = PER_SHOT ; Do the delay each time we attack a new target
  FiringDuration            = WILD_SHELOB_STINGER_FIRINGDURATION    ; Duration of the archer firing shot is 500ms.

;	DamageNugget                        ; A basic Nugget that just does damage
;		Damage        = 0
;		Radius        = 0.0
;		DelayTime     = 0
;		DamageType    = SLASH
;		DamageFXType  = SWORD_SLASH
;		DeathType     = NORMAL
;	End

	DOTNugget                        ; A basic Nugget that just does damage
		Damage        = 0
		AcceptDamageAdd = No
		Radius        = 0.0
		DelayTime     = 0
		DamageType    = POISON
		DamageFXType  = POISON
		DeathType     = NORMAL
		DamageInterval = 1000
		DamageDuration = 30000
		SpecialObjectFilter = AFFECTED_BY_POISON_OBJECTFILTER
	End

	ParalyzeNugget
		Radius				= 0.0
		Duration			= 5000
;		SpecialObjectFilter	= CRIPPLE_STRIKE_OBJECT_FILTER_MELEE
		ParalyzeFX			= FX_PoisonedStunEffect
	End
End

SpecialPower SpecialAbilityWildShelobPoisonedStinger
	Enum			= SPECIAL_AT_VISIBLE_OBJECT
	ReloadTime		= 15000
	ObjectFilter	= AFFECTED_BY_POISON_OBJECTFILTER 			; Removed -MordorFellBeast -MordorFellBeastInterface -AngmarWitchking_Mounted -BlackRiderMountedInterface 
End

;-----------------GFX----------------------

FXParticleSystem SpiderGlow
  System
    Priority = VERY_LOW_OR_ABOVE
    Shader = ALPHA
    ParticleName = EXCloudNazgul.tga
    Lifetime = 30 30
    Size = 100 120
    BurstDelay = 1 1
    BurstCount = 1 1
  End
  Color = DefaultColor
    Color2 = R:193 G:0 B:0 5
    Color3 = R:0 G:0 B:0 30
  End
  Alpha = DefaultAlpha
    Alpha2 = 0.5 0.75 5
    Alpha3 = -0.2 0 30
  End
  Update = DefaultUpdate
    SizeRate = 1 1
    SizeRateDamping = 1 1
    AngleZ = -3 3
    AngularRateZ = -0.01 0.01
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
  End
  EmissionVelocity = OutwardEmissionVelocity
  End
  EmissionVolume = LineEmissionVolume
    StartPoint = X:0 Y:0 Z:50
    EndPoint = X:0 Y:0 Z:30
  End
  Draw = DefaultDraw
  End
End

Object WildShelob

Scale = 1.5

	AddModule
	Behavior = GrantUpgradeCreate ModuleTag_1234
		UpgradeToGrant = Upgrade_GandalfWhite  ;
	End 
	End
	AddModule
	Behavior = SubObjectsUpgrade Costume_2
		TriggeredBy		= Upgrade_GandalfWhite 
		UpgradeTexture	= mushelobh.tga 0 mugntspdrbannercarrier.tga 
				RecolorHouse	= No
	End
	End

ReplaceModule ModuleTag_01
	Draw = W3DScriptedModelDraw ModuleTag_01_new
	  OkToChangeModelColor = Yes
		DefaultModelConditionState
			Model					= MUShelob_SKN
			Skeleton				= MUShelob_SKL
		ParticleSysBone = None SpiderGlow FollowBone:Yes
		End


		IdleAnimationState
			Animation				= IDLA
				AnimationName		= MUShelob_IDLA
				AnimationMode		= ONCE
			End
		End
;//Wall climbing/rapelling
	AnimationState						= CLIMBING
		StateName						= STATE_Climbing
		Animation						= Climbing
			AnimationName				= MUShelob_WALB
			AnimationMode				= LOOP
			AnimationBlendTime			= 15
		End
		BeginScript;script to set transition from moving
			Prev = CurDrawablePrevAnimationState()
			if Prev == "STATE_Running"  then CurDrawableSetTransitionAnimState("Trans_RunningToClimbing") return end
		EndScript
	End
	TransitionState = Trans_RunningToClimbing
		Animation = Transition
			AnimationName = MUShelob_WALA
			AnimationMode = ONCE
		End
	End
	AnimationState						= RAPPELLING
		StateName						= STATE_Rappelling
		Animation						= Rapelling
			AnimationName				= MUShelob_WALD
			AnimationMode				= LOOP
			AnimationBlendTime			= 15
		End
		BeginScript;script to set transition from moving
			Prev = CurDrawablePrevAnimationState()
			if Prev == "STATE_Running"  then CurDrawableSetTransitionAnimState("Trans_RunningToRappelling") return end
		EndScript
	End
	TransitionState = Trans_RunningToRappelling
		Animation = Transition
			AnimationName = MUShelob_WALD // same as rappelling
			AnimationMode = ONCE
		End
	End
	TransitionState = Trans_ClimbingToRunning
		Animation = Transition
			AnimationName = MUShelob_WALC // up and over
			AnimationMode = ONCE
		End
	End
	TransitionState = Trans_RappellingToRunning
		Animation = Transition
			AnimationName = MUShelob_WALE // landing
			AnimationMode = ONCE
		End
	End


		; -------- STUNNED ANIMS ---------		
		AnimationState        = STUNNED_FLAILING
			Animation           = StunFlail
				AnimationName     = MUShelob_FLYA
				AnimationMode      = LOOP
			End
			Flags               = RANDOMSTART
		End
		
		AnimationState        = STUNNED
			Animation           = Stun
				AnimationName     = MUShelob_LNDA
				AnimationMode      = ONCE
			End
		End
		
		AnimationState        = STUNNED_STANDING_UP
			Animation           = Stun
				AnimationName     = MUShelob_GTPA
				AnimationMode      = ONCE
			End
		End
		
		; -------- DYING ANIMS ---------		
		AnimationState				= DYING
			Animation				= DIEA
				AnimationName		= MUShelob_DIEA
				AnimationMode		= ONCE
			End
		End
	
	
		AnimationState			= SPECIAL_WEAPON_TWO					; InstillTerror
			Animation
				AnimationName	= MUShelob_ATKC
				AnimationMode	= ONCE
			End
			FXEvent				= Frame:10 Name:FX_FearBlast
		End
			
		; ------- MOVING ANIMS ---------	
		AnimationState				= TURN_LEFT
			StateName				= Turn
			Animation				= Walk
				AnimationName		= MUShelob_TRNL 
				AnimationMode		= LOOP
			End
		End
		
		AnimationState				= TURN_RIGHT
			StateName				= Turn
			Animation				= Walk
				AnimationName		= MUShelob_TRNR 
				AnimationMode		= LOOP
			End
		End

		AnimationState				= MOVING BACKING_UP
			Animation				= BAKA
				AnimationName		= MUShelob_BAKA
				AnimationMode		= LOOP
			End
			Flags					= RANDOMSTART
		End

		AnimationState				=	MOVING ATTACKING
			Animation				=	RUNA
				AnimationName		=	MUShelob_RUNA
				AnimationMode		=	LOOP
				Distance			=	21
			End
		End
		AnimationState				=	MOVING 
			StateName				= STATE_Running
			Animation				=	WLKA
				AnimationName		=	MUShelob_WLKA
				AnimationMode		=	LOOP
				Distance			=	21
			End
			
			BeginScript;script to set transition from moving
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Climbing"  then CurDrawableSetTransitionAnimState("Trans_ClimbingToRunning") return end
				if Prev == "STATE_Rappelling"  then CurDrawableSetTransitionAnimState("Trans_RappellingToRunning") return end
			EndScript

			
		End
		
		; ------- TUNNELLING
		AnimationState				= UNPACKING PACKING_TYPE_3
			Animation
				AnimationName		= MUShelob_TUNA
				AnimationMode		= ONCE
			End
			FXEvent	= Frame:15	Name: FX_ShelobDigA
		End
		AnimationState				= PACKING PACKING_TYPE_3
			Animation
				AnimationName		= MUShelob_TUNB
				AnimationMode		= ONCE
			End
			FXEvent	= Frame:10	Name: FX_ShelobDigB
		End
		
		; poisoned stinger
		AnimationState				= SPECIAL_WEAPON_ONE
			Animation
				AnimationName			= MUShelob_SPCA
				AnimationMode			= ONCE
			End
		End

		; ------- ATTACKING ANIMS ---------	
		AnimationState				= FIRING_OR_PREATTACK_A
			Animation				= ATKA
				AnimationName		= MUShelob_ATKA
				AnimationMode		= ONCE
			End
		End
				
		AnimationState				=	SELECTED
			Animation           = IDLA
				AnimationName     = MUShelob_IDLA
				AnimationMode     = ONCE
				AnimationPriority = 1
			End
			Animation           = IDLA
				AnimationName     = MUShelob_IDLA
				AnimationMode     = ONCE
				AnimationPriority = 1
			End
			Animation				=	AtAttention
				AnimationName		=	MUShelob_ATNA
				AnimationMode		=	ONCE
			End
			Flags					= RESTART_ANIM_WHEN_COMPLETE
		End
		
		; ------- HIT REACTION ANIMS ---------	
		AnimationState = HIT_REACTION HIT_LEVEL_1
			Animation = Hit_Level_1_a
				AnimationName = MUShelob_HITA
				AnimationMode = ONCE
			End
		End
	End
End
End

;/////////////////////////////////////Karsh/////////////////////////////////////////////

Object AngmarKarsh

	WeaponSet
		Conditions          = None
		Weapon              = PRIMARY		MorgomirMorgulBlade
		AutoChooseSources	= TERTIARY		NONE
	End
End

;///////////////////////////////////BLACK SPIDER//////////////////////////////////////////////////

;---GFX---------
Object WildSpiderling

Scale = 1.4

	AddModule
	Behavior = GrantUpgradeCreate ModuleTag_12344574365
		UpgradeToGrant = Upgrade_GandalfWhite  ;
	End 
	End
	AddModule
	Behavior = SubObjectsUpgrade Costume_237357345
		TriggeredBy		= Upgrade_GandalfWhite 
		UpgradeTexture	= mugntspdr.tga 0 mugntspdrbannercarrier.tga 
				RecolorHouse	= No
	End
	End

End

;----STATS----

Armor WildSpiderlingArmor
  Armor = DEFAULT         	15%   	; 100%	originally 100%
  Armor = SLASH           	15%   	; 100%	originally 50%
  Armor = PIERCE           	 15%   	; 100%	originally 100%		RotWK originally 75%
  Armor = SPECIALIST      	15%   	; 200%	originally 200%
  Armor = CRUSH          	  1%   	; 100%
  Armor = SIEGE           	1%   	;
  Armor = FLAME           	15%   	;  50%
  Armor = FROST          	15%   ;
  Armor = MAGIC           	5%   	;
  Armor = HERO            	15%   	; 100%
  Armor = HERO_RANGED     	15%   	; 200%
  Armor = CAVALRY	  	1% 	; 	Originally 100%
  Armor = STRUCTURAL	  	1%	;	originally 100%
  FlankedPenalty 	       = 50%     
End

Armor WildSpiderHoleSpiderlingArmor
  Armor = DEFAULT         	15%   	; 100%	originally 100%
  Armor = SLASH           	15%   	; 100%	originally 50%
  Armor = PIERCE           	 15%   	; 100%	originally 100%		RotWK originally 75%
  Armor = SPECIALIST      	15%   	; 200%	originally 200%
  Armor = CRUSH          	  1%   	; 100%
  Armor = SIEGE           	1%   	;
  Armor = FLAME           	15%   	;  50%
  Armor = FROST          	15%   ;
  Armor = MAGIC           	5%   	;
  Armor = HERO            	15%   	; 100%
  Armor = HERO_RANGED     	15%   	; 200%
  Armor = CAVALRY	  	1% 	; 	Originally 100%
  Armor = STRUCTURAL	  	1%	;	originally 100%
  FlankedPenalty 	       = 50%     
End

Weapon WildSpiderlingMandibles				; BALANCE Wild Spiderling Weapon 
  LeechRangeWeapon      = Yes
  AttackRange           = 25.0
  MeleeWeapon           = Yes
  DelayBetweenShots     = 1666				; time between shots, msec
  PreAttackDelay        = 900				; 300 is mace swing delay time before contact with target.
  PreAttackType         = PER_SHOT 			; Do the delay each time we attack
  FireFX                = FX_SpiderStabHit
  FiringDuration        = 766				; Duration of the mace swing 
  RequireFollowThru		= Yes
  
  DamageNugget						; A basic Nugget that just does damage
    Damage        = ISENGARD_FANATIC_DAMAGE
    Radius        = 0.0
    DelayTime     = 0
    DamageType    = CAVALRY
   ; DamageFXType  = SWORD_SLASH
    DeathType     = NORMAL
    FlankingBonus = 50%
    DamageScalar  = 50% NONE +STRUCTURE		; Balance: Spiderlings are fast and versatile against units so must not be so good against structures
  End
End

///////////////////////////////////////////WIGHT/////////////////////////////////////////////////////////////
;------STATS---
Object BarrowWight
        AddModule BodyModuleTag
Body = ActiveBody BodyModuleTag_new
		MaxHealth 		= 3500  
		MaxHealthDamaged 	= 3000
		BurningDeathBehavior = Yes
		BurningDeathFX       = FX_InfantryBurningFlame
	End
End
End


;------------------------------------------
;///////////////////////////////////////////Werewolf////////////////////////////////////
;------GFX------
FXParticleSystem WerewolfGlow
  System
    Priority = VERY_LOW_OR_ABOVE
    Shader = ALPHA
    ParticleName = EXCloudNazgul.tga
    Lifetime = 30 30
    Size = 50 60
    BurstDelay = 1 1
    BurstCount = 1 1
  End
  Color = DefaultColor
    Color2 = R:106 G:0 B:0 5
    Color3 = R:50 G:0 B:0 30
  End
  Alpha = DefaultAlpha
    Alpha2 = 0.5 0.75 5
    Alpha3 = -0.2 0 30
  End
  Update = DefaultUpdate
    SizeRate = 1 1
    SizeRateDamping = 1 1
    AngleZ = -3 3
    AngularRateZ = -0.01 0.01
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
  End
  EmissionVelocity = OutwardEmissionVelocity
  End
  EmissionVolume = LineEmissionVolume
    StartPoint = X:0 Y:0 Z:25
    EndPoint = X:0 Y:0 Z:15
  End
  Draw = DefaultDraw
  End
End

Object AngmarDireWolf

Scale = 1.1

	AddModule
	Behavior = GrantUpgradeCreate ModuleTag_123455674
		UpgradeToGrant = Upgrade_GandalfWhite  ;
	End 
	End
	AddModule
	Behavior = SubObjectsUpgrade Costume_235674567
		TriggeredBy		= Upgrade_GandalfWhite 
		UpgradeTexture	= kudirewolf.tga 0 kudirewolfbnr.tga 
				RecolorHouse	= No
	End
	End

ReplaceModule ModuleTag_01
	Draw = W3DHordeModelDraw ModuleTag_01_new3673576
	  OkToChangeModelColor = Yes
		DefaultModelConditionState
			Model					= KUDirewolf_SKN
			Skeleton				= KUDirewolf_SKL
		ParticleSysBone = None WerewolfGlow FollowBone:Yes
		End


		IdleAnimationState
			Animation				= IDLA
				AnimationName		= KUDirewolf_IDLA
				AnimationMode		= ONCE
			End
		End
		; -------------- STUNNED ANIMS ----------------
		AnimationState				= PASSENGER
			Animation			= Grabbed
				AnimationName		= KUDireWolf_GBDA
				AnimationMode		= LOOP
			End
		End
	
		AnimationState				= FREEFALL
			Animation			= freefall
				AnimationName		= KUDireWolf_FLYA
				AnimationMode		= LOOP
				AnimationBlendTime	= 10
			End
		End
		
		AnimationState				=	DYING BURNINGDEATH
			Animation
				AnimationName		=	KUDireWolf_DIEA
				AnimationMode		=	ONCE
				AnimationBlendTime	=	10
			End
		End

		AnimationState				=	DYING SPLATTED
			Animation			=	splatted
				AnimationName		=	KUDireWolf_LNDA
				AnimationMode		=	ONCE
			End
		End
		
		AnimationState				=	STUNNED_FLAILING 
			Animation			=	JustDie
				AnimationName       	=	KUDireWolf_FLYA
				AnimationMode       	=	LOOP
			End
		End

		AnimationState				=	DYING
			Animation			
				AnimationName		=	KUDireWolf_DIEA
				AnimationMode		=	ONCE
			End
			Animation			
				AnimationName		=	KUDireWolf_DIEB
				AnimationMode		=	ONCE
			End
		End		

		AnimationState				=	BURNINGDEATH
			Animation
				AnimationName       	=	KUDireWolf_MFDA
				AnimationMode       	=	LOOP
				Distance		=	50
			End
		End

	AnimationState			= STUNNED_FLAILING
		Animation
			AnimationName   = KUDireWolf_FLYA
			AnimationMode   = LOOP
			AnimationSpeedFactorRange	= 0.4 0.6
		End
	End


		AnimationState				=	STUNNED 
			Animation			=	Land
				AnimationName       	=	KUDireWolf_LNDA
				AnimationMode       	=	ONCE
			End
		End

		AnimationState				=	STUNNED_STANDING_UP
			Animation			=	StandUp
				AnimationName       	=	KUDireWolf_GTPA
				AnimationMode       	=	ONCE
			End
		End
		
		; -------------- MOVING ANIMS ---------------
		AnimationState				=	TURN_LEFT_HIGH_SPEED
			Animation			=	MTurnLeft
				AnimationName		=	KUDireWolf_TNL1
				AnimationMode		=	LOOP
			End
		End

		AnimationState				=	TURN_RIGHT_HIGH_SPEED
			Animation			=	MTurnRight
				AnimationName		=	KUDireWolf_TNR1
				AnimationMode		=	LOOP
			End
		End
		
		AnimationState				=	TURN_LEFT  
			Animation			=	TurnRight
				AnimationName		=	KUDireWolf_TRNL
				AnimationMode		=	LOOP
				AnimationSpeedFactorRange = 	2.0 2.0
			End
		End

		AnimationState				=	TURN_RIGHT 
			Animation			=	TurnRight
				AnimationName		=	KUDireWolf_TRNR
				AnimationMode		=	LOOP
				AnimationSpeedFactorRange = 	2.0 2.0
			End
		End

		AnimationState				=	MOVING ACCELERATE 
			Animation			=	Accelerate
				AnimationName		=	KUDireWolf_ACCL
				AnimationMode		=	ONCE
			End
            ParticleSysBone				= 	None GenericSiegeTrailDust
		End
	
		AnimationState				=	MOVING DECELERATE
			Animation			=	Decelerate
				AnimationName		=	KUDireWolf_DECL
				AnimationMode		=	ONCE
			End
            ;ParticleSysBone				= 	None GenericSiegeTrailDust
		End
		
		AnimationState				=	MOVING BACKING_UP
			Animation			=	BackingUp
				AnimationName		=	KUDireWolf_BAKA
				AnimationMode		=	LOOP
			End
		End
		
		AnimationState				=	MOVING
			ShareAnimation			=	Yes
			Animation			=	RunA
				AnimationName		=	KUDireWolf_RUNA
				AnimationMode		=	LOOP
			End
			;ParticleSysBone		=	None CalvaryDustTrails  
			Flags               = RANDOMSTART
		End
		
		; ----------- ATTACKING ANIMS --------------		
		AnimationState				=	BETWEEN_FIRING_SHOTS_A
			Animation			=	BetweenFiringShots
				AnimationName		=	KUDireWolf_IDLA
				AnimationMode		=	ONCE
				AnimationBlendTime	=   	10
			End
		End

		AnimationState				=	FIRING_OR_PREATTACK_A
			Animation			
				AnimationName		=	KUDireWolf_ATKB
				AnimationMode		=	LOOP
;				UseWeaponTiming		=	Yes
				AnimationBlendTime  	=	10
			End
		End
		
		AnimationState				=	ATTACKING
			Animation			
				AnimationName		=	KUDireWolf_ATKA
				AnimationMode		=	LOOP
				AnimationBlendTime	=   	10
			End
			Animation			
				AnimationName		=	KUDireWolf_ATKB
				AnimationMode		=	LOOP
				UseWeaponTiming		=	Yes
				AnimationBlendTime  	=	10
			End
		End

		; ----------- WAR CHANT ANIMS -------------
		AnimationState = WAR_CHANT
			Animation = Chant
				AnimationName = KUDireWolf_TNTA
				AnimationMode = LOOP
			End
		End

		; ----------- EMOTION ANIMS ---------------
		AnimationState				= EMOTION_TAUNTING
			Animation			= TNTA
				AnimationName		= KUDireWolf_TNTA
				AnimationMode		= LOOP
			End
		End
		
		AnimationState				= EMOTION_CELEBRATING
			Animation                   	= CHRA
				AnimationName		= KUDireWolf_TNTA
				AnimationMode		= LOOP
			End
		End
		
		; ----------- IDLE ANIMS ---------------
		AnimationState				= EMOTION_ALERT
			StateName			= STATE_Ready 
			Animation			= ALERT
				AnimationName		= KUDireWolf_IDLA
				AnimationMode		= ONCE
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Selected" then CurDrawableSetTransitionAnimState("Selected_to_Ready") end
			EndScript	
		End
		
		; ----------- SELECTED ANIMS --------------
		AnimationState				= SELECTED
			SimilarRestart			= Yes
			Animation			= AtAttention
				AnimationName		= KUDireWolf_ATNB
				AnimationMode		= LOOP
			End
			StateName			= Selected
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Idle" then CurDrawableSetTransitionAnimState("Idle_to_Selected") end
				if Prev == "STATE_Ready" then CurDrawableSetTransitionAnimState("Ready_to_Selected") end
			EndScript
		End

		IdleAnimationState
			StateName				= STATE_Idle
			Animation				= IDLB
				AnimationName       = KUDireWolf_IDLB
				AnimationMode       = ONCE
				AnimationPriority   = 20
				AnimationSpeedFactorRange = 0.9 1.1
				AnimationBlendTime	= 15
			End
			Animation				= IDLC
				AnimationName       = KUDireWolf_IDLC
				AnimationMode       = ONCE
				AnimationPriority   = 5
				AnimationSpeedFactorRange = 0.9 1.1
				AnimationBlendTime	= 15
			End
			Animation				= IDLD
				AnimationName       = KUDireWolf_IDLD
				AnimationMode       = ONCE
				AnimationPriority   = 1
				AnimationSpeedFactorRange = 0.9 1.1
				AnimationBlendTime	= 15
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Selected" then CurDrawableSetTransitionAnimState("Selected_to_Idle") end
			EndScript
		End

		;------------ TRANSITION ANIMS ----------------
		TransitionState       = Selected_to_Idle
			Animation           		= ATNE
				AnimationName		=	KUDireWolf_ATNC
				AnimationMode		=	ONCE
				AnimationSpeedFactorRange = 0.7 1.3
			End
		End
		
		TransitionState       = Idle_to_Selected
			Animation           		= ATND
				AnimationName     	= KUDireWolf_ATNA
				AnimationMode   	=	ONCE
				AnimationSpeedFactorRange = 0.7 1.3
			End
		End

	End
End
End

;-----STATS------------------------
Weapon DireWolfWeapon
  LeechRangeWeapon = Yes
  AttackRange           = STANDARD_MELEE_ATTACK_RANGE
  MeleeWeapon           = Yes
  PreAttackDelay		= ANGMAR_DIREWOLF_SWORD_PREATTACKDELAY
  DelayBetweenShots     = ANGMAR_DIREWOLF_SWORD_DELAYBETWEENSHOTS            ; time between shots, msec
  FiringDuration		= ANGMAR_DIREWOLF_SWORD_FIRINGDURATION
  FireFX                = FX_WargRiderlessAttack

  DamageNugget                        ; A basic Nugget that just does damage
    Damage        = 200
    Radius        = 0.0
    DelayTime     = 0
    DamageType    = SLASH
    DamageScalar  = 300% NONE +GondorTowerShieldGuard +GondorTowerShieldGuardHorde +RohanSpearmen +RohanSpearmenHorde +ElvenMithlondSentry +ElvenMithlondSentryHorde +DwarvenPhalanx +DwarvenPhalanxHorde  
    DamageScalar  = 300% NONE +MordorEasterling +MordorEasterlingHorde +IsengardPikeman +IsengardPikemanHorde +AngmarHillTrollHorde +AngmarHillTroll +AngmarRhudaurSpearmen +AngmarRhudaurSpearman 
    DamageFXType  = SWORD_SLASH
    DeathType     = NORMAL
    DamageScalar  = 10% ANY +STRUCTURE
  End
End

Object AngmarDireWolf
        AddModule BodyModuleTag
Body = ActiveBody BodyModuleTag_new
		MaxHealth 		= 3000  
		MaxHealthDamaged 	= 2500
		BurningDeathBehavior = Yes
		BurningDeathFX       = FX_InfantryBurningFlame
	End
End
End
;//////////////////////////////////Army of the undead//////////////////////////////////////

FXParticleSystem RingWraithFlare
  System
    Priority = VERY_LOW_OR_ABOVE
    ParticleName = EXexplo01.tga
    Lifetime = 30 30
    Size = 40 50
    BurstDelay = 2 2
    BurstCount = 1 1
  End
  Color = DefaultColor
    Color2 = R:50 G:75 B:75 5
    Color3 = R:0 G:0 B:0 30
  End
  Update = DefaultUpdate
    SizeRateDamping = 0.8 0.7
    AngleZ = -3 3
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    Gravity = 0.03
    VelocityDamping = 1 1
  End
  EmissionVelocity = OutwardEmissionVelocity
  End
  EmissionVolume = LineEmissionVolume
    StartPoint = X:-1 Y:-1 Z:-3
    EndPoint = X:2 Y:2 Z:17
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem RingWraithWindIdle
  System
    Priority = VERY_LOW_OR_ABOVE
    ParticleName = EXFire01.tga
    Lifetime = 50 50
    Size = 15 30
    BurstCount = 0 1
  End
  Color = DefaultColor
    Color2 = R:31 G:43 B:44 15
    Color3 = R:0 G:0 B:0 50
  End
  Update = DefaultUpdate
    SizeRate = 0.1 0.1
    SizeRateDamping = 0.97 0.99
    AngleZ = -5 5
    AngularRateZ = -0.05 0.05
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    Gravity = -0.008
    VelocityDamping = 0.95 0.9
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = -0.4 0.4
    Y = -0.4 0.4
    Z = 0.4 0.4
  End
  EmissionVolume = CylinderEmissionVolume
    Radius = 8
    Length = 24
  End
  Draw = DefaultDraw
  End
End

Object GondorFighter

	AddModule
	Behavior = GrantUpgradeCreate ModuleTag_123456743657
		UpgradeToGrant = Upgrade_GandalfWhite  ;
	End 
	End
	AddModule
	Behavior = SubObjectsUpgrade Costume_23674567
		TriggeredBy		= Upgrade_GandalfWhite 
		UpgradeTexture	= Gumanatarms.tga 0 ruothbrkrsa.tga ;Gunumnrean_l.tga
		UpgradeTexture	= Gumaarmsshield.tga 0 ruothbrkrsa.tga
				RecolorHouse	= No
	End
	End

	LocomotorSet
		Locomotor = HumanLocomotor
		Condition = SET_NORMAL 
		Speed     = 25
	End

ReplaceModule ModuleTag_01
Draw = W3DHordeModelDraw ModuleTag_01_new365746
		OkToChangeModelColor = Yes	
		StaticModelLODMode = Yes

//================ MODELS =================================================================
		DefaultModelConditionState
			Model							= GUMAArms_SKN
			Skeleton						= GUMAArms_SKL
			ParticleSysBone     = None RingWraithFlare
			ParticleSysBone     = None RingWraithWindIdle
		End

//=============== ANIMATIONS ===============================================================

//======= FALLING & FLYING

		AnimationState						= PASSENGER
			Animation						= Grabbed
				AnimationName				= GUMAArms_FLLA
				AnimationMode				= LOOP
			End
		End
		
		AnimationState        				= THROWN_PROJECTILE
			Animation           			= FlyA
				AnimationName      	 		= GUMAARMS_FLYA
				AnimationMode       		= LOOP
			End
			Animation           			= FlyB
				AnimationName       		= GUMAARMS_FLYB
				AnimationMode       		= LOOP
			End
			Animation           			= FlyC
				AnimationName       		= GUMAARMS_FLYC
				AnimationMode       		= LOOP
			End
			Animation           			= FlyD
				AnimationName       		= GUMAARMS_FLYD
				AnimationMode       		= LOOP
			End
			Flags               			= RANDOMSTART
		End
		
		AnimationState						= FREEFALL
			Animation						= Falling
				AnimationName				= GUMAArms_FLYD
				AnimationMode				= LOOP
				AnimationBlendTime			= 10
			End
			Animation						= Falling
				AnimationName				= GUMAArms_FLYC
				AnimationMode				= LOOP
				AnimationBlendTime			= 10
				AnimationSpeedFactorRange	= 0.5	0.5
			End
		End

		
		
		AnimationState        				= STUNNED_FLAILING 
			Animation           			= FlyA
				AnimationName       		= GUMAARMS_FLYA
				AnimationMode       		= LOOP
				AnimationSpeedFactorRange	= 0.4 0.6
			End
			Animation           			= FlyB
				AnimationName       		= GUMAARMS_FLYB
				AnimationMode       		= LOOP
				AnimationSpeedFactorRange	= 0.4 0.6
			End
			Animation           			= FlyC
				AnimationName       		= GUMAARMS_FLYC
				AnimationMode       		= LOOP
				AnimationSpeedFactorRange	= 0.4 0.6
			End
			Animation           			= FlyD
				AnimationName      		 	= GUMAARMS_FLYD
				AnimationMode       		= LOOP
				AnimationSpeedFactorRange	= 0.4 0.6
			End
			Flags               			= RANDOMSTART
		End

		AnimationState						= DYING BURNINGDEATH
			Animation
				AnimationName				= GUManMocap_DIEB
				AnimationMode				= ONCE
				AnimationBlendTime			= 10
			End
			Animation
				AnimationName				= GUManMocap_DIEC
				AnimationMode				= ONCE
				AnimationBlendTime			= 10
			End
			Animation
				AnimationName				= GUManMocap_DIED
				AnimationMode				= ONCE
				AnimationBlendTime			= 10
			End
			Animation
				AnimationName				= GUManMocap_DIEE
				AnimationMode				= ONCE
				AnimationBlendTime			= 10
			End
		End
		AnimationState 						= DYING SPLATTED
			Animation 						= Splatted_On_Ground
				AnimationName 				= GUMAARMS_LNDA
				AnimationMode 				= ONCE
			End
			EnteringStateFX					= FX_OrcHitGround
		End
		AnimationState						= DYING AFLAME
			Animation						= MFDA
				AnimationName				= GUManMocap_MFDA
				AnimationMode				= LOOP
			End
		End
		AnimationState						= DYING
			//Animation						= DIEA
			
			//	AnimationName				= GUManMocap_DIEA
			//	AnimationMode				= ONCE
			//End
			Animation						= DIEB
				AnimationName				= GUManMocap_DIEB
				AnimationMode				= ONCE
			End
			Animation						= DIEC
				AnimationName				= GUManMocap_DIEC
				AnimationMode				= ONCE
			End
			Animation						= DIED
				AnimationName				= GUManMocap_DIED
				AnimationMode				= ONCE
			End
			Animation						= DIEE
				AnimationName				= GUManMocap_DIEE
				AnimationMode				= ONCE
			End
		End

		AnimationState						= BURNINGDEATH
			Animation
				AnimationName				= GUManMocap_MFDA
				AnimationMode				= LOOP
				Distance					= 50
			End
		End

		AnimationState						= PARALYZED
			Animation
				AnimationName				= GUManMocap_IDLB
				AnimationMode				= LOOP
			End
		End

//======= LANDING & STANDING

		AnimationState						= STUNNED_STANDING_UP
			Animation						= GTPA
				AnimationName				= GUMAArms_GTPA
				AnimationMode				= ONCE
				AnimationSpeedFactorRange	= 2.0 2.0
			End
			Animation						= GTPB
				AnimationName				= GUMAArms_GTPD
				AnimationMode				= ONCE
				AnimationSpeedFactorRange	= 2.0 2.0
			End
		End


	
		AnimationState			=	 STUNNED
			Animation			=	 Slatted_On_Ground
			AnimationName 				= GUMAARMS_LNDA
				AnimationMode 				= ONCE
			End
			EnteringStateFX					= FX_OrcHitGround

       End 
       
		AnimationState        = MOVING FIRING_OR_PREATTACK_A
			ShareAnimation		= Yes
			Animation           = RunAndFire
				AnimationName       = GUManMocap_ATRA
				AnimationMode       = LOOP
			End
			Flags               = RANDOMSTART  
		End
		
//====== TERROR
		
		AnimationState						= MOVING EMOTION_TERROR EMOTION_LOOK_TO_SKY
			//@@@KM Add distance
			Animation					= TerrorFromTheSky
				AnimationName			= GUManMocap_RUND
				AnimationMode			= LOOP
			End
			Animation					= TerrorFromTheSky
				AnimationName			= GUManMocap_RUNE
				AnimationMode			= LOOP
			End
			Flags = RANDOMSTART
		End
		AnimationState						= MOVING EMOTION_TERROR
			//@@@KM Add distance
			Animation						= TerrorFromTheSky
				AnimationName				= GUManMocap_RUND
				AnimationMode				= ONCE
			End
			Animation						= TerrorFromTheSky
				AnimationName				= GUManMocap_RUNE
				AnimationMode				= ONCE
			End
			Flags							= RESTART_ANIM_WHEN_COMPLETE
		End
		
//======= BACK UP
		
		AnimationState						= MOVING BACKING_UP
			//@@@KM Add distance
			Animation						= BAKA
				AnimationName				= GUManMocap_BAKA
				AnimationMode				= LOOP
			End
			Animation						= BAKB
				AnimationName				= GUManMocap_BAKB
				AnimationMode				= LOOP
			End
			Animation						= BAKC
				AnimationName				= GUManMocap_BAKC
				AnimationMode				= LOOP
			End
			Flags = RANDOMSTART
		End

		AnimationState						= MOVING PANICKING
			//@@@KM - Add Distance
			Animation						= MFDA
				AnimationName				= GUManMocap_MFDA
				AnimationMode				= LOOP
			End
			Flags							= RANDOMSTART
			//ParticleSysBone				= None InfantryDustTrails
		End
		
		AnimationState						= MOVING ATTACKING
			ShareAnimation					= Yes//
			Animation						= RUNA
				AnimationName				= GUManMocap_RUNA
				AnimationMode				= LOOP
				Distance					= 25
			End
			Flags							= RANDOMSTART
			//ParticleSysBone				= None InfantryDustTrails
		End
		
		AnimationState				= MOVING ALTERNATE_FORMATION
			Animation
				AnimationName				= GUMAArms_SPCA
				AnimationMode				= LOOP
				Distance					= 20
			End
			Flags							= RANDOMSTART
		End

		
		AnimationState						= MOVING
			//@@@KM - Add Distance
			ShareAnimation					= Yes//
			Animation						= RUNB
				AnimationName				= GUManMocap_RUNB
				AnimationMode				= LOOP
				Distance					= 30
			End
			Animation						= RUNC
				AnimationName				= GUManMocap_RUNC
				AnimationMode				= LOOP
				Distance					= 30
			End
			Flags							= RANDOMSTART
			//ParticleSysBone				= None InfantryDustTrails
		End
//======= UNCONTROLLABLY AFRAID
	// This is before Attacking so it overrides it.  Normal fear is below so you don't go to little-fear in between swings.
		AnimationState						= EMOTION_UNCONTROLLABLY_AFRAID
			Animation						= FERA
				AnimationName				= GUManMocap_FERA
				AnimationMode				= LOOP
			End 
			Animation						= FERB
				AnimationName				= GUManMocap_FERB
				AnimationMode				= LOOP
			End
			Animation						= FERC
				AnimationName				= GUManMocap_FERC
				AnimationMode				= LOOP
			End
			Animation						= FERD
				AnimationName				= GUManMocap_FERD
				AnimationMode				= LOOP
			End
			Animation						= FERE
				AnimationName				= GUManMocap_FERE
				AnimationMode				= LOOP
			End
			Animation						= FERF
				AnimationName				= GUManMocap_FERF
				AnimationMode				= LOOP
			End
		End
//---------------------- ATTACKING ----------------------------------------------------------------
		AnimationState						= FIRING_OR_PREATTACK_A
			Animation						= ATA1
				AnimationName				= GUManMocap_ATKA
				AnimationMode				= ONCE
				UseWeaponTiming				= Yes
			End
			//ParticleSysBone				= None MeleeDust
		End
		
		;AnimationState						= ATTACKING
		;	Animation						= ALERT_1
		;		AnimationName				= GUManMocap_IDLA
		;		AnimationMode				= LOOP
		;	End
		;End
//----------------- HIT REACTIONS -------------------------------------------------------------------------

;		AnimationState						= HIT_REACTION
			//Animation						= HITA
			//	AnimationName				= GUManMocap_HITA
			//	AnimationMode				= ONCE
			//End
;			Animation						= HITB
;				AnimationName				= GUManMocap_HITB
;				AnimationMode				= ONCE
;			End
;		End

//----------------- EMOTIONS ----------------------------------------------------------------
//======= APPREHENSIVE

		AnimationState						= EMOTION_ALERT EMOTION_AFRAID
			Animation						= APPA
				AnimationName				= GUManMocap_APPA
				AnimationMode				= ONCE
			End
			Animation						= APPB
				AnimationName				= GUManMocap_APPB
				AnimationMode				= ONCE
			End
			Flags							= RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
		End
		
//======= AFRAID

		AnimationState						= EMOTION_AFRAID
			Animation						= FERA
				AnimationName				= GUManMocap_FERA
				AnimationMode				= LOOP
			End 
			Animation						= FERB
				AnimationName				= GUManMocap_FERB
				AnimationMode				= LOOP
			End
			Animation						= FERC
				AnimationName				= GUManMocap_FERC
				AnimationMode				= LOOP
			End
			Animation						= FERD
				AnimationName				= GUManMocap_FERD
				AnimationMode				= LOOP
			End
			Animation						= FERE
				AnimationName				= GUManMocap_FERE
				AnimationMode				= LOOP
			End
			Animation						= FERF
				AnimationName				= GUManMocap_FERF
				AnimationMode				= LOOP
			End
			Flags							= RANDOMSTART
		End
		
//======== POINTING

		AnimationState						= EMOTION_POINTING
			Animation						= Pointing1
				AnimationName				= GUManMocap_RCTA
				AnimationMode				= LOOP
			End
			Flags							= RANDOMSTART
		End
		
//======= TAUNTING

		AnimationState						= EMOTION_TAUNTING
			Animation						= Taunting1
				AnimationName				= GUManMocap_TNTA
				AnimationMode				= ONCE
			End
			Animation						= Taunting2
				AnimationName				= GUManMocap_TNTB
				AnimationMode				= ONCE
			End
			Animation						= Taunting3
				AnimationName				= GUManMocap_TNTC
				AnimationMode				= ONCE
			End
			Animation						= Taunting4
				AnimationName				= GUManMocap_IDLC
				AnimationMode				= ONCE
			End
			Animation						= Taunting5
				AnimationName				= GUManMocap_IDLA
				AnimationMode				= ONCE
			End
			Animation						= Taunting6
				AnimationName				= GUManMocap_IDLH
				AnimationMode				= ONCE
			End
			Flags							= RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
		End

//======= CELEBRATING

		AnimationState						= EMOTION_CELEBRATING
			Animation						= CHRB
				AnimationName				= GUManMocap_CHRB
				AnimationMode				= ONCE
			End
			Animation						= CHRC
				AnimationName				= GUManMocap_CHRC
				AnimationMode				= ONCE
			End
			Animation						= IDLD
				AnimationName				= GUManMocap_IDLD
				AnimationMode				= ONCE
			End
			Flags							=	RESTART_ANIM_WHEN_COMPLETE
		End

//----------------- ALERT STATE ---------------------------------------------------------------------------

		AnimationState						= ATTACKING
			Animation						= ALERT_1
				AnimationName				= GUManMocap_IDLA
				AnimationMode				= LOOP
			End
		End	

		AnimationState						= EMOTION_ALERT
			Animation						= ALERT_1
				AnimationName				= GUManMocap_IDLA
				AnimationMode				= LOOP//ONCE
				AnimationPriority			= 10
			End
			Flags							= RESTART_ANIM_WHEN_COMPLETE // acts like an idle animation & keeps running the animations.
		End
		
		AnimationState						= RAISING_FLAG
			Animation						= CHRB
				AnimationName				= GUManMocap_CHRB
				AnimationMode				= ONCE
				AnimationSpeedFactorRange	= 0.9 1.1
			End
			Animation						= CHRC
				AnimationName				= GUManMocap_CHRC
				AnimationMode				= ONCE
				AnimationSpeedFactorRange	= 0.9 1.1
			End
			Flags							=	RESTART_ANIM_WHEN_COMPLETE
		End
		
//----------------- SELECTED STATES -----------------------------------------------------------------------
		AnimationState        = SELECTED
			StateName           = STATE_Selected
			Animation           = ATNB
				AnimationName     = GUManMocap_ATNB
				AnimationMode     = LOOP
			End
			
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Idle" 
				then 
					CurDrawableSetTransitionAnimState("TRANS_IdleToSelected") 
				end
				if CurDrawableModelcondition("ATTACKING")
				then
					return "IDLA"
				else
					return "ATNA"
				end
			EndScript
			
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Idle" then CurDrawableSetTransitionAnimState("TRANS_IdleToSelected") end
			EndScript
		End
		
//----------------- IDLE STATES ---------------------------------------------------------------------------
		AnimationState				= WEAPONSET_PLAYER_UPGRADE
			StateName				= STATE_Idle
			Animation				= IDLI
				AnimationName       = GUManMocap_IDLH
				AnimationMode       = ONCE
				AnimationSpeedFactorRange = 0.9 1.1
			End
			Animation				= IDLD
				AnimationName       = GUManMocap_IDLD
				AnimationMode       = ONCE
				AnimationSpeedFactorRange = 0.9 1.1
			End
			Animation				= IDLH
				AnimationName       = GUManMocap_IDLH
				AnimationMode       = ONCE
				AnimationSpeedFactorRange = 0.9 1.1
			End
			Animation				= CHRB
				AnimationName       = GUManMocap_CHRB
				AnimationMode       = ONCE
				AnimationSpeedFactorRange = 0.9 1.1
			End
			Animation				= CHRC
				AnimationName       = GUManMocap_CHRC
				AnimationMode       = ONCE
				AnimationSpeedFactorRange = 0.9 1.1
			End
			Flags					= RESTART_ANIM_WHEN_COMPLETE			
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Selected" then CurDrawableSetTransitionAnimState("TRANS_SelectedToIdle") end
			EndScript
		End		
		AnimationState				= USER_3
			StateName				= STATE_User_3
			Animation				= GUARD_STANCE
				AnimationName		= GUManMocap_IDLA
				AnimationMode		= LOOP
			End
		End
		IdleAnimationState
			StateName				= STATE_Idle
			Animation				= IDLB
				AnimationName       = GUManMocap_IDLB
				AnimationMode       = ONCE
				AnimationPriority   = 20
				AnimationSpeedFactorRange = 0.9 1.1
				AnimationBlendTime	= 15
			End
			Animation				= IDLF
				AnimationName       = GUManMocap_IDLF
				AnimationMode       = ONCE
				AnimationPriority   = 1
				AnimationSpeedFactorRange = 0.9 1.1
				AnimationBlendTime	= 15
			End
			Animation				= IDLG
				AnimationName       = GUManMocap_IDLG
				AnimationMode       = ONCE
				AnimationPriority   = 1
				AnimationSpeedFactorRange = 0.9 1.1
				AnimationBlendTime	= 15
			End
			Animation				= IDLJ
				AnimationName       = GUManMocap_IDLJ
				AnimationMode       = ONCE
				AnimationPriority   = 1
				AnimationSpeedFactorRange = 0.9 1.1
				AnimationBlendTime	= 15
			End
			Animation				= IDLK
				AnimationName       = GUManMocap_IDLK
				AnimationMode       = ONCE
				AnimationPriority   = 1
				AnimationSpeedFactorRange = 0.9 1.1
				AnimationBlendTime	= 15
			End
			Animation				= IDLL
				AnimationName       = GUManMocap_IDLL
				AnimationMode       = ONCE
				AnimationPriority   = 1
				AnimationSpeedFactorRange = 0.9 1.1
				AnimationBlendTime	= 15
			End
			Animation				= IDLN
				AnimationName       = GUManMocap_IDLN
				AnimationMode       = ONCE
				AnimationPriority   = 1
				AnimationSpeedFactorRange = 0.9 1.1
				AnimationBlendTime	= 15
			End
			Animation				= IDLO
				AnimationName       = GUManMocap_IDLO
				AnimationMode       = ONCE
				AnimationPriority   = 1
				AnimationSpeedFactorRange = 0.9 1.1
				AnimationBlendTime	= 15
			End
			Animation				= IDLP
				AnimationName       = GUManMocap_IDLP
				AnimationMode       = ONCE
				AnimationPriority   = 1
				AnimationSpeedFactorRange = 0.9 1.1
				AnimationBlendTime	= 15
			End		
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Selected" then CurDrawableSetTransitionAnimState("TRANS_SelectedToIdle") end
			EndScript
		End
//--------------- TRANSITIONS ---------------------------------------------------------------------------
		TransitionState       = TRANS_TO_USER_1
			Animation
				AnimationName     = GUManMocap_RCTA
				AnimationMode     = ONCE
			End
		End
		TransitionState       = TRANS_IdleToSelected
			Animation           = ATNA
				AnimationName     = GUManMocap_ATNA
				AnimationMode     = ONCE
				AnimationSpeedFactorRange = 0.9 1.0
				
			End
		End
		TransitionState		= TRANS_SelectedToIdle
			Animation			= ATND
				AnimationName	= GUManMocap_ATND
				AnimationMode	= ONCE
				AnimationSpeedFactorRange = 0.9 1.0
			End
		End
	End
End
End
;///////////////////////////////////////////////GHOSTKING\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\

FXParticleSystem RingWraithFlare
  System
    Priority = VERY_LOW_OR_ABOVE
    ParticleName = EXexplo01.tga
    Lifetime = 30 30
    Size = 40 50
    BurstDelay = 2 2
    BurstCount = 1 1
  End
  Color = DefaultColor
    Color2 = R:50 G:75 B:75 5
    Color3 = R:0 G:0 B:0 30
  End
  Update = DefaultUpdate
    SizeRateDamping = 0.8 0.7
    AngleZ = -3 3
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    Gravity = 0.03
    VelocityDamping = 1 1
  End
  EmissionVelocity = OutwardEmissionVelocity
  End
  EmissionVolume = LineEmissionVolume
    StartPoint = X:-1 Y:-1 Z:-3
    EndPoint = X:2 Y:2 Z:17
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem RingWraithWindIdle
  System
    Priority = VERY_LOW_OR_ABOVE
    ParticleName = EXFire01.tga
    Lifetime = 50 50
    Size = 15 30
    BurstCount = 0 1
  End
  Color = DefaultColor
    Color2 = R:31 G:43 B:44 15
    Color3 = R:0 G:0 B:0 50
  End
  Update = DefaultUpdate
    SizeRate = 0.1 0.1
    SizeRateDamping = 0.97 0.99
    AngleZ = -5 5
    AngularRateZ = -0.05 0.05
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    Gravity = -0.008
    VelocityDamping = 0.95 0.9
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = -0.4 0.4
    Y = -0.4 0.4
    Z = 0.4 0.4
  End
  EmissionVolume = CylinderEmissionVolume
    Radius = 8
    Length = 24
  End
  Draw = DefaultDraw
  End
End

Object AngmarMorgramir

	AddModule
	Behavior = GrantUpgradeCreate ModuleTag_123435763
		UpgradeToGrant = Upgrade_GandalfWhite  ;
	End 
	End
	AddModule
	Behavior = SubObjectsUpgrade Costume_2375345
		TriggeredBy		= Upgrade_GandalfWhite 
		UpgradeTexture	= kumorgomir.tga 0 ruothbrkrsa.tga      ;muringwraith
				RecolorHouse	= No
	End
	End

	ReplaceModule ModuleTag_01
	Draw = W3DHordeModelDraw ModuleTag_01_new9997887
		OkToChangeModelColor = Yes ; temporarily commented out to remove the house color

		;WadingParticleSys = EntRipples

		StaticModelLODMode = Yes ; Will append M or L to the skin name depending on GameLOD

		DefaultModelConditionState
			Model			= KUMorg_SKN
			ParticleSysBone     = None RingWraithFlare
			ParticleSysBone     = None RingWraithWindIdle
		End


				
		; --- Idle Anims
		IdleAnimationState
			StateName = Idle			
			Animation           = IDLB
				AnimationName     = KuMorg_SKL.KUMorg_IDLB 0 15
				AnimationMode     = ONCE
				AnimationPriority   = 10
			End			
			Animation           = IDLC
				AnimationName     = KuMorg_SKL.KUMorg_IDLC
				AnimationMode     = ONCE
				AnimationPriority   = 1
			End			
			Animation           = IDLD
				AnimationName     = KuMorg_SKL.KUMorg_IDLD
				AnimationMode     = ONCE
				AnimationPriority   = 5
			End			
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Selected" then CurDrawableSetTransitionAnimState("TRANS_Selected_To_Idle") end
			EndScript			
		End
		
		
		
		
		
		
		AnimationState				=	DYING BURNINGDEATH
			Animation
				AnimationName		=	KuMorg_SKL.KUMorg_DTHA
				AnimationMode		=	ONCE
				AnimationBlendTime	=	10
			End
			Animation
				AnimationName		=	KuMorg_SKL.KUMorg_DTHB
				AnimationMode		=	ONCE
				AnimationBlendTime	=	10
			End
		End
		

		AnimationState = DYING
			Animation
				AnimationName       = KuMorg_SKL.KUMorg_DTHA
				AnimationMode       = ONCE
			End
			Animation
				AnimationName		=	KuMorg_SKL.KUMorg_DTHB
				AnimationMode		=	ONCE
				AnimationBlendTime	=	10
			End
		End
		
		AnimationState				=	BURNINGDEATH
			Animation
				AnimationName		=	KuMorg_SKL.KUMorg_MFDA
				AnimationMode		=	LOOP
				Distance			=	90
			End
		End

		AnimationState = FREEFALL
			Animation
				AnimationName = KuMorg_SKL.KUMorg_FLYA
				AnimationMode = LOOP
			End
			Flags = RANDOMSTART
		End
		
		AnimationState = STUNNED_FLAILING
			Animation
				AnimationName = KuMorg_SKL.KUMorg_FLYA
				AnimationMode = LOOP
				AnimationSpeedFactorRange	= 0.4 0.6
			End
			Flags = RANDOMSTART
		End
		
		AnimationState = STUNNED
			Animation
				AnimationName = KuMorg_SKL.KUMorg_LNDA
			    AnimationMode = ONCE
			End
			EnteringStateFX					= FX_OrcHitGround
		End
		
		AnimationState = STUNNED_STANDING_UP
			Animation
				AnimationName = KuMorg_SKL.KUMorg_GTPA
				AnimationMode = ONCE
			End
		End		

		AnimationState = MOVING FIRING_OR_PREATTACK_A
			Animation
				AnimationName = KuMorg_SKL.KUMorg_RUNB
				AnimationMode = LOOP
			End
			
			Flags = RESTART_ANIM_WHEN_COMPLETE
		End
				
		AnimationState = FIRING_OR_PREATTACK_A
			Animation
				AnimationName = KuMorg_SKL.KUMorg_ATKA
				AnimationMode = ONCE
			End
			Animation
				AnimationName = KuMorg_SKL.KUMorg_ATKB
				AnimationMode = ONCE
			End
			Animation
				AnimationName = KuMorg_SKL.KUMorg_ATKC
				AnimationMode = ONCE
			End
		End

		AnimationState			= SPECIAL_WEAPON_ONE
			Animation			= MORGULBLADE
				AnimationName	= KuMorg_SKL.KUMorg_SPCC
				AnimationMode   = ONCE
			End
		End

		AnimationState			= SPECIAL_WEAPON_TWO
			Animation			= RUIN
				AnimationName	= KuMorg_SKL.KUMorg_SPCA
				AnimationMode   = ONCE
			End
		End

		AnimationState			= SPECIAL_POWER_1
			Animation			= DARKGLORY
				AnimationName	= KuMorg_SKL.KUMorg_SPCB
				AnimationMode   = ONCE
			End
		End

		AnimationState = MOVING
			Animation
				AnimationName = KuMorg_SKL.KUMorg_RUNA
				AnimationMode = LOOP
			End
			Flags = RESTART_ANIM_WHEN_COMPLETE
		End

		; READY IDLE
		AnimationState        = EMOTION_ALERT
			Animation           = ALERT_1
				AnimationName     = KuMorg_SKL.KUMorg_IDLA
				AnimationMode     = LOOP ;ONCE
			End
;			Flags               = RESTART_ANIM_WHEN_COMPLETE ; acts like an idle animation & keeps running the animations.
		End

		; --------- Click and Hit Reactions ------------
		AnimationState = HIT_REACTION HIT_LEVEL_1
			Animation = Hit_Level_1_a
				AnimationName = KuMorg_SKL.KUMorg_HITA
				AnimationMode = ONCE
			End
		End
			
		AnimationState = LEVELED
			Animation = Hit_Level_1_a
				AnimationName = KuMorg_SKL.KUMorg_LVLA
				AnimationMode = ONCE
			End
		End			
			
;		AnimationState = ENGAGED
;			Animation
;				AnimationName = KuMorg_SKL.KUMorg_APPA
;				AnimationMode = LOOP
;			End
;		End
		
		
		AnimationState = EMOTION_CELEBRATING
			Animation
				AnimationName = KuMorg_SKL.KUMorg_CHRA
				AnimationMode = LOOP
			End
			Animation
				AnimationName = KuMorg_SKL.KUMorg_CHRB
				AnimationMode = LOOP
			End
		End
		
		AnimationState							= EMOTION_TAUNTING
			Animation							= TNTA
				AnimationName					= KuMorg_SKL.KUMorg_TNTA
				AnimationMode					= ONCE
;				AnimationSpeedFactorRange		= 0.8 1.2
			End
			Animation							= TNTB
				AnimationName					= KuMorg_SKL.KUMorg_TNTB
				AnimationMode					= ONCE
;				AnimationSpeedFactorRange		= 0.8 1.2
			End
		End
				
		AnimationState = RAISING_FLAG
			Animation
				AnimationName = KuMorg_SKL.KUMorg_CHRA
				AnimationMode = LOOP
			End
		End

		
		
   		 ; --------- Selected Anims and Transitions
		TransitionState					=	TRANS_Idle_to_Selected
			Animation					=	ATNA
				AnimationName			=	KuMorg_SKL.KUMorg_ATNA
				AnimationMode			=	ONCE
			End
		End
		
		TransitionState					=	TRANS_Selected_To_Idle
			Animation					=	ATNC
				AnimationName			=	KuMorg_SKL.KUMorg_ATNC
				AnimationMode			=	ONCE
			End
		End

		AnimationState				= LEVELED 						; This state clears itself in 3 seconds
			Animation				= LevelUp
				AnimationName		= KuMorg_SKL.KUMorg_CHRA
				AnimationMode		= ONCE
			End
		End		

		AnimationState				=	SELECTED
			StateName				=	Selected
			SimilarRestart			=   Yes			
			Animation				=	ATNB
				AnimationName		=	KuMorg_SKL.KUMorg_ATNB
				AnimationMode		=	LOOP
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Idle_to_Selected") end
			EndScript
		End
	End
	End
	End

;///////////////////////Dead Archers//////////////////////////

Object GondorArcher

	AddModule
	Behavior = GrantUpgradeCreate ModuleTag_123437654756
		UpgradeToGrant = Upgrade_GandalfWhite  ;
	End 
	End
	AddModule
	Behavior = SubObjectsUpgrade Costume_235675647
		TriggeredBy		= Upgrade_GandalfWhite 
		UpgradeTexture	= Guarcher.tga 0 ruothbrkrsa.tga 
				RecolorHouse	= No
	End
	End

	LocomotorSet
		Locomotor = HumanLocomotor
		Condition = SET_NORMAL 
		Speed     = 25
	End

ReplaceModule ModuleTag_01
Draw = W3DHordeModelDraw ModuleTag_01_new35467354

DefaultModelConditionState
			Model						=	GUArcher_SKN
			Skeleton					=   GUArcher_SKL
			WeaponLaunchBone			=	PRIMARY ARROW
			WeaponLaunchBone			=	TERTIARY ARROW
			ParticleSysBone     = None RingWraithFlare
			ParticleSysBone     = None RingWraithWindIdle
		End

		//-----------------
		IdleAnimationState
			StateName					=   STATE_Idle
			Animation = IdleA
				AnimationName			=	GUArcher_IDLA 
				AnimationPriority		=	6
				AnimationSpeedFactorRange = 0.7 1.3
			End
			//*** Repeat IDLA because animation priorities will not choose same animation twice so it can alternate between first two mostly.
			Animation = IdleA	
				AnimationName			=	GUArcher_IDLA 
				AnimationPriority		=	6
				AnimationSpeedFactorRange = 0.7 1.3
			End
			Animation = IdleH
				AnimationName			=	GUArcher_IDLH
				AnimationPriority		=	1
				AnimationSpeedFactorRange = 0.7 1.3
				AnimationBlendTime		= 8
			End
			Animation = IdleI
				AnimationName			=	GUArcher_IDLI
				AnimationPriority		=	1
				AnimationSpeedFactorRange = 0.7 1.3
				AnimationBlendTime		= 8
			End
			Animation = IdleJ
				AnimationName			=	GUArcher_IDLJ
				AnimationPriority		=	1
				AnimationSpeedFactorRange = 0.7 1.3
				AnimationBlendTime		= 8
			End
			
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Selected" then CurDrawableSetTransitionAnimState("TRANS_Selected_To_Idle") end
			EndScript
		End
		
		AnimationState        = THROWN_PROJECTILE
			Animation           = FLYA
				AnimationName     = GUArcher_FLYA
				AnimationMode     = LOOP
			End
		End
		
		AnimationState        = PASSENGER FREEFALL
			Animation           = FLLA
				AnimationName     = GUArcher_FLLA
				AnimationMode     = LOOP
			End
		End

		AnimationState			= FREEFALL
			Animation			= Flying_1
				AnimationName	= GUARCHER_FLYA
				AnimationMode	= LOOP
				AnimationSpeedFactorRange = 0.35 0.35 //Very slow
				AnimationBlendTime		  = 10		//Very slow
			End
		End

		// --- stunned anims
		AnimationState					=	STUNNED_FLAILING 
			Animation					=	StunFlail
				AnimationName			=	GUArcher_FLYA 
				AnimationMode			=	LOOP
				AnimationSpeedFactorRange	= 0.4 0.6
			End
			Flags						=	RANDOMSTART
		End

		AnimationState					= DYING BURNINGDEATH
			Animation
				AnimationName			= GUArcher_DIEA
				AnimationMode			= ONCE
				AnimationBlendTime		= 10
			End
			Animation
				AnimationName			= GUArcher_DIEB
				AnimationMode			= ONCE
				AnimationBlendTime		= 10
			End
			Animation
				AnimationName			= GUArcher_DIED
				AnimationMode			= ONCE
				AnimationBlendTime		= 10
			End
		End
		AnimationState					=	DYING SPLATTED
			Animation					=	Fire
				AnimationName			=	GUArcher_LNDA 
				AnimationMode			=	ONCE
				AnimationSpeedFactorRange = 0.7 1.3
			End
            EnteringStateFX = FX_SoldierHitGround
		End

		AnimationState					=	DYING AFLAME
			Animation					=	Fire
				AnimationName			=	GUArcher_MFDA 
				AnimationSpeedFactorRange = 0.9 1.1
			End
		End

		AnimationState					=	DYING
			Animation					=	Die1
				AnimationName			=	GUArcher_DIEA 
				AnimationMode			=	ONCE
				AnimationSpeedFactorRange = 0.7 1.3
			End
			Animation					=	Die2
				AnimationName			=	GUArcher_DIEB 
				AnimationMode			=	ONCE
				AnimationSpeedFactorRange = 0.7 1.3
			End
		End

		AnimationState						= BURNINGDEATH
			Animation
				AnimationName				= GUArcher_MFDA
				AnimationMode				= LOOP
				Distance					= 50
			End
		End

		AnimationState						= PARALYZED
			Animation
				AnimationName				= GUArcher_IDLA
				AnimationMode				= LOOP
			End
		End

		AnimationState					=	STUNNED_STANDING_UP 
			Animation					=	GTPA
				AnimationName			=	GUArcher_GTPA
				AnimationMode			=	ONCE
				AnimationSpeedFactorRange = 0.7 1.1
			End
		End

		AnimationState					=	STUNNED 
			Animation					=	StunFlail
				AnimationName			=	GUArcher_LNDA 
				AnimationMode			=	ONCE
			End
            EnteringStateFX = FX_SoldierHitGround
		End

		AnimationState						= EMOTION_UNCONTROLLABLY_AFRAID
			ShareAnimation = Yes
			Animation						= FERA
				AnimationName				= GUArcher_FERA
				AnimationMode				= LOOP
				AnimationSpeedFactorRange	=	0.7 1.3								
			End
			Animation						= FERB
				AnimationName				= GUArcher_FERB
				AnimationMode				= LOOP
				AnimationSpeedFactorRange	=	0.7 1.3								
			End
			Animation						= FERC
				AnimationName				= GUArcher_FERC
				AnimationMode				= LOOP
				AnimationSpeedFactorRange	=	0.7 1.3								
			End
			Animation						= FERD
				AnimationName				= GUArcher_FERD
				AnimationMode				= LOOP
				AnimationSpeedFactorRange	=	0.7 1.3								
			End
			Flags							= RANDOMSTART			
		End
		
  		AnimationState					=	FIRING_OR_PREATTACK_B
  			Animation					=	BowPunchWhenClose
  				AnimationName			=	GUArcher_ATKD 
  				AnimationMode			=	ONCE
  				UseWeaponTiming			=	Yes
  			End
 		End

		//---------------------------------------------------
		//New style firing
		AnimationState					=	PREATTACK_A
			StateName					=	STATE_PreFiring
			Animation					=	ReadyToDrawn
				AnimationName			=	GUArcher_ATKF1
				AnimationMode			=	ONCE
//				UseWeaponTiming			=	Yes			// UseWeaponTiming plus random weapon field equals desync.  Leaving as warning
				AnimationBlendTime		=	10
			End
		End

		AnimationState					=	FIRING_OR_RELOADING_A
			StateName					=	STATE_Firing
			Animation					=	LooseReloadDraw
				AnimationName			=	GUArcher_ATKF2
				AnimationMode			=	ONCE
//				UseWeaponTiming			=	Yes			// UseWeaponTiming plus random weapon field equals desync.  Leaving as warning
				AnimationSpeedFactorRange = 1.2 1.3		// Therefore, this is all you get.  A slight speed up so that the animation can always finish before any possible random value Design sets the range for
				AnimationBlendTime		=	0
			End
			Flags = START_FRAME_FIRST
		End
		
		AnimationState					=	PREATTACK_C
			StateName					=	STATE_PreFiring
			Animation					=	ReadyToDrawn
				AnimationName			=	GUArcher_ATKF1
				AnimationMode			=	ONCE
//				UseWeaponTiming			=	Yes			// UseWeaponTiming plus random weapon field equals desync.  Leaving as warning
				AnimationBlendTime		=	10
			End
		End

		AnimationState					=	FIRING_OR_RELOADING_C
			StateName					=	STATE_Firing
			Animation					=	LooseReloadDraw
				AnimationName			=	GUArcher_ATKF2
				AnimationMode			=	ONCE
//				UseWeaponTiming			=	Yes			// UseWeaponTiming plus random weapon field equals desync.  Leaving as warning
				AnimationSpeedFactorRange = 1.2 1.3		// Therefore, this is all you get.  A slight speed up so that the animation can always finish before any possible random value Design sets the range for
				AnimationBlendTime		=	0
			End
			Flags = START_FRAME_FIRST
		End
		
		//End New style firing
		//---------------------------------------------------

		AnimationState					=	MOVING WANDER
			ShareAnimation = Yes
			Animation					=	Wander1
				AnimationName			=	GUArcher_WLKA 
			End
			Animation					=	Wander2
				AnimationName			=	GUArcher_WLKB //20
			End
			Flags						=	RANDOMSTART
		End
		
		AnimationState					= MOVING EMOTION_LOOK_TO_SKY
			ShareAnimation = Yes
			Animation					= TerrorFromTheSky
				AnimationName			= GUArcher_RUNC
				AnimationMode			= LOOP
			End
		End

		AnimationState				=	MOVING BACKING_UP
			ShareAnimation = Yes
			Animation				=	BackingUp
				AnimationName		=	GUArcher_BAKA
				AnimationMode		=	LOOP
			End
			Flags					=	RANDOMSTART
		End
		
		AnimationState					=	ATTACKING MOVING
			ShareAnimation = Yes
			Animation					=	Move2
				AnimationName			=	GUArcher_RUNB
				Distance				=	28
			End
			Flags						=	RANDOMSTART
		End

		AnimationState					=	MOVING
			ShareAnimation = Yes
			Animation					=	Move1
				AnimationName			=	GUArcher_RUNA 
				Distance				=	28
			End
			Flags						=	RANDOMSTART
		End

		AnimationState					= RAISING_FLAG
			Animation					= CHRA
				AnimationName			= GUArcher_CHRA
				AnimationMode			= Once
				AnimationSpeedFactorRange	= 0.9 1.1
			End
			Animation					= CHRB
				AnimationName			= GUArcher_CHRB
				AnimationMode			= Once
				AnimationSpeedFactorRange	= 0.9 1.1
			End
			Animation					= CHRA
				AnimationName			= GUArcher_CHRC
				AnimationMode			= Once
				AnimationSpeedFactorRange	= 0.9 1.1
			End
			Flags						=	RESTART_ANIM_WHEN_COMPLETE
		End

		AnimationState					= CONTINUOUS_FIRE_MEAN
			StateName					=	STATE_Coasting
			Animation					=	HangFrameWhileCoasting
				AnimationName			=	GUArcher_ATKF2
				AnimationMode			=	MANUAL
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Firing" then CurDrawableAllowToContinue() return end
			EndScript
		End
		
		AnimationState						= CONTINUOUS_FIRE_SLOW
			StateName						= STATE_Idle
			Animation						= PutAwayArrow
				AnimationName				= GUArcher_ATKF3
				AnimationMode				= ONCE
			End
		End

//------------ HIT REACTION -----------------------------------------------------

// --------- Click and Hit Reactions ------------	
;		AnimationState = HIT_REACTION
;			Animation = Hit_Level_1_a
;				AnimationName = GUArcher_HITA
;				AnimationMode = ONCE
;			End
;		End

//------------ EMOTIONS ---------------------------------------------------------

//======= AFRAID

		AnimationState						= EMOTION_AFRAID
			ShareAnimation = Yes
			Animation						= FERA
				AnimationName				= GUArcher_FERA
				AnimationMode				= LOOP
				AnimationSpeedFactorRange	=	0.7 1.3								
			End
			Animation						= FERB
				AnimationName				= GUArcher_FERB
				AnimationMode				= LOOP
				AnimationSpeedFactorRange	=	0.7 1.3								
			End
			Animation						= FERC
				AnimationName				= GUArcher_FERC
				AnimationMode				= LOOP
				AnimationSpeedFactorRange	=	0.7 1.3								
			End
			Animation						= FERD
				AnimationName				= GUArcher_FERD
				AnimationMode				= LOOP
				AnimationSpeedFactorRange	=	0.7 1.3								
			End
			Flags							= RANDOMSTART			
		End
		
//======= CELEBRATING
		
		AnimationState					= EMOTION_CELEBRATING
			Animation					= CHRB
				AnimationName			= GUArcher_CHRB
				AnimationMode			= Once
				AnimationBlendTime		= 15
				AnimationPriority		= 2
			End
			Animation					= SLTA
				AnimationName			= GUArcher_SLTA
				AnimationMode			= Once
				AnimationBlendTime		= 15
				AnimationPriority		= 2
			End
			Animation					= CHRA
				AnimationName			= GUArcher_CHRA
				AnimationMode			= Once
				AnimationBlendTime		= 15		
				AnimationPriority		= 1//Use least often of cheers (Eugene)
			End
			Flags						=	RESTART_ANIM_WHEN_COMPLETE
		End

//======== TAUNTING

		AnimationState					= EMOTION_TAUNTING
			Animation					= Taunting2
				AnimationName			= GUArcher_IDLE
				AnimationMode			= ONCE
				AnimationBlendTime		= 15
			End
			Animation					= Taunting3
				AnimationName			= GUArcher_IDLF
				AnimationMode			= ONCE
				AnimationBlendTime		= 15
			End
			Animation					= Taunting4
				AnimationName			= GUArcher_IDLG
				AnimationMode			= ONCE
				AnimationBlendTime		= 15
			End

			Flags						= RESTART_ANIM_WHEN_COMPLETE
		End

//======== POINTING

		AnimationState						= EMOTION_POINTING
			ShareAnimation					= Yes
			Animation						= pointing
				AnimationName				= GUArcher_PNTA
				AnimationPriority			= 2
				AnimationSpeedFactorRange	= 0.9 1.1
				AnimationMode				= LOOP
			End
		End
		
//======= ALERT

		AnimationState					= EMOTION_ALERT
			Animation					= Ready
				AnimationName			= GUArcher_IDLA
				AnimationMode			= LOOP
				AnimationPriority		= 3
				AnimationBlendTime		= 15
			End
			Animation					= Ready
				AnimationName			= GUArcher_IDLA
				AnimationMode			= LOOP
				AnimationPriority		= 3
				AnimationBlendTime		= 15
			End
			Animation					= Point
				AnimationName			= GUArcher_PNTA
				AnimationMode			= LOOP
				AnimationPriority		= 1
				AnimationBlendTime		= 15
			End
		End
			
//----------------- SELECTED --------------------------------------------
		AnimationState					=	SELECTED
			ShareAnimation = Yes
			StateName					=	STATE_Selected
			Animation					=	ATNB
				AnimationName			=	GUArcher_ATNB
				AnimationMode			=	LOOP
				AnimationSpeedFactorRange = 0.9 1.1
			End
			Animation					=	IDLA
				AnimationName			=	GUArcher_IDLA 
				AnimationPriority		=	10
				AnimationSpeedFactorRange = 0.7 1.3
			End

			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Idle" 
				then 
					CurDrawableSetTransitionAnimState("TRANS_Idle_to_Selected")
				end
				if CurDrawableModelcondition("ATTACKING")
				then
					return "IDLA"
				else
					return "ATNB"
				end
			EndScript
		End

//----------------- Transitions ------------------------------------------------------

		TransitionState	= TRANS_Idle_to_Selected
			Animation	= ATNA
				AnimationName			  =	GUArcher_ATNA
				AnimationMode			  =	ONCE
				AnimationSpeedFactorRange =	0.8	1.2
				AnimationPriority		  =	8
			End
			Animation					=	SLTA
				AnimationName			  =	GUArcher_SLTA
				AnimationMode			  =	ONCE
				AnimationSpeedFactorRange =	1.0	1.5
				AnimationPriority		  =	1
			End
		End
		TransitionState					=	TRANS_Selected_To_Idle
			Animation					=	ATNC
				AnimationName			=	GUArcher_ATNC
				AnimationMode			=	ONCE
				AnimationSpeedFactorRange = 0.5 2.0
			End
		End
	End
End
End





;---------Ghost Spiders---------

Object MinorSpider

Scale = 1.2

	AddModule
	Behavior = GrantUpgradeCreate ModuleTag_1234
		UpgradeToGrant = Upgrade_GandalfWhite  ;
	End 
	End
	AddModule
	Behavior = SubObjectsUpgrade Costume_2
		TriggeredBy		= Upgrade_GandalfWhite 
		UpgradeTexture	= mugntspdr.tga 0 ruothbrkrsa.tga 
				RecolorHouse	= No
	End
	End

	ReplaceModule ModuleTag_01
	Draw = W3DScriptedModelDraw ModuleTag_0117776
		OkToChangeModelColor = Yes
		DefaultModelConditionState
			Model               = MUGntSpdr_SKN
			Skeleton			= MUGntSpdr_SKL
			ParticleSysBone     = None RingWraithFlare
			ParticleSysBone     = None RingWraithWindIdle
		End

		IdleAnimationState
			Animation           = IDLA
				AnimationName	= MUGntSpdr_IDLA
				AnimationMode	= ONCE
			End
			Flags               = RANDOMSTART
		End

		AnimationState			= DYING BURNINGDEATH
			Animation
				AnimationName	= MUGntSpdr_DIEA
				AnimationMode	= ONCE
				AnimationBlendTime = 10
			End
		End

		AnimationState			= DYING
			Animation           = DIEA
				AnimationName	= MUGntSpdr_DIEA
				AnimationMode	= ONCE
			End
		End
		
		AnimationState			= BURNINGDEATH
			Animation
				AnimationName	= MUGntSpdr_MFDA
				AnimationMode	= LOOP
				Distance		= 40
			End
		End

		AnimationState						= PARALYZED
			Animation
				AnimationName				= MUGntSpdr_IDLA
				AnimationMode				= LOOP
			End
		End

		AnimationState			=  FIRING_OR_PREATTACK_A
			Animation						= ATKA
				AnimationName				= MUGntSpdr_ATKA
				AnimationMode				= ONCE
				AnimationSpeedFactorRange	= 0.8 1.25
			End
		End

		;//--------------WallScaling---------------
			
		AnimationState						= CLIMBING
			StateName						= STATE_Climbing
			Animation						= Climbing
				AnimationName				= MUGNTSPDR_WALB
				AnimationMode				= LOOP
				AnimationBlendTime			= 10
			End
			BeginScript;script to set transition from moving
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Running"  then CurDrawableSetTransitionAnimState("Trans_RunningToClimbing") return end
				;if Prev == "STATE_Rappelling"  then CurDrawableSetTransitionAnimState("Trans_RappellingToClimbing") return end
			EndScript
		End
		TransitionState = Trans_RunningToClimbing
			Animation = Transition
				AnimationName = MUGNTSPDR_WALA
				AnimationMode = ONCE
			End
		End
		;TransitionState = Trans_RappellingToClimbing
		;	Animation = Transition
		;		AnimationName = UNKNOWN
		;		AnimationMode = ONCE_BACKWARDS
		;	End
		;End
		AnimationState						= RAPPELLING
			StateName						= STATE_Rappelling
			Animation						= Rapelling
				AnimationName				= MUGNTSPDR_WALD
				AnimationMode				= LOOP
				AnimationBlendTime			= 10
			End
			BeginScript;script to set transition from moving
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Running"  then CurDrawableSetTransitionAnimState("Trans_RunningToRappelling") return end
				;if Prev == "STATE_Climbing"  then CurDrawableSetTransitionAnimState("Trans_ClimbingToRappelling") return end
			EndScript
		End
		TransitionState = Trans_RunningToRappelling
			Animation = Transition
				AnimationName = MUGNTSPDR_WALG
				AnimationMode = ONCE
			End
		End
		;TransitionState = Trans_ClimbingToRappelling
		;	Animation = Transition
		;		AnimationName = UNKNOWN
		;		AnimationMode = ONCE
		;	End
		;End		
		TransitionState = Trans_ClimbingToRunning
			Animation = Transition
				AnimationName = MUGNTSPDR_WALF
				AnimationMode = ONCE
			End
		End
		TransitionState = Trans_RappellingToRunning
			Animation = Transition
				AnimationName = MUGNTSPDR_WALE
				AnimationMode = ONCE
			End
		End
			
			
		AnimationState			= TURN_LEFT
			StateName			= Turn
			Animation			= Walk
				AnimationName	= MUGntSpdr_TRNL 
				AnimationMode	= LOOP
			End
		End
		
		AnimationState			= TURN_RIGHT
			StateName			= Turn
			Animation			= Walk
				AnimationName	= MUGntSpdr_TRNR 
				AnimationMode	= LOOP
			End
		End
		
		AnimationState			= MOVING 
			Animation			= RUNA
				AnimationName	= MUGntSpdr_RUNA
				AnimationMode	= LOOP
			End

			BeginScript;script to set transition into moving
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Climbing"  then CurDrawableSetTransitionAnimState("Trans_ClimbingToRunning") return end
				if Prev == "STATE_Rappelling"  then CurDrawableSetTransitionAnimState("Trans_RappellingToRunning") return end
			EndScript
		End

		AnimationState			= MOVING BACKING_UP
			Animation           = BAKA
				AnimationName	= MUGntSpdr_BAKA
				AnimationMode	= LOOP
			End
			Flags               = RANDOMSTART
		End
		
		AnimationState			= STUNNED_FLAILING
			Animation           = StunFlail
				AnimationName	= MUGntSpdr_FLYA
				AnimationMode	= LOOP
			End
			Flags               = RANDOMSTART
		End
		
		AnimationState			= STUNNED
			Animation			= Stun
				AnimationName	= MUGntSpdr_LNDA
				AnimationMode	= ONCE
			End
		End
		
		AnimationState			= STUNNED_STANDING_UP
			Animation           = Stun
				AnimationName	= MUGntSpdr_GTPA
				AnimationMode	= ONCE
			End
		End
		
		AnimationState			= HIT_REACTION HIT_LEVEL_1
			Animation			= Hit_Level_1_a
				AnimationName	= MUGntSpdr_HITA
				AnimationMode	= ONCE
			End
		End
		
		AnimationState			= SELECTED
			Animation			= Selected
				AnimationName	= MUGntSpdr_IDLA
				AnimationMode	= ONCE
			End
		End
				
	End
End
End

;------STATS---------------
Weapon MinorSpiderMandibles				; BALANCE Minor Spider Weapon 
  LeechRangeWeapon      = Yes
  AttackRange           = 25.0
  MeleeWeapon           = Yes
  DelayBetweenShots     = 1666			; time between shots, msec
  PreAttackDelay        = 900				; 300 is mace swing delay time before contact with target.
  PreAttackType         = PER_SHOT 			; Do the delay each time we attack
  FireFX                = FX_SpiderStabHit
  FiringDuration        = 766				; Duration of the mace swing 
  RequireFollowThru	= Yes
  
  DamageNugget						; A basic Nugget that just does damage
    Damage        = 200
    Radius        = 0.0
    DelayTime     = 0
    DamageType    = HERO
    DamageFXType  = SWORD_SLASH
    DeathType     = NORMAL
    FlankingBonus = 50%
  End
;	MetaImpactNugget                    ; A Nugget that throws things back with force
;		HeroResist			= .75
;		ShockWaveAmount   = 30.0
;		ShockWaveRadius   = 30.0
;		ShockWaveTaperOff = 0.75
;	End  
End

;////////////////////////////Elven archer/////////////////////////////

CommandButton Command_LurtzCripple
  Command                 	= SPECIAL_POWER 
  SpecialPower            	= SpecialAbilityLurtzCripple
  Options                 	= NEED_TARGET_ENEMY_OBJECT ; CONTEXTMODE_COMMAND
  TextLabel               	= CONTROLBAR:SpecialAbilityLurtzCripple
  CursorName              	= EvilAbilityObj
  ButtonImage             	= HSLurtzCrippleStrike
  ButtonBorderType        	= ACTION 
  DescriptLabel           	= CONTROLBAR:ToolTipSpecialAbilityLurtzCripple
  InPalantir			= Yes
  AutoAbility			= Yes
End
CommandButton Command_CreateAHero_CM_SpecialAbilityStealth_Level1
	Command					= SPECIAL_POWER
	SpecialPower			= SpecialAbilityCreateAHeroCMStealth_Level1
	Options					= NONPRESSABLE
	TextLabel				= CONTROLBAR:CAH_CM_Stealth_Level1
	DescriptLabel			= CONTROLBAR:ToolTipCAH_CM_Stealth_Level1_Palantir
	ButtonImage				= HSStealth
	ButtonBorderType		= ACTION
	InPalantir				= Yes

End
CommandButton Command_CreateAHero_A_ToggleWeapon
	Command		   = TOGGLE_WEAPONSET
	Options		   = UNMOUNTED_ONLY	TOGGLE_IMAGE_ON_WEAPONSET NEED_UPGRADE
	NeededUpgrade	   = Upgrade_CreateAHeroToggleWeapon
	FlagsUsedForToggle = WEAPONSET_TOGGLE_1
	TextLabel	   = CONTROLBAR:SpecialAbilityCreateAHeroArcherToggleWeapon
	ButtonImage	   = CAHGoodToggleWeapon
	ButtonBorderType   = ACTION	
	DescriptLabel	   = CONTROLBAR:ToolTipSpecialAbilityCreateAHeroArcherToggleWeapon
	InPalantir		   = Yes   

End
Weapon HaradrimBarbedArrow // BALANCE Archer Weapon ;orc archer
  AttackRange 			= MORDOR_HARADRIM_BOW_RANGE  // Horde member so it needs to be bigger than the horde weapon attack range.
  LeechRangeWeapon      = Yes
  WeaponSpeed 			= 401			// dist/sec 
  MinWeaponSpeed 		= 121
  MaxWeaponSpeed 		= 601			// dist/sec Upper limit on scaling, when attacking past nominal "max" range
  FireFX 				= FX_HaradrimArcherBowBarbedWeapon				;FX_RohanArcherBowWeapon	;audio only
  ScaleWeaponSpeed	 	= Yes			// Used for lob weapons, scales speed proportional to range
  HitPercentage     	= 100			//When this weapon is used it will hit exactly 50% of the time.
  ScatterRadius     	= 40.0			//When this weapon misses it can randomly miss by as much as this distance.
  DelayBetweenShots 	= MORDOR_HARADRIM_BOW_DELAYBETWEENSHOTS
  PreAttackDelay        = MORDOR_HARADRIM_BOW_BARBEDARROWS_PREATTACKDELAY
  PreAttackRandomAmount = 200 
  PreAttackType         = PER_SHOT		// Do the delay each time we attack a new target
  FiringDuration      	= MORDOR_HARADRIM_BOW_FIRINGDURATION    // Duration of the archer firing shot is 500ms.  

  ProjectileNugget                    ; Default arrow
    ProjectileTemplateName    = BarbedArrowProjectile
    WarheadTemplateName       = HaradrimBarbedArrowWarhead
  End
End
Weapon BarbedElvenHit			; Always hits initial target.
  DamageNugget                       					; A basic Nugget that just does damage
    Damage        		= 205
    Radius        		= 0.0					; HitStoredTarget means we hurt the person we launched at.  And nobody else.  So a miss hurts nobody.
    DelayTime     		= 0
    DamageType    		= HERO_RANGED
    DamageFXType  		= GOOD_ARROW_PIERCE
    DeathType     		= NORMAL
  End
End

Object BarbedArrowProjectile
  ReplaceModule ModuleTag_04
  Behavior = BezierProjectileBehavior ModuleTag_04_new
    GroundHitWeapon = BarbedElvenHit
    FirstHeight = 9  ; Height of Bezier control points above highest intervening terrain
    SecondHeight = 9
    FirstPercentIndent = 20% ; Percentage of shot distance control points are placed
    SecondPercentIndent = 90%
    FlightPathAdjustDistPerSecond = 50 ; Can allow a max speed this can attempt to follow a target. Units are their velocity we can tag. (45 is default human speed)
    GroundHitFX = FX_GondorArrowDeath	;FX_BarbedArrowDeath
    CurveFlattenMinDist = 100.0
  End
End
End
CommandSet NewArwenCommandSet
	1	= Command_ToggleStance
	2	= Command_LurtzCripple
	3	= Command_CreateAHero_CM_SpecialAbilityStealth_Level1
	4	= Command_CreateAHero_A_ToggleWeapon
	12	= Command_CaptureBuilding
	13	= Command_AttackMove
	14	= Command_Stop
	16  	= Command_SetStanceBattle
	17  	= Command_SetStanceAggressive
	18  	= Command_SetStanceHoldGround
End
;------------------ ARWEN ------------------------
ExperienceLevel	ArwenLevel1
	AttributeModifiers		=	HobbitResistKnockback
	TargetNames				=	ElvenArwen
	RequiredExperience		=	1	
	ExperienceAward			=	ARWEN_LVL1_EXP_AWARD 
	Rank					=	1
	Upgrades				= Upgrade_LurtzCrippleTrigger
	SelectionDecal
		Texture				=	decal_hero_good	
		Style				=	SHADOW_ALPHA_DECAL
		OpacityMin			=	50%	
		OpacityMax			=	100%
		MinRadius			=	40
		MaxRadius			=	200
		MaxSelectedUnits	=	40
	End	
End	

ExperienceLevel	ArwenLevel2
	TargetNames				=	ElvenArwen
	RequiredExperience		=	ARWEN_LVL2_EXP_NEEDED
	ExperienceAward			=	ARWEN_LVL2_EXP_AWARD 				
	LevelUpFx				=	FX:GandalfLevelUp1FX
	;LevelUpOCL				=	OCL_GandalfLevelUp1OCL
	Rank					=	2
	AttributeModifiers		=	HeroLevelUpDamage1
	Upgrades				= Upgrade_CreateAHeroCMStealth_Level1
	SelectionDecal
		Texture				=	decal_hero_good	
		Style				=	SHADOW_ALPHA_DECAL
		OpacityMin			=	50%	
		OpacityMax			=	100%
		MinRadius			=	40
		MaxRadius			=	200
		MaxSelectedUnits	=	40
	End	
End	

ExperienceLevel	ArwenLevel3
	TargetNames				=	ElvenArwen
	RequiredExperience		=	ARWEN_LVL3_EXP_NEEDED
	ExperienceAward			=	ARWEN_LVL3_EXP_AWARD 	
	LevelUpFx				=	FX:GandalfLevelUp1FX
	;LevelUpOCL				=	OCL_GandalfLevelUp1OCL
	Rank					=	3
	Upgrades				= Upgrade_CreateAHeroToggleWeapon
	AttributeModifiers		=	HeroLevelUpDamage2
	SelectionDecal
		Texture				=	decal_hero_good
		Style				=	SHADOW_ALPHA_DECAL
		OpacityMin			=	50%	
		OpacityMax			=	100%
		MinRadius			=	40
		MaxRadius			=	200
		MaxSelectedUnits	=	40
	End	
End	

ExperienceLevel	ArwenLevel4
	TargetNames				=	ElvenArwen
	RequiredExperience		=	ARWEN_LVL4_EXP_NEEDED
	ExperienceAward			=	ARWEN_LVL4_EXP_AWARD 	
	LevelUpFx				=	FX:GandalfLevelUp1FX
	;LevelUpOCL				=	OCL_GandalfLevelUp1OCL
	Rank					=	4
	AttributeModifiers		=	HeroLevelUpDamage3
	SelectionDecal
		Texture				=	decal_hero_good
		Style				=	SHADOW_ALPHA_DECAL
		OpacityMin			=	50%	
		OpacityMax			=	100%
		MinRadius			=	40
		MaxRadius			=	200
		MaxSelectedUnits	=	40
	End	
End	

ExperienceLevel	ArwenLevel5
	TargetNames				=	ElvenArwen
	RequiredExperience		=	ARWEN_LVL5_EXP_NEEDED
	ExperienceAward			=	ARWEN_LVL5_EXP_AWARD 	
	LevelUpFx				=	FX:GandalfLevelUp1FX
	;LevelUpOCL				=	OCL_GandalfLevelUp1OCL
	Rank					=	5
	AttributeModifiers		=	HeroLevelUpDamage4
	SelectionDecal
		Texture				=	decal_hero_good
		Style				=	SHADOW_ALPHA_DECAL
		OpacityMin			=	50%	
		OpacityMax			=	100%
		MinRadius			=	40
		MaxRadius			=	200
		MaxSelectedUnits	=	40
	End	
End	

ExperienceLevel	ArwenLevel6
	TargetNames				=	ElvenArwen
	RequiredExperience		=	ARWEN_LVL6_EXP_NEEDED
	ExperienceAward			=	ARWEN_LVL6_EXP_AWARD 
	LevelUpFx				=	FX:GandalfLevelUp1FX
	;LevelUpOCL				=	OCL_GandalfLevelUp1OCL
	Rank					=	6
	AttributeModifiers		=	HeroLevelUpDamage5
	SelectionDecal
		Texture				=	decal_hero_good
		Style				=	SHADOW_ALPHA_DECAL
		OpacityMin			=	50%	
		OpacityMax			=	100%
		MinRadius			=	40
		MaxRadius			=	200
		MaxSelectedUnits	=	40
	End	
End	

ExperienceLevel	ArwenLevel7
	TargetNames				=	ElvenArwen
	RequiredExperience		=	ARWEN_LVL7_EXP_NEEDED
	ExperienceAward			=	ARWEN_LVL7_EXP_AWARD 
	LevelUpFx				=	FX:GandalfLevelUp1FX
	;LevelUpOCL				=	OCL_GandalfLevelUp1OCL
	Rank					=	7
	AttributeModifiers		=	HeroLevelUpDamage6
	SelectionDecal
		Texture				=	decal_hero_good
		Style				=	SHADOW_ALPHA_DECAL
		OpacityMin			=	50%	
		OpacityMax			=	100%
		MinRadius			=	40
		MaxRadius			=	200
		MaxSelectedUnits	=	40
	End	
End	

ExperienceLevel	ArwenLevel8
	TargetNames				=	ElvenArwen
	RequiredExperience		=	ARWEN_LVL8_EXP_NEEDED
	ExperienceAward			=	ARWEN_LVL8_EXP_AWARD 
	LevelUpFx				=	FX:GandalfLevelUp1FX
	;LevelUpOCL				=	OCL_GandalfLevelUp1OCL
	Rank					=	8
	AttributeModifiers		=	HeroLevelUpDamage7
	SelectionDecal
		Texture				=	decal_hero_good
		Style				=	SHADOW_ALPHA_DECAL
		OpacityMin			=	50%	
		OpacityMax			=	100%
		MinRadius			=	40
		MaxRadius			=	200
		MaxSelectedUnits	=	40
	End	
End	

ExperienceLevel	ArwenLevel9
	TargetNames				=	ElvenArwen
	RequiredExperience		=	ARWEN_LVL9_EXP_NEEDED
	ExperienceAward			=	ARWEN_LVL9_EXP_AWARD 
	LevelUpFx				=	FX:GandalfLevelUp1FX
	;LevelUpOCL				=	OCL_GandalfLevelUp1OCL
	Rank					=	9
	AttributeModifiers		=	HeroLevelUpDamage8
	SelectionDecal
		Texture				=	decal_hero_good
		Style				=	SHADOW_ALPHA_DECAL
		OpacityMin			=	50%	
		OpacityMax			=	100%
		MinRadius			=	40
		MaxRadius			=	200
		MaxSelectedUnits	=	40
	End	
End	

ExperienceLevel	ArwenLevel10
	TargetNames				=	ElvenArwen
	RequiredExperience		=	ARWEN_LVL10_EXP_NEEDED
	ExperienceAward			=	ARWEN_LVL10_EXP_AWARD 
	LevelUpFx				=	FX:GandalfLevelUp1FX
	;LevelUpOCL				=	OCL_GandalfLevelUp1OCL
	Rank					=	10
	AttributeModifiers		=	HeroLevelUpDamage9
	Upgrades				= Upgrade_ArwenFloodTrigger
	SelectionDecal
		Texture				=	decal_hero_good
		Style				=	SHADOW_ALPHA_DECAL
		OpacityMin			=	50%	
		OpacityMax			=	100%
		MinRadius			=	40
		MaxRadius			=	200
		MaxSelectedUnits	=	40
	End	
End	
Armor ElfArmor
  Armor = DEFAULT       	 25%
  Armor = FROST          	10%   ;
  Armor = PIERCE		 25%
  Armor = STRUCTURAL		 10%     ; destroys all buildings.  All.  
End
Object ElvenArwen
CommandSet = NewArwenCommandSet
	SelectPortrait	 = CPFemaleElfArcher
	ButtonImage	 = HICAHFemaleElvenArcher

;//////////////////////powers///////////////////////
;crippling shot
AddModule
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_CrippleEnabler
		SpecialPowerTemplate	= SpecialAbilityLurtzCripple
		TriggeredBy				= Upgrade_LurtzCrippleTrigger
	End 
	
	Behavior = SpecialPowerModule ModuleTag_CrippleStarter                      
		SpecialPowerTemplate		= SpecialAbilityLurtzCripple
		UpdateModuleStartsAttack	= Yes
		StartsPaused				= Yes
		InitiateSound				= LurtzVoiceAttackCripplingStrike
	End
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_CrippleUpdate   
		SpecialPowerTemplate    = SpecialAbilityLurtzCripple
		SkipContinue			= Yes

		UnpackTime				= 1100	; Pull out arrow
		PreparationTime			= 1		; Quick shot
		PersistentPrepTime		= 500	; looping the quick shot
		PackTime				= 500	; back to idle
		MustFinishAbility		= Yes
		
		AwardXPForTriggering	= 0		
		StartAbilityRange		= LURTZ_CRIPPLE_RANGE_ABILTY_START
		
		SpecialWeapon			= IsenguardLurtzBowStun
		WhichSpecialWeapon		= 1
	End
;Stealth
Behavior = UnpauseSpecialPowerUpgrade ModuleTag_CreateAHeroCMStealthEnabler_Level1
	SpecialPowerTemplate = SpecialAbilityCreateAHeroCMStealth_Level1
	TriggeredBy = Upgrade_CreateAHeroCMStealth_Level1
End
Behavior = SpecialPowerModule ModuleTag_CreateAHeroCMStealthStarter_Level1
	SpecialPowerTemplate      = SpecialAbilityCreateAHeroCMStealth_Level1
	UpdateModuleStartsAttack  = Yes
	StartsPaused = Yes
End
End

	ReplaceModule ModuleTag_DRAW
	Draw = W3DScriptedModelDraw ModuleTag_DRAW1

		DefaultModelConditionState
			Model				 = CHAR_FE_U_SKN
			Skeleton			 = CHAR_FE_U_SKL
			WeaponLaunchBone		 = PRIMARY ARROW
		End
		ModelConditionState = WEAPONSET_TOGGLE_1
			Model				 = CHAR_FE_U_SKN
			Skeleton			 = CHAR_FE_U_SKL
		End
//================== ANIMATIONS =================================================================

//----------- Special Create A Hero Creation Screen Animations ---------------
AnimationState = CREATE_A_HERO_IN_CREATION_SCREEN CREATE_A_HERO_EXAMINE_SELF CREATE_A_HERO_SELECTED_CHEER 
	StateName			   = STATE_ExamineSelf
	Animation			   = ExamineSelf
		AnimationName	   = CHAR_FE_C_CLRA
		AnimationMode	   = ONCE
		AnimationBlendTime = 20
	End
End

AnimationState = CREATE_A_HERO_IN_CREATION_SCREEN CREATE_A_HERO_EXAMINE_WEAPON_RIGHT CREATE_A_HERO_SELECTED_CHEER 
	StateName			   = STATE_ExamineWeapon
	Animation			   = WeaponSwap
		AnimationName	   = CHAR_FE_C_WPNA
		AnimationMode	   = ONCE
		AnimationBlendTime = 20
	End
End

AnimationState = CREATE_A_HERO_IN_CREATION_SCREEN USER_75
 	StateName			   = STATE_SwapModels
 	Animation			   = WeaponSwap
 		AnimationName	   = CHAR_FE_C_ATNB CHAR_FE_C_ATND
 		AnimationMode	   = MANUAL
 		AnimationBlendTime = 0
 	End
End

//-----------------------------------------------------------------------------
AnimationState = CREATE_A_HERO_IN_CREATION_SCREEN CREATE_A_HERO_SELECTED_CHEER
	StateName = STATE_SelectedCheer
	Animation = Foot_ATNB // Bored Idle
		AnimationName	   = CHAR_FE_C_ATNB CHAR_FE_C_ATND
		AnimationMode	   = ONCE
		AnimationPriority  = 90
		AnimationBlendTime = 20
	End
	Animation = Foot_ATND // Bored Fidget
		AnimationName	   = CHAR_FE_C_ATND CHAR_FE_C_ATNB
		AnimationMode	   = ONCE
		AnimationPriority  = 10
		AnimationBlendTime = 20
	End
	Animation = Foot_ATNE // Bored Fidget
		AnimationName	   = CHAR_FE_C_ATNE CHAR_FE_C_ATND CHAR_FE_C_ATNB
		AnimationMode	   = ONCE
		AnimationPriority  = 3
		AnimationBlendTime = 20
	End
	Flags =	RESTART_ANIM_WHEN_COMPLETE
	BeginScript //script to set transition from moving
		Prev = CurDrawablePrevAnimationState()
		if Prev == "STATE_Unselected" then 
			CurDrawableSetTransitionAnimState("Trans_SelectedCheer") 
		end
//  		if Prev == "STATE_SwapModels" then 
//  			CurDrawableSetTransitionAnimState("Trans_SwapModels") 
//  		end
	EndScript
End

AnimationState = CREATE_A_HERO_IN_CREATION_SCREEN
	StateName = STATE_Unselected
	Animation = Foot_ATNB // Bored Idle
		AnimationName       = CHAR_FE_C_ATNB CHAR_FE_C_ATND
		AnimationMode       = ONCE
		AnimationPriority   = 90
		AnimationBlendTime = 10
	End
	Animation = Foot_ATND // Bored Fidget
		AnimationName       = CHAR_FE_C_ATND CHAR_FE_C_ATNB
		AnimationMode       = ONCE
		AnimationPriority   = 10
		AnimationBlendTime = 10
	End
	Animation = Foot_ATNE // Bored Fidget
		AnimationName       = CHAR_FE_C_ATNE CHAR_FE_C_ATND CHAR_FE_C_ATNB
		AnimationMode       = ONCE
		AnimationPriority   = 3
		AnimationBlendTime = 10
	End
	Flags =	RESTART_ANIM_WHEN_COMPLETE
 	BeginScript //script to set transition from moving
 		Prev = CurDrawablePrevAnimationState()
 		if Prev == "STATE_SwapModels" then 
 			CurDrawableSetTransitionAnimState("Trans_SwapModels") 
 		end
 	EndScript
End

TransitionState = Trans_ExamineWeapon
	Animation = Transition
		AnimationName = CHAR_FE_C_WPNA
		AnimationMode = ONCE
		AnimationBlendTime = 20
	End
End
TransitionState = Trans_ExamineSelf
	Animation = Transition
		AnimationName = CHAR_FE_C_CLRA
		AnimationMode = ONCE
		AnimationBlendTime = 20
	End
End
TransitionState = Trans_SelectedCheer
	Animation = Transition
		AnimationName = CHAR_FE_C_SLCA
		AnimationMode = ONCE
		AnimationBlendTime = 20
	End
End

TransitionState = Trans_SwapModels
	StateName = STATE_Unselected
	Animation = Transition
		AnimationName = CHAR_FE_C_ATNB CHAR_FE_C_ATND
		AnimationMode = ONCE
		AnimationBlendTime = 0
	End
End

//----------- Climbing/rappelling ---------------
AnimationState						= CLIMBING WEAPONSET_TOGGLE_1
	StateName						= STATE_Climbing
	Animation						= Climbing
		AnimationName				= CHAR_FE_U_WALB
		AnimationMode				= LOOP
		AnimationBlendTime			= 10
	End
	BeginScript//script to set transition from moving
		Prev = CurDrawablePrevAnimationState()
		if Prev == "STATE_Running"  then CurDrawableSetTransitionAnimState("Trans_RunningToClimbing_WeaponToggle") return end
	EndScript
End
TransitionState = Trans_RunningToClimbing_WeaponToggle
	Animation = Transition
		AnimationName = CHAR_FE_B_WALA
		AnimationMode = ONCE
	End
End

AnimationState						= CLIMBING
	StateName						= STATE_Climbing
	Animation						= Climbing
		AnimationName				= CHAR_FE_U_WALB
		AnimationMode				= LOOP
		AnimationBlendTime			= 10
	End
	BeginScript//script to set transition from moving
		Prev = CurDrawablePrevAnimationState()
		if Prev == "STATE_Running"  then CurDrawableSetTransitionAnimState("Trans_RunningToClimbing") return end
	EndScript
End
TransitionState = Trans_RunningToClimbing
	Animation = Transition
		AnimationName = CHAR_FE_U_WALA
		AnimationMode = ONCE
	End
End

AnimationState						= RAPPELLING WEAPONSET_TOGGLE_1
	StateName						= STATE_Rappelling
	Animation						= Rapelling
		AnimationName				= CHAR_FE_U_WALD
		AnimationMode				= LOOP
		AnimationBlendTime			= 10
	End
	BeginScript//script to set transition from moving
		Prev = CurDrawablePrevAnimationState()
		if Prev == "STATE_Climbing"  then CurDrawableSetTransitionAnimState("Trans_ClimbingToRappelling") return end
	EndScript
End
AnimationState						= RAPPELLING
	StateName						= STATE_Rappelling
	Animation						= Rapelling
		AnimationName				= CHAR_FE_U_WALD
		AnimationMode				= LOOP
		AnimationBlendTime			= 10
	End
	BeginScript//script to set transition from moving
		Prev = CurDrawablePrevAnimationState()
		if Prev == "STATE_Climbing"  then CurDrawableSetTransitionAnimState("Trans_ClimbingToRappelling") return end
	EndScript
End
TransitionState = Trans_ClimbingToRappelling
	Animation = Transition
		AnimationName = CHAR_FE_U_WALC
		AnimationMode = ONCE
	End
End
TransitionState = Trans_RappellingToRunning_WeaponToggle
	Animation = Transition
		AnimationName = MUGblnSwrd_B_WALE
		AnimationMode = ONCE
	End
End
TransitionState = Trans_RappellingToRunning
	Animation = Transition
		AnimationName = MUGblnSwrd_U_WALE
		AnimationMode = ONCE
	End
End
	



// --------- MOUNTED  ------------

// --- Dying Anims
AnimationState					=	DYING AFLAME MOUNTED
	Animation					=	Fire
		AnimationName			=	CHAR_FE_M_MFDA 
		AnimationSpeedFactorRange = 0.9 1.1
	End
	BeginScript
		CurDrawableHideSubObject("arrow") //Circumvents blend issues when the arrow is being shown...
	EndScript
End

AnimationState				=	DYING SPLATTED MOUNTED
	Animation
		AnimationName		=	CHAR_FE_M_LNDA
		AnimationMode		=	ONCE
	End
End
AnimationState        = DYING MOUNTED
	StateName           = STATE_Sword
	Animation
		AnimationName     = CHAR_FE_M_DIEA
		AnimationMode     = ONCE
	End
End

AnimationState				=	STUNNED_STANDING_UP MOUNTED
	Animation
		AnimationName		=	CHAR_FE_M_GTPA
		AnimationMode		=	ONCE
		AnimationSpeedFactorRange = 1.5 1.5
	End
End

AnimationState				=	STUNNED MOUNTED
	Animation
		AnimationName		=	CHAR_FE_M_LNDA
		AnimationMode		=	ONCE
	End
End

AnimationState				=	FREEFALL MOUNTED
	Animation
		AnimationName		=	CHAR_FE_M_FLYA
		AnimationMode		=	LOOP
	End
	Flags					=	RANDOMSTART
End

AnimationState				=	STUNNED_FLAILING MOUNTED
	Animation
		AnimationName		=	CHAR_FE_M_FLYA
		AnimationMode		=	LOOP
	End
	Flags					=	RANDOMSTART
End

AnimationState        = PASSENGER MOUNTED
	Animation
		AnimationName       = CHAR_FE_M_GBDA
		AnimationMode       = LOOP
	End
	Flags               = RANDOMSTART
End

AnimationState        = MOUNTED LEVELED	// This state clears itself in 3 of your Earth seconds
	Animation
		AnimationName           = CHAR_FE_M_LVLA
		AnimationMode       = ONCE
	End
End

AnimationState        = MOUNTED RAISING_FLAG	// This state clears itself in 3 of your Earth seconds
	Animation
		AnimationName           = CHAR_FE_M_CHRA
		AnimationMode		=	ONCE
	End
	Flags					=	RESTART_ANIM_WHEN_COMPLETE
End

// --- Attacking Anims		
AnimationState				= FIRING_OR_PREATTACK_A MOUNTED	// Melee attack.
	Animation
		AnimationName		= CHAR_FE_M_ATKA CHAR_FE_M_ATKB
		AnimationMode		= ONCE
		UseWeaponTiming		= Yes
	End
End

// --- Moving Anims
AnimationState				=	MOUNTED TURN_LEFT_HIGH_SPEED
	Animation
		AnimationName		=	CHAR_FE_M_TNL1
		AnimationMode		=	LOOP
		AnimationSpeedFactorRange= 1.8 1.8
		AnimationBlendTime	=	20
	End
End

AnimationState				=	MOUNTED TURN_RIGHT_HIGH_SPEED
	Animation
		AnimationName		=	CHAR_FE_M_TNR1
		AnimationMode		=	LOOP
		AnimationSpeedFactorRange= 1.8 1.8
		AnimationBlendTime	=	20
	End
End

AnimationState				=	MOVING TURN_LEFT MOUNTED
	Animation
		AnimationName		=	CHAR_FE_M_TRNL
		AnimationMode		=	LOOP
	End
//			//ParticleSysBone			=	None CalvaryDustTrails
End

AnimationState				=	MOVING TURN_RIGHT MOUNTED
	Animation
		AnimationName		=	CHAR_FE_M_TRNR
		AnimationMode		=	LOOP
	End
//			//ParticleSysBone			=	None CalvaryDustTrails
End

AnimationState				=	MOVING ACCELERATE MOUNTED
	Animation
		AnimationName		=	CHAR_FE_M_ACCL
		AnimationMode		=	LOOP
	End
	//ParticleSysBone			=	None CalvaryDustTrails
End

AnimationState				=	MOVING DECELERATE MOUNTED
	Animation
		AnimationName		=	CHAR_FE_M_DECL
		AnimationMode		=	ONCE
	End
	//ParticleSysBone			=	None CalvaryDustTrails
End

AnimationState				=	MOVING WALKING MOUNTED
	Animation
		AnimationName		=	CHAR_FE_M_WLKA
		AnimationMode		=	LOOP
	End
	Flags					=	RANDOMSTART
	//ParticleSysBone			=	None InfantryDustTrails  
End

AnimationState				=	MOVING BACKING_UP MOUNTED
	Animation
		AnimationName		=	CHAR_FE_M_BAKA
		AnimationMode		=	LOOP
	End
	Flags					=	RANDOMSTART
	//ParticleSysBone			=	None InfantryDustTrails  
End

AnimationState        = MOUNTED MOVING FIRING_OR_PREATTACK_A
	ShareAnimation		= Yes
	Animation
		AnimationName       = CHAR_FE_M_ATRA
		AnimationMode       = LOOP
	End
	Flags               = RANDOMSTART  
End

AnimationState				=	MOVING MOUNTED
	Animation
		AnimationName		=	CHAR_FE_M_RUNA
		AnimationMode		=	LOOP
	End
 	Flags					=	RANDOMSTART
	//ParticleSysBone			=	None CalvaryDustTrails  
End

// --- Selected Anims
AnimationState				=	SELECTED MOUNTED
	SimilarRestart			=   Yes			
	StateName				=	AtAttentionIdleMounted
	Animation				=	ATNB
		AnimationName		=	CHAR_FE_M_ATNB
		AnimationMode		=	LOOP
	End
	BeginScript
		Prev = CurDrawablePrevAnimationState()
		if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Select") end
		if Prev == "AtAttentionIdleMounted" then CurDrawableSetTransitionAnimState("TRANS_Select") end
	EndScript
End

TransitionState				=	TRANS_Select
	Animation
		AnimationName		=	CHAR_FE_M_ATNA
		AnimationMode		=	ONCE
	End
End

// --- Idle Anims
AnimationState				= MOUNTED
	Animation
		AnimationName		=	CHAR_FE_M_IDLA
		AnimationPriority	=	20
		AnimationMode		=	ONCE
		AnimationBlendTime	=	15
	End
	Flags				=	RESTART_ANIM_WHEN_COMPLETE
End

// --------- UNMOUNTED  ------------

//------------------  DYING -------------------------------------------------------------

// --- Flying through the air.
AnimationState        = STUNNED_FLAILING WEAPONSET_TOGGLE_1
	StateName           = STATE_Bow
	Animation
		AnimationName     = CHAR_FE_B_FLYA
		AnimationMode     = LOOP
	End
	Flags               = RANDOMSTART
End

AnimationState        = STUNNED_FLAILING 
	StateName           = STATE_Sword
	Animation
		AnimationName     = CHAR_FE_U_FLYA
		AnimationMode     = LOOP
	End
	Flags               = RANDOMSTART
End

// --- Dying anims
AnimationState        = DYING SPLATTED WEAPONSET_TOGGLE_1
	StateName           = STATE_Bow
	Animation
		AnimationName     = CHAR_FE_B_LNDA
		AnimationMode     = ONCE
	End
End

AnimationState        = DYING SPLATTED
	StateName           = STATE_Sword
	Animation
		AnimationName     = CHAR_FE_U_LNDA
		AnimationMode     = ONCE
	End
End

AnimationState        = DYING WEAPONSET_TOGGLE_1	//WEAPONSTATE_CLOSE_RANGE
	StateName           = STATE_Bow
	Animation
		AnimationName     = CHAR_FE_B_DIEA
		AnimationMode     = ONCE
	End
End

AnimationState        = DYING
	StateName           = STATE_Sword
	Animation
		AnimationName     = CHAR_FE_U_DIEA
		AnimationMode     = ONCE
	End
	Animation           = GUHero_DIEB
		AnimationName     = CHAR_FE_U_DIEB
		AnimationMode     = ONCE
	End
End


// --- Stunned anims


AnimationState        = STUNNED_STANDING_UP WEAPONSET_TOGGLE_1
	StateName           = STATE_Bow
	Animation
		AnimationName     = CHAR_FE_B_GTPA
		AnimationMode     = ONCE
		AnimationSpeedFactorRange = 1.5 1.5
	End
End

AnimationState        = STUNNED_STANDING_UP
	StateName           = STATE_Sword
	Animation
		AnimationName     = CHAR_FE_U_GTPA
		AnimationMode     = ONCE
		AnimationSpeedFactorRange = 1.5 1.5
	End
End

AnimationState        = STUNNED WEAPONSET_TOGGLE_1
	StateName           = STATE_Bow
	Animation
		AnimationName     = CHAR_FE_B_LNDA
		AnimationMode     = ONCE
	End
End

AnimationState        = STUNNED 
	StateName           = STATE_Sword
	Animation           = GUHero_LNDA
		AnimationName     = CHAR_FE_U_LNDA
		AnimationMode     = ONCE
	End
End				

//------------------ SPECIAL POWER ANIMS ---------------------


// RAIN OF ARROWS SPECIAL POWER //
AnimationState				= PACKING_TYPE_1  WEAPONSET_TOGGLE_1
	StateName				= rainofarrows
	Animation
		AnimationName		= CHAR_FE_B_ATKA2
		AnimationMode		= LOOP
	End
//			FXEvent	= Frame:6	Name: FX_SarumanDominateAtSelf
End

// DOMINATE SPECIAL POWER //
AnimationState				= PACKING_TYPE_1
	StateName				= Curse
	Animation
		AnimationName		= CHAR_FE_U_LVLA
		AnimationMode		= ONCE
	End
//			FXEvent	= Frame:6	Name: FX_SarumanDominateAtSelf
End

// TELEPORT SPECIAL POWER //
AnimationState				= PACKING_TYPE_3
	StateName				= Curse
	Animation
		AnimationName		= CHAR_FE_U_SPCA
		AnimationMode		= ONCE
	End
//			FXEvent	= Frame:6	Name: FX_SarumanDominateAtSelf
End

//--------------------- Wound Arrow anim
AnimationState        =  SPECIAL_WEAPON_TWO
	StateName = STATE_Bow
	Animation
		AnimationName       = CHAR_FE_U_SPCL CHAR_FE_U_ATKC
		AnimationMode       = ONCE
	End
	FrameForPristineBonePositions = 59
	BeginScript
		CurDrawableShowSubObject("arrow")
	EndScript
End
		
//------------------ ATTACKING --------------------------------------------------------------------
		// Attacking Anims [Weapon_A]
		
		
		
//		AnimationState        = MOVING WEAPONSET_TOGGLE_1 FIRING_OR_PREATTACK_A
//			Animation           = TrotAndFire
//				AnimationName       = CHAR_FE_U_ATRA
//				AnimationMode       = LOOP
//			End
//			Flags               = RANDOMSTART
//			StateName = RunAndSwing
//		End
//		
//		AnimationState        = FIRING_OR_PREATTACK_A WEAPONSET_TOGGLE_1
//			StateName           = STATE_Sword
//			
//			Animation           = ATKD
//				AnimationName     = CHAR_FE_U_ATKD
//				AnimationMode     = ONCE
//				UseWeaponTiming		= Yes
//				AnimationSpeedFactorRange = 1.149 1.149
//			End
//			
//			Animation           = ATKE
//				AnimationName    = CHAR_FE_U_ATKE
//				AnimationMode     = ONCE
//				UseWeaponTiming		= Yes
//				AnimationSpeedFactorRange = 1.149 1.149
//			End
//			
//			Animation           = ATKF
//				AnimationName    = CHAR_FE_U_ATKF
//				AnimationMode     = ONCE
//				AnimationSpeedFactorRange = 1.47 1.47
//			End
//			Flags				=	RESTART_ANIM_WHEN_COMPLETE
//			//	FrameForPristineBonePositions = 59
//			BeginScript
//				Prev = CurDrawablePrevAnimationState()
//				if Prev == "STATE_Bow" then CurDrawableSetTransitionAnimState("TRANS_BowToSword") end
//			EndScript
//		End

//------------------ MOVING -------------------------------------------------------------

		AnimationState        = MOVING USER_4                 // Moving slaughter
			StateName           = Slaughter
			Flags               = RANDOMSTART
			//ParticleSysBone     = None InfantryDustTrails
			Animation           = GUHero_ATKE
				AnimationName     = CHAR_FE_U_ATKE
				AnimationMode     = LOOP
			End
			StateName           = NoSword
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Sword" then CurDrawableSetTransitionAnimState("TRANS_SwordToBow") end
			EndScript
		End

		//--- Running with bow
		AnimationState			= MOVING WEAPONSET_TOGGLE_1		//WEAPONSTATE_CLOSE_RANGE
			StateName           = STATE_RunningBow
			Flags               = RANDOMSTART
			//ParticleSysBone    = None InfantryDustTrails
			Animation
				AnimationName   = CHAR_FE_B_RUNA
//				AnimationMode   = LOOP
				AnimationSpeedFactorRange = 0.85 0.85
//				Distance		= 28
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwordToBow") end
				if Prev == "STATE_RunningSword" then CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Running") end
				if Prev == "STATE_Rappelling"  then CurDrawableSetTransitionAnimState("Trans_RappellingToRunning_WeaponToggle") return end
			EndScript
		End

		//--- Running with sword
		AnimationState			= MOVING
			StateName           = STATE_RunningSword
			Flags               = RANDOMSTART
			//ParticleSysBone    = None InfantryDustTrails
			Animation
				AnimationName   = CHAR_FE_U_RUNA
//				AnimationMode   = LOOP
				AnimationSpeedFactorRange = 0.85 0.85
//				Distance = 28
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Bow" then CurDrawableSetTransitionAnimState("TRANS_BowToSword") end
				if Prev == "STATE_RunningBow" then CurDrawableSetTransitionAnimState("TRANS_BowToSword_Running") end
				if Prev == "STATE_Rappelling"  then CurDrawableSetTransitionAnimState("Trans_RappellingToRunning") return end
			EndScript
		End

		//---------------------------------------------------
		//New style firing with bow
		AnimationState					=	PREATTACK_A WEAPONSET_TOGGLE_1
			StateName					=	STATE_Firing
			Animation					=	ReadyToDrawn
				AnimationName			=	CHAR_FE_B_ATKA1
				AnimationMode			=	ONCE
//				UseWeaponTiming			=	Yes			// UseWeaponTiming plus random weapon field equals desync.  Leaving as warning
				//AnimationBlendTime		=	10
			End
		End

		AnimationState					=	FIRING_OR_RELOADING_A WEAPONSET_TOGGLE_1
			StateName					=	STATE_Firing
			Animation					=	LooseReloadDraw
				AnimationName			=	CHAR_FE_B_ATKA2
				AnimationMode			=	ONCE
//				UseWeaponTiming			=	Yes			// UseWeaponTiming plus random weapon field equals desync.  Leaving as warning
				AnimationSpeedFactorRange = 1.1 1.1		// Therefore, this is all you get.  A slight speed up so that the animation can always finish before any possible random value Design sets the range for
				//AnimationBlendTime		=	10
			End
		End
		//---------------------End New style firing

		//AnimationState					=	CONTINUOUS_FIRE_MEAN WEAPONSET_TOGGLE_1
		//	Animation					=	HangFrameWhileCoasting
		//		AnimationName			=	CHAR_FE_B_ATKA2
		//		AnimationMode			=	MANUAL
		//	End
		//End
		
		//AnimationState						= CONTINUOUS_FIRE_SLOW WEAPONSET_TOGGLE_1
		//	//StateName						= STATE_Idle_Bow
		//	Animation						= PutAwayArrow
		//		AnimationName				= CHAR_FE_U_ATKA3
		//		AnimationMode				= ONCE
		//	End
		//End
				
		//End New style firing
		//---------------------------------------------------

		AnimationState				= FIRING_OR_PREATTACK_A WEAPONSET_TOGGLE_1
			StateName				= STATE_Firing
			Animation
				AnimationName		= CHAR_FE_B_ATKA1
				AnimationMode		= ONCE
				UseWeaponTiming		= No			// UseWeaponTiming plus random weapon field equals desync.  Leaving as warning
			End
		End

		AnimationState				= FIRING_OR_PREATTACK_A // Melee attack.
			Animation
				AnimationName		= CHAR_FE_U_ATKA1 CHAR_FE_U_ATKA CHAR_FE_U_ATKB
				AnimationMode		= ONCE
				UseWeaponTiming		= Yes
			End
		End


		
//-------------------- HIT REACTIONS -----------------------------------------------------------

// this hit animation attack stance
		AnimationState = EMOTION_ALERT HIT_REACTION WEAPONSET_TOGGLE_1
			Animation
				AnimationName = CHAR_FE_B_HITA
				AnimationMode = ONCE
			End
		End

		AnimationState = HIT_REACTION WEAPONSET_TOGGLE_1
			Animation
				AnimationName = CHAR_FE_B_HITA
				AnimationMode = ONCE
			End
		End

		AnimationState = HIT_REACTION
			Animation = Sword_HITA
				AnimationName = CHAR_FE_U_HITA
				AnimationMode = ONCE
			End
			Animation = Sword_HITB
				AnimationName = CHAR_FE_U_HITB
				AnimationMode = ONCE
			End

			BeginScript
				PrevAnim = CurDrawablePrevAnimation()
				if PrevAnim == "Foot_IDLB"
				then
					return "Sword_HITB"
				else
					return "Swort_HITA"
				end
			EndScript
		End

//------------ SPECIAL POWERS ------------------------------------------------------------------		

		AnimationState		  =	THROWN_PROJECTILE
			Animation
				AnimationName =	CHAR_FE_U_LEP2
				AnimationMode =	LOOP
			End
		End

		AnimationState		  =	ABOUT_TO_HIT
			Animation
				AnimationName =	CHAR_FE_U_LEP3
				AnimationMode =	ONCE
			End
		End

		AnimationState				= SPECIAL_POWER_1							; Aragorn shouting Elendil anim
			StateName				= STATE_ready
			Animation
				AnimationName		= CHAR_FE_U_SPCA
				AnimationMode		= ONCE
			End
			ParticleSysBone			= B_SWORDBONE ElendilFlare FollowBone:yes
			ParticleSysBone			= B_SWORDBONE ElendilSwordFlare FollowBone:yes
;			FXEvent	= Name: FX_ElendilGlowEvent
		End

		// WORD OF POWER ANIMS ON FOOT //
		AnimationState		  =	SPECIAL_WEAPON_ONE
			StateName		  =	Attacking
			Animation
				AnimationName =	CHAR_FE_U_SPCA
				AnimationMode =	ONCE
			End
			//FXEvent			  =	Frame:5	Name:FX_GandalfPreAttackBlast
		End

		//	WIZARD BLAST ANIMS MOUNTED //
		AnimationState		  =	SPECIAL_WEAPON_TWO MOUNTED
			StateName		  =	Attacking
			Animation
				AnimationName =	CHAR_FE_U_SPLD CHAR_FE_U_ATKA
				AnimationMode =	ONCE
			End
		End
	
		//	WIZARD BLAST ANIMS ON FOOT //
		AnimationState		  =	SPECIAL_WEAPON_TWO
			StateName		  =	Attacking
			Animation
				AnimationName =	CHAR_FE_U_SPCB CHAR_FE_U_ATKA
				AnimationMode =	ONCE
			End
		End

		//	ISTARI LIGHT STAFF WEAPON MOUNTED //
		AnimationState		  =	SPECIAL_WEAPON_THREE MOUNTED	// FIRING_OR_PREATTACK_C
			StateName		  =	Attacking
			Animation		  =	StaffLaser
				AnimationName =	CHAR_FE_U_SPCD CHAR_FE_U_ATKA
				AnimationMode =	ONCE
			End
			FXEvent			  =	Frame:30 Name:FX_GandalfStaffFlare
		End

		//	ISTARI LIGHT STAFF WEAPON ON FOOT //
		AnimationState		  =	SPECIAL_WEAPON_THREE // FIRING_OR_PREATTACK_C
			StateName		  =	Attacking
			Animation		  =	StaffLaser
				AnimationName =	CHAR_FE_U_SPCE CHAR_FE_U_ATKA//	isitari's light?
				AnimationMode =	ONCE
			End
			FXEvent			  =	Frame:30 Name:FX_GandalfStaffFlare
		End
		
		; Throwing and cripple strike
		AnimationState		  =	SPECIAL_WEAPON_FOUR
			StateName		  =	Attacking
			Animation
				AnimationName =	CHAR_FE_U_SPCD
				AnimationMode =	ONCE
			End
			FrameForPristineBonePositions	= 44
		End

		AnimationState		  =	SPECIAL_WEAPON_FIVE
			StateName		  =	Attacking
			Animation
				AnimationName =	CHAR_FE_U_SPCE
				AnimationMode =	ONCE
			End
		End

		AnimationState		  =	SPECIAL_WEAPON_SIX
			StateName		  =	Attacking
			Animation
				AnimationName =	CHAR_FE_U_SPCF
				AnimationMode =	ONCE
			End
		End

		//	Special Power 1
		AnimationState		  =	PACKING_TYPE_1 UNPACKING
			StateName		  =	Attacking
			Animation		  =	LightningSwordStart
				AnimationName =	CHAR_FE_U_SPCC CHAR_FE_U_ATKA
				AnimationMode =	ONCE
			End
			FXEvent			  =	Frame:14 Name:FX_CreateAHeroLightningCharge
//			FXEvent			  =	Frame:70 Name:FX_GandalfLightningFizzle
			FXEvent			  =	Frame:14 Name:FX_GandalfLightningSword	FrameStop:70
		End
	
		AnimationState		  =	PACKING_TYPE_1 PREPARING
			StateName		  =	Attacking
			Animation		  =	LightningSwordLoop
				AnimationName =	CHAR_FE_U_SPCA CHAR_FE_U_ATKA
				AnimationMode =	LOOP
			End
		End

		AnimationState		  =	PACKING_TYPE_1 PACKING
			StateName		  =	Attacking
			Animation		  =	LightningSwordPutAway
				AnimationName =	CHAR_FE_U_SPCB CHAR_FE_U_ATKA
				AnimationMode =	ONCE
			End
		End

		// (specific) dwarf train allies.
		AnimationState		  =	PACKING_TYPE_2 CREATE_A_HERO_20 CREATE_A_HERO_21
			Animation
				AnimationName =	CHAR_FE_U_SPCC
				AnimationMode =	LOOP
			End
		End

		//	Special Power 2
		AnimationState		  =	PACKING_TYPE_2 UNPACKING
			StateName		  =	Attacking
			Animation		  =	LightningSwordStart
				AnimationName =	CHAR_FE_U_SPCC CHAR_FE_U_ATKA
				AnimationMode =	ONCE
			End
			FXEvent			  =	Frame:14 Name:FX_CreateAHeroLightningCharge
//			FXEvent			  =	Frame:70 Name:FX_GandalfLightningFizzle
			FXEvent			  =	Frame:14 Name:FX_GandalfLightningSword	FrameStop:70
		End
	
		AnimationState		  =	PACKING_TYPE_2 PREPARING
			StateName		  =	Attacking
			Animation		  =	LightningSwordLoop
				AnimationName =	CHAR_FE_U_SPCA CHAR_FE_U_ATKA
				AnimationMode =	LOOP
			End
		End

		AnimationState		  =	PACKING_TYPE_2 PACKING
			StateName		  =	Attacking
			Animation		  =	LightningSwordPutAway
				AnimationName =	CHAR_FE_U_SPCB CHAR_FE_U_ATKA
				AnimationMode =	ONCE
			End
		End
		
//----------- Captain of Gondor - Sword --------------------------------------------
		AnimationState        = PACKING_TYPE_2 WEAPONSET_TOGGLE_1
			StateName		  =	CaptainPower
			Animation           = GUHero_CHRC
				AnimationName     = CHAR_FE_U_CHRC
				AnimationMode     = ONCE
				AnimationSpeedFactorRange = 1.2 1.2
			End
		End

//----------- Captain of Gondor - Bow -----------------------------------------------
		AnimationState        = PACKING_TYPE_2
			StateName		  =	STATE_CaptainBow
			Animation           = GUHero_CHRD
				AnimationName     = CHAR_FE_U_SPCE CHAR_FE_U_SPCA CHAR_FE_U_CHRD
				AnimationMode     = ONCE
//				AnimationSpeedFactorRange = 0.75 0.75
			End
		End

		//	Special Power 3
		AnimationState		  =	PACKING_TYPE_3 UNPACKING
			StateName		  =	Attacking
			Animation		  =	LightningSwordStart
				AnimationName =	CHAR_FE_U_SPCC CHAR_FE_U_ATKA
				AnimationMode =	ONCE
			End
			FXEvent			  =	Frame:14 Name:FX_CreateAHeroLightningCharge
//			FXEvent			  =	Frame:70 Name:FX_GandalfLightningFizzle
			FXEvent			  =	Frame:14 Name:FX_GandalfLightningSword	FrameStop:70
		End
	
		AnimationState		  =	PACKING_TYPE_3 PREPARING
			StateName		  =	Attacking
			Animation		  =	LightningSwordLoop
				AnimationName =	CHAR_FE_U_SPCA CHAR_FE_U_ATKA
				AnimationMode =	LOOP
			End
		End

		AnimationState		  =	PACKING_TYPE_3 PACKING
			StateName		  =	Attacking
			Animation		  =	LightningSwordPutAway
				AnimationName =	CHAR_FE_U_SPCB CHAR_FE_U_ATKA
				AnimationMode =	ONCE
			End
		End
		
		//	Special Power 4
		AnimationState		  =	PACKING_TYPE_4 UNPACKING	  
			Animation		  
				AnimationName =	CHAR_FE_U_SPCA
				AnimationMode =	ONCE
			End
		End
	
		AnimationState		  =	PACKING_TYPE_4 PREPARING
			Animation		 
				AnimationName =	CHAR_FE_U_SPCA
				AnimationMode =	ONCE
			End
		End

		AnimationState		  =	PACKING_TYPE_4 PACKING
			Animation		  
				AnimationName =	CHAR_FE_U_SPCA
				AnimationMode =	ONCE
			End
		End
		
		//	Special Power 5
		
		//		AnimationState		  =	PACKING_TYPE_5 UNPACKING WEAPONSET_TOGGLE_1  
//			Animation		  
//				AnimationName =	CHAR_FE_B_SPCB
//				AnimationMode =	ONCE
//			End
//		End
//	
//		AnimationState		  =	PACKING_TYPE_5 PREPARING WEAPONSET_TOGGLE_1
//			Animation		 
//				AnimationName =	CHAR_FE_B_SPCB
//				AnimationMode =	ONCE
//			End
//		End

		AnimationState		  =	PACKING_TYPE_5 PACKING WEAPONSET_TOGGLE_1
			Animation		  
				AnimationName =	CHAR_FE_B_SPCB
				AnimationMode =	ONCE
				AnimationSpeedFactorRange = 0.7333 0.7333
			End
		End
		
//		AnimationState		  =	PACKING_TYPE_5 UNPACKING	  
//			Animation		  
//				AnimationName =	CHAR_FE_U_SPCB
//				AnimationMode =	ONCE
//			End
//		End
//	
//		AnimationState		  =	PACKING_TYPE_5 PREPARING
//			Animation		 
//				AnimationName =	CHAR_FE_U_SPCB
//				AnimationMode =	ONCE
//			End
//		End

		AnimationState		  =	PACKING_TYPE_5 PACKING
			Animation		  
				AnimationName =	CHAR_FE_U_SPCB
				AnimationMode =	ONCE
			End
		End
		
		//	Special Power 6
//		AnimationState		  =	PACKING_TYPE_6 UNPACKING	  
//			Animation		  
//				AnimationName =	CHAR_FE_U_SPCD
//				AnimationMode =	ONCE
//			End
//		End
//	
//		AnimationState		  =	PACKING_TYPE_6 PREPARING
//			Animation		 
//				AnimationName =	CHAR_FE_U_SPCD
//				AnimationMode =	ONCE
//			End
//		End

		AnimationState		  =	PACKING_TYPE_6 PACKING
			Animation		  
				AnimationName =	CHAR_FE_U_SPCD
				AnimationMode =	ONCE
			End
		End




//====== LEVELED
		AnimationState				= LEVELED WEAPONSET_TOGGLE_1	// This state clears itself in 3 seconds
			Animation				= LevelUp
				AnimationName		= CHAR_FE_B_CHRA CHAR_FE_B_LVLA
				AnimationMode		= ONCE
			End
		End

		AnimationState				= LEVELED 						// This state clears itself in 3 seconds
			Animation				= LevelUp
				AnimationName		= CHAR_FE_U_CHRA CHAR_FE_U_LVLA
				AnimationMode		= ONCE
			End
		End

//---------------------- EMOTIONS ---------------------------------------------------------------

		// cheer, mounted
		AnimationState				=	EMOTION_CELEBRATING MOUNTED
			Animation 
				AnimationName		=	CHAR_FE_M_CHRA CHAR_FE_M_IRFA
				AnimationMode		=	ONCE
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End

		// cheer, w/ bow on foot
		AnimationState				=	EMOTION_CELEBRATING WEAPONSET_TOGGLE_1
			Animation 
				AnimationName		=	CHAR_FE_B_CHRA
				AnimationMode		=	ONCE
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End

		// cheer, on foot
		AnimationState				=	EMOTION_CELEBRATING
			Animation CHRA
				AnimationName		=	CHAR_FE_U_CHRA CHAR_FE_U_TNTA
				AnimationMode		=	ONCE
			End
			Animation CHRB
				AnimationName		=	CHAR_FE_U_CHRB CHAR_FE_U_CHRA CHAR_FE_U_TNTA
				AnimationMode		=	ONCE
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End
		
		// raise flag, w/ bow on foot
		AnimationState				=	RAISING_FLAG WEAPONSET_TOGGLE_1
			Animation 
				AnimationName		=	CHAR_FE_B_CHRA
				AnimationMode		=	ONCE
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End

		// cheer, on foot
		AnimationState				=	RAISING_FLAG
			Animation CHRA
				AnimationName		=	CHAR_FE_U_CHRA CHAR_FE_U_TNTA
				AnimationMode		=	ONCE
			End
			Animation CHRB
				AnimationName		=	CHAR_FE_U_CHRB CHAR_FE_U_CHRA CHAR_FE_U_TNTA
				AnimationMode		=	ONCE
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End
		
		// taunt, mounted
		AnimationState				=	EMOTION_TAUNTING MOUNTED
			Animation 
				AnimationName		=	CHAR_FE_M_TNTA CHAR_FE_M_IRFA
				AnimationMode		=	ONCE
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End
		
		// taunt, w/ bow on foot
		AnimationState				=	EMOTION_TAUNTING WEAPONSET_TOGGLE_1
			Animation 
				AnimationName		=	CHAR_FE_B_TNTA
				AnimationMode		=	ONCE
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End
		
		// taunt, on foot
		AnimationState				=	EMOTION_TAUNTING
			Animation CHRA
				AnimationName		=	CHAR_FE_U_TNTA
				AnimationMode		=	ONCE
			End
			Animation CHRB
				AnimationName		=	CHAR_FE_U_TNTB CHAR_FE_U_TNTA
				AnimationMode		=	ONCE
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End
		
// 	Animation
// 		AnimationName				= RUMerry_CHRA
// 		AnimationMode				= ONCE
// 	End
// 	Animation
// 		AnimationName				= RUMerry_CHRB
// 		AnimationMode				= ONCE
// 	End
// 	Flags							= RESTART_ANIM_WHEN_COMPLETE
// End
// 
// AnimationState						= EMOTION_TAUNTING
// 	Animation
// 		AnimationName				= RUMerry_TNTB
// 		AnimationMode				= LOOP
// 	End
// End
// 
// AnimationState					= EMOTION_ALERT WEAPONSET_TOGGLE_1
// 	StateName					= STATE_Ready_Rocks
// 	Animation					= IDLA
// 		AnimationName			= RUMerry_IDLA
// 		AnimationMode			= LOOP
// 	End
// End
// AnimationState					= EMOTION_ALERT
// 	StateName					= STATE_Ready_Sword
// 	Animation
// 		AnimationName			= RUMerry_IDLB
// 		AnimationMode			= LOOP
// 	End
// End
		


//====== ENGAGED
		AnimationState				= ENGAGED WEAPONSET_TOGGLE_1
			StateName				= STATE_ready
			Animation
				AnimationName		= CHAR_FE_B_IDLA
				AnimationMode		= ONCE
			End
		End
		AnimationState				= ENGAGED
			StateName				= STATE_ready
			Animation
				AnimationName		= CHAR_FE_U_IDLA
				AnimationMode		= ONCE
			End
		End
		AnimationState				= BETWEEN_FIRING_SHOTS_A WEAPONSET_TOGGLE_1
			StateName				= STATE_ready
			Animation
				AnimationName		= CHAR_FE_B_IDLA
				AnimationMode		= ONCE
			End
		End
		AnimationState				= BETWEEN_FIRING_SHOTS_A
			StateName				= STATE_ready
			Animation
				AnimationName		= CHAR_FE_U_IDLA
				AnimationMode		= ONCE
			End
		End
		
// --- Idle Toggled

		AnimationState = SELECTED WEAPONSET_TOGGLE_1
			StateName				= STATE_Selected_Bow
			Animation				= Selected_Loop
				AnimationName		= CHAR_FE_B_ATNB
				AnimationMode		= LOOP
				AnimationBlendTime	= 10
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Idle_Bow" then CurDrawableSetTransitionAnimState("TRANS_BoredToSelectedBow") end
			EndScript
			Flags = RESTART_ANIM_WHEN_COMPLETE
		End

		AnimationState = SELECTED
			StateName				= STATE_Selected_Sword
			Animation				= Selected_Loop
				AnimationName		= CHAR_FE_U_ATNB
				AnimationMode		= LOOP
				AnimationBlendTime	= 10
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Idle_Sword" then CurDrawableSetTransitionAnimState("TRANS_BoredToSelectedSword") end
			EndScript
			Flags = RESTART_ANIM_WHEN_COMPLETE
		End


		AnimationState				= WEAPONSET_TOGGLE_1
			StateName				= STATE_Idle_Bow
			Animation
				AnimationName		=	CHAR_FE_B_IDLA
				AnimationPriority	=	20
				AnimationMode		=	ONCE
				AnimationBlendTime	=	15
			End
			Flags				=	RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Idle_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwordToBow") end
			EndScript
		End

		IdleAnimationState
			StateName					= STATE_Idle_Sword	
			Animation = Foot_IDLB // Bored Idle
				AnimationName       = CHAR_FE_U_IDLB
				AnimationMode       = ONCE
				AnimationPriority   = 20
			End
			Animation = Foot_IDLC // Bored Fidget
				AnimationName       = CHAR_FE_U_IBFA
				AnimationMode       = ONCE
				AnimationPriority   = 2
			End
			//Animation = Foot_IDLD // Bored Fidget
			//	AnimationName       = CHAR_FE_U_IBFB
			//	AnimationMode       = ONCE
			//	AnimationPriority   = 1
			//End

			BeginScript
				CurDrawableHideSubObject("arrow")
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Selected_Sword" then CurDrawableSetTransitionAnimState("TRANS_SelectedToBoredSword") end
				if Prev == "STATE_Idle_Bow" then CurDrawableSetTransitionAnimState("TRANS_BowToSword") end
			EndScript
		End
		

	//---transitions--------------------------------------------

		TransitionState = TRANS_BoredToSelectedSword
		// Once we have proper animations for enter -> idle -> exit, fix this properly.
			Animation = ANTD
				AnimationName	= CHAR_FE_U_ATNA CHAR_FE_U_ATND CHAR_FE_U_IDLA
				AnimationMode	= ONCE
			End		
		End
		
		TransitionState = TRANS_SelectedToBoredSword
			Animation			= ATNF
				AnimationName	= CHAR_FE_U_ATNC CHAR_FE_U_ATNF CHAR_FE_U_ATNE
				AnimationMode	= ONCE
			End		
		End	

		TransitionState = TRANS_BoredToSelectedBow
			Animation = ATNC
				AnimationName		= CHAR_FE_U_ATNF CHAR_FE_U_ATNE
				AnimationMode		= ONCE
			End		
		End
		
		TransitionState = TRANS_CaptainBowToSelectedBow
			Animation = ATNC
				AnimationName		= CHAR_FE_U_ATNF
				AnimationMode		= ONCE
				AnimationBlendTime	= 10
				AnimationSpeedFactorRange = 1.5 1.5
			End		
		End
		
		TransitionState = TRANS_SelectedToBoredBow
			Animation			= ATNA
				AnimationName	= CHAR_FE_U_ATNF
				AnimationMode	= ONCE
			End		
		End	


		TransitionState       = TRANS_BowToSword
			Animation           = CUHero_STHA
				AnimationName     = CHAR_FE_B_STHA
				AnimationMode     = ONCE
			End
		End

		TransitionState       = TRANS_SwordToBow
			Animation           = CUHero_STHB
				AnimationName     = CHAR_FE_U_STHA
				AnimationMode     = ONCE
			End
		End	

		TransitionState       		= TRANS_BowToSword_Running
			Animation           	= DrawSwords
				AnimationName       = CHAR_FE_B_STHB
				AnimationMode       = ONCE
			End
		End
		
		TransitionState       		= TRANS_SwordToBow_Running
			Animation           	= DrawBow
				AnimationName       = CHAR_FE_U_STHB
				AnimationMode       = ONCE
			End
		End		

	End
End
										
			VoiceAttack 							= HeroElfFemaleVoiceAttack
			VoiceAttackAir							= HeroElfFemaleVoiceAttack
			VoiceAttackCharge 						= HeroElfFemaleVoiceAttackCharge
			VoiceAttackMachine 						= HeroElfFemaleVoiceAttack
			VoiceAttackStructure 					= HeroElfFemaleVoiceAttack
			VoiceCreated							= HeroElfFemaleArcherVoiceSalute
			VoiceFear								= HeroElfFemaleVoiceHelpMe
			VoiceFullyCreated						= HeroElfFemaleArcherVoiceSalute
			VoiceGuard								= HeroElfFemaleVoiceMove
			VoiceMove 								= HeroElfFemaleVoiceMove
			VoiceMoveToCamp 						= HeroElfFemaleVoiceMove
			VoiceMoveWhileAttacking 				= HeroElfFemaleVoiceMove
			VoicePriority							= 95
			VoiceRetreatToCastle 					= HeroElfFemaleVoiceMove
			VoiceSelect 							= HeroElfFemaleVoiceSelectMS
			VoiceSelectBattle  						= HeroElfFemaleVoiceSelectBattle
		
			SoundImpact								= ImpactHorse
		
			UnitSpecificSounds
				VoiceEnterUnitElvenTransportShip	= HeroElfFemaleVoiceMove
				VoiceEnterUnitMordorMumakil			= HeroElfFemaleVoiceMove
				VoiceEnterUnitSlaughterHouse		= HeroElfFemaleVoiceMove
				VoiceEnterUnitTransportShip			= HeroElfFemaleVoiceMove
				VoiceGarrison						= HeroElfFemaleVoiceMove
				VoiceInitiateCaptureBuilding		= HeroElfFemaleVoiceCaptureBuilding
			End

	AddModule
	Behavior = GrantUpgradeCreate ModuleTag_1
		UpgradeToGrant = Upgrade_GandalfWhite  ;
	End 
	End

	AddModule
	Behavior = SubObjectsUpgrade CorruptedWeapon_Upgrade01562
	TriggeredBy			   = Upgrade_GandalfWhite

	HideSubObjects		   = BOW_03
	;HideSubObjects		   = BOW_04
	HideSubObjects		   = BOW_05
	HideSubObjects		   = Belthronding
	HideSubObjects		   = MithlondBow

	HideSubObjects		   = HAIR	

	HideSubObjects		   = SLDR_01
	HideSubObjects		   = SLDR_02
	HideSubObjects		   = SLDR_03
	HideSubObjects		   = SLDR_04
	HideSubObjects		   = SLDR_05
	HideSubObjects		   = SLDR_06

	HideSubObjects		   = HLMT_03
	HideSubObjects		   = HLMT_04
	;HideSubObjects		   = HLMT_05

	HideSubObjects		   = GNLT_01
	HideSubObjects		   = GNLT_02
	HideSubObjects		   = GNLT_03
	HideSubObjects		   = GNLT_04
	HideSubObjects		   = GNLT_05
	HideSubObjects		   = GNLT_07

	HideSubObjects		   = BOOT_01
	HideSubObjects		   = BOOT_02
	HideSubObjects		   = BOOT_03
	HideSubObjects		   = BOOT_04
	HideSubObjects		   = BOOT_05
	HideSubObjects		   = BOOT_06

	;HideSubObjects 	   	   = SWORD_01
	HideSubObjects 	   	   = WIZARDSWORD

	End
	End

	AddModule
	Behavior = GrantUpgradeCreate ModuleTag_1234
		UpgradeToGrant = Upgrade_GandalfWhite  ;
	End 
	End
	AddModule
	Behavior = SubObjectsUpgrade Costume_2
		TriggeredBy		= Upgrade_GandalfWhite 
		UpgradeTexture	= char_fe.tga 0 char_fe_gear_01.tga  
				RecolorHouse	= No
	End
	End

	WeaponSet
		Conditions			= None 
		Weapon				= PRIMARY   CreateAHeroBasicMeleeWeapon
		AutoChooseSources	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
	WeaponSet
		Conditions			= WEAPONSET_TOGGLE_1
		Weapon				= PRIMARY   HaradrimBarbedArrow
		AutoChooseSources	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
End

;////////////////////////////////SACRIFICE WIGHT//////////
;Made by Wrath
;///////////////////////////////////////////////////////////
Object LesserWight

RemoveModule ModuleTag_LifetimeUpdate
End

Object LesserWight
        AddModule BodyModuleTag
Body = ActiveBody BodyModuleTag_new
		MaxHealth 		= 4000  
		MaxHealthDamaged 	= 3500
		BurningDeathBehavior = Yes
		BurningDeathFX       = FX_InfantryBurningFlame
	End
End
End

Object LesserWight

	AddModule
	Behavior = GrantUpgradeCreate ModuleTag_123456743657
		UpgradeToGrant = Upgrade_GandalfWhite  ;
	End 
	End
	AddModule
	Behavior = SubObjectsUpgrade Costume_23674567
		TriggeredBy		= Upgrade_GandalfWhite 
		UpgradeTexture	= CUWight.tga 0 ruothbrkrsa.tga ;Gunumnrean_l.tga
				RecolorHouse	= No
	End
	End

ReplaceModule ModuleTag_Draw
Draw = W3DScriptedModelDraw ModuleTag_Draw1
		OkToChangeModelColor = Yes	
		StaticModelLODMode = Yes
DefaultModelConditionState
			Model						=	CUWight_SKN
			Skeleton					=   CUWight_SKL
			ParticleSysBone     = None RingWraithFlare
			ParticleSysBone     = None RingWraithWindIdle
		End
 		; ------------------------ Wight Anims -------------------------
		
		AnimationState							= FREEFALL 
			Animation							= FLYA
				AnimationName					= CUWight_FLYA
				AnimationMode					= LOOP
				AnimationBlendTime				= 5
			End
		End
		
		;//Normal Swipe Attack
		AnimationState        = FIRING_OR_PREATTACK_A 
			Animation           = ATKA
				AnimationName     = CUWight_ATKA
				AnimationMode     = ONCE
				UseWeaponTiming	  = Yes
			End
			StateName           = Attack
		End
		
		AnimationState        = MOVING 
			Animation           = RUNA
				AnimationName     = CUWight_RUNA
				AnimationMode     = LOOP
			End
			Flags               = RANDOMSTART
		End
		
		AnimationState							= SPLATTED
			Animation							= LNDA
				AnimationName					= CUWight_LNDA
				AnimationMode					= ONCE
			End
		End
		
		AnimationState = DYING
			Animation = DIEA
				AnimationName = CUWight_DIEA
			    AnimationMode = ONCE
				AnimationPriority = 1
			End
		End		
		
		AnimationState        = STUNNED_STANDING_UP 
			Animation           = GTPA
				AnimationName     = CUWight_GTPA
				AnimationMode     = ONCE
			End
		End

		AnimationState        = STUNNED 
			Animation           = LNDA
				AnimationName     = CUWight_LNDA
				AnimationMode     = ONCE
			End
		End
		
		; --------- Hit Reactions ------------
		AnimationState = HIT_REACTION HIT_LEVEL_1 
			Animation = Hit_Level_1_a
				AnimationName = CUWight_HITA
				AnimationMode = ONCE
			End
		End		
		
		;-emotions--
		
		AnimationState							= EMOTION_TAUNTING 
			Animation							= TNTA
				AnimationName					= CUWight_TNTA
				AnimationMode					= LOOP
			End
		End
	
		AnimationState							= EMOTION_CELEBRATING 
			Animation                           = CHRA
				AnimationName					= CUWight_CHRA
				AnimationMode					= ONCE
			End
		End

 		IdleAnimationState
			Animation = IDLA
				AnimationName		= CUWight_IDLA
				AnimationMode		= ONCE
				AnimationBlendTime	= 30
				AnimationPriority	= 1 ;2
			End
			Animation = IDLB
				AnimationName		= CUWight_IDLB
				AnimationMode		= ONCE
				AnimationBlendTime	= 30
				AnimationPriority	= 20
			End
		End		

	End
End
End

;///////////////////EVILHOBBITS/////////////////////////////////////////
Object ElvenLorienArcherHorde
CommandSet = RohanHobbitCommandSet
End
ChildObject ElvenLorienArcher RohanHobbit 

ReplaceModule ModuleTag_01
Draw = W3DScriptedModelDraw ModuleTag_01_NEW

DefaultModelConditionState
			Model               = GUHbtShfA_SKN
			Skeleton            = GUHbtShf_SKL
			ParticleSysBone = BAT_RIBS RingWraithFlare FollowBone:Yes
			ParticleSysBone = BAT_RIBS RingWraithWindIdle FollowBone:Yes
			
		End

;;--------------- DYING & FLYING --------------------------------------------------
;;======= DYING

		AnimationState					= STUNNED_FLAILING WEAPONSET_TOGGLE_1
			StateName					= STATE_Bored_Rocks
			Animation					= FLYA
				AnimationName			= GUHbtShfB_FLYA
				AnimationMode			= LOOP
				AnimationBlendTime		= 0
				AnimationSpeedFactorRange	= 0.4 0.6
			End
			Flags						= RANDOMSTART
		End
		AnimationState					= STUNNED_FLAILING
			StateName					= STATE_Bored_Sword
			Animation					= FLYA
				AnimationName			= GUHbtShfS_FLYA
				AnimationMode			= LOOP
				AnimationBlendTime		= 0
				AnimationSpeedFactorRange	= 0.4 0.6
			End
			Flags						= RANDOMSTART
		End
		
		AnimationState					= PASSENGER FREEFALL
			Animation
				AnimationName			= GUHbtShfB_FLLA
				AnimationMode			= LOOP
			End
		End

		AnimationState						= DYING DEATH_2 WEAPONSET_TOGGLE_1
			Animation
				AnimationName				= GUHbtShfB_IDLB
				AnimationMode				= LOOP
			End
		End
		AnimationState						= DYING DEATH_2
			Animation
				AnimationName				= GUHbtShfS_IDLB
				AnimationMode				= LOOP
			End
		End

		AnimationState					= DYING BURNINGDEATH
			Animation
				AnimationName			= GUHbtShfB_DIEA
				AnimationMode			= ONCE
				AnimationBlendTime		= 10
			End
			Animation
				AnimationName			= GUHbtShfB_DIEB
				AnimationMode			= ONCE
				AnimationBlendTime		= 10
			End
			Animation
				AnimationName			= GUHbtShfB_DIEC
				AnimationMode			= ONCE
				AnimationBlendTime		= 10
			End
		End
		
		AnimationState					= DYING SPLATTED WEAPONSET_TOGGLE_1
			Animation					= LNDA
				AnimationName			= GUHbtShfB_LNDA
				AnimationMode			= ONCE
			End
		End
		AnimationState					= DYING SPLATTED
			Animation
				AnimationName			= GUHbtShfS_LNDA
				AnimationMode			= ONCE
			End
		End
		AnimationState					= DYING WEAPONSET_TOGGLE_1
			StateName					= STATE_Bored_Rocks
			Animation					= DIEA
				AnimationName			= GUHbtShfB_DIEA
				AnimationMode			= ONCE
			End
			Animation					= DIEA
				AnimationName			= GUHbtShfB_DIEB
				AnimationMode			= ONCE
			End
			Animation					= DIEA
				AnimationName			= GUHbtShfB_DIEC
				AnimationMode			= ONCE
			End
		End

		AnimationState					= DYING
			Animation
				AnimationName			= GUHbtShfS_DIEA
				AnimationMode			= ONCE
			End
			Animation
				AnimationName			= GUHbtShfS_DIEB
				AnimationMode			= ONCE
			End
			Animation
				AnimationName			= GUHbtShfS_DIEC
				AnimationMode			= ONCE
			End
		End

		AnimationState						= BURNINGDEATH
			Animation
				AnimationName				= GUHbtShfB_MFDA
				AnimationMode				= LOOP
				Distance					= 80
			End
		End

		AnimationState						= PARALYZED WEAPONSET_TOGGLE_1
			Animation
				AnimationName				= GUHbtShfB_IDLB
				AnimationMode				= LOOP
			End
		End
		AnimationState						= PARALYZED
			Animation
				AnimationName				= GUHbtShfS_IDLB
				AnimationMode				= LOOP
			End
		End

;;======= STUNNED

		AnimationState					= STUNNED_STANDING_UP WEAPONSET_TOGGLE_1
			StateName					= STATE_Ready_Rocks
			Animation					= GTPA
				AnimationName			= GUHbtShfB_GTPA
				AnimationMode			= ONCE
				AnimationSpeedFactorRange = 1.5 1.5
			End
		End
		AnimationState					= STUNNED_STANDING_UP
			StateName					= STATE_Ready_Sword
			Animation
				AnimationName			= GUHbtShfS_GTPA
				AnimationMode			= ONCE
				AnimationSpeedFactorRange = 1.5 1.5
			End
		End		
		
		AnimationState					= STUNNED WEAPONSET_TOGGLE_1
			StateName					= STATE_Bored_Rocks
			Animation					= LNDA
				AnimationName			= GUHbtShfB_LNDA
				AnimationMode			= ONCE
			End
		End
		AnimationState					= STUNNED
			StateName					= STATE_Bored_Sword
			Animation					= LNDA
				AnimationName			= GUHbtShfS_LNDA
				AnimationMode			= ONCE
			End
		End
		
		

;;---------------- ATTAFIRING_OR_RELOADING_ACKING -----------------------------------------------------------------

		
		AnimationState        = MOVING FIRING_OR_PREATTACK_A
			ShareAnimation		= Yes
			Animation
				AnimationName       = GUHbtShfS_RUNC
				AnimationMode       = ONCE
			End
			Animation
				AnimationName       = GUHbtShfS_RUND
				AnimationMode       = ONCE
			End
			Flags               = RESTART_ANIM_WHEN_COMPLETE
		End
		
		AnimationState			= MOVING EMOTION_TERROR WEAPONSET_TOGGLE_1
			Animation
				AnimationName			= GUHbtShfB_RUNC
				AnimationMode			= LOOP
			End
		End
		AnimationState			= MOVING EMOTION_TERROR
			Animation
				AnimationName			= GUHbtShfS_RUNE
				AnimationMode			= LOOP
			End
		End
		
		
		AnimationState					= BETWEEN_FIRING_SHOTS_A WEAPONSET_TOGGLE_1
			StateName					= STATE_Ready_Rocks
			Animation					= IDLA
				AnimationName			= GUHbtShfB_IDLA
				AnimationMode			= LOOP
				AnimationBlendTime		= 20
			End
			BeginScript
				CurDrawableAllowToContinue()
			EndScript
		End
		

		AnimationState					= BETWEEN_FIRING_SHOTS_A
			StateName					= STATE_Ready_Sword
			Animation					= IDLB
				AnimationName			= GUHbtShfS_IDLA
				AnimationMode			= LOOP
				AnimationBlendTime		= 10
			End
			BeginScript
				CurDrawableAllowToContinue()
			EndScript
		End
		


		AnimationState					= FIRING_OR_PREATTACK_A WEAPONSET_TOGGLE_1
			StateName					= STATE_Ready_Rocks
			Animation					= THRA
				AnimationName			= GUHbtShfB_ATKA
				AnimationMode			= ONCE
				UseWeaponTiming			= Yes
			End
			FrameForPristineBonePositions = 21
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Bored_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwordToRocks") end
				if Prev == "STATE_Ready_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwordToRocks") end
				if Prev == "STATE_Attention_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwordToRocks") end
				if Prev == "STATE_Running_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwordToRocks") end
			EndScript
		End
		
		AnimationState					= FIRING_OR_PREATTACK_A 
			StateName					= STATE_Ready_Sword
			Animation					= ATKA
				AnimationName			= GUHbtShfS_ATKA
				AnimationMode			= ONCE
				UseWeaponTiming			= Yes
				AnimationBlendTime		= 10
			End
			Animation					= ATKB
				AnimationName			= GUHbtShfS_ATKB
				AnimationMode			= ONCE
				UseWeaponTiming			= Yes
				AnimationBlendTime		= 10
			End
			Animation					= ATKB
				AnimationName			= GUHbtShfS_ATKB
				AnimationMode			= ONCE
				UseWeaponTiming			= Yes
				AnimationBlendTime		= 10
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Bored_Rocks" then CurDrawableSetTransitionAnimState("TRANS_RocksToSword") end
				if Prev == "STATE_Ready_Rocks" then CurDrawableSetTransitionAnimState("TRANS_RocksToSword") end
				if Prev == "STATE_Attention_Rocks" then CurDrawableSetTransitionAnimState("TRANS_RocksToSword") end
				if Prev == "STATE_Running_Rocks" then CurDrawableSetTransitionAnimState("TRANS_RocksToSword") end
			EndScript
		End

;;--------------------- MOVING ---------------------------------------------------------------------
;;======= MOVING

		AnimationState					= MOVING WEAPONSET_TOGGLE_1
			StateName					= STATE_Running_Rocks
			Animation					= RUNA
				AnimationName			= GUHbtShfB_RUNA
				AnimationMode			= ONCE
			End
			Animation					= RUNA
				AnimationName			= GUHbtShfB_RUNB
				AnimationMode			= ONCE
			End
			Flags						= RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Running_Sword" then CurDrawableSetTransitionAnimState("TRANS_Running_SwordToRocks") end
			EndScript
		End

		AnimationState					= MOVING ATTACKING
			StateName					= STATE_Running_Sword
			Animation					= RUNA
				AnimationName			= GUHbtShfS_RUNC
				AnimationMode			= ONCE
			End
			Animation					= RUNA
				AnimationName			= GUHbtShfS_RUND
				AnimationMode			= ONCE
			End
			Flags						= RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Running_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Running_RocksToSword") end
			EndScript
		End
		
		AnimationState					= MOVING BACKING_UP WEAPONSET_TOGGLE_1
			StateName					= STATE_Running_Rocks
			Animation
				AnimationName			= GUHbtShfB_BAKA
				AnimationMode			= ONCE
			End
			Animation
				AnimationName			= GUHbtShfB_BAKB
				AnimationMode			= ONCE
			End
			Flags						= RESTART_ANIM_WHEN_COMPLETE
		End

		AnimationState					= MOVING BACKING_UP
			StateName					= STATE_Running_Sword
			Animation
				AnimationName			= GUHbtShfS_BAKA
				AnimationMode			= ONCE
			End
			Animation
				AnimationName			= GUHbtShfS_BAKB
				AnimationMode			= ONCE
			End
			Flags						= RESTART_ANIM_WHEN_COMPLETE
		End

		AnimationState					= MOVING
			StateName					= STATE_Running_Sword
			Animation					= RUNA
				AnimationName			= GUHbtShfS_RUNB
				AnimationMode			= LOOP
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Running_Sword" then CurDrawableSetTransitionAnimState("TRANS_Running_RocksToSword") end
			EndScript
		End

;;---------------------- HIT REACTIONS ----------------------------------------------------------

;		AnimationState					= HIT_REACTION WEAPONSET_TOGGLE_1
;			Animation           
;				AnimationName			= GUHbtShfB_HITA
;				AnimationMode			= ONCE
;			End
;		End
;		AnimationState					= HIT_REACTION
;			Animation           
;				AnimationName			= GUHbtShfS_HITA
;				AnimationMode			= ONCE
;			End
;		End

;;---------------------- EMOTIONS ---------------------------------------------------------------

		AnimationState					= EMOTION_POINTING WEAPONSET_TOGGLE_1
			StateName					= STATE_Ready_Rocks
			Animation					= IDLA
				AnimationName			= GUHbtShfB_PNTA
				AnimationMode			= ONCE
			End
			Animation					= IDLA
				AnimationName			= GUHbtShfB_PNTB
				AnimationMode			= ONCE
			End
			Flags						= RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Bored_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwordToRocks") end
				if Prev == "STATE_Ready_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwordToRocks") end
				if Prev == "STATE_Attention_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwordToRocks") end
				if Prev == "STATE_Running_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwordToRocks") end
			EndScript
		End
		AnimationState					= EMOTION_POINTING
			StateName					= STATE_Ready_Sword
			Animation
				AnimationName			= GUHbtShfS_PNTA
				AnimationMode			= ONCE
			End
			Animation
				AnimationName			= GUHbtShfS_PNTB
				AnimationMode			= ONCE
			End
			Flags						= RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Bored_Rocks" then CurDrawableSetTransitionAnimState("TRANS_RocksToSword") end
				if Prev == "STATE_Ready_Rocks" then CurDrawableSetTransitionAnimState("TRANS_RocksToSword") end
				if Prev == "STATE_Attention_Rocks" then CurDrawableSetTransitionAnimState("TRANS_RocksToSword") end
				if Prev == "STATE_Running_Rocks" then CurDrawableSetTransitionAnimState("TRANS_RocksToSword") end
			EndScript
		End




		AnimationState					= EMOTION_TAUNTING WEAPONSET_TOGGLE_1
			StateName					= STATE_Ready_Rocks
			Animation
				AnimationName			= GUHbtShfB_TNTA
				AnimationMode			= ONCE
			End
			Animation
				AnimationName			= GUHbtShfB_TNTB
				AnimationMode			= ONCE
			End
			Animation
				AnimationName			= GUHbtShfB_TNTC
				AnimationMode			= ONCE
			End
			Flags						= RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Bored_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwordToRocks") end
				if Prev == "STATE_Ready_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwordToRocks") end
				if Prev == "STATE_Attention_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwordToRocks") end
				if Prev == "STATE_Running_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwordToRocks") end
			EndScript
		End
		AnimationState					= EMOTION_TAUNTING
			StateName					= STATE_Ready_Sword
			Animation
				AnimationName			= GUHbtShfS_TNTA
				AnimationMode			= ONCE
			End
			Animation
				AnimationName			= GUHbtShfS_TNTB
				AnimationMode			= ONCE
			End
			Animation
				AnimationName			= GUHbtShfS_TNTC
				AnimationMode			= ONCE
			End
			Flags						= RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Bored_Rocks" then CurDrawableSetTransitionAnimState("TRANS_RocksToSword") end
				if Prev == "STATE_Ready_Rocks" then CurDrawableSetTransitionAnimState("TRANS_RocksToSword") end
				if Prev == "STATE_Attention_Rocks" then CurDrawableSetTransitionAnimState("TRANS_RocksToSword") end
				if Prev == "STATE_Running_Rocks" then CurDrawableSetTransitionAnimState("TRANS_RocksToSword") end
			EndScript
		End

		AnimationState					= EMOTION_AFRAID
			Animation
				AnimationName			= GUHbtShfB_FERA
				AnimationMode			= LOOP
			End
		End

		AnimationState					= EMOTION_CELEBRATING WEAPONSET_TOGGLE_1
			StateName					= STATE_Ready_Rocks
			Animation
				AnimationName			= GUHbtShfB_CHRA
				AnimationMode			= ONCE
			End
			Animation
				AnimationName			= GUHbtShfB_CHRB
				AnimationMode			= ONCE
			End
			Animation
				AnimationName			= GUHbtShfB_CHRC
				AnimationMode			= ONCE
			End
			Flags						= RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Bored_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwordToRocks") end
				if Prev == "STATE_Ready_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwordToRocks") end
				if Prev == "STATE_Attention_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwordToRocks") end
				if Prev == "STATE_Running_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwordToRocks") end
			EndScript
		End

		AnimationState					= EMOTION_CELEBRATING
			StateName					= STATE_Ready_Sword
			Animation
				AnimationName			= GUHbtShfS_CHRA
				AnimationMode			= ONCE
			End
			Animation
				AnimationName			= GUHbtShfS_CHRB
				AnimationMode			= ONCE
			End
			Flags						= RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Bored_Rocks" then CurDrawableSetTransitionAnimState("TRANS_RocksToSword") end
				if Prev == "STATE_Ready_Rocks" then CurDrawableSetTransitionAnimState("TRANS_RocksToSword") end
				if Prev == "STATE_Attention_Rocks" then CurDrawableSetTransitionAnimState("TRANS_RocksToSword") end
				if Prev == "STATE_Running_Rocks" then CurDrawableSetTransitionAnimState("TRANS_RocksToSword") end
			EndScript
		End



		
		AnimationState					= RAISING_FLAG WEAPONSET_TOGGLE_1
			StateName					= STATE_Ready_Rocks
			Animation
				AnimationName			= GUHbtShfB_CHRA
				AnimationMode			= ONCE
				AnimationSpeedFactorRange = 0.9 1.1
			End
			Animation
				AnimationName			= GUHbtShfB_CHRB
				AnimationMode			= ONCE
				AnimationSpeedFactorRange = 0.9 1.1
			End
			Animation
				AnimationName			= GUHbtShfB_CHRC
				AnimationMode			= ONCE
				AnimationSpeedFactorRange = 0.9 1.1
			End
			Flags						= RESTART_ANIM_WHEN_COMPLETE
		End
		
;;------------------ SELECTED STATE -------------------------------------------------------------

		AnimationState					= SELECTED WEAPONSET_TOGGLE_1
			StateName					= STATE_Attention_Rocks
			Animation					= IDLA
				AnimationName			= GUHbtShfB_ATNB
				AnimationMode			= LOOP
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Bored_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwordToRocks") end
				if Prev == "STATE_Ready_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwordToRocks") end
				if Prev == "STATE_Attention_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwordToRocks") end
				if Prev == "STATE_Running_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwordToRocks") end
				if Prev == "STATE_Bored_Rocks" then CurDrawableSetTransitionAnimState("TRANS_BoredToAttention_Rocks") end
			EndScript
		End

		AnimationState					= RAISING_FLAG
			StateName					= STATE_Ready_Sword
			Animation
				AnimationName			= GUHbtShfS_CHRA
				AnimationMode			= ONCE
				AnimationSpeedFactorRange = 0.9 1.1
			End
			Animation
				AnimationName			= GUHbtShfS_CHRB
				AnimationMode			= ONCE
				AnimationSpeedFactorRange = 0.9 1.1
			End
			Flags						= RESTART_ANIM_WHEN_COMPLETE
		End

		AnimationState					= SELECTED
			StateName					= STATE_Attention_Sword
			Animation					= IDLA
				AnimationName			= GUHbtShfS_ATNB
				AnimationMode			= LOOP
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Bored_Rocks" then CurDrawableSetTransitionAnimState("TRANS_RocksToSword") end
				if Prev == "STATE_Ready_Rocks" then CurDrawableSetTransitionAnimState("TRANS_RocksToSword") end
				if Prev == "STATE_Attention_Rocks" then CurDrawableSetTransitionAnimState("TRANS_RocksToSword") end
				if Prev == "STATE_Running_Rocks" then CurDrawableSetTransitionAnimState("TRANS_RocksToSword") end
				if Prev == "STATE_Bored_Sword" then CurDrawableSetTransitionAnimState("TRANS_BoredToAttention_Sword") end
			EndScript
		End

;;------------------ IDLE STATES ----------------------------------------------------------------
		AnimationState					= WEAPONSET_TOGGLE_1
			StateName					= STATE_Bored_Rocks
			Animation
				AnimationName			= GUHbtShfB_IDLB
				AnimationMode			= ONCE
				AnimationPriority		= 100
			End
			Animation
				AnimationName			= GUHbtShfB_IDLC
				AnimationMode			= ONCE
				AnimationPriority		= 10
			End
			Animation
				AnimationName			= GUHbtShfB_IDLD
				AnimationMode			= ONCE
				AnimationPriority		= 10
			End
			Animation
				AnimationName			= GUHbtShfB_IDLE
				AnimationMode			= ONCE
				AnimationPriority		= 10
			End
			Flags						= RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Bored_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwordToRocks") end
				if Prev == "STATE_Ready_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwordToRocks") end
				if Prev == "STATE_Attention_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwordToRocks") end
				if Prev == "STATE_Running_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwordToRocks") end
				if Prev == "STATE_Attention_Rocks" then CurDrawableSetTransitionAnimState("TRANS_AttentionToBored_Rocks") end
			EndScript
		End

		IdleAnimationState
			StateName					= STATE_Bored_Sword
			Animation					= IDLA
				AnimationName			= GUHbtShfS_IDLB
				AnimationMode			= ONCE
				AnimationPriority		= 100
			End
			Animation
				AnimationName			= GUHbtShfS_IDLC
				AnimationMode			= ONCE
				AnimationPriority		= 10
			End
			Animation
				AnimationName			= GUHbtShfS_IDLD
				AnimationMode			= ONCE
				AnimationPriority		= 10
			End
			Animation
				AnimationName			= GUHbtShfS_IDLE
				AnimationMode			= ONCE
				AnimationPriority		= 10
			End
			Animation
				AnimationName			= GUHbtShfS_IDLF
				AnimationMode			= ONCE
				AnimationPriority		= 10
			End
			Animation
				AnimationName			= GUHbtShfS_IDLG
				AnimationMode			= ONCE
				AnimationPriority		= 10
			End
			Flags						= RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Bored_Sword" then CurDrawableSetTransitionAnimState("TRANS_RocksToSword") end
				if Prev == "STATE_Ready_Sword" then CurDrawableSetTransitionAnimState("TRANS_RocksToSword") end
				if Prev == "STATE_Running_Sword" then CurDrawableSetTransitionAnimState("TRANS_RocksToSword") end
				if Prev == "STATE_Attention_Rocks" then CurDrawableSetTransitionAnimState("TRANS_RocksToSword") end
				if Prev == "STATE_Attention_Sword" then CurDrawableSetTransitionAnimState("TRANS_AttentionToBored_Sword") end
			EndScript
		End

;;------------------ TRANSITIONS ----------------------------------------------------------------

;;====== GETTING SWORD
		TransitionState					= TRANS_RocksToSword
			Animation					= STHA
				AnimationName			= GUHbtShfB_STHB
				AnimationMode			= ONCE
			End
		End
		TransitionState					= TRANS_Running_RocksToSword
			Animation					= STHA
				AnimationName			= GUHbtShfB_STHD
				AnimationMode			= ONCE
			End
		End

		TransitionState					= TRANS_SwordToRocks
			Animation					= STHA
				AnimationName			= GUHbtShfB_STHA
				AnimationMode			= ONCE
			End
		End
		TransitionState					= TRANS_Running_SwordToRocks
			Animation					= STHA
				AnimationName			= GUHbtShfB_STHC
				AnimationMode			= ONCE
			End
		End
		TransitionState					= TRANS_BoredToAttention_Rocks
			Animation					= ATNA
				AnimationName			= GUHbtShfB_ATNA
				AnimationMode			= ONCE
			End
		End
		TransitionState					= TRANS_AttentionToBored_Rocks
			Animation					= ATNC
				AnimationName			= GUHbtShfB_ATNC
				AnimationMode			= ONCE
			End
		End

		TransitionState					= TRANS_BoredToAttention_Sword
			Animation					= ATNA
				AnimationName			= GUHbtShfS_ATNA
				AnimationMode			= ONCE
			End
		End
		TransitionState					= TRANS_AttentionToBored_Sword
			Animation					= ATNC
				AnimationName			= GUHbtShfBS_ATNC
				AnimationMode			= ONCE
			End
		End
;;----------------------------------------------------------------------------------------
	End
	End
	; ***DESIGN parameters ***
	Side = Obsolete
	EditorSorting = UNIT
	ThreatLevel 	   = 4.0
	ThingClass 	   = CHARACTER_UNIT
  	BuildCost          = 500
 	BuildTime          = 15
	TransportSlotCount = TRANSPORTSLOTCOUNT_UNIT

	;//DisplayMeleeDamage = HOBBIT_SWORD_DAMAGE				
	;//DisplayRangedDamage = HOBBIT_ROCK_DAMAGE
	
	HeroSortOrder = 90

	WeaponSet
		Conditions = None 
		Weapon = PRIMARY    HobbitSword
		AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
	
	WeaponSet
		Conditions = WEAPONSET_TOGGLE_1
		Weapon = PRIMARY    HobbitRockThrow  
		AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
	
	ArmorSet
		Conditions      = None
		Armor           = SoldierArmor
		DamageFX        = NormalDamageFX
	End

	VisionRange = VISION_HOBBIT
	ShroudClearingRange = SHROUD_CLEAR_STANDARD

	BountyValue = HOBBIT_BOUNTY_VALUE
	DisplayName = EvilHobbits
	RecruitText = CONTROLBAR:RohanHobbitRecruit
	Hotkey		= CONTROLBAR:RohanHobbitHotkey
	CrushableLevel = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	
	CommandSet = RohanHobbitCommandSet
	CommandPoints = 0


	; *** AUDIO Parameters ***;

	VoiceAttack								= HobbitShirriffVoiceAttack
	VoiceAttackCharge						= HobbitShirriffVoiceAttack
	VoiceAttackMachine						= HobbitShirriffVoiceAttack
	VoiceAttackStructure					= HobbitShirriffVoiceAttack
	VoiceCreated							= HobbitShirriffVoiceSalute
	VoiceFullyCreated 						= HobbitShirriffVoiceSalute
	VoiceGuard								= HobbitShirriffVoiceMove
	VoiceMove								= HobbitShirriffVoiceMove
	VoiceMoveToCamp							= HobbitShirriffVoiceMove
	VoiceMoveWhileAttacking					= HobbitShirriffVoiceMove
	VoicePriority							= 35
	VoiceRetreatToCastle					= HobbitShirriffVoiceRetreat		
	VoiceSelect								= HobbitShirriffVoiceSelectMS
	VoiceSelectBattle 						= HobbitShirriffVoiceSelectBattle			

	;VoiceEnterStateAttack					= HobbitShirriffVoiceEnterStateAttack
	;VoiceEnterStateAttackCharge			= HobbitShirriffVoiceEnterStateAttackCharge
	;VoiceEnterStateAttackMachine			= HobbitShirriffVoiceEnterStateAttackBuilding
	;VoiceEnterStateAttackStructure			= HobbitShirriffVoiceEnterStateAttackBuilding
	;VoiceEnterStateMove					= HobbitShirriffVoiceEnterStateMove
	;VoiceEnterStateMoveToCamp				= HobbitShirriffVoiceEnterStateMoveCamp
	;VoiceEnterStateMoveWhileAttacking		= HobbitShirriffVoiceEnterStateDisengage
	;VoiceEnterStateRetreatToCastle			= HobbitShirriffVoiceEnterStateRetreat

	SoundImpact								= ImpactHorse

	UnitSpecificSounds
		VoiceCreatedFromInn					= HobbitShirriffVoiceSaluteInn
		VoiceEnterUnitElvenTransportShip	= HobbitShirriffVoiceMove
		VoiceFullyCreatedFromInn	 		= HobbitShirriffVoiceSaluteInn
		VoiceGarrison						= HobbitShirriffVoiceMove
		VoiceInitiateCaptureBuilding		= HobbitShirriffVoiceCaptureBuilding
		;VoiceEnterStateInitiateCaptureBuilding	=
	End

AddModule
Behavior = GrantUpgradeCreate ModuleTag_1
		UpgradeToGrant = Upgrade_GandalfWhite  ;
	End 
	End
	AddModule
	Behavior = SubObjectsUpgrade Costume_3
		TriggeredBy		= Upgrade_GandalfWhite
		UpgradeTexture	= GUHbtShfA.tga 0 ruothbrkrsa.tga
		UpgradeTexture	= GUHbtShfB.tga.tga 0 ruothbrkrsa.tga
		UpgradeTexture	= GUHbtShfC.tga 0 ruothbrkrsa.tga
		UpgradeTexture	= GUHbtShfD.tga 0 ruothbrkrsa.tga
		RecolorHouse	= No
	End
End
End

;---------AOTD-----------
