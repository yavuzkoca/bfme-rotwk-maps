;INI FILE MADE BY TheNotorius
;This INI file is a lot untidy until I will improve it. Read it for beginners can be seriously difficult

;MissionObjectiveList
  ;    MissionObjectiveTag = Nothing1
  ;    MissionObjectiveTag = Nothing2
  ;    MissionObjectiveTag = Nothing3 
   ;   MissionObjectiveTag = Nothing4
   ;   MissionObjectiveTag = Nothing5
   ;   BonusMissionObjectiveTag = Everything has been eliminated
;End 



CommandButton Command_SpecialAbilitySlayer
	Command			= SPECIAL_POWER 
	SpecialPower		= SpecialAbilityGimliHeroMode
	TextLabel		= CONTROLBAR:Slayer0
	ButtonImage		= HSGimliSlayer
	ButtonBorderType	= ACTION 
	DescriptLabel		= CONTROLBAR:ToolTipSlayer0
	UnitSpecificSound	= GimliModeSlayerMS
	InPalantir		= Yes
	AutoAbility		= Yes
End

CommandButton Command_HaldirGoldenArrow
	Command				= SPECIAL_POWER
	SpecialPower			= SpecialAbilityHaldirGoldenArrow
	Options				= NEED_TARGET_ENEMY_OBJECT NEED_TARGET_NEUTRAL_OBJECT
	TextLabel			= CONTROLBAR:HaldirGoldenArrow0
	DescriptLabel			= CONTROLBAR:ToolTipHaldirGoldenArrow0
	ButtonImage			= HSHaldirGoldenArrow
	ButtonBorderType		= ACTION
	InPalantir			= Yes
	AutoAbility			= Yes
	PresetRange			= HALDIR_BOW_RANGE
	CursorName			= Bombard
	InvalidCursorName		= GenericInvalid
End

CommandButton Command_CreateAHero_SpawnTornado_Level3
	Command				= SPECIAL_POWER
    SpecialPower		= SpecialPowerCreateAHeroSpawnTornado_Level3
    ButtonImage			= HSGaladriel_NaturesWrath
	Options				= NEED_TARGET_POS
	TextLabel			= CONTROLBAR:CAH_SpawnTornado_Level3
	ButtonBorderType	= ACTION
	DescriptLabel		= CONTROLBAR:TooltipCAH_SpawnTornado_Level30
	RadiusCursorType    = NaturesWrathRadiusCursor
	InPalantir			= Yes
End

CommandButton Command_CreateAHeroThrowSpear_Level3
  Command			= SPECIAL_POWER 
  SpecialPower		= SpecialAbilityCreateAHeroThrowSpear_Level3
  Options			= NEED_TARGET_ENEMY_OBJECT // NEED_TARGET_NEUTRAL_OBJECT CONTEXTMODE_COMMAND
  TextLabel			= CONTROLBAR:CAH_ThrowSpear_Level3
  ButtonImage		= HSEomerThrowSpear
  CursorName		= Bombard
  ButtonBorderType	= ACTION 
  DescriptLabel		= CONTROLBAR:ToolTipCAH_ThrowSpear_Level31
  InvalidCursorName	= GenericInvalid
  //UnitSpecificSound	= EomerVoiceModeThrow
  InPalantir		= Yes
  AutoAbility		= Yes
  PresetRange		= 200.0
End

FXParticleSystem LurtzWOPBlastRing1
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXLnzFlar2.tga
    Lifetime = 85 85
    SystemLifetime = 35
    SortLevel = 1
    Size = 15 15
    StartSizeRate = 2 2
    BurstCount = 1 1
    IsGroundAligned = Yes
  End
  Color = DefaultColor
    Color1 = R:86 G:255 B:72 0
    Color2 = R:0 G:0 B:0 22
    ColorScale = -5 0
  End
  Update = DefaultUpdate
    SizeRate = 45 45
    SizeRateDamping = 0.9 0.9
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.8 0.8
  End
  EmissionVelocity = OutwardEmissionVelocity
  End
  EmissionVolume = CylinderEmissionVolume
    Radius = 2
    Offset = X:0 Y:0 Z:10
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem LurtzWOPBlastRing2
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXLnzFlar1.tga
    Lifetime = 90 90
    SystemLifetime = 5
    SortLevel = 1
    Size = 40 40
    BurstCount = 1 1
    IsGroundAligned = Yes
  End
  Color = DefaultColor
    Color1 = R:43 G:70 B:47 0
    Color2 = R:0 G:0 B:0 90
  End
  Update = DefaultUpdate
    SizeRate = 50 50
    SizeRateDamping = 0.9 0.9
    AngleZ = 90 90
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    Gravity = 0.08
    VelocityDamping = 0.8 0.85
  End
  EmissionVelocity = OutwardEmissionVelocity
  End
  EmissionVolume = LineEmissionVolume
    StartPoint = X:0 Y:0 Z:10
    EndPoint = X:0 Y:0 Z:10
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem LurtzWOPBlastRing3
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXHPcoresun.tga
    Lifetime = 90 90
    SystemLifetime = 1
    SortLevel = 1
    Size = 20 20
    BurstCount = 3 3
    IsGroundAligned = Yes
  End
  Color = DefaultColor
    Color1 = R:43 G:78 B:47 0
    Color2 = R:0 G:0 B:0 90
  End
  Update = DefaultUpdate
    SizeRate = 30 30
    SizeRateDamping = 0.9 0.9
    AngularRateZ = -0.1 0.1
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    Gravity = 0.08
    VelocityDamping = 0.8 0.85
  End
  EmissionVelocity = OutwardEmissionVelocity
  End
  EmissionVolume = LineEmissionVolume
    StartPoint = X:0 Y:0 Z:5
    EndPoint = X:0 Y:0 Z:5
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem LurtzWOPBlastRing4
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXBarbStreaks.tga
    Lifetime = 90 90
    SystemLifetime = 1
    SortLevel = 1
    Size = 20 20
    BurstCount = 5 5
    IsGroundAligned = Yes
  End
  Color = DefaultColor
    Color1 = R:43 G:78 B:47 0
    Color2 = R:0 G:0 B:0 90
  End
  Update = DefaultUpdate
    SizeRate = 10 30
    SizeRateDamping = 0.9 0.9
    AngleZ = -4 6
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    Gravity = 0.08
    VelocityDamping = 0.8 0.85
  End
  EmissionVelocity = OutwardEmissionVelocity
  End
  EmissionVolume = LineEmissionVolume
    StartPoint = X:0 Y:0 Z:10
    EndPoint = X:0 Y:0 Z:10
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem RingsContinue
  System
    Priority = VERY_LOW_OR_ABOVE
    ParticleName = EXexplo01.tga
    Lifetime = 90 90
    SystemLifetime = 20
    SortLevel = 1
    Size = 20 30
    BurstCount = 2 2
  End
  Color = DefaultColor
    Color1 = R:124 G:255 B:62 0
    Color2 = R:0 G:0 B:0 10
  End
  Update = DefaultUpdate
    SizeRate = 20 40
    SizeRateDamping = 0.8 0.95
    AngleZ = -1 1
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    Gravity = 0.16
    VelocityDamping = 0.8 0.8
  End
  EmissionVelocity = OutwardEmissionVelocity
  End
  EmissionVolume = CylinderEmissionVolume
    Radius = 50
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem RingsContinue2
System
    Priority = VERY_LOW_OR_ABOVE
    ParticleName = EXexplo03.tga
    Lifetime = 50 50
    SystemLifetime = 10
    SortLevel = 1
    Size = 20 50
    BurstDelay = 10 10
    BurstCount = 40 40
    IsEmitAboveGroundOnly = Yes
  End
  Color = DefaultColor
    Color1 = R:152 G:244 B:83 0
    Color2 = R:0 G:0 B:0 50
  End
  Alpha = DefaultAlpha
    Alpha1 = 1 1 0
  End
  Update = DefaultUpdate
    SizeRate = 2 6
    SizeRateDamping = 0.9 0.85
    AngleZ = -15 15
    AngularRateZ = -0.1 0.1
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.7 0.8
    DriftVelocity = X:0 Y:0 Z:0.4
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = -15 15
    Y = -15 15
  End
  EmissionVolume = PointEmissionVolume
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem RingsContinue3
  System
    Priority = VERY_LOW_OR_ABOVE
    ParticleName = EXexplo01.tga
    SlaveSystem = GandalfHeavenRaysClouds
    SlavePosOffset = X:0 Y:0 Z:0
    Lifetime = 50 50
    SystemLifetime = 270
    StartSizeRate = 1 1
    BurstDelay = 3 3
    BurstCount = 1 1
    InitialDelay = 5 5
    IsParticleUpTowardsEmitter = Yes
  End
  Color = DefaultColor
    Color1 = R:116 G:140 B:85 0
    Color2 = R:0 G:0 B:0 50
  End
  Update = DefaultUpdate
    SizeRate = 15 20
    SizeRateDamping = 0.9 0.9
    AngularRateZ = -0.01 0.01
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = PointEmissionVolume
  End
  Draw = DefaultDraw
  End
End


FXParticleSystem RingsContinue4
  System
    Priority = VERY_LOW_OR_ABOVE
    ParticleName = EXLnzFlar1.tga
    Lifetime = 2 2
    Size = 45 45
    BurstCount = 1 1
    IsGroundAligned = Yes
  End
  Color = DefaultColor
    Color1 = R:108 G:208 B:145 0
  End
  Update = DefaultUpdate
    SizeRate = 5 5
    SizeRateDamping = 1 1
    AngleZ = 90 90
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    Gravity = 0.08
    VelocityDamping = 0.8 0.85
  End
  EmissionVelocity = OutwardEmissionVelocity
  End
  EmissionVolume = LineEmissionVolume
    StartPoint = X:0 Y:0 Z:1
    EndPoint = X:0 Y:0 Z:1
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem LurtzWOPGrow1
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXHPbibi.tga
    Lifetime = 25 25
    SystemLifetime = 55
    SortLevel = 1
    Size = 400 400
    StartSizeRate = 1 1
    BurstDelay = 2 2
    BurstCount = 1 1
    IsGroundAligned = Yes
  End
  Color = DefaultColor
    Color2 = R:95 G:255 B:95 10
    Color3 = R:0 G:0 B:0 22
    ColorScale = -20 20
  End
  Update = DefaultUpdate
    SizeRate = -10 -10
    SizeRateDamping = 1.05 1.05
    AngleZ = -180 180
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.75 0.8
  End
  EmissionVelocity = OutwardEmissionVelocity
    Speed = -4 -4
    OtherSpeed = -4 -4
  End
  EmissionVolume = LineEmissionVolume
    IsHollow = Yes
    StartPoint = X:0 Y:0 Z:20
    EndPoint = X:0 Y:0 Z:20
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem LurtzWOPGrow2
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXLnzFlar1.tga
    Lifetime = 80 80
    SystemLifetime = 55
    SortLevel = 1
    Size = 12 12
    BurstDelay = 5 5
    BurstCount = 1 1
    InitialDelay = 20 20
  End
  Color = DefaultColor
    Color2 = R:80 G:255 B:80 20
    Color3 = R:0 G:0 B:0 70
  End
  Update = DefaultUpdate
    SizeRate = 1.5 1.5
    SizeRateDamping = 1.03 1.03
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.75 0.8
  End
  EmissionVelocity = OutwardEmissionVelocity
  End
  EmissionVolume = LineEmissionVolume
    StartPoint = X:0 Y:0 Z:20
    EndPoint = X:0 Y:0 Z:20
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem LurtzWOPGrow3
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXLnzFlar2.tga
    Lifetime = 80 80
    SystemLifetime = 55
    SortLevel = 1
    Size = 30 30
    ;StartSizeRate = 2 2
    BurstCount = 1 1
    InitialDelay = 20 20
    IsGroundAligned = Yes
  End
  Color = DefaultColor
    Color1 = R:80 G:255 B:80 0
    Color2 = R:0 G:0 B:0 22
    ColorScale = -5 0
  End
  Update = DefaultUpdate
    SizeRate = 1.5 1.5
    SizeRateDamping = 1.03 1.03
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.75 0.8
  End
  EmissionVelocity = OutwardEmissionVelocity
  End
  EmissionVolume = LineEmissionVolume
    StartPoint = X:0 Y:0 Z:30
    EndPoint = X:0 Y:0 Z:20
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem LurtzWOPGrowb1
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXHPbibi.tga
    Lifetime = 25 25
    SystemLifetime = 55
    SortLevel = 1
    Size = 400 400
    StartSizeRate = 1 1
    BurstDelay = 2 2
    BurstCount = 1 1
    IsGroundAligned = Yes
  End
  Color = DefaultColor
    Color2 = R:95 G:255 B:95 10
    Color3 = R:0 G:0 B:0 22
    ColorScale = -20 20
  End
  Update = DefaultUpdate
    SizeRate = -10 -10
    SizeRateDamping = 1.05 1.05
    AngleZ = -180 180
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.75 0.8
  End
  EmissionVelocity = OutwardEmissionVelocity
    Speed = -4 -4
    OtherSpeed = -4 -4
  End
  EmissionVolume = LineEmissionVolume
    IsHollow = Yes
    StartPoint = X:0 Y:0 Z:20
    EndPoint = X:0 Y:0 Z:20
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem LurtzWOPGrowb2
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXLnzFlar1.tga
    Lifetime = 80 80
    SystemLifetime = 55
    SortLevel = 1
    Size = 12 12
    BurstDelay = 5 5
    BurstCount = 1 1
    InitialDelay = 20 20
  End
  Color = DefaultColor
    Color2 = R:80 G:255 B:80 20
    Color3 = R:0 G:0 B:0 70
  End
  Update = DefaultUpdate
    SizeRate = 1.5 1.5
    SizeRateDamping = 1.03 1.03
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.75 0.8
  End
  EmissionVelocity = OutwardEmissionVelocity
  End
  EmissionVolume = LineEmissionVolume
    StartPoint = X:0 Y:0 Z:25
    EndPoint = X:0 Y:0 Z:25
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem LurtzWOPGrowb3
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXLnzFlar2.tga
    Lifetime = 80 80
    SystemLifetime = 55
    SortLevel = 1
    Size = 30 30
    ;StartSizeRate = 2 2
    BurstCount = 1 1
    InitialDelay = 20 20
    IsGroundAligned = Yes
  End
  Color = DefaultColor
    Color1 = R:80 G:255 B:80 0
    Color2 = R:0 G:0 B:0 22
    ColorScale = -5 0
  End
  Update = DefaultUpdate
    SizeRate = 1.5 1.5
    SizeRateDamping = 1.03 1.03
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.75 0.8
  End
  EmissionVelocity = OutwardEmissionVelocity
  End
  EmissionVolume = LineEmissionVolume
    StartPoint = X:0 Y:0 Z:30
    EndPoint = X:0 Y:0 Z:30
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem LurtzWOPGrowc1
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXHPbibi.tga
    Lifetime = 25 25
    SystemLifetime = 55
    SortLevel = 1
    Size = 400 400
    StartSizeRate = 1 1
    BurstDelay = 2 2
    BurstCount = 1 1
    IsGroundAligned = Yes
  End
  Color = DefaultColor
    Color2 = R:95 G:255 B:95 10
    Color3 = R:0 G:0 B:0 22
    ColorScale = -20 20
  End
  Update = DefaultUpdate
    SizeRate = -10 -10
    SizeRateDamping = 1.05 1.05
    AngleZ = -180 180
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.75 0.8
  End
  EmissionVelocity = OutwardEmissionVelocity
    Speed = -4 -4
    OtherSpeed = -4 -4
  End
  EmissionVolume = LineEmissionVolume
    IsHollow = Yes
    StartPoint = X:0 Y:0 Z:20
    EndPoint = X:0 Y:0 Z:20
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem LurtzWOPGrowc2
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXLnzFlar1.tga
    Lifetime = 80 80
    SystemLifetime = 55
    SortLevel = 1
    Size = 12 12
    BurstDelay = 5 5
    BurstCount = 1 1
    InitialDelay = 20 20
  End
  Color = DefaultColor
    Color2 = R:255 G:255 B:80 20
    Color3 = R:0 G:0 B:0 70
  End
  Update = DefaultUpdate
    SizeRate = 1.5 1.5
    SizeRateDamping = 1.03 1.03
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.75 0.8
  End
  EmissionVelocity = OutwardEmissionVelocity
  End
  EmissionVolume = LineEmissionVolume
    StartPoint = X:0 Y:0 Z:25
    EndPoint = X:0 Y:0 Z:25
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem LurtzWOPGrowc3
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXLnzFlar2.tga
    Lifetime = 80 80
    SystemLifetime = 55
    SortLevel = 1
    Size = 30 30
    ;StartSizeRate = 2 2
    BurstCount = 1 1
    InitialDelay = 20 20
    IsGroundAligned = Yes
  End
  Color = DefaultColor
    Color1 = R:255 G:80 B:80 0
    Color2 = R:0 G:0 B:0 22
    ColorScale = -5 0
  End
  Update = DefaultUpdate
    SizeRate = 1.5 1.5
    SizeRateDamping = 1.03 1.03
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.75 0.8
  End
  EmissionVelocity = OutwardEmissionVelocity
  End
  EmissionVolume = LineEmissionVolume
    StartPoint = X:0 Y:0 Z:30
    EndPoint = X:0 Y:0 Z:30
  End
  Draw = DefaultDraw
  End
End


FXList FX_LurtzWOP
ParticleSystem
		Name = LurtzWOPBlastRing1
    		InitialDelay = 1000 1000 UNIFORM   ;In milliseconds
		Offset = X:0.0 Y:0.0 Z:0.0
	End

  ParticleSystem
    Name = LurtzWOPBlastRing2
    Offset = X:0.0 Y:0.0 Z:20
  End
  ParticleSystem
    Name = LurtzWOPBlastRing3
    Offset = X:0.0 Y:0.0 Z:20
  End
  ParticleSystem
    Name = LurtzWOPBlastRing4
    Offset = X:0.0 Y:0.0 Z:20
  End
;ParticleSystem
  ;  Name = RingsContinue
   ; Offset = X:0.0 Y:0.0 Z:20
  ;End
;ParticleSystem
   ; Name = RingsContinue2
   ; Offset = X:0.0 Y:0.0 Z:20
 ; End
;ParticleSystem
   ; Name = RingsContinue3
    ;Offset = X:0.0 Y:0.0 Z:20
  ;End
;ParticleSystem
    ;Name = RingsContinue4
    ;Offset = X:0.0 Y:0.0 Z:20
  ;End
ParticleSystem
  		Name = IceMeteorExp
  		Offset = X:0.0 Y:0.0 Z:15.0
  		OnlyIfOnLand = Yes
  	End
  	ParticleSystem
  		Name = IceMeteorExp02
  		Offset = X:0.0 Y:0.0 Z:15.0
  		OnlyIfOnLand = Yes
  	End
  	ParticleSystem
  		Name = IceMeteorExp02a
  		Offset = X:0.0 Y:0.0 Z:15.0
  		OnlyIfOnLand = Yes
  	End  	
  	ParticleSystem
  		Name = IceMeteorExp03
  		Offset = X:0.0 Y:0.0 Z:15.0
  		OnlyIfOnLand = Yes
  	End
  	ParticleSystem
	  	Name = IceMeteorExp04
	  	Offset = X:0.0 Y:0.0 Z:0.0
	  	OnlyIfOnLand = Yes
  	End
  	ParticleSystem
		Name = IceMeteorExp05
		Offset = X:0.0 Y:0.0 Z:20.0
		OnlyIfOnLand = Yes
  	End
  	ParticleSystem
	  	Name = IceMeteorExpEmbers
	  	Offset = X:0.0 Y:0.0 Z:20.0
	  	OnlyIfOnLand = Yes
  	End
DynamicDecal	; A decal that belongs to nobody, but updates internally to fade and tint and such
			DecalName		= EXSnowBlastPrint2
	;		Shader			= ADDITIVE
			Size			= 450		
			Color			= R:86 G:200 B:72 ;R:39 G:57 B:99
	
			OpacityStart		= 0
			OpacityFadeTimeOne	= 500
			OpacityPeak		= 215
			OpacityPeakTime		= 8000
			OpacityFadeTimeTwo	= 10000
			OpacityEnd		= 0
			StartingDelay		= 0
			Lifetime		= 19000
  	End
  	DynamicDecal	; A decal that belongs to nobody, but updates internally to fade and tint and such
			DecalName		= EXSnowBlastPrint2
			Size			= 300		
			Color			= R:86 G:200 B:72
	
			OpacityStart		= 0
			OpacityFadeTimeOne	= 400
			OpacityPeak		= 255
			OpacityPeakTime		= 17000
			OpacityFadeTimeTwo	= 20000
			OpacityEnd		= 0
			StartingDelay		= 0
			Lifetime		= 39000
  	End
End

Weapon SpecialAbilitySuperWOPWeapon
		IdleAfterFiringDelay = 0
	AttackRange = GANDALF_WORD_OF_POWER_RANGE
	MinimumAttackRange = 0.8
	WeaponSpeed = 401         ; dist/sec 
	MinWeaponSpeed = 241
	MaxWeaponSpeed = 601      ; dist/sec Upper limit on scaling, when attacking past nominal "max" range
	ScaleWeaponSpeed = Yes ; Used for lob weapons, scales speed proportional to range
	RadiusDamageAffects = ENEMIES NOT_SIMILAR
	DelayBetweenShots = 5000               ; time between shots, msec
	PreAttackDelay        = 2600
	PreAttackType         = PER_ATTACK ; Do the delay each time we attack a new target
	PreAttackFX           = FX_GandalfPreAttackBlastReal
	FireFX                = FX_LurtzWOP
	FiringDuration      = 1400
	DamageNugget                        ; A basic Nugget that just does damage
		Damage			= 50000
		Radius			= 250.0
		DamageType		= MAGIC
		DamageFXType	= MAGIC
		DeathType		= EXPLODED
		DamageSpeed		= 700.0 ; must match the ShockWaveSpeed below
	End
	MetaImpactNugget                    ; A Nugget that throws things back with force
;		HeroResist			= .75
		ShockWaveAmount   = 100.0
		ShockWaveRadius   = 250.0
		ShockWaveTaperOff = 1.0
		ShockWaveZMult    = 1.3
		ShockWaveSpeed	  = 700.0 
	End
End

ObjectCreationList SUPERWEAPON_SpawnWhirlwind0
  CreateObject
    ObjectNames = GaladrielTornado02
    Count = 1
    FadeIn = Yes
    FadeTime = 6000
    Offset = X:-200.0 Y:100.0 Z:0.0
End
CreateObject
ObjectNames = GaladrielTornado02
    Count = 1
    FadeIn = Yes
    FadeTime = 6000
    Offset = X:-200.0 Y:-100.0 Z:0.0
End
CreateObject
ObjectNames = GaladrielTornado02
    Count = 1
    FadeIn = Yes
    FadeTime = 6000
    Offset = X:-100.0 Y:100.0 Z:0.0
End
CreateObject
ObjectNames = GaladrielTornado02
    Count = 1
    FadeIn = Yes
    FadeTime = 6000
    Offset = X:-100.0 Y:-100.0 Z:0.0
End
End

ObjectCreationList OCL_SuperArrowVolley
	CreateObject
		ObjectNames	= SpellBookArrowVolley
                Offset = X:-600.0 Y:0.0 Z:0.0
	End
	CreateObject
		ObjectNames	= SpellBookArrowVolley
                Offset = X:-600.0 Y:-100.0 Z:0.0
	End
CreateObject
		ObjectNames	= SpellBookArrowVolley
                Offset = X:-600.0 Y:100.0 Z:0.0
	End
CreateObject
		ObjectNames	= SpellBookArrowVolley
                Offset = X:-500.0 Y:100.0 Z:0.0
	End
CreateObject
		ObjectNames	= SpellBookArrowVolley
                Offset = X:-500.0 Y:-100.0 Z:0.0
	End
CreateObject
		ObjectNames	= SpellBookArrowVolley
                Offset = X:-500.0 Y:0.0 Z:0.0
	End
CreateObject
		ObjectNames	= SpellBookArrowVolley
                Offset = X:-400.0 Y:100.0 Z:0.0
	End
CreateObject
		ObjectNames	= SpellBookArrowVolley
                Offset = X:-400.0 Y:-100.0 Z:0.0
	End
;----------------------------
	CreateObject
		ObjectNames	= SpellBookArrowVolley
                Offset = X:-300.0 Y:0.0 Z:0.0
	End
	CreateObject
		ObjectNames	= SpellBookArrowVolley
                Offset = X:-300.0 Y:-100.0 Z:0.0
	End
CreateObject
		ObjectNames	= SpellBookArrowVolley
                Offset = X:-300.0 Y:100.0 Z:0.0
	End
CreateObject
		ObjectNames	= SpellBookArrowVolley
                Offset = X:-200.0 Y:100.0 Z:0.0
	End
CreateObject
		ObjectNames	= SpellBookArrowVolley
                Offset = X:-200.0 Y:-100.0 Z:0.0
	End
CreateObject
		ObjectNames	= SpellBookArrowVolley
                Offset = X:-200.0 Y:0.0 Z:0.0
	End
;----------------
CreateObject
		ObjectNames	= SpellBookArrowVolley
                Offset = X:-600.0 Y:200.0 Z:0.0
	End
	CreateObject
		ObjectNames	= SpellBookArrowVolley
                Offset = X:-600.0 Y:-200.0 Z:0.0
	End
CreateObject
		ObjectNames	= SpellBookArrowVolley
                Offset = X:-500.0 Y:200.0 Z:0.0
	End
CreateObject
		ObjectNames	= SpellBookArrowVolley
                Offset = X:-500.0 Y:-200.0 Z:0.0
	End
CreateObject
		ObjectNames	= SpellBookArrowVolley
                Offset = X:-400.0 Y:-200.0 Z:0.0
	End
CreateObject
		ObjectNames	= SpellBookArrowVolley
                Offset = X:-400.0 Y:200.0 Z:0.0
	End
CreateObject
		ObjectNames	= SpellBookArrowVolley
                Offset = X:-300.0 Y:200.0 Z:0.0
	End
CreateObject
		ObjectNames	= SpellBookArrowVolley
                Offset = X:-300.0 Y:-200.0 Z:0.0
	End

	CreateObject
		ObjectNames	= SpellBookArrowVolley
                Offset = X:-200.0 Y:-200.0 Z:0.0
	End
	CreateObject
		ObjectNames	= SpellBookArrowVolley
                Offset = X:-200.0 Y:200.0 Z:0.0
	End
End



       

FXList FX_TheodenGloriousChargeFX
	Sound
		Name = TheodenGloriousChargeEffect
	End

  TintDrawable
	Color				= R:255 G:255 B:255
	PreColorTime		= 100				; these numbers must add up to the (30 * number of seconds) of gloriious charge
	PostColorTime		= 100
	SustainedColorTime	= 400
	Frequency			= 0
	Amplitude			= 0
  End
 
  ParticleSystem
   Name = GCglowHorseWhite
   AttachToObject = Yes
   AttachToBone = BAT_HHEAD
  End
  
  ParticleSystem
	Name = GCglowHorseRearWhite
	AttachToObject = Yes
	AttachToBone = B_HHIPL
  End
  
  ParticleSystem
	Name = GCglowWhite
	AttachToObject = Yes
	AttachToBone = BAT_SPINE2
  End
End

FXParticleSystem ArrowStormDust1
  System
    Priority = MEDIUM_OR_ABOVE
    Shader = ALPHA
    ParticleName = EXsnowcloud02.tga
    Lifetime = 80 80
    SystemLifetime = 25
    SortLevel = 1
    Size = 30 30
    BurstDelay = 2 2
    BurstCount = 1 1
    InitialDelay = 150 150
  End
  Color = DefaultColor
    Color1 = R:89 G:136 B:255 0
  End
  Alpha = DefaultAlpha
    Alpha2 = 0.15 0.3 5
    Alpha3 = -0.2 0 80
  End
  Update = DefaultUpdate
    SizeRate = 1 2
    SizeRateDamping = 0.93 0.97
    AngleZ = 0 7
    AngularRateZ = -0.2 0.2
    AngularDamping = 0.95 0.96
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
    DriftVelocity = X:0.1 Y:0 Z:0.1
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = -0.5 0.5
    Y = -0.5 0.5
    Z = 0.2 0.25
  End
  EmissionVolume = CylinderEmissionVolume
    Radius = 75
    Offset = X:0 Y:0 Z:15
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem ArrowStormEmbers1
  System
    Priority = VERY_LOW_OR_ABOVE
    ParticleName = EXEmbersLight.tga
    Lifetime = 80 80
    SystemLifetime = 20
    SortLevel = 1
    Size = 25 30
    BurstCount = 5 5
    InitialDelay = 150 150
  End
  Color = DefaultColor
    Color1 = R:90 G:60 B:220 0
    Color2 = R:0 G:0 B:0 80
  End
  Alpha = DefaultAlpha
    Alpha2 = 0.15 0.3 5
    Alpha3 = -0.2 0 180
  End
  Update = DefaultUpdate
    SizeRate = 1 1.2
    SizeRateDamping = 0.93 0.97
    AngleZ = 0 7
    AngularRateZ = -0.01 0.01
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
    DriftVelocity = X:0.2 Y:0 Z:0.1
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = -0.5 0.5
    Z = 0.2 0.25
  End
  EmissionVolume = CylinderEmissionVolume
    Radius = 75
    Offset = X:0 Y:0 Z:15
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem ArrowStormShock1
  System
    Priority = VERY_LOW_OR_ABOVE
    ParticleName = EXShockWav.tga
    Lifetime = 10 10
    SystemLifetime = 30
    SortLevel = 1
    Size = 0 5
    BurstCount = 5 5
    InitialDelay = 150 150
    IsGroundAligned = Yes
  End
  Color = DefaultColor
    Color1 = R:89 G:140 B:220 0
    Color2 = R:0 G:0 B:0 10
  End
  Alpha = DefaultAlpha
    Alpha2 = 0.15 0.3 5
    Alpha3 = -0.2 0 180
  End
  Update = DefaultUpdate
    SizeRate = 2 2
    SizeRateDamping = 0.9 0.9
    AngleZ = 0 7
    AngularRateZ = -0.01 0.01
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = CylinderEmissionVolume
    Radius = 100
    Offset = X:0 Y:0 Z:15
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem ArrowVolleyFire1
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXFire03.tga
    Lifetime = 15 15
    SortLevel = 1
    Size = 10 10
    BurstCount = 1 1
  End
  Color = DefaultColor
    Color2 = R:89 G:168 B:255 8
    Color3 = R:0 G:0 B:0 15
  End
  Update = DefaultUpdate
    SizeRate = -0.25 -0.25
    SizeRateDamping = 0.99 0.99
    AngleZ = -1 1
    AngularRateZ = -0.05 0.05
    AngularDamping = 1 1
    Rotation = ROTATE_Z
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.8 0.85
    DriftVelocity = X:0 Y:0 Z:1
  End
  EmissionVelocity = CylindricalEmissionVelocity
    Radial = -1 1
  End
  EmissionVolume = PointEmissionVolume
  End
  Draw = DefaultDraw
  End
  Wind = DefaultWind
    WindStrength = 0.1
    WindAngleChangeMin = 0.149924
    WindAngleChangeMax = 0.449946
    WindPingPongStartAngleMax = 0.785398
    WindPingPongEndAngleMin = 5.49779
    WindPingPongEndAngleMax = 6.28319
  End
End

;----------------------------
FXParticleSystem GandalfBlastInitialCenter1
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXLnzFlar1.tga
    Lifetime = 40 40
    SystemLifetime = 20
    SortLevel = 1
    Size = 5 5
    BurstDelay = 5 5
    BurstCount = 1 1
    InitialDelay = 20 20
  End
  Color = DefaultColor
    Color2 = R:136 G:172 B:255 20
    Color3 = R:0 G:0 B:0 40
  End
  Update = DefaultUpdate
    SizeRate = 2 2
    SizeRateDamping = 1.03 1.03
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.75 0.8
  End
  EmissionVelocity = OutwardEmissionVelocity
  End
  EmissionVolume = LineEmissionVolume
    StartPoint = X:0 Y:0 Z:8
    EndPoint = X:0 Y:0 Z:8
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem GandalfBlastInitialVortex1
  System
    Priority = HIGH_OR_ABOVE
    ParticleName = EXLnzFlar2.tga
    Lifetime = 40 40
    SystemLifetime = 20
    SortLevel = 1
    Size = 5 5
    BurstDelay = 1 1
    BurstCount = 20 20
    IsParticleUpTowardsEmitter = Yes
  End
  Color = DefaultColor
    Color2 = R:136 G:172 B:255 5
  End
  Update = DefaultUpdate
    SizeRateDamping = 1 1
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 1.1 1.1
  End
  EmissionVelocity = OutwardEmissionVelocity
    Speed = -0.4 -0.4
  End
  EmissionVolume = CylinderEmissionVolume
    IsHollow = Yes
    Radius = 240
    Length = 16
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem GandalfBlastInitialWave1
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXRing01.tga
    Lifetime = 10 10
    SystemLifetime = 20
    SortLevel = 1
    Size = 150 150
    StartSizeRate = 1 1
    BurstDelay = 2 2
    BurstCount = 1 1
    IsGroundAligned = Yes
  End
  Color = DefaultColor
    Color2 = R:32 G:40 B:100 10
    Color3 = R:0 G:0 B:0 22
    ColorScale = -20 20
  End
  Update = DefaultUpdate
    SizeRate = -10 -10
    SizeRateDamping = 1.05 1.05
    AngleZ = -180 180
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.75 0.8
  End
  EmissionVelocity = OutwardEmissionVelocity
    Speed = -4 -4
    OtherSpeed = -4 -4
  End
  EmissionVolume = LineEmissionVolume
    IsHollow = Yes
    StartPoint = X:0 Y:0 Z:-8
    EndPoint = X:0 Y:0 Z:10
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem GandalfBlastRipple1
  System
    Priority = VERY_LOW_OR_ABOVE
    Shader = ALPHA
    ParticleName = SMUDGE.tga
    Lifetime = 25 25
    SystemLifetime = 25
    Size = 5 5
    BurstCount = 2 3
    InitialDelay = 15 15
  End
  Color = DefaultColor
    Color1 = R:32 G:40 B:100 0
  End
  Alpha = DefaultAlpha
    Alpha1 = 1 1 0
  End
  Update = DefaultUpdate
    SizeRate = 3 3
    SizeRateDamping = 1 1
    AngleZ = 0.01 0.02
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.96 0.97
    DriftVelocity = X:0 Y:0 Z:1
  End
  EmissionVelocity = CylindricalEmissionVelocity
    Radial = 1 2
    Normal = 1 1
  End
  EmissionVolume = CylinderEmissionVolume
    Radius = 32
    Length = 50
  End
  Draw = DefaultDraw
  End
End

;------------


FXParticleSystem GandalfBlastDust1
  System
    Priority = VERY_LOW_OR_ABOVE
    Shader = ALPHA
    ParticleName = EXsnowcloud02.tga
    PerParticleAttachedSystem = GandalfBlastDustCore
    Lifetime = 100 100
    SystemLifetime = 5
    Size = 1 2
    BurstCount = 25 50
    InitialDelay = 5 5
  End
  Color = DefaultColor
    Color1 = R:32 G:40 B:100 0
  End
  Alpha = DefaultAlpha
    Alpha1 = 0.2 0.3 0
    Alpha2 = -2 0 100
  End
  Update = DefaultUpdate
    SizeRate = 2 15
    SizeRateDamping = 0.8 0.8
    AngleZ = 0 7
    AngularRateZ = -0.1 -0.1
    AngularDamping = 0.92 0.94
    Rotation = ROTATE_V
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.92 0.94
    DriftVelocity = X:0.032 Y:0.064 Z:0.15
  End
  EmissionVelocity = OutwardEmissionVelocity
    Speed = 20 20
  End
  EmissionVolume = CylinderEmissionVolume
    Radius = 12
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem GandalfBlastFinalLight1
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXexplo01.tga
    Lifetime = 10 10
    SystemLifetime = 5
    SortLevel = 1
    Size = 5 5
    BurstCount = 2 2
  End
  Color = DefaultColor
    Color1 = R:32 G:40 B:100 0
    Color2 = R:0 G:0 B:0 10
  End
  Update = DefaultUpdate
    SizeRate = 80 160
    SizeRateDamping = 0.8 0.7
    AngleZ = -1 1
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    Gravity = 1
    VelocityDamping = 1 1
  End
  EmissionVelocity = OutwardEmissionVelocity
    Speed = 1 1
  End
  EmissionVolume = PointEmissionVolume
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem GandalfBlastFinalShockWave1
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXRing01.tga
    Lifetime = 40 40
    SystemLifetime = 5
    SortLevel = 1
    Size = 1 1
    BurstCount = 1 1
    IsGroundAligned = Yes
  End
  Color = DefaultColor
    Color1 = R:32 G:40 B:100 0
    Color2 = R:0 G:0 B:0 40
    ColorScale = -40 40
  End
  Update = DefaultUpdate
    SizeRate = 35 35
    SizeRateDamping = 1 1
    AngleZ = -1 1
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.8 0.8
  End
  EmissionVelocity = OutwardEmissionVelocity
  End
  EmissionVolume = PointEmissionVolume
    IsHollow = Yes
  End
  Draw = DefaultDraw
  End
End


FXParticleSystem ArrowVolleyTrail21
  System
    Priority = VERY_LOW_OR_ABOVE
    IsOneShot = Yes
    Shader = ALPHA
    ParticleName = EXCloud06HiRes.tga
    Lifetime = 100 100
    SystemLifetime = 100
    StartSizeRate = -0.15 -0.15
    BurstCount = 0 2
    InitialDelay = 45 45
  End
  Color = DefaultColor
    Color1 = R:89 G:168 B:255 0
    Color2 = R:100 G:168 B:200 3
    Color3 = R:0 G:0 B:0 5
    Color4 = R:0 G:0 B:0 55
  End
  Alpha = DefaultAlpha
    Alpha2 = 0.25 0.5 10
    Alpha3 = -0.5 0 100
  End
  Update = DefaultUpdate
    SizeRate = 3 3
    SizeRateDamping = 0.9 0.95
    AngleZ = -7 7
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
    DriftVelocity = X:0 Y:0.2 Z:1.5
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = -0.2 0.2
    Y = -0.2 0.2
    Z = -0.1 0.1
  End
  EmissionVolume = PointEmissionVolume
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem GoldArrowTrail1
  System
    Priority = VERY_LOW_OR_ABOVE
    ParticleName = EXSplatHaze.tga
    Lifetime = 30 30
    SortLevel = 1
    Size = 0 15
    BurstCount = 5 10
    IsParticleUpTowardsEmitter = Yes
  End
  Color = DefaultColor
    Color2 = R:89 G:168 B:255 5
    Color3 = R:0 G:0 B:0 30
  End
  Update = DefaultUpdate
    SizeRate = -0.25 -0.2
    SizeRateDamping = 1 1
    AngleZ = -7 7
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    Gravity = -0.01
    VelocityDamping = 1 1
    DriftVelocity = X:0 Y:0 Z:-0.1
  End
  EmissionVelocity = OrthoEmissionVelocity
    Z = 0 -0.1
  End
  EmissionVolume = SphereEmissionVolume
    Radius = 10
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem SuperBladeMaster1
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXRing02.tga
    Lifetime = 15 15
    SortLevel = 1
    Size = 15 25
    BurstCount = 1 1
    IsGroundAligned = Yes
  End
  Color = DefaultColor
    Color2 = R:30 G:30 B:30 5
    Color3 = R:0 G:0 B:0 15
    Color4 = R:32 G:32 B:32 0
  End
  Update = DefaultUpdate
    SizeRate = 1 1
    SizeRateDamping = 1 1
    AngleZ = -4 4
    AngularRateZ = -0.1 0.1
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    Gravity = -0.03
    VelocityDamping = 1 1
  End
  EmissionVelocity = OutwardEmissionVelocity
  End
  EmissionVolume = LineEmissionVolume
    IsHollow = Yes
    StartPoint = X:0 Y:0 Z:15
    EndPoint = X:0 Y:0 Z:15
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem SuperBladeMaster2
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXRing01.tga
    Lifetime = 15 15
    SortLevel = 1
    Size = 15 25
    BurstCount = 1 1
    ;IsGroundAligned = Yes
  End
  Color = DefaultColor
    Color2 = R:30 G:30 B:30 5
    Color3 = R:0 G:0 B:0 15
    Color4 = R:32 G:32 B:32 0
  End
  Update = DefaultUpdate
    SizeRate = 1 1
    SizeRateDamping = 1 1
    AngleZ = -4 4
    AngularRateZ = -0.1 0.1
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    Gravity = -0.0001
    VelocityDamping = 1 1
  End
  EmissionVelocity = OutwardEmissionVelocity
  End
  EmissionVolume = LineEmissionVolume
    IsHollow = Yes
    StartPoint = X:0 Y:0 Z:15
    EndPoint = X:0 Y:0 Z:15
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem SuperBladeMaster3
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXBarbStreaks.tga   ;EXRing01.tga
    Lifetime = 30 30
    SortLevel = 1
    Size = 7 13
    BurstCount = 1 1
    IsGroundAligned = Yes
  End
  Color = DefaultColor
    Color2 = R:30 G:30 B:30 5
    Color3 = R:0 G:0 B:0 15
    Color4 = R:30 G:30 B:32 0
  End
  Update = DefaultUpdate
    SizeRate = 0.5 1
    SizeRateDamping = 1 1
    AngleZ = -4 4
    AngularRateZ = -0.1 0.1
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    Gravity = -0.02
    VelocityDamping = 1 1
  End
  EmissionVelocity = OutwardEmissionVelocity
  End
  EmissionVolume = LineEmissionVolume
    IsHollow = Yes
    StartPoint = X:0 Y:0 Z:15
    EndPoint = X:0 Y:0 Z:15
  End
  Draw = DefaultDraw
  End
End

;----------------------

FXParticleSystem BladeMaster1
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXRing02.tga
    Lifetime = 15 15
    SortLevel = 1
    Size = 15 25
    BurstCount = 1 1
    IsGroundAligned = Yes
  End
  Color = DefaultColor
    Color2 = R:30 G:60 B:30 5
    Color3 = R:0 G:0 B:0 15
    Color4 = R:32 G:32 B:32 0
  End
  Update = DefaultUpdate
    SizeRate = 1 1
    SizeRateDamping = 1 1
    AngleZ = -4 4
    AngularRateZ = -0.1 0.1
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    Gravity = -0.03
    VelocityDamping = 1 1
  End
  EmissionVelocity = OutwardEmissionVelocity
  End
  EmissionVolume = LineEmissionVolume
    IsHollow = Yes
    StartPoint = X:0 Y:0 Z:15
    EndPoint = X:0 Y:0 Z:15
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem BladeMaster2
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXRing01.tga
    Lifetime = 15 15
    SortLevel = 1
    Size = 15 25
    BurstCount = 1 1
    ;IsGroundAligned = Yes
  End
  Color = DefaultColor
    Color2 = R:30 G:60 B:30 5
    Color3 = R:0 G:0 B:0 15
    Color4 = R:32 G:32 B:32 0
  End
  Update = DefaultUpdate
    SizeRate = 1 1
    SizeRateDamping = 1 1
    AngleZ = -4 4
    AngularRateZ = -0.1 0.1
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    Gravity = -0.0001
    VelocityDamping = 1 1
  End
  EmissionVelocity = OutwardEmissionVelocity
  End
  EmissionVolume = LineEmissionVolume
    IsHollow = Yes
    StartPoint = X:0 Y:0 Z:15
    EndPoint = X:0 Y:0 Z:15
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem BladeMaster3
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXBarbStreaks.tga   ;EXRing01.tga
    Lifetime = 30 30
    SortLevel = 1
    Size = 7 13
    BurstCount = 1 1
    IsGroundAligned = Yes
  End
  Color = DefaultColor
    Color2 = R:30 G:60 B:30 5
    Color3 = R:0 G:0 B:0 15
    Color4 = R:30 G:30 B:32 0
  End
  Update = DefaultUpdate
    SizeRate = 0.5 1
    SizeRateDamping = 1 1
    AngleZ = -4 4
    AngularRateZ = -0.1 0.1
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    Gravity = -0.02
    VelocityDamping = 1 1
  End
  EmissionVelocity = OutwardEmissionVelocity
  End
  EmissionVolume = LineEmissionVolume
    IsHollow = Yes
    StartPoint = X:0 Y:0 Z:15
    EndPoint = X:0 Y:0 Z:15
  End
  Draw = DefaultDraw
  End
End

;----------------------

FXParticleSystem Attack3
  System
    Priority = VERY_LOW_OR_ABOVE
    IsOneShot = Yes
    ParticleName = EXexplo03.tga
    Lifetime = 50 50
    SystemLifetime = 50
    Size = 20 30
    BurstCount = 5 5
    InitialDelay = 10 10
  End
  Color = DefaultColor
    Color1 = R:16 G:16 B:60 5
    Color3 = R:0 G:0 B:0 50
  End
  Alpha = DefaultAlpha
    Alpha2 = 0.15 0.3 5
    Alpha3 = -0.2 0 10
  End
  Update = DefaultUpdate
    SizeRate = 5 10
    SizeRateDamping = 0.9 0.95
    AngleZ = -7 7
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = CylinderEmissionVolume
    IsHollow = Yes
    RadiusRate = 5
    Offset = X:0 Y:0 Z:10
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem Attack1
  System
   Priority = VERY_LOW_OR_ABOVE
    ParticleName = EXEmbersLight.tga
    Lifetime = 160 160
    SystemLifetime = 20
    SortLevel = 1
    Size = 100 120
    BurstCount = 5 5
    InitialDelay = 150 150
  End
  Color = DefaultColor
    Color1 = R:32 G:32 B:60 0
    Color2 = R:0 G:0 B:0 80
  End
  Alpha = DefaultAlpha
    Alpha2 = 0.15 0.3 5
    Alpha3 = -0.2 0 180
  End
  Update = DefaultUpdate
    SizeRate = 1 1.2
    SizeRateDamping = 0.93 0.97
    AngleZ = 0 7
    AngularRateZ = -0.01 0.01
    AngularDamping = 1 1
    AngularDampingXY = 5 5
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
    DriftVelocity = X:0.2 Y:0 Z:0.1
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = 5 5
    Z = 5.5 8.5
  End
  EmissionVolume = CylinderEmissionVolume
    Radius = 75
    Offset = X:50 Y:50 Z:15
  End
  Draw = DefaultDraw
  End
End



FXParticleSystem Attack2
  System
    Priority = VERY_LOW_OR_ABOVE
    ParticleName = EXLnzFlar2.tga
    Lifetime = 150 150
    SystemLifetime = 5
    SortLevel = 1
    Size = 72 72
    BurstCount = 1 1
  End
  Color = DefaultColor
    Color1 = R:32 G:100 B:180 0
    Color2 = R:0 G:0 B:0 75
  End
  Update = DefaultUpdate
    SizeRate = 5 10
    SizeRateDamping = 0.85 0.9
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
    DriftVelocity = X:5 Y:50 Z:0.25
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = CylinderEmissionVolume
    Radius = 15
    Offset = X:0 Y:0 Z:5
  End
  Draw = DefaultDraw
  End
End

FXList FX_EomerSpearThrow1
 ParticleSystem
    Name = Spear
    Offset = X:0.0 Y:0.0 Z:20.0
  End
End

FXList FX_ArrowAttack
;ParticleSystem 
   ; Name = Attack1
   ; Offset = X:140.0 Y:100.0 Z:50.0
 ; End    
;  ParticleSystem 
  ;  Name = Attack2
   ; Offset = X:300.0 Y:100.0 Z:70.0
;  End
  ParticleSystem 
    Name = Attack3
    Offset = X:0.0 Y:0.0 Z:15.0
  End
End

FXList FX_SmiteHit1
	ParticleSystem
	    Name = SmiteHitFXFlash1
            Offset = X:0.0 Y:0.0 Z:0.0
	End
	ParticleSystem
	    Name = SmiteHitFX1
            Offset = X:0.0 Y:0.0 Z:0.0
	End
	Sound
		Name = ImpactEowynSmiteSpear
	End
End

FXParticleSystem SpearContrailThin1
  System
    Priority = ALWAYS_RENDER
    Type = STREAK
    ParticleName = EXContrail.tga
    Lifetime = 7 7
    SortLevel = 1
    Size = 1 2
    BurstCount = 1 1
    InitialDelay = 1 1
  End
  Color = DefaultColor
    Color1 = R:32 G:100 B:180 0
    Color2 = R:0 G:0 B:0 7
    Color4 = R:32 G:32 B:48 0
  End
  Alpha = DefaultAlpha
  End
  Update = DefaultUpdate
    SizeRate = -0.3 -0.3
    SizeRateDamping = 0.85 0.9
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.93 0.94
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = LineEmissionVolume
    StartPoint = X:7 Y:0 Z:0
    EndPoint = X:8 Y:0 Z:0
  End
  Draw = StreakDraw
  End
End

FXParticleSystem SpearFlameTrail1
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXspearhead.tga
    Lifetime = 50 50
    SortLevel = 1
    Size = 40 40
    BurstCount = 2 2
    IsGroundAligned = Yes
    IsParticleUpTowardsEmitter = Yes
  End
  Color = DefaultColor
    Color1 = R:28 G:58 B:168 0
    Color2 = R:0 G:0 B:28 50
  End
  Alpha = DefaultAlpha
  End
  Update = DefaultUpdate
    SizeRateDamping = 0.8 0.9
    AngleZ = -2 2
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = PointEmissionVolume
  End
  Draw = DefaultDraw
  End
End

;-------------------------------------------
FXList GandalfLevelUp1FX
  ParticleSystem
   Name = LevelUpRing
  End
  ParticleSystem
   Name = LevelUpShaftsMotes
  End
  Sound
     Name = HeroGenericLevelUp
  End
End


;FXList FX_UPGRADE	
 ;ParticleSystem
    ;Name = UPGRADE
    ;Offset = X:0.0 Y:0.0 Z:20.0
  ;End
;End

ModifierList WizardModifier	
	Category = SPELL
	Modifier = ARMOR 100%			; Additive.  Sum of these are subtracted from all entries in Armor.ini
	Modifier = DAMAGE_MULT 150%		; Multiplicitive.			; Multiplicitive.	
	Modifier = RECHARGE_TIME 50%	
	Duration = 30000
        FX       = FX_TheodenGloriousChargeFX
End 


ModifierList ArcherModifier
	Category = SPELL
	Modifier = ARMOR 50%			; Additive.  Sum of these are subtracted from all entries in Armor.ini
	Modifier = DAMAGE_MULT 200%		; Multiplicitive.
    	Modifier = RANGE 50% 		// Additive.
   	Modifier = VISION 60%		// Additive. 	
	Duration = 30000
        FX       = FX_TheodenGloriousChargeFX
End

ModifierList DarkLordsLament1
	Category					= DEBUFF
	Modifier					= RESIST_KNOCKBACK 100%
	Modifier					= CRUSHABLE_LEVEL 5
	Duration					= ANGMAR_SHADE_LAMENT_DURATION
	ReplaceInCategoryIfLongest			= Yes
	FX						= FX_SoulFreeze
End

ModifierList SoulFreezeModifier1
	Category					= DEBUFF
	Modifier					= RESIST_KNOCKBACK 100%
	Modifier					= CRUSHABLE_LEVEL 5
	Duration					= ANGMAR_NECRO_SOUL_FREEZE_DURATION
	FX						= FX_SoulFreeze
	ReplaceInCategoryIfLongest			= Yes
End

ModifierList SuperBladeMaster
	Category = SPELL
	Modifier = ARMOR 100%			; Additive.  Sum of these are subtracted from all entries in Armor.ini
	Modifier = DAMAGE_MULT 200%		; Multiplicitive.
	Modifier = SPEED 125%			; Multiplicitive.		
	Duration = 30000
        FX       = FX_TheodenGloriousChargeFX
End


ModifierList MoreAttack
	Category = SPELL
	Modifier = DAMAGE_ADD 100
	Duration = 0; ;
        FX		 = GandalfLevelUp1FX   
;       FX UPGRADE eliminated   
End

ModifierList MoreAttack2
	Category = SPELL
	Modifier = DAMAGE_ADD 100
	Duration = 0; ;
        FX		 = GandalfLevelUp1FX   
End

ModifierList MoreAttack3
	Category = SPELL
	Modifier = DAMAGE_ADD 100
	Duration = 0; ;
        FX		 = GandalfLevelUp1FX   
End

ModifierList MoreAttack4
	Category = SPELL
	Modifier = DAMAGE_ADD 100
	Duration = 0; ;
        FX		 = GandalfLevelUp1FX   
End

ModifierList MoreAttack5
	Category = SPELL
	Modifier = DAMAGE_ADD 100
	Duration = 0; ;
        FX		 = GandalfLevelUp1FX   
End

ModifierList MoreAttack6
	Category = SPELL
	Modifier = DAMAGE_ADD 100
	Duration = 0; ;
        FX		 = GandalfLevelUp1FX   
End

ModifierList MoreAttack7
	Category = SPELL
	Modifier = DAMAGE_ADD 100
	Duration = 0; ;
        FX		 = GandalfLevelUp1FX   
End

ModifierList MoreAttack8
	Category = SPELL
	Modifier = DAMAGE_ADD 100
	Duration = 0; ;
        FX		 = GandalfLevelUp1FX   
End

;-----------------------------------------------------------------------------
ModifierList MoreDefence
	Category = SPELL
	Modifier = ARMOR 50%
	Duration = 0; ;
        FX		 = GandalfLevelUp1FX   
End

ModifierList MoreDefence2
	Category = SPELL
	Modifier = ARMOR 50%
	Duration = 0; ;
        FX		 = GandalfLevelUp1FX   
End

ModifierList MoreDefence3
	Category = SPELL
	Modifier = ARMOR 50%
	Duration = 0; ;
        FX		 = GandalfLevelUp1FX   
End

ModifierList MoreDefence4
	Category = SPELL
	Modifier = ARMOR 50%
	Duration = 0; ;
        FX		 = GandalfLevelUp1FX   
End

ModifierList MoreDefence5
	Category = SPELL
	Modifier = ARMOR 50%
	Duration = 0; ;
        FX		 = GandalfLevelUp1FX   
End

ModifierList MoreDefence6
	Category = SPELL
	Modifier = ARMOR 50%
	Duration = 0; ;
        FX		 = GandalfLevelUp1FX   
End

ModifierList MoreDefence7
	Category = SPELL
	Modifier = ARMOR 50%
	Duration = 0; ;
        FX		 = GandalfLevelUp1FX   
End

ModifierList MoreDefence8
	Category = SPELL
	Modifier = ARMOR 50%
	Duration = 0; ;
        FX		 = GandalfLevelUp1FX   
End

;---------------------------------------------------------------------

ModifierList MoreLife
	Category = SPELL
        Modifier = HEALTH 1000
	Duration = 0; ;
        FX		 = GandalfLevelUp1FX   
End

ModifierList MoreLife2
	Category = SPELL
        Modifier = HEALTH 1000
	Duration = 0; ;
        FX		 = GandalfLevelUp1FX   
End

ModifierList MoreLife3
	Category = SPELL
        Modifier = HEALTH 1000
	Duration = 0; ;
        FX		 = GandalfLevelUp1FX   
End

ModifierList MoreLife4
	Category = SPELL
        Modifier = HEALTH 1000
	Duration = 0; ;
        FX		 = GandalfLevelUp1FX   
End

ModifierList MoreLife5
	Category = SPELL
        Modifier = HEALTH 1000
	Duration = 0; ;
        FX		 = GandalfLevelUp1FX   
End

ModifierList MoreLife6
	Category = SPELL
        Modifier = HEALTH 1000
	Duration = 0; ;
        FX		 = GandalfLevelUp1FX   
End

ModifierList MoreLife7
	Category = SPELL
        Modifier = HEALTH 1000
	Duration = 0; ;
        FX		 = GandalfLevelUp1FX   
End

ModifierList MoreLife8
	Category = SPELL
        Modifier = HEALTH 1000
	Duration = 0; ;
        FX		 = GandalfLevelUp1FX   
End

;-----------------------------------------------------------------



;FXParticleSystem UPGRADE
 ; System
   ; Priority = VERY_LOW_OR_ABOVE
   ; ParticleName = EXLvlUpClutter.TGA
   ; Lifetime = 100 100
   ; SystemLifetime = 20
   ; Size = 60 60
    ;BurstCount = 2 2
   ; IsGroundAligned = Yes
  ;End
  ;Color = DefaultColor
    ;Color2 = R:124 G:124 B:124 20
    ;Color3 = R:0 G:0 B:0 100
 ; End
  ;Update = DefaultUpdate
   ; SizeRateDamping = 0.9 0.9
   ; AngleZ = 0 7
   ; AngularRateZ = -0.1 0.1
   ; AngularDamping = 1 1
   ; AngularDampingXY = 1 1
  ;End
  ;Physics = DefaultPhysics
  ;  VelocityDamping = 1 1
 ; End
  ;EmissionVelocity = OrthoEmissionVelocity
  ;End
  ;EmissionVolume = BoxEmissionVolume
   ; IsHollow = Yes
   ; HalfSize = X:5 Y:5 Z:20
  ;End
  ;Draw = DefaultDraw
  ;End
;End

Armor WarriorArmor
  Armor = DEFAULT          50%   
  Armor = SLASH            50%   
  Armor = PIERCE           50%   ; ; 25; ; 20
  Armor = SPECIALIST       50%   ; ; 25; ; 60
  Armor = CRUSH             50%    ; ; 1
  Armor = CAVALRY	   50% 
  Armor = SIEGE            50%   
  Armor = FLAME            50%   ; ; 25; ; 40
  Armor = MAGIC           50%   ; ; 100; ; 50
  Armor = HERO            50%   ;; ; 50
  Armor = POISON	   50% 
  Armor = STRUCTURAL	  50%; ; 50
  	
 ;FlankedPenalty 	 = 50%    
  Armor = CAVALRY_RANGED   50% ; ;
End

;------------------------------------------------------------------------------
Weapon BoromirSword
  LeechRangeWeapon      = Yes
  AttackRange           = STANDARD_MELEE_ATTACK_RANGE
  MeleeWeapon           = Yes
  DelayBetweenShots     = BOROMIR_DELAYBETWEENSHOTS 		
  RadiusDamageAffects			= ENEMIES	
             ; time between shots, msec
  PreAttackDelay        = BOROMIR_PREATTACKDELAY 				; 400 is sword swing delay time before contact with target.
  PreAttackType         = PER_SHOT ; Do the delay each time we attack a new target
  FireFX                = FX_GondorSwordHit
  FiringDuration        = BOROMIR_FIRINGDURATION 				; Duration of the sword swing

  DamageNugget                        ; A basic Nugget that just does damage
    Damage        = 1000					
    Radius        = 200.0
    DelayTime     = 0
    DamageType    = HERO
    DamageFXType  = SWORD_SLASH
    DeathType     = NORMAL
  End

	DamageNugget                        ; A basic Nugget that just does damage
		Damage        = BOROMIR_DAMAGE					
		DamageArc 		= 50
		Radius			= 80.0
		DamageType    = HERO
		DamageFXType  = SWORD_SLASH;FLAME
		DeathType     = NORMAL
		DamageSpeed		= 500.0 ; must match the ShockWaveSpeed below
	End
	MetaImpactNugget                    ; A Nugget that throws things back with force
		HeroResist			= 2.00
		ShockWaveAmount   = 50.0
		ShockWaveArc	  = 50
		ShockWaveRadius   = 50.0
		ShockWaveTaperOff = 1.25
		ShockWaveZMult    = 0.7
		ShockWaveSpeed	  = 500.0
	End
End

;------------------------------------------------------------------------------
SpecialPower SpellBookDarkness
	Enum                     = SPECIAL_SPELL_BOOK_DARKNESS
	RequiredSciences          = SCIENCE_Darkness
	ReloadTime               = 5000 ; ; SPELL_RECHARGE_TIME_TIER_3  ;600000 in milliseconds
	InitiateAtLocationSound  = SpellDarkness
	Flags					 = RESPECT_RECHARGE_TIME_DISCOUNT
End

Object InGameMarker
AddModule
	Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate
		MinLifetime		= 300000
		MaxLifetime		= 300000
		DeathType		= FADED
	End
End
End

Object MultiplayerBeacon
AddModule
	Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate
		MinLifetime		= 300000
		MaxLifetime		= 300000
		DeathType		= FADED
	End
End
End

ObjectCreationList OCL_Statue
	CreateObject
		ObjectNames			= MinisStoneGuard1
		Count				= 1
		SpreadFormation		= No
		IgnoreAllObjects	= Yes
	End
End

Object MinisStoneGuard1
ReplaceModule ModuleTag_01
	                Draw = W3DScriptedModelDraw ModuleTag_010
                        DefaultModelConditionState
                        Model = GPStoneGuard1
			ParticleSysBone NONE OneRing
			;ParticleSysBone NONE OneRingAura
			Shadow			= SHADOW_ADDITIVE_DECAL
			ShadowSizeX		= 200
			ShadowSizeY		= 200
			ShadowTexture	= MUCatapultFP02
			ShadowMaxHeight   = 200
			ShadowOverrideLODVisibility = yes
		End
		IdleAnimationState
			Animation
				AnimationName = THERING.THERING
				AnimationMode = LOOP
			End
		End
	End
End

EditorSorting		= MISC_MAN_MADE
	Side 				= Civilian
	KindOf				= SELECTABLE IMMOBILE NOT_AUTOACQUIRABLE UNATTACKABLE REVEAL_TO_ALL	CRATE ONE_RING		; Only Salvage crates are marked Selectable so the Mouse can interact with them and give Salvage voices.  Being dead makes them not actually selectable
	ThreatLevel			= 0.0
	ShroudClearingRange	= 100
AddModule
	Body = HighlanderBody ModuleTag_Body ;Can take damage, but won't die.  Can only die from ::kill() or other unresistable damage
		MaxHealth      = 1.0
	End
End



AddModule
	Behavior = AttachUpdate ModuleTag_Attach
		ObjectFilter			= ANY +INFANTRY +CAVALRY +HERO +MONSTER +MACHINE -WORKING_PASSENGER -NO_COLLIDE -INERT -IGNORED_IN_GUI -PROJECTILE -NEUTRALGOLLUM -NOT_AUTOACQUIRABLE -WildSpiderling_Slaved -IsengardExplosiveMine -Wyrm -WargSentry NOT_FLYING_UNITS
		ScanRange				= 10
		ParentStatus			= HOLDING_THE_RING
		AlwaysTeleport			= No
		AnchorToTopOfGeometry	= Yes
		
		// Eva events to play when the Ring is picked up by the local player / an ally / an enemy
		ParentOwnerAttachmentEvaEvent = RingPickedUpLocal
		;ParentAllyAttachmentEvaEvent =   Nothing for now! (Are we sure???)
		ParentEnemyAttachmentEvaEvent = RingPickedUpEnemy
		
		ParentOwnerDiedEvaEvent = LocalPlayerLosesRing ; E.g. the unit carrying the ring died, so we lost it.
		;ParentAllyDiedEvaEvent =  Nothing (for now)
		;ParentEnemyDiedEvaEvent = Nothing (for now)
		
	End
End
AddModule
	Behavior = DestroyDie ModuleTag_Die
	End
End
	
AddModule
	Behavior = CreateObjectDie ModuleTag_DropTheRing
		CreationList = OCL_Statue
	End
End
	
  Geometry              = BOX
  GeometryMajorRadius   = 4.8
  GeometryMinorRadius   = 5.6
  GeometryHeight        = 16.8
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
End

FXParticleSystem Pointer1
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXEmbersLight.tga
    Lifetime = 50 50
    SortLevel = 1
    Size = 60 70
    BurstCount = 1 1
  End
  Color = DefaultColor
    Color2 = R:0 G:0 B:255 25
    Color3 = R:0 G:0 B:255 50
  End
  Alpha = DefaultAlpha
  End
  Update = DefaultUpdate
    SizeRateDamping = 1 1
    AngleZ = 0 7
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
  End
  EmissionVelocity = OrthoEmissionVelocity
    Z = -0.75 -0.25
  End
  EmissionVolume = LineEmissionVolume
    StartPoint = X:0 Y:0 Z:75
    EndPoint = X:0 Y:0 Z:250
  End
  Draw = DefaultDraw
  End
End

Object GondorForge
KindOf = NO_COLLIDE IMMOBILE UNATTACKABLE INERT
End
Object ElvenForge
KindOf = NO_COLLIDE IMMOBILE UNATTACKABLE INERT
End
Object DwarvenForgeWorks
KindOf = NO_COLLIDE IMMOBILE UNATTACKABLE INERT
End
Object IsengardArmory
KindOf = NO_COLLIDE IMMOBILE UNATTACKABLE INERT
End
Object MordorSiegeWorks
KindOf = NO_COLLIDE IMMOBILE UNATTACKABLE INERT
End
Object AngmarForgeWorks
KindOf = NO_COLLIDE IMMOBILE UNATTACKABLE INERT
End
Object AngmarBarracks
KindOf = NO_COLLIDE IMMOBILE UNATTACKABLE INERT
End
Object WildTreasureTrove
KindOf = NO_COLLIDE IMMOBILE UNATTACKABLE INERT
End

Object WOR_RivElHouse
RemoveModule AutoDepositModuleTag
RemoveModule ModuleTag_NewMoneyDeadSpot
End

Object WOR_EreborThrone
RemoveModule AutoDepositModuleTag
RemoveModule ModuleTag_NewMoneyDeadSpot
End

Object WOR_GondorCastleBaseKeep
RemoveModule AutoDepositModuleTag
RemoveModule ModuleTag_NewMoneyDeadSpot
End

Object InGameMarker2 
ReplaceModule ModuleTag_01
Draw = W3DScriptedModelDraw ModuleTag_011
    	DefaultModelConditionState
	      	Model = EXMarker
	      	ParticleSysBone NONE Pointer1
	      	Shadow = SHADOW_ADDITIVE_DECAL_DYNAMIC
	      	ShadowSizeX = 135;
	    	ShadowSizeY = 135;
		    ShadowTexture = EXSpotLight;
			ShadowOpacityStart = 0
			ShadowOpacityFadeInTime = 1000
			ShadowOpacityPeak = 255
			ShadowOpacityFadeOutTime = 1000
			ShadowOpacityEnd = 0
			ShadowOverrideLODVisibility = yes
    	End
  	End
End
End

Weapon WarriorSword
  LeechRangeWeapon		= Yes
  AttackRange           = 25.0
  MeleeWeapon           = Yes
  RadiusDamageAffects			= ENEMIES
  PreAttackType         = PER_SHOT ; Do the delay each time we attack a new target
  PreAttackDelay		= ISENGARD_WARGRIDER_PREATTACKDELAY
  DelayBetweenShots     = ISENGARD_WARGRIDER_DELAYBETWEENSHOTS            ; time between shots, msec
  FiringDuration		= ISENGARD_WARGRIDER_FIRINGDURATION
  
  FireFX                = FX_GondorSwordHit
  ;AimDirection			= 270		; In order to aim at something, we aim this far off (to the right would be aiming at -90 degrees)
  
  DamageNugget                        ; A basic Nugget that just does damage
    Damage        = 150
    Radius        = 30.0
    DelayTime     = 0
    DamageType    = HERO
    DamageFXType  = SWORD_SLASH
    DeathType     = NORMAL
  End  
DamageNugget                        ; A basic Nugget that just does damage
		Damage        = 150
		DamageArc 		= 30
		Radius			= 10.0
		DamageType    = HERO
		DeathType     = NORMAL
		DamageSpeed		= 500.0 ; must match the ShockWaveSpeed below
	End
	MetaImpactNugget                    ; A Nugget that throws things back with force
		HeroResist			= 2.00
		ShockWaveAmount   = 15.0
		ShockWaveArc	  = 15
		ShockWaveRadius   = 15.0
		ShockWaveTaperOff = 1.25
		ShockWaveZMult    = 0.7
		ShockWaveSpeed	  = 500.0
	End
End

;------------------------------------------------------------------------------
Weapon SarumanFireball ;BALANCE Saruman
  LeechRangeWeapon			= Yes
  AttackRange               = SARUMAN_FIREBALL_RANGE		; set this in his special power
  WeaponSpeed               = 150         ; dist/sec 
  MinWeaponSpeed            = 100
  MaxWeaponSpeed            = 200      ; dist/sec Upper limit on scaling, when attacking past nominal "max" range
  ScaleWeaponSpeed          = Yes      ; Used for lob weapons, scales speed proportional to range
  HitPercentage             = 100      ;When this weapon is used it will hit exactly 100% of the time.
  ScatterRadius             = 0.0     ;When this weapon misses it can randomly miss by as much as this distance.
  DelayBetweenShots         = 5000     ; time between shots, msec
  PreAttackDelay            = 1     ; 1467 is the prep time for archer.
  PreAttackRandomAmount     = 0      ; amount of additional preattack variance for archer type attacks only  
  PreAttackType             = PER_SHOT ; Do the delay each time we attack a new target
  FiringDuration            = 1     ; Duration of the archer firing shot is 500ms.
  IsAimingWeapon            = Yes
  AcceptableAimDelta		= 15
  AntiAirborneVehicle       = Yes
  AntiAirborneMonster		= Yes
  FireFX					= FX_SarumanFireball
  DamageType				= FLAME
  
  ProjectileNugget          ; Default arrow
    ProjectileTemplateName  = SarumanFireballProjectile
    WarheadTemplateName     = SarumanFireballWarhead
  End
End

;----------------------------
Weapon SarumanFireballWarhead
  ProjectileCollidesWith = ENEMIES NEUTRAL STRUCTURES WALLS
  RadiusDamageAffects = ENEMIES NEUTRALS NOT_SIMILAR MINES ; ALLIES
	
	FireLogicNugget ;@@@ fire logic testing
		LogicType	=	INCREASE_BURN_RATE
		Radius		=	300
		Damage		=	10
	End	

	DamageNugget                        ; A basic Nugget that just does damage
         Damage        = SARUMAN_FIREBALL_DAMAGE
         Radius        = 300
         DelayTime     = 0
         DamageType    = FLAME
         DamageFXType  = BIG_ROCK
         DeathType     = BURNED
         DamageScalar  =  150% NONE +MordorFellBeast +MordorWitchKingOnFellBeast +GondorGwaihir
         DamageScalar  = 5000% NONE +MINE ; Make sure we one shot kill mines, without risking wasting some poor hero with a torch
	End

	DamageNugget                        ; to make the fireball more mighty against enemy heroes
	    Damage        = 50	
	    Radius        = 300
	    DelayTime     = 0
	    DamageType    = MAGIC
	    DamageFXType  = BIG_ROCK
	    DeathType     = BURNED
    	    DamageScalar  = 500% NONE +HERO -MordorFellBeast -MordorWitchKingOnFellBeast -GondorGwaihir
	End

	DamageNugget                        ; A basic Nugget that just does damage
	    Damage        = SARUMAN_FIREBALL_DAMAGE_SIEGE	
	    Radius        = 300
	    DelayTime     = 0
	    DamageType    = MAGIC
	    DamageFXType  = BIG_ROCK
	    DeathType     = EXPLODED
    	    DamageScalar  = 300% NONE +MordorFellBeast +MordorWitchKingOnFellBeast +GondorGwaihir
	End
	
	

	MetaImpactNugget                         ; A Nugget that throws things back with force
;		HeroResist        =  0.99
		ShockWaveAmount   = 150.00
		ShockWaveRadius   = 100
		ShockWaveTaperOff =  0.75
		ShockWaveZMult    =  1.20
	End
End

;------------------------------------------------------------------------------
Weapon FireBallImpact
	RadiusDamageAffects = ENEMIES NEUTRALS NOT_SIMILAR ALLIES
	DamageNugget                        ; A basic Nugget that just does damage to trigger deployed mines
		Damage        = 1
		Radius        = 20
		DamageType    = FLAME
		DamageFXType  = FLAME
		DeathType     = BURNED
		DamageScalar  = 50000% NONE +MINE ; Make sure we one shot kill mines, without risking wasting some poor hero with a torch
	End
End

Weapon ArcherSword
  LeechRangeWeapon		= Yes
  AttackRange           = 25.0
  MeleeWeapon           = Yes
  RadiusDamageAffects			= ENEMIES
  PreAttackType         = PER_SHOT ; Do the delay each time we attack a new target
  PreAttackDelay		= ISENGARD_WARGRIDER_PREATTACKDELAY
  DelayBetweenShots     = ISENGARD_WARGRIDER_DELAYBETWEENSHOTS            ; time between shots, msec
  FiringDuration		= ISENGARD_WARGRIDER_FIRINGDURATION
  
  FireFX                = FX_GondorSwordHit
  ;AimDirection			= 270		; In order to aim at something, we aim this far off (to the right would be aiming at -90 degrees)
  
  DamageNugget                        ; A basic Nugget that just does damage
    Damage        = 100
    Radius        = 20.0
    DelayTime     = 0
    DamageType    = HERO
    DamageFXType  = SWORD_SLASH
    DeathType     = NORMAL
  End  
DamageNugget                        ; A basic Nugget that just does damage
		Damage        = 100
		DamageArc 		= 10
		Radius			= 20.0
		DamageType    = HERO
		DeathType     = NORMAL
		DamageSpeed		= 500.0 ; must match the ShockWaveSpeed below
	End
	MetaImpactNugget                    ; A Nugget that throws things back with force
		HeroResist			= 2.00
		ShockWaveAmount   = 10.0
		ShockWaveArc	  = 10
		ShockWaveRadius   = 10.0
		ShockWaveTaperOff = 1.25
		ShockWaveZMult    = 0.7
		ShockWaveSpeed	  = 500.0
	End
End
CommandButton Command_CreateAHero_SpecialAbilityBladeMaster
Command                 = SPECIAL_POWER 
  SpecialPower            = SpecialAbilityCreateAHeroBladeMaster
  TextLabel               = CONTROLBAR:SuperBladeMaster
  ButtonImage             = HSAragornBladeMaster
  ButtonBorderType        = ACTION 
  DescriptLabel           = CONTROLBAR:ToolTipSuperBladeMaster
  InPalantir			  = Yes
  AutoAbility			  = Yes
  AutoDelay				  = 30.0 ; this should sync with the Aragorn's hero mode effect time
  PresetRange			  = 50.0
  ;UnitSpecificSound       = AragornVoiceBladeMaster
End


ExperienceLevel	TheodenLevel1
	TargetNames			 = RohanTheoden	RohanTheodenCavalry
	RequiredExperience	 = 1   
	ExperienceAward		 = THEODEN_LVL1_EXP_AWARD 
	Rank				 = 1
	Upgrades			 = Upgrade_CreateAHeroToggleMounted
	SelectionDecal
		Texture			 = decal_hero_good
		Style			 = SHADOW_ALPHA_DECAL
		OpacityMin		 = 50% 
		OpacityMax		 = 100%
		MinRadius		 = 40 ;16
		MaxRadius		 = 200 ;16
		MaxSelectedUnits = 40 ;1
	End	
End	

ExperienceLevel	TheodenLevel10
	TargetNames						=	RohanTheoden RohanTheodenCavalry
	RequiredExperience					=	THEODEN_LVL10_EXP_NEEDED
	ExperienceAward						=	THEODEN_LVL10_EXP_AWARD
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	Rank							=	10
        Upgrades                                                =       Upgrade_CreateAHeroInvulnerability_Level3 
	AttributeModifiers					=	HeroLevelUpDamage9
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40 ;16
		MaxRadius					=	200 ;16
		MaxSelectedUnits				=	40 ;1
	End
End

CommandSet NewRohanTheodenCommandSet
	1	= Command_ToggleStance
	2	= Command_CreateAHero_ShieldCrush_Level3
	3	= Command_CreateAHero_SpecialAbilityHealing_Level2
	4	= Command_CreateAHero_SpecialAbilityBladeMaster
	5	= Command_CreateAHeroThrowSpear_Level3
        6       = Command_CreateAHero_Invulnerability_Level3
	12 	= Command_LurtzPillage
	13	= Command_AttackMove
	14	= Command_Stop
	16  	= Command_SetStanceBattle
	17  	= Command_SetStanceAggressive
	18  	= Command_SetStanceHoldGround
End

Weapon WarriorCrush  ; Used when the Warrior crush an enemy.
  LeechRangeWeapon      = Yes
  AttackRange           = 9999999.0
  MeleeWeapon           = No
  DelayBetweenShots     = 0            ; time between shots, msec
  PreAttackDelay        = 0 ;PreAttackDelay+FiringDuration = UseWeaponTiming = Yes duration
  PreAttackType         = PER_SHOT 
  FiringDuration        = 0 ;
  FireFX				= FX_GenericCrushImpactSound

  DamageNugget                        ; A basic Nugget that just does damage
    Damage        = 150 
    Radius        = 1.0
    DelayTime     = 0
    DamageType    = CRUSH
    DeathType     = CRUSHED
  End
DamageNugget                        ; A basic Nugget that just does damage
		Damage        = 140
		DamageArc 		= 50
		Radius			= 1.0
		DamageType    = CRUSH
		DeathType     = CRUSHED
		DamageSpeed		= 500.0 ; must match the ShockWaveSpeed below
	End
	MetaImpactNugget                    ; A Nugget that throws things back with force
		HeroResist			= 2.00
		ShockWaveAmount   = 50.0
		ShockWaveArc	  = 50
		ShockWaveRadius   = 50.0
		ShockWaveTaperOff = 1.25
		ShockWaveZMult    = 0.7
		ShockWaveSpeed	  = 500.0
	End
End

Object RohanTheoden
ButtonImage = HICAHCaptainGondor
	SelectPortrait         = CPCaptainofGondor
DisplayName = TheGreatWarrior
	AddModule
	Behavior = GrantUpgradeCreate ModuleTag_1
		UpgradeToGrant = Upgrade_GandalfWhite  ;
	End 
	End

	AddModule
	Behavior = SubObjectsUpgrade CorruptedWeapon_Upgrade270
	TriggeredBy			   = Upgrade_GandalfWhite
	HideSubObjects		   = WestronSword 
	HideSubObjects		   = AXE_01
	HideSubObjects		   = SWRD_05
	HideSubObjects		   = HMR_02


	HideSubObjects		   = Shld_01
	HideSubObjects		   = Shld_02
	HideSubObjects		   = Shld_03
	HideSubObjects		   = Shld_04

	HideSubObjects		   = HLMT_01
	HideSubObjects		   = HLMT_02
	HideSubObjects		   = HLMT_03

	HideSubObjects		   = GNLT_01
	HideSubObjects		   = GNLT_02
	HideSubObjects		   = GNLT_03
	HideSubObjects		   = GNLT_04

	HideSubObjects		   = CHEST_01
	;HideSubObjects		   = CHEST_02
	HideSubObjects		   = CHEST_03

	FadeTimeInSeconds      = 0.0
	RecolorHouse		   = No

	End
	End

ReplaceModule ModuleTag_DRAW
	Draw = W3DScriptedModelDraw ModuleTag_DRAW1

DefaultModelConditionState
	Model				 = CHHW_CG_U_SKN
	Skeleton			 = CHHW_CG_U_SKL
	ModelAnimationPrefix = CHHW_CG
	WeaponLaunchBone	 = PRIMARY SPEAR
End

		ModelConditionState = WEAPONSET_HERO_MODE
			ParticleSysBone = None SuperBladeMaster1 FollowBone:Yes
			ParticleSysBone = None SuperBladeMaster2 FollowBone:Yes
			ParticleSysBone = None SuperBladeMaster3 FollowBone:Yes
		End

//================== ANIMATIONS =================================================================

//----------- Special Create A Hero Creation Screen Animations ---------------
AnimationState = CREATE_A_HERO_IN_CREATION_SCREEN CREATE_A_HERO_EXAMINE_SELF CREATE_A_HERO_SELECTED_CHEER 
	StateName			   = STATE_ExamineSelf
	Animation			   = ExamineSelf
		AnimationName	   = #(MODEL)_C_CLRA
		AnimationMode	   = ONCE
		AnimationBlendTime = 20
	End
End

AnimationState = CREATE_A_HERO_IN_CREATION_SCREEN CREATE_A_HERO_EXAMINE_WEAPON_RIGHT CREATE_A_HERO_SELECTED_CHEER 
	StateName			   = STATE_ExamineWeapon
	Animation			   = WeaponSwap
		AnimationName	   = #(MODEL)_C_WPNA
		AnimationMode	   = ONCE
		AnimationBlendTime = 20
	End
End

AnimationState = CREATE_A_HERO_IN_CREATION_SCREEN USER_75
 	StateName			   = STATE_SwapModels
 	Animation			   = WeaponSwap
 		AnimationName	   = #(MODEL)_C_ATNB #(MODEL)_C_ATND
 		AnimationMode	   = MANUAL
 		AnimationBlendTime = 0
 	End
End
                





//-----------------------------------------------------------------------------
AnimationState = CREATE_A_HERO_IN_CREATION_SCREEN CREATE_A_HERO_SELECTED_CHEER
	StateName = STATE_SelectedCheer
	Animation = Foot_ATNB // Bored Idle
		AnimationName	   = #(MODEL)_C_ATNB #(MODEL)_C_ATND
		AnimationMode	   = ONCE
		AnimationPriority  = 90
		AnimationBlendTime = 20
	End
	Animation = Foot_ATND // Bored Fidget
		AnimationName	   = #(MODEL)_C_ATND #(MODEL)_C_ATNB
		AnimationMode	   = ONCE
		AnimationPriority  = 10
		AnimationBlendTime = 20
	End
	Animation = Foot_ATNE // Bored Fidget
		AnimationName	   = #(MODEL)_C_ATNE #(MODEL)_C_ATND #(MODEL)_C_ATNB
		AnimationMode	   = ONCE
		AnimationPriority  = 3
		AnimationBlendTime = 20
	End
	Flags =	RESTART_ANIM_WHEN_COMPLETE
	BeginScript //script to set transition from moving
		Prev = CurDrawablePrevAnimationState()
		if Prev == "STATE_Unselected" then 
			CurDrawableSetTransitionAnimState("Trans_SelectedCheer") 
		end
//  		if Prev == "STATE_SwapModels" then 
//  			CurDrawableSetTransitionAnimState("Trans_SwapModels") 
//  		end
	EndScript
End

AnimationState = CREATE_A_HERO_IN_CREATION_SCREEN
	StateName = STATE_Unselected
	Animation = Foot_ATNB // Bored Idle
		AnimationName       = #(MODEL)_C_ATNB #(MODEL)_C_ATND
		AnimationMode       = ONCE
		AnimationPriority   = 90
		AnimationBlendTime = 10
	End
	Animation = Foot_ATND // Bored Fidget
		AnimationName       = #(MODEL)_C_ATND #(MODEL)_C_ATNB
		AnimationMode       = ONCE
		AnimationPriority   = 10
		AnimationBlendTime = 10
	End
	Animation = Foot_ATNE // Bored Fidget
		AnimationName       = #(MODEL)_C_ATNE #(MODEL)_C_ATND #(MODEL)_C_ATNB
		AnimationMode       = ONCE
		AnimationPriority   = 3
		AnimationBlendTime = 10
	End
	Flags =	RESTART_ANIM_WHEN_COMPLETE
 	BeginScript //script to set transition from moving
 		Prev = CurDrawablePrevAnimationState()
 		if Prev == "STATE_SwapModels" then 
 			CurDrawableSetTransitionAnimState("Trans_SwapModels") 
 		end
 	EndScript
End

TransitionState = Trans_ExamineWeapon
	Animation = Transition
		AnimationName = #(MODEL)_C_WPNA
		AnimationMode = ONCE
		AnimationBlendTime = 20
	End
End
TransitionState = Trans_ExamineSelf
	Animation = Transition
		AnimationName = #(MODEL)_C_CLRA
		AnimationMode = ONCE
		AnimationBlendTime = 20
	End
End
TransitionState = Trans_SelectedCheer
	Animation = Transition
		AnimationName = #(MODEL)_C_SLCA
		AnimationMode = ONCE
		AnimationBlendTime = 20
	End
End

TransitionState = Trans_SwapModels
	StateName = STATE_Unselected
	Animation = Transition
		AnimationName = #(MODEL)_C_ATNB #(MODEL)_C_ATND
		AnimationMode = ONCE
		AnimationBlendTime = 0
	End
End



//----------- Climbing/rappelling ---------------
AnimationState						= CLIMBING WEAPONSET_TOGGLE_1
	StateName						= STATE_Climbing
	Animation						= Climbing
		AnimationName				= #(MODEL)_U_WALB
		AnimationMode				= LOOP
		AnimationBlendTime			= 10
	End
	BeginScript//script to set transition from moving
		Prev = CurDrawablePrevAnimationState()
		if Prev == "STATE_Running"  then CurDrawableSetTransitionAnimState("Trans_RunningToClimbing_WeaponToggle") return end
	EndScript
End
TransitionState = Trans_RunningToClimbing_WeaponToggle
	Animation = Transition
		AnimationName = #(MODEL)_B_WALA
		AnimationMode = ONCE
	End
End

AnimationState						= CLIMBING
	StateName						= STATE_Climbing
	Animation						= Climbing
		AnimationName				= #(MODEL)_U_WALB
		AnimationMode				= LOOP
		AnimationBlendTime			= 10
	End
	BeginScript//script to set transition from moving
		Prev = CurDrawablePrevAnimationState()
		if Prev == "STATE_Running"  then CurDrawableSetTransitionAnimState("Trans_RunningToClimbing") return end
	EndScript
End
TransitionState = Trans_RunningToClimbing
	Animation = Transition
		AnimationName = #(MODEL)_U_WALA
		AnimationMode = ONCE
	End
End

AnimationState						= RAPPELLING WEAPONSET_TOGGLE_1
	StateName						= STATE_Rappelling
	Animation						= Rapelling
		AnimationName				= #(MODEL)_U_WALD
		AnimationMode				= LOOP
		AnimationBlendTime			= 10
	End
	BeginScript//script to set transition from moving
		Prev = CurDrawablePrevAnimationState()
		if Prev == "STATE_Climbing"  then CurDrawableSetTransitionAnimState("Trans_ClimbingToRappelling") return end
	EndScript
End
AnimationState						= RAPPELLING
	StateName						= STATE_Rappelling
	Animation						= Rapelling
		AnimationName				= #(MODEL)_U_WALD
		AnimationMode				= LOOP
		AnimationBlendTime			= 10
	End
	BeginScript//script to set transition from moving
		Prev = CurDrawablePrevAnimationState()
		if Prev == "STATE_Climbing"  then CurDrawableSetTransitionAnimState("Trans_ClimbingToRappelling") return end
	EndScript
End
TransitionState = Trans_ClimbingToRappelling
	Animation = Transition
		AnimationName = #(MODEL)_U_WALC
		AnimationMode = ONCE
	End
End
TransitionState = Trans_RappellingToRunning_WeaponToggle
	Animation = Transition
		AnimationName = MUGblnSwrd_B_WALE
		AnimationMode = ONCE
	End
End
TransitionState = Trans_RappellingToRunning
	Animation = Transition
		AnimationName = MUGblnSwrd_U_WALE
		AnimationMode = ONCE
	End
End
	



// --------- MOUNTED  ------------

// --- Dying Anims
AnimationState					=	DYING AFLAME MOUNTED
	Animation					=	Fire
		AnimationName			=	#(MODEL)_M_MFDA 
		AnimationSpeedFactorRange = 0.9 1.1
	End
	BeginScript
		CurDrawableHideSubObject("arrow") //Circumvents blend issues when the arrow is being shown...
	EndScript
End

AnimationState				=	DYING SPLATTED MOUNTED
	Animation
		AnimationName		=	#(MODEL)_M_LNDA
		AnimationMode		=	ONCE
	End
End
AnimationState        = DYING MOUNTED
	StateName           = STATE_Sword
	Animation
		AnimationName     = #(MODEL)_M_DIEA
		AnimationMode     = ONCE
	End
End

AnimationState				=	STUNNED_STANDING_UP MOUNTED
	Animation
		AnimationName		=	#(MODEL)_M_GTPA
		AnimationMode		=	ONCE
		AnimationSpeedFactorRange = 1.5 1.5
	End
End

AnimationState				=	STUNNED MOUNTED
	Animation
		AnimationName		=	#(MODEL)_M_LNDA
		AnimationMode		=	ONCE
	End
End

AnimationState				=	FREEFALL MOUNTED
	Animation
		AnimationName		=	#(MODEL)_M_FLYA
		AnimationMode		=	LOOP
	End
	Flags					=	RANDOMSTART
End

AnimationState				=	STUNNED_FLAILING MOUNTED
	Animation
		AnimationName		=	#(MODEL)_M_FLYA
		AnimationMode		=	LOOP
	End
	Flags					=	RANDOMSTART
End

AnimationState        = PASSENGER MOUNTED
	Animation
		AnimationName       = #(MODEL)_M_GBDA
		AnimationMode       = LOOP
	End
	Flags               = RANDOMSTART
End

AnimationState        = MOUNTED LEVELED	// This state clears itself in 3 of your Earth seconds
	Animation
		AnimationName           = #(MODEL)_M_LVLA
		AnimationMode       = ONCE
	End
End

AnimationState        = MOUNTED RAISING_FLAG	// This state clears itself in 3 of your Earth seconds
	Animation
		AnimationName           = #(MODEL)_M_CHRA
		AnimationMode		=	ONCE
	End
	Flags					=	RESTART_ANIM_WHEN_COMPLETE
End

// --- Attacking Anims		
AnimationState				= FIRING_OR_PREATTACK_A MOUNTED	// Melee attack.
	Animation
		AnimationName		= #(MODEL)_M_ATKA #(MODEL)_M_ATKB
		AnimationMode		= ONCE
		UseWeaponTiming		= Yes
	End
End

// --- Moving Anims
AnimationState				=	MOUNTED TURN_LEFT_HIGH_SPEED
	Animation
		AnimationName		=	#(MODEL)_M_TNL1
		AnimationMode		=	LOOP
		AnimationSpeedFactorRange= 1.8 1.8
		AnimationBlendTime	=	20
	End
End

AnimationState				=	MOUNTED TURN_RIGHT_HIGH_SPEED
	Animation
		AnimationName		=	#(MODEL)_M_TNR1
		AnimationMode		=	LOOP
		AnimationSpeedFactorRange= 1.8 1.8
		AnimationBlendTime	=	20
	End
End

AnimationState				=	MOVING TURN_LEFT MOUNTED
	Animation
		AnimationName		=	#(MODEL)_M_TRNL
		AnimationMode		=	LOOP
	End
//			//ParticleSysBone			=	None CalvaryDustTrails
End

AnimationState				=	MOVING TURN_RIGHT MOUNTED
	Animation
		AnimationName		=	#(MODEL)_M_TRNR
		AnimationMode		=	LOOP
	End
//			//ParticleSysBone			=	None CalvaryDustTrails
End

AnimationState				=	MOVING ACCELERATE MOUNTED
	Animation
		AnimationName		=	#(MODEL)_M_ACCL
		AnimationMode		=	LOOP
	End
	//ParticleSysBone			=	None CalvaryDustTrails
End

AnimationState				=	MOVING DECELERATE MOUNTED
	Animation
		AnimationName		=	#(MODEL)_M_DECL
		AnimationMode		=	ONCE
	End
	//ParticleSysBone			=	None CalvaryDustTrails
End

AnimationState				=	MOVING WALKING MOUNTED
	Animation
		AnimationName		=	#(MODEL)_M_WLKA
		AnimationMode		=	LOOP
	End
	Flags					=	RANDOMSTART
	//ParticleSysBone			=	None InfantryDustTrails  
End

AnimationState				=	MOVING BACKING_UP MOUNTED
	Animation
		AnimationName		=	#(MODEL)_M_BAKA
		AnimationMode		=	LOOP
	End
	Flags					=	RANDOMSTART
	//ParticleSysBone			=	None InfantryDustTrails  
End

AnimationState        = MOUNTED MOVING FIRING_OR_PREATTACK_A
	ShareAnimation		= Yes
	Animation
		AnimationName       = #(MODEL)_M_ATRA
		AnimationMode       = LOOP
	End
	Flags               = RANDOMSTART  
End

AnimationState				=	MOVING MOUNTED
	Animation
		AnimationName		=	#(MODEL)_M_RUNA
		AnimationMode		=	LOOP
	End
 	Flags					=	RANDOMSTART
	//ParticleSysBone			=	None CalvaryDustTrails  
End

// --- Selected Anims
AnimationState				=	SELECTED MOUNTED
	SimilarRestart			=   Yes			
	StateName				=	AtAttentionIdleMounted
	Animation				=	ATNB
		AnimationName		=	#(MODEL)_M_ATNB
		AnimationMode		=	LOOP
	End
	BeginScript
		Prev = CurDrawablePrevAnimationState()
		if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Select") end
		if Prev == "AtAttentionIdleMounted" then CurDrawableSetTransitionAnimState("TRANS_Select") end
	EndScript
End

TransitionState				=	TRANS_Select
	Animation
		AnimationName		=	#(MODEL)_M_ATNA
		AnimationMode		=	ONCE
	End
End

// --- Idle Anims
AnimationState				= MOUNTED
	Animation
		AnimationName		=	#(MODEL)_M_IDLA
		AnimationPriority	=	20
		AnimationMode		=	ONCE
		AnimationBlendTime	=	15
	End
	Flags				=	RESTART_ANIM_WHEN_COMPLETE
End

// --------- UNMOUNTED  ------------

//------------------  DYING -------------------------------------------------------------

// --- Flying through the air.
AnimationState        = STUNNED_FLAILING WEAPONSET_TOGGLE_1
	StateName           = STATE_Bow
	Animation
		AnimationName     = #(MODEL)_B_FLYA
		AnimationMode     = LOOP
	End
	Flags               = RANDOMSTART
End

AnimationState        = STUNNED_FLAILING 
	StateName           = STATE_Sword
	Animation
		AnimationName     = #(MODEL)_U_FLYA
		AnimationMode     = LOOP
	End
	Flags               = RANDOMSTART
End

// --- Dying anims
AnimationState        = DYING SPLATTED WEAPONSET_TOGGLE_1
	StateName           = STATE_Bow
	Animation
		AnimationName     = #(MODEL)_B_LNDA
		AnimationMode     = ONCE
	End
End

AnimationState        = DYING SPLATTED
	StateName           = STATE_Sword
	Animation
		AnimationName     = #(MODEL)_U_LNDA
		AnimationMode     = ONCE
	End
End

AnimationState        = DYING WEAPONSET_TOGGLE_1	//WEAPONSTATE_CLOSE_RANGE
	StateName           = STATE_Bow
	Animation
		AnimationName     = #(MODEL)_B_DIEA
		AnimationMode     = ONCE
	End
End

AnimationState        = DYING
	StateName           = STATE_Sword
	Animation
		AnimationName     = #(MODEL)_U_DIEA
		AnimationMode     = ONCE
	End
	Animation           = GUHero_DIEB
		AnimationName     = #(MODEL)_U_DIEB
		AnimationMode     = ONCE
	End
End


// --- Stunned anims


AnimationState        = STUNNED_STANDING_UP WEAPONSET_TOGGLE_1
	StateName           = STATE_Bow
	Animation
		AnimationName     = #(MODEL)_B_GTPA
		AnimationMode     = ONCE
		AnimationSpeedFactorRange = 1.5 1.5
	End
End

AnimationState        = STUNNED_STANDING_UP
	StateName           = STATE_Sword
	Animation
		AnimationName     = #(MODEL)_U_GTPA
		AnimationMode     = ONCE
		AnimationSpeedFactorRange = 1.5 1.5
	End
End

AnimationState        = STUNNED WEAPONSET_TOGGLE_1
	StateName           = STATE_Bow
	Animation
		AnimationName     = #(MODEL)_B_LNDA
		AnimationMode     = ONCE
	End
End

AnimationState        = STUNNED 
	StateName           = STATE_Sword
	Animation           = GUHero_LNDA
		AnimationName     = #(MODEL)_U_LNDA
		AnimationMode     = ONCE
	End
End				

//------------------ SPECIAL POWER ANIMS ---------------------


// RAIN OF ARROWS SPECIAL POWER //
AnimationState				= PACKING_TYPE_1  WEAPONSET_TOGGLE_1
	StateName				= rainofarrows
	Animation
		AnimationName		= #(MODEL)_B_ATKA2
		AnimationMode		= LOOP
	End
//			FXEvent	= Frame:6	Name: FX_SarumanDominateAtSelf
End

// DOMINATE SPECIAL POWER //
AnimationState				= PACKING_TYPE_1
	StateName				= Curse
	Animation
		AnimationName		= #(MODEL)_U_LVLA
		AnimationMode		= ONCE
	End
//			FXEvent	= Frame:6	Name: FX_SarumanDominateAtSelf
End

// TELEPORT SPECIAL POWER //
AnimationState				= PACKING_TYPE_3
	StateName				= Curse
	Animation
		AnimationName		= #(MODEL)_U_SPCA
		AnimationMode		= ONCE
	End
//			FXEvent	= Frame:6	Name: FX_SarumanDominateAtSelf
End

//--------------------- Wound Arrow anim
AnimationState        =  SPECIAL_WEAPON_TWO
	StateName = STATE_Bow
	Animation
		AnimationName       = #(MODEL)_U_SPCL #(MODEL)_U_ATKC
		AnimationMode       = ONCE
	End
	FrameForPristineBonePositions = 59
	BeginScript
		CurDrawableShowSubObject("arrow")
	EndScript
End
		
//------------------ ATTACKING --------------------------------------------------------------------
		// Attacking Anims [Weapon_A]
		
		
		
//		AnimationState        = MOVING WEAPONSET_TOGGLE_1 FIRING_OR_PREATTACK_A
//			Animation           = TrotAndFire
//				AnimationName       = #(MODEL)_U_ATRA
//				AnimationMode       = LOOP
//			End
//			Flags               = RANDOMSTART
//			StateName = RunAndSwing
//		End
//		
//		AnimationState        = FIRING_OR_PREATTACK_A WEAPONSET_TOGGLE_1
//			StateName           = STATE_Sword
//			
//			Animation           = ATKD
//				AnimationName     = #(MODEL)_U_ATKD
//				AnimationMode     = ONCE
//				UseWeaponTiming		= Yes
//				AnimationSpeedFactorRange = 1.149 1.149
//			End
//			
//			Animation           = ATKE
//				AnimationName    = #(MODEL)_U_ATKE
//				AnimationMode     = ONCE
//				UseWeaponTiming		= Yes
//				AnimationSpeedFactorRange = 1.149 1.149
//			End
//			
//			Animation           = ATKF
//				AnimationName    = #(MODEL)_U_ATKF
//				AnimationMode     = ONCE
//				AnimationSpeedFactorRange = 1.47 1.47
//			End
//			Flags				=	RESTART_ANIM_WHEN_COMPLETE
//			//	FrameForPristineBonePositions = 59
//			BeginScript
//				Prev = CurDrawablePrevAnimationState()
//				if Prev == "STATE_Bow" then CurDrawableSetTransitionAnimState("TRANS_BowToSword") end
//			EndScript
//		End

//------------------ MOVING -------------------------------------------------------------

		AnimationState        = MOVING USER_4                 // Moving slaughter
			StateName           = Slaughter
			Flags               = RANDOMSTART
			//ParticleSysBone     = None InfantryDustTrails
			Animation           = GUHero_ATKE
				AnimationName     = #(MODEL)_U_ATKE
				AnimationMode     = LOOP
			End
			StateName           = NoSword
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Sword" then CurDrawableSetTransitionAnimState("TRANS_SwordToBow") end
			EndScript
		End

		//--- Running with bow
		AnimationState			= MOVING WEAPONSET_TOGGLE_1		//WEAPONSTATE_CLOSE_RANGE
			StateName           = STATE_RunningBow
			Flags               = RANDOMSTART
			//ParticleSysBone    = None InfantryDustTrails
			Animation
				AnimationName   = #(MODEL)_B_RUNA
//				AnimationMode   = LOOP
				AnimationSpeedFactorRange = 0.85 0.85
//				Distance		= 28
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwordToBow") end
				if Prev == "STATE_RunningSword" then CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Running") end
				if Prev == "STATE_Rappelling"  then CurDrawableSetTransitionAnimState("Trans_RappellingToRunning_WeaponToggle") return end
			EndScript
		End

		//--- Running with sword
		AnimationState			= MOVING
			StateName           = STATE_RunningSword
			Flags               = RANDOMSTART
			//ParticleSysBone    = None InfantryDustTrails
			Animation
				AnimationName   = #(MODEL)_U_RUNA
//				AnimationMode   = LOOP
				AnimationSpeedFactorRange = 0.85 0.85
//				Distance = 28
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Bow" then CurDrawableSetTransitionAnimState("TRANS_BowToSword") end
				if Prev == "STATE_RunningBow" then CurDrawableSetTransitionAnimState("TRANS_BowToSword_Running") end
				if Prev == "STATE_Rappelling"  then CurDrawableSetTransitionAnimState("Trans_RappellingToRunning") return end
			EndScript
		End

		//---------------------------------------------------
		//New style firing with bow
		AnimationState					=	PREATTACK_A WEAPONSET_TOGGLE_1
			StateName					=	STATE_Firing
			Animation					=	ReadyToDrawn
				AnimationName			=	#(MODEL)_B_ATKA1
				AnimationMode			=	ONCE
//				UseWeaponTiming			=	Yes			// UseWeaponTiming plus random weapon field equals desync.  Leaving as warning
				//AnimationBlendTime		=	10
			End
		End

		AnimationState					=	FIRING_OR_RELOADING_A WEAPONSET_TOGGLE_1
			StateName					=	STATE_Firing
			Animation					=	LooseReloadDraw
				AnimationName			=	#(MODEL)_B_ATKA2
				AnimationMode			=	ONCE
//				UseWeaponTiming			=	Yes			// UseWeaponTiming plus random weapon field equals desync.  Leaving as warning
				AnimationSpeedFactorRange = 1.1 1.1		// Therefore, this is all you get.  A slight speed up so that the animation can always finish before any possible random value Design sets the range for
				//AnimationBlendTime		=	10
			End
		End
		//---------------------End New style firing

		//AnimationState					=	CONTINUOUS_FIRE_MEAN WEAPONSET_TOGGLE_1
		//	Animation					=	HangFrameWhileCoasting
		//		AnimationName			=	#(MODEL)_B_ATKA2
		//		AnimationMode			=	MANUAL
		//	End
		//End
		
		//AnimationState						= CONTINUOUS_FIRE_SLOW WEAPONSET_TOGGLE_1
		//	//StateName						= STATE_Idle_Bow
		//	Animation						= PutAwayArrow
		//		AnimationName				= #(MODEL)_U_ATKA3
		//		AnimationMode				= ONCE
		//	End
		//End
				
		//End New style firing
		//---------------------------------------------------

		AnimationState				= FIRING_OR_PREATTACK_A WEAPONSET_TOGGLE_1
			StateName				= STATE_Firing
			Animation
				AnimationName		= #(MODEL)_B_ATKA1
				AnimationMode		= ONCE
				UseWeaponTiming		= No			// UseWeaponTiming plus random weapon field equals desync.  Leaving as warning
			End
		End

		AnimationState				= FIRING_OR_PREATTACK_A // Melee attack.
			Animation
				AnimationName		= #(MODEL)_U_ATKA1 #(MODEL)_U_ATKA #(MODEL)_U_ATKB
				AnimationMode		= ONCE
				UseWeaponTiming		= Yes
			End
		End


		
//-------------------- HIT REACTIONS -----------------------------------------------------------

// this hit animation attack stance
		AnimationState = EMOTION_ALERT HIT_REACTION WEAPONSET_TOGGLE_1
			Animation
				AnimationName = #(MODEL)_B_HITA
				AnimationMode = ONCE
			End
		End

		AnimationState = HIT_REACTION WEAPONSET_TOGGLE_1
			Animation
				AnimationName = #(MODEL)_B_HITA
				AnimationMode = ONCE
			End
		End

		AnimationState = HIT_REACTION
			Animation = Sword_HITA
				AnimationName = #(MODEL)_U_HITA
				AnimationMode = ONCE
			End
			Animation = Sword_HITB
				AnimationName = #(MODEL)_U_HITB
				AnimationMode = ONCE
			End

			BeginScript
				PrevAnim = CurDrawablePrevAnimation()
				if PrevAnim == "Foot_IDLB"
				then
					return "Sword_HITB"
				else
					return "Swort_HITA"
				end
			EndScript
		End

//------------ SPECIAL POWERS ------------------------------------------------------------------		

		AnimationState		  =	THROWN_PROJECTILE
			Animation
				AnimationName =	#(MODEL)_U_LEP2
				AnimationMode =	LOOP
			End
		End

		AnimationState		  =	ABOUT_TO_HIT
			Animation
				AnimationName =	#(MODEL)_U_LEP3
				AnimationMode =	ONCE
			End
		End

		AnimationState				= SPECIAL_POWER_1							; Aragorn shouting Elendil anim
			StateName				= STATE_ready
			Animation
				AnimationName		= #(MODEL)_U_SPCA
				AnimationMode		= ONCE
			End
			ParticleSysBone			= B_SWORDBONE ElendilFlare FollowBone:yes
			ParticleSysBone			= B_SWORDBONE ElendilSwordFlare FollowBone:yes
;			FXEvent	= Name: FX_ElendilGlowEvent
		End

		// WORD OF POWER ANIMS ON FOOT //
		AnimationState		  =	SPECIAL_WEAPON_ONE
			StateName		  =	Attacking
			Animation
				AnimationName =	#(MODEL)_U_SPCA
				AnimationMode =	ONCE
			End
			//FXEvent			  =	Frame:5	Name:FX_GandalfPreAttackBlast
		End

		//	WIZARD BLAST ANIMS MOUNTED //
		AnimationState		  =	SPECIAL_WEAPON_TWO MOUNTED
			StateName		  =	Attacking
			Animation
				AnimationName =	#(MODEL)_U_SPLD #(MODEL)_U_ATKA
				AnimationMode =	ONCE
			End
		End
	
		//	WIZARD BLAST ANIMS ON FOOT //
		AnimationState		  =	SPECIAL_WEAPON_TWO
			StateName		  =	Attacking
			Animation
				AnimationName =	#(MODEL)_U_SPCB #(MODEL)_U_ATKA
				AnimationMode =	ONCE
			End
		End

		//	ISTARI LIGHT STAFF WEAPON MOUNTED //
		AnimationState		  =	SPECIAL_WEAPON_THREE MOUNTED	// FIRING_OR_PREATTACK_C
			StateName		  =	Attacking
			Animation		  =	StaffLaser
				AnimationName =	#(MODEL)_U_SPCD #(MODEL)_U_ATKA
				AnimationMode =	ONCE
			End
			FXEvent			  =	Frame:30 Name:FX_GandalfStaffFlare
		End

		//	ISTARI LIGHT STAFF WEAPON ON FOOT //
		AnimationState		  =	SPECIAL_WEAPON_THREE // FIRING_OR_PREATTACK_C
			StateName		  =	Attacking
			Animation		  =	StaffLaser
				AnimationName =	#(MODEL)_U_SPCE #(MODEL)_U_ATKA//	isitari's light?
				AnimationMode =	ONCE
			End
			FXEvent			  =	Frame:30 Name:FX_GandalfStaffFlare
		End
		
		; Throwing and cripple strike
		AnimationState		  =	SPECIAL_WEAPON_FOUR
			StateName		  =	Attacking
			Animation
				AnimationName =	#(MODEL)_U_SPCD
				AnimationMode =	ONCE
			End
			FrameForPristineBonePositions	= 44
		End

		AnimationState		  =	SPECIAL_WEAPON_FIVE
			StateName		  =	Attacking
			Animation
				AnimationName =	#(MODEL)_U_SPCE
				AnimationMode =	ONCE
			End
		End

		AnimationState		  =	SPECIAL_WEAPON_SIX
			StateName		  =	Attacking
			Animation
				AnimationName =	#(MODEL)_U_SPCF
				AnimationMode =	ONCE
			End
		End

		//	Special Power 1
		AnimationState		  =	PACKING_TYPE_1 UNPACKING
			StateName		  =	Attacking
			Animation		  =	LightningSwordStart
				AnimationName =	#(MODEL)_U_SPCC #(MODEL)_U_ATKA
				AnimationMode =	ONCE
			End
			FXEvent			  =	Frame:14 Name:FX_CreateAHeroLightningCharge
//			FXEvent			  =	Frame:70 Name:FX_GandalfLightningFizzle
			FXEvent			  =	Frame:14 Name:FX_GandalfLightningSword	FrameStop:70
		End
	
		AnimationState		  =	PACKING_TYPE_1 PREPARING
			StateName		  =	Attacking
			Animation		  =	LightningSwordLoop
				AnimationName =	#(MODEL)_U_SPCA #(MODEL)_U_ATKA
				AnimationMode =	LOOP
			End
		End

		AnimationState		  =	PACKING_TYPE_1 PACKING
			StateName		  =	Attacking
			Animation		  =	LightningSwordPutAway
				AnimationName =	#(MODEL)_U_SPCB #(MODEL)_U_ATKA
				AnimationMode =	ONCE
			End
		End

		// (specific) dwarf train allies.
		AnimationState		  =	PACKING_TYPE_2 CREATE_A_HERO_20 CREATE_A_HERO_21
			Animation
				AnimationName =	#(MODEL)_U_SPCC
				AnimationMode =	LOOP
			End
		End

		//	Special Power 2
		AnimationState		  =	PACKING_TYPE_2 UNPACKING
			StateName		  =	Attacking
			Animation		  =	LightningSwordStart
				AnimationName =	#(MODEL)_U_SPCC #(MODEL)_U_ATKA
				AnimationMode =	ONCE
			End
			FXEvent			  =	Frame:14 Name:FX_CreateAHeroLightningCharge
//			FXEvent			  =	Frame:70 Name:FX_GandalfLightningFizzle
			FXEvent			  =	Frame:14 Name:FX_GandalfLightningSword	FrameStop:70
		End
	
		AnimationState		  =	PACKING_TYPE_2 PREPARING
			StateName		  =	Attacking
			Animation		  =	LightningSwordLoop
				AnimationName =	#(MODEL)_U_SPCA #(MODEL)_U_ATKA
				AnimationMode =	LOOP
			End
		End

		AnimationState		  =	PACKING_TYPE_2 PACKING
			StateName		  =	Attacking
			Animation		  =	LightningSwordPutAway
				AnimationName =	#(MODEL)_U_SPCB #(MODEL)_U_ATKA
				AnimationMode =	ONCE
			End
		End
		
//----------- Captain of Gondor - Sword --------------------------------------------
		AnimationState        = PACKING_TYPE_2 WEAPONSET_TOGGLE_1
			StateName		  =	CaptainPower
			Animation           = GUHero_CHRC
				AnimationName     = #(MODEL)_U_CHRC
				AnimationMode     = ONCE
				AnimationSpeedFactorRange = 1.2 1.2
			End
		End

//----------- Captain of Gondor - Bow -----------------------------------------------
		AnimationState        = PACKING_TYPE_2
			StateName		  =	STATE_CaptainBow
			Animation           = GUHero_CHRD
				AnimationName     = #(MODEL)_U_SPCE #(MODEL)_U_SPCA #(MODEL)_U_CHRD
				AnimationMode     = ONCE
//				AnimationSpeedFactorRange = 0.75 0.75
			End
		End

		//	Special Power 3
		AnimationState		  =	PACKING_TYPE_3 UNPACKING
			StateName		  =	Attacking
			Animation		  =	LightningSwordStart
				AnimationName =	#(MODEL)_U_SPCC #(MODEL)_U_ATKA
				AnimationMode =	ONCE
			End
			FXEvent			  =	Frame:14 Name:FX_CreateAHeroLightningCharge
//			FXEvent			  =	Frame:70 Name:FX_GandalfLightningFizzle
			FXEvent			  =	Frame:14 Name:FX_GandalfLightningSword	FrameStop:70
		End
	
		AnimationState		  =	PACKING_TYPE_3 PREPARING
			StateName		  =	Attacking
			Animation		  =	LightningSwordLoop
				AnimationName =	#(MODEL)_U_SPCA #(MODEL)_U_ATKA
				AnimationMode =	LOOP
			End
		End

		AnimationState		  =	PACKING_TYPE_3 PACKING
			StateName		  =	Attacking
			Animation		  =	LightningSwordPutAway
				AnimationName =	#(MODEL)_U_SPCB #(MODEL)_U_ATKA
				AnimationMode =	ONCE
			End
		End
		
		//	Special Power 4
		AnimationState		  =	PACKING_TYPE_4 UNPACKING	  
			Animation		  
				AnimationName =	#(MODEL)_U_SPCA
				AnimationMode =	ONCE
			End
		End
	
		AnimationState		  =	PACKING_TYPE_4 PREPARING
			Animation		 
				AnimationName =	#(MODEL)_U_SPCA
				AnimationMode =	ONCE
			End
		End

		AnimationState		  =	PACKING_TYPE_4 PACKING
			Animation		  
				AnimationName =	#(MODEL)_U_SPCA
				AnimationMode =	ONCE
			End
		End
		
		//	Special Power 5
		
		//		AnimationState		  =	PACKING_TYPE_5 UNPACKING WEAPONSET_TOGGLE_1  
//			Animation		  
//				AnimationName =	#(MODEL)_B_SPCB
//				AnimationMode =	ONCE
//			End
//		End
//	
//		AnimationState		  =	PACKING_TYPE_5 PREPARING WEAPONSET_TOGGLE_1
//			Animation		 
//				AnimationName =	#(MODEL)_B_SPCB
//				AnimationMode =	ONCE
//			End
//		End

		AnimationState		  =	PACKING_TYPE_5 PACKING WEAPONSET_TOGGLE_1
			Animation		  
				AnimationName =	#(MODEL)_B_SPCB
				AnimationMode =	ONCE
				AnimationSpeedFactorRange = 0.7333 0.7333
			End
		End
		
//		AnimationState		  =	PACKING_TYPE_5 UNPACKING	  
//			Animation		  
//				AnimationName =	#(MODEL)_U_SPCB
//				AnimationMode =	ONCE
//			End
//		End
//	
//		AnimationState		  =	PACKING_TYPE_5 PREPARING
//			Animation		 
//				AnimationName =	#(MODEL)_U_SPCB
//				AnimationMode =	ONCE
//			End
//		End

		AnimationState		  =	PACKING_TYPE_5 PACKING
			Animation		  
				AnimationName =	#(MODEL)_U_SPCB
				AnimationMode =	ONCE
			End
		End
		
		//	Special Power 6
//		AnimationState		  =	PACKING_TYPE_6 UNPACKING	  
//			Animation		  
//				AnimationName =	#(MODEL)_U_SPCD
//				AnimationMode =	ONCE
//			End
//		End
//	
//		AnimationState		  =	PACKING_TYPE_6 PREPARING
//			Animation		 
//				AnimationName =	#(MODEL)_U_SPCD
//				AnimationMode =	ONCE
//			End
//		End

		AnimationState		  =	PACKING_TYPE_6 PACKING
			Animation		  
				AnimationName =	#(MODEL)_U_SPCD
				AnimationMode =	ONCE
			End
		End




//====== LEVELED
		AnimationState				= LEVELED WEAPONSET_TOGGLE_1	// This state clears itself in 3 seconds
			Animation				= LevelUp
				AnimationName		= #(MODEL)_B_CHRA #(MODEL)_B_LVLA
				AnimationMode		= ONCE
			End
		End

		AnimationState				= LEVELED 						// This state clears itself in 3 seconds
			Animation				= LevelUp
				AnimationName		= #(MODEL)_U_CHRA #(MODEL)_U_LVLA
				AnimationMode		= ONCE
			End
		End

//---------------------- EMOTIONS ---------------------------------------------------------------

		// cheer, mounted
		AnimationState				=	EMOTION_CELEBRATING MOUNTED
			Animation 
				AnimationName		=	#(MODEL)_M_CHRA #(MODEL)_M_IRFA
				AnimationMode		=	ONCE
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End

		// cheer, w/ bow on foot
		AnimationState				=	EMOTION_CELEBRATING WEAPONSET_TOGGLE_1
			Animation 
				AnimationName		=	#(MODEL)_B_CHRA
				AnimationMode		=	ONCE
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End

		// cheer, on foot
		AnimationState				=	EMOTION_CELEBRATING
			Animation CHRA
				AnimationName		=	#(MODEL)_U_CHRA #(MODEL)_U_TNTA
				AnimationMode		=	ONCE
			End
			Animation CHRB
				AnimationName		=	#(MODEL)_U_CHRB #(MODEL)_U_CHRA #(MODEL)_U_TNTA
				AnimationMode		=	ONCE
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End
		
		// raise flag, w/ bow on foot
		AnimationState				=	RAISING_FLAG WEAPONSET_TOGGLE_1
			Animation 
				AnimationName		=	#(MODEL)_B_CHRA
				AnimationMode		=	ONCE
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End

		// cheer, on foot
		AnimationState				=	RAISING_FLAG
			Animation CHRA
				AnimationName		=	#(MODEL)_U_CHRA #(MODEL)_U_TNTA
				AnimationMode		=	ONCE
			End
			Animation CHRB
				AnimationName		=	#(MODEL)_U_CHRB #(MODEL)_U_CHRA #(MODEL)_U_TNTA
				AnimationMode		=	ONCE
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End
		
		// taunt, mounted
		AnimationState				=	EMOTION_TAUNTING MOUNTED
			Animation 
				AnimationName		=	#(MODEL)_M_TNTA #(MODEL)_M_IRFA
				AnimationMode		=	ONCE
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End
		
		// taunt, w/ bow on foot
		AnimationState				=	EMOTION_TAUNTING WEAPONSET_TOGGLE_1
			Animation 
				AnimationName		=	#(MODEL)_B_TNTA
				AnimationMode		=	ONCE
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End
		
		// taunt, on foot
		AnimationState				=	EMOTION_TAUNTING
			Animation CHRA
				AnimationName		=	#(MODEL)_U_TNTA
				AnimationMode		=	ONCE
			End
			Animation CHRB
				AnimationName		=	#(MODEL)_U_TNTB #(MODEL)_U_TNTA
				AnimationMode		=	ONCE
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End
		
// 	Animation
// 		AnimationName				= RUMerry_CHRA
// 		AnimationMode				= ONCE
// 	End
// 	Animation
// 		AnimationName				= RUMerry_CHRB
// 		AnimationMode				= ONCE
// 	End
// 	Flags							= RESTART_ANIM_WHEN_COMPLETE
// End
// 
// AnimationState						= EMOTION_TAUNTING
// 	Animation
// 		AnimationName				= RUMerry_TNTB
// 		AnimationMode				= LOOP
// 	End
// End
// 
// AnimationState					= EMOTION_ALERT WEAPONSET_TOGGLE_1
// 	StateName					= STATE_Ready_Rocks
// 	Animation					= IDLA
// 		AnimationName			= RUMerry_IDLA
// 		AnimationMode			= LOOP
// 	End
// End
// AnimationState					= EMOTION_ALERT
// 	StateName					= STATE_Ready_Sword
// 	Animation
// 		AnimationName			= RUMerry_IDLB
// 		AnimationMode			= LOOP
// 	End
// End
		


//====== ENGAGED
		AnimationState				= ENGAGED WEAPONSET_TOGGLE_1
			StateName				= STATE_ready
			Animation
				AnimationName		= #(MODEL)_B_IDLA
				AnimationMode		= ONCE
			End
		End
		AnimationState				= ENGAGED
			StateName				= STATE_ready
			Animation
				AnimationName		= #(MODEL)_U_IDLA
				AnimationMode		= ONCE
			End
		End
		AnimationState				= BETWEEN_FIRING_SHOTS_A WEAPONSET_TOGGLE_1
			StateName				= STATE_ready
			Animation
				AnimationName		= #(MODEL)_B_IDLA
				AnimationMode		= ONCE
			End
		End
		AnimationState				= BETWEEN_FIRING_SHOTS_A
			StateName				= STATE_ready
			Animation
				AnimationName		= #(MODEL)_U_IDLA
				AnimationMode		= ONCE
			End
		End
		
// --- Idle Toggled

		AnimationState = SELECTED WEAPONSET_TOGGLE_1
			StateName				= STATE_Selected_Bow
			Animation				= Selected_Loop
				AnimationName		= #(MODEL)_B_ATNB
				AnimationMode		= LOOP
				AnimationBlendTime	= 10
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Idle_Bow" then CurDrawableSetTransitionAnimState("TRANS_BoredToSelectedBow") end
			EndScript
			Flags = RESTART_ANIM_WHEN_COMPLETE
		End

		AnimationState = SELECTED
			StateName				= STATE_Selected_Sword
			Animation				= Selected_Loop
				AnimationName		= #(MODEL)_U_ATNB
				AnimationMode		= LOOP
				AnimationBlendTime	= 10
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Idle_Sword" then CurDrawableSetTransitionAnimState("TRANS_BoredToSelectedSword") end
			EndScript
			Flags = RESTART_ANIM_WHEN_COMPLETE
		End


		AnimationState				= WEAPONSET_TOGGLE_1
			StateName				= STATE_Idle_Bow
			Animation
				AnimationName		=	#(MODEL)_B_IDLA
				AnimationPriority	=	20
				AnimationMode		=	ONCE
				AnimationBlendTime	=	15
			End
			Flags				=	RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Idle_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwordToBow") end
			EndScript
		End

		IdleAnimationState
			StateName					= STATE_Idle_Sword	
			Animation = Foot_IDLB // Bored Idle
				AnimationName       = #(MODEL)_U_IDLB
				AnimationMode       = ONCE
				AnimationPriority   = 20
			End
			Animation = Foot_IDLC // Bored Fidget
				AnimationName       = #(MODEL)_U_IBFA
				AnimationMode       = ONCE
				AnimationPriority   = 2
			End
			//Animation = Foot_IDLD // Bored Fidget
			//	AnimationName       = #(MODEL)_U_IBFB
			//	AnimationMode       = ONCE
			//	AnimationPriority   = 1
			//End

			BeginScript
				CurDrawableHideSubObject("arrow")
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Selected_Sword" then CurDrawableSetTransitionAnimState("TRANS_SelectedToBoredSword") end
				if Prev == "STATE_Idle_Bow" then CurDrawableSetTransitionAnimState("TRANS_BowToSword") end
			EndScript
		End
		

	//---transitions--------------------------------------------

		TransitionState = TRANS_BoredToSelectedSword
		// Once we have proper animations for enter -> idle -> exit, fix this properly.
			Animation = ANTD
				AnimationName	= #(MODEL)_U_ATNA #(MODEL)_U_ATND #(MODEL)_U_IDLA
				AnimationMode	= ONCE
			End		
		End
		
		TransitionState = TRANS_SelectedToBoredSword
			Animation			= ATNF
				AnimationName	= #(MODEL)_U_ATNC #(MODEL)_U_ATNF #(MODEL)_U_ATNE
				AnimationMode	= ONCE
			End		
		End	

		TransitionState = TRANS_BoredToSelectedBow
			Animation = ATNC
				AnimationName		= #(MODEL)_U_ATNF #(MODEL)_U_ATNE
				AnimationMode		= ONCE
			End		
		End
		
		TransitionState = TRANS_CaptainBowToSelectedBow
			Animation = ATNC
				AnimationName		= #(MODEL)_U_ATNF
				AnimationMode		= ONCE
				AnimationBlendTime	= 10
				AnimationSpeedFactorRange = 1.5 1.5
			End		
		End
		
		TransitionState = TRANS_SelectedToBoredBow
			Animation			= ATNA
				AnimationName	= #(MODEL)_U_ATNF
				AnimationMode	= ONCE
			End		
		End	


		TransitionState       = TRANS_BowToSword
			Animation           = CUHero_STHA
				AnimationName     = #(MODEL)_B_STHA
				AnimationMode     = ONCE
			End
		End

		TransitionState       = TRANS_SwordToBow
			Animation           = CUHero_STHB
				AnimationName     = #(MODEL)_U_STHA
				AnimationMode     = ONCE
			End
		End	

		TransitionState       		= TRANS_BowToSword_Running
			Animation           	= DrawSwords
				AnimationName       = #(MODEL)_B_STHB
				AnimationMode       = ONCE
			End
		End
		
		TransitionState       		= TRANS_SwordToBow_Running
			Animation           	= DrawBow
				AnimationName       = #(MODEL)_U_STHB
				AnimationMode       = ONCE
			End
		End		

	End	
End

	LocomotorSet
		Locomotor = TheodenHumanLocomotor
		Condition = SET_NORMAL 
		Speed     = 130
	End


ReplaceModule ModuleTag_RespawnBody
	Body = RespawnBody ModuleTag_RespawnBody1
		CheerRadius 			= EMOTION_CHEER_RADIUS
		MaxHealth        		= 3000 ;BALANCE Theoden Health
		PermanentlyKilledByFilter	= NONE		;Who kills me permanently?
   		DodgePercent      		= HERO_DODGE_PERCENT
	End
End

	WeaponSet
		Conditions			= None 
		Weapon				= PRIMARY WarriorSword
	End

	ArmorSet
		Conditions      = None
		Armor           = WarriorArmor
		DamageFX        = NormalDamageFX
	End

	CommandSet			= NewRohanTheodenCommandSet
	CrusherLevel = 0			;Can I crush anything?
	MountedCrusherLevel = 2		;Crush level when mounted.
	CrushableLevel = 2			;What am I?:        0 = for infantry, 1 = for trees, 2 = cavalry/heroes
	MountedCrushableLevel = 2	;Crusable level when mounted.

	CrushWeapon		= HeroCrush  

	MinCrushVelocityPercent = 0 ; Has to be moving at at least 50% of full speed.
	CrushDecelerationPercent = 0 ; Lose xx percent of max velocity when crushing.
	
	CrushKnockback = 40
	CrushZFactor = 1.2

VoiceAttack 							= HeroWestMaleVoiceAttack
			VoiceAttackAir							= HeroWestMaleVoiceAttack
			VoiceAttackCharge 						= HeroWestMaleVoiceAttackCharge
			VoiceAttackMachine 						= HeroWestMaleVoiceAttack
			VoiceAttackStructure 					= HeroWestMaleVoiceAttackBuilding
			VoiceCreated							= HeroWestMaleVoiceSalute
			VoiceFear								= HeroWestMaleVoiceHelpMe
			VoiceFullyCreated						= HeroWestMaleVoiceSalute
			VoiceGuard								= HeroWestMaleVoiceMove
			VoiceMove 								= HeroWestMaleVoiceMove
			VoiceMoveToCamp 						= HeroWestMaleVoiceMoveCamp
			VoiceMoveWhileAttacking 				= HeroWestMaleVoiceDisengage
			VoicePriority							= 95
			VoiceRetreatToCastle 					= HeroWestMaleVoiceRetreat
			VoiceSelect 							= HeroWestMaleVoiceSelectMS
			VoiceSelectBattle  						= HeroWestMaleVoiceSelectBattle
		
			SoundImpact								= ImpactHorse
		
			UnitSpecificSounds
				VoiceEnterUnitElvenTransportShip	= HeroWestMaleVoiceMoveShip
				VoiceEnterUnitMordorMumakil			= HeroWestMaleVoiceMove
				VoiceEnterUnitSlaughterHouse		= HeroWestMaleVoiceMove
				VoiceEnterUnitTransportShip			= HeroWestMaleVoiceMove
				VoiceGarrison						= HeroWestMaleVoiceMoveGarrison
				VoiceInitiateCaptureBuilding		= HeroWestMaleVoiceCaptureBuilding
			End


      AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced0
		TriggeredBy				= Upgrade_TechnologyGondorForgedBlades
		AttributeModifier		= MoreAttack1
	End
      End
AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced1
		TriggeredBy				= Upgrade_TechnologyElvenForgedBlades
		AttributeModifier		= MoreAttack2
	End
      End
AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced2
		TriggeredBy				= Upgrade_TechnologyDwarvenForgedBlades
		AttributeModifier		= MoreAttack3
	End
      End

AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced01
		TriggeredBy				= Upgrade_TechnologyIsengardForgedBlades
		AttributeModifier		= MoreAttack4
	End
      End
AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced11
		TriggeredBy				= Upgrade_TechnologyMordorForgedBlades
		AttributeModifier		= MoreAttack5
	End
      End
AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced21
		TriggeredBy				= Upgrade_TechnologyWildForgedBlades
		AttributeModifier		= MoreAttack6
	End
      End
AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced111
		TriggeredBy				= Upgrade_TechnologyElvenSilverthornArrows
		AttributeModifier		= MoreAttack7
	End
      End
AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced211
		TriggeredBy				= Upgrade_TechnologyAngmarDarkIronBlades
		AttributeModifier		= MoreAttack8
	End
      End

;--------------------------------------------------------

AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced0b
		TriggeredBy				= Upgrade_TechnologyGondorHeavyArmor
		AttributeModifier		= MoreDefence1
	End
      End
AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced1b
		TriggeredBy				= Upgrade_TechnologyElvenHeavyArmor
		AttributeModifier		=MoreDefence2
	End
      End
AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced2b
		TriggeredBy				= Upgrade_TechnologyDwarvenMithrilMail
		AttributeModifier		= MoreDefence3
	End
      End

AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced01b
		TriggeredBy				= Upgrade_TechnologyIsengardHeavyArmor
		AttributeModifier		= MoreDefence4
	End
      End
AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced11b
		TriggeredBy				= Upgrade_TechnologyMordorHeavyArmor
		AttributeModifier		= MoreDefence5
	End
      End
AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced21b
		TriggeredBy				= Upgrade_TechnologyWildHeavyArmor
		AttributeModifier		= MoreDefence6
	End
      End
AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced111b
		TriggeredBy				= Upgrade_TechnologyAngmarIceArrows
		AttributeModifier		= MoreDefence7
	End
      End
AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced211b
		TriggeredBy				= Upgrade_TechnologyAngmarDarkIronArmor
		AttributeModifier		= MoreDefence8
	End
      End

;-----------------------------------------------------------------------------------

AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced0c
		TriggeredBy				= Upgrade_TechnologyElvenBasicTraining
		AttributeModifier		= MoreLife1
	End
      End
AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced1c
		TriggeredBy				= Upgrade_TechnologyDwarvenFlamingShot
		AttributeModifier		=MoreLife2
	End
      End
AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced2c
		TriggeredBy				= Upgrade_TechnologyDwarvenSiegeHammer
		AttributeModifier		= MoreLife3
	End
      End

AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced01c
		TriggeredBy				= Upgrade_TechnologyIsengardFireArrows
		AttributeModifier		= MoreLife4
	End
      End
AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced11c
		TriggeredBy				= Upgrade_TechnologyMordorFireArrows
		AttributeModifier		= MoreLife5
	End
      End
AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced21c
		TriggeredBy				= Upgrade_TechnologyWildFireArrows
		AttributeModifier		= MoreLife6
	End
      End
AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced111c
		TriggeredBy				= Upgrade_TechnologyAngmarIceShot
		AttributeModifier		= MoreLife7
	End
      End
AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced211c
		TriggeredBy				= Upgrade_TechnologyIsengardBasicTraining
		AttributeModifier		= MoreLife8
	End
      End
AddModule
	Behavior = AutoHealBehavior ModuleTag_TheodenHealing1
		StartsActive = Yes
		HealingAmount = HERO_HEAL_AMOUNT
		HealingDelay = 1000
		StartHealingDelay = HERO_HEAL_DELAY
		HealOnlyIfNotInCombat = Yes
	End
End

;-------------------------------------------------------------------

AddModule
Behavior = UnpauseSpecialPowerUpgrade ModuleTag_CreateAHeroInvulnerabilityEnabler_Level3
	SpecialPowerTemplate = SpecialAbilityCreateAHeroInvulnerability_Level3
	TriggeredBy			 = Upgrade_CreateAHeroInvulnerability_Level3
End
End

AddModule
Behavior = SpecialPowerModule ModuleTag_CreateAHeroInvulnerabilityStarter_Level3
	SpecialPowerTemplate		 = SpecialAbilityCreateAHeroInvulnerability_Level3
	UpdateModuleStartsAttack	 = No
	StartsPaused				 = Yes
	AttributeModifier			 = CreateAHeroInvulnerabilityBonus_Level3
	AttributeModifierRange		 = 1
	AttributeModifierAffectsSelf = Yes
	AttributeModifierAffects	 = ANY +CAVALRY	+INFANTRY
	AttributeModifierFX			 = FX_CreateAHeroInvulnerability_Start
End
End
AddModule
Behavior = UnpauseSpecialPowerUpgrade ModuleTag_SuperBladeMasterEnabler
	SpecialPowerTemplate = SpecialAbilityCreateAHeroBladeMaster
	TriggeredBy			 = Upgrade_TechnologyGondorBasicTraining
End
End

	AddModule
  	Behavior = SpecialPowerModule ModuleTag_SuperMasterStarter
		SpecialPowerTemplate    = SpecialAbilityCreateAHeroBladeMaster
		StartsPaused			= Yes
	End
	End

	AddModule
	Behavior = HeroModeSpecialAbilityUpdate ModuleTag_SuperBladeMasterUpdate
		SpecialPowerTemplate    = SpecialAbilityCreateAHeroBladeMaster
		HeroAttributeModifier	= SuperBladeMaster
		HeroEffectDuration		= 30000 ; this should sync with the auto ability delay re-fire time in commandButtons.ini
		UnpackTime              = 1 ; insant unpack
		TriggerSound			= AragornBladeMaster
	End
	End
AddModule
Behavior = UnpauseSpecialPowerUpgrade ModuleTag_CreateAHeroThrowSpearEnabler_Level3
	SpecialPowerTemplate = SpecialAbilityCreateAHeroThrowSpear_Level3
	TriggeredBy = Upgrade_TechnologyAngmarBasicTraining
End
End

AddModule
Behavior = SpecialPowerModule ModuleTag_CreateAHeroThrowSpearStarter_Level3
	SpecialPowerTemplate		= SpecialAbilityCreateAHeroThrowSpear_Level3
	UpdateModuleStartsAttack	= Yes
	StartsPaused			= Yes
	//InitiateSound			= EomerVoiceAttackSpear
End
End
AddModule
Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_CreateAHeroThrowSpearUpdate_Level3
	SpecialPowerTemplate    = SpecialAbilityCreateAHeroThrowSpear_Level3

	UnpackTime              = 1200
	PackTime                = 2000 

	AwardXPForTriggering    = 0
	
	StartAbilityRange		= 275.0
	ApproachRequiresLOS		= Yes
	
	SpecialWeapon = CreateAHeroSpear
	WhichSpecialWeapon = 1
End
End

AddModule
Behavior = UnpauseSpecialPowerUpgrade ModuleTag_CreateAHeroHealingEnabler_Level2
	SpecialPowerTemplate		= SpecialAbilityCreateAHeroHealing_Level2
	TriggeredBy					= Upgrade_TechnologyWildBasicTraining
End
End
AddModule
Behavior = PlayerHealSpecialPower ModuleTag_CreateAHeroHealingPower_Level2
	SpecialPowerTemplate		= SpecialAbilityCreateAHeroHealing_Level2
	UpdateModuleStartsAttack	= Yes
	StartsPaused				= Yes
	HealAffects					= INFANTRY CAVALRY MONSTER
	HealAmount					= CREATE_A_HERO_HEALING_AMOUNT_L2	// percent of max health
	HealRadius					= CREATE_A_HERO_HEALING_RADIUS_L2
	HealFX						= FX_SpellHealUnitHealBuff
End
End
AddModule
Behavior = SpecialAbilityUpdate ModuleTag_CreateAHeroHealingUpdate_Level2
	SpecialPowerTemplate    = SpecialAbilityCreateAHeroHealing_Level2
	UnpackTime             = 1  ;// (changing this will scale anim speed)
	PreparationTime        = 1 ;// time to complete hack once prepared (changing this will scale anim speed)
	PackTime               = 2000  ;// (changing this will scale anim speed)
	UnpackingVariation	   = 5
End
End
;AddModule
;Behavior = UnpauseSpecialPowerUpgrade ModuleTag_ToggleMountedEnabler
	;SpecialPowerTemplate = SpecialAbilityCreateAHeroToggleMounted
	;TriggeredBy			 = Upgrade_CreateAHeroToggleMounted
;End
;End
;AddModule
;Behavior = SpecialPowerModule ModuleTag_ToggleMountedStarter 
	;SpecialPowerTemplate	 = SpecialAbilityCreateAHeroToggleMounted
	;UpdateModuleStartsAttack = Yes
	;StartsPaused			 = Yes
;End
;End
;AddModule
;Behavior = ToggleMountedSpecialAbilityUpdate ModuleTag_ToggleMounted
	;SpecialPowerTemplate = SpecialAbilityCreateAHeroToggleMounted
	;UnpackTime			 = 2000
	;PreparationTime		 = 1  
	;PersistentPrepTime	 = 250
	;PackTime			 = 2000
	;OpacityTarget		 = .3	   // How see-thru to be at peak of change.
	;AwardXPForTriggering = 0
;End
;End
AddModule
Behavior = UnpauseSpecialPowerUpgrade ModuleTag_CreateAHeroShieldCrushEnabler_Level3
	SpecialPowerTemplate	= SpecialAbilityCreateAHeroShieldCrush_Level3
	TriggeredBy				= Upgrade_CreateAHeroToggleMounted
End
End
AddModule
Behavior = SpecialPowerModule ModuleTag_CreateAHeroShieldCrushStarter_Level3			// SpecialAbility is	a SpecialPower,	SpecialPower is	anyting	special
	SpecialPowerTemplate			= SpecialAbilityCreateAHeroShieldCrush_Level3
	StartsPaused					= Yes
	AttributeModifier				= CreateAHeroShieldCrush_Level3
	AttributeModifierAffectsSelf	= Yes
	//TriggerRX						= FX_CreateAHeroShieldCharge_Level3
End
End
AddModule
 	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_Pillage
		SpecialPowerTemplate	= SpecialAbilityFakeLeadership2
		TriggeredBy				= Upgrade_CreateAHeroToggleMounted
	End
End
AddModule
	Behavior = SpecialPowerModule ModuleTag_PillageUpdate
		SpecialPowerTemplate		= SpecialAbilityFakeLeadership2
		UpdateModuleStartsAttack	= No
		StartsPaused				= Yes
	End
End
AddModule
	Behavior = AttributeModifierAuraUpdate ModuleTag_PillageAura
		StartsActive	= No										; If no, requires upgrade to turn on.
		BonusName		= LurtzPassiveOutlawLeadership
		TriggeredBy		= Upgrade_CreateAHeroToggleMounted
		RefreshDelay	= 2000
		Range			= 200
		AllowSelf		= Yes
		ObjectFilter	= ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION -HERO -DOZER
	End	
End

LocomotorSet // Used by this special power
	Locomotor = HeroHorseLocomotor
	Condition = SET_MOUNTED 
	Speed     = 100
End
End

Weapon AngmarDarkLordsLamentWeapon
	RadiusDamageAffects		= ENEMIES
	LeechRangeWeapon		= Yes
	CanFireWhileMoving		= No
	AttackRange			= 30.0
	MeleeWeapon			= Yes
	WeaponSpeed           = 799999.2        ; dist/sec (huge value == effectively instant)
	FireFX				= FX_SoWolf_DarkLordsLament
	DelayBetweenShots     = ANGMAR_SHADE_LAMENT_DELAYBETWEENSHOTS 	; time between shots, msec
	PreAttackDelay        = ANGMAR_SHADE_LAMENT_PREATTACKDELAY 	; 433 is natural time of the stabbing animation.
	PreAttackType         = PER_SHOT ; Do the delay each time we attack a new target
	FiringDuration        = ANGMAR_SHADE_LAMENT_FIRINGDURATION 		; min 600 for anim
	DamageDealtAtSelfPosition = Yes				; A melee based AoE.  Arc radiates from me, not them

	ParalyzeNugget
		Radius			= ANGMAR_SHADE_LAMENT_RADIUS
		Duration		= ANGMAR_SHADE_LAMENT_DURATION
		SpecialObjectFilter	= ALL -STRUCTURE -HORDE -HERO
		ParalyzeFX		= FX_IceStunEffect
		FreezeAnimation = Yes
		AffectHordeMembers = Yes
	End	

	//Resist Knockback
	AttributeModifierNugget
		AttributeModifier        = DarkLordsLament1
		Radius			 = ANGMAR_SHADE_LAMENT_RADIUS		
		SpecialObjectFilter      = ALL -STRUCTURE
		AffectHordeMembers = Yes
	End
End

Weapon AngmarNecroSoulFreezeWeapon
	RadiusDamageAffects		= ENEMIES NEUTRALS ALLIES SELF
	FireFX				= FX_SoulFreezeWeapon    

	//Paralyze everything 
	ParalyzeNugget				
		Radius			= ANGMAR_NECRO_SOUL_FREEZE_ATTACK_RADIUS
		Duration		= ANGMAR_NECRO_SOUL_FREEZE_DURATION
		SpecialObjectFilter     = ALL -STRUCTURE ;-HORDE
		ParalyzeFX		= FX_IceStunEffect
		FreezeAnimation = Yes
		AffectHordeMembers 	= Yes		//This will propagate the effect down to the horde members
	End
	
	//Make everything invulerable
	AttributeModifierNugget
		AttributeModifier        = SoulFreezeModifier1
		Radius			 = ANGMAR_NECRO_SOUL_FREEZE_ATTACK_RADIUS		
		SpecialObjectFilter      = ALL -STRUCTURE -HORDE -HERO
		AffectHordeMembers 	= Yes		//This will propagate the effect down to the horde members
	End 
End

Object RohanEomerSpearProjectile
ReplaceModule ModuleTag_01 
	Draw = W3DScriptedModelDraw ModuleTag_011 ;ModuleTag_Draw
		DefaultModelConditionState
			Model = RUEomer_SPER
			ParticleSysBone NONE SpearContrailThin1
			ParticleSysBone NONE SpearFlameTrail1
		End
	End
End

AddModule
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_DIELIKETHIS2
    StartsActive = Yes
    DeathWeapon = AngmarSanctumWeapon		
;    DeathWeapon = AngmarNecroSoulFreezeWeapon
  End
  End
;AddModule
 ; Behavior = FireWeaponWhenDeadBehavior ModuleTag_DIELIKETHIS1
  ;  StartsActive = Yes
  ;  DeathWeapon = AngmarNecroSoulFreezeWeapon
 ; End
 ; End
End

Object AngmarSanctumProjectile
AddModule
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_DIELIKETHIS2
    StartsActive = Yes
;    DeathWeapon = AngmarSanctumWeapon		
    DeathWeapon = AngmarNecroSoulFreezeWeapon
  End
  End
;ReplaceModule ModuleTag_08
;	Behavior = FXListDie ModuleTag_081
;		DeathTypes	= ALL
;		DeathFX		= FX_IceMeteorExp ;FX_GorgorothSpireFireballDeath
;	End
;End
End


Object AngmarWitchking
	AddModule	
	Behavior = ExperienceLevelCreate ModuleTag_MPLevelBonus1
		LevelToGrant = 10
		MPOnly = Yes
	End
	End
End

Object Wyrm
RemoveModule ModuleTag_LifetimeUpdate
End

Object MordorBalrog
RemoveModule ModuleTag_LifetimeUpdate
End

Object SummonedDragon
RemoveModule ModuleTag_LifetimeUpdate
End

FXList FX_GandalfPreAttackBlastReal
  ParticleSystem
    Name = GandalfBlastInitialWave1
    Offset = X:20.0 Y:0.0 Z:20.0
  End
  ParticleSystem
    Name = GandalfBlastInitialCenter1
    Offset = X:20.0 Y:0.0 Z:20.0
  End
  ParticleSystem
    Name = GandalfBlastInitialVortex1
    Offset = X:20.0 Y:0.0 Z:20.0
  End
  ParticleSystem
    Name = GandalfBlastRipple1
    Offset = X:20.0 Y:0.0 Z:0.0
  End
End

FXList FX_GandalfBlast1
  ParticleSystem
    Name = GandalfBlastFinalLight1
    Offset = X:0.0 Y:0.0 Z:60   ;Z:8.0
  End
  ParticleSystem
    Name = GandalfBlastFinalShockWave1
    Offset = X:0.0 Y:0.0 Z:20.0
  End
  ParticleSystem
    Name = GandalfBlastDust1
    Offset = X:0.0 Y:0.0 Z:15.0
  End
End

Weapon GandalfWordOfPower1 ; Big Blue Ring Blast
	IdleAfterFiringDelay = 0
	AttackRange = GANDALF_WORD_OF_POWER_RANGE
	MinimumAttackRange = 0.8
	WeaponSpeed = 401         ; dist/sec 
	MinWeaponSpeed = 241
	MaxWeaponSpeed = 601      ; dist/sec Upper limit on scaling, when attacking past nominal "max" range
	ScaleWeaponSpeed = Yes ; Used for lob weapons, scales speed proportional to range
	RadiusDamageAffects = ENEMIES NOT_SIMILAR
	DelayBetweenShots = 5000               ; time between shots, msec
	PreAttackDelay        = 2600
	PreAttackType         = PER_ATTACK ; Do the delay each time we attack a new target
	PreAttackFX           = FX_GandalfPreAttackBlastReal
	FireFX                = FX_GandalfBlast1
	FiringDuration      = 1400
	DamageNugget                        ; A basic Nugget that just does damage
		Damage			= 5000
		Radius			= 200.0
		DamageType		= MAGIC
		DamageFXType	= MAGIC
		DeathType		= EXPLODED
		DamageSpeed		= 0.0 ; must match the ShockWaveSpeed below
	End
	MetaImpactNugget                    ; A Nugget that throws things back with force
		HeroResist			= .75
		ShockWaveAmount   = 0.0
		ShockWaveRadius   = 0.0
		ShockWaveTaperOff = 0.0
		ShockWaveZMult    = 0.000
		ShockWaveSpeed	  = 0.0 
	End
End

Weapon LegolasBowArrowStorm
  AttackRange = LEGOLAS_ARROWSTORM_RANGE
  WeaponSpeed = 561         ; dist/sec 
  MinWeaponSpeed = 481
  MaxWeaponSpeed = 641      ; dist/sec Upper limit on scaling, when attacking past nominal "max" range
;  FireFX = FX_ArrowAttack
  HitPercentage     = 100     ;When this weapon is used it will hit exactly all of the time.

  ProjectileNugget                    ; Default arrow
    ProjectileTemplateName = LegolasBowArrowStormProjectile
    WarheadTemplateName = LegolasBowArrowStormWarhead
  End
End

Weapon HaldirGoldenArrow
	AttackRange					= HALDIR_BOW_RANGE				
	LeechRangeWeapon			= Yes
	WeaponSpeed					= 321
	MinWeaponSpeed				= 241
	MaxWeaponSpeed				= 481
;	FireFX						= FX_ArrowAttack
	ScaleWeaponSpeed			= Yes
	HitPercentage				= 100
	ScatterRadius				= 5.0

	DelayBetweenShots			= HALDIR_DELAYBETWEENSHOTS
	PreAttackDelay				= HALDIR_PREATTACKDELAY
	PreAttackType				= PER_SHOT
	FiringDuration				= HALDIR_FIRINGDURATION

	ProjectileNugget
		ProjectileTemplateName	= HaldirGoldenArrowProjectile
		WarheadTemplateName		= HaldirGoldenArrowWarhead
	End
End

;-----------------------------------
Weapon HaldirGoldenArrowWarhead
	ProjectileCollidesWith	= ENEMIES NEUTRAL
	RadiusDamageAffects		= ENEMIES NEUTRALS NOT_SIMILAR
	HitStoredTarget			= Yes
	DamageNugget
		Damage				= 3000
		Radius				= 0.0
		DelayTime			= 0
		DamageType			= HERO_RANGED
		DamageFXType		= GOOD_ARROW_PIERCE
		DeathType			= NORMAL
	End
End

;------------------------------
Weapon LegolasBowArrowStormWarhead
  ProjectileCollidesWith =   STRUCTURES WALLS  
  RadiusDamageAffects =   ENEMIES NEUTRALS NOT_SIMILAR
  HitStoredTarget = Yes	; Always hits initial target.
  DamageNugget                        ; A basic Nugget that just does damage
    Damage        = LEGOLAS_ARROWSTORM_DAMAGE
    Radius        = 15.0	; HitStoredTarget means we hurt the person we launched at.  And nobody else.  So a miss hurts nobody.
    DelayTime     = 0
    DamageType    = HERO_RANGED
    DamageFXType  = GOOD_ARROW_PIERCE
    DeathType     = NORMAL
    AcceptDamageAdd = No
  End
End

;------------------------------------------------------------------------------------------------------------------------------
Weapon LegolasBowArrowStormHigh
  AttackRange = 1680.0
  WeaponSpeed = 481         ; dist/sec 
  MinWeaponSpeed = 481
  MaxWeaponSpeed = 641      ; dist/sec Upper limit on scaling, when attacking past nominal "max" range
  FireFX = FX_RohanArcherBowWeapon
  HitPercentage     = 100     ;When this weapon is used it will hit exactly all of the time.

  ProjectileNugget                    ; A Nugget that creates an Object and sends it to the target with a Warhead
    ProjectileTemplateName = LegolasBowArrowStormProjectile
    WarheadTemplateName = LegolasBowArrowStormWarhead
  End
End

ExperienceLevel	LurtzLevel1
	TargetNames				= IsengardLurtz
	RequiredExperience		= 1	
	ExperienceAward			= LURTZ_LVL1_EXP_AWARD
	Rank					= 1
	Upgrades				= Upgrade_LurtzCrippleTrigger	
	SelectionDecal
		Texture				= decal_hero_evil	
		Style				= SHADOW_ALPHA_DECAL
		OpacityMin			= 50%	
		OpacityMax			= 100%
		MinRadius			= 40
		MaxRadius			= 200
		MaxSelectedUnits	= 40
	End	
End	

ExperienceLevel	LurtzLevel10
	TargetNames				= IsengardLurtz
	RequiredExperience		= LURTZ_LVL10_EXP_NEEDED 
	ExperienceAward			= LURTZ_LVL10_EXP_AWARD	
	AttributeModifiers		= HeroLevelUpDamage9 LurtzPassiveOutlawLeadership
	Upgrades				= Upgrade_CreateAHeroSpawnTornado_Level3
	Rank					= 10
	LevelUpFx				= FX:GandalfLevelUp1FX
	SelectionDecal
		Texture				= decal_hero_evil
		Style				= SHADOW_ALPHA_DECAL
		OpacityMin			= 50%	
		OpacityMax			= 100%
		MinRadius			= 40
		MaxRadius			= 200
		MaxSelectedUnits	= 40
	End	
END	

CommandButton Command_SpecialAbilityNoldorWeaponSong
	Command			= SPECIAL_POWER
	SpecialPower		= SpecialAbilityGlorfindelBladeOfPurity
	TextLabel		= CONTROLBAR:GlorfindelBladeOfPurity1
	DescriptLabel		= CONTROLBAR:ToolTipGlorfindelBladeOfPurity1
	ButtonImage		= HSGlorfindelBladeofPurity
	ButtonBorderType	= ACTION
	InPalantir		= Yes
	AutoAbility		= Yes
	AutoDelay		= 30.0 ; this should sync with the Glorfindel's hero mode effect time
	UnitSpecificSound	= GlorfindelBladeOfPurityMS
End

CommandButton Command_CreateAHero_SpawnTornado_Level3
	Command				= SPECIAL_POWER
    SpecialPower		= SpecialPowerCreateAHeroSpawnTornado_Level3
    ButtonImage			= HSGaladriel_NaturesWrath
	Options				= NEED_TARGET_POS
	TextLabel			= CONTROLBAR:CAH_SpawnTornado_Level3
	ButtonBorderType	= ACTION
	DescriptLabel		= CONTROLBAR:TooltipCAH_SpawnTornado_Level3
	RadiusCursorType    = NaturesWrathRadiusCursor
	InPalantir			= Yes
End

CommandSet NewNoldorWarriorCommandSet
	1	= Command_ToggleStance
	2	= Command_ToggleElvenWarriorWeapon
	3	= Command_SpecialAbilityNoldorWeaponSong
	4 	= Command_CreateAHero_SpecialAbilityHealing_Level2
	5 	= Command_HaldirGoldenArrow
        6       = Command_CreateAHero_SpawnTornado_Level3
	12	= Command_LurtzPillage
	13	= Command_AttackMove
	14	= Command_Stop
	16  	= Command_SetStanceBattle
	17  	= Command_SetStanceAggressive
	18  	= Command_SetStanceHoldGround
End


Object IsengardLurtz 
	ButtonImage 	= WOR_NoldorWarrior
	SelectPortrait  = UPNoldorWarriorPortrait
DisplayName = TheArcher
ReplaceModule ModuleTag_DRAW
Draw = W3DScriptedModelDraw ModuleTag_DRAW1
OkToChangeModelColor = Yes
	  
;StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD
 ;   LodOptions						= LOW
;		AllowMultipleModels			= ALLOW_MULTIPLE_MODELS_LOW
;		MaxRandomTextures			= MAX_RANDOM_TEXTURES_LOW
;		MaxRandomAnimations			= MAX_RANDOM_ANIMATIONS_LOW
;		MaxAnimFrameDelta			= MAX_ANIM_FRAME_DELTA_LOW
;	End
;	
;	LodOptions					= MEDIUM
;		AllowMultipleModels			= ALLOW_MULTIPLE_MODELS_MED
;		MaxRandomTextures			= MAX_RANDOM_TEXTURES_MED
;		MaxRandomAnimations			= MAX_RANDOM_ANIMATIONS_MED
;		MaxAnimFrameDelta			= MAX_ANIM_FRAME_DELTA_MED
;	End
;	
;	LodOptions					= HIGH
;		AllowMultipleModels			= ALLOW_MULTIPLE_MODELS_HIGH
;		MaxRandomTextures			= MAX_RANDOM_TEXTURES_HIGH
;		MaxRandomAnimations			= MAX_RANDOM_ANIMATIONS_HIGH
;		MaxAnimFrameDelta			= MAX_ANIM_FRAME_DELTA_HIGH
;	End
;    
;;====================== MODELS ================================================================
		DefaultModelConditionState
			Model				= RULAElfWar_SKN
			Skeleton			= RUElfWar_SKL
			WeaponLaunchBone		= PRIMARY ARROW
			WeaponLaunchBone		= SECONDARY ARROWNOCK	; when upgraded to flaming arrow
		End

ModelConditionState			= USER_1
			ParticleSysBone = BAT_SPINE1 BladeMaster1 FollowBone:Yes
			ParticleSysBone = BAT_SPINE1 BladeMaster2 FollowBone:Yes
			ParticleSysBone = BAT_SPINE1 BladeMaster3 FollowBone:Yes
		End

; --------- With Sword ------------
		ModelConditionState			= WEAPONSET_TOGGLE_1
			Model				= RULAElfWar_SKN
			Skeleton			= RUElfWar_SKL
		End

; --------- With Fire arrows Upgrade  ------------
		ModelConditionState			= WEAPONSET_PLAYER_UPGRADE USER_4
			Model				= RULAElfWar_SKN
			Skeleton			= RUElfWar_SKL
			WeaponLaunchBone		= PRIMARY ARROW
			WeaponLaunchBone		= SECONDARY ARROWNOCK	; when upgraded to flaming arrow
		;	ParticleSysBone			= FireArowTip arrowFire FollowBone:Yes
		;	ParticleSysBone			= FireArowTip arrowFire FollowBone:Yes
		End

;;================== ANIMATIONS =================================================================

		; ------ Flying ------- ;

		AnimationState        			= STUNNED_STANDING_UP WEAPONSET_TOGGLE_1
			StateName			= STATE_GetUp
			Animation           		= Sword
				AnimationName       	= RUElfWar_GTPSX1
				AnimationMode       	= ONCE
			End
			Animation           		= WantSword
				AnimationName       	= RUElfWar_GTPB
				AnimationMode       	= ONCE
			End
			Flags				= MAINTAIN_FRAME_ACROSS_STATES4
			BeginScript
				PrevState = CurDrawablePrevAnimationState()
				PrevAnim = CurDrawablePrevAnimation()
				if PrevState == "STATE_GetUp" or PrevState == "STATE_Land"
				then
					if PrevAnim == "Bow" or PrevAnim == "WantSword"
					then	
						CurDrawableShowSubObject("arrow")
						CurDrawableShowSubObject("arrownock")
						return "WantSword"
					end
				end
				
				CurDrawableHideSubObject("ArrowNock")
				CurDrawableHideSubObject("arrow")
				return "Sword"
			EndScript
		End
		
		AnimationState        			= STUNNED_STANDING_UP
			StateName			= STATE_GetUp
			Animation           		= Bow
				AnimationName       	= RUElfWar_GTPB
				AnimationMode       	= ONCE
			End
			Animation           		= WantBow
				AnimationName       	= RUElfWar_GTPSX1
				AnimationMode       	= ONCE
			End
			Flags				= MAINTAIN_FRAME_ACROSS_STATES4
			BeginScript
				PrevState = CurDrawablePrevAnimationState()
				PrevAnim = CurDrawablePrevAnimation()
				if PrevState == "STATE_GetUp" or PrevState == "STATE_Land"
				then
					if PrevAnim == "WantBow" or PrevAnim == "Sword"
					then
						CurDrawableHideSubObject("ArrowNock")
						CurDrawableHideSubObject("arrow")
						return "WantBow"
					end
				else
					CurDrawableShowSubObject("arrow")
					CurDrawableShowSubObject("arrownock")
					return "Bow"
				end
			EndScript
		End

		AnimationState        			= STUNNED WEAPONSET_TOGGLE_1
			StateName			= STATE_Land
			Animation           		= Sword
				AnimationName       	= RUElfWar_LNDB
				AnimationMode       	= ONCE
			End
			Animation           		= WantSword
				AnimationName       	= RUElfWar_LNDA
				AnimationMode       	= ONCE
			End
			BeginScript
				PrevState = CurDrawablePrevAnimationState()
				PrevAnim = CurDrawablePrevAnimation()
				if PrevState == "STATE_Fly"
				then
					if PrevAnim == "WantSword" or PrevAnim == "Bow"
					then
						CurDrawableShowSubObject("arrow")
						CurDrawableShowSubObject("arrownock")
						return "WantSword"
					end
				end
				Flags			= MAINTAIN_FRAME_ACROSS_STATES3
				CurDrawableHideSubObject("ArrowNock")
				CurDrawableHideSubObject("arrow")
				return "Sword"
			EndScript
		End
		
		AnimationState        			= STUNNED
			StateName			= STATE_Land
			Animation           		= Bow
				AnimationName       	= RUElfWar_LNDA
				AnimationMode       	= ONCE
			End
			Animation           		= WantBow
				AnimationName       	= RUElfWar_LNDB
				AnimationMode       	= ONCE
			End
			Flags				= MAINTAIN_FRAME_ACROSS_STATES3
			BeginScript
				PrevState = CurDrawablePrevAnimationState()
				PrevAnim = CurDrawablePrevAnimation()
				if PrevState == "STATE_Fly"
				then
					if PrevAnim == "WantBow" or PrevAnim == "Sword"
					then
						CurDrawableHideSubObject("ArrowNock")
						CurDrawableHideSubObject("arrow")
						return "WantBow"
					end
				end
				
				CurDrawableShowSubObject("arrow")
				CurDrawableShowSubObject("arrownock")
				return "Bow"
			EndScript
		End

		AnimationState        			= STUNNED_FLAILING WEAPONSET_TOGGLE_1
			StateName			= STATE_Fly
			Animation           		= Sword
				AnimationName       	= RUElfWar_FLYB
				AnimationMode       	= LOOP
			End
			Animation           		= WantSword
				AnimationName       	= RUElfWar_FLYA
				AnimationMode       	= LOOP
			End
			Flags				= MAINTAIN_FRAME_ACROSS_STATES2
			BeginScript
				PrevState = CurDrawablePrevAnimationState()
				PrevAnim = CurDrawablePrevAnimation()
				if PrevState == "Ready_Bow" or PrevState == "Moving_Bow" or PrevState == "Bored_Bow"								;;;;;;#TODO put in various bow states here
				then
					CurDrawableShowSubObject("arrow")
					CurDrawableShowSubObject("arrownock")
					return "WantSword"
				elseif PrevState == "STATE_Fly"
				then
					if PrevAnim == "Bow" or PrevAnim == "WantSword"
					then
						CurDrawableShowSubObject("arrow")
						CurDrawableShowSubObject("arrownock")
						return "WantSword"
					end
				end
					
				CurDrawableHideSubObject("ArrowNock")
				CurDrawableHideSubObject("arrow")
				return "Sword"
			EndScript
		End
		
		AnimationState        			= STUNNED_FLAILING
			StateName			= STATE_Fly
			Animation           		= Bow
				AnimationName       	= RUElfWar_FLYA
				AnimationMode       	= LOOP
			End
			Animation           		= WantBow
				AnimationName       	= RUElfWar_FLYB
				AnimationMode       	= LOOP
			End
			Flags				= MAINTAIN_FRAME_ACROSS_STATES2
			BeginScript
				PrevState = CurDrawablePrevAnimationState()
				PrevAnim = CurDrawablePrevAnimation()
				if PrevState == "Ready_Sword" or PrevState == "Moving_Sword" or PrevState == "Bored_Sword"							;;;;;;#TODO put in various sword states here
				then
					CurDrawableHideSubObject("ArrowNock")
					CurDrawableHideSubObject("arrow")
					return "WantBow"
				elseif PrevState == "STATE_Fly"
				then
					if PrevAnim == "Sword" or PrevAnim == "WantBow"
					then
						CurDrawableHideSubObject("ArrowNock")
						CurDrawableHideSubObject("arrow")
						return "WantBow"
					end
				end

				CurDrawableShowSubObject("arrow")
				CurDrawableShowSubObject("arrownock")
				return "Bow"
			EndScript
		End
		
		
		; ------ Dying ------- ;

		AnimationState        			= DYING WEAPONSET_TOGGLE_1
			Animation           		= Sword1
				AnimationName       	= RUElfWar_DIESv5
				AnimationMode       	= ONCE
			End
			Animation           		= Sword2
				AnimationName       	= RUElfWar_DIESV4
				AnimationMode       	= ONCE
			End
			Animation           		= WantSword
				AnimationName       	= RUElfWar_LNDA
				AnimationMode       	= ONCE
			End
			
			BeginScript
				PrevState = CurDrawablePrevAnimationState()
				PrevAnim = CurDrawablePrevAnimation()
				if PrevState == "STATE_Fly"
				then
					CurDrawableShowSubObject("arrow")
					CurDrawableShowSubObject("arrownock")
					return "WantSword"
				end
			
				CurDrawableHideSubObject("ArrowNock")
				CurDrawableHideSubObject("arrow")
				if GetClientRandomNumberReal(0,2) < 1
				then
					return "Sword1"
				else
					return "Sword2"
				end
			EndScript
		End
		
		AnimationState        			= DYING
			Animation           		= Bow1
				AnimationName       	= RUElfWar_DIEB
				AnimationMode       	= ONCE
			End
			Animation           		= Bow2
				AnimationName       	= RUElfWar_DIEBV5
				AnimationMode       	= ONCE
			End
			Animation           		= WantBow
				AnimationName       	= RUElfWar_LNDB
				AnimationMode       	= ONCE
			End
			BeginScript
				PrevState = CurDrawablePrevAnimationState()
				PrevAnim = CurDrawablePrevAnimation()
				
				if PrevState == "STATE_Fly"
				then
					CurDrawableHideSubObject("ArrowNock")
					CurDrawableHideSubObject("arrow")
					return "WantBow"
				end
				
				if GetClientRandomNumberReal(0,2) < 1
				then
					CurDrawableShowSubObject("arrow")
					CurDrawableShowSubObject("arrownock")
					return "Bow1"
				else
					CurDrawableShowSubObject("arrow")
					CurDrawableShowSubObject("arrownock")
					return "Bow2"
				end
			EndScript
		End
		
		
;;======== TERROR

		AnimationState				= MOVING EMOTION_TERROR WEAPONSET_TOGGLE_1
			StateName			= Moving_Sword
			Animation			= Terror
				AnimationName		= RUElfWar_RUNN
				AnimationMode		= LOOP
				Distance		= 40
			End
			Animation			= finishrun_b
				AnimationName       	= RUElfWar_RUNB
				AnimationMode       	= ONCE
				AnimationBlendTime	= 0
				Distance		= 40
			End
			Animation			= runtrans_bs
				AnimationName       	= RUElfWar_RUNC
				AnimationMode       	= ONCE
				AnimationBlendTime	= 5
				Distance		= 70
			End
			Animation			= runtrans_sb_finish
				AnimationName       	= RUElfWar_RUNT
				AnimationMode       	= ONCE
				AnimationBlendTime	= 0
				Distance		= 70
			End
			Animation			= runnoblend_s
				AnimationName       	= RUElfWar_RUNN
				AnimationMode       	= LOOP
				AnimationBlendTime	= 0
				Distance		= 40
			End
			Flags				= RESTART_ANIM_WHEN_COMPLETE MAINTAIN_FRAME_ACROSS_STATES
			BeginScript
				PrevAnim	= CurDrawablePrevAnimation()
				PrevState	= CurDrawablePrevAnimationState()
				CurDrawableHideSubObject("ARROW")
				CurDrawableHideSubObject("ARROWNOCK")
				
				if PrevState == "Moving_Bow"
				then
					if PrevAnim == "runtrans_sb"
					then
						return "runtrans_sb_finish"
					elseif PrevAnim == "finishrun_s"
					then
						return "runnoblend_s"
					else
						return "finishrun_b"
					end
				elseif PrevAnim == "finishrun_b" or PrevAnim == "runtrans_sb_finish"
				then
					return "runtrans_bs"
				elseif PrevAnim == "runtrans_bs" or PrevAnim == "run_s" or PrevAnim == "runnoblend_s"
				then
					return "runnoblend_s"
				else
					return "Terror"
				end				
			EndScript
		End
		AnimationState				= MOVING EMOTION_TERROR
			StateName			= Moving_Bow
			Animation			= RunAway_3
				AnimationName		= RUElfWar_RUNOT3
				AnimationMode		= ONCE
				Distance		= 40
			End
			Animation			= RunAway_2
				AnimationName		= RUElfWar_RUNOT4
				AnimationMode		= ONCE
				Distance		= 40
			End
			Animation			= RunAway
				AnimationName		= RUElfWar_RUNB
				AnimationMode		= ONCE
				Distance		= 40
			End
			Animation			= finishrun_s
				AnimationName       	= RUElfWar_RUNN
				AnimationMode       	= ONCE
				AnimationBlendTime	= 0
				Distance		= 40
			End
			Animation			= runtrans_sb
				AnimationName       	= RUElfWar_RUNT
				AnimationMode       	= ONCE
				AnimationBlendTime	= 5
				Distance		= 70
			End
			Animation			= runtrans_bs_finish
				AnimationName       	= RUElfWar_RUNC
				AnimationMode       	= ONCE
				AnimationBlendTime	= 0
				Distance		= 70
			End
			Animation			= RunAway_noblend
				AnimationName		= RUElfWar_RUNB
				AnimationMode		= ONCE
				AnimationBlendTime	= 0
				Distance		= 40
			End
			Flags				= RESTART_ANIM_WHEN_COMPLETE MAINTAIN_FRAME_ACROSS_STATES
			BeginScript
				PrevAnim	= CurDrawablePrevAnimation()
				PrevState	= CurDrawablePrevAnimationState()
				CurDrawableShowSubObject("arrow")
				CurDrawableShowSubObject("arrownock")
				
				if PrevState == "Moving_Sword"
				then
					if PrevAnim == "runtrans_bs"
					then
						return "runtrans_bs_finish"
					elseif PrevAnim == "finishrun_b"
					then
						return "RunAway_noblend"
					else
						return "finishrun_s"
					end
				elseif PrevAnim == "finishrun_s" or PrevAnim == "runtrans_bs_finish"
				then
					return "runtrans_sb"
				elseif PrevAnim == "runtrans_sb" or PrevAnim == "run_b" or PrevAnim == "runnoblend_b"
				then
					return "RunAway_noblend"
				else
					Num = GetClientRandomNumberReal(0,7)
					if Num < 1 
					then
						return "RunAway_2"
					elseif Num > 6
					then
						return "RunAway_3"
					else
						return "RunAway"
					end
				end			
			EndScript
		End


		; ------ Attacking ------- ;
		
		AnimationState        			= FIRING_OR_PREATTACK_A WEAPONSET_TOGGLE_1
			StateName			= Ready_Sword
			
			Animation           		= AttackWithSwordA
				AnimationName       	= RUElfWar_ATKSV2
				AnimationMode       	= ONCE
				UseWeaponTiming		= Yes
			End
			Animation           		= AttackWithSwordB
				AnimationName       	= RUElfWar_ATKS
				AnimationMode       	= ONCE
				UseWeaponTiming		= Yes
			End
			Animation           		= AttackWithSwordD
				AnimationName       	= RUElfWar_ATKSV4
				AnimationMode       	= ONCE
				UseWeaponTiming		= Yes
			End
			BeginScript
				CurDrawableHideSubObject("ArrowNock")
				CurDrawableHideSubObject("arrow")
			EndScript
		End
;;---------------------------------------------------------------------------<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
		AnimationState					= PREATTACK_A 
			Animation				= ReadyToDrawn
				AnimationName			= RUElfWar_ATKA1
				AnimationMode			= ONCE
				AnimationBlendTime		= 20				; Must be 0 blend time otherwise the arrow will linger for the duration of the blend!
			End
			
			BeginScript
				CurDrawableShowSubObject("arrow")
				CurDrawableShowSubObject("ArrowNock")
			EndScript
		End

		AnimationState					= FIRING_OR_RELOADING_A
			StateName				= STATE_Firing
			Animation				= OneFrameOfShooting
				AnimationName			= RUElfWar_ATKA2
				AnimationMode			= ONCE
				AnimationBlendTime		= 0
				AnimationSpeedFactorRange	= 1.5 1.5
			End
			Flags					= START_FRAME_FIRST			
			BeginScript
				CurDrawableShowSubObject("arrow")
				CurDrawableShowSubObject("ArrowNock")
			EndScript
		End
;;--------------------------------------------------------------------------------<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
		AnimationState					= PREATTACK_C WEAPONSET_TOGGLE_1
			Animation				= ReadyToDrawn
				AnimationName			= RUElfWar_ATKA1
				AnimationMode			= ONCE
				AnimationBlendTime		= 20				; Must be 0 blend time otherwise the arrow will linger for the duration of the blend!
			End
			
			BeginScript
				CurDrawableShowSubObject("arrow")
				CurDrawableShowSubObject("ArrowNock")
			EndScript
		End

		AnimationState					= FIRING_OR_RELOADING_C WEAPONSET_TOGGLE_1
			StateName				= STATE_Firing
			Animation				= OneFrameOfShooting
				AnimationName			= RUElfWar_ATKA2
				AnimationMode			= ONCE
				AnimationBlendTime		= 0
				AnimationSpeedFactorRange	= 1.5 1.5
			End
			Flags					= START_FRAME_FIRST			
			BeginScript
				CurDrawableShowSubObject("arrow")
				CurDrawableShowSubObject("ArrowNock")
			EndScript
		End

		
;;------------------------- BACKUP --------------------------------------------------------------------


		AnimationState					= MOVING BACKING_UP WEAPONSET_TOGGLE_1
			StateName				= STATE_BackingUp
			Animation				= Sword
				AnimationName			= RUElfWar_BAKS
				AnimationMode			= LOOP
			End
			Animation				= WantSword
				AnimationName			= RUElfWar_BAKB
				AnimationMode			= LOOP
			End
			Flags					= MAINTAIN_FRAME_ACROSS_STATES4
			BeginScript
				CurDrawableHideSubObject("ARROW")
				CurDrawableHideSubObject("ARROWNOCK")
				PrevAnim	= CurDrawablePrevAnimation()
				PrevState	= CurDrawablePrevAnimationState()
				if PrevState == "STATE_BackingUp"
				then
					if PrevAnim == "Bow" or PrevAnim == "WantSword"
					then
						return "WantSword"
					end
				end
				
				return "Sword"			
			EndScript
		End
		AnimationState					= MOVING BACKING_UP
			StateName				= STATE_BackingUp
			Animation				= Bow
				AnimationName			= RUElfWar_BAKB
				AnimationMode			= LOOP
			End
			Animation				= WantBow
				AnimationName			= RUElfWar_BAKS
				AnimationMode			= LOOP
			End
			Flags					= MAINTAIN_FRAME_ACROSS_STATES4
			BeginScript
				CurDrawableShowSubObject("arrow")
				CurDrawableShowSubObject("arrownock")
				PrevAnim	= CurDrawablePrevAnimation()
				PrevState	= CurDrawablePrevAnimationState()
				if PrevState == "STATE_BackingUp"
				then
					if PrevAnim == "WantBow" or PrevAnim == "Sword"
					then
						return "WantBow"
					end
				end
				
				return "Bow"
			EndScript
		End
	
		; ------------ Moving ------------- ;
		
		AnimationState        			= MOVING WEAPONSET_TOGGLE_1
			StateName			= Moving_Sword
			SimilarRestart			= Yes
			Animation           		= run_s
				AnimationName       	= RUElfWar_RUNS
				AnimationMode       	= LOOP
				Distance		= 40
			End
			Animation			= finishrun_b
				AnimationName       	= RUElfWar_RUNB
				AnimationMode       	= ONCE
				AnimationBlendTime	= 0
				Distance		= 40
			End
			Animation			= runtrans_bs
				AnimationName       	= RUElfWar_RUNC
				AnimationMode       	= ONCE
				AnimationBlendTime	= 0
				Distance		= 70
			End
			Animation			= runtrans_sb_finish
				AnimationName       	= RUElfWar_RUNT
				AnimationMode       	= ONCE
				AnimationBlendTime	= 0
				Distance		= 70
			End
			Animation			= runnoblend_s
				AnimationName       	= RUElfWar_RUNS
				AnimationMode       	= LOOP
				AnimationBlendTime	= 0
				Distance		= 40
			End
			Flags = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				PrevAnim	= CurDrawablePrevAnimation()
				PrevState	= CurDrawablePrevAnimationState()
				CurDrawableHideSubObject("ARROW")
				CurDrawableHideSubObject("ARROWNOCK")
				
				if PrevState == "Moving_Bow"
				then
					if PrevAnim == "runtrans_sb"
					then
						return "runtrans_sb_finish"
					elseif PrevAnim == "finishrun_s"
					then
						return "runnoblend_s"
					else
						return "finishrun_b"
					end
				elseif PrevAnim == "finishrun_b" or PrevAnim == "runtrans_sb_finish" or PrevAnim == "WantSword"
				then
					return "runtrans_bs"
				elseif PrevAnim == "runtrans_bs" or PrevAnim == "run_s" or PrevAnim == "runnoblend_s"
				then
					return "runnoblend_s"
				else
					return "run_s"
				end				
			EndScript
		End
		
		AnimationState        			= MOVING
			StateName			= Moving_Bow
			SimilarRestart			= Yes
			Animation           		= run_b
				AnimationName       	= RUElfWar_RUNB
				AnimationMode       	= LOOP
				Distance		= 40
			End
			Animation			= finishrun_s
				AnimationName       	= RUElfWar_RUNS
				AnimationMode       	= ONCE
				AnimationBlendTime	= 0
				Distance		= 40
			End
			Animation			= runtrans_sb
				AnimationName       	= RUElfWar_RUNT
				AnimationMode       	= ONCE
				AnimationBlendTime	= 0
				Distance		= 70
			End
			Animation			= runtrans_bs_finish
				AnimationName       	= RUElfWar_RUNC
				AnimationMode       	= ONCE
				AnimationBlendTime	= 0
				Distance		= 70
			End
			Animation			= runnoblend_b
				AnimationName       	= RUElfWar_RUNB
				AnimationMode       	= LOOP
				AnimationBlendTime	= 0
				Distance		= 40
			End
			Flags = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
			
			BeginScript
				CurDrawableShowSubObject("arrow")
				CurDrawableShowSubObject("arrownock")
				PrevAnim	= CurDrawablePrevAnimation()
				PrevState	= CurDrawablePrevAnimationState()
				
				if PrevState == "Moving_Sword"
				then
					if PrevAnim == "runtrans_bs"
					then
						return "runtrans_bs_finish"
					elseif PrevAnim == "finishrun_b"
					then
						return "runnoblend_b"
					else
						return "finishrun_s"
					end
				elseif PrevAnim == "finishrun_s" or PrevAnim == "runtrans_bs_finish" or PrevAnim == "WantBow"
				then
					return "runtrans_sb"
				elseif PrevAnim == "runtrans_sb" or PrevAnim == "run_b" or PrevAnim == "runnoblend_b"
				then
					return "runnoblend_b"
				else
					return "run_b"
				end				
			EndScript
		End
		
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;		
;		TransitionState       			= TRANS_SwordToBow_Moving
;			Animation           		= DrawBow
;				AnimationName       	= RUElfWar_RUNT
;				AnimationMode       	= ONCE
;			End
;			
;			BeginScript
;				CurDrawableAllowToContinue()
;			EndScript
;		End
;		
;		TransitionState       			= TRANS_BowToSword_Moving
;			Animation           		= DrawSword
;				AnimationName       	= RUElfWar_RUNC
;				AnimationMode       	= ONCE
;			End
;			
;			BeginScript
;				CurDrawableAllowToContinue()
;			EndScript
;		End
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;		
		
;;-----------------------------------------------------------------------------------<<<<<<<<<<<<<<<<<<<<<<<<<<<

		AnimationState					= CONTINUOUS_FIRE_MEAN		;;;;;;;;;HACK TO STOP JITTERS
			Animation				= HangFrameWhileCoasting
				AnimationName			= RUElfWar_ATKA2
				AnimationMode			= MANUAL
				AnimationBlendTime		= 0
			End
			Flags					= START_FRAME_LAST
						
			BeginScript
				CurDrawableShowSubObject("arrow")
				CurDrawableShowSubObject("ARROWNOCK")
				if CurDrawablePrevAnimationState() == "STATE_Firing" then CurDrawableAllowToContinue() end
			EndScript
			;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
			;;;;
			;;;;	VERY IMPORTANT ARCHER INFORMATION
			;;;;	THIS WILL STOP THE JITTERS, AND BEST
			;;;;	YET, IT'S A COMPLETE HACK! Just look above.
			;;;;	We say that if we get into this state
			;;;;	from firing, just continue to fire. DONE.
			;;;;
			;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
		End
		
		AnimationState					= CONTINUOUS_FIRE_SLOW
			StateName				= Ready_Bow
			Animation				= PutAwayArrow
				AnimationName			= RUElfWar_ATKA3
				AnimationMode			= ONCE
			End
						
			BeginScript
				CurDrawableShowSubObject("arrow")
				CurDrawableShowSubObject("ARROWNOCK")
			EndScript
		End


;;;--------------------------------------------------------------------------------------<<<<<<<<<<<<<<<<<<<<<<<	
ModelConditionState = SPECIAL_WEAPON_ONE         
ParticleSysBone = None Attack3 FollowBone:Yes
End
                        
                        AnimationState						= SPECIAL_WEAPON_ONE
			Animation
				AnimationName				= RUElfWar_ATKA1;ATKH2
				AnimationMode				= ONCE
			End
			FrameForPristineBonePositions	= 60
			BeginScript
				CurDrawableShowSubObject("arrow")
				CurDrawableShowSubObject("arrownock")
			EndScript
		End


		AnimationState						= MOVING WEAPONSET_TOGGLE_1
			StateName						= Moving_Bow
			Animation
				AnimationName				= RUElfWar_ATKA1;ATKH2
				AnimationMode				= LOOP
			End
			Flags = RANDOMSTART
			BeginScript
				CurDrawableShowSubObject("arrow")
				CurDrawableShowSubObject("arrownock")
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Moving_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Moving") end
			EndScript
		End

;--- Arrow Wind Special attack

		AnimationState        = UNPACKING PACKING_TYPE_1
			Animation           = OneFrameOfShooting
				AnimationName     = RUElfWar_ATKA1;ATKH1
				AnimationMode     = ONCE
			End
			StateName           = STATE_Bow
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwitchToBow") end
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End
	
	
		AnimationState        = PREPARING PACKING_TYPE_1
			Animation           = OneFrameOfShooting
				AnimationName     = RUElfWar_ATKA1;ATKH2
				AnimationMode     = LOOP
				AnimationSpeedFactorRange = 1.328 1.328
			End
			StateName           = STATE_Bow
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwitchToBow") end
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End
		
		AnimationState        = PACKING PACKING_TYPE_1
			Animation           = OneFrameOfShooting
				AnimationName     = RUElfWar_ATKA1;ATKH3
				AnimationMode     = LOOP
			End
			StateName           = STATE_Bow
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwitchToBow") end
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End	
	
		AnimationState					= EMOTION_UNCONTROLLABLY_AFRAID WEAPONSET_TOGGLE_1
			StateName				= STATE_Emotion_Sword
			Animation				= Sword
				AnimationName			= RUElfWar_FERS
				AnimationMode			= ONCE
			End
			Animation				= Sword2
				AnimationName			= RUElfWar_FERS
				AnimationMode			= ONCE
			End
			Flags					= MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				PrevState = CurDrawablePrevAnimationState()
				CurDrawableHideSubObject("arrow")
				CurDrawableHideSubObject("arrownock")
				
				if PrevState == "STATE_Emotion_Bow"
				then
					CurDrawableAllowToContinue()
					if( CurDrawablePrevAnimFraction() > .89 )
					then
						CurDrawableSetTransitionAnimState("TRANS_BowToSword_Ready")
					end
				end
			EndScript
		End
		AnimationState					= EMOTION_UNCONTROLLABLY_AFRAID 
			StateName				= STATE_Emotion_Bow
			Animation				= Bow
				AnimationName			= RUElfWar_FERB
				AnimationMode			= ONCE
				AnimationBlendTime		= 15
			End	
			Animation				= Bow2
				AnimationName			= RUElfWar_FERB
				AnimationMode			= ONCE
				AnimationBlendTime		= 15
			End
			Flags					= MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				PrevState = CurDrawablePrevAnimationState()
				CurDrawableShowSubObject("arrow")
				CurDrawableShowSubObject("arrownock")
				
				if PrevState == "STATE_Emotion_Sword"
				then
					CurDrawableAllowToContinue()
					if( CurDrawablePrevAnimFraction() > .89 )
					then
						CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Ready")
					end
				end
			EndScript	
		End
		
	
		; -------- Alert ------- ;
		
		AnimationState					= EMOTION_ALERT WEAPONSET_TOGGLE_1
			StateName				= Ready_Sword
			
			Animation				= Alert_1
				AnimationName			= RUElfWar_IDLST1
				AnimationMode			= LOOP
			End
			
			BeginScript
				PrevAnim = CurDrawablePrevAnimation()
				Prev = CurDrawablePrevAnimationState()
				CurDrawableHideSubObject("ArrowNock")
				CurDrawableHideSubObject("arrow")
				if Prev == "Bored_Sword"		then CurDrawableSetTransitionAnimState("TRANS_BR_Sword")			end
				if Prev == "Selected_Sword"		then CurDrawableSetTransitionAnimState("TRANS_SR_Sword")			end
				if Prev == "Selected_Bow" or Prev == "Moving_Bow" or Prev == "Ready_Bow" or Prev == "Bored_Bow" or PrevAnim == "WantSword"
				then 
					CurDrawableSetTransitionAnimState("TRANS_BowToSword_Ready")	
				end
			EndScript
		End
		AnimationState					= ENGAGED WEAPONSET_TOGGLE_1
			StateName				= Ready_Sword
			
			Animation				= Alert_1
				AnimationName			= RUElfWar_IDLST1
				AnimationMode			= LOOP
			End
			
			BeginScript
				PrevAnim = CurDrawablePrevAnimation()
				Prev = CurDrawablePrevAnimationState()
				CurDrawableHideSubObject("ArrowNock")
				CurDrawableHideSubObject("arrow")
				if Prev == "Bored_Sword"		then CurDrawableSetTransitionAnimState("TRANS_BR_Sword")			end
				if Prev == "Selected_Sword"		then CurDrawableSetTransitionAnimState("TRANS_SR_Sword")			end
				if Prev == "Selected_Bow" or Prev == "Moving_Bow" or Prev == "Ready_Bow" or Prev == "Bored_Bow" or PrevAnim == "WantSword"
				then 
					CurDrawableSetTransitionAnimState("TRANS_BowToSword_Ready")	
				end
			EndScript
		End
		AnimationState					= ATTACKING WEAPONSET_TOGGLE_1
			StateName				= Ready_Sword
			
			Animation				= Alert_1
				AnimationName			= RUElfWar_IDLST1
				AnimationMode			= LOOP
			End
			
			BeginScript
				PrevAnim = CurDrawablePrevAnimation()
				Prev = CurDrawablePrevAnimationState()
				CurDrawableHideSubObject("ArrowNock")
				CurDrawableHideSubObject("arrow")
				if Prev == "Bored_Sword"		then CurDrawableSetTransitionAnimState("TRANS_BR_Sword")			end
				if Prev == "Selected_Sword"		then CurDrawableSetTransitionAnimState("TRANS_SR_Sword")			end
				if Prev == "Selected_Bow" or Prev == "Moving_Bow" or Prev == "Ready_Bow" or Prev == "Bored_Bow" or PrevAnim == "WantSword"
				then 
					CurDrawableSetTransitionAnimState("TRANS_BowToSword_Ready")	
				end
			EndScript
		End
		
		AnimationState					= EMOTION_ALERT
			StateName				= Ready_Bow
			
			Animation				= IDLB
				AnimationName			= RUElfWar_IDLB
				AnimationMode			= LOOP
			End
			
			BeginScript
				CurDrawableShowSubObject("arrow")
				CurDrawableShowSubObject("arrownock")
				PrevAnim = CurDrawablePrevAnimation()
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Bored_Bow"		then CurDrawableSetTransitionAnimState("TRANS_BR_Bow")				end
				if Prev == "Selected_Bow"	then CurDrawableSetTransitionAnimState("TRANS_SR_Bow")				end
				if Prev == "Selected_Sword" or Prev == "Moving_Sword" or Prev == "Ready_Sword" or Prev == "Bored_Sword" or PrevAnim == "WantBow"
				then 
					CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Ready")	
				end				
			EndScript
		End 
		AnimationState					= ENGAGED
			StateName				= Ready_Bow
			
			Animation				= IDLB
				AnimationName			= RUElfWar_IDLB
				AnimationMode			= LOOP
			End
			
			BeginScript
				CurDrawableShowSubObject("arrow")
				CurDrawableShowSubObject("arrownock")
				PrevAnim = CurDrawablePrevAnimation()
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Bored_Bow"		then CurDrawableSetTransitionAnimState("TRANS_BR_Bow")				end
				if Prev == "Selected_Bow"	then CurDrawableSetTransitionAnimState("TRANS_SR_Bow")				end
				if Prev == "Selected_Sword" or Prev == "Moving_Sword" or Prev == "Ready_Sword" or Prev == "Bored_Sword" or PrevAnim == "WantBow"
				then 
					CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Ready")	
				end				
			EndScript
		End
		AnimationState					= ATTACKING
			StateName				= Ready_Bow
			
			Animation				= IDLB
				AnimationName			= RUElfWar_IDLB
				AnimationMode			= LOOP
			End
			
			BeginScript
				CurDrawableShowSubObject("arrow")
				CurDrawableShowSubObject("arrownock")
				PrevAnim = CurDrawablePrevAnimation()
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Bored_Bow"		then CurDrawableSetTransitionAnimState("TRANS_BR_Bow")				end
				if Prev == "Selected_Bow"	then CurDrawableSetTransitionAnimState("TRANS_SR_Bow")				end
				if Prev == "Selected_Sword" or Prev == "Moving_Sword" or Prev == "Ready_Sword" or Prev == "Bored_Sword" or PrevAnim == "WantBow"
				then 
					CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Ready")	
				end				
			EndScript
		End
		
		
		
;;------------ EMOTIONS ------------------------------------------------------------------
;;======= AFRAID

		AnimationState					= EMOTION_AFRAID WEAPONSET_TOGGLE_1
			StateName				= STATE_Emotion_Sword
			Animation				= Sword
				AnimationName			= RUElfWar_FERS
				AnimationMode			= ONCE
			End
			Animation				= Sword2
				AnimationName			= RUElfWar_FERS
				AnimationMode			= ONCE
			End
			Flags					= MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				PrevState = CurDrawablePrevAnimationState()
				CurDrawableHideSubObject("arrow")
				CurDrawableHideSubObject("arrownock")
				
				if PrevState == "STATE_Emotion_Bow"
				then
					CurDrawableAllowToContinue()
					if( CurDrawablePrevAnimFraction() > .89 )
					then
						CurDrawableSetTransitionAnimState("TRANS_BowToSword_Ready")
					end
				end
			EndScript
		End
		AnimationState					= EMOTION_AFRAID 
			StateName				= STATE_Emotion_Bow
			Animation				= Bow
				AnimationName			= RUElfWar_FERB
				AnimationMode			= ONCE
				AnimationBlendTime		= 15
			End	
			Animation				= Bow2
				AnimationName			= RUElfWar_FERB
				AnimationMode			= ONCE
				AnimationBlendTime		= 15
			End
			Flags					= MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				PrevState = CurDrawablePrevAnimationState()
				CurDrawableShowSubObject("arrow")
				CurDrawableShowSubObject("arrownock")
				
				if PrevState == "STATE_Emotion_Sword"
				then
					CurDrawableAllowToContinue()
					if( CurDrawablePrevAnimFraction() > .89 )
					then
						CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Ready")
					end
				end
			EndScript	
		End
		
;;====== CELEBRATING		

		AnimationState					= EMOTION_CELEBRATING WEAPONSET_TOGGLE_1
			StateName				= STATE_Emotion_Sword
			Animation				= Sword
				AnimationName			= RUElfWar_CHRST2
				AnimationMode			= ONCE
			End
			Animation				= Sword2
				AnimationName			= RUElfWar_CHRST2
				AnimationMode			= ONCE
			End
			Flags					= MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				PrevState = CurDrawablePrevAnimationState()
				CurDrawableHideSubObject("arrow")
				CurDrawableHideSubObject("arrownock")
				
				if PrevState == "STATE_Emotion_Bow"
				then
					CurDrawableAllowToContinue()
					if( CurDrawablePrevAnimFraction() > .89 )
					then
						CurDrawableSetTransitionAnimState("TRANS_BowToSword_Ready")
					end
				elseif PrevState == "STATE_Emotion_Sword"
				then
					CurDrawableAllowToContinue()
				elseif PrevState == "Selected_Sword"
				then
					CurDrawableSetTransitionAnimState("TRANS_SR_Sword")
				elseif PrevState == "Bored_Sword"
				then
					CurDrawableSetTransitionAnimState("TRANS_BR_Sword")
				end
			EndScript
		End
		AnimationState					= EMOTION_CELEBRATING
			StateName				= STATE_Emotion_Bow
			Animation				= Bow
				AnimationName			= RUElfWar_CHRB
				AnimationMode			= ONCE
			End
			Animation				= Bow2
				AnimationName			= RUElfWar_CHRB
				AnimationMode			= ONCE
			End
			Flags					= MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				PrevState = CurDrawablePrevAnimationState()
				CurDrawableShowSubObject("arrow")
				CurDrawableShowSubObject("arrownock")
				
				if PrevState == "STATE_Emotion_Sword"
				then
					CurDrawableAllowToContinue()
					if( CurDrawablePrevAnimFraction() > .89 )
					then
						CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Ready")
					end
				elseif PrevState == "STATE_Emotion_Bow"
				then
					CurDrawableAllowToContinue()
				elseif PrevState == "Selected_Bow"
				then
					CurDrawableSetTransitionAnimState("TRANS_SR_Bow")
				elseif PrevState == "Bored_Bow"
				then
					CurDrawableSetTransitionAnimState("TRANS_BR_Bow")
				end
			EndScript	
		End

;;====== TAUNTING

		AnimationState					= EMOTION_TAUNTING WEAPONSET_TOGGLE_1
			StateName				= STATE_Emotion_Sword
			Animation				= Sword
				AnimationName			= RUElfWar_TNTSV1
				AnimationMode			= ONCE
			End
			Animation				= Sword2
				AnimationName			= RUElfWar_TNTSV1
				AnimationMode			= ONCE
			End
			Flags					= RESTART_ANIM_WHEN_COMPLETE ;MAINTAIN_FRAME_ACROSS_STATES
			BeginScript
				PrevState = CurDrawablePrevAnimationState()
				CurDrawableHideSubObject("arrow")
				CurDrawableHideSubObject("arrownock")
				
				if PrevState == "STATE_Emotion_Bow"
				then
					CurDrawableAllowToContinue()
					if( CurDrawablePrevAnimFraction() > .89 )
					then
						CurDrawableSetTransitionAnimState("TRANS_BowToSword_Ready")
					end
				elseif PrevState == "STATE_Emotion_Sword"
					then
						CurDrawableAllowToContinue()
				elseif PrevState == "Selected_Sword"
				then
					CurDrawableSetTransitionAnimState("TRANS_SR_Sword")
				elseif PrevState == "Bored_Sword"
				then
					CurDrawableSetTransitionAnimState("TRANS_BR_Sword")
				end
			EndScript
		End
		AnimationState					= EMOTION_TAUNTING
			StateName				= STATE_Emotion_Bow
			Animation				= Bow1
				AnimationName			= RUElfWar_TNTB
				AnimationMode			= ONCE
			End
			Animation				= Bow2
				AnimationName			= RUElfWar_TNTB	 ; RUElfWar_TNTBX anim does not exist
				AnimationMode			= ONCE
			End
			Flags					= RESTART_ANIM_WHEN_COMPLETE ;MAINTAIN_FRAME_ACROSS_STATES
			BeginScript
				PrevState = CurDrawablePrevAnimationState()
				CurDrawableShowSubObject("arrow")
				CurDrawableShowSubObject("arrownock")
				
				if PrevState == "STATE_Emotion_Sword"
				then
					CurDrawableAllowToContinue()
					if( CurDrawablePrevAnimFraction() > .89 )
					then
						CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Ready")
					end
				elseif PrevState == "STATE_Emotion_Bow"
				then
					CurDrawableAllowToContinue()
				elseif PrevState == "Selected_Bow"
				then
					CurDrawableSetTransitionAnimState("TRANS_SR_Bow")
				elseif PrevState == "Bored_Bow"
				then
					CurDrawableSetTransitionAnimState("TRANS_BR_Bow")
				end
			EndScript
		End

;;====== POINTING

		AnimationState					= EMOTION_POINTING WEAPONSET_TOGGLE_1
			StateName				= STATE_Emotion_Sword
			Animation				= Sword
				AnimationName			= RUElfWar_PNTB
				AnimationMode			= ONCE
			End
			Animation				= Sword2
				AnimationName			= RUElfWar_PNTB
				AnimationMode			= ONCE
			End
			Flags					= MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				PrevState = CurDrawablePrevAnimationState()
				CurDrawableHideSubObject("arrow")
				CurDrawableHideSubObject("arrownock")
				
				if PrevState == "STATE_Emotion_Bow"
				then
					CurDrawableAllowToContinue()
					if( CurDrawablePrevAnimFraction() > .89 )
					then
						CurDrawableSetTransitionAnimState("TRANS_BowToSword_Ready")
					end
				elseif PrevState == "STATE_Emotion_Sword"
				then
					CurDrawableAllowToContinue()
				elseif PrevState == "Selected_Sword"
				then
					CurDrawableSetTransitionAnimState("TRANS_SR_Sword")
				elseif PrevState == "Bored_Sword"
				then
					CurDrawableSetTransitionAnimState("TRANS_BR_Sword")
				end
			EndScript
		End
		AnimationState					= EMOTION_POINTING
			StateName				= STATE_Emotion_Bow
			Animation				= Bow
				AnimationName			= RUElfWar_PNTA
				AnimationMode			= ONCE
			End
			Animation				= Bow2
				AnimationName			= RUElfWar_PNTA
				AnimationMode			= ONCE
			End
			Flags					= MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				PrevState = CurDrawablePrevAnimationState()
				CurDrawableShowSubObject("arrow")
				CurDrawableShowSubObject("arrownock")
				
				if PrevState == "STATE_Emotion_Sword"
				then
					CurDrawableAllowToContinue()
					if( CurDrawablePrevAnimFraction() > .89 )
					then
						CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Ready")
					end
				elseif PrevState == "STATE_Emotion_Bow"
				then
					CurDrawableAllowToContinue()
				elseif PrevState == "Selected_Bow"
				then
					CurDrawableSetTransitionAnimState("TRANS_SR_Bow")
				elseif PrevState == "Bored_Bow"
				then
					CurDrawableSetTransitionAnimState("TRANS_BR_Bow")
				end
			EndScript
		End
		
		; ------ Selected ------ ;

		AnimationState				=	SELECTED WEAPONSET_TOGGLE_1
			StateName			=	Selected_Sword
			
			Animation			=	ATNA
				AnimationName		=	RUElfWar_ATNS
				AnimationMode		=	LOOP
			End
			
			BeginScript
				CurDrawableHideSubObject("ARROW")
				CurDrawableHideSubObject("ARROWNOCK")
				
				PrevAnim = CurDrawablePrevAnimation()
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Emotion_Bow" or Prev == "STATE_Emotion_Sword" then CurDrawableAllowToContinue() end
				if Prev == "Bored_Sword"		then CurDrawableSetTransitionAnimState("TRANS_BS_Sword")		end
				if Prev == "Ready_Sword"		then CurDrawableSetTransitionAnimState("TRANS_RS_Sword")		end
				if Prev == "Selected_Bow" or Prev == "Moving_Bow" or Prev == "Ready_Bow" or Prev == "Bored_Bow" or PrevAnim == "WantSword"
				then
					CurDrawableSetTransitionAnimState("TRANS_BowToSword_Selected")	
				end
				
			EndScript
		End

		AnimationState				=	SELECTED 
			StateName           		=	Selected_Bow
			
			Animation			=	ATNE
				AnimationName		=	RUElfWar_ATNE
				AnimationMode		=	LOOP
			End
			
			BeginScript
				CurDrawableShowSubObject("arrow")
				CurDrawableShowSubObject("arrownock")
				PrevAnim = CurDrawablePrevAnimation()
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Emotion_Bow" or Prev == "STATE_Emotion_Sword" then CurDrawableAllowToContinue() end
				if Prev == "Bored_Bow" then CurDrawableSetTransitionAnimState("TRANS_BS_Bow")				end
				if Prev == "Ready_Bow" then CurDrawableSetTransitionAnimState("TRANS_RS_Bow")				end
				if Prev == "Selected_Sword" or Prev == "Moving_Sword" or Prev == "Ready_Sword" or Prev == "Bored_Sword" or PrevAnim == "WantBow"
				then 
					CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Selected")	
				end	
			EndScript
		End
		
		
		; --------- Hit Reactions ---------- ;
		
		AnimationState						= HIT_REACTION HIT_LEVEL_1 WEAPONSET_TOGGLE_1
			StateName					= Bored_Sword
			Animation					= Hit_Level_1_a
				AnimationName				= RUElfWar_HITE
				AnimationMode				= ONCE
			End
		End

		AnimationState 						= HIT_REACTION HIT_LEVEL_1
			StateName					= Bored_Bow
			Animation 					= Hit_Level_1_a
				AnimationName				= RUElfWar_HITB
				AnimationMode 				= ONCE
				AnimationSpeedFactorRange		= .9 .9
			End
		End
		
		
		; ------- Bored -------- ;
		
		AnimationState				= WEAPONSET_TOGGLE_1
			StateName			= Bored_Sword
			
			Animation           		= Idle_Sword1
				AnimationName       	= RUElfWar_IDLG
				AnimationMode       	= ONCE
			End
			Animation           		= Idle_Sword2
				AnimationName       	= RUElfWar_IDLCT1
				AnimationMode       	= ONCE
			End
			Animation           		= Idle_Sword3
				AnimationName       	= RUElfWar_IDLCT3
				AnimationMode       	= ONCE
			End
			Animation			= IdleNoFidget
				AnimationName		= RUElfWar_IDLF
				AnimationMode		= ONCE
				AnimationPriority	= 20
			End
			Animation			= IdleNoFidget2
				AnimationName		= RUElfWar_IDLF
				AnimationMode		= ONCE
				AnimationPriority	= 0
			End
			Flags				= RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				CurDrawableHideSubObject("ARROW")
				CurDrawableHideSubObject("ARROWNOCK")				

				PrevAnim = CurDrawablePrevAnimation()
				Prev = CurDrawablePrevAnimationState()
				if Prev == "TRANS_SB_Sword" or Prev == "TRANS_RB_Sword" then return "IdleNoFidget" end
				if Prev == "Selected_Sword"		then CurDrawableSetTransitionAnimState("TRANS_SB_Sword")		end
				if Prev == "Ready_Sword"		then CurDrawableSetTransitionAnimState("TRANS_RB_Sword")		end
				if Prev == "Selected_Bow" or Prev == "Moving_Bow" or Prev == "Ready_Bow" or Prev == "Bored_Bow" or PrevAnim == "WantSword"
				then 
					CurDrawableSetTransitionAnimState("TRANS_BowToSword_Selected")	
				end
			EndScript
		End
		
		IdleAnimationState
			StateName				= Bored_Bow
			
			Animation				= IdleBowB
				AnimationName			= RUElfWar_IDLDX1
				AnimationMode			= ONCE
			End
			Animation				= IdleBowD
				AnimationName			= RUElfWar_IDLD
				AnimationMode			= ONCE
			End
			Animation				= IdleNoFidget
				AnimationName			= RUElfWar_IDLE
				AnimationMode			= ONCE
				AnimationPriority		= 20
			End
			Animation				= IdleNoFidget2
				AnimationName			= RUElfWar_IDLE
				AnimationMode			= ONCE
				AnimationPriority		= 10
			End
			Flags					= RESTART_ANIM_WHEN_COMPLETE
			BeginScript	
				CurDrawableShowSubObject("arrow")
				CurDrawableShowSubObject("arrownock")			
				PrevAnim = CurDrawablePrevAnimation()
				Prev = CurDrawablePrevAnimationState()
				if Prev == "TRANS_SB_Bow" or Prev == "TRANS_RB_Bow" then return "IdleNoFidget" end
				if Prev == "Selected_Bow"		then CurDrawableSetTransitionAnimState("TRANS_SB_Bow")		end
				if Prev == "Ready_Bow"			then CurDrawableSetTransitionAnimState("TRANS_RB_Bow")		end
				if Prev == "Selected_Sword" or Prev == "Moving_Sword" or Prev == "Ready_Sword" or Prev == "Bored_Sword" or PrevAnim == "WantBow"
				then 
					CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Selected")	
				end	
			EndScript
		End

		
		;----------------- Bow Transitions -------------------------;

		TransitionState       			= TRANS_BS_Bow
			Animation           		= ATND
				AnimationName     	= RUElfWar_ATND
				AnimationMode     	= ONCE
				AnimationBlendTime	= 10
			End
		End
		
		TransitionState       			= TRANS_SR_Bow
			Animation           		= ATNE
				AnimationName     	= RUElfWar_ATNF
				AnimationMode     	= ONCE
			End
		End
		
		TransitionState       			= TRANS_SB_Bow
			Animation           		= ATND
				AnimationName     	= RUElfWar_ATND
				AnimationMode     	= ONCE_BACKWARDS
			End
			Flags				= START_FRAME_LAST
		End
		
		TransitionState       			= TRANS_RS_Bow
			Animation           		= ATNF
				AnimationName     	= RUElfWar_ATNF
				AnimationMode     	= ONCE_BACKWARDS
			End
			Flags				= START_FRAME_LAST
		End
		
		TransitionState       			= TRANS_BR_Bow
			Animation           		= IDLB
				AnimationName     	= RUElfWar_IDLB
				AnimationMode     	= ONCE
				AnimationBlendTime	= 20
			End
		End
		
		TransitionState       			= TRANS_RB_Bow
			Animation           		= IDLD
				AnimationName     	= RUElfWar_IDLD
				AnimationMode     	= ONCE
				AnimationBlendTime	= 20
			End
		End
		
		;----------------- Sword Transitions -------------------------;
		
		TransitionState       			= TRANS_BS_Sword
			Animation           		= ATNA
				AnimationName     	= RUElfWar_ATNA
				AnimationMode     	= ONCE
			End
			Animation           		= ATNAX1
				AnimationName     	= RUElfWar_ATNX1
				AnimationMode     	= ONCE
			End
		End
		
		TransitionState       			= TRANS_SR_Sword
			Animation           		= ATNC
				AnimationName     	= RUElfWar_ATNC
				AnimationMode     	= ONCE
			End
		End
		
		TransitionState       			= TRANS_SB_Sword
			Animation           		= ATNA
				AnimationName     	= RUElfWar_ATNA
				AnimationMode     	= ONCE_BACKWARDS
			End
			Flags				= START_FRAME_LAST
		End
		
		TransitionState       			= TRANS_RS_Sword
			Animation           		= ATNC
				AnimationName     	= RUElfWar_ATNC
				AnimationMode     	= ONCE_BACKWARDS
			End
			Flags				= START_FRAME_LAST
		End
		
		TransitionState       			= TRANS_BR_Sword
			Animation           		= ATNS
				AnimationName     	= RUElfWar_ATNS
				AnimationMode     	= ONCE
				AnimationBlendTime	= 20
			End
		End
		
		TransitionState       			= TRANS_RB_Sword
			Animation           		= IDLG
				AnimationName     	= RUElfWar_IDLG
				AnimationMode     	= ONCE
				AnimationBlendTime	= 20
			End
		End
		

		;-------------- Weapon Change Transitions --------------------------;		

		TransitionState       			= TRANS_BowToSword_Ready
			Animation           		= DrawSwords
				AnimationName       	= RUElfWar_STHA
				AnimationMode       	= ONCE
			End
		End

		TransitionState       			= TRANS_SwordToBow_Ready
			Animation           		= DrawBow
				AnimationName       	= RUElfWar_STHB
				AnimationMode       	= ONCE
			End
		End
		
		TransitionState       			= TRANS_BowToSword_Selected
			Animation           		= DrawSwords
				AnimationName       	= RUElfWar_STHC
				AnimationMode       	= ONCE
			End
		End

		TransitionState       			= TRANS_SwordToBow_Selected
			Animation           		= DrawBow
				AnimationName       	= RUElfWar_STHD
				AnimationMode       	= ONCE
			End
		End
	End

End

	LocomotorSet
		Locomotor = IsengardLurtzLocomotor
		Condition = SET_NORMAL 
		Speed     = 130
	End

ReplaceModule ModuleTag_RespawnBody
	Body = RespawnBody ModuleTag_RespawnBody1
		CheerRadius 			= EMOTION_CHEER_RADIUS
		MaxHealth        		= 3000 ;BALANCE Theoden Health
		PermanentlyKilledByFilter	= NONE		;Who kills me permanently?
   		DodgePercent      		= HERO_DODGE_PERCENT
	End
End

	WeaponSet
		Conditions 	= None								; PLAYER_UPGRADE
		Weapon 		= PRIMARY MirkwoodArcherSilverthornBow
		Weapon 		= TERTIARY MirkwoodArcherSilverthornBowBombard
		AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
		AutoChooseSources = TERTIARY FROM_PLAYER FROM_SCRIPT				; Not AI.
	End
	WeaponSet
		Conditions 	= WEAPONSET_TOGGLE_1; CONTESTING_BUILDING
		Weapon 		= PRIMARY ArcherSword
		Weapon 		= TERTIARY  MirkwoodArcherSilverthornBowBombard
		AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End

	ArmorSet
		Conditions      = None
		Armor           = WarriorArmor
		DamageFX        = NormalDamageFX
	End

	CommandSet			= NewNoldorWarriorCommandSet

;VoiceAmbushed		= ElvenWarriorVoiceAmbushed
	VoiceAttack		= ElvenWarriorVoiceAttack
	VoiceAttackAir		= ElvenWarriorVoiceAttack
	VoiceAttackCharge	= ElvenWarriorVoiceAttackCharge
	VoiceAttackStructure	= ElvenWarriorVoiceAttack		; ElvenWarriorVoiceAttackBuilding not recorded
	VoiceAttackMachine	= ElvenWarriorVoiceAttack		; ElvenWarriorVoiceAttackBuilding not recorded
	VoiceCreated		= ElvenWarriorVoiceSalute
	VoiceFullyCreated  	= ElvenWarriorVoiceSalute
	VoiceMove		= ElvenWarriorVoiceMove
	VoiceMoveToCamp		= ElvenWarriorVoiceMoveCamp
	VoiceMoveWhileAttacking	= ElvenWarriorVoiceDisengage
	VoicePriority		= 41
	VoiceRetreatToCastle	= ElvenWarriorVoiceRetreat
	VoiceSelect		= ElvenWarriorVoiceSelectMS
	VoiceSelectBattle 	= ElvenWarriorVoiceSelectBattle
	VoiceGuard		= ElvenWarriorVoiceMove
	

	UnitSpecificSounds
		VoiceGarrison			=	ElvenWarriorVoiceGarrison    
		VoicePrimaryWeaponMode		=	ElvenWarriorVoiceModeBow
		VoiceSecondaryWeaponMode	=	ElvenWarriorVoiceModeSword
	End

;----------------------------------------

      AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced0
		TriggeredBy				= Upgrade_TechnologyGondorForgedBlades
		AttributeModifier		= MoreAttack1
	End
      End
AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced1
		TriggeredBy				= Upgrade_TechnologyElvenForgedBlades
		AttributeModifier		= MoreAttack2
	End
      End
AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced2
		TriggeredBy				= Upgrade_TechnologyDwarvenForgedBlades
		AttributeModifier		= MoreAttack3
	End
      End

AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced01
		TriggeredBy				= Upgrade_TechnologyIsengardForgedBlades
		AttributeModifier		= MoreAttack4
	End
      End
AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced11
		TriggeredBy				= Upgrade_TechnologyMordorForgedBlades
		AttributeModifier		= MoreAttack5
	End
      End
AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced21
		TriggeredBy				= Upgrade_TechnologyWildForgedBlades
		AttributeModifier		= MoreAttack6
	End
      End
AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced111
		TriggeredBy				= Upgrade_TechnologyElvenSilverthornArrows
		AttributeModifier		= MoreAttack7
	End
      End
AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced211
		TriggeredBy				= Upgrade_TechnologyAngmarDarkIronBlades
		AttributeModifier		= MoreAttack8
	End
      End

;--------------------------------------------------------

AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced0b
		TriggeredBy				= Upgrade_TechnologyGondorHeavyArmor
		AttributeModifier		= MoreDefence1
	End
      End
AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced1b
		TriggeredBy				= Upgrade_TechnologyElvenHeavyArmor
		AttributeModifier		=MoreDefence2
	End
      End
AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced2b
		TriggeredBy				= Upgrade_TechnologyDwarvenMithrilMail
		AttributeModifier		= MoreDefence3
	End
      End

AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced01b
		TriggeredBy				= Upgrade_TechnologyIsengardHeavyArmor
		AttributeModifier		= MoreDefence4
	End
      End
AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced11b
		TriggeredBy				= Upgrade_TechnologyMordorHeavyArmor
		AttributeModifier		= MoreDefence5
	End
      End
AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced21b
		TriggeredBy				= Upgrade_TechnologyWildHeavyArmor
		AttributeModifier		= MoreDefence6
	End
      End
AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced111b
		TriggeredBy				= Upgrade_TechnologyAngmarIceArrows
		AttributeModifier		= MoreDefence7
	End
      End
AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced211b
		TriggeredBy				= Upgrade_TechnologyAngmarDarkIronArmor
		AttributeModifier		= MoreDefence8
	End
      End

;-----------------------------------------------------------------------------------

AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced0c
		TriggeredBy				= Upgrade_TechnologyElvenBasicTraining
		AttributeModifier		= MoreLife1
	End
      End
AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced1c
		TriggeredBy				= Upgrade_TechnologyDwarvenFlamingShot
		AttributeModifier		=MoreLife2
	End
      End
AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced2c
		TriggeredBy				= Upgrade_TechnologyDwarvenSiegeHammer
		AttributeModifier		= MoreLife3
	End
      End

AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced01c
		TriggeredBy				= Upgrade_TechnologyIsengardFireArrows
		AttributeModifier		= MoreLife4
	End
      End
AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced11c
		TriggeredBy				= Upgrade_TechnologyMordorFireArrows
		AttributeModifier		= MoreLife5
	End
      End
AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced21c
		TriggeredBy				= Upgrade_TechnologyWildFireArrows
		AttributeModifier		= MoreLife6
	End
      End
AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced111c
		TriggeredBy				= Upgrade_TechnologyAngmarIceShot
		AttributeModifier		= MoreLife7
	End
      End
AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced211c
		TriggeredBy				= Upgrade_TechnologyIsengardBasicTraining
		AttributeModifier		= MoreLife8
	End
      End

;-------------------------------------------------------------------
AddModule
Behavior = UnpauseSpecialPowerUpgrade ModuleTag_CreateAHeroSpawnTornadoEnabler_Level3
	SpecialPowerTemplate	= SpecialPowerCreateAHeroSpawnTornado_Level3
	TriggeredBy				= Upgrade_CreateAHeroSpawnTornado_Level3
End
End
AddModule
Behavior = OCLSpecialPower	ModuleTag_OCLSpawnTornado_Level3
	SpecialPowerTemplate	= SpecialPowerCreateAHeroSpawnTornado_Level3
	OCL						= SUPERWEAPON_SpawnWhirlwind0
	CreateLocation			= CREATE_AT_LOCATION
	StartsPaused			= Yes
End
End

AddModule
Behavior = UnpauseSpecialPowerUpgrade ModuleTag_GlorfindelBladeOfPurityEnabler
		SpecialPowerTemplate		= SpecialAbilityGlorfindelBladeOfPurity
		TriggeredBy			= Upgrade_TechnologyGondorBasicTraining
	End
End
AddModule
  	Behavior = SpecialPowerModule ModuleTag_GlorfindelBladeOfPurityStarter
		SpecialPowerTemplate		= SpecialAbilityGlorfindelBladeOfPurity
		StartsPaused			= Yes
		SetModelCondition		= ModelConditionState:USER_1
		SetModelConditionTime		= 2.0
	End
End
AddModule
	Behavior = SpecialAbilityUpdate ModuleTag_GlorfindelBladeOfPurityUpdate
		SpecialPowerTemplate		= SpecialAbilityGlorfindelBladeOfPurity
		TriggerAttributeModifier	= ArcherModifier
		AttributeModifierDuration	= 30000
;		TriggerSound			= WeaponSongSound
	End
End
AddModule
	Behavior = AutoAbilityBehavior ModuleTag_BladeOfPurityAutoAbility
		SpecialAbility			= SpecialAbilityGlorfindelBladeOfPurity
		MaxScanRange			= 200
		Query				= 1 ALL ENEMIES
	End
End

AddModule
Behavior = UnpauseSpecialPowerUpgrade ModuleTag_CreateAHeroHealingEnabler_Level2
	SpecialPowerTemplate		= SpecialAbilityCreateAHeroHealing_Level2
	TriggeredBy					= Upgrade_TechnologyWildBasicTraining
End
End
AddModule
Behavior = PlayerHealSpecialPower ModuleTag_CreateAHeroHealingPower_Level2
	SpecialPowerTemplate		= SpecialAbilityCreateAHeroHealing_Level2
	UpdateModuleStartsAttack	= Yes
	StartsPaused				= Yes
	HealAffects					= INFANTRY CAVALRY MONSTER
	HealAmount					= CREATE_A_HERO_HEALING_AMOUNT_L2	// percent of max health
	HealRadius					= CREATE_A_HERO_HEALING_RADIUS_L2
	HealFX						= FX_SpellHealUnitHealBuff
End
End
AddModule
Behavior = SpecialAbilityUpdate ModuleTag_CreateAHeroHealingUpdate_Level2
	SpecialPowerTemplate    = SpecialAbilityCreateAHeroHealing_Level2
	UnpackTime             = 1  ;// (changing this will scale anim speed)
	PreparationTime        = 1 ;// time to complete hack once prepared (changing this will scale anim speed)
	PackTime               = 2000  ;// (changing this will scale anim speed)
	UnpackingVariation	   = 5
End
End
;AddModule
;Behavior = UnpauseSpecialPowerUpgrade ModuleTag_CrippleEnabler1
;		SpecialPowerTemplate	= SpecialAbilityLurtzCripple
;		TriggeredBy				= Upgrade_LurtzCrippleTrigger
;	End 
;End
;AddModule	
	;Behavior = SpecialPowerModule ModuleTag_CrippleStarter1                    
	;	SpecialPowerTemplate		= SpecialAbilityLurtzCripple
	;	UpdateModuleStartsAttack	= Yes
	;	StartsPaused				= Yes
	;	InitiateSound				= LurtzVoiceAttackCripplingStrike
	;End
;End
;AddModule
	;Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_CrippleUpdate1   
	;	SpecialPowerTemplate    = SpecialAbilityLurtzCripple
	;	SkipContinue			= Yes
;
	;	UnpackTime				= 1100	; Pull out arrow
	;	PreparationTime			= 1		; Quick shot
	;	PersistentPrepTime		= 500	; looping the quick shot
	;	PackTime				= 500	; back to idle
	;	MustFinishAbility		= Yes
	;	
	;	AwardXPForTriggering	= 0		
	;	StartAbilityRange		= LURTZ_CRIPPLE_RANGE_ABILTY_START
	;	
	;	SpecialWeapon			= IsenguardLurtzBowStun
	;	WhichSpecialWeapon		= 1
	;	RejectedConditions		= WEAPON_TOGGLE
;End
;End

;AddModule
;Behavior = UnpauseSpecialPowerUpgrade ModuleTag_ArrowWindEnabler
;		SpecialPowerTemplate = SpecialAbilityArrowStorm
;		TriggeredBy = Upgrade_LurtzCrippleTrigger	
;	End
;End
;AddModule
;	Behavior = SpecialPowerModule ModuleTag_ArrowWindStarter                      
;		SpecialPowerTemplate		= SpecialAbilityArrowStorm
;		UpdateModuleStartsAttack	= Yes
;		StartsPaused			= Yes
;		InitiateSound			= LegolasVoiceModeArrowWind		;this plays when he targets, not when he fires
;	End
;End
;AddModule
;	Behavior = ArrowStormUpdate ModuleTag_ArrowWindUpdate                
	;	SpecialPowerTemplate    = SpecialAbilityArrowStorm
	;	StartAbilityRange       = 320.0
	;	
	;	UnpackTime              = 1000	; Pull out arrow
	;;	PreparationTime         = 200	; Quick shot
	;	PersistentPrepTime      = 600	; looping the quick shot
	;	PackTime                = 1200	; back to idle
	;	UnpackingVariation		= 1		; Use custom variation to not interfere with Archer Training ability.
	;	ParalyzeDurationWhenCompleted = 600	;Once the unit SUCCESSFULLY COMPLETES an ability, paralyze unit briefly to deal with animation transitions.
	;	ParalyzeDurationWhenAborted = 800	;If the unit ABORTS the ability, paralyze the unit briefly to deal with animation transitions.
;
	;	ApproachRequiresLOS     = Yes ; required so that it doesn't shoot through walls
;
	;	AwardXPForTriggering    = 0
;
	;	;Specific to ArrowStorm
	;	WeaponTemplate  = LegolasBowArrowStorm
	;	TargetRadius    = 120	;CHANGING THIS??? Change RadiusCursorRadius to match this value in the appropriate SpecialPower.ini template.
	;	ShotsPerTarget  = 5
	;	ShotsPerBurst   = 25
	;	MaxShots        = 500  ; can end sooner if no targets
  	;	CanShootEmptyGround = Yes ; ...unless this is set
	;End
;End

ReplaceModule ModuleTag_Pillage
 	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_Pillage1
		SpecialPowerTemplate	= SpecialAbilityFakeLeadership2
		TriggeredBy				= Upgrade_LurtzCrippleTrigger	
	End
End
ReplaceModule ModuleTag_PillageUpdate
	Behavior = SpecialPowerModule ModuleTag_PillageUpdate1
		SpecialPowerTemplate		= SpecialAbilityFakeLeadership2
		UpdateModuleStartsAttack	= No
		StartsPaused				= Yes
	End
End
ReplaceModule ModuleTag_PillageAura
	Behavior = AttributeModifierAuraUpdate ModuleTag_PillageAura1
		StartsActive	= No										; If no, requires upgrade to turn on.
		BonusName		= LurtzPassiveOutlawLeadership
		TriggeredBy		= Upgrade_LurtzCrippleTrigger	
		RefreshDelay	= 2000
		Range			= 200
		AllowSelf		= Yes
		ObjectFilter	= ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION -HERO -DOZER
	End	
End

AddModule
Behavior = UnpauseSpecialPowerUpgrade ModuleTag_HaldirGoldenArrowUnpause
		SpecialPowerTemplate				= SpecialAbilityHaldirGoldenArrow
		TriggeredBy							= Upgrade_TechnologyAngmarBasicTraining
	End
End
AddModule
	Behavior = SpecialPowerModule ModuleTag_HaldirGoldenArrowSpecialPower
		SpecialPowerTemplate				= SpecialAbilityHaldirGoldenArrow
		StartsPaused						= Yes
		UpdateModuleStartsAttack			= Yes
		InitiateSound						= HaldirVoiceGoldenArrow
	End
End
AddModule
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_HaldirGoldenArrowWeaponFireUpdate
		SpecialPowerTemplate				= SpecialAbilityHaldirGoldenArrow
		WhichSpecialWeapon					= 1
		UnpackTime							= 600
		PreparationTime						= 1
		PackTime							= 2000
		StartAbilityRange					= HALDIR_BOW_RANGE
		MustFinishAbility					= Yes
		SpecialWeapon						= HaldirGoldenArrow
	End
End
AddModule
	Behavior = AutoAbilityBehavior ModuleTag_GoldenArrowAutoAbility
		SpecialAbility						= SpecialAbilityHaldirGoldenArrow
		MaxScanRange						= HALDIR_BOW_RANGE
		Query								= 1 ANY ENEMIES +HERO +MONSTER +STRUCTURE
		Query								= 1 ANY ENEMIES +INFANTRY +CAVALRY +STRUCTURE
	End
End
End

Object LegolasBowArrowStormProjectile
ReplaceModule ModuleTag_Draw2
    Draw = W3DStreakDraw ModuleTag_Draw21
	    Length		= 50
	    Width		= 1
	    NumSegments	= 6				; number of segements in the streak, increase for smoother line
	    Color		= R:67 G:67 B:167
	    Texture		= EXLight01.W3D
    End
End
End

Object HaldirGoldenArrowProjectile
ReplaceModule ModuleTag_Draw
Draw = W3DScriptedModelDraw ModuleTag_Draw1
		DefaultModelConditionState     
			Model = EXGold_AROW
			ParticleSysBone = MESH01 GoldArrowTrail1 Followbone:YES
		End
    End
End
ReplaceModule ModuleTag_Draw2
    Draw = W3DStreakDraw ModuleTag_Draw21
	    Length		= 100
	    Width		= 2
	    NumSegments	= 6				; number of segements in the streak, increase for smoother line
	    Color		= R:89 G:168 B:255
	    Texture		= EXLightStreaks2.tga
    End
End
AddModule
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_DIELIKETHIS2
    StartsActive = Yes
    DeathWeapon = GandalfWordOfPower1
  End
  End
ReplaceModule ModuleTag_GoldenArrow
Behavior = CreateObjectDie ModuleTag_GoldenArrow1
		DeathTypes = ALL
		CreationList = OCL_SuperArrowVolley
	End
End
ReplaceModule ModuleTag_07
	Behavior = FXListDie ModuleTag_071
		DeathTypes = ALL -CRUSHED -SPLATTED
;		DeathFX = FX_ArrowAttack 
	End
End
End

Object SpellBookArrowVolley
ReplaceModule ModuleTag_01
Draw = W3DScriptedModelDraw ModuleTag_011
 //	 StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD
    	DefaultModelConditionState
	      	Model = EXArrowVolleyL
	      	ParticleSysBone Flame ArrowVolleyTrail FollowBone:Yes
			ParticleSysBone Flame ArrowVolleyTrail21 FollowBone:Yes
			ParticleSysBone Flame ArrowVolleyFire1 FollowBone:Yes
			ParticleSysBone None ArrowStormDust1
			ParticleSysBone None ArrowStormEmbers1
			ParticleSysBone None ArrowStormShock1
    	End
    	IdleAnimationState
			Animation = SPAWN
				AnimationName     = EXArrowVolleyL.EXArrowVolleyL
		        AnimationMode     = ONCE
			End
		End    
  	End
End
End

FXList FX_GandalfPreAttackBlast
  ParticleSystem
    Name = GandalfBlastInitialWave
    Offset = X:0.0 Y:0.0 Z:20.0
  End
  ParticleSystem
    Name = GandalfBlastInitialCenter
    Offset = X:0.0 Y:0.0 Z:20.0
  End
  ParticleSystem
    Name = GandalfBlastInitialVortex
    Offset = X:0.0 Y:0.0 Z:20.0
  End
  ParticleSystem
    Name = GandalfBlastRipple
    Offset = X:0.0 Y:0.0 Z:0.0
  End
End

ExperienceLevel	SarumanLevel1
	TargetNames					= IsengardSaruman
	RequiredExperience				= 1	
	ExperienceAward					= SARUMAN_LVL1_EXP_AWARD
	Rank						= 1
        Upgrades                                        = Upgrade_LurtzPillage
	SelectionDecal
		Texture					= decal_hero_evil	
		Style					= SHADOW_ALPHA_DECAL
		OpacityMin				= 50%	
		OpacityMax				= 100%
		MinRadius				= 40
		MaxRadius				= 200
		MaxSelectedUnits			= 40
	End	
End	

ExperienceLevel	SarumanLevel10
	TargetNames					= IsengardSaruman
	RequiredExperience			= SARUMAN_LVL10_EXP_NEEDED 
	ExperienceAward				= SARUMAN_LVL10_EXP_AWARD	
	AttributeModifiers			= HeroLevelUpDamage9
	Rank						= 10
	LevelUpFx					=	FX:GandalfLevelUp1FX
	Upgrades					=	Upgrade_GandalfWordOfPower
	SelectionDecal
		Texture					= decal_hero_evil
		Style					=	SHADOW_ALPHA_DECAL
		OpacityMin				=	50%	
		OpacityMax				=	100%
		MinRadius				= 40
		MaxRadius				= 200
		MaxSelectedUnits		= 40
	End	
END	

CommandSet NewSarumanCommandSet
	1	= Command_ToggleStance
	2	= Command_SpecialAbilityIsengardWizardBlast
	3	= Command_SpecialAbilitySlayer
	4	= Command_SarumanFireball
	5	= Command_CreateAHero_Blink
	6	= Command_SpecialAbilityWordOfPower
	12	= Command_LurtzPillage
	13	= Command_AttackMove
	14	= Command_Stop
	16  = Command_SetStanceBattle
	17  = Command_SetStanceAggressive
	18  = Command_SetStanceHoldGround
End

Object IsengardSaruman
DisplayName = TheWizard
	SelectPortrait = CPAvatar
	ButtonImage = HICAHAvatar
	AddModule
	Behavior = GrantUpgradeCreate ModuleTag_1
		UpgradeToGrant = Upgrade_GandalfWhite  ;
	End 
	End

	AddModule
	Behavior = SubObjectsUpgrade CorruptedWeapon_Upgrade270
	TriggeredBy			   = Upgrade_GandalfWhite
	HideSubObjects		   = WizardStaff02 
	HideSubObjects		   = WizStaff02_FX1
	HideSubObjects		   = WizardStaff03 
	HideSubObjects		   = WizStaff03_FX01
	HideSubObjects		   = WizStaff03_FX02
	HideSubObjects		   = WizardStaff04 
	HideSubObjects		   = WizStaff04_FX01
;----------------------------------------------------------
;	HideSubObjects		   = WizStaff04_FX02
	HideSubObjects		   = WizStaff04_FX03
	HideSubObjects		   = WizStaff04_FX04
	HideSubObjects		   = WizStaff04_FX05
	HideSubObjects		   = WizStaff04_FX06
	HideSubObjects		   = WizStaff04_FX07
	HideSubObjects		   = WizStaff04_FX01
	HideSubObjects		   = STFF_05 
	HideSubObjects		   = STFF_06 



	HideSubObjects		   = Shld_01
	HideSubObjects		   = Shld_02
	HideSubObjects		   = Shld_03
	HideSubObjects		   = Shld_04

	HideSubObjects		   = HLMT_01
	HideSubObjects		   = HLMT_02
	HideSubObjects		   = HLMT_03
	HideSubObjects		   = HLMT_04
	HideSubObjects		   = HLMT_05
	HideSubObjects		   = HLMT_06
	HideSubObjects		   = HLMT_07
	;HideSubObjects		   = SLDR_01

	HideSubObjects		   = GNLT_01
	HideSubObjects		   = GNLT_02
	HideSubObjects		   = GNLT_03
	HideSubObjects		   = GNLT_04
	HideSubObjects		   = GNLT_05
	HideSubObjects		   = GNLT_06
	HideSubObjects		   = GNLT_07

	HideSubObjects		   = CHEST_01
	HideSubObjects		   = CHEST_02
	HideSubObjects		   = CHEST_03
        HideSubObjects		   = CHEST_03

	FadeTimeInSeconds      = 0.0
	RecolorHouse		   = No

	End
        End
	

ReplaceModule ModuleTag_DRAW
Draw = W3DScriptedModelDraw ModuleTag_DRAW1

DefaultModelConditionState
	Model				 = CHWZ_YW_U_SKN
	Skeleton			 = CHWZ_YW_U_SKL
	ModelAnimationPrefix = CHWZ_YW
	WeaponLaunchBone	 = PRIMARY WizStaff02_FXBO
End

ModelConditionState			= USER_1
			ParticleSysBone = BAT_SPINE1 BladeMaster1 FollowBone:Yes
			ParticleSysBone = BAT_SPINE1 BladeMaster2 FollowBone:Yes
			ParticleSysBone = BAT_SPINE1 BladeMaster3 FollowBone:Yes
End

//================== ANIMATIONS =================================================================

AnimationState        =  SPECIAL_WEAPON_ONE
			StateName				= Curse
	Animation
		AnimationName		= #(MODEL)_U_LVLA
		AnimationMode		= ONCE
	End
//			FXEvent	= Frame:6	Name: FX_SarumanDominateAtSelf
			ParticleSysBone = B_HEAD LurtzWOPGrow1 FollowBone:Yes
			ParticleSysBone = B_HEAD LurtzWOPGrow2 FollowBone:Yes
			ParticleSysBone = B_HEAD LurtzWOPGrow3 FollowBone:Yes
;			ParticleSysBone = B_HEAD LurtzWOPGrowb1 FollowBone:Yes
;			ParticleSysBone = B_HEAD LurtzWOPGrowb2 FollowBone:Yes
;			ParticleSysBone = B_HEAD LurtzWOPGrowb3 FollowBone:Yes
;			ParticleSysBone = B_HEAD LurtzWOPGrowc1 FollowBone:Yes
;			ParticleSysBone = B_HEAD LurtzWOPGrowc2 FollowBone:Yes
;			ParticleSysBone = B_HEAD LurtzWOPGrowc3 FollowBone:Yes
;			FXEvent			= Frame:3000 Name:FX_GandalfPreAttackBlast

End

//----------- Special Create A Hero Creation Screen Animations ---------------
AnimationState = CREATE_A_HERO_IN_CREATION_SCREEN CREATE_A_HERO_EXAMINE_SELF CREATE_A_HERO_SELECTED_CHEER 
	StateName			   = STATE_ExamineSelf
	Animation			   = ExamineSelf
		AnimationName	   = #(MODEL)_C_CLRA
		AnimationMode	   = ONCE
		AnimationBlendTime = 20
	End
End

AnimationState = CREATE_A_HERO_IN_CREATION_SCREEN CREATE_A_HERO_EXAMINE_WEAPON_RIGHT CREATE_A_HERO_SELECTED_CHEER 
	StateName			   = STATE_ExamineWeapon
	Animation			   = WeaponSwap
		AnimationName	   = #(MODEL)_C_WPNA
		AnimationMode	   = ONCE
		AnimationBlendTime = 20
	End
End

AnimationState = CREATE_A_HERO_IN_CREATION_SCREEN USER_75
 	StateName			   = STATE_SwapModels
 	Animation			   = WeaponSwap
 		AnimationName	   = #(MODEL)_C_ATNB #(MODEL)_C_ATND
 		AnimationMode	   = MANUAL
 		AnimationBlendTime = 0
 	End
End
                





//-----------------------------------------------------------------------------
AnimationState = CREATE_A_HERO_IN_CREATION_SCREEN CREATE_A_HERO_SELECTED_CHEER
	StateName = STATE_SelectedCheer
	Animation = Foot_ATNB // Bored Idle
		AnimationName	   = #(MODEL)_C_ATNB #(MODEL)_C_ATND
		AnimationMode	   = ONCE
		AnimationPriority  = 90
		AnimationBlendTime = 20
	End
	Animation = Foot_ATND // Bored Fidget
		AnimationName	   = #(MODEL)_C_ATND #(MODEL)_C_ATNB
		AnimationMode	   = ONCE
		AnimationPriority  = 10
		AnimationBlendTime = 20
	End
	Animation = Foot_ATNE // Bored Fidget
		AnimationName	   = #(MODEL)_C_ATNE #(MODEL)_C_ATND #(MODEL)_C_ATNB
		AnimationMode	   = ONCE
		AnimationPriority  = 3
		AnimationBlendTime = 20
	End
	Flags =	RESTART_ANIM_WHEN_COMPLETE
	BeginScript //script to set transition from moving
		Prev = CurDrawablePrevAnimationState()
		if Prev == "STATE_Unselected" then 
			CurDrawableSetTransitionAnimState("Trans_SelectedCheer") 
		end
//  		if Prev == "STATE_SwapModels" then 
//  			CurDrawableSetTransitionAnimState("Trans_SwapModels") 
//  		end
	EndScript
End

AnimationState = CREATE_A_HERO_IN_CREATION_SCREEN
	StateName = STATE_Unselected
	Animation = Foot_ATNB // Bored Idle
		AnimationName       = #(MODEL)_C_ATNB #(MODEL)_C_ATND
		AnimationMode       = ONCE
		AnimationPriority   = 90
		AnimationBlendTime = 10
	End
	Animation = Foot_ATND // Bored Fidget
		AnimationName       = #(MODEL)_C_ATND #(MODEL)_C_ATNB
		AnimationMode       = ONCE
		AnimationPriority   = 10
		AnimationBlendTime = 10
	End
	Animation = Foot_ATNE // Bored Fidget
		AnimationName       = #(MODEL)_C_ATNE #(MODEL)_C_ATND #(MODEL)_C_ATNB
		AnimationMode       = ONCE
		AnimationPriority   = 3
		AnimationBlendTime = 10
	End
	Flags =	RESTART_ANIM_WHEN_COMPLETE
 	BeginScript //script to set transition from moving
 		Prev = CurDrawablePrevAnimationState()
 		if Prev == "STATE_SwapModels" then 
 			CurDrawableSetTransitionAnimState("Trans_SwapModels") 
 		end
 	EndScript
End

TransitionState = Trans_ExamineWeapon
	Animation = Transition
		AnimationName = #(MODEL)_C_WPNA
		AnimationMode = ONCE
		AnimationBlendTime = 20
	End
End
TransitionState = Trans_ExamineSelf
	Animation = Transition
		AnimationName = #(MODEL)_C_CLRA
		AnimationMode = ONCE
		AnimationBlendTime = 20
	End
End
TransitionState = Trans_SelectedCheer
	Animation = Transition
		AnimationName = #(MODEL)_C_SLCA
		AnimationMode = ONCE
		AnimationBlendTime = 20
	End
End

TransitionState = Trans_SwapModels
	StateName = STATE_Unselected
	Animation = Transition
		AnimationName = #(MODEL)_C_ATNB #(MODEL)_C_ATND
		AnimationMode = ONCE
		AnimationBlendTime = 0
	End
End



//----------- Climbing/rappelling ---------------
AnimationState						= CLIMBING WEAPONSET_TOGGLE_1
	StateName						= STATE_Climbing
	Animation						= Climbing
		AnimationName				= #(MODEL)_U_WALB
		AnimationMode				= LOOP
		AnimationBlendTime			= 10
	End
	BeginScript//script to set transition from moving
		Prev = CurDrawablePrevAnimationState()
		if Prev == "STATE_Running"  then CurDrawableSetTransitionAnimState("Trans_RunningToClimbing_WeaponToggle") return end
	EndScript
End
TransitionState = Trans_RunningToClimbing_WeaponToggle
	Animation = Transition
		AnimationName = #(MODEL)_B_WALA
		AnimationMode = ONCE
	End
End

AnimationState						= CLIMBING
	StateName						= STATE_Climbing
	Animation						= Climbing
		AnimationName				= #(MODEL)_U_WALB
		AnimationMode				= LOOP
		AnimationBlendTime			= 10
	End
	BeginScript//script to set transition from moving
		Prev = CurDrawablePrevAnimationState()
		if Prev == "STATE_Running"  then CurDrawableSetTransitionAnimState("Trans_RunningToClimbing") return end
	EndScript
End
TransitionState = Trans_RunningToClimbing
	Animation = Transition
		AnimationName = #(MODEL)_U_WALA
		AnimationMode = ONCE
	End
End

AnimationState						= RAPPELLING WEAPONSET_TOGGLE_1
	StateName						= STATE_Rappelling
	Animation						= Rapelling
		AnimationName				= #(MODEL)_U_WALD
		AnimationMode				= LOOP
		AnimationBlendTime			= 10
	End
	BeginScript//script to set transition from moving
		Prev = CurDrawablePrevAnimationState()
		if Prev == "STATE_Climbing"  then CurDrawableSetTransitionAnimState("Trans_ClimbingToRappelling") return end
	EndScript
End
AnimationState						= RAPPELLING
	StateName						= STATE_Rappelling
	Animation						= Rapelling
		AnimationName				= #(MODEL)_U_WALD
		AnimationMode				= LOOP
		AnimationBlendTime			= 10
	End
	BeginScript//script to set transition from moving
		Prev = CurDrawablePrevAnimationState()
		if Prev == "STATE_Climbing"  then CurDrawableSetTransitionAnimState("Trans_ClimbingToRappelling") return end
	EndScript
End
TransitionState = Trans_ClimbingToRappelling
	Animation = Transition
		AnimationName = #(MODEL)_U_WALC
		AnimationMode = ONCE
	End
End
TransitionState = Trans_RappellingToRunning_WeaponToggle
	Animation = Transition
		AnimationName = MUGblnSwrd_B_WALE
		AnimationMode = ONCE
	End
End
TransitionState = Trans_RappellingToRunning
	Animation = Transition
		AnimationName = MUGblnSwrd_U_WALE
		AnimationMode = ONCE
	End
End
	



// --------- MOUNTED  ------------

// --- Dying Anims
AnimationState					=	DYING AFLAME MOUNTED
	Animation					=	Fire
		AnimationName			=	#(MODEL)_M_MFDA 
		AnimationSpeedFactorRange = 0.9 1.1
	End
	BeginScript
		CurDrawableHideSubObject("arrow") //Circumvents blend issues when the arrow is being shown...
	EndScript
End

AnimationState				=	DYING SPLATTED MOUNTED
	Animation
		AnimationName		=	#(MODEL)_M_LNDA
		AnimationMode		=	ONCE
	End
End
AnimationState        = DYING MOUNTED
	StateName           = STATE_Sword
	Animation
		AnimationName     = #(MODEL)_M_DIEA
		AnimationMode     = ONCE
	End
End

AnimationState				=	STUNNED_STANDING_UP MOUNTED
	Animation
		AnimationName		=	#(MODEL)_M_GTPA
		AnimationMode		=	ONCE
		AnimationSpeedFactorRange = 1.5 1.5
	End
End

AnimationState				=	STUNNED MOUNTED
	Animation
		AnimationName		=	#(MODEL)_M_LNDA
		AnimationMode		=	ONCE
	End
End

AnimationState				=	FREEFALL MOUNTED
	Animation
		AnimationName		=	#(MODEL)_M_FLYA
		AnimationMode		=	LOOP
	End
	Flags					=	RANDOMSTART
End

AnimationState				=	STUNNED_FLAILING MOUNTED
	Animation
		AnimationName		=	#(MODEL)_M_FLYA
		AnimationMode		=	LOOP
	End
	Flags					=	RANDOMSTART
End

AnimationState        = PASSENGER MOUNTED
	Animation
		AnimationName       = #(MODEL)_M_GBDA
		AnimationMode       = LOOP
	End
	Flags               = RANDOMSTART
End

AnimationState        = MOUNTED LEVELED	// This state clears itself in 3 of your Earth seconds
	Animation
		AnimationName           = #(MODEL)_M_LVLA
		AnimationMode       = ONCE
	End
End

AnimationState        = MOUNTED RAISING_FLAG	// This state clears itself in 3 of your Earth seconds
	Animation
		AnimationName           = #(MODEL)_M_CHRA
		AnimationMode		=	ONCE
	End
	Flags					=	RESTART_ANIM_WHEN_COMPLETE
End

// --- Attacking Anims		
AnimationState				= FIRING_OR_PREATTACK_A MOUNTED	// Melee attack.
	Animation
		AnimationName		= #(MODEL)_M_ATKA #(MODEL)_M_ATKB
		AnimationMode		= ONCE
		UseWeaponTiming		= Yes
	End
End

// --- Moving Anims
AnimationState				=	MOUNTED TURN_LEFT_HIGH_SPEED
	Animation
		AnimationName		=	#(MODEL)_M_TNL1
		AnimationMode		=	LOOP
		AnimationSpeedFactorRange= 1.8 1.8
		AnimationBlendTime	=	20
	End
End

AnimationState				=	MOUNTED TURN_RIGHT_HIGH_SPEED
	Animation
		AnimationName		=	#(MODEL)_M_TNR1
		AnimationMode		=	LOOP
		AnimationSpeedFactorRange= 1.8 1.8
		AnimationBlendTime	=	20
	End
End

AnimationState				=	MOVING TURN_LEFT MOUNTED
	Animation
		AnimationName		=	#(MODEL)_M_TRNL
		AnimationMode		=	LOOP
	End
//			//ParticleSysBone			=	None CalvaryDustTrails
End

AnimationState				=	MOVING TURN_RIGHT MOUNTED
	Animation
		AnimationName		=	#(MODEL)_M_TRNR
		AnimationMode		=	LOOP
	End
//			//ParticleSysBone			=	None CalvaryDustTrails
End

AnimationState				=	MOVING ACCELERATE MOUNTED
	Animation
		AnimationName		=	#(MODEL)_M_ACCL
		AnimationMode		=	LOOP
	End
	//ParticleSysBone			=	None CalvaryDustTrails
End

AnimationState				=	MOVING DECELERATE MOUNTED
	Animation
		AnimationName		=	#(MODEL)_M_DECL
		AnimationMode		=	ONCE
	End
	//ParticleSysBone			=	None CalvaryDustTrails
End

AnimationState				=	MOVING WALKING MOUNTED
	Animation
		AnimationName		=	#(MODEL)_M_WLKA
		AnimationMode		=	LOOP
	End
	Flags					=	RANDOMSTART
	//ParticleSysBone			=	None InfantryDustTrails  
End

AnimationState				=	MOVING BACKING_UP MOUNTED
	Animation
		AnimationName		=	#(MODEL)_M_BAKA
		AnimationMode		=	LOOP
	End
	Flags					=	RANDOMSTART
	//ParticleSysBone			=	None InfantryDustTrails  
End

AnimationState        = MOUNTED MOVING FIRING_OR_PREATTACK_A
	ShareAnimation		= Yes
	Animation
		AnimationName       = #(MODEL)_M_ATRA
		AnimationMode       = LOOP
	End
	Flags               = RANDOMSTART  
End

AnimationState				=	MOVING MOUNTED
	Animation
		AnimationName		=	#(MODEL)_M_RUNA
		AnimationMode		=	LOOP
	End
 	Flags					=	RANDOMSTART
	//ParticleSysBone			=	None CalvaryDustTrails  
End

// --- Selected Anims
AnimationState				=	SELECTED MOUNTED
	SimilarRestart			=   Yes			
	StateName				=	AtAttentionIdleMounted
	Animation				=	ATNB
		AnimationName		=	#(MODEL)_M_ATNB
		AnimationMode		=	LOOP
	End
	BeginScript
		Prev = CurDrawablePrevAnimationState()
		if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Select") end
		if Prev == "AtAttentionIdleMounted" then CurDrawableSetTransitionAnimState("TRANS_Select") end
	EndScript
End

TransitionState				=	TRANS_Select
	Animation
		AnimationName		=	#(MODEL)_M_ATNA
		AnimationMode		=	ONCE
	End
End

// --- Idle Anims
AnimationState				= MOUNTED
	Animation
		AnimationName		=	#(MODEL)_M_IDLA
		AnimationPriority	=	20
		AnimationMode		=	ONCE
		AnimationBlendTime	=	15
	End
	Flags				=	RESTART_ANIM_WHEN_COMPLETE
End

// --------- UNMOUNTED  ------------

//------------------  DYING -------------------------------------------------------------

// --- Flying through the air.
AnimationState        = STUNNED_FLAILING WEAPONSET_TOGGLE_1
	StateName           = STATE_Bow
	Animation
		AnimationName     = #(MODEL)_B_FLYA
		AnimationMode     = LOOP
	End
	Flags               = RANDOMSTART
End

AnimationState        = STUNNED_FLAILING 
	StateName           = STATE_Sword
	Animation
		AnimationName     = #(MODEL)_U_FLYA
		AnimationMode     = LOOP
	End
	Flags               = RANDOMSTART
End

// --- Dying anims
AnimationState        = DYING SPLATTED WEAPONSET_TOGGLE_1
	StateName           = STATE_Bow
	Animation
		AnimationName     = #(MODEL)_B_LNDA
		AnimationMode     = ONCE
	End
End

AnimationState        = DYING SPLATTED
	StateName           = STATE_Sword
	Animation
		AnimationName     = #(MODEL)_U_LNDA
		AnimationMode     = ONCE
	End
End

AnimationState        = DYING WEAPONSET_TOGGLE_1	//WEAPONSTATE_CLOSE_RANGE
	StateName           = STATE_Bow
	Animation
		AnimationName     = #(MODEL)_B_DIEA
		AnimationMode     = ONCE
	End
End

AnimationState        = DYING
	StateName           = STATE_Sword
	Animation
		AnimationName     = #(MODEL)_U_DIEA
		AnimationMode     = ONCE
	End
	Animation           = GUHero_DIEB
		AnimationName     = #(MODEL)_U_DIEB
		AnimationMode     = ONCE
	End
End


// --- Stunned anims


AnimationState        = STUNNED_STANDING_UP WEAPONSET_TOGGLE_1
	StateName           = STATE_Bow
	Animation
		AnimationName     = #(MODEL)_B_GTPA
		AnimationMode     = ONCE
		AnimationSpeedFactorRange = 1.5 1.5
	End
End

AnimationState        = STUNNED_STANDING_UP
	StateName           = STATE_Sword
	Animation
		AnimationName     = #(MODEL)_U_GTPA
		AnimationMode     = ONCE
		AnimationSpeedFactorRange = 1.5 1.5
	End
End

AnimationState        = STUNNED WEAPONSET_TOGGLE_1
	StateName           = STATE_Bow
	Animation
		AnimationName     = #(MODEL)_B_LNDA
		AnimationMode     = ONCE
	End
End

AnimationState        = STUNNED 
	StateName           = STATE_Sword
	Animation           = GUHero_LNDA
		AnimationName     = #(MODEL)_U_LNDA
		AnimationMode     = ONCE
	End
End				

//------------------ SPECIAL POWER ANIMS ---------------------


// RAIN OF ARROWS SPECIAL POWER //
AnimationState				= PACKING_TYPE_1  WEAPONSET_TOGGLE_1
	StateName				= rainofarrows
	Animation
		AnimationName		= #(MODEL)_B_ATKA2
		AnimationMode		= LOOP
	End
//			FXEvent	= Frame:6	Name: FX_SarumanDominateAtSelf
End

// DOMINATE SPECIAL POWER //
AnimationState				= PACKING_TYPE_1
	StateName				= Curse
	Animation
		AnimationName		= #(MODEL)_U_LVLA
		AnimationMode		= ONCE
	End
//			FXEvent	= Frame:6	Name: FX_SarumanDominateAtSelf
End

// TELEPORT SPECIAL POWER //
AnimationState				= PACKING_TYPE_3
	StateName				= Curse
	Animation
		AnimationName		= #(MODEL)_U_SPCA
		AnimationMode		= ONCE
	End
//			FXEvent	= Frame:6	Name: FX_SarumanDominateAtSelf
End

//--------------------- Wound Arrow anim
AnimationState        =  SPECIAL_WEAPON_TWO
	StateName = STATE_Bow
	Animation
		AnimationName       = #(MODEL)_U_SPCL #(MODEL)_U_ATKC
		AnimationMode       = ONCE
	End
	FrameForPristineBonePositions = 59
	BeginScript
		CurDrawableShowSubObject("arrow")
	EndScript
End
		
//------------------ ATTACKING --------------------------------------------------------------------
		// Attacking Anims [Weapon_A]
		
		
		
//		AnimationState        = MOVING WEAPONSET_TOGGLE_1 FIRING_OR_PREATTACK_A
//			Animation           = TrotAndFire
//				AnimationName       = #(MODEL)_U_ATRA
//				AnimationMode       = LOOP
//			End
//			Flags               = RANDOMSTART
//			StateName = RunAndSwing
//		End
//		
//		AnimationState        = FIRING_OR_PREATTACK_A WEAPONSET_TOGGLE_1
//			StateName           = STATE_Sword
//			
//			Animation           = ATKD
//				AnimationName     = #(MODEL)_U_ATKD
//				AnimationMode     = ONCE
//				UseWeaponTiming		= Yes
//				AnimationSpeedFactorRange = 1.149 1.149
//			End
//			
//			Animation           = ATKE
//				AnimationName    = #(MODEL)_U_ATKE
//				AnimationMode     = ONCE
//				UseWeaponTiming		= Yes
//				AnimationSpeedFactorRange = 1.149 1.149
//			End
//			
//			Animation           = ATKF
//				AnimationName    = #(MODEL)_U_ATKF
//				AnimationMode     = ONCE
//				AnimationSpeedFactorRange = 1.47 1.47
//			End
//			Flags				=	RESTART_ANIM_WHEN_COMPLETE
//			//	FrameForPristineBonePositions = 59
//			BeginScript
//				Prev = CurDrawablePrevAnimationState()
//				if Prev == "STATE_Bow" then CurDrawableSetTransitionAnimState("TRANS_BowToSword") end
//			EndScript
//		End

//------------------ MOVING -------------------------------------------------------------

		AnimationState        = MOVING USER_4                 // Moving slaughter
			StateName           = Slaughter
			Flags               = RANDOMSTART
			//ParticleSysBone     = None InfantryDustTrails
			Animation           = GUHero_ATKE
				AnimationName     = #(MODEL)_U_ATKE
				AnimationMode     = LOOP
			End
			StateName           = NoSword
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Sword" then CurDrawableSetTransitionAnimState("TRANS_SwordToBow") end
			EndScript
		End

		//--- Running with bow
		AnimationState			= MOVING WEAPONSET_TOGGLE_1		//WEAPONSTATE_CLOSE_RANGE
			StateName           = STATE_RunningBow
			Flags               = RANDOMSTART
			//ParticleSysBone    = None InfantryDustTrails
			Animation
				AnimationName   = #(MODEL)_B_RUNA
//				AnimationMode   = LOOP
				AnimationSpeedFactorRange = 0.85 0.85
//				Distance		= 28
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwordToBow") end
				if Prev == "STATE_RunningSword" then CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Running") end
				if Prev == "STATE_Rappelling"  then CurDrawableSetTransitionAnimState("Trans_RappellingToRunning_WeaponToggle") return end
			EndScript
		End

		//--- Running with sword
		AnimationState			= MOVING
			StateName           = STATE_RunningSword
			Flags               = RANDOMSTART
			//ParticleSysBone    = None InfantryDustTrails
			Animation
				AnimationName   = #(MODEL)_U_RUNA
//				AnimationMode   = LOOP
				AnimationSpeedFactorRange = 0.85 0.85
//				Distance = 28
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Bow" then CurDrawableSetTransitionAnimState("TRANS_BowToSword") end
				if Prev == "STATE_RunningBow" then CurDrawableSetTransitionAnimState("TRANS_BowToSword_Running") end
				if Prev == "STATE_Rappelling"  then CurDrawableSetTransitionAnimState("Trans_RappellingToRunning") return end
			EndScript
		End

		//---------------------------------------------------
		//New style firing with bow
		AnimationState					=	PREATTACK_A WEAPONSET_TOGGLE_1
			StateName					=	STATE_Firing
			Animation					=	ReadyToDrawn
				AnimationName			=	#(MODEL)_B_ATKA1
				AnimationMode			=	ONCE
//				UseWeaponTiming			=	Yes			// UseWeaponTiming plus random weapon field equals desync.  Leaving as warning
				//AnimationBlendTime		=	10
			End
		End

		AnimationState					=	FIRING_OR_RELOADING_A WEAPONSET_TOGGLE_1
			StateName					=	STATE_Firing
			Animation					=	LooseReloadDraw
				AnimationName			=	#(MODEL)_B_ATKA2
				AnimationMode			=	ONCE
//				UseWeaponTiming			=	Yes			// UseWeaponTiming plus random weapon field equals desync.  Leaving as warning
				AnimationSpeedFactorRange = 1.1 1.1		// Therefore, this is all you get.  A slight speed up so that the animation can always finish before any possible random value Design sets the range for
				//AnimationBlendTime		=	10
			End
		End
		//---------------------End New style firing

		//AnimationState					=	CONTINUOUS_FIRE_MEAN WEAPONSET_TOGGLE_1
		//	Animation					=	HangFrameWhileCoasting
		//		AnimationName			=	#(MODEL)_B_ATKA2
		//		AnimationMode			=	MANUAL
		//	End
		//End
		
		//AnimationState						= CONTINUOUS_FIRE_SLOW WEAPONSET_TOGGLE_1
		//	//StateName						= STATE_Idle_Bow
		//	Animation						= PutAwayArrow
		//		AnimationName				= #(MODEL)_U_ATKA3
		//		AnimationMode				= ONCE
		//	End
		//End
				
		//End New style firing
		//---------------------------------------------------

		AnimationState				= FIRING_OR_PREATTACK_A WEAPONSET_TOGGLE_1
			StateName				= STATE_Firing
			Animation
				AnimationName		= #(MODEL)_B_ATKA1
				AnimationMode		= ONCE
				UseWeaponTiming		= No			// UseWeaponTiming plus random weapon field equals desync.  Leaving as warning
			End
		End

		AnimationState				= FIRING_OR_PREATTACK_A // Melee attack.
			Animation
				AnimationName		= #(MODEL)_U_ATKA1 #(MODEL)_U_ATKA #(MODEL)_U_ATKB
				AnimationMode		= ONCE
				UseWeaponTiming		= Yes
			End
		End


		
//-------------------- HIT REACTIONS -----------------------------------------------------------

// this hit animation attack stance
		AnimationState = EMOTION_ALERT HIT_REACTION WEAPONSET_TOGGLE_1
			Animation
				AnimationName = #(MODEL)_B_HITA
				AnimationMode = ONCE
			End
		End

		AnimationState = HIT_REACTION WEAPONSET_TOGGLE_1
			Animation
				AnimationName = #(MODEL)_B_HITA
				AnimationMode = ONCE
			End
		End

		AnimationState = HIT_REACTION
			Animation = Sword_HITA
				AnimationName = #(MODEL)_U_HITA
				AnimationMode = ONCE
			End
			Animation = Sword_HITB
				AnimationName = #(MODEL)_U_HITB
				AnimationMode = ONCE
			End

			BeginScript
				PrevAnim = CurDrawablePrevAnimation()
				if PrevAnim == "Foot_IDLB"
				then
					return "Sword_HITB"
				else
					return "Swort_HITA"
				end
			EndScript
		End

//------------ SPECIAL POWERS ------------------------------------------------------------------		

		AnimationState		  =	THROWN_PROJECTILE
			Animation
				AnimationName =	#(MODEL)_U_LEP2
				AnimationMode =	LOOP
			End
		End

		AnimationState		  =	ABOUT_TO_HIT
			Animation
				AnimationName =	#(MODEL)_U_LEP3
				AnimationMode =	ONCE
			End
		End

		AnimationState				= SPECIAL_POWER_1							; Aragorn shouting Elendil anim
			StateName				= STATE_ready
			Animation
				AnimationName		= #(MODEL)_U_SPCA
				AnimationMode		= ONCE
			End
			ParticleSysBone			= B_SWORDBONE ElendilFlare FollowBone:yes
			ParticleSysBone			= B_SWORDBONE ElendilSwordFlare FollowBone:yes
;			FXEvent	= Name: FX_ElendilGlowEvent
		End

		// WORD OF POWER ANIMS ON FOOT //
		AnimationState		  =	SPECIAL_WEAPON_ONE
			StateName		  =	Attacking
			Animation
				AnimationName =	#(MODEL)_U_SPCA
				AnimationMode =	ONCE
			End
			//FXEvent			  =	Frame:5	Name:FX_GandalfPreAttackBlast
		End

		//	WIZARD BLAST ANIMS MOUNTED //
		AnimationState		  =	SPECIAL_WEAPON_TWO MOUNTED
			StateName		  =	Attacking
			Animation
				AnimationName =	#(MODEL)_U_SPLD #(MODEL)_U_ATKA
				AnimationMode =	ONCE
			End
		End
	
		//	WIZARD BLAST ANIMS ON FOOT //
		AnimationState		  =	SPECIAL_WEAPON_TWO
			StateName		  =	Attacking
			Animation
				AnimationName =	#(MODEL)_U_SPCB #(MODEL)_U_ATKA
				AnimationMode =	ONCE
			End
		End

		//	ISTARI LIGHT STAFF WEAPON MOUNTED //
		AnimationState		  =	SPECIAL_WEAPON_THREE MOUNTED	// FIRING_OR_PREATTACK_C
			StateName		  =	Attacking
			Animation		  =	StaffLaser
				AnimationName =	#(MODEL)_U_SPCD #(MODEL)_U_ATKA
				AnimationMode =	ONCE
			End
			FXEvent			  =	Frame:30 Name:FX_GandalfStaffFlare
		End

		//	ISTARI LIGHT STAFF WEAPON ON FOOT //
		AnimationState		  =	SPECIAL_WEAPON_THREE // FIRING_OR_PREATTACK_C
			StateName		  =	Attacking
			Animation		  =	StaffLaser
				AnimationName =	#(MODEL)_U_SPCE #(MODEL)_U_ATKA//	isitari's light?
				AnimationMode =	ONCE
			End
			FXEvent			  =	Frame:30 Name:FX_GandalfStaffFlare
		End
		
		; Throwing and cripple strike
		AnimationState		  =	SPECIAL_WEAPON_FOUR
			StateName		  =	Attacking
			Animation
				AnimationName =	#(MODEL)_U_SPCD
				AnimationMode =	ONCE
			End
			FrameForPristineBonePositions	= 44
		End

		AnimationState		  =	SPECIAL_WEAPON_FIVE
			StateName		  =	Attacking
			Animation
				AnimationName =	#(MODEL)_U_SPCE
				AnimationMode =	ONCE
			End
		End

		AnimationState		  =	SPECIAL_WEAPON_SIX
			StateName		  =	Attacking
			Animation
				AnimationName =	#(MODEL)_U_SPCF
				AnimationMode =	ONCE
			End
		End

		//	Special Power 1
		AnimationState		  =	PACKING_TYPE_1 UNPACKING
			StateName		  =	Attacking
			Animation		  =	LightningSwordStart
				AnimationName =	#(MODEL)_U_SPCC #(MODEL)_U_ATKA
				AnimationMode =	ONCE
			End
			FXEvent			  =	Frame:14 Name:FX_CreateAHeroLightningCharge
//			FXEvent			  =	Frame:70 Name:FX_GandalfLightningFizzle
			FXEvent			  =	Frame:14 Name:FX_GandalfLightningSword	FrameStop:70
		End
	
		AnimationState		  =	PACKING_TYPE_1 PREPARING
			StateName		  =	Attacking
			Animation		  =	LightningSwordLoop
				AnimationName =	#(MODEL)_U_SPCA #(MODEL)_U_ATKA
				AnimationMode =	LOOP
			End
		End

		AnimationState		  =	PACKING_TYPE_1 PACKING
			StateName		  =	Attacking
			Animation		  =	LightningSwordPutAway
				AnimationName =	#(MODEL)_U_SPCB #(MODEL)_U_ATKA
				AnimationMode =	ONCE
			End
		End

		// (specific) dwarf train allies.
		AnimationState		  =	PACKING_TYPE_2 CREATE_A_HERO_20 CREATE_A_HERO_21
			Animation
				AnimationName =	#(MODEL)_U_SPCC
				AnimationMode =	LOOP
			End
		End

		//	Special Power 2
		AnimationState		  =	PACKING_TYPE_2 UNPACKING
			StateName		  =	Attacking
			Animation		  =	LightningSwordStart
				AnimationName =	#(MODEL)_U_SPCC #(MODEL)_U_ATKA
				AnimationMode =	ONCE
			End
			FXEvent			  =	Frame:14 Name:FX_CreateAHeroLightningCharge
//			FXEvent			  =	Frame:70 Name:FX_GandalfLightningFizzle
			FXEvent			  =	Frame:14 Name:FX_GandalfLightningSword	FrameStop:70
		End
	
		AnimationState		  =	PACKING_TYPE_2 PREPARING
			StateName		  =	Attacking
			Animation		  =	LightningSwordLoop
				AnimationName =	#(MODEL)_U_SPCA #(MODEL)_U_ATKA
				AnimationMode =	LOOP
			End
		End

		AnimationState		  =	PACKING_TYPE_2 PACKING
			StateName		  =	Attacking
			Animation		  =	LightningSwordPutAway
				AnimationName =	#(MODEL)_U_SPCB #(MODEL)_U_ATKA
				AnimationMode =	ONCE
			End
		End
		
//----------- Captain of Gondor - Sword --------------------------------------------
		AnimationState        = PACKING_TYPE_2 WEAPONSET_TOGGLE_1
			StateName		  =	CaptainPower
			Animation           = GUHero_CHRC
				AnimationName     = #(MODEL)_U_CHRC
				AnimationMode     = ONCE
				AnimationSpeedFactorRange = 1.2 1.2
			End
		End

//----------- Captain of Gondor - Bow -----------------------------------------------
		AnimationState        = PACKING_TYPE_2
			StateName		  =	STATE_CaptainBow
			Animation           = GUHero_CHRD
				AnimationName     = #(MODEL)_U_SPCE #(MODEL)_U_SPCA #(MODEL)_U_CHRD
				AnimationMode     = ONCE
//				AnimationSpeedFactorRange = 0.75 0.75
			End
		End

		//	Special Power 3
		AnimationState		  =	PACKING_TYPE_3 UNPACKING
			StateName		  =	Attacking
			Animation		  =	LightningSwordStart
				AnimationName =	#(MODEL)_U_SPCC #(MODEL)_U_ATKA
				AnimationMode =	ONCE
			End
			FXEvent			  =	Frame:14 Name:FX_CreateAHeroLightningCharge
//			FXEvent			  =	Frame:70 Name:FX_GandalfLightningFizzle
			FXEvent			  =	Frame:14 Name:FX_GandalfLightningSword	FrameStop:70
		End
	
		AnimationState		  =	PACKING_TYPE_3 PREPARING
			StateName		  =	Attacking
			Animation		  =	LightningSwordLoop
				AnimationName =	#(MODEL)_U_SPCA #(MODEL)_U_ATKA
				AnimationMode =	LOOP
			End
		End

		AnimationState		  =	PACKING_TYPE_3 PACKING
			StateName		  =	Attacking
			Animation		  =	LightningSwordPutAway
				AnimationName =	#(MODEL)_U_SPCB #(MODEL)_U_ATKA
				AnimationMode =	ONCE
			End
		End
		
		//	Special Power 4
		AnimationState		  =	PACKING_TYPE_4 UNPACKING	  
			Animation		  
				AnimationName =	#(MODEL)_U_SPCA
				AnimationMode =	ONCE
			End
		End
	
		AnimationState		  =	PACKING_TYPE_4 PREPARING
			Animation		 
				AnimationName =	#(MODEL)_U_SPCA
				AnimationMode =	ONCE
			End
		End

		AnimationState		  =	PACKING_TYPE_4 PACKING
			Animation		  
				AnimationName =	#(MODEL)_U_SPCA
				AnimationMode =	ONCE
			End
		End
		
		//	Special Power 5
		
		//		AnimationState		  =	PACKING_TYPE_5 UNPACKING WEAPONSET_TOGGLE_1  
//			Animation		  
//				AnimationName =	#(MODEL)_B_SPCB
//				AnimationMode =	ONCE
//			End
//		End
//	
//		AnimationState		  =	PACKING_TYPE_5 PREPARING WEAPONSET_TOGGLE_1
//			Animation		 
//				AnimationName =	#(MODEL)_B_SPCB
//				AnimationMode =	ONCE
//			End
//		End

		AnimationState		  =	PACKING_TYPE_5 PACKING WEAPONSET_TOGGLE_1
			Animation		  
				AnimationName =	#(MODEL)_B_SPCB
				AnimationMode =	ONCE
				AnimationSpeedFactorRange = 0.7333 0.7333
			End
		End
		
//		AnimationState		  =	PACKING_TYPE_5 UNPACKING	  
//			Animation		  
//				AnimationName =	#(MODEL)_U_SPCB
//				AnimationMode =	ONCE
//			End
//		End
//	
//		AnimationState		  =	PACKING_TYPE_5 PREPARING
//			Animation		 
//				AnimationName =	#(MODEL)_U_SPCB
//				AnimationMode =	ONCE
//			End
//		End

		AnimationState		  =	PACKING_TYPE_5 PACKING
			Animation		  
				AnimationName =	#(MODEL)_U_SPCB
				AnimationMode =	ONCE
			End
		End
		
		//	Special Power 6
//		AnimationState		  =	PACKING_TYPE_6 UNPACKING	  
//			Animation		  
//				AnimationName =	#(MODEL)_U_SPCD
//				AnimationMode =	ONCE
//			End
//		End
//	
//		AnimationState		  =	PACKING_TYPE_6 PREPARING
//			Animation		 
//				AnimationName =	#(MODEL)_U_SPCD
//				AnimationMode =	ONCE
//			End
//		End

		AnimationState		  =	PACKING_TYPE_6 PACKING
			Animation		  
				AnimationName =	#(MODEL)_U_SPCD
				AnimationMode =	ONCE
			End
		End




//====== LEVELED
		AnimationState				= LEVELED WEAPONSET_TOGGLE_1	// This state clears itself in 3 seconds
			Animation				= LevelUp
				AnimationName		= #(MODEL)_B_CHRA #(MODEL)_B_LVLA
				AnimationMode		= ONCE
			End
		End

		AnimationState				= LEVELED 						// This state clears itself in 3 seconds
			Animation				= LevelUp
				AnimationName		= #(MODEL)_U_CHRA #(MODEL)_U_LVLA
				AnimationMode		= ONCE
			End
		End

//---------------------- EMOTIONS ---------------------------------------------------------------

		// cheer, mounted
		AnimationState				=	EMOTION_CELEBRATING MOUNTED
			Animation 
				AnimationName		=	#(MODEL)_M_CHRA #(MODEL)_M_IRFA
				AnimationMode		=	ONCE
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End

		// cheer, w/ bow on foot
		AnimationState				=	EMOTION_CELEBRATING WEAPONSET_TOGGLE_1
			Animation 
				AnimationName		=	#(MODEL)_B_CHRA
				AnimationMode		=	ONCE
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End

		// cheer, on foot
		AnimationState				=	EMOTION_CELEBRATING
			Animation CHRA
				AnimationName		=	#(MODEL)_U_CHRA #(MODEL)_U_TNTA
				AnimationMode		=	ONCE
			End
			Animation CHRB
				AnimationName		=	#(MODEL)_U_CHRB #(MODEL)_U_CHRA #(MODEL)_U_TNTA
				AnimationMode		=	ONCE
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End
		
		// raise flag, w/ bow on foot
		AnimationState				=	RAISING_FLAG WEAPONSET_TOGGLE_1
			Animation 
				AnimationName		=	#(MODEL)_B_CHRA
				AnimationMode		=	ONCE
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End

		// cheer, on foot
		AnimationState				=	RAISING_FLAG
			Animation CHRA
				AnimationName		=	#(MODEL)_U_CHRA #(MODEL)_U_TNTA
				AnimationMode		=	ONCE
			End
			Animation CHRB
				AnimationName		=	#(MODEL)_U_CHRB #(MODEL)_U_CHRA #(MODEL)_U_TNTA
				AnimationMode		=	ONCE
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End
		
		// taunt, mounted
		AnimationState				=	EMOTION_TAUNTING MOUNTED
			Animation 
				AnimationName		=	#(MODEL)_M_TNTA #(MODEL)_M_IRFA
				AnimationMode		=	ONCE
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End
		
		// taunt, w/ bow on foot
		AnimationState				=	EMOTION_TAUNTING WEAPONSET_TOGGLE_1
			Animation 
				AnimationName		=	#(MODEL)_B_TNTA
				AnimationMode		=	ONCE
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End
		
		// taunt, on foot
		AnimationState				=	EMOTION_TAUNTING
			Animation CHRA
				AnimationName		=	#(MODEL)_U_TNTA
				AnimationMode		=	ONCE
			End
			Animation CHRB
				AnimationName		=	#(MODEL)_U_TNTB #(MODEL)_U_TNTA
				AnimationMode		=	ONCE
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End
		
// 	Animation
// 		AnimationName				= RUMerry_CHRA
// 		AnimationMode				= ONCE
// 	End
// 	Animation
// 		AnimationName				= RUMerry_CHRB
// 		AnimationMode				= ONCE
// 	End
// 	Flags							= RESTART_ANIM_WHEN_COMPLETE
// End
// 
// AnimationState						= EMOTION_TAUNTING
// 	Animation
// 		AnimationName				= RUMerry_TNTB
// 		AnimationMode				= LOOP
// 	End
// End
// 
// AnimationState					= EMOTION_ALERT WEAPONSET_TOGGLE_1
// 	StateName					= STATE_Ready_Rocks
// 	Animation					= IDLA
// 		AnimationName			= RUMerry_IDLA
// 		AnimationMode			= LOOP
// 	End
// End
// AnimationState					= EMOTION_ALERT
// 	StateName					= STATE_Ready_Sword
// 	Animation
// 		AnimationName			= RUMerry_IDLB
// 		AnimationMode			= LOOP
// 	End
// End
		


//====== ENGAGED
		AnimationState				= ENGAGED WEAPONSET_TOGGLE_1
			StateName				= STATE_ready
			Animation
				AnimationName		= #(MODEL)_B_IDLA
				AnimationMode		= ONCE
			End
		End
		AnimationState				= ENGAGED
			StateName				= STATE_ready
			Animation
				AnimationName		= #(MODEL)_U_IDLA
				AnimationMode		= ONCE
			End
		End
		AnimationState				= BETWEEN_FIRING_SHOTS_A WEAPONSET_TOGGLE_1
			StateName				= STATE_ready
			Animation
				AnimationName		= #(MODEL)_B_IDLA
				AnimationMode		= ONCE
			End
		End
		AnimationState				= BETWEEN_FIRING_SHOTS_A
			StateName				= STATE_ready
			Animation
				AnimationName		= #(MODEL)_U_IDLA
				AnimationMode		= ONCE
			End
		End
		
// --- Idle Toggled

		AnimationState = SELECTED WEAPONSET_TOGGLE_1
			StateName				= STATE_Selected_Bow
			Animation				= Selected_Loop
				AnimationName		= #(MODEL)_B_ATNB
				AnimationMode		= LOOP
				AnimationBlendTime	= 10
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Idle_Bow" then CurDrawableSetTransitionAnimState("TRANS_BoredToSelectedBow") end
			EndScript
			Flags = RESTART_ANIM_WHEN_COMPLETE
		End

		AnimationState = SELECTED
			StateName				= STATE_Selected_Sword
			Animation				= Selected_Loop
				AnimationName		= #(MODEL)_U_ATNB
				AnimationMode		= LOOP
				AnimationBlendTime	= 10
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Idle_Sword" then CurDrawableSetTransitionAnimState("TRANS_BoredToSelectedSword") end
			EndScript
			Flags = RESTART_ANIM_WHEN_COMPLETE
		End


		AnimationState				= WEAPONSET_TOGGLE_1
			StateName				= STATE_Idle_Bow
			Animation
				AnimationName		=	#(MODEL)_B_IDLA
				AnimationPriority	=	20
				AnimationMode		=	ONCE
				AnimationBlendTime	=	15
			End
			Flags				=	RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Idle_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwordToBow") end
			EndScript
		End

		IdleAnimationState
			StateName					= STATE_Idle_Sword	
			Animation = Foot_IDLB // Bored Idle
				AnimationName       = #(MODEL)_U_IDLB
				AnimationMode       = ONCE
				AnimationPriority   = 20
			End
			Animation = Foot_IDLC // Bored Fidget
				AnimationName       = #(MODEL)_U_IBFA
				AnimationMode       = ONCE
				AnimationPriority   = 2
			End
			//Animation = Foot_IDLD // Bored Fidget
			//	AnimationName       = #(MODEL)_U_IBFB
			//	AnimationMode       = ONCE
			//	AnimationPriority   = 1
			//End

			BeginScript
				CurDrawableHideSubObject("arrow")
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Selected_Sword" then CurDrawableSetTransitionAnimState("TRANS_SelectedToBoredSword") end
				if Prev == "STATE_Idle_Bow" then CurDrawableSetTransitionAnimState("TRANS_BowToSword") end
			EndScript
		End
		

	//---transitions--------------------------------------------

		TransitionState = TRANS_BoredToSelectedSword
		// Once we have proper animations for enter -> idle -> exit, fix this properly.
			Animation = ANTD
				AnimationName	= #(MODEL)_U_ATNA #(MODEL)_U_ATND #(MODEL)_U_IDLA
				AnimationMode	= ONCE
			End		
		End
		
		TransitionState = TRANS_SelectedToBoredSword
			Animation			= ATNF
				AnimationName	= #(MODEL)_U_ATNC #(MODEL)_U_ATNF #(MODEL)_U_ATNE
				AnimationMode	= ONCE
			End		
		End	

		TransitionState = TRANS_BoredToSelectedBow
			Animation = ATNC
				AnimationName		= #(MODEL)_U_ATNF #(MODEL)_U_ATNE
				AnimationMode		= ONCE
			End		
		End
		
		TransitionState = TRANS_CaptainBowToSelectedBow
			Animation = ATNC
				AnimationName		= #(MODEL)_U_ATNF
				AnimationMode		= ONCE
				AnimationBlendTime	= 10
				AnimationSpeedFactorRange = 1.5 1.5
			End		
		End
		
		TransitionState = TRANS_SelectedToBoredBow
			Animation			= ATNA
				AnimationName	= #(MODEL)_U_ATNF
				AnimationMode	= ONCE
			End		
		End	


		TransitionState       = TRANS_BowToSword
			Animation           = CUHero_STHA
				AnimationName     = #(MODEL)_B_STHA
				AnimationMode     = ONCE
			End
		End

		TransitionState       = TRANS_SwordToBow
			Animation           = CUHero_STHB
				AnimationName     = #(MODEL)_U_STHA
				AnimationMode     = ONCE
			End
		End	

		TransitionState       		= TRANS_BowToSword_Running
			Animation           	= DrawSwords
				AnimationName       = #(MODEL)_B_STHB
				AnimationMode       = ONCE
			End
		End
		
		TransitionState       		= TRANS_SwordToBow_Running
			Animation           	= DrawBow
				AnimationName       = #(MODEL)_U_STHB
				AnimationMode       = ONCE
			End
		End		

	End	
End 

	LocomotorSet
		Locomotor = HumanLocomotor
		Condition = SET_NORMAL 
		Speed     = 120
	End

	ArmorSet
		Conditions      = None
		Armor           = WarriorArmor
		DamageFX        = NormalDamageFX
	End

	CommandSet			= NewSarumanCommandSet

;------------------------------------------

      AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced0
		TriggeredBy				= Upgrade_TechnologyGondorForgedBlades
		AttributeModifier		= MoreAttack1
	End
      End
AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced1
		TriggeredBy				= Upgrade_TechnologyElvenForgedBlades
		AttributeModifier		= MoreAttack2
	End
      End
AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced2
		TriggeredBy				= Upgrade_TechnologyDwarvenForgedBlades
		AttributeModifier		= MoreAttack3
	End
      End

AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced01
		TriggeredBy				= Upgrade_TechnologyIsengardForgedBlades
		AttributeModifier		= MoreAttack4
	End
      End
AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced11
		TriggeredBy				= Upgrade_TechnologyMordorForgedBlades
		AttributeModifier		= MoreAttack5
	End
      End
AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced21
		TriggeredBy				= Upgrade_TechnologyWildForgedBlades
		AttributeModifier		= MoreAttack6
	End
      End
AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced111
		TriggeredBy				= Upgrade_TechnologyElvenSilverthornArrows
		AttributeModifier		= MoreAttack7
	End
      End
AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced211
		TriggeredBy				= Upgrade_TechnologyAngmarDarkIronBlades
		AttributeModifier		= MoreAttack8
	End
      End

;--------------------------------------------------------

AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced0b
		TriggeredBy				= Upgrade_TechnologyGondorHeavyArmor
		AttributeModifier		= MoreDefence1
	End
      End
AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced1b
		TriggeredBy				= Upgrade_TechnologyElvenHeavyArmor
		AttributeModifier		=MoreDefence2
	End
      End
AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced2b
		TriggeredBy				= Upgrade_TechnologyDwarvenMithrilMail
		AttributeModifier		= MoreDefence3
	End
      End

AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced01b
		TriggeredBy				= Upgrade_TechnologyIsengardHeavyArmor
		AttributeModifier		= MoreDefence4
	End
      End
AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced11b
		TriggeredBy				= Upgrade_TechnologyMordorHeavyArmor
		AttributeModifier		= MoreDefence5
	End
      End
AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced21b
		TriggeredBy				= Upgrade_TechnologyWildHeavyArmor
		AttributeModifier		= MoreDefence6
	End
      End
AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced111b
		TriggeredBy				= Upgrade_TechnologyAngmarIceArrows
		AttributeModifier		= MoreDefence7
	End
      End
AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced211b
		TriggeredBy				= Upgrade_TechnologyAngmarDarkIronArmor
		AttributeModifier		= MoreDefence8
	End
      End

;-----------------------------------------------------------------------------------

AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced0c
		TriggeredBy				= Upgrade_TechnologyElvenBasicTraining
		AttributeModifier		= MoreLife1
	End
      End
AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced1c
		TriggeredBy				= Upgrade_TechnologyDwarvenFlamingShot
		AttributeModifier		=MoreLife2
	End
      End
AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced2c
		TriggeredBy				= Upgrade_TechnologyDwarvenSiegeHammer
		AttributeModifier		= MoreLife3
	End
      End

AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced01c
		TriggeredBy				= Upgrade_TechnologyIsengardFireArrows
		AttributeModifier		= MoreLife4
	End
      End
AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced11c
		TriggeredBy				= Upgrade_TechnologyMordorFireArrows
		AttributeModifier		= MoreLife5
	End
      End
AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced21c
		TriggeredBy				= Upgrade_TechnologyWildFireArrows
		AttributeModifier		= MoreLife6
	End
      End
AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced111c
		TriggeredBy				= Upgrade_TechnologyAngmarIceShot
		AttributeModifier		= MoreLife7
	End
      End
AddModule
      	Behavior = AttributeModifierUpgrade ModuleTag_Reinforced211c
		TriggeredBy				= Upgrade_TechnologyIsengardBasicTraining
		AttributeModifier		= MoreLife8
	End
      End

VoiceAttack 							= HeroWizardVoiceAttack
			VoiceAttackAir							= HeroWizardVoiceAttack
			VoiceAttackCharge 						= HeroWizardVoiceAttack
			VoiceAttackMachine 						= HeroWizardVoiceAttack
			VoiceAttackStructure 					= HeroWizardVoiceAttack
			VoiceCreated							= HeroWizardVoiceWandererSalute
			VoiceFear								= HeroWizardVoiceHelpMe
			VoiceFullyCreated						= HeroWizardVoiceWandererSalute
			VoiceGuard								= HeroWizardVoiceMove
			VoiceMove 								= HeroWizardVoiceMove
			VoiceMoveToCamp 						= HeroWizardVoiceMove
			VoiceMoveWhileAttacking 				= HeroWizardVoiceMove
			VoicePriority							= 99
			VoiceRetreatToCastle 					= HeroWizardVoiceMove
			VoiceSelect 							= HeroWizardVoiceSelectMS
			VoiceSelectBattle  						= HeroWizardVoiceSelectBattle
		
			SoundImpact								= ImpactHorse
		
			UnitSpecificSounds
				VoiceAttackFireball					= HeroWizardVoiceAttack
				VoiceEnterUnitElvenTransportShip	= HeroWizardVoiceMove
				VoiceEnterUnitMordorMumakil			= HeroWizardVoiceMove
				VoiceEnterUnitSlaughterHouse		= HeroWizardVoiceMove
				VoiceEnterUnitTransportShip			= HeroWizardVoiceMove
				VoiceGarrison						= HeroWizardVoiceMove
				VoiceInitiateCaptureBuilding		= HeroWizardVoiceCaptureBuilding
			End

;-------------------------------------------------------------------
AddModule
Behavior = UnpauseSpecialPowerUpgrade ModuleTag_TeleportEnabler
	SpecialPowerTemplate = SpecialAbilityHeroBlink
	TriggeredBy			 = Upgrade_TechnologyWildBasicTraining
End
End
AddModule
Behavior = SpecialPowerModule ModuleTag_TeleportStarter                      
	SpecialPowerTemplate	 = SpecialAbilityHeroBlink
	UpdateModuleStartsAttack = Yes
	TriggerFX				 = FX_Blink
	StartsPaused			 = Yes
End
End
AddModule
Behavior = TeleportSpecialAbilityUpdate ModuleTag_TeleportUpdate   
	SpecialPowerTemplate  =	SpecialAbilityHeroBlink

	UnpackingVariation	  =	1
	UnpackTime			  =	1800
	PackTime			  =	1800

	ApproachRequiresLOS	  =	No
	BusyForDuration		  =	1800 // don't accept	any	AI for this	long...	ai commands	will be	queued (should be at least PackTime)
	
	DestinationWeaponName =	CreateaHeroBlinkDestination	// Fires	at point of	teleport to	push people	away and down.
End
End
AddModule
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_KnifeEnabler
		SpecialPowerTemplate = SpecialAbilityGimliHeroMode
		TriggeredBy = Upgrade_TechnologyGondorBasicTraining
	End

	Behavior = WeaponModeSpecialPowerUpdate ModuleTag_KnifeFighterPowerUpdate
		SpecialPowerTemplate	= SpecialAbilityGimliHeroMode
		Duration				= 30000												; Needs to match SpecialAbilityGimliHeroMode
		AttributeModifier		= WizardModifier
		;LockWeaponSlot			= SECONDARY
;		WeaponSetFlags			= WEAPONSET_TOGGLE_1
		StartsPaused			= Yes
		;InitiateSound 			= AragornBladeMaster		;this doesn't work
	End
End

ReplaceModule ModuleTag_FireballEnabler
Behavior = UnpauseSpecialPowerUpgrade ModuleTag_FireballEnabler1
		SpecialPowerTemplate	= SpecialAbilitySarumanFireball
		TriggeredBy				= Upgrade_TechnologyAngmarBasicTraining
	End
End
ReplaceModule ModuleTag_FireballStarter                      
	Behavior = SpecialPowerModule ModuleTag_FireballStarter1                      
		SpecialPowerTemplate		= SpecialAbilitySarumanFireball
		UpdateModuleStartsAttack	= Yes
		StartsPaused			= Yes
		InitiateSound			= SarumanVoiceAttackFireball
	End
End
ReplaceModule ModuleTag_FireballUpdate   
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_FireballUpdate1   
		SpecialPowerTemplate    = SpecialAbilitySarumanFireball
		WhichSpecialWeapon		= 1
		SkipContinue			= Yes

		UnpackTime             	= 800
		PreparationTime			= 1   
		PersistentPrepTime		= 1000 
		PackTime				= 100
		
		AwardXPForTriggering    = 0
		
		StartAbilityRange		= SARUMAN_FIREBALL_RANGE
		MustFinishAbility		= Yes
		SpecialWeapon			= SarumanFireball
                WhichSpecialWeapon = 2
	End
End
ReplaceModule ModuleTag_FirBallAutoAbility
	Behavior = AutoAbilityBehavior ModuleTag_FirBallAutoAbility1
		SpecialAbility				= SpecialAbilitySarumanFireball
		MaxScanRange				= #SUBTRACT( SARUMAN_FIREBALL_RANGE 25 )
		Query						= 1 ALL ENEMIES -STRUCTURE
	End
End

AddModule
 	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_Pillage
		SpecialPowerTemplate	= SpecialAbilityFakeLeadership2
		TriggeredBy				= Upgrade_LurtzPillage
	End
End
AddModule
	Behavior = SpecialPowerModule ModuleTag_PillageUpdate
		SpecialPowerTemplate		= SpecialAbilityFakeLeadership2
		UpdateModuleStartsAttack	= No
		StartsPaused				= Yes
	End
End
AddModule
	Behavior = AttributeModifierAuraUpdate ModuleTag_PillageAura
		StartsActive	= No										; If no, requires upgrade to turn on.
		BonusName		= LurtzPassiveOutlawLeadership
		TriggeredBy		= Upgrade_LurtzPillage
		RefreshDelay	= 2000
		Range			= 200
		AllowSelf		= Yes
		ObjectFilter	= ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION -HERO -DOZER
	End	
End

AddModule
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_WordEnabler
		SpecialPowerTemplate = SpecialAbilityWordOfPower
		TriggeredBy = Upgrade_GandalfWordOfPower
	End
      End
      AddModule
	Behavior = SpecialPowerModule ModuleTag_WordStarter       
		SpecialPowerTemplate      = SpecialAbilityWordOfPower
		UpdateModuleStartsAttack  = Yes
		StartsPaused		  	  = Yes
		InitiateSound				= GaladrielTerribleFuryMS  ;ElrondVoiceAttack
	End
      End
      AddModule
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_WordWeaponFireUpdate   
		SpecialPowerTemplate    = SpecialAbilityWordOfPower
		WhichSpecialWeapon		= 1
		SkipContinue			= Yes
		UnpackTime              = 3600
		PackTime                = 1		
		FreezeAfterTriggerDuration = 2500
		AwardXPForTriggering    = 0		
		StartAbilityRange		= 80.0
		SpecialWeapon			= SpecialAbilitySuperWOPWeapon
;		SpecialWeapon			= CreateAHeroEarthShaker_Level3
	End
      End
End


Object SarumanFireballProjectile
AddModule
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_DIELIKETHIS
    StartsActive = Yes
    DeathWeapon = RainOfFirePhaseOneWeapon
  End
  End
End

//------------------------------------------------------------------------------
SpecialPower SpecialAbilityCreateAHeroThrowSpear_Level3
	Enum			= SPECIAL_AT_VISIBLE_OBJECT
	ReloadTime		= 180000 //  in milliseconds
	PublicTimer		= No
	// InitiateSound	= EomerSmiteSpearFly			// won't work because Eowyn also shares this
End

CommandButton Command_PurchaseUpgradeMenFortressBanners 
	Command			= SPELL_BOOK
    SpecialPower		= SpellBookDarkness
    ButtonImage			= SBEvil_Darkness
	TextLabel		= CONTROLBAR:Darkness0
	DescriptLabel		= CONTROLBAR:TooltipDarkness0
End

CommandButton Command_PurchaseTechnologyGondorBasicTraining
	Command				= PURCHASE_SCIENCE
	ButtonBorderType	= UPGRADE 
    ButtonImage			= SBEvil_Darkness 
    Science				= SCIENCE_Darkness
    TextLabel			= CONTROLBAR:Darkness0
	DescriptLabel		= CONTROLBAR:TooltipDarkness0
End

Science SCIENCE_Heal
  PrerequisiteSciences = SCIENCE_EVIL OR SCIENCE_GOOD OR SCIENCE_MEN OR SCIENCE_ELVES OR SCIENCE_DWARVES OR SCIENCE_MORDOR OR SCIENCE_ISENGARD OR SCIENCE_WILD OR SCIENCE_ANGMAR
  SciencePurchasePointCost = 99
  SciencePurchasePointCostMP = 99
  IsGrantable = Yes
End

Science SCIENCE_Darkness
  PrerequisiteSciences = SCIENCE_EVIL OR SCIENCE_GOOD OR SCIENCE_MEN OR SCIENCE_ELVES OR SCIENCE_DWARVES OR SCIENCE_MORDOR OR SCIENCE_ISENGARD OR SCIENCE_WILD OR SCIENCE_ANGMAR
  SciencePurchasePointCost = 5
  SciencePurchasePointCostMP = 5
  IsGrantable = Yes
End

CommandSet MenSpellBookCommandSet_Override
	1 = Command_PurchaseUpgradeMenFortressBanners 
	2 = Command_SpellBookHeal
	3 = Command_SpellBookDevastation
	4 = Command_SpellBookCloudBreak
	5 = Command_SpellBookArrowVolleyGood
	6 = Command_SpellBookChillWind
	7 = Command_SpellBookUndermine
	8 = Command_SpellBookBombard
	9 = Command_SpellBookLoneTower
	10 = Command_SpellBookFlood
	11 = Command_SpellBookSunflare
	12 = Command_SpellBookEarthquake
End


CommandSet MenSpellStoreCommandSet_Override
	1 = Command_PurchaseTechnologyGondorBasicTraining
	2 = Command_PurchaseSpellHeal
	3 = Command_PurchaseSpellDevastation
	4 = Command_PurchaseSpellCloudBreak
	5 = Command_PurchaseSpellArrowVolleyGood
	6 = Command_PurchaseSpellChillWind
	7 = Command_PurchaseSpellUndermine
	8 = Command_PurchaseSpellBombard
	9 = Command_PurchaseSpellLoneTower
	10 = Command_PurchaseSpellFlood
	11 = Command_PurchaseSpellSunflare
	12 = Command_PurchaseSpellEarthquake
End

Object MenSpellBook_Override
	 
	AddModule ModuleTag_Darkness_Override
	        Behavior   = DarknessSpecialPower ModuleTag_Darkness
		SpecialPowerTemplate			= SpellBookDarkness
		AttributeModifier				= SpellBookDarkness
		AttributeModifierAffects		= ANY -INFANTRY -CAVALRY -MONSTER -HERO -HORDE ALLIES
		AttributeModifierWeatherBased	= Yes			
		WeatherDuration					= 1
		ChangeWeather					= SUNNY
		AvailableAtStart				= Yes
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
        End
	
	AddModule ModuleTag_Heal_Override
	Behavior = PlayerHealSpecialPower ModuleTag_Heal
		SpecialPowerTemplate  = SpellBookHeal
		HealAffects			  = INFANTRY CAVALRY MONSTER MACHINE SHIP DOZER
		HealAmount			  = 1.0	; 0.5 = 50% of maximum health
		HealRadius			  = SPELL_HEAL_RADIUS_UNIT_SCAN
		HealFX				  = FX_SpellHealUnitHealBuff		;FX_DefaultUnitHealBuff
		; To replenish hordes a bit
		HealOCL               = OCL_HealSpellHordeReplenishPing
		AvailableAtStart	  = Yes
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End	
	End
AddModule ModuleTag_CloudBreak_Override
	Behavior = CloudBreakSpecialPower	ModuleTag_CloudBreak
		SpecialPowerTemplate			= SpellBookCloudBreak
    	SunbeamObject					= CloudBreakSunbeam
		ObjectSpacing					= 300
		AttributeModifierAffects		= ANY +INFANTRY +CAVALRY +MONSTER -HERO ENEMIES
		ReEnableAntiCategory			= Yes ; cancel negative effects on good guys
		AttributeModifierWeatherBased	= Yes			
		WeatherDuration					= SPELL_CLOUDBREAK_DURATION
		ChangeWeather					= SUNNY
		AvailableAtStart				= No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End
AddModule ModuleTag_ArrowVolleyGood_Override
	Behavior = OCLSpecialPower ModuleTag_ArrowVolleyGood
		SpecialPowerTemplate = SpellBookArrowVolleyGood
		OCL                  = OCL_SpellBookArrowVolley
		CreateLocation       = USE_SECONDARY_OBJECT_LOCATION
		NearestSecondaryObjectFilter = NONE SAME_PLAYER +CASTLE_KEEP 
		AvailableAtStart	 = No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End
AddModule ModuleTag_ChillWind_Override
 	Behavior   = OCLSpecialPower ModuleTag_ChillWind
		SpecialPowerTemplate	= SpellBookChillWind
		OCL				= OCL_SpellBookChillWind
		CreateLocation			= CREATE_AT_LOCATION
		AvailableAtStart		= No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End
AddModule ModuleTag_SpawnLoneTower_Override
		Behavior = OCLSpecialPower ModuleTag_SpawnLoneTower
		SpecialPowerTemplate = SpellBookSpawnLoneTower
		OCL                  = OCL_GondorSpellBookSpawnLoneTower
		CreateLocation       = CREATE_AT_LOCATION
		AvailableAtStart	 = No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
		//UseDistanceFromCommandCenter	= Yes
		//DistanceFromCommandCenter		= LONE_TOWER_EFFECTIVE_RADIUS
	End
End



AddModule ModuleTag_Undermine_Override
	Behavior = OCLSpecialPower ModuleTag_Undermine
		SpecialPowerTemplate = SpellBookUndermine
		OCL                  = OCL_SpellBookUndermine
		CreateLocation       = CREATE_AT_LOCATION
		AvailableAtStart	 = No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End
AddModule ModuleTag_Bombard_Override
	Behavior = OCLSpecialPower ModuleTag_Bombard
		SpecialPowerTemplate = SpellBookBombard
		OCL                  = OCL_SpellBookBombardSeed
		CreateLocation       = USE_SECONDARY_OBJECT_LOCATION
		NearestSecondaryObjectFilter = NONE SAME_PLAYER +CASTLE_KEEP 
		AvailableAtStart	 = No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End
AddModule ModuleTag_DevastateSpecialPower_Override
	Behavior = DevastateSpecialPower	ModuleTag_DevastateSpecialPower
		SpecialPowerTemplate		= SpellBookDevastation
		Radius				= SPECIALPOWER_DEVASTATION_RADIUS
		TreeValueMultiplier	= 50%	;The value sqeezed out of each tree is multiplied by this compared to what a worker would have gotten for it
		TreeValueTotalCap	= 1500	;And the most you can get for the enitre spell is this, so you can't find the one map that has a 20000 patch of trees in the corner
		TriggerFX			= FX_DevastationFlare
		FX					= FX_Devastation
		AvailableAtStart	= No
		FireWeapon			= DevastationEntWeapon
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End

AddModule ModuleTag_Flood_Override
	Behavior = OCLSpecialPower ModuleTag_Flood
		SpecialPowerTemplate = SpellBookFlood
		OCL                  = OCL_SpellBookFlood
		CreateLocation       = CREATE_AT_LOCATION
		AvailableAtStart	 = No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End
AddModule ModuleTag_Sunflare_Override
	Behavior = OCLSpecialPower ModuleTag_Sunflare
		SpecialPowerTemplate 			= SpellBookSunflare
		OCL                  			= OCL_SpecialPowerSunflare
		CreateLocation       			= CREATE_AT_LOCATION
		AvailableAtStart	 			= No
		AttributeModifierAffects		= ANY +INFANTRY +CAVALRY +MONSTER -HERO ENEMIES
		ReEnableAntiCategory			= Yes
		AttributeModifierWeatherBased	= Yes			
		WeatherDuration					= SPELL_SUNFLARE_DURATION
		ChangeWeather					= SUNNY
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End

     CommandSet = MenSpellBookCommandSet_Override
     RadarPriority = NOT_ON_RADAR
     KindOf = SPELL_BOOK IMMOBILE IGNORES_SELECT_ALL INERT
End

ChildObject MenChildSpellBook_Override MenSpellBook_Override
     CommandSet = MenSpellBookCommandSet_Override
End

PlayerTemplate FactionMen
     PurchaseScienceCommandSetMP = MenSpellStoreCommandSet_Override
     SpellBookMp = MenSpellBook_Override
End

CommandSet ElvenSpellBookCommandSet_Override
	1 = Command_PurchaseUpgradeMenFortressBanners 
	2 = Command_SpellBookHeal
	3 = Command_SpellBookDevastation
	4 = Command_SpellBookCloudBreak
	5 = Command_SpellBookArrowVolleyGood
	6 = Command_SpellBookChillWind
	7 = Command_SpellBookUndermine
	8 = Command_SpellBookBombard
	9 = Command_SpellBookLoneTower
	10 = Command_SpellBookFlood
	11 = Command_SpellBookSunflare
	12 = Command_SpellBookEarthquake
End


CommandSet ElvenSpellStoreCommandSet_Override
	1 = Command_PurchaseTechnologyGondorBasicTraining
	2 = Command_PurchaseSpellHeal
	3 = Command_PurchaseSpellDevastation
	4 = Command_PurchaseSpellCloudBreak
	5 = Command_PurchaseSpellArrowVolleyGood
	6 = Command_PurchaseSpellChillWind
	7 = Command_PurchaseSpellUndermine
	8 = Command_PurchaseSpellBombard
	9 = Command_PurchaseSpellLoneTower
	10 = Command_PurchaseSpellFlood
	11 = Command_PurchaseSpellSunflare
	12 = Command_PurchaseSpellEarthquake
End

Object ElvenSpellBook_Override
	 
	AddModule ModuleTag_Darkness_Override
	        Behavior   = DarknessSpecialPower ModuleTag_Darkness
		SpecialPowerTemplate			= SpellBookDarkness
		AttributeModifier				= SpellBookDarkness
		AttributeModifierAffects		= ANY -INFANTRY -CAVALRY -MONSTER -HERO -HORDE ALLIES
		AttributeModifierWeatherBased	= Yes			
		WeatherDuration					= 1
		ChangeWeather					= SUNNY
		AvailableAtStart				= Yes
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
        End
	
	AddModule ModuleTag_Heal_Override
	Behavior = PlayerHealSpecialPower ModuleTag_Heal
		SpecialPowerTemplate  = SpellBookHeal
		HealAffects			  = INFANTRY CAVALRY MONSTER MACHINE SHIP DOZER
		HealAmount			  = 1.0	; 0.5 = 50% of maximum health
		HealRadius			  = SPELL_HEAL_RADIUS_UNIT_SCAN
		HealFX				  = FX_SpellHealUnitHealBuff		;FX_DefaultUnitHealBuff
		; To replenish hordes a bit
		HealOCL               = OCL_HealSpellHordeReplenishPing
		AvailableAtStart	  = Yes
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End	
	End
AddModule ModuleTag_CloudBreak_Override
	Behavior = CloudBreakSpecialPower	ModuleTag_CloudBreak
		SpecialPowerTemplate			= SpellBookCloudBreak
    	SunbeamObject					= CloudBreakSunbeam
		ObjectSpacing					= 300
		AttributeModifierAffects		= ANY +INFANTRY +CAVALRY +MONSTER -HERO ENEMIES
		ReEnableAntiCategory			= Yes ; cancel negative effects on good guys
		AttributeModifierWeatherBased	= Yes			
		WeatherDuration					= SPELL_CLOUDBREAK_DURATION
		ChangeWeather					= SUNNY
		AvailableAtStart				= No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End
AddModule ModuleTag_ArrowVolleyGood_Override
	Behavior = OCLSpecialPower ModuleTag_ArrowVolleyGood
		SpecialPowerTemplate = SpellBookArrowVolleyGood
		OCL                  = OCL_SpellBookArrowVolley
		CreateLocation       = USE_SECONDARY_OBJECT_LOCATION
		NearestSecondaryObjectFilter = NONE SAME_PLAYER +CASTLE_KEEP 
		AvailableAtStart	 = No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End
AddModule ModuleTag_ChillWind_Override
 	Behavior   = OCLSpecialPower ModuleTag_ChillWind
		SpecialPowerTemplate	= SpellBookChillWind
		OCL				= OCL_SpellBookChillWind
		CreateLocation			= CREATE_AT_LOCATION
		AvailableAtStart		= No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End
AddModule ModuleTag_SpawnLoneTowerDwarf_Override
	Behavior = OCLSpecialPower ModuleTag_SpawnLoneTowerDwarf
		SpecialPowerTemplate = SpellBookSpawnLoneTowerDwarf
		OCL                  = OCL_DwarfSpellBookSpawnLoneTower
		CreateLocation       = CREATE_AT_LOCATION
		AvailableAtStart	 = No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
		//UseDistanceFromCommandCenter	= Yes
		//DistanceFromCommandCenter		= LONE_TOWER_EFFECTIVE_RADIUS
	End	
End



AddModule ModuleTag_Undermine_Override
	Behavior = OCLSpecialPower ModuleTag_Undermine
		SpecialPowerTemplate = SpellBookUndermine
		OCL                  = OCL_SpellBookUndermine
		CreateLocation       = CREATE_AT_LOCATION
		AvailableAtStart	 = No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End
AddModule ModuleTag_Bombard_Override
	Behavior = OCLSpecialPower ModuleTag_Bombard
		SpecialPowerTemplate = SpellBookBombard
		OCL                  = OCL_SpellBookBombardSeed
		CreateLocation       = USE_SECONDARY_OBJECT_LOCATION
		NearestSecondaryObjectFilter = NONE SAME_PLAYER +CASTLE_KEEP 
		AvailableAtStart	 = No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End
AddModule ModuleTag_DevastateSpecialPower_Override
	Behavior = DevastateSpecialPower	ModuleTag_DevastateSpecialPower
		SpecialPowerTemplate		= SpellBookDevastation
		Radius				= SPECIALPOWER_DEVASTATION_RADIUS
		TreeValueMultiplier	= 50%	;The value sqeezed out of each tree is multiplied by this compared to what a worker would have gotten for it
		TreeValueTotalCap	= 1500	;And the most you can get for the enitre spell is this, so you can't find the one map that has a 20000 patch of trees in the corner
		TriggerFX			= FX_DevastationFlare
		FX					= FX_Devastation
		AvailableAtStart	= No
		FireWeapon			= DevastationEntWeapon
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End

AddModule ModuleTag_Flood_Override
	Behavior = OCLSpecialPower ModuleTag_Flood
		SpecialPowerTemplate = SpellBookFlood
		OCL                  = OCL_SpellBookFlood
		CreateLocation       = CREATE_AT_LOCATION
		AvailableAtStart	 = No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End
AddModule ModuleTag_Sunflare_Override
	Behavior = OCLSpecialPower ModuleTag_Sunflare
		SpecialPowerTemplate 			= SpellBookSunflare
		OCL                  			= OCL_SpecialPowerSunflare
		CreateLocation       			= CREATE_AT_LOCATION
		AvailableAtStart	 			= No
		AttributeModifierAffects		= ANY +INFANTRY +CAVALRY +MONSTER -HERO ENEMIES
		ReEnableAntiCategory			= Yes
		AttributeModifierWeatherBased	= Yes			
		WeatherDuration					= SPELL_SUNFLARE_DURATION
		ChangeWeather					= SUNNY
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End


     CommandSet = ElvenSpellBookCommandSet_Override
     RadarPriority = NOT_ON_RADAR
     KindOf = SPELL_BOOK IMMOBILE IGNORES_SELECT_ALL INERT
End

ChildObject ElvenChildSpellBook_Override ElvenSpellBook_Override
     CommandSet = ElvenSpellBookCommandSet_Override
End

PlayerTemplate FactionElves
     PurchaseScienceCommandSetMP = ElvenSpellStoreCommandSet_Override
     SpellBookMp = ElvenSpellBook_Override
End

CommandSet DwarvenSpellBookCommandSet_Override
	1 = Command_PurchaseUpgradeMenFortressBanners 
	2 = Command_SpellBookHeal
	3 = Command_SpellBookDevastation
	4 = Command_SpellBookCloudBreak
	5 = Command_SpellBookArrowVolleyGood
	6 = Command_SpellBookChillWind
	7 = Command_SpellBookUndermine
	8 = Command_SpellBookBombard
	9 = Command_SpellBookLoneTower
	10 = Command_SpellBookFlood
	11 = Command_SpellBookSunflare
	12 = Command_SpellBookEarthquake
End


CommandSet DwarvenSpellStoreCommandSet_Override
	1 = Command_PurchaseTechnologyGondorBasicTraining
	2 = Command_PurchaseSpellHeal
	3 = Command_PurchaseSpellDevastation
	4 = Command_PurchaseSpellCloudBreak
	5 = Command_PurchaseSpellArrowVolleyGood
	6 = Command_PurchaseSpellChillWind
	7 = Command_PurchaseSpellUndermine
	8 = Command_PurchaseSpellBombard
	9 = Command_PurchaseSpellLoneTower
	10 = Command_PurchaseSpellFlood
	11 = Command_PurchaseSpellSunflare
	12 = Command_PurchaseSpellEarthquake
End

Object DwarvenSpellBook_Override
	 
	AddModule ModuleTag_Darkness_Override
	        Behavior   = DarknessSpecialPower ModuleTag_Darkness
		SpecialPowerTemplate			= SpellBookDarkness
		AttributeModifier				= SpellBookDarkness
		AttributeModifierAffects		= ANY -INFANTRY -CAVALRY -MONSTER -HERO -HORDE ALLIES
		AttributeModifierWeatherBased	= Yes			
		WeatherDuration					= 1
		ChangeWeather					= SUNNY
		AvailableAtStart				= Yes
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
        End
	
	AddModule ModuleTag_Heal_Override
	Behavior = PlayerHealSpecialPower ModuleTag_Heal
		SpecialPowerTemplate  = SpellBookHeal
		HealAffects			  = INFANTRY CAVALRY MONSTER MACHINE SHIP DOZER
		HealAmount			  = 1.0	; 0.5 = 50% of maximum health
		HealRadius			  = SPELL_HEAL_RADIUS_UNIT_SCAN
		HealFX				  = FX_SpellHealUnitHealBuff		;FX_DefaultUnitHealBuff
		; To replenish hordes a bit
		HealOCL               = OCL_HealSpellHordeReplenishPing
		AvailableAtStart	  = Yes
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End	
	End
AddModule ModuleTag_CloudBreak_Override
	Behavior = CloudBreakSpecialPower	ModuleTag_CloudBreak
		SpecialPowerTemplate			= SpellBookCloudBreak
    	SunbeamObject					= CloudBreakSunbeam
		ObjectSpacing					= 300
		AttributeModifierAffects		= ANY +INFANTRY +CAVALRY +MONSTER -HERO ENEMIES
		ReEnableAntiCategory			= Yes ; cancel negative effects on good guys
		AttributeModifierWeatherBased	= Yes			
		WeatherDuration					= SPELL_CLOUDBREAK_DURATION
		ChangeWeather					= SUNNY
		AvailableAtStart				= No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End
AddModule ModuleTag_ArrowVolleyGood_Override
	Behavior = OCLSpecialPower ModuleTag_ArrowVolleyGood
		SpecialPowerTemplate = SpellBookArrowVolleyGood
		OCL                  = OCL_SpellBookArrowVolley
		CreateLocation       = USE_SECONDARY_OBJECT_LOCATION
		NearestSecondaryObjectFilter = NONE SAME_PLAYER +CASTLE_KEEP 
		AvailableAtStart	 = No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End
AddModule ModuleTag_ChillWind_Override
 	Behavior   = OCLSpecialPower ModuleTag_ChillWind
		SpecialPowerTemplate	= SpellBookChillWind
		OCL				= OCL_SpellBookChillWind
		CreateLocation			= CREATE_AT_LOCATION
		AvailableAtStart		= No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End
AddModule ModuleTag_SpawnLoneTowerDwarf_Override
	Behavior = OCLSpecialPower ModuleTag_SpawnLoneTowerDwarf
		SpecialPowerTemplate = SpellBookSpawnLoneTowerDwarf
		OCL                  = OCL_DwarfSpellBookSpawnLoneTower
		CreateLocation       = CREATE_AT_LOCATION
		AvailableAtStart	 = No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
		//UseDistanceFromCommandCenter	= Yes
		//DistanceFromCommandCenter		= LONE_TOWER_EFFECTIVE_RADIUS
	End	
End



AddModule ModuleTag_Undermine_Override
	Behavior = OCLSpecialPower ModuleTag_Undermine
		SpecialPowerTemplate = SpellBookUndermine
		OCL                  = OCL_SpellBookUndermine
		CreateLocation       = CREATE_AT_LOCATION
		AvailableAtStart	 = No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End
AddModule ModuleTag_Bombard_Override
	Behavior = OCLSpecialPower ModuleTag_Bombard
		SpecialPowerTemplate = SpellBookBombard
		OCL                  = OCL_SpellBookBombardSeed
		CreateLocation       = USE_SECONDARY_OBJECT_LOCATION
		NearestSecondaryObjectFilter = NONE SAME_PLAYER +CASTLE_KEEP 
		AvailableAtStart	 = No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End
AddModule ModuleTag_DevastateSpecialPower_Override
	Behavior = DevastateSpecialPower	ModuleTag_DevastateSpecialPower
		SpecialPowerTemplate		= SpellBookDevastation
		Radius				= SPECIALPOWER_DEVASTATION_RADIUS
		TreeValueMultiplier	= 50%	;The value sqeezed out of each tree is multiplied by this compared to what a worker would have gotten for it
		TreeValueTotalCap	= 1500	;And the most you can get for the enitre spell is this, so you can't find the one map that has a 20000 patch of trees in the corner
		TriggerFX			= FX_DevastationFlare
		FX					= FX_Devastation
		AvailableAtStart	= No
		FireWeapon			= DevastationEntWeapon
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End

AddModule ModuleTag_Flood_Override
	Behavior = OCLSpecialPower ModuleTag_Flood
		SpecialPowerTemplate = SpellBookFlood
		OCL                  = OCL_SpellBookFlood
		CreateLocation       = CREATE_AT_LOCATION
		AvailableAtStart	 = No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End
AddModule ModuleTag_Sunflare_Override
	Behavior = OCLSpecialPower ModuleTag_Sunflare
		SpecialPowerTemplate 			= SpellBookSunflare
		OCL                  			= OCL_SpecialPowerSunflare
		CreateLocation       			= CREATE_AT_LOCATION
		AvailableAtStart	 			= No
		AttributeModifierAffects		= ANY +INFANTRY +CAVALRY +MONSTER -HERO ENEMIES
		ReEnableAntiCategory			= Yes
		AttributeModifierWeatherBased	= Yes			
		WeatherDuration					= SPELL_SUNFLARE_DURATION
		ChangeWeather					= SUNNY
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End


     CommandSet = DwarvenSpellBookCommandSet_Override
     RadarPriority = NOT_ON_RADAR
     KindOf = SPELL_BOOK IMMOBILE IGNORES_SELECT_ALL INERT
End

ChildObject DwarvenChildSpellBook_Override DwarvenSpellBook_Override
     CommandSet = DwarvenSpellBookCommandSet_Override
End

PlayerTemplate FactionDwarves
     PurchaseScienceCommandSetMP = DwarvenSpellStoreCommandSet_Override
     SpellBookMp = DwarvenSpellBook_Override
End

CommandSet IsengardSpellBookCommandSet_Override
	1 = Command_PurchaseUpgradeMenFortressBanners 
	2 = Command_SpellBookHeal
	3 = Command_SpellBookDevastation
	4 = Command_SpellBookCloudBreak
	5 = Command_SpellBookArrowVolleyGood
	6 = Command_SpellBookChillWind
	7 = Command_SpellBookUndermine
	8 = Command_SpellBookBombard
	9 = Command_SpellBookLoneTower
	10 = Command_SpellBookFlood
	11 = Command_SpellBookSunflare
	12 = Command_SpellBookEarthquake
End


CommandSet IsengardSpellStoreCommandSet_Override
	1 = Command_PurchaseTechnologyGondorBasicTraining
	2 = Command_PurchaseSpellHeal
	3 = Command_PurchaseSpellDevastation
	4 = Command_PurchaseSpellCloudBreak
	5 = Command_PurchaseSpellArrowVolleyGood
	6 = Command_PurchaseSpellChillWind
	7 = Command_PurchaseSpellUndermine
	8 = Command_PurchaseSpellBombard
	9 = Command_PurchaseSpellLoneTower
	10 = Command_PurchaseSpellFlood
	11 = Command_PurchaseSpellSunflare
	12 = Command_PurchaseSpellEarthquake
End

Object IsengardSpellBook_Override
	 
	AddModule ModuleTag_Darkness_Override
	        Behavior   = DarknessSpecialPower ModuleTag_Darkness
		SpecialPowerTemplate			= SpellBookDarkness
		AttributeModifier				= SpellBookDarkness
		AttributeModifierAffects		= ANY -INFANTRY -CAVALRY -MONSTER -HERO -HORDE ALLIES
		AttributeModifierWeatherBased	= Yes			
		WeatherDuration					= 1
		ChangeWeather					= SUNNY
		AvailableAtStart				= Yes
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
        End
	
	AddModule ModuleTag_Heal_Override
	Behavior = PlayerHealSpecialPower ModuleTag_Heal
		SpecialPowerTemplate  = SpellBookHeal
		HealAffects			  = INFANTRY CAVALRY MONSTER MACHINE SHIP DOZER
		HealAmount			  = 1.0	; 0.5 = 50% of maximum health
		HealRadius			  = SPELL_HEAL_RADIUS_UNIT_SCAN
		HealFX				  = FX_SpellHealUnitHealBuff		;FX_DefaultUnitHealBuff
		; To replenish hordes a bit
		HealOCL               = OCL_HealSpellHordeReplenishPing
		AvailableAtStart	  = Yes
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End	
	End
AddModule ModuleTag_CloudBreak_Override
	Behavior = CloudBreakSpecialPower	ModuleTag_CloudBreak
		SpecialPowerTemplate			= SpellBookCloudBreak
    	SunbeamObject					= CloudBreakSunbeam
		ObjectSpacing					= 300
		AttributeModifierAffects		= ANY +INFANTRY +CAVALRY +MONSTER -HERO ENEMIES
		ReEnableAntiCategory			= Yes ; cancel negative effects on good guys
		AttributeModifierWeatherBased	= Yes			
		WeatherDuration					= SPELL_CLOUDBREAK_DURATION
		ChangeWeather					= SUNNY
		AvailableAtStart				= No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End
AddModule ModuleTag_ArrowVolleyGood_Override
	Behavior = OCLSpecialPower ModuleTag_ArrowVolleyGood
		SpecialPowerTemplate = SpellBookArrowVolleyGood
		OCL                  = OCL_SpellBookArrowVolley
		CreateLocation       = USE_SECONDARY_OBJECT_LOCATION
		NearestSecondaryObjectFilter = NONE SAME_PLAYER +CASTLE_KEEP 
		AvailableAtStart	 = No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End
AddModule ModuleTag_ChillWind_Override
 	Behavior   = OCLSpecialPower ModuleTag_ChillWind
		SpecialPowerTemplate	= SpellBookChillWind
		OCL				= OCL_SpellBookChillWind
		CreateLocation			= CREATE_AT_LOCATION
		AvailableAtStart		= No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End
AddModule ModuleTag_SpawnLoneTowerDwarf_Override
	Behavior = OCLSpecialPower ModuleTag_SpawnLoneTowerDwarf
		SpecialPowerTemplate = SpellBookSpawnLoneTowerDwarf
		OCL                  = OCL_DwarfSpellBookSpawnLoneTower
		CreateLocation       = CREATE_AT_LOCATION
		AvailableAtStart	 = No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
		//UseDistanceFromCommandCenter	= Yes
		//DistanceFromCommandCenter		= LONE_TOWER_EFFECTIVE_RADIUS
	End	
End



AddModule ModuleTag_Undermine_Override
	Behavior = OCLSpecialPower ModuleTag_Undermine
		SpecialPowerTemplate = SpellBookUndermine
		OCL                  = OCL_SpellBookUndermine
		CreateLocation       = CREATE_AT_LOCATION
		AvailableAtStart	 = No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End
AddModule ModuleTag_Bombard_Override
	Behavior = OCLSpecialPower ModuleTag_Bombard
		SpecialPowerTemplate = SpellBookBombard
		OCL                  = OCL_SpellBookBombardSeed
		CreateLocation       = USE_SECONDARY_OBJECT_LOCATION
		NearestSecondaryObjectFilter = NONE SAME_PLAYER +CASTLE_KEEP 
		AvailableAtStart	 = No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End
AddModule ModuleTag_DevastateSpecialPower_Override
	Behavior = DevastateSpecialPower	ModuleTag_DevastateSpecialPower
		SpecialPowerTemplate		= SpellBookDevastation
		Radius				= SPECIALPOWER_DEVASTATION_RADIUS
		TreeValueMultiplier	= 50%	;The value sqeezed out of each tree is multiplied by this compared to what a worker would have gotten for it
		TreeValueTotalCap	= 1500	;And the most you can get for the enitre spell is this, so you can't find the one map that has a 20000 patch of trees in the corner
		TriggerFX			= FX_DevastationFlare
		FX					= FX_Devastation
		AvailableAtStart	= No
		FireWeapon			= DevastationEntWeapon
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End

AddModule ModuleTag_Flood_Override
	Behavior = OCLSpecialPower ModuleTag_Flood
		SpecialPowerTemplate = SpellBookFlood
		OCL                  = OCL_SpellBookFlood
		CreateLocation       = CREATE_AT_LOCATION
		AvailableAtStart	 = No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End
AddModule ModuleTag_Sunflare_Override
	Behavior = OCLSpecialPower ModuleTag_Sunflare
		SpecialPowerTemplate 			= SpellBookSunflare
		OCL                  			= OCL_SpecialPowerSunflare
		CreateLocation       			= CREATE_AT_LOCATION
		AvailableAtStart	 			= No
		AttributeModifierAffects		= ANY +INFANTRY +CAVALRY +MONSTER -HERO ENEMIES
		ReEnableAntiCategory			= Yes
		AttributeModifierWeatherBased	= Yes			
		WeatherDuration					= SPELL_SUNFLARE_DURATION
		ChangeWeather					= SUNNY
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End


     CommandSet = IsengardSpellBookCommandSet_Override
     RadarPriority = NOT_ON_RADAR
     KindOf = SPELL_BOOK IMMOBILE IGNORES_SELECT_ALL INERT
End

ChildObject IsengardChildSpellBook_Override IsengardSpellBook_Override
     CommandSet = IsengardSpellBookCommandSet_Override
End

PlayerTemplate FactionIsengard
     PurchaseScienceCommandSetMP = IsengardSpellStoreCommandSet_Override
     SpellBookMp = IsengardSpellBook_Override
End

CommandSet MordorSpellBookCommandSet_Override
	1 = Command_PurchaseUpgradeMenFortressBanners 
	2 = Command_SpellBookHeal
	3 = Command_SpellBookDevastation
	4 = Command_SpellBookCloudBreak
	5 = Command_SpellBookArrowVolleyGood
	6 = Command_SpellBookChillWind
	7 = Command_SpellBookUndermine
	8 = Command_SpellBookBombard
	9 = Command_SpellBookLoneTower
	10 = Command_SpellBookFlood
	11 = Command_SpellBookSunflare
	12 = Command_SpellBookEarthquake
End


CommandSet MordorSpellStoreCommandSet_Override
	1 = Command_PurchaseTechnologyGondorBasicTraining
	2 = Command_PurchaseSpellHeal
	3 = Command_PurchaseSpellDevastation
	4 = Command_PurchaseSpellCloudBreak
	5 = Command_PurchaseSpellArrowVolleyGood
	6 = Command_PurchaseSpellChillWind
	7 = Command_PurchaseSpellUndermine
	8 = Command_PurchaseSpellBombard
	9 = Command_PurchaseSpellLoneTower
	10 = Command_PurchaseSpellFlood
	11 = Command_PurchaseSpellSunflare
	12 = Command_PurchaseSpellEarthquake
End

Object MordorSpellBook_Override
	 
	AddModule ModuleTag_Darkness_Override
	        Behavior   = DarknessSpecialPower ModuleTag_Darkness
		SpecialPowerTemplate			= SpellBookDarkness
		AttributeModifier				= SpellBookDarkness
		AttributeModifierAffects		= ANY -INFANTRY -CAVALRY -MONSTER -HERO -HORDE ALLIES
		AttributeModifierWeatherBased	= Yes			
		WeatherDuration					= 1
		ChangeWeather					= SUNNY
		AvailableAtStart				= Yes
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
        End
	
	AddModule ModuleTag_Heal_Override
	Behavior = PlayerHealSpecialPower ModuleTag_Heal
		SpecialPowerTemplate  = SpellBookHeal
		HealAffects			  = INFANTRY CAVALRY MONSTER MACHINE SHIP DOZER
		HealAmount			  = 1.0	; 0.5 = 50% of maximum health
		HealRadius			  = SPELL_HEAL_RADIUS_UNIT_SCAN
		HealFX				  = FX_SpellHealUnitHealBuff		;FX_DefaultUnitHealBuff
		; To replenish hordes a bit
		HealOCL               = OCL_HealSpellHordeReplenishPing
		AvailableAtStart	  = Yes
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End	
	End
AddModule ModuleTag_CloudBreak_Override
	Behavior = CloudBreakSpecialPower	ModuleTag_CloudBreak
		SpecialPowerTemplate			= SpellBookCloudBreak
    	SunbeamObject					= CloudBreakSunbeam
		ObjectSpacing					= 300
		AttributeModifierAffects		= ANY +INFANTRY +CAVALRY +MONSTER -HERO ENEMIES
		ReEnableAntiCategory			= Yes ; cancel negative effects on good guys
		AttributeModifierWeatherBased	= Yes			
		WeatherDuration					= SPELL_CLOUDBREAK_DURATION
		ChangeWeather					= SUNNY
		AvailableAtStart				= No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End
AddModule ModuleTag_ArrowVolleyGood_Override
	Behavior = OCLSpecialPower ModuleTag_ArrowVolleyGood
		SpecialPowerTemplate = SpellBookArrowVolleyGood
		OCL                  = OCL_SpellBookArrowVolley
		CreateLocation       = USE_SECONDARY_OBJECT_LOCATION
		NearestSecondaryObjectFilter = NONE SAME_PLAYER +CASTLE_KEEP 
		AvailableAtStart	 = No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End
AddModule ModuleTag_ChillWind_Override
 	Behavior   = OCLSpecialPower ModuleTag_ChillWind
		SpecialPowerTemplate	= SpellBookChillWind
		OCL				= OCL_SpellBookChillWind
		CreateLocation			= CREATE_AT_LOCATION
		AvailableAtStart		= No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End
AddModule ModuleTag_SpawnLoneTowerDwarf_Override
	Behavior = OCLSpecialPower ModuleTag_SpawnLoneTowerDwarf
		SpecialPowerTemplate = SpellBookSpawnLoneTowerDwarf
		OCL                  = OCL_DwarfSpellBookSpawnLoneTower
		CreateLocation       = CREATE_AT_LOCATION
		AvailableAtStart	 = No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
		//UseDistanceFromCommandCenter	= Yes
		//DistanceFromCommandCenter		= LONE_TOWER_EFFECTIVE_RADIUS
	End	
End



AddModule ModuleTag_Undermine_Override
	Behavior = OCLSpecialPower ModuleTag_Undermine
		SpecialPowerTemplate = SpellBookUndermine
		OCL                  = OCL_SpellBookUndermine
		CreateLocation       = CREATE_AT_LOCATION
		AvailableAtStart	 = No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End
AddModule ModuleTag_Bombard_Override
	Behavior = OCLSpecialPower ModuleTag_Bombard
		SpecialPowerTemplate = SpellBookBombard
		OCL                  = OCL_SpellBookBombardSeed
		CreateLocation       = USE_SECONDARY_OBJECT_LOCATION
		NearestSecondaryObjectFilter = NONE SAME_PLAYER +CASTLE_KEEP 
		AvailableAtStart	 = No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End
AddModule ModuleTag_DevastateSpecialPower_Override
	Behavior = DevastateSpecialPower	ModuleTag_DevastateSpecialPower
		SpecialPowerTemplate		= SpellBookDevastation
		Radius				= SPECIALPOWER_DEVASTATION_RADIUS
		TreeValueMultiplier	= 50%	;The value sqeezed out of each tree is multiplied by this compared to what a worker would have gotten for it
		TreeValueTotalCap	= 1500	;And the most you can get for the enitre spell is this, so you can't find the one map that has a 20000 patch of trees in the corner
		TriggerFX			= FX_DevastationFlare
		FX					= FX_Devastation
		AvailableAtStart	= No
		FireWeapon			= DevastationEntWeapon
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End

AddModule ModuleTag_Flood_Override
	Behavior = OCLSpecialPower ModuleTag_Flood
		SpecialPowerTemplate = SpellBookFlood
		OCL                  = OCL_SpellBookFlood
		CreateLocation       = CREATE_AT_LOCATION
		AvailableAtStart	 = No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End
AddModule ModuleTag_Sunflare_Override
	Behavior = OCLSpecialPower ModuleTag_Sunflare
		SpecialPowerTemplate 			= SpellBookSunflare
		OCL                  			= OCL_SpecialPowerSunflare
		CreateLocation       			= CREATE_AT_LOCATION
		AvailableAtStart	 			= No
		AttributeModifierAffects		= ANY +INFANTRY +CAVALRY +MONSTER -HERO ENEMIES
		ReEnableAntiCategory			= Yes
		AttributeModifierWeatherBased	= Yes			
		WeatherDuration					= SPELL_SUNFLARE_DURATION
		ChangeWeather					= SUNNY
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End


     CommandSet = MordorSpellBookCommandSet_Override
     RadarPriority = NOT_ON_RADAR
     KindOf = SPELL_BOOK IMMOBILE IGNORES_SELECT_ALL INERT
End

ChildObject MordorChildSpellBook_Override MordorSpellBook_Override
     CommandSet = MordorSpellBookCommandSet_Override
End

PlayerTemplate FactionMordor
     PurchaseScienceCommandSetMP = MordorSpellStoreCommandSet_Override
     SpellBookMp = MordorSpellBook_Override
End

CommandSet WildSpellBookCommandSet_Override
	1 = Command_PurchaseUpgradeMenFortressBanners 
	2 = Command_SpellBookHeal
	3 = Command_SpellBookDevastation
	4 = Command_SpellBookCloudBreak
	5 = Command_SpellBookArrowVolleyGood
	6 = Command_SpellBookChillWind
	7 = Command_SpellBookUndermine
	8 = Command_SpellBookBombard
	9 = Command_SpellBookLoneTower
	10 = Command_SpellBookFlood
	11 = Command_SpellBookSunflare
	12 = Command_SpellBookEarthquake
End


CommandSet WildSpellStoreCommandSet_Override
	1 = Command_PurchaseTechnologyGondorBasicTraining
	2 = Command_PurchaseSpellHeal
	3 = Command_PurchaseSpellDevastation
	4 = Command_PurchaseSpellCloudBreak
	5 = Command_PurchaseSpellArrowVolleyGood
	6 = Command_PurchaseSpellChillWind
	7 = Command_PurchaseSpellUndermine
	8 = Command_PurchaseSpellBombard
	9 = Command_PurchaseSpellLoneTower
	10 = Command_PurchaseSpellFlood
	11 = Command_PurchaseSpellSunflare
	12 = Command_PurchaseSpellEarthquake
End

Object WildSpellBook_Override
	 
	AddModule ModuleTag_Darkness_Override
	        Behavior   = DarknessSpecialPower ModuleTag_Darkness
		SpecialPowerTemplate			= SpellBookDarkness
		AttributeModifier				= SpellBookDarkness
		AttributeModifierAffects		= ANY -INFANTRY -CAVALRY -MONSTER -HERO -HORDE ALLIES
		AttributeModifierWeatherBased	= Yes			
		WeatherDuration					= 1
		ChangeWeather					= SUNNY
		AvailableAtStart				= Yes
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
        End
	
	AddModule ModuleTag_Heal_Override
	Behavior = PlayerHealSpecialPower ModuleTag_Heal
		SpecialPowerTemplate  = SpellBookHeal
		HealAffects			  = INFANTRY CAVALRY MONSTER MACHINE SHIP DOZER
		HealAmount			  = 1.0	; 0.5 = 50% of maximum health
		HealRadius			  = SPELL_HEAL_RADIUS_UNIT_SCAN
		HealFX				  = FX_SpellHealUnitHealBuff		;FX_DefaultUnitHealBuff
		; To replenish hordes a bit
		HealOCL               = OCL_HealSpellHordeReplenishPing
		AvailableAtStart	  = Yes
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End	
	End
AddModule ModuleTag_CloudBreak_Override
	Behavior = CloudBreakSpecialPower	ModuleTag_CloudBreak
		SpecialPowerTemplate			= SpellBookCloudBreak
    	SunbeamObject					= CloudBreakSunbeam
		ObjectSpacing					= 300
		AttributeModifierAffects		= ANY +INFANTRY +CAVALRY +MONSTER -HERO ENEMIES
		ReEnableAntiCategory			= Yes ; cancel negative effects on good guys
		AttributeModifierWeatherBased	= Yes			
		WeatherDuration					= SPELL_CLOUDBREAK_DURATION
		ChangeWeather					= SUNNY
		AvailableAtStart				= No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End
AddModule ModuleTag_ArrowVolleyGood_Override
	Behavior = OCLSpecialPower ModuleTag_ArrowVolleyGood
		SpecialPowerTemplate = SpellBookArrowVolleyGood
		OCL                  = OCL_SpellBookArrowVolley
		CreateLocation       = USE_SECONDARY_OBJECT_LOCATION
		NearestSecondaryObjectFilter = NONE SAME_PLAYER +CASTLE_KEEP 
		AvailableAtStart	 = No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End
AddModule ModuleTag_ChillWind_Override
 	Behavior   = OCLSpecialPower ModuleTag_ChillWind
		SpecialPowerTemplate	= SpellBookChillWind
		OCL				= OCL_SpellBookChillWind
		CreateLocation			= CREATE_AT_LOCATION
		AvailableAtStart		= No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End
AddModule ModuleTag_SpawnLoneTowerDwarf_Override
	Behavior = OCLSpecialPower ModuleTag_SpawnLoneTowerDwarf
		SpecialPowerTemplate = SpellBookSpawnLoneTowerDwarf
		OCL                  = OCL_DwarfSpellBookSpawnLoneTower
		CreateLocation       = CREATE_AT_LOCATION
		AvailableAtStart	 = No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
		//UseDistanceFromCommandCenter	= Yes
		//DistanceFromCommandCenter		= LONE_TOWER_EFFECTIVE_RADIUS
	End	
End



AddModule ModuleTag_Undermine_Override
	Behavior = OCLSpecialPower ModuleTag_Undermine
		SpecialPowerTemplate = SpellBookUndermine
		OCL                  = OCL_SpellBookUndermine
		CreateLocation       = CREATE_AT_LOCATION
		AvailableAtStart	 = No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End
AddModule ModuleTag_Bombard_Override
	Behavior = OCLSpecialPower ModuleTag_Bombard
		SpecialPowerTemplate = SpellBookBombard
		OCL                  = OCL_SpellBookBombardSeed
		CreateLocation       = USE_SECONDARY_OBJECT_LOCATION
		NearestSecondaryObjectFilter = NONE SAME_PLAYER +CASTLE_KEEP 
		AvailableAtStart	 = No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End
AddModule ModuleTag_DevastateSpecialPower_Override
	Behavior = DevastateSpecialPower	ModuleTag_DevastateSpecialPower
		SpecialPowerTemplate		= SpellBookDevastation
		Radius				= SPECIALPOWER_DEVASTATION_RADIUS
		TreeValueMultiplier	= 50%	;The value sqeezed out of each tree is multiplied by this compared to what a worker would have gotten for it
		TreeValueTotalCap	= 1500	;And the most you can get for the enitre spell is this, so you can't find the one map that has a 20000 patch of trees in the corner
		TriggerFX			= FX_DevastationFlare
		FX					= FX_Devastation
		AvailableAtStart	= No
		FireWeapon			= DevastationEntWeapon
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End

AddModule ModuleTag_Flood_Override
	Behavior = OCLSpecialPower ModuleTag_Flood
		SpecialPowerTemplate = SpellBookFlood
		OCL                  = OCL_SpellBookFlood
		CreateLocation       = CREATE_AT_LOCATION
		AvailableAtStart	 = No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End
AddModule ModuleTag_Sunflare_Override
	Behavior = OCLSpecialPower ModuleTag_Sunflare
		SpecialPowerTemplate 			= SpellBookSunflare
		OCL                  			= OCL_SpecialPowerSunflare
		CreateLocation       			= CREATE_AT_LOCATION
		AvailableAtStart	 			= No
		AttributeModifierAffects		= ANY +INFANTRY +CAVALRY +MONSTER -HERO ENEMIES
		ReEnableAntiCategory			= Yes
		AttributeModifierWeatherBased	= Yes			
		WeatherDuration					= SPELL_SUNFLARE_DURATION
		ChangeWeather					= SUNNY
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End


     CommandSet = WildSpellBookCommandSet_Override
     RadarPriority = NOT_ON_RADAR
     KindOf = SPELL_BOOK IMMOBILE IGNORES_SELECT_ALL INERT
End

ChildObject WildChildSpellBook_Override WildSpellBook_Override
     CommandSet = WildSpellBookCommandSet_Override
End

PlayerTemplate FactionWild
     PurchaseScienceCommandSetMP = WildSpellStoreCommandSet_Override
     SpellBookMp = WildSpellBook_Override
End

CommandSet AngmarSpellBookCommandSet_Override
	1 = Command_PurchaseUpgradeMenFortressBanners 
	2 = Command_SpellBookHeal
	3 = Command_SpellBookDevastation
	4 = Command_SpellBookCloudBreak
	5 = Command_SpellBookArrowVolleyGood
	6 = Command_SpellBookChillWind
	7 = Command_SpellBookUndermine
	8 = Command_SpellBookBombard
	9 = Command_SpellBookLoneTower
	10 = Command_SpellBookFlood
	11 = Command_SpellBookSunflare
	12 = Command_SpellBookEarthquake
End


CommandSet AngmarSpellStoreCommandSet_Override
	1 = Command_PurchaseTechnologyGondorBasicTraining
	2 = Command_PurchaseSpellHeal
	3 = Command_PurchaseSpellDevastation
	4 = Command_PurchaseSpellCloudBreak
	5 = Command_PurchaseSpellArrowVolleyGood
	6 = Command_PurchaseSpellChillWind
	7 = Command_PurchaseSpellUndermine
	8 = Command_PurchaseSpellBombard
	9 = Command_PurchaseSpellLoneTower
	10 = Command_PurchaseSpellFlood
	11 = Command_PurchaseSpellSunflare
	12 = Command_PurchaseSpellEarthquake
End

Object AngmarSpellBook_Override
	 
	AddModule ModuleTag_Darkness_Override
	        Behavior   = DarknessSpecialPower ModuleTag_Darkness
		SpecialPowerTemplate			= SpellBookDarkness
		AttributeModifier				= SpellBookDarkness
		AttributeModifierAffects		= ANY -INFANTRY -CAVALRY -MONSTER -HERO -HORDE ALLIES
		AttributeModifierWeatherBased	= Yes			
		WeatherDuration					= 1
		ChangeWeather					= SUNNY
		AvailableAtStart				= Yes
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
        End
	
	AddModule ModuleTag_Heal_Override
	Behavior = PlayerHealSpecialPower ModuleTag_Heal
		SpecialPowerTemplate  = SpellBookHeal
		HealAffects			  = INFANTRY CAVALRY MONSTER MACHINE SHIP DOZER
		HealAmount			  = 1.0	; 0.5 = 50% of maximum health
		HealRadius			  = SPELL_HEAL_RADIUS_UNIT_SCAN
		HealFX				  = FX_SpellHealUnitHealBuff		;FX_DefaultUnitHealBuff
		; To replenish hordes a bit
		HealOCL               = OCL_HealSpellHordeReplenishPing
		AvailableAtStart	  = Yes
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End	
	End
AddModule ModuleTag_CloudBreak_Override
	Behavior = CloudBreakSpecialPower	ModuleTag_CloudBreak
		SpecialPowerTemplate			= SpellBookCloudBreak
    	SunbeamObject					= CloudBreakSunbeam
		ObjectSpacing					= 300
		AttributeModifierAffects		= ANY +INFANTRY +CAVALRY +MONSTER -HERO ENEMIES
		ReEnableAntiCategory			= Yes ; cancel negative effects on good guys
		AttributeModifierWeatherBased	= Yes			
		WeatherDuration					= SPELL_CLOUDBREAK_DURATION
		ChangeWeather					= SUNNY
		AvailableAtStart				= No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End
AddModule ModuleTag_ArrowVolleyGood_Override
	Behavior = OCLSpecialPower ModuleTag_ArrowVolleyGood
		SpecialPowerTemplate = SpellBookArrowVolleyGood
		OCL                  = OCL_SpellBookArrowVolley
		CreateLocation       = USE_SECONDARY_OBJECT_LOCATION
		NearestSecondaryObjectFilter = NONE SAME_PLAYER +CASTLE_KEEP 
		AvailableAtStart	 = No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End
AddModule ModuleTag_ChillWind_Override
 	Behavior   = OCLSpecialPower ModuleTag_ChillWind
		SpecialPowerTemplate	= SpellBookChillWind
		OCL				= OCL_SpellBookChillWind
		CreateLocation			= CREATE_AT_LOCATION
		AvailableAtStart		= No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End
AddModule ModuleTag_SpawnLoneTowerDwarf_Override
	Behavior = OCLSpecialPower ModuleTag_SpawnLoneTowerDwarf
		SpecialPowerTemplate = SpellBookSpawnLoneTowerDwarf
		OCL                  = OCL_DwarfSpellBookSpawnLoneTower
		CreateLocation       = CREATE_AT_LOCATION
		AvailableAtStart	 = No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
		//UseDistanceFromCommandCenter	= Yes
		//DistanceFromCommandCenter		= LONE_TOWER_EFFECTIVE_RADIUS
	End	
End



AddModule ModuleTag_Undermine_Override
	Behavior = OCLSpecialPower ModuleTag_Undermine
		SpecialPowerTemplate = SpellBookUndermine
		OCL                  = OCL_SpellBookUndermine
		CreateLocation       = CREATE_AT_LOCATION
		AvailableAtStart	 = No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End
AddModule ModuleTag_Bombard_Override
	Behavior = OCLSpecialPower ModuleTag_Bombard
		SpecialPowerTemplate = SpellBookBombard
		OCL                  = OCL_SpellBookBombardSeed
		CreateLocation       = USE_SECONDARY_OBJECT_LOCATION
		NearestSecondaryObjectFilter = NONE SAME_PLAYER +CASTLE_KEEP 
		AvailableAtStart	 = No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End
AddModule ModuleTag_DevastateSpecialPower_Override
	Behavior = DevastateSpecialPower	ModuleTag_DevastateSpecialPower
		SpecialPowerTemplate		= SpellBookDevastation
		Radius				= SPECIALPOWER_DEVASTATION_RADIUS
		TreeValueMultiplier	= 50%	;The value sqeezed out of each tree is multiplied by this compared to what a worker would have gotten for it
		TreeValueTotalCap	= 1500	;And the most you can get for the enitre spell is this, so you can't find the one map that has a 20000 patch of trees in the corner
		TriggerFX			= FX_DevastationFlare
		FX					= FX_Devastation
		AvailableAtStart	= No
		FireWeapon			= DevastationEntWeapon
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End

AddModule ModuleTag_Flood_Override
	Behavior = OCLSpecialPower ModuleTag_Flood
		SpecialPowerTemplate = SpellBookFlood
		OCL                  = OCL_SpellBookFlood
		CreateLocation       = CREATE_AT_LOCATION
		AvailableAtStart	 = No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End
AddModule ModuleTag_Sunflare_Override
	Behavior = OCLSpecialPower ModuleTag_Sunflare
		SpecialPowerTemplate 			= SpellBookSunflare
		OCL                  			= OCL_SpecialPowerSunflare
		CreateLocation       			= CREATE_AT_LOCATION
		AvailableAtStart	 			= No
		AttributeModifierAffects		= ANY +INFANTRY +CAVALRY +MONSTER -HERO ENEMIES
		ReEnableAntiCategory			= Yes
		AttributeModifierWeatherBased	= Yes			
		WeatherDuration					= SPELL_SUNFLARE_DURATION
		ChangeWeather					= SUNNY
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End


     CommandSet = AngmarSpellBookCommandSet_Override
     RadarPriority = NOT_ON_RADAR
     KindOf = SPELL_BOOK IMMOBILE IGNORES_SELECT_ALL INERT
End

ChildObject WildChildSpellBook_Override WildSpellBook_Override
     CommandSet = WildSpellBookCommandSet_Override
End

PlayerTemplate FactionAngmar
     PurchaseScienceCommandSetMP = WildSpellStoreCommandSet_Override
     SpellBookMp = AngmarSpellBook_Override
End