;; ---------------------------------------------------------------------------------
;;   Keep Defense by SilverBane`
;; ---------------------------------------------------------------------------------

;SCRIPTED BY SILVERBANE` 1.07.2014 (1st July 2014) - DO NOT MODIFY


Weather

  HardwareFogColor = R:246 G:240 B:212

  HardwareFogEnable = Yes

  HardwareFogStart = 725

  HardwareFogEnd = 2000


End

;-----------------------------------------------------------------

AIData

  LowLodTreeName = TreeLowLODGreyHavens

END

;-----------------------------------------------------------------



;VITAL FOR SURVIVING - THIS MAKES THIS OBJECT ACT LIKE A FORTRESS SO YOU CAN USE POWERS, SURVIVE ETC

Object Tower_FromZeroHourThatCanTopple
	KindOf = IMMOBILE BASE_FOUNDATION CASTLE_CENTER CAN_CAST_REFLECTIONS CASTLE_KEEP COMMANDCENTER PRELOAD STRUCTURE SELECTABLE SCORE FS_FACTORY AUTO_RALLYPOINT MP_COUNT_FOR_VICTORY NEED_BASE_FOUNDATION MADE_OF_STONE LIVING_WORLD_BUILDING_MIRROR
End

Object GondorRanger_Summoned ; these are the guys from the top of the walls wich always guard

RemoveModule ModuleTag_LifetimeUpdate
KindOf = PRELOAD SELECTABLE UNATTACKABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE THROWN_OBJECT GRAB_AND_DROP ATTACK_NEEDS_LINE_OF_SIGHT ARCHER

CommandPoints = 0 


	LocomotorSet
		Locomotor = HumanLocomotor
		Condition = SET_NORMAL
		Speed     = 0
	End

End



PlayerTemplate FactionCivilian  ; makes ai able to fire spells
IntrinsicSciencesMP = SCIENCE_EVIL SCIENCE_GOOD
PurchaseScienceCommandSetMP = FortressDefenseSpellStoreCommandSet
SpellBookMp = FortressDefenseSpellBook
StartingBuilding = NONE
StartingUnit0 = NONE
StartingUnit1 = NONE
End

















PlayerTemplate FactionMen
IntrinsicSciencesMP = SCIENCE_EVIL SCIENCE_GOOD
PurchaseScienceCommandSetMP = FortressDefenseSpellStoreCommandSet
SpellBookMp = FortressDefenseSpellBook
StartingBuilding = NONE
StartingUnit0 = NONE
StartingUnit1 = NONE
End

PlayerTemplate FactionElves
IntrinsicSciencesMP = SCIENCE_EVIL SCIENCE_GOOD
PurchaseScienceCommandSetMP = FortressDefenseSpellStoreCommandSet
SpellBookMp = FortressDefenseSpellBook
StartingBuilding = NONE
StartingUnit0 = NONE
StartingUnit1 = NONE
End

PlayerTemplate FactionDwarves
IntrinsicSciencesMP = SCIENCE_EVIL SCIENCE_GOOD
PurchaseScienceCommandSetMP = FortressDefenseSpellStoreCommandSet
SpellBookMp = FortressDefenseSpellBook
StartingBuilding = NONE
StartingUnit0 = NONE
StartingUnit1 = NONE
End

PlayerTemplate FactionIsengard
IntrinsicSciencesMP = SCIENCE_EVIL SCIENCE_GOOD
PurchaseScienceCommandSetMP = FortressDefenseSpellStoreCommandSet
SpellBookMp = FortressDefenseSpellBook
StartingBuilding = NONE
StartingUnit0 = NONE
StartingUnit1 = NONE
End



PlayerTemplate FactionWild
IntrinsicSciencesMP = SCIENCE_EVIL SCIENCE_GOOD
PurchaseScienceCommandSetMP = FortressDefenseSpellStoreCommandSet
SpellBookMp = FortressDefenseSpellBook
StartingBuilding = NONE
StartingUnit0 = NONE
StartingUnit1 = NONE
End


PlayerTemplate FactionMordor
IntrinsicSciencesMP = SCIENCE_EVIL SCIENCE_GOOD
PurchaseScienceCommandSetMP = FortressDefenseSpellStoreCommandSet
SpellBookMp = FortressDefenseSpellBook
StartingBuilding = NONE
StartingUnit0 = NONE
StartingUnit1 = NONE
End


;===============for the spellbook






Science SCIENCE_Fury
PrerequisiteSciences = SCIENCE_EVIL
SciencePurchasePointCost = 1
SciencePurchasePointCostMP = 1
IsGrantable = Yes
End




Science SCIENCE_Narya
PrerequisiteSciences = SCIENCE_GOOD
SciencePurchasePointCost = 1
SciencePurchasePointCostMP = 1
IsGrantable = Yes
End




Science SCIENCE_Lottery
PrerequisiteSciences = SCIENCE_GOOD OR SCIENCE_EVIL
SciencePurchasePointCost = 1
SciencePurchasePointCostMP = 1
IsGrantable = Yes
End



SpecialPower SpellBookFury
	Enum				= SPECIAL_SPELL_BOOK_FUEL_THE_FIRES
	RequiredSciences		= SCIENCE_Fury
	ReloadTime      		= 520000 ; in milliseconds

End


SpecialPower SpellBookNarya
	Enum				= SPECIAL_SPELL_BOOK_CLOUD_BREAK
	RequiredSciences		= SCIENCE_Narya
	ReloadTime      		= 520000 ; in milliseconds

End


SpecialPower SpellBookLottery
	Enum				= SPECIAL_SPELL_BOOK_EYE_OF_SAURON
	RequiredSciences		= SCIENCE_Lottery
	ReloadTime      		= 300000 ; in milliseconds

End


ModifierList FuryBonus
	Category = LEVEL
	Modifier = DAMAGE_MULT    200% ; +100% damage
	Duration = 45000	        ; 45s			
End


ModifierList NaryaBonus
	Category = LEVEL
	Modifier = ARMOR    75% ; +50 armor
	Modifier = RATE_OF_FIRE   150% ; +50% attack speed
	Duration = 45000	        ; 45s			
End




CommandButton Command_SpellBookCalltheHorde          ;fury
	Command				= SPELL_BOOK
	SpecialPower		= SpellBookFury
	TextLabel			= CONTROLBAR:SoSBonus
	DescriptLabel		= CONTROLBAR:TooltipSoSBonus   
	ButtonImage			= SBEvil_CalltheHorde
	Options			= CANCELABLE
	ButtonBorderType   	= ACTION  ;UPGRADE
	InPalantir		= Yes
	Radial			= No
  UnitSpecificSound			= CaH_BerserkerRage
End



CommandButton Command_SpecialAbilityIgnite              ; narya
	Command				= SPELL_BOOK
	SpecialPower		= SpellBookNarya
	TextLabel			= CONTROLBAR:FoLBonus
	DescriptLabel		= CONTROLBAR:TooltipFoLBonus   
	ButtonImage			= HSBalrogIgnite
	Options			= CANCELABLE
	ButtonBorderType   	= ACTION  ;UPGRADE
	InPalantir		= Yes
	Radial			= No
  UnitSpecificSound			= GenericSpell
End


CommandButton Command_LurtzPillage                 ;lottery
  Command                 = SPELL_BOOK
  SpecialPower            = SpellBookLottery
	TextLabel			= CONTROLBAR:Lottery
	DescriptLabel		= CONTROLBAR:TooltipLottery
	ButtonImage			= HSBalrogIgnite
	Options			= CANCELABLE
	ButtonBorderType   	= ACTION  ;UPGRADE
	InPalantir		= Yes
	Radial			= No
  UnitSpecificSound			= GUI_GollumHappy
End




CommandSet FortressDefenseSpellBookCommandSet
	1 = Command_SpellBookScavenger
        2 = Command_SpellBookHeal
        3 = Command_SpecialAbilityIgnite
        4 = Command_SpellBookCalltheHorde
        5 = Command_SpellBookWarChant
        6 = Command_SpellBookBombard
        7 = Command_SpellBookCloudBreak
        8 = Command_SpellBookFreezingRain
        9 = Command_SpellBookDarkness 
       10 = Command_SpellBookEnshroudingMist
       11 = Command_LurtzPillage

End

CommandSet FortressDefenseSpellStoreCommandSet ; this is generic, don't try to activate the spellstore ( remove the script), or you will get GAMEDAT.error
	1 = Command_PurchaseSpellHeal
        4 = Command_PurchaseSpellScavenger
        
End















;TESTING REASON!!!!

SpecialPower SpellBookRainOfFire
	Enum			= SPECIAL_SPELL_BOOK_RAIN_OF_FIRE
	RadiusCursorRadius	= 200
	RequiredSciences		= SCIENCE_RainOfFire
	ReloadTime		= 100 ;SPELL_RECHARGE_TIME_TIER_4 ; in milliseconds
	InitiateSound = SpellRainOfFireMS
	ViewObjectDuration = 10000
	ViewObjectRange = 200
	Flags			= RESPECT_RECHARGE_TIME_DISCOUNT
End
 ;;;;;;;;






Object FortressDefenseSpellBook


CommandSet          = FortressDefenseSpellBookCommandSet
RadarPriority       = NOT_ON_RADAR
KindOf              = SPELL_BOOK IMMOBILE IGNORES_SELECT_ALL INERT








   AddModule 
	Behavior = SpecialPowerModule		SpellBookLottery_ModuleTag
		SpecialPowerTemplate		= SpellBookLottery
		UpdateModuleStartsAttack	= No
		AffectAllies			= No ; Should not try to affect ally units
		AvailableAtStart		= No
		RequirementsFilterMPSkirmish	= SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic	= SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
   END




AddModule
	Behavior = SpecialPowerModule		SpellBookWarChant_ModuleTag
		SpecialPowerTemplate		= SpellBookWarChant
		AttributeModifier			= SpellBookWarChant
		AttributeModifierRange		= 110
		AttributeModifierAffects	= ANY +INFANTRY +CAVALRY +MACHINE -IMMOBILE -DOZER +HERO -STRUCTURE -BASE_FOUNDATION -HORDE +DwarvenBattleWagon -RohanOathbreaker -MordorRamCrew +MordorWorker -IsengardRamCrew +IsengardBeserker
		TriggerFX					= FX_SpellWarChant
		UpdateModuleStartsAttack	= No
		AvailableAtStart			= No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End



AddModule                       ; for special AI                 ; he fires this constantly to areas where creeps exit to prevent lag ( he kills creeps that left map)
  	Behavior = OCLSpecialPower ModuleTag_RainOfFire
		SpecialPowerTemplate = SpellBookRainOfFire
		OCL                  = OCL_SpellBookRainOfFire
		CreateLocation       = CREATE_AT_LOCATION
		AvailableAtStart	 = No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End






AddModule ModuleTag_Heal ;; added just in case it fully heals now
  	Behavior = PlayerHealSpecialPower ModuleTag_Heal
		SpecialPowerTemplate  = SpellBookHeal
		HealAffects			  = INFANTRY CAVALRY SHIP DOZER 
		HealAmount			  = 1.0 
		HealRadius			  = SPELL_HEAL_RADIUS_UNIT_SCAN	
		HealOCL               = OCL_HealSpellHordeReplenishPing
		AvailableAtStart	  = No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
END

AddModule
	Behavior = ScavengerSpecialPower ModuleTag_Scavenger
		SpecialPowerTemplate	= SpellBookScavenger
		BountyPercent			= 1.0
		AvailableAtStart		= No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End





   AddModule 
	Behavior = SpecialPowerModule		ModuleTag_Fury
		SpecialPowerTemplate		= SpellBookFury
		UpdateModuleStartsAttack	= No
		AttributeModifier			= FuryBonus
		AttributeModifierRange		= 99999999.0 ; basically on the whole map
		AttributeModifierAffects	= ANY +INFANTRY +CAVALRY +MACHINE -IMMOBILE -DOZER +HERO -STRUCTURE -BASE_FOUNDATION -HORDE +DwarvenBattleWagon -RohanOathbreaker -MordorRamCrew +MordorWorker -IsengardRamCrew +IsengardBeserker
		AffectAllies			= No; Should not try to affect ally units
		AvailableAtStart		= No
		RequirementsFilterMPSkirmish	= SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic	= SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
   End

   AddModule 
	Behavior = SpecialPowerModule		ModuleTag_Narya
		SpecialPowerTemplate		= SpellBookNarya
		UpdateModuleStartsAttack	= No
		AttributeModifier			= NaryaBonus
		AttributeModifierRange		= 99999999.0 ; basically on the whole map
		AttributeModifierAffects	= ANY +INFANTRY +CAVALRY +MACHINE -IMMOBILE -DOZER +HERO -STRUCTURE -BASE_FOUNDATION -HORDE +DwarvenBattleWagon -RohanOathbreaker -MordorRamCrew +MordorWorker -IsengardRamCrew +IsengardBeserker
		AffectAllies			= No; Should not try to affect ally units
		AvailableAtStart		= No
		RequirementsFilterMPSkirmish	= SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic	= SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
   End



AddModule
	Behavior = OCLSpecialPower ModuleTag_Bombard
		SpecialPowerTemplate = SpellBookEvilBombard
		OCL                  = OCL_SpellBookBombardSeed
		CreateLocation       = USE_SECONDARY_OBJECT_LOCATION
		NearestSecondaryObjectFilter = NONE SAME_PLAYER +CASTLE_KEEP 
		AvailableAtStart	 = No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End


AddModule
 	Behavior   = DarknessSpecialPower ModuleTag_Darkness
		SpecialPowerTemplate			= SpellBookDarkness
		AttributeModifier				= SpellBookDarkness
		AttributeModifierAffects		= ANY +INFANTRY +CAVALRY +MONSTER -HERO -HORDE ALLIES
		AttributeModifierWeatherBased	= Yes			
		WeatherDuration					= 450000
		ChangeWeather					= CLOUDY
		AvailableAtStart				= No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End





AddModule
	Behavior = FreezingRainSpecialPower ModuleTag_FreezingRain
		SpecialPowerTemplate			= SpellBookFreezingRain
		AttributeModifier				= RainDebuff ; ;
		AttributeModifierAffects		= ALL ENEMIES
		AntiCategory					= LEADERSHIP BUFF ; ;
;		AntiFX							= FX_AntiLeadership ; FX for anti category
		AttributeModifierWeatherBased	= Yes
		WeatherDuration					= 700000
		ChangeWeather					= RAINY
		AvailableAtStart				= No
		BurnRateModifier				= -100
		BurnDecayModifier				= 20
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End


AddModule
	Behavior = OCLSpecialPower ModuleTag_EnshroudingMist
		SpecialPowerTemplate = SpellBookEnshroudingMist
		OCL                  = OCL_SpecialPowerEnshroudingMist
		CreateLocation       = CREATE_AT_LOCATION
		AvailableAtStart	 = No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End


AddModule
	Behavior = CloudBreakSpecialPower	ModuleTag_CloudBreak
		SpecialPowerTemplate			= SpellBookCloudBreak
    	SunbeamObject					= CloudBreakSunbeam
		ObjectSpacing					= 300
		AttributeModifierAffects		= ANY +INFANTRY +CAVALRY +MONSTER -HERO ENEMIES
		ReEnableAntiCategory			= Yes ; cancel negative effects on good guys
		AttributeModifierWeatherBased	= Yes			
		WeatherDuration					= SPELL_CLOUDBREAK_DURATION
		ChangeWeather					= SUNNY
		AvailableAtStart				= No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
End

END




;================================Fortress gate

Armor KeepGatesArmor

  Armor = DEFAULT         0%     ;this sets the level for all nonspecified damage types


  Armor = CRUSH          35%     ;fire damage
  Armor = HERO            60%     ;fire damage
  Armor = SPECIALIST      40%     ;fire damage
  Armor = URUK            35%     ;fire damage
  Armor = SLASH           30%     ;fire damage
  Armor = FLAME           10%     ;fire damage
  Armor = SIEGE          100%     ;siege damage
  Armor = STRUCTURAL     25%     ;structural damage - Grond inflicts this kind of damage
  Armor = MAGIC          15%     ;in case Gandalf or Saruman attack
  Armor = FORCE          45%     ;in case Gandalf or Saruman attack
  Armor = LOGICAL_FIRE	  0%	 ;Fire
End

CommandSet NewGateCommandSet
	1 = Command_ToggleGate
	2 = Command_StartSelfRepair
End


Object MordorCirithUngolGateDoor



ReplaceModule ModuleTag_Draw

  Draw = W3DScriptedModelDraw ModuleTag_DrawNew
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes

    DefaultModelConditionState  
      Model = MBCUGateDr
    End





      ModelConditionState  = RUBBLE
      Model         = RBHDGatDr_D3  
    End
 	AnimationState = RUBBLE 
		Animation = Open 
			AnimationName	=	RBHDGatDr_D3.RBHDGatDr_D3
			AnimationMode	=	ONCE 
		End
    End



        
	AnimationState = DOOR_1_OPENING
		StateName = STATE_Open   
		Animation = Open 
			AnimationName	=	MBCUGateDr.MBCUGateDr
			AnimationMode	=	ONCE 
			AnimationBlendTime = 0
		End
		Flags = START_FRAME_LAST
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "STATE_Closed" then CurDrawableSetTransitionAnimState("TRANS_Closed_To_Open") end
		EndScript
    End
    TransitionState = TRANS_Closed_To_Open
		Animation = Open 
			AnimationName	=	MBCUGateDr.MBCUGateDr
			AnimationMode	=	ONCE 
		End
    End
        
	AnimationState = DOOR_1_CLOSING 
		StateName = STATE_Closed 
		Animation = Close 
			AnimationName	=	MBCUGateDr.MBCUGateDr
			AnimationMode	=	ONCE_BACKWARDS 
			AnimationBlendTime = 0
		End
		Flags = START_FRAME_FIRST
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "STATE_Open" then CurDrawableSetTransitionAnimState("TRANS_Open_To_Closed") end
		EndScript
    End
    TransitionState = TRANS_Open_To_Closed
		Animation = Open 
			AnimationName	=	MBCUGateDr.MBCUGateDr
			AnimationMode	=	ONCE_BACKWARDS 
		End
		Flags = START_FRAME_LAST
    End

  End
End





	KindOf                = STRUCTURE IMMOBILE SELECTABLE BLOCKING_GATE WALL_GATE IGNORE_FOR_VICTORY NEVER_CULL_FOR_MP
	RadarPriority = NOT_ON_RADAR
	KeepSelectableWhenDead	= Yes




  ArmorSet
    Conditions        = None
    Armor             = KeepGatesArmor
    DamageFX          = None
  End


	CommandSet = NewGateCommandSet



AddModule
	Behavior            = GettingBuiltBehavior GetBuiltBehaviorTag
		SelfBuildingLoop			= BuildingConstructionLoop		; Only played if we DON'T spawn a worker
		SelfRepairFromDamageLoop	= NoSound						; This doesn't cause an animation, so don't bother playing a sound
		SelfRepairFromRubbleLoop	= BuildingConstructionLoop
		SpawnTimer					= -1.0							; Negative means no 'autoheal'
		RebuildTimeSeconds			= 40
	End
End


RemoveModule ModuleTag_SlowDeathWithoutRubble


AddModule
	Behavior = FakePathfindPortalBehaviour ModuleTag_FAKEPATHFIND
		AllowEnemies			= No
		AllowNonSkirmishAIUnits	= No
	End
End




AddModule
  Behavior = KeepObjectDie ModuleTag_IWantRubble
  End
End



AddModule
	Behavior = AIGateUpdate ModuleTage_AIGateUpdate
		TriggerWidthX = 300.0
		TriggerWidthY = 150.0
	End
End


ReplaceModule ModuleTag_02
	Body                  = ActiveBody ModuleTag_02New
		MaxHealth       = 15000.0
	End
End



END


;--------------------WELL


Object DaleFountain


	KindOf                = STRUCTURE IMMOBILE CAN_CAST_REFLECTIONS UNATTACKABLE ; added unattackable


AddModule
	Behavior = PassiveAreaEffectBehavior ModuleTag_SplashOfHealingWater_Ahh
		EffectRadius			= GONDOR_WELL_AOE_RADIUS
		PingDelay				= 2000;msec
		HealPercentPerSecond	= 4% ; ;3%
		AllowFilter				= ANY +INFANTRY +CAVALRY +HERO +MACHINE +MONSTER -IMMOBILE +DOZER
		NonStackable			= Yes
		HealFX					= FX_SpellHealUnitHealBuff
	End
End

	/////////////////////////////////////////////////////////
	// BannerCarrierUpdate module for Well Object
	/////////////////////////////////////////////////////////
AddModule
	Behavior = BannerCarrierUpdate BannerCarrierUpdateModuleTag
		IdleSpawnRate			= 7000 ; ;5000							; spawn a new member every n seconds when idle (in miliseconds)		
		UnitSpawnFX				= FX_BannerCarrierSpawnUnit		; name of particle FX to use when the BannerCarrier spawns a new unit		

		; This well object acts like a banner carrier except it spawns unit on nearby hordes instead of itself.
		ReplenishNearbyHorde	= Yes
		ScanHordeDistance		= 200
	End
End




END


;-------------------------------------------------------------------

Armor HaradrimArmor
  Armor = DEFAULT         100%   ; 100%
  Armor = SLASH           100%   ; 100%
  Armor = PIERCE           25%   ;  50%
  Armor = SPECIALIST      100%   ;  50%
  Armor = CRUSH           200%   ; 200%
  Armor = CAVALRY	  200% ;
  Armor = SIEGE           100%   ;
  Armor = FLAME           100%   ;  30%
  Armor = MAGIC           100%   ;
  Armor = HERO            200%   ;
  Armor = HERO_RANGED     100%   ; 
  Armor = STRUCTURAL    100%    
  FlankedPenalty 	 = 50%    
  Armor = CAVALRY_RANGED   50% ; ;
End




Object MordorHaradrimArcherHorde
BuildCost = 450
End






Weapon HaradrimPalaceBow       ; BALANCE Archer Weapon
  AttackRange               = 300
  WeaponSpeed               = 321       ; dist/sec 
  MinWeaponSpeed            = 241
  MaxWeaponSpeed            = 481		; dist/sec Upper limit on scaling, when attacking past nominal "max" range
  FireFX                    = FX_RohanArcherBowWeapon
  ScaleWeaponSpeed          = Yes		; Used for lob weapons, scales speed proportional to range
  HitPercentage             = 100		;When this weapon is used it will hit exactly 50% of the time.
  ScatterRadius             = 16.0		;When this weapon misses it can randomly miss by as much as this distance.
  DelayBetweenShots         = 20
  PreAttackDelay            = 20   ; 1467 is the prep time for archer.
  PreAttackType             = PER_SHOT	; Do the delay each time we attack a new target
  FiringDuration            = 10    ; Duration of the archer firing shot is 500ms.
  IsAimingWeapon            = Yes
  AntiAirborneVehicle		= Yes
  AntiAirborneMonster		= Yes
  HitPassengerPercentage	= 20%
  AcceptableAimDelta		= 180.0	; We want to be able to shoot all round, as we canit move.

  CanBeDodged = Yes ; Will check for a DodgePercent on the target to have a second chance at failing HitPercent


  ProjectileNugget          ; Default arrow
    ProjectileTemplateName  = EvilFactionArrow
    WarheadTemplateName     = FortressArrowTowerBowWarhead
    ForbiddenUpgradeNames	= Upgrade_MordorHaradrimPalaceLevel3
  End
  ProjectileNugget          ; Default arrow
    ProjectileTemplateName  = EvilFactionFireArrow
    WarheadTemplateName     = FortressArrowTowerBowUpgradedWarhead
    RequiredUpgradeNames	= Upgrade_MordorHaradrimPalaceLevel3
  End

End




;=========================
;fixing bug not giving money

Object IsengardSharku
BountyValue = 350
End

Object IsengardLurtz
BountyValue = 300
End

;====================


Object BarrowWight
	LocomotorSet
		Locomotor = BarrowWightLocomotor
		Condition = SET_NORMAL
		Speed     = 41
	End
End


;---------we don't want stealth for spiderlings on dis map ;;; not working

Object WildSpiderlingHordeMember
	CamouflageDetectionMultiplier = CAMOUFLAGE_DETECTION_DISTANCE_SHORT
End




Armor GoblinFighterArmor
  Armor = DEFAULT         100%   ; 
  Armor = SLASH           150%   ; ; ; 100
  Armor = PIERCE           115%   ;  ; ; 150
  Armor = SPECIALIST      15%   ; ; ; 40
  Armor = CAVALRY	  150%   ;
  Armor = CRUSH           125%   ;  ; ; 100
  Armor = SIEGE           100%   ;
  Armor = FLAME           100%   ; 
  Armor = MAGIC           100%   ;
  Armor = HERO            200%   ;
  Armor = HERO_RANGED     200%   ; 
  Armor = STRUCTURAL	  100%	
  FlankedPenalty 	 = 33%     ; ; 50
  Armor = CAVALRY_RANGED   150% ; ;
End





Armor WildFighterScavengedArmor
  Armor = DEFAULT         50%   ; 
  Armor = SLASH           40%   ; 
  Armor = PIERCE           30%   ;  ; ; 75; ; 40
  Armor = SPECIALIST      10%   ; 
  Armor = CAVALRY	  120%   ;; ; 75
  Armor = CRUSH           65%   ;  ; ; 50
  Armor = SIEGE           50%   ;
  Armor = FLAME           30%   ; ; ; 50
  Armor = MAGIC           20%   ;; ; 50; ; 30
  Armor = HERO            100%   ;
  Armor = HERO_RANGED     100%   ; 
  Armor = STRUCTURAL	  20%	
  FlankedPenalty 	 = 50%      
  Armor = URUK   50% ; ;
End




Armor GoblinArcherArmor
  Armor = DEFAULT         100%   ; 100%
  Armor = SLASH           150%   ; 100%; ; 100
  Armor = PIERCE          75%   ;  50%
  Armor = SPECIALIST       100%   ;  50%
  Armor = CRUSH            45%   ; 200% ; ; 200
  Armor = SIEGE           150%   ;; ; 100
  Armor = FLAME           100%   ;  30%
  Armor = MAGIC           60%   ;
  Armor = HERO            200%   ;
  Armor = HERO_RANGED     75%   ;
  Armor = CAVALRY	  200%  
  Armor = STRUCTURAL	  100%	
  FlankedPenalty 	 = 50%    
End



Armor WildMarauderHeavyArmor
  Armor = DEFAULT             50% ;40%
  Armor = SLASH               105% ;; ; 100; ; 90
  Armor = PIERCE             80% ; 20%; ; 65
  Armor = SPECIALIST          95% ; ; 50; ; 70
  Armor = CAVALRY	      5% ;
  Armor = CRUSH               5%  ;40%
  Armor = SIEGE               50% ;100%
  Armor = FLAME               75%  ; 0%; ; 50
  Armor = MAGIC               75% ;100%; ; 50
  Armor = HERO                80% ; 50%; ; 100
  Armor = HERO_RANGED         75% ; 50%  ; ; 100
  Armor = STRUCTURAL	  20%	
  FlankedPenalty 	 = 75%     
  Armor = CAVALRY_RANGED   30% ; ;
  Armor = URUK   115% ; ;
  Armor = POISON   25% ; ;
  DamageScalar = 130% ; ;
End




Object GoblinArcherHorde
BuildCost = 325
End

Object GoblinFighterHorde
BuildCost = 25
BuildTime = 12 ; 12s
End


Object IsengardUrukCrossbowHorde
BuildCost = 425
End


Object DwarvenMenOfDaleHorde
BuildCost = 400
End




;=============attack troll no longer dies in 1s to pikes

Armor AttackTrollArmor
  Armor = DEFAULT         25%   
  Armor = SLASH           40%  ;50%
  Armor = PIERCE          25%   
  Armor = SPECIALIST     125%  ;  200%
  Armor = CRUSH            1%  
  Armor = CAVALRY	  25% 
  Armor = SIEGE           50%   ;
  Armor = FLAME           50% 
  Armor = MAGIC           35%   ;50%
  Armor = HERO            100%   ;
  Armor = HERO_RANGED     100%  
  Armor = STRUCTURAL    25%    
  FlankedPenalty 	 = 50%    
  Armor = CAVALRY_RANGED   50% ; ;
End



;================same about drummer

Armor TrollHeavyArmor
  Armor = DEFAULT         80%   ; 100%
  Armor = SLASH           65%   ; 100%
  Armor = PIERCE           15%   ;  50%; ; 50
  Armor = SPECIALIST      65%   ;  50%
  Armor = CRUSH           100%   ; 200%
  Armor = CAVALRY	  50% ;
  Armor = SIEGE           100%   ;
  Armor = FLAME           15%   ;  30%; ; 100
  Armor = MAGIC           15%   ;; ; 100
  Armor = HERO            150%   ;
  Armor = HERO_RANGED     75%   ; ; ; 200
  Armor = STRUCTURAL    10%    
  FlankedPenalty 	 = 50%    
  Armor = CAVALRY_RANGED   50% ; ;
End






Object MordorAttackTroll
BuildCost = 1000
End


Object ElvenRivendellLancerHorde
BuildCost = 425
End

Object ElvenMithlondSentryHorde
BuildCost = 325
End


Object DwarvenAxethrowerHorde
BuildCost = 225
End


Object GondorRangerHorde
BuildCost = 550
End


;==========make mirks own other archers


Armor MirkwoodArcherArmor
  Armor = DEFAULT         100%   
  Armor = SLASH           150%   
  Armor = PIERCE          50%     ;70%   ; 
  Armor = SPECIALIST      100%   ;
  Armor = CAVALRY	 200%   ;
  Armor = CRUSH           200%  
  Armor = SIEGE           100%   ;
  Armor = FLAME           40%   ;
  Armor = MAGIC           60%   ;
  Armor = HERO            200%   ;
  Armor = HERO_RANGED     200%   ; 
  Armor = STRUCTURAL	  100%	  
  FlankedPenalty 	 = 50%      
End




Object ElvenMirkwoodArcherHorde
BuildCost = 650
End


Object WildMarauderHorde
BuildCost = 475
End

Object IsengardBerserker
BuildCost = 250
End
















Weapon WildSpiderRiderBow     ; BALANCE Wild Spider Rider bow Weapon
	AttackRange         	= 450 ; 400
	
	RangeBonusMinHeight	= 10
	RangeBonus		= 1
	RangeBonusPerFoot	= 1 ; ;#MULTIPLY( WILD_SPIDERRIDER_RANGE .01 )  
	
	WeaponSpeed         	= 321         ; dist/sec 
	MinWeaponSpeed      	= 241
	MaxWeaponSpeed      	= 481      ; dist/sec Upper limit on scaling, when attacking past nominal "max" range
	FireFX              	= FX_RohanArcherBowWeapon
	ScaleWeaponSpeed    	= Yes		;Used for lob weapons, scales speed proportional to range
	HitPercentage       	= 100		;When this weapon is used it will hit exactly 50% of the time.
	ScatterRadius       	= 16.0		;When this weapon misses it can randomly miss by as much as this distance.
	  
	AcceptableAimDelta		= 20		; prevent twitchy reaiming in horde on horde
	
	DelayBetweenShots   	= 0
	
	PreAttackDelay      	= WILD_SPIDERRIDER_BOW_PREATTACKDELAY 
	PreAttackType			= PER_SHOT
	;PreAttackRandomAmount	= 200   
	FiringDuration			= 0
	RequireFollowThru		= Yes

	  
	;AutoReloadWhenIdle		= 1	
	
	ClipSize				= 1
	AutoReloadsClip			= Yes
	ClipReloadTime			= Min:600 Max:800
	
	AntiAirborneVehicle		= Yes
	AntiAirborneMonster		= Yes
	HitPassengerPercentage	= 20%
	CanBeDodged				= Yes ; Will check for a DodgePercent on the target to have a second chance at failing HitPercent

End





Weapon GoblinArcherMissileHordeRangefinder
	AttackRange			= 330   ; ;100 ;Slightly shorter than the archer's actual weapon
	
	RangeBonusMinHeight	= 10
	RangeBonus		= 1
	RangeBonusPerFoot	= 1 ; ;#MULTIPLY( GOBLIN_ARCHER_RANGE .01 )
	
	DelayBetweenShots		= 1000 ;1500
	LeechRangeWeapon		= Yes
	AcceptableAimDelta		= 45
	AntiAirborneVehicle		= Yes
	AntiAirborneMonster		= Yes
	CanFireWhileMoving		= Yes		; When aboard a mumakil.
	FinishAttackOnceStarted = No
	HordeAttackNugget
	End
End

Weapon GoblinArcherMissileHordeRangefinderBombard
	AttackRange				= 330   ; ;100 
	
	RangeBonusMinHeight	= 10
	RangeBonus		= 1
	RangeBonusPerFoot	= 1 ; ;#MULTIPLY( GOBLIN_ARCHER_BOMBARD_MAXRANGE .01 )
	
	MinimumAttackRange		= GOBLIN_ARCHER_BOMBARD_MINRANGE
	DelayBetweenShots		= 1000 ;1500
	LeechRangeWeapon		= Yes
	AcceptableAimDelta		= 45
	AntiAirborneVehicle		= Yes
	AntiAirborneMonster		= Yes
	CanFireWhileMoving		= Yes		; When aboard a mumakil.
	FinishAttackOnceStarted = No
	NoVictimNeeded			= Yes
	BombardType				= Yes	
	ScatterRadius			= ARCHER_BOMBARD_SCATTER_RADIUS		; Only used for cursor radius
	HordeAttackNugget
	End
End





Weapon HaradrimArcherMissileHordeRangefinder
	AttackRange			= 350   ; ;100  ; Slightly shorter than the archer's actual weapon
	
	RangeBonusMinHeight	= 10
	RangeBonus		= 1
	RangeBonusPerFoot	= 1 ; ;#MULTIPLY( MORDOR_HARADRIM_BOW_RANGE .01 )
	
	DelayBetweenShots		= 1000 ;1500
	LeechRangeWeapon		= Yes
	AcceptableAimDelta		= 45
	AntiAirborneVehicle		= Yes
	AntiAirborneMonster		= Yes
	CanFireWhileMoving		= Yes		; When aboard a mumakil.
	FinishAttackOnceStarted = No
	HordeAttackNugget
	End
End

Weapon HaradrimArcherMissileHordeRangefinderBombard
	AttackRange			= 350  ; ;100 
	
	RangeBonusMinHeight	= 10
	RangeBonus		= 1
	RangeBonusPerFoot	= 1 ; ;#MULTIPLY( MORDOR_HARADRIM_BOW_BOMBARD_MAXRANGE .01 )
	
	MinimumAttackRange		= MORDOR_HARADRIM_BOW_BOMBARD_MINRANGE
	DelayBetweenShots		= 1000 ;1500
	LeechRangeWeapon		= Yes
	AcceptableAimDelta		= 45
	AntiAirborneVehicle		= Yes
	AntiAirborneMonster		= Yes
	CanFireWhileMoving		= Yes		; When aboard a mumakil.
	FinishAttackOnceStarted = No
	NoVictimNeeded			= Yes
	BombardType				= Yes	
	ScatterRadius			= ARCHER_BOMBARD_SCATTER_RADIUS		; Only used for cursor radius
	HordeAttackNugget
	End
End





Weapon GoblinArcherBow       ; BALANCE Archer Weapon ;orc archer
	AttackRange			= 450    ;Horde member so it needs to be bigger than the horde weapon attack range.
   
   	RangeBonusMinHeight	= 10
	RangeBonus		= 1
	RangeBonusPerFoot	= 1 ; ;#MULTIPLY( GOBLIN_ARCHER_RANGE .01 )
   
   
    LeechRangeWeapon    = Yes
	WeaponSpeed			= 300         ; dist/sec 
	MinWeaponSpeed		= 121
	MaxWeaponSpeed		= 400      ; dist/sec Upper limit on scaling, when attacking past nominal "max" range
	FireFX				= FX_RohanArcherBowWeapon  
	ScaleWeaponSpeed	= Yes ; Used for lob weapons, scales speed proportional to range
	HitPercentage		= 100     ;When this weapon is used it will hit exactly 50% of the time.
	ScatterRadius		= 20.0     ;When this weapon misses it can randomly miss by as much as this distance.
	
	AcceptableAimDelta	= 20	; prevent twitchy reaiming in horde on horde
	DelayBetweenShots	= 0
	PreAttackDelay      = GOBLIN_ARCHER_PREATTACKDELAY
	PreAttackType       = PER_POSITION
	PreAttackRandomAmount     = 200 
	FiringDuration      = 0
	
	ClipSize			= 1
	AutoReloadsClip		= Yes
	AutoReloadWhenIdle	= 1	
	ClipReloadTime		= Min:1050 Max:1400
	ContinuousFireOne	= 0
	ContinuousFireCoast	= 1600 
	
	AntiAirborneVehicle	= Yes
	AntiAirborneMonster	= Yes
	HitPassengerPercentage	= 20%
	CanBeDodged				= Yes ; Will check for a DodgePercent on the target to have a second chance at failing HitPercent


End



Weapon GoblinArcherBowBombard       ; BALANCE Archer Weapon ;orc archer
	AttackRange			= 450
	MinimumAttackRange	= #SUBTRACT( GOBLIN_ARCHER_BOMBARD_MINRANGE 75 )
    LeechRangeWeapon    = Yes
	WeaponSpeed			= 300         ; dist/sec 
	MinWeaponSpeed		= 121
	MaxWeaponSpeed		= 400      ; dist/sec Upper limit on scaling, when attacking past nominal "max" range
	FireFX				= FX_RohanArcherBowWeapon  
	ScaleWeaponSpeed	= Yes ; Used for lob weapons, scales speed proportional to range
	HitPercentage       = 0     ;Always scatter
	ScatterRadius       = ARCHER_BOMBARD_SCATTER_RADIUS      ;When this weapon misses it can randomly miss by as much as this distance.
	
	AcceptableAimDelta	= 20	; prevent twitchy reaiming in horde on horde
	DelayBetweenShots	= 0
	PreAttackDelay      = GOBLIN_ARCHER_PREATTACKDELAY
	PreAttackType       = PER_POSITION
	PreAttackRandomAmount     = 200 
	FiringDuration      = 0
	
	ClipSize			= 1
	AutoReloadsClip		= Yes
	AutoReloadWhenIdle	= 1	
	ClipReloadTime		= Min:GOBLIN_ARCHER_BOW_RELOADTIME_MIN Max:GOBLIN_ARCHER_BOW_RELOADTIME_MAX
	ContinuousFireOne	= 0
	ContinuousFireCoast	= GOBLIN_ARCHER_BOW_RELOADTIME_MAX 
	
	AntiAirborneVehicle	= Yes
	AntiAirborneMonster	= Yes
	HitPassengerPercentage	= 20%
	CanBeDodged				= Yes ; Will check for a DodgePercent on the target to have a second chance at failing HitPercent
	NoVictimNeeded			= Yes
	BombardType				= Yes


End


Weapon HaradrimBow ; BALANCE Archer Weapon ;orc archer
  AttackRange 			= 450
  
  	RangeBonusMinHeight	= 10
	RangeBonus		= 1
	RangeBonusPerFoot	= 1 ; ;#MULTIPLY( MORDOR_HARADRIM_BOW_RANGE .01 )   
  
  LeechRangeWeapon      = Yes
  WeaponSpeed 			= 270 ; ;401         ; dist/sec 
  MinWeaponSpeed 		= 121
  MaxWeaponSpeed 		= 440 ; ;601      ; dist/sec Upper limit on scaling, when attacking past nominal "max" range
  FireFX 				= FX_RohanArcherBowWeapon  
  ScaleWeaponSpeed	 	= Yes ; Used for lob weapons, scales speed proportional to range
  HitPercentage     	= 100     ;When this weapon is used it will hit exactly 50% of the time.
  ScatterRadius     	= 40.0     ;When this weapon misses it can randomly miss by as much as this distance.
  DelayBetweenShots 	= 650
  PreAttackDelay        = MORDOR_HARADRIM_BOW_PREATTACKDELAY
  PreAttackRandomAmount     = 200 
  PreAttackType         = PER_SHOT ; Do the delay each time we attack a new target
  FiringDuration      	= MORDOR_HARADRIM_BOW_FIRINGDURATION     ; Duration of the archer firing shot is 500ms.
  AntiAirborneVehicle	= Yes
  AntiAirborneMonster	= Yes
  CanBeDodged				= Yes



End

Weapon HaradrimBowBombard ; BALANCE Archer Weapon ;orc archer
	AttackRange 			= 450
	MinimumAttackRange	= #SUBTRACT( MORDOR_HARADRIM_BOW_BOMBARD_MINRANGE 75 )

	RangeBonusMinHeight	= 10
	RangeBonus		= 1
	RangeBonusPerFoot	= 1 ; ;#MULTIPLY( MORDOR_HARADRIM_BOW_BOMBARD_MAXRANGE .01 )  
  
	LeechRangeWeapon      = Yes
	WeaponSpeed 			= 270 ; ;401         ; dist/sec 
	MinWeaponSpeed 		= 121
	MaxWeaponSpeed 		= 440 ; ;601      ; dist/sec Upper limit on scaling, when attacking past nominal "max" range
	FireFX 				= FX_RohanArcherBowWeapon  
	ScaleWeaponSpeed	 	= Yes ; Used for lob weapons, scales speed proportional to range
	HitPercentage     	= 0     ;Always scatter
	ScatterRadius     	= ARCHER_BOMBARD_SCATTER_RADIUS     ;When this weapon misses it can randomly miss by as much as this distance.
	DelayBetweenShots 	= MORDOR_HARADRIM_BOW_DELAYBETWEENSHOTS
	PreAttackDelay        = MORDOR_HARADRIM_BOW_PREATTACKDELAY
	PreAttackRandomAmount     = 200 
	PreAttackType         = PER_SHOT ; Do the delay each time we attack a new target
	FiringDuration      	= MORDOR_HARADRIM_BOW_FIRINGDURATION    ; Duration of the archer firing shot is 500ms.
	AntiAirborneVehicle	= Yes
	AntiAirborneMonster	= Yes
	CanBeDodged			= Yes
	NoVictimNeeded		= Yes
	BombardType			= Yes



End




Weapon IsengardArcherHordeRangeFinder
	AttackRange				= 340
	
	RangeBonusMinHeight	= 10
	RangeBonus		= 1
	RangeBonusPerFoot	= 1 ; ;#MULTIPLY( ISENGARD_URUKCROSSBOW_RANGE .01 )
	
	LeechRangeWeapon		= Yes
	DelayBetweenShots		= 1500
	AcceptableAimDelta		= 45
	AntiAirborneVehicle		= Yes
	AntiAirborneMonster		= Yes
	FinishAttackOnceStarted = No
	CanFireWhileMoving		= No
	HordeAttackNugget
	End
End

Weapon IsengardArcherHordeRangeFinderBombard
	AttackRange				= 340   ; ;100
	MinimumAttackRange		= ISENGARD_URUKCROSSBOW_BOMBARD_MINRANGE
	
	RangeBonusMinHeight	= 10
	RangeBonus		= 1
	RangeBonusPerFoot	= 1 ; ;#MULTIPLY( ISENGARD_URUKCROSSBOW_BOMBARD_MAXRANGE .01 )
	
	LeechRangeWeapon		= Yes
	DelayBetweenShots		= 1500
	AcceptableAimDelta		= 45
	AntiAirborneVehicle		= Yes
	AntiAirborneMonster		= Yes
	FinishAttackOnceStarted = No
	CanFireWhileMoving		= No
	NoVictimNeeded			= Yes
	BombardType				= Yes
	ScatterRadius			= ARCHER_BOMBARD_SCATTER_RADIUS		; Only used for cursor radius
	HordeAttackNugget
	End
End



Weapon IsengardArcherBow         ; BALANCE Archer Weapon
  AttackRange				= 500 
  
  	RangeBonusMinHeight	= 10
	RangeBonus		= 1
	RangeBonusPerFoot	= 1 ; ;#MULTIPLY( ISENGARD_URUKCROSSBOW_RANGE .01 )
	
	
  LeechRangeWeapon		    = Yes
  WeaponSpeed				= 321         ; dist/sec 
  MinWeaponSpeed			= 61
  MaxWeaponSpeed			= 481      ; dist/sec Upper limit on scaling, when attacking past nominal "max" range    
  FireFX = FX_RohanArcherBowWeapon 
  ScaleWeaponSpeed			= Yes ; Used for lob weapons, scales speed proportional to range
  HitPercentage				= 100     ;When this weapon is used it will hit exactly 50% of the time.
  ScatterRadius				= 16.0     ;When this weapon misses it can randomly miss by as much as this distance.
  PreAttackRandomAmount 	= 200     ; amount of additional preattack variance for archer type attacks only 
  DelayBetweenShots			= 2200	; time between shots, msec
  PreAttackDelay			= ISENGARD_URUKCROSSBOW_PREATTACKDELAY  	; 733 is the prep time for archer.
  PreAttackType				= PER_POSITION ; ;PER_SHOT ; Do the delay each time we attack a new target
  FiringDuration			= ISENGARD_URUKCROSSBOW_FIRINGDURATION 		; Duration of the archer firing shot is 500ms.
  CanFireWhileMoving		= No
  IsAimingWeapon            = Yes
  
  AcceptableAimDelta		= 20	; prevent twitchy reaiming in horde on horde
  AntiAirborneVehicle		= Yes
  AntiAirborneMonster		= Yes

  CanBeDodged = Yes ; Will check for a DodgePercent on the target to have a second chance at failing HitPercent



End

Weapon IsengardArcherBowBombard         ; BALANCE Archer Weapon
  AttackRange				= 500
  MinimumAttackRange		= #SUBTRACT( ISENGARD_URUKCROSSBOW_BOMBARD_MINRANGE 75 )
  
  	RangeBonusMinHeight	= 10
	RangeBonus		= 1
	RangeBonusPerFoot	= 1 ; ;#MULTIPLY( ISENGARD_URUKCROSSBOW_BOMBARD_MAXRANGE .01 )
	
	
  LeechRangeWeapon		    = Yes
  WeaponSpeed				= 321         ; dist/sec 
  MinWeaponSpeed			= 61
  MaxWeaponSpeed			= 481      ; dist/sec Upper limit on scaling, when attacking past nominal "max" range    
  FireFX = FX_RohanArcherBowWeapon 
  ScaleWeaponSpeed			= Yes ; Used for lob weapons, scales speed proportional to range
  HitPercentage				= 0     ;Always scatter
  ScatterRadius				= ARCHER_BOMBARD_SCATTER_RADIUS     ;When this weapon misses it can randomly miss by as much as this distance.
  PreAttackRandomAmount 	= 200     ; amount of additional preattack variance for archer type attacks only 
  DelayBetweenShots			= ISENGARD_URUKCROSSBOW_DELAYBETWEENSHOTS 	; time between shots, msec
  PreAttackDelay			= ISENGARD_URUKCROSSBOW_PREATTACKDELAY 	; 733 is the prep time for archer.
  PreAttackType				= PER_POSITION ; ;PER_SHOT ; Do the delay each time we attack a new target
  FiringDuration			= ISENGARD_URUKCROSSBOW_FIRINGDURATION 		; Duration of the archer firing shot is 500ms.
  CanFireWhileMoving		= No
  IsAimingWeapon            = Yes
  
  AcceptableAimDelta		= 20	; prevent twitchy reaiming in horde on horde
  AntiAirborneVehicle		= Yes
  AntiAirborneMonster		= Yes

  CanBeDodged = Yes ; Will check for a DodgePercent on the target to have a second chance at failing HitPercent
  
  NoVictimNeeded			= Yes
	BombardType				= Yes


End


Weapon IsengardArcherBowFireArrow       ; BALANCE Archer Weapon
	AttackRange               = 500
	
	RangeBonusMinHeight	= 10
	RangeBonus		= 1
	RangeBonusPerFoot	= 1 ; ;#MULTIPLY( ISENGARD_URUKCROSSBOW_RANGE .01 )
	
	
	WeaponSpeed               = 321         ; dist/sec 
	MinWeaponSpeed            = 241
	MaxWeaponSpeed            = 481      ; dist/sec Upper limit on scaling, when attacking past nominal "max" range
	FireFX                    = FX_RohanArcherBowWeapon
	ScaleWeaponSpeed          = Yes ; Used for lob weapons, scales speed proportional to range
	HitPercentage             = 100     ;When this weapon is used it will hit exactly 50% of the time.
	ScatterRadius             = 16.0     ;When this weapon misses it can randomly miss by as much as this distance.
	DelayBetweenShots         = 2100
	PreAttackDelay            = ISENGARD_URUKCROSSBOW_PREATTACKDELAY    ; 1467 is the prep time for archer.
	PreAttackRandomAmount     = 200    ; amount of additional preattack variance for archer type attacks only  
	PreAttackType             = PER_POSITION ; ;PER_SHOT ; Do the delay each time we attack a new target
	FiringDuration            = ISENGARD_URUKCROSSBOW_FIRINGDURATION    ; Duration of the archer firing shot is 500ms.
	CanFireWhileMoving		  = No	
	IsAimingWeapon            = Yes
	
	AntiAirborneVehicle		= Yes
	AntiAirborneMonster		= Yes
	AcceptableAimDelta		= 20	; prevent twitchy reaiming in horde on horde

  	CanBeDodged = Yes ; Will check for a DodgePercent on the target to have a second chance at failing HitPercent
	
	DamageType				  = FLAME

End

Weapon IsengardArcherBowBombardFireArrow       ; BALANCE Archer Weapon
	AttackRange               = 500
	MinimumAttackRange        = #SUBTRACT( ISENGARD_URUKCROSSBOW_BOMBARD_MINRANGE 75 )
	
	RangeBonusMinHeight	= 10
	RangeBonus		= 1
	RangeBonusPerFoot	= 1 ; ;#MULTIPLY( ISENGARD_URUKCROSSBOW_BOMBARD_MAXRANGE .01 )
	
	
	WeaponSpeed               = 321         ; dist/sec 
	MinWeaponSpeed            = 241
	MaxWeaponSpeed            = 481      ; dist/sec Upper limit on scaling, when attacking past nominal "max" range
	FireFX                    = FX_RohanArcherBowWeapon
	ScaleWeaponSpeed          = Yes ; Used for lob weapons, scales speed proportional to range
	HitPercentage             = 100     ;When this weapon is used it will hit exactly 50% of the time.
	ScatterRadius             = 16.0     ;When this weapon misses it can randomly miss by as much as this distance.
	DelayBetweenShots         = ISENGARD_URUKCROSSBOW_DELAYBETWEENSHOTS
	PreAttackDelay            = ISENGARD_URUKCROSSBOW_PREATTACKDELAY    ; 1467 is the prep time for archer.
	PreAttackRandomAmount     = 200    ; amount of additional preattack variance for archer type attacks only  
	PreAttackType             = PER_POSITION ; ;PER_SHOT ; Do the delay each time we attack a new target
	FiringDuration            = ISENGARD_URUKCROSSBOW_FIRINGDURATION    ; Duration of the archer firing shot is 500ms.
	CanFireWhileMoving		  = No	
	IsAimingWeapon            = Yes
	
	AntiAirborneVehicle		= Yes
	AntiAirborneMonster		= Yes
	AcceptableAimDelta		= 20	; prevent twitchy reaiming in horde on horde

  	CanBeDodged = Yes ; Will check for a DodgePercent on the target to have a second chance at failing HitPercent
  	
  	NoVictimNeeded			= Yes
	BombardType				= Yes	
	DamageType				  = FLAME

End

;========================Wildmen torches no longer hurt themselves

Object IsengardWildmanHorde

BuildCost = 500
End





Weapon IsengardWildmanCudgel  ; BALANCE
	LeechRangeWeapon	= Yes
	AttackRange			= 30.0
	MeleeWeapon			= Yes
	DelayBetweenShots	= ISENGARD_WILDMAN_DELAYBETWEENSHOTS            ; time between shots, msec
	PreAttackDelay		= ISENGARD_WILDMAN_PREATTACKDELAY             ; 433 is natural time of the stabbing animation.
	PreAttackType		= PER_SHOT ; Do the delay each time we attack a new target
	FiringDuration		= ISENGARD_WILDMAN_FIRINGDURATION            ; min 600 for anim
	FireFX				= FX_GondorSwordHit
	FireFlankFX			= FX_Flanking
        RadiusDamageAffects = ENEMIES NOT_SIMILAR

End







;==========================DRUMMER TROLL I WANT TO REMOVE HIS JUST_BUILT ANIM


Object MordorDrummerTroll

	

ReplaceModule ModuleTag_01
	Draw = W3DScriptedModelDraw ModuleTag_01New  
		  
		  OkToChangeModelColor = Yes
		  
		  StaticModelLODMode = Yes
		  
		DefaultModelConditionState
			Model               = MuDrmTroll_SKN
			Skeleton			= MuDrmTroll_SKL
		End
		
		IdleAnimationState
			StateName = STATE_Idle
			
			Animation           		= SticksDownBreathe
				AnimationName     	= MuDrmTroll_IDLB
				AnimationMode     	= ONCE
				AnimationPriority	= 10
			End
			Animation           		= SticksDownBreathe
				AnimationName     	= MuDrmTroll_IDLB
				AnimationMode     	= ONCE
				AnimationPriority	= 10
			End
			Animation           		= ButtScratch										    
				AnimationName     	= MuDrmTroll_IDLC
				AnimationMode     	= ONCE
				AnimationPriority	= 1
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Selected" then CurDrawableSetTransitionAnimState("TRANS_SelectedToIdle") end
			EndScript
		End
	
	ModelConditionState = DYING BURNINGDEATH
		Model               = MuDrmTroll_SKN		
	End

	AnimationState			= DYING BURNINGDEATH
		Animation
			AnimationName	= MuDrmTroll_DTHA
			AnimationMode	= ONCE
			AnimationBlendTime = 10
		End
	End

		
	; Splatted death goes first, independant of death flags
	ModelConditionState    = DYING DECAY SPLATTED
		Model                = MUDrmTroll_DISB
		Skeleton			 = MUDrmTroll_DISB 
		RetainSubObjects = Yes
	End;

	AnimationState         = DYING DECAY SPLATTED 
		Animation            = dead1
			AnimationName       = MUDrmTroll_DISB
			AnimationMode      = ONCE
		End
	End

	ModelConditionState    = DYING DECAY 
		Model                = MUDrmTroll_DISA
		Skeleton			 = MUDrmTroll_DISA
		RetainSubObjects = Yes
	End;

	AnimationState         = DYING DECAY  
		Animation            = dead1
			AnimationName       = MUDrmTroll_DISA
			AnimationMode      = ONCE
		End
	End

		AnimationState			= BURNINGDEATH
			Animation
				AnimationName	= MuDrmTroll_MFDA
				AnimationMode	= LOOP
				Distance		= 100
			End
		End

		AnimationState        			= STUNNED_FLAILING
			Animation           		= FLYA
				AnimationName     	= MuDrmTroll_FLYA
				AnimationMode     	= LOOP
			End
		End
		
		AnimationState = DYING SPLATTED
			Animation
				AnimationName = MuDrmTroll_LNDA
				AnimationMode = ONCE
			End
		End

		ModelConditionState = DYING
			Model               = MuDrmTroll_SKN		
		End

		AnimationState        			= DYING
			Animation           		= DIEA
				AnimationName     	= MuDrmTroll_DTHA
				AnimationMode     	= ONCE
			End
			ParticleSysBone = B_PELVIS TrollDrmSplatDust FollowBone:Yes
			ParticleSysBone = BAT_HEAD TrollDrmSplatDust FollowBone:Yes
		End

		//Turned to Stone
		ModelConditionState = STONED 
			Model			= MuDrmTroll_SKN
			Texture			= MuDrmTroll.tga MUDrmTroll_R.tga
		End 		

		AnimationState		= STONED
			Animation			= Stoned
				AnimationName		= MuDrmTroll_IDLB
				AnimationMode		= MANUAL
				AnimationBlendTime	= 10
			End
			Flags	= START_FRAME_LAST
		End
		
		AnimationState        			= STUNNED_STANDING_UP
			Animation           		= GTPA
				AnimationName     	= MuDrmTroll_GTPA
				AnimationMode     	= ONCE
			End
		End
		
		AnimationState        			= STUNNED
			Animation           		= LNDA
				AnimationName     	= MuDrmTroll_LNDA
				AnimationMode     	= ONCE
			End
			ParticleSysBone = B_PELVIS TrollDrmFallDust FollowBone:Yes
			ParticleSysBone = BAT_HEAD TrollDrmFallDust FollowBone:Yes
		End

		
		AnimationState						= PARALYZED
			Animation
				AnimationName				= MuDrmTroll_IDLB
				AnimationMode				= LOOP
			End
		End

		AnimationState = PACKING_TYPE_1										; The roar special power.
			Animation
				AnimationName = MuDrmTroll_IDLD 
				AnimationMode = LOOP
			End
			EnteringStateFX = FX_FearBlast
		End

		AnimationState = MOVING FIRING_OR_PREATTACK_A
			Animation = TrotAndFire
				AnimationName = MuDrmTroll_ATRA
				AnimationMode = LOOP
			End
			Flags = RANDOMSTART
			;ParticleSysBone = None InfantryDustTrails
		End
		
		
		AnimationState 				= TURN_LEFT
			Animation = Moving
				AnimationName 		= MuDrmTroll_TRNL
				AnimationMode 		= LOOP
				AnimationBlendTime 	= 10
			End
			ParticleSysBone = None InfantryDustTrails
		End

		AnimationState 				= TURN_RIGHT
			Animation = Moving
				AnimationName 		= MuDrmTroll_TRNR
				AnimationMode 		= LOOP
				AnimationBlendTime 	= 10
			End
			ParticleSysBone = None InfantryDustTrails
		End
		
		AnimationState				= MOVING PANICKING
			Animation			= RUNM
				AnimationName		= MuDrmTroll_MFDA
				AnimationMode		= LOOP
			End
			Flags				= RANDOMSTART
		End
		
		AnimationState				= MOVING WANDER
			Animation			= WLKA
				AnimationName		= MuDrmTroll_WLKA
				AnimationMode		= LOOP
			End
			FXEvent	= Frame:6 FireWhenSkipped Name:FX_TrollRightFootStep
			FXEvent	= Frame:26 FireWhenSkipped Name:FX_TrollLeftFootStep
			FXEvent	= Frame:45 FireWhenSkipped Name:FX_TrollRightFootStep
			FXEvent	= Frame:65 FireWhenSkipped Name:FX_TrollLeftFootStep
		End

		AnimationState = MOVING
			Animation = Moving
				AnimationName 		= MuDrmTroll_WLKA
				AnimationMode 		= ONCE
				AnimationPriority = 20
				Distance = 55 
			End
			Animation = Moving
				AnimationName 		= MuDrmTroll_WLKA
				AnimationMode 		= ONCE
				AnimationPriority = 20
				Distance = 55 
			End
			Animation = DrumCorp
				AnimationName 		= MuDrmTroll_WLKB
				AnimationMode 		= ONCE
				AnimationPriority = 1
				Distance = 55 
			End
			Flags = RESTART_ANIM_WHEN_COMPLETE
			FXEvent	= Frame:6 FireWhenSkipped Name:FX_TrollRightFootStep
			FXEvent	= Frame:26 FireWhenSkipped Name:FX_TrollLeftFootStep
			FXEvent	= Frame:45 FireWhenSkipped Name:FX_TrollRightFootStep
			FXEvent	= Frame:65 FireWhenSkipped Name:FX_TrollLeftFootStep
		End
		
		AnimationState        			= FIRING_OR_PREATTACK_A
			Animation           		= StickSwipe
				AnimationName     	= MuDrmTroll_ATKA
				AnimationMode = ONCE
				UseWeaponTiming = Yes
			End
			Animation           		= FrontKick
				AnimationName     	= MuDrmTroll_ATKB
				AnimationMode = ONCE
				UseWeaponTiming = Yes
			End
;			ParticleSysBone = B_STICKR TrollDrmAtk  FollowBone:Yes        ;removed because kick has Dust Effect
			BeginScript
				if CurDrawableIsCurrentTargetKindof("STRUCTURE") or CurDrawableIsCurrentTargetKindof("MONSTER") then
					return ("FrontKick")
				else
					return ("StickSwipe")
				end
			EndScript
		End
		
    	AnimationState 				= HIT_REACTION HIT_LEVEL_1 SELECTED
			Animation 			= Hit_Level_1_a
	      			AnimationName 		= MuDrmTroll_HITB
		    		AnimationMode = ONCE
			End
    	End

    	AnimationState 				= HIT_REACTION HIT_LEVEL_1
			Animation 			= Hit_Level_1_a
	      			AnimationName 		= MuDrmTroll_HITA
		    		AnimationMode = ONCE
			End
    	End

    	AnimationState = WAR_CHANT
			Animation = Chant
				AnimationName = MuDrmTroll_IDLD 
				AnimationMode = LOOP
			End
		End
		
		AnimationState        = SELECTED
			StateName           = STATE_Selected
			Animation           = SticksUpBreathe
				AnimationName     = MuDrmTroll_ATNB
				AnimationMode     = ONCE
				AnimationPriority = 10
			End
			Animation           = SticksUpBreathe
				AnimationName     = MuDrmTroll_ATNB
				AnimationMode     = ONCE
				AnimationPriority = 10
			End
			
			Flags = RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Idle" then CurDrawableSetTransitionAnimState("TRANS_IdleToSelected") end
			EndScript
		End


			
		TransitionState       = TRANS_IdleToSelected
			Animation           = ATNA
				AnimationName     = MuDrmTroll_ATNA
				AnimationMode     = ONCE
				AnimationSpeedFactorRange = 0.9 1.0
			End
		End
		TransitionState       = TRANS_SelectedToIdle
			Animation           = ATNA
				AnimationName     = MuDrmTroll_ATNA
				AnimationMode     = ONCE_BACKWARDS 
				AnimationSpeedFactorRange = 0.9 1.0
			End
			Flags = START_FRAME_LAST
		End

	End
End

END


Object MordorAttackTroll




ReplaceModule ModuleTag_01
	Draw = W3DScriptedModelDraw ModuleTag_01New
		WadingParticleSys = EntRipples
		OkToChangeModelColor = Yes
		ExtraPublicBone = Trunk
		ShowShadowWhileContained = Yes
		StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD

		DefaultModelConditionState
			Model = MUAtkTroll_SKN
		End

		AnimationState = DYING DEATH_3
			Animation
				AnimationName = MUMntTroll_SKL.MUMntTroll_IDLB
				AnimationMode = LOOP
			End
		End

		; Splatted death goes first, independant of death flags
		ModelConditionState    = DYING DECAY SPLATTED USER_4
			Model                = MUAtkTr2_DISC
			RetainSubObjects = Yes
		End
		ModelConditionState    = DYING DECAY SPLATTED
			Model                = MUAtkTroll_DISC

			RetainSubObjects = Yes
		End

		AnimationState         = DYING DECAY SPLATTED 
			Animation            = dead1
				AnimationName       = MUAtkTroll_DISC.MUAtkTroll_DISC
				AnimationMode      = ONCE
			End
		End

		ModelConditionState    = DYING DECAY DEATH_1 USER_4
			Model                = MUAtkTr2_DISA
			RetainSubObjects = Yes
		End;
		ModelConditionState    = DYING DECAY DEATH_1
			Model                = MUAtkTroll_DISA
			RetainSubObjects = Yes
		End;

		AnimationState         = DYING DECAY DEATH_1 
			Animation            = dead1
				AnimationName       = MUAtkTroll_DISA.MUAtkTroll_DISA
				AnimationMode      = ONCE
			End
		End
		
		ModelConditionState    = DYING DECAY DEATH_2 USER_4
			Model                = MUAtkTr2_DISB
			RetainSubObjects = Yes
		End;
		ModelConditionState    = DYING DECAY DEATH_2
			Model                = MUAtkTroll_DISB
			RetainSubObjects = Yes
		End;

		AnimationState         = DYING DECAY DEATH_2 
			Animation            = dead1
				AnimationName       = MUAtkTroll_DISB.MUAtkTroll_DISB
				AnimationMode      = ONCE
			End
		End

		; Flailing must go before dying in case we are dead in the air
		AnimationState = STUNNED_FLAILING
			Animation
				AnimationName = MUMntTroll_SKL.MUMntTroll_FLYA
				AnimationMode = LOOP
			End
		End

		AnimationState = DYING SPLATTED
			Animation
				AnimationName = MUMntTroll_SKL.MUMntTroll_LNDA
				AnimationMode = ONCE
			End
		End


		AnimationState = DYING DEATH_1
			Animation
				AnimationName = MUMntTroll_SKL.MUMntTroll_DIEA
				AnimationMode = ONCE
			End
			ParticleSysBone = B_PELVIS TrollSplatDust
			ParticleSysBone = BAT_HEAD TrollSplatDust
		End

		AnimationState = DYING DEATH_2
			Animation
				AnimationName = MUMntTroll_SKL.MUMntTroll_DIEB
				AnimationMode = ONCE
			End
			ParticleSysBone = BAT_SPINE1 TrollSplatDust1
			ParticleSysBone = BAT_HEAD TrollSplatDust1
		End
		
		ModelConditionState = DYING USER_4
			Model = MUAtkTr2_SKN
		End
		ModelConditionState = DYING
			Model = MUAtkTroll_SKN
		End

		AnimationState = DYING
			Animation
				AnimationName     =  MUMntTroll_SKL.MUMntTroll_DIEB
				AnimationMode     = ONCE
			End
		End

		//Turned to stone
		ModelConditionState = STONED USER_4
			Model			= MUAtkTr2_SKN
			Texture			= MUAttkTroll.tga MUAttkTroll_R.tga
		End 		
		ModelConditionState = STONED 
			Model			= MUAtkTroll_SKN
			Texture			= MUAttkTroll.tga MUAttkTroll_R.tga
		End 		

		AnimationState		= STONED
			Animation			= Stoned
				AnimationName		= MUMntTroll_SKL.MUMntTroll_IDLB
				AnimationMode		= MANUAL
				AnimationBlendTime	= 10
			End
			Flags	= START_FRAME_LAST
		End

		; Flailing must go before dying in case we are dead in the air
		AnimationState = STUNNED_FLAILING
			Animation
				AnimationName = MUMntTroll_SKL.MUMntTroll_FLYA
				AnimationMode = LOOP
			End
		End

		AnimationState				= STUNNED_STANDING_UP
			Animation				= MUMntTroll_GTPA
				AnimationName		= MUMntTroll_SKL.MUMntTroll_GTPA
				AnimationMode		= ONCE
			End
		End	

		AnimationState				= STUNNED
			Animation
				AnimationName = MUMntTroll_SKL.MUMntTroll_LNDA
				AnimationMode = ONCE
			End
			ParticleSysBone = B_PELVIS TrollSplatDust2
			ParticleSysBone = BAT_HEAD TrollSplatDust2
		End

		AnimationState						= PARALYZED
			Animation
				AnimationName				= MUMntTroll_SKL.MUMntTroll_IDLB
				AnimationMode				= LOOP
			End
		End

		;--Troll is angry
		AnimationState = WEAPONSET_RAMPAGE
			Animation = GetMad
				AnimationName = MUMntTroll_SKL.MUMntTroll_RPGC
				AnimationMode = LOOP
			End
		End

		; --------- With Club ------------
		AnimationState = FIRING_OR_PREATTACK_A
			Animation
				AnimationName = MUMntTroll_SKL.MUMntTroll_ATKC
				AnimationMode = ONCE
				UseWeaponTiming		= Yes
			End
			Animation
				AnimationName = MUMntTroll_SKL.MUMntTroll_ATKD
				AnimationMode = ONCE
				UseWeaponTiming		= Yes
			End
		End

		;Running attack
		AnimationState = MOVING FIRING_OR_PREATTACK_B
			Animation

				AnimationName = MUMntTroll_SKL.MUMntTroll_ATRA
				AnimationMode = LOOP
				UseWeaponTiming		= Yes
			End
		End
			
		AnimationState = PREPARING
			Animation
				AnimationName = MUMntTroll_SKL.MUMntTroll_GRBC
				AnimationMode = ONCE
			End

		End

		IdleAnimationState
			Animation = BreathWithClub
				AnimationName = MUMntTroll_SKL.MUMntTroll_IDLB
				AnimationMode = ONCE
				AnimationPriority = 30
				AnimationSpeedFactorRange = 0.8 1.0
			End
			Animation = BreathWithClub
				AnimationName = MUMntTroll_SKL.MUMntTroll_IDLB
				AnimationMode = ONCE
				AnimationPriority = 30
				AnimationSpeedFactorRange = 0.8 1.0
			End
			Animation = IDLE
				AnimationName = MUMntTroll_SKL.MUMntTroll_IDLE  ;ROAR THEN HIT GROUND (holding club only)
				AnimationMode = ONCE
				AnimationBlendTime = 10
				AnimationPriority = 5
			End
			Animation = IDLG
				AnimationName = MUMntTroll_SKL.MUMntTroll_IDLG  ;BUTT SCRATCH THEN BURP
				AnimationMode = ONCE
				AnimationBlendTime = 10
				AnimationPriority = 10
			End
			Flags = RESTART_ANIM_WHEN_COMPLETE
			BeginScript ; Here since normal Packing state can be skipped with a fast click.
				CurDrawableShowSubObjectPermanently("Trunk01")
			EndScript
		End


		; --------- With Bare Hands ------------
		AnimationState = UNPACKING
			Animation
				AnimationName = MUMntTroll_SKL.MUMntTroll_IDLH
				AnimationMode = ONCE
			End
		End

		AnimationState = TURN_LEFT
			Animation = Moving
				AnimationName = MUMntTroll_SKL.MUMntTroll_TRNL
				AnimationMode = LOOP
				AnimationBlendTime = 10
			End
			ParticleSysBone = None InfantryDustTrails
		End

		AnimationState = TURN_RIGHT
			Animation = Moving
				AnimationName = MUMntTroll_SKL.MUMntTroll_TRNR
				AnimationMode = LOOP

				AnimationBlendTime = 10
			End
			ParticleSysBone = None InfantryDustTrails
		End


		;AnimationState = MOVING ATTACKING
		;	Animation
		;		AnimationName = MUMntTroll_SKL.MUMntTroll_RUNA  ; Running with club
		;		AnimationMode = LOOP
		;		AnimationSpeedFactorRange = 0.77 0.77
		;	End
		;	Flags               = RANDOMSTART
		;	ParticleSysBone     = None InfantryDustTrails
		;	FXEvent	= Frame:5 FireWhenSkipped Name:FX_TrollRightFootStep
		;	FXEvent	= Frame:17 FireWhenSkipped Name:FX_TrollLeftFootStep
		;End

		AnimationState				= MOVING PANICKING
			Animation				= RUNM
				AnimationName		=  MUMntTroll_SKL.MUMntTroll_MFDA
				AnimationMode		= LOOP
			End
			Flags					= RANDOMSTART
		End

		;AnimationState = MOVING DAMAGED
		;	Animation
		;		AnimationName = MUMntTroll_SKL.MUMntTroll_WLKB ; Walking with club
		;		AnimationMode = LOOP
		;		AnimationSpeedFactorRange = 1.3 1.3
		;	End
		;	Flags               = RANDOMSTART
		;	ParticleSysBone     = None InfantryDustTrails
		;	FXEvent	= Frame:22 FireWhenSkipped Name:FX_TrollLeftFootStep
		;	FXEvent	= Frame:3 FireWhenSkipped Name:FX_TrollRightFootStep
		;End


		;AnimationState = MOVING
		;	Animation
		;		AnimationName = MUMntTroll_SKL.MUMntTroll_WLKB ; Walking with club 
		;		AnimationMode = LOOP
		;		AnimationSpeedFactorRange = 1.36 1.36
		;	End
		;	Flags               = RANDOMSTART
		;	ParticleSysBone     = None InfantryDustTrails
		;	FXEvent	= Frame:22 FireWhenSkipped Name:FX_TrollLeftFootStep
		;	FXEvent	= Frame:3 FireWhenSkipped Name:FX_TrollRightFootStep	
		;End

		AnimationState = MOVING
			Animation
				AnimationName = MUMntTroll_SKL.MUMntTroll_RUNA  ; Running with club
				AnimationMode = LOOP
				;AnimationSpeedFactorRange = 0.77 0.77
			End
			Flags               = RANDOMSTART
			ParticleSysBone     = None InfantryDustTrails
			FXEvent	= Frame:5 FireWhenSkipped Name:FX_TrollRightFootStep
			FXEvent	= Frame:17 FireWhenSkipped Name:FX_TrollLeftFootStep
		End


		AnimationState = ENGAGED
			Animation
				AnimationName = MUMntTroll_SKL.MUMntTroll_IDLA
				AnimationMode = LOOP
			End
		End


		AnimationState = DESTROYED_WEAPON
			Animation
				AnimationName = MUMntTroll_SKL.MUMntTroll_ATKA
				AnimationMode = ONCE
			End
		End

		; --------- Just built ------------

		AnimationState = JUST_BUILT
			Animation
				AnimationName = MUMntTroll_SKL.MUMntTroll_WLKC ; temp
				AnimationMode = ONCE
				AnimationBlendTime = 0
				AnimationSpeedFactorRange = 0.9 0.9			
			End
			FXEvent	= Frame:0 FireWhenSkipped Name:FX_TrollRightFootStep
			FXEvent	= Frame:16 FireWhenSkipped Name:FX_TrollLeftFootStep
			FXEvent	= Frame:30 FireWhenSkipped Name:FX_TrollRightFootStep
			FXEvent	= Frame:44 FireWhenSkipped Name:FX_TrollLeftFootStep
		End	

		; --------- Click and Hit Reactions ------------

		AnimationState = HIT_REACTION HIT_LEVEL_1
			Animation = Hit_Level_1_a
				AnimationName = MUMntTroll_SKL.MUMntTroll_HITC
				AnimationMode = ONCE
			End
		End

		AnimationState = HIT_REACTION HIT_LEVEL_2
			Animation = Hit_Level_2
				AnimationName = MUMntTroll_SKL.MUMntTroll_HITB
				AnimationMode = ONCE
			End
		End

		AnimationState = HIT_REACTION HIT_LEVEL_3
			Animation = Hit_Level_3
				AnimationName = MUMntTroll_SKL.MUMntTroll_HITA
				AnimationMode = ONCE
			End
		End

		AnimationState = REACT_1
			Animation = Click_React_1
				AnimationName = MUMntTroll_SKL.MUMntTroll_RCTA
				AnimationMode = ONCE
			End
		End

		AnimationState = REACT_2
			Animation = Click_React_2
				AnimationName = MUMntTroll_SKL.MUMntTroll_RCTB
				AnimationMode = ONCE
			End
		End

		AnimationState = REACT_3
			Animation = Click_React_3
				AnimationName = MUMntTroll_SKL.MUMntTroll_RCTC
				AnimationMode = ONCE
			End
		End

		AnimationState = REACT_4
			Animation = Click_React_4
				AnimationName = MUMntTroll_SKL.MUMntTroll_RCTD
				AnimationMode = ONCE
			End
		End

		AnimationState = REACT_5
			Animation = Click_React_5
				AnimationName = MUMntTroll_SKL.MUMntTroll_RCTE
				AnimationMode = ONCE
			End
		End

		AnimationState = USER_2
			Animation = ReactToTrollPoke ; The two comes from the special TrollBored weapon
				AnimationName = MUMntTroll_SKL.MUMntTroll_HITE
				AnimationMode = ONCE
			End
		End

		AnimationState = USER_3 
			Animation = ExpectAnotherPoke ; The three comes from the special TrollBored weapon, and lasts longer than 2
				AnimationName = MUMntTroll_SKL.MUMntTroll_IDLJ
				AnimationMode = LOOP
			End
		End

		;-----------------------------------
		;Emotion

		AnimationState = EMOTION_CELEBRATING
			Animation
				AnimationName	=	MUMntTroll_SKL.MUMntTroll_IDLF
				AnimationMode	=	LOOP
			End
		End
		
		AnimationState					= EMOTION_TAUNTING
			Animation
				AnimationName			= MUMntTroll_SKL.MUMntTroll_IDLA
				AnimationMode			= ONCE
				AnimationPriority		= 20
			End
			Animation					= Taunting3
				AnimationName			= MUMntTroll_SKL.MUMntTroll_IDLH
				AnimationMode			= ONCE
				AnimationPriority		= 10
			End
			Animation					= Taunting4
				AnimationName			= MUMntTroll_SKL.MUMntTroll_IDLE
				AnimationMode			= ONCE
				AnimationPriority		= 5
			End
		End

		ModelConditionState = USER_4 
			Model			= MUAtkTr2_SKN
		End 		
	End
End

END











;========================================================================
;fortress keep




Upgrade Upgrade_KeepLevel2
 Type = OBJECT
	BuildCost		= 1000
	BuildTime		= 30
	DisplayName		= Upgrade:KeepLevel2
End



Upgrade Upgrade_KeepLevel3
 Type = OBJECT
	BuildCost		= 2500
	BuildTime		= 60
	DisplayName		= Upgrade:KeepLevel3
End



CommandSet  KeepCommandSet

End


;========================================


Object DwarvenEreborTowerTowerExpansion

Scale = 0.5



ReplaceModule ModuleTag_Draw
  Draw = W3DScriptedModelDraw ModuleTag_DrawNew

		ExtraPublicBone	= ARROW_01
		ExtraPublicBone	= ARROW_02
		ExtraPublicBone	= ARROW_03
		ExtraPublicBone	= ARROW_04
		ExtraPublicBone	= ARROW_05
		ExtraPublicBone	= ARROW_06
		ExtraPublicBone	= ARROW_07
		ExtraPublicBone	= ARROW_08
		ExtraPublicBone	= ARROW_09
		ExtraPublicBone	= ARROW_10
		ExtraPublicBone	= ARROW_11
		ExtraPublicBone	= ARROW_12

    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes

    DefaultModelConditionState
      Model = DB_houses_05
	WeaponLaunchBone =   PRIMARY ARROW_	
    End
    
    ; ---------- destruction states

		ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
			Model               = DB_houses_05			
		End
		AnimationState        = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
			Animation           = DBFDoor_DRA
				AnimationName     = DB_houses_05SKL.DBFTower_ABLD
				AnimationMode     = MANUAL
			End
			Flags				  = START_FRAME_FIRST
			ParticleSysBone = NONE BuildingContructDustExp
			ParticleSysBone = NONE ExpDwarves
			BeginScript
				CurDrawablePlaySound("GondorBarracksBeginConstruction")
			EndScript
		End


    
    ModelConditionState  = DAMAGED
      Model         = DBhouse5_D1
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End
	AnimationState = DAMAGED
		EnteringStateFX	= FX_BuildingDamaged
	End
	
    ModelConditionState  = REALLYDAMAGED
      Model         = DBhouse5_D2
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
    End
    
    AnimationState = REALLYDAMAGED
  		Animation				=	RubbleAnimation
			AnimationName		=	 DBhouse5_D2.DBhouse5_D2
			AnimationMode		=	ONCE
		End
		EnteringStateFX	= FX_BuildingReallyDamaged
	End
    
    ModelConditionState  = RUBBLE
		Model         = DBhouse5_D3
	End
		
	AnimationState = RUBBLE
  		Animation				=	RubbleAnimation
			AnimationName		=	 DBhouse5_D3.DBhouse5_D3
			AnimationMode		=	ONCE
		End
		EnteringStateFX	= FX_StructureMediumCollapse
	End 	 
  End
End



	WeaponSet
		Conditions			= None
		Weapon				= PRIMARY FortressArrowTowerBow
		AutoChooseSources	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End


	WeaponSet
		Conditions			= PLAYER_UPGRADE
		Weapon				= PRIMARY HaradrimPalaceBow  
		AutoChooseSources	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End



AddModule
	Behavior = GrantUpgradeCreate ModuleTag_abcdefghijkl
         UpgradeToGrant = Upgrade_MordorHaradrimPalaceLevel3
     End
End


AddModule
	Behavior = WeaponSetUpgrade ModuleTag_triggerweaponsetupgrade
		TriggeredBy	= Upgrade_GoodFortressFlamingMunitionsTrigger
	End
End

END





CommandButton Command_ConstructDwarvenEreborTowerTowerExpansion
	Command          = FOUNDATION_CONSTRUCT
	Object           = DwarvenEreborTowerTowerExpansion
	TextLabel        = CONTROLBAR:ConstructDwarvenEreborTowerTowerExpansion
	ButtonImage      = BDFortress_AxeTower
	ButtonBorderType = BUILD 
	DescriptLabel    = CONTROLBAR:ToolTipConstructDwarvenEreborTowerTowerExpansion
	Radial           = Yes  
End 



CommandSet  DwarvenFortressExpansionPadCornerCommandSetNew
	1 = Command_ConstructDwarvenEreborTowerTowerExpansion
End


Object DwarvenFortressExpansionPadCorner
CommandSet = DwarvenFortressExpansionPadCornerCommandSetNew
End





;================================







CommandButton Command_ConstructDwarvenBattleWagon
	Command				= UNIT_BUILD
	Object				= DwarvenBattleWagon
	Options				= CANCELABLE NEED_UPGRADE ; ;
	NeededUpgrade		= Upgrade_KeepLevel2
	NeededUpgradeAny	= Yes
	TextLabel			= CONTROLBAR:ConstructDwarvenBattleWagon
	ButtonImage			= BDForgeWorks_Battlewagon
	ButtonBorderType	= BUILD 
	DescriptLabel		= CONTROLBAR:ToolTipBuildDwarvenBattleWagonNew
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount	= Yes    
End





CommandButton Command_ConstructDwarvenMenOfDaleHorde
	Command				= UNIT_BUILD
	Object				= DwarvenMenOfDaleHorde
	Options				= CANCELABLE NEED_UPGRADE
	NeededUpgrade			= Upgrade_KeepLevel2
	NeededUpgradeAny	= Yes
	TextLabel			= CONTROLBAR:ConstructDwarvenMenOfDale
	ButtonImage			= BDArcheryRange_MenofDale
	ButtonBorderType	= BUILD 
	DescriptLabel		= CONTROLBAR:ToolTipBuildDwarvenMenOfDaleHordeNew
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount	= Yes 
End







CommandButton Command_ConstructGondorRangerHorde
	Command				= UNIT_BUILD
	Object				= GondorRangerHorde
	Options				= NEED_UPGRADE CANCELABLE
	NeededUpgrade		= Upgrade_KeepLevel2
	TextLabel			= CONTROLBAR:ConstructGondorRangerHorde
	ButtonImage			= BGArcheryRange_Rangers
	ButtonBorderType	= BUILD 
	DescriptLabel		= CONTROLBAR:ToolTipBuildGondorRangerHordeNew
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount	= Yes
End





CommandButton Command_ConstructGondorKnightHorde
	Command				= UNIT_BUILD
	Object				= GondorKnightHorde
	Options				= NEED_UPGRADE CANCELABLE
	NeededUpgrade		= Upgrade_KeepLevel2
	TextLabel			= CONTROLBAR:ConstructGondorKnightHorde
	ButtonImage			= BGStables_Knights
	ButtonBorderType    = BUILD 
	DescriptLabel       = CONTROLBAR:ToolTipBuildGondorKnightHordeNew
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount	= Yes      
End




CommandButton Command_ConstructElvenMirkwoodArcherHorde
	Command				= UNIT_BUILD
	Object				= ElvenMirkwoodArcherHorde
	Options				=  CANCELABLE NEED_UPGRADE
	NeededUpgrade		= Upgrade_KeepLevel2 
	NeededUpgradeAny	= Yes
	TextLabel			= CONTROLBAR:ConstructElvenMirkwoodArcherHorde
	ButtonImage			= BEElvenBarracks_MirkwoodArcher
	ButtonBorderType	= BUILD 
	DescriptLabel		= CONTROLBAR:ToolTipBuildElvenMirkwoodArcherHordeNew
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount	= Yes    
End










CommandButton Command_ConstructElvenRivendellLancers
	Command				= UNIT_BUILD
	Object				= ElvenRivendellLancerHorde
	Options				= NEED_UPGRADE CANCELABLE
	NeededUpgrade		= Upgrade_KeepLevel2 
	TextLabel			= CONTROLBAR:BuildElvenRivendellLancers
	ButtonImage			= BEGreenPasture_RivendellLancer
	ButtonBorderType	= BUILD													
	DescriptLabel		= CONTROLBAR:ToolTipBuildElvenRivendellLancersNew
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount	= Yes
End



CommandButton Command_ConstructIsengardBerserker
	Command				= UNIT_BUILD
	Object				= IsengardBeserker
	Options				= NEED_UPGRADE CANCELABLE
	NeededUpgrade		= Upgrade_KeepLevel2
	NeededUpgradeAny	= Yes
	TextLabel			= CONTROLBAR:ConstructIsengardBerserker
	ButtonImage			= BIBerserker
	ButtonBorderType	= BUILD 
	DescriptLabel		= CONTROLBAR:ToolTipBuildIsengardBerserkerNew
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount	= Yes     
End





CommandButton Command_ConstructIsengardWargRiderHorde
	Command				= UNIT_BUILD
	Object				= IsengardWargRiderHorde
	Options				= NEED_UPGRADE CANCELABLE
	NeededUpgrade		= Upgrade_KeepLevel2
	TextLabel			= CONTROLBAR:ConstructIsengardWargRider
	ButtonImage			= BIWargPit_Riders
	ButtonBorderType	= BUILD 
	DescriptLabel		= CONTROLBAR:ToolTipBuildIsengardWargRiderNew
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount	= Yes      
End







CommandButton Command_ConstructMordorHaradrimArcherHorde
	Command				= UNIT_BUILD
	Object				= MordorHaradrimArcherHorde
	Options				=  CANCELABLE
	TextLabel			= CONTROLBAR:ConstructMordorHaradrimArcherHorde
	ButtonImage			= BMHaradrimPalace_Haradrim
	ButtonBorderType		= BUILD 
	DescriptLabel			= CONTROLBAR:ToolTipBuildMordorHaradrimArcherHordeNew
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= Yes
End




CommandButton Command_ConstructMordorDrummerTroll
	Command				= UNIT_BUILD
	Object				= MordorDrummerTroll
	Options				= NEED_UPGRADE CANCELABLE
	NeededUpgrade		= Upgrade_KeepLevel2
	NeededUpgradeAny	= Yes
	TextLabel			= CONTROLBAR:ConstructMordorDrummerTrolls
	ButtonImage			= BMTrollCages_DrummerTroll
	ButtonBorderType	= BUILD 
	DescriptLabel		= CONTROLBAR:ToolTipConstructMordorDrummerTrollsNew
	Radial				= Yes
	InPalantir	   		= 	Yes
	ShowProductionCount	= Yes     
End





CommandButton Command_ConstructMordorAttackTroll
	Command				= UNIT_BUILD
	Object				= MordorAttackTroll
	Options				= CANCELABLE NEED_UPGRADE
	TextLabel			= CONTROLBAR:ConstructMordorAttackTroll
	ButtonImage			= BMTrollCages_AttackTroll
	ButtonBorderType		= BUILD 
	DescriptLabel			= CONTROLBAR:ToolTipBuildMordorAttackTrollNew
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= Yes
	NeededUpgrade		= Upgrade_KeepLevel2
	NeededUpgradeAny	= Yes
End





CommandButton Command_ConstructWildMarauderHorde
	Command				= UNIT_BUILD
	Object				= WildMarauderHorde
	Options				= CANCELABLE NEED_UPGRADE ; ;
	TextLabel			= CONTROLBAR:ConstructWildMarauderHorde
	ButtonImage			= BWFissure_Marauder
	ButtonBorderType	= BUILD											
	DescriptLabel		= CONTROLBAR:ToolTipBuildWildMarauderHordeNew
	NeededUpgrade		= Upgrade_KeepLevel2
	NeededUpgradeAny	= Yes
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount	= Yes
End





CommandButton Command_ConstructWildSpiderRiderHorde
	Command				= UNIT_BUILD
	Object				= GoblinSpiderRiderHorde
	Options				= CANCELABLE NEED_UPGRADE
	TextLabel			= CONTROLBAR:ConstructWildSpiderRiderHorde
	ButtonImage			= BWSpiderPit_SpiderRider
	ButtonBorderType    = BUILD 
	DescriptLabel       = CONTROLBAR:ToolTipBuildWildSpiderRiderHordeNew
	NeededUpgrade		= Upgrade_KeepLevel2
	NeededUpgradeAny	= Yes
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount	= Yes      
End








CommandButton Command_ConstructInnIsengardWildmanHorde        ; so they can be upgraded and they can level up
	Command				= UNIT_BUILD
	Object				= IsengardWildmanHorde  ;Inn
	Options				= CANCELABLE
	TextLabel			= CONTROLBAR:ConstructIsengardWildmanHorde
	ButtonImage			= BCInn_WildmenofDunland
	ButtonBorderType	= BUILD 
	DescriptLabel		= CONTROLBAR:ToolTipBuildIsengardWildmanHorde
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount	= Yes     
End








CommandButton Command_PurchaseUpgradeWildCaveLevel2   ; keep upgrade in fact
  Command           = OBJECT_UPGRADE
  Upgrade           = Upgrade_KeepLevel2 
  Options			= CANCELABLE
  TextLabel         = CONTROLBAR:UpgradeKeepLevel2
  ButtonImage       = UCCommon_UpgradeStructureNew
  ButtonBorderType  = UPGRADE
  DescriptLabel     = CONTROLBAR:ToolTipUpgradeKeepLevel2
  Radial            = Yes
  InPalantir	   	= Yes
End



;==========================


CommandButton Command_PurchaseUpgradeWildCaveLevel3   ; keep upgrade in fact
  Command           = OBJECT_UPGRADE
  Upgrade           = Upgrade_KeepLevel3
  Options			= CANCELABLE NEED_UPGRADE
	NeededUpgrade		= Upgrade_KeepLevel2
	NeededUpgradeAny	= Yes
  TextLabel         = CONTROLBAR:UpgradeKeepLevel3
  ButtonImage       = UCCommon_UpgradeStructureNew
  ButtonBorderType  = UPGRADE
  DescriptLabel     = CONTROLBAR:ToolTipUpgradeKeepLevel3
  Radial            = Yes
  InPalantir	   	= Yes
	LacksPrerequisiteLabel		= TOOLTIP:LackLevel2KeepUpgrade
End


;===========================

;------------------------------------------------------------------------
;;FIXING BUG WITH HARADRIM ARCHERS + adding them fire arrows






ExperienceLevel	EvilEliteLevel1
	TargetNames							=	EVIL_ELITE
	RequiredExperience					=	EXPERIENCE_REQUIRED_EVIL_ELITE_1
	ExperienceAward						=	EXPERIENCE_AWARD_EVIL_ELITE_1
	ExperienceAwardOwnGuysDie			= 	0
	ShowLevelUpTint						=	Yes	
	Rank								=	1
	LevelUpTintColor					=	R:255 G:255	B:255
	LevelUpTintPreColorTime				=	500	
	LevelUpTintPostColorTime			=	3000
	LevelUpTintSustainColorTime			=	500	
	EmotionType							=	CHEER
	SelectionDecal
		Texture							=	decal_I_level1
		Texture2						=	decal_evil_CO
		Style							=	SHADOW_MERGE_DECAL
		OpacityMin						=	80%
		OpacityMax						=	100%
		MinRadius						=	HORDE_DECAL_MIN_RADIUS
		MaxRadius						=	200	
		MaxSelectedUnits				=	40
	End	
END

ExperienceLevel	EvilEliteLevel2
	TargetNames							=	EVIL_ELITE
	RequiredExperience					=	EXPERIENCE_REQUIRED_EVIL_ELITE_2
	ExperienceAward						=	EXPERIENCE_AWARD_EVIL_ELITE_2
	AttributeModifiers					=	EvilEliteBonusRank2
	ExperienceAwardOwnGuysDie			= 	0
	LevelUpFx							=	FX:GenericLevelUp2FX	
	ShowLevelUpTint						=	Yes	
	Rank								=	2
        Upgrades                                                  = Upgrade_ObjectLevel2
	LevelUpTintColor					=	R:255 G:255	B:255
	LevelUpTintPreColorTime				=	500	
	LevelUpTintPostColorTime			=	3000
	LevelUpTintSustainColorTime			=	500	
	EmotionType							=	CHEER
	SelectionDecal
		Texture							=	decal_I_level2
		Texture2						=	decal_evil_CO
		Style							=	SHADOW_MERGE_DECAL
		OpacityMin						=	80%
		OpacityMax						=	100%
		MinRadius						=	HORDE_DECAL_MIN_RADIUS
		MaxRadius						=	200	
		MaxSelectedUnits				=	40

	End	
END

ExperienceLevel	EvilEliteLevel3
	TargetNames							=	EVIL_ELITE
	RequiredExperience					=	EXPERIENCE_REQUIRED_EVIL_ELITE_3
	ExperienceAward						=	EXPERIENCE_AWARD_EVIL_ELITE_3
	AttributeModifiers					=	EvilEliteBonusRank3
	ExperienceAwardOwnGuysDie			= 	0
	LevelUpFx							=	FX:GenericLevelUp3FX	
	ShowLevelUpTint						=	Yes	
	Rank								=	3
	LevelUpTintColor					=	R:255 G:255	B:255
	LevelUpTintPreColorTime				=	500	
	LevelUpTintPostColorTime			=	3000
	LevelUpTintSustainColorTime			=	500	
	EmotionType							=	CHEER
	SelectionDecal
		Texture							=	decal_I_level3
		Texture2						=	decal_evil_CO
		Style							=	SHADOW_MERGE_DECAL
		OpacityMin						=	80%
		OpacityMax						=	100%
		MinRadius						=	HORDE_DECAL_MIN_RADIUS
		MaxRadius						=	200	
		MaxSelectedUnits				=	40
	End	
END

ExperienceLevel	EvilEliteLevel4
	TargetNames							=	EVIL_ELITE
	RequiredExperience					=	EXPERIENCE_REQUIRED_EVIL_ELITE_4
	ExperienceAward						=	EXPERIENCE_AWARD_EVIL_ELITE_4
	AttributeModifiers					=	EvilEliteBonusRank4
	ExperienceAwardOwnGuysDie			= 	0
	LevelUpFx							=	FX:GenericLevelUp4FX	
	ShowLevelUpTint						=	Yes	
	Rank								=	4
	LevelUpTintColor					=	R:255 G:255	B:255
	LevelUpTintPreColorTime				=	500	
	LevelUpTintPostColorTime			=	3000
	LevelUpTintSustainColorTime			=	500	
	EmotionType							=	CHEER
	SelectionDecal
		Texture							=	decal_I_level4
		Texture2						=	decal_evil_CO
		Style							=	SHADOW_MERGE_DECAL
		OpacityMin						=	80%
		OpacityMax						=	100%

		MinRadius						=	HORDE_DECAL_MIN_RADIUS
		MaxRadius						=	200	
		MaxSelectedUnits				=	40
	End	
END

ExperienceLevel	EvilEliteLevel5
	TargetNames							=	EVIL_ELITE
	RequiredExperience					=	EXPERIENCE_REQUIRED_EVIL_ELITE_5
	ExperienceAward						=	EXPERIENCE_AWARD_EVIL_ELITE_5
	AttributeModifiers					=	EvilEliteBonusRank5
	ExperienceAwardOwnGuysDie			= 	0
	LevelUpFx							=	FX:GenericLevelUp4FX	
	ShowLevelUpTint						=	Yes	
	Rank								=	5
	LevelUpTintColor					=	R:255 G:255	B:255
	LevelUpTintPreColorTime				=	500	
	LevelUpTintPostColorTime			=	3000
	LevelUpTintSustainColorTime			=	500	
	EmotionType							=	CHEER
	SelectionDecal
		Texture							=	decal_I_level4
		Texture2						=	decal_evil_CO
		Style							=	SHADOW_MERGE_DECAL
		OpacityMin						=	80%
		OpacityMax						=	100%
		MinRadius						=	HORDE_DECAL_MIN_RADIUS
		MaxRadius						=	200	
		MaxSelectedUnits				=	40
	End	
END


SpecialPower SpecialAbilityHaradrimArcherBarbedArrow
	Enum			= SPECIAL_AT_VISIBLE_OBJECT
	ReloadTime		= 20000 ; 6s was too overpowered
; 	UnitSpecificSoundToUseAsInitiateIntendToDoVoice = VoiceInitiateBarbedArrowAttack
End




CommandButton Command_HaradrimArcherBarbedArrowAbility
	Command				= SPECIAL_POWER
	SpecialPower		= SpecialAbilityHaradrimArcherBarbedArrow
	Options				= NEED_TARGET_ENEMY_OBJECT NEED_TARGET_NEUTRAL_OBJECT OK_FOR_MULTI_SELECT OK_FOR_MULTI_EXECUTE ; ;
	ButtonImage			= UCCommon_BarbedArrows
	CursorName			= EvilAbilityObj
	InvalidCursorName	= GenericInvalid
	TextLabel			= CONTROLBAR:BarbedArrows
	DescriptLabel		= CONTROLBAR:ToolTipBarbedArrowsNew
	InPalantir			= Yes	
	ButtonBorderType    = ACTION
	AutoAbility			= Yes
End





CommandSet MordorHaradrimArcherHordeBarbedArrowAndFireArrowCommandSet
	1	= Command_ToggleStance
	2	= Command_ArcherBombard
	3	= Command_HaradrimArcherBarbedArrowAbility
        4       = Command_PurchaseUpgradeMordorFireArrows
	5	= Command_PurchaseUpgradeMordorBasicTraining
	6	= Command_PurchaseUpgradeMordorHeavyArmor
	12	= Command_CaptureBuilding
	13	= Command_AttackMove
	14	= Command_Stop
End




Object MordorHaradrimArcherHorde
		CommandSet		= MordorHaradrimArcherHordeBarbedArrowAndFireArrowCommandSet
End




;----------------------------------------------------------------------------------------



;-----------------MORDOR SECTION



CommandButton Command_PurchaseTechnologyMordorFireArrows
	Command				= PLAYER_UPGRADE
	Options				= CANCELABLE
	Upgrade				= Upgrade_TechnologyMordorFireArrows 
	NeededUpgrade		= Upgrade_KeepLevel3
	TextLabel			= CONTROLBAR:PurchaseTechnologyMordorFireArrows
	ButtonImage			= BMOrcPit_FlamingArrows
	ButtonBorderType	= UPGRADE
	DescriptLabel		= CONTROLBAR:ToolTipPurchaseTechnologyMordorFireArrows
	Radial				= Yes
	InPalantir			= Yes
	LacksPrerequisiteLabel		= TOOLTIP:LackLevel3TavernFireArrows
End




CommandButton Command_PurchaseTechnologyMordorForgedBlades
	Command				= PLAYER_UPGRADE
	Options				=  CANCELABLE 
	Upgrade				= Upgrade_TechnologyMordorForgedBlades 
	NeededUpgrade		= Upgrade_KeepLevel3
	TextLabel			= CONTROLBAR:PurchaseTechnologyMordorForgedBlades
	ButtonImage			= BIArmory_ForgedBlades
	ButtonBorderType	= UPGRADE
	DescriptLabel		= CONTROLBAR:ToolTipPurchaseTechnologyMordorForgedBlades
	Radial				= Yes
	InPalantir			= Yes
	LacksPrerequisiteLabel		= TOOLTIP:LackLevel2OrcPitForgedBlades
End




CommandButton Command_PurchaseTechnologyMordorHeavyArmor
	Command				= PLAYER_UPGRADE
	Options				=  CANCELABLE 
	Upgrade				= Upgrade_TechnologyMordorHeavyArmor 
	NeededUpgrade		= Upgrade_KeepLevel3
	TextLabel			= CONTROLBAR:PurchaseTechnologyMordorHeavyArmor
	ButtonImage			= BIArmory_HeavyArmor
	ButtonBorderType	= UPGRADE
	DescriptLabel		= CONTROLBAR:ToolTipPurchaseTechnologyMordorHeavyArmor
	Radial				= Yes
	InPalantir			= Yes
	LacksPrerequisiteLabel		= TOOLTIP:LackLevel2OrcPitForgedBlades ; ;TOOLTIP:LackLevel2OrcPitHeavyArmor
End





CommandButton Command_PurchaseTechnologyMordorBasicTraining
	Command                 = PUSH_VISIBLE_COMMAND_RANGE
        Upgrade                 = NONE
	Options				= CANCELABLE NEED_UPGRADE
	NeededUpgrade		= Upgrade_KeepLevel3
        NeededUpgradeAny = Yes
	InPalantir	   		= No
	TextLabel               = CONTROLBAR:SelectUpgradesGenericKeep
	ButtonImage             = UCCommon_UpgradeStructureNew
	ButtonBorderType        = SYSTEM 
	DescriptLabel           = CONTROLBAR:ToolTipSelectUpgradesGenericKeep
	Radial                  = Yes
	CommandRangeStart		= 10
	CommandRangeCount		= 4
End
CommandButton Command_SelectRevivablesMordorFortress
	Command                 = PUSH_VISIBLE_COMMAND_RANGE
	TextLabel               = CONTROLBAR:SelectRevivablesGenericKeep
	Options				= CANCELABLE NEED_UPGRADE
	NeededUpgrade		= Upgrade_KeepLevel3
	ButtonImage             = UCCommon_EvilHeroes
	ButtonBorderType        = SYSTEM 
	DescriptLabel           = CONTROLBAR:ToolTipSelectRevivablesGenericKeep
	Radial                  = Yes
	CommandRangeStart		= 14
	CommandRangeCount		= 11
End



;---------------------ISENGARD SECTION







CommandButton Command_PurchaseTechnologyIsengardFireArrows
	Command				= PLAYER_UPGRADE
	Upgrade				= Upgrade_TechnologyIsengardFireArrows 
	Options				= CANCELABLE 
	NeededUpgrade		= Upgrade_KeepLevel3
	TextLabel			= CONTROLBAR:PurchaseTechnologyIsengardFireArrows
	ButtonImage			= BIArmory_FlamingArrows
	ButtonBorderType	= UPGRADE
	DescriptLabel		= CONTROLBAR:ToolTipPurchaseTechnologyIsengardFireArrows
	Radial				= Yes
	InPalantir			= Yes
	LacksPrerequisiteLabel		= TOOLTIP:LackIsengardFireArrowsTech
End





CommandButton Command_PurchaseTechnologyIsengardForgedBlades
	Command				= PLAYER_UPGRADE
	Upgrade				= Upgrade_TechnologyIsengardForgedBlades 
	Options				= CANCELABLE 
	NeededUpgrade		= Upgrade_KeepLevel3
	TextLabel			= CONTROLBAR:PurchaseTechnologyIsengardForgedBlades
	ButtonImage			= BIArmory_ForgedBlades
	ButtonBorderType	= UPGRADE
	DescriptLabel		= CONTROLBAR:ToolTipPurchaseTechnologyIsengardForgedBlades
	Radial				= Yes
	InPalantir			= Yes
	LacksPrerequisiteLabel		= TOOLTIP:LackIsengardForgedBladesTech
End




CommandButton Command_PurchaseTechnologyIsengardHeavyArmor
	Command				= PLAYER_UPGRADE
	Upgrade				= Upgrade_TechnologyIsengardHeavyArmor 
	Options				= CANCELABLE 
	TextLabel			= CONTROLBAR:PurchaseTechnologyIsengardHeavyArmor
	NeededUpgrade		= Upgrade_KeepLevel3
	ButtonImage			= BIArmory_HeavyArmor
	ButtonBorderType	= UPGRADE
	DescriptLabel		= CONTROLBAR:ToolTipPurchaseTechnologyIsengardHeavyArmor
	Radial				= Yes
	InPalantir	   		= Yes
	LacksPrerequisiteLabel		= TOOLTIP:LackIsengardHeavyArmorTech
End



CommandButton Command_PurchaseTechnologyIsengardBasicTraining
	Command                 = PUSH_VISIBLE_COMMAND_RANGE
        Upgrade                 = NONE
	Options				= CANCELABLE NEED_UPGRADE
	NeededUpgrade		= Upgrade_KeepLevel3
	InPalantir	   		= No
	TextLabel               = CONTROLBAR:SelectUpgradesGenericKeep
	ButtonImage             = UCCommon_UpgradeStructureNew
	ButtonBorderType        = SYSTEM 
	DescriptLabel           = CONTROLBAR:ToolTipSelectUpgradesGenericKeep
	Radial                  = Yes
	CommandRangeStart		= 9
	CommandRangeCount		= 4
End


CommandButton Command_SelectRevivablesIsengardFortress
	Command                 = PUSH_VISIBLE_COMMAND_RANGE
	TextLabel               = CONTROLBAR:SelectRevivablesGenericKeep
	Options				= CANCELABLE NEED_UPGRADE
	NeededUpgrade		= Upgrade_KeepLevel3
	ButtonImage             = UCCommon_EvilHeroes
	ButtonBorderType        = SYSTEM 
	DescriptLabel           = CONTROLBAR:ToolTipSelectRevivablesGenericKeep
	Radial                  = Yes
	CommandRangeStart		= 13
	CommandRangeCount		= 11
End




;------------------WILD (GOBLIN) SECTION

CommandButton Command_PurchaseTechnologyWildHeavyArmor
	Command				= PLAYER_UPGRADE
	Options				= CANCELABLE 
	Upgrade				= Upgrade_TechnologyWildHeavyArmor
	NeededUpgrade		= Upgrade_KeepLevel3
	TextLabel			= CONTROLBAR:PurchaseTechnologyWildHeavyArmor
	ButtonImage			= BWTreasureTrove_ScavengedArmor
	ButtonBorderType	= UPGRADE
	DescriptLabel		= CONTROLBAR:ToolTipPurchaseechnologyWildHeavyArmor
	Radial				= Yes
	InPalantir			= Yes
End

CommandButton Command_PurchaseTechnologyWildFireArrows
	Command				= PLAYER_UPGRADE
	Options				=  CANCELABLE 
	Upgrade				= Upgrade_TechnologyWildFireArrows 
	NeededUpgrade		= Upgrade_KeepLevel3
	TextLabel			= CONTROLBAR:PurchaseTechnologyWildFireArrows
	ButtonImage			= BMOrcPit_FlamingArrows
	ButtonBorderType	= UPGRADE
	DescriptLabel		= CONTROLBAR:ToolTipPurchaseTechnologyWildFireArrows
	Radial				= Yes
	InPalantir			= Yes
	LacksPrerequisiteLabel		= TOOLTIP:LackLevel3TreasureTrove
	
End




CommandButton Command_PurchaseTechnologyWildForgedBlades
	Command				= PLAYER_UPGRADE
	Options				= CANCELABLE
	Upgrade				= Upgrade_TechnologyWildForgedBlades
	NeededUpgrade		= Upgrade_KeepLevel3
	TextLabel			= CONTROLBAR:PurchaseTechnologyWildForgedBlades
	ButtonImage			= BWTreasureTrove_ForgedBlades
	ButtonBorderType	= UPGRADE
	DescriptLabel		= CONTROLBAR:ToolTipPurchaseTechnologyWildForgedBlades
	Radial				= Yes
	InPalantir			= Yes
	LacksPrerequisiteLabel		= TOOLTIP:LackLevel2TreasureTrove
	
End


CommandButton Command_PurchaseTechnologyWildBasicTraining
	Command                 = PUSH_VISIBLE_COMMAND_RANGE
        Upgrade                 = NONE
	Options				= CANCELABLE NEED_UPGRADE
	NeededUpgrade		= Upgrade_KeepLevel3
	InPalantir	   		= No
	TextLabel               = CONTROLBAR:SelectUpgradesGenericKeep
	ButtonImage             = UCCommon_UpgradeStructureNew
	ButtonBorderType        = SYSTEM 
	DescriptLabel           = CONTROLBAR:ToolTipSelectUpgradesGenericKeep
	Radial                  = Yes
	CommandRangeStart		= 10
	CommandRangeCount		= 4
End
CommandButton Command_SelectRevivablesWildFortress
	Command                 = PUSH_VISIBLE_COMMAND_RANGE
	TextLabel               = CONTROLBAR:SelectRevivablesGenericKeep
	Options				= CANCELABLE NEED_UPGRADE
	NeededUpgrade		= Upgrade_KeepLevel3
	ButtonImage             = UCCommon_EvilHeroes
	ButtonBorderType        = SYSTEM 
	DescriptLabel           = CONTROLBAR:ToolTipSelectRevivablesGenericKeep
	Radial                  = Yes
	CommandRangeStart		= 14
	CommandRangeCount		= 11
End




;-----------------------MEN SECTION

CommandButton Command_PurchaseTechnologyGondorForgedBlades
	Command				= PLAYER_UPGRADE
	Options				= CANCELABLE 
	Upgrade				= Upgrade_TechnologyGondorForgedBlades 
	NeededUpgrade		= Upgrade_KeepLevel3
	TextLabel			= CONTROLBAR:PurchaseTechnologyGondorForgedBlades
	ButtonImage			= BRArmory_ForgedBlades
	ButtonBorderType	= UPGRADE
	DescriptLabel		= CONTROLBAR:ToolTipPurchaseTechnologyGondorForgedBlades
	Radial				= Yes
	InPalantir			= Yes
	; ;LacksPrerequisiteLabel		= TOOLTIP:LackLevel2BlackSmithForgedBlades
End

CommandButton Command_PurchaseTechnologyGondorHeavyArmor
	Command				= PLAYER_UPGRADE
	Options				=  CANCELABLE 
	Upgrade				= Upgrade_TechnologyGondorHeavyArmor 
	NeededUpgrade		= Upgrade_KeepLevel3
	TextLabel			= CONTROLBAR:PurchaseTechnologyGondorHeavyArmor
	ButtonImage			= BGBlacksmith_HeavyArmor
	ButtonBorderType	= UPGRADE
	DescriptLabel		= CONTROLBAR:ToolTipPurchaseTechnologyGondorHeavyArmor
	Radial				= Yes
	InPalantir	   		= Yes
	LacksPrerequisiteLabel		= TOOLTIP:LackLevel2BlackSmithForgedBlades ; ;TOOLTIP:LackLevel3BlacksmithHeavyArmor
End



CommandButton Command_PurchaseTechnologyGondorFireArrows
	Command				= PLAYER_UPGRADE
	Options				=  CANCELABLE 
	Upgrade				= Upgrade_TechnologyGondorFireArrows
	NeededUpgrade		= Upgrade_KeepLevel3 
	TextLabel			= CONTROLBAR:PurchaseTechnologyGondorFireArrows
	ButtonImage			= BGArcheryRange_FireArrows
	ButtonBorderType	= UPGRADE
	DescriptLabel		= CONTROLBAR:ToolTipPurchaseTechnologyGondorFireArrows
	Radial				= Yes
	InPalantir			= Yes
	LacksPrerequisiteLabel		= TOOLTIP:LackGondorFireArrowsTechnology
End



CommandButton Command_PurchaseTechnologyGondorBasicTraining
	Command                 = PUSH_VISIBLE_COMMAND_RANGE
        Upgrade                 = NONE
	Options				= CANCELABLE NEED_UPGRADE
	NeededUpgrade		= Upgrade_KeepLevel3
	InPalantir	   		= No
	TextLabel               = CONTROLBAR:SelectUpgradesGenericKeep
	ButtonImage             = UCCommon_UpgradeStructureNew
	ButtonBorderType        = SYSTEM 
	DescriptLabel           = CONTROLBAR:ToolTipSelectUpgradesGenericKeep
	Radial                  = Yes
	CommandRangeStart		= 9
	CommandRangeCount		= 4
End
CommandButton Command_SelectRevivablesMenFortress
	Command                 = PUSH_VISIBLE_COMMAND_RANGE
	TextLabel               = CONTROLBAR:SelectRevivablesGenericKeep
	Options				= CANCELABLE NEED_UPGRADE
	NeededUpgrade		= Upgrade_KeepLevel3
	ButtonImage             = UCCommon_GoodHeroes
	ButtonBorderType        = SYSTEM 
	DescriptLabel           = CONTROLBAR:ToolTipSelectRevivablesGenericKeep
	Radial                  = Yes
	CommandRangeStart		= 13
	CommandRangeCount		= 11
End






;---------------------------------DWARF SECTION


CommandButton Command_PurchaseTechnologyDwarvenFireArrows ;building
	Command				= PLAYER_UPGRADE
	Options				= CANCELABLE
	Upgrade				= Upgrade_TechnologyDwarvenFireArrows 
	NeededUpgrade		= Upgrade_KeepLevel3
	TextLabel			= CONTROLBAR:PurchaseTechnologyRohanFireArrows
	ButtonImage			= BGArcheryRange_FireArrows
	ButtonBorderType	= UPGRADE
	DescriptLabel		= CONTROLBAR:ToolTipPurchaseTechnologyRohanFireArrows
	Radial				= Yes
	InPalantir			= Yes
	LacksPrerequisiteLabel		= TOOLTIP:LackLevel3ArcheryRange ; ;
End



CommandButton Command_PurchaseTechnologyDwarvenForgedBlades
	Command				= PLAYER_UPGRADE
	Options				=  CANCELABLE
	Upgrade				= Upgrade_TechnologyDwarvenForgedBlades
	NeededUpgrade		= Upgrade_KeepLevel3
	TextLabel			= CONTROLBAR:PurchaseTechnologyDwarvenForgedBlades
	ButtonImage			= BDForgeWorks_ForgedBlades
	ButtonBorderType	= UPGRADE
	DescriptLabel		= CONTROLBAR:ToolTipPurchaseTechnologyDwarvenForgedBlades
	Radial				= Yes
	InPalantir			= Yes
	LacksPrerequisiteLabel		= TOOLTIP:LackLevel3ForgeWorks ; ;TOOLTIP:LackLevel2ForgeWorks
End


CommandButton Command_PurchaseTechnologyDwarvenMithrilMail
	Command				= PLAYER_UPGRADE
	Options				= CANCELABLE
	Upgrade				= Upgrade_TechnologyDwarvenMithrilMail
	NeededUpgrade		= Upgrade_KeepLevel3
	TextLabel			= CONTROLBAR:PurchaseTechnologyDwarvenMithrilMail
	ButtonImage			= BDForgeWorks_MithrilMail
	ButtonBorderType	= UPGRADE
	DescriptLabel		= CONTROLBAR:ToolTipPurchaseTechnologyDwarvenMithrilMail
	Radial				= Yes
	InPalantir			= Yes
	LacksPrerequisiteLabel		= TOOLTIP:LackLevel3ForgeWorks
End


CommandButton Command_PurchaseTechnologyDwarvenBasicTraining
	Command                 = PUSH_VISIBLE_COMMAND_RANGE
        Upgrade                 = NONE
	Options				= CANCELABLE NEED_UPGRADE
	NeededUpgrade		= Upgrade_KeepLevel3
	InPalantir	   		= No
	TextLabel               = CONTROLBAR:SelectUpgradesGenericKeep
	ButtonImage             = UCCommon_UpgradeStructureNew
	ButtonBorderType        = SYSTEM 
	DescriptLabel           = CONTROLBAR:ToolTipSelectUpgradesGenericKeep
	Radial                  = Yes
	CommandRangeStart		= 10
	CommandRangeCount		= 4
End
CommandButton Command_SelectRevivablesDwarvenFortress
	Command                 = PUSH_VISIBLE_COMMAND_RANGE
	TextLabel               = CONTROLBAR:SelectRevivablesGenericKeep
	Options				= CANCELABLE NEED_UPGRADE
	NeededUpgrade		= Upgrade_KeepLevel3
	ButtonImage             = UCCommon_GoodHeroes
	ButtonBorderType        = SYSTEM 
	DescriptLabel           = CONTROLBAR:ToolTipSelectRevivablesGenericKeep
	Radial                  = Yes
	CommandRangeStart		= 14
	CommandRangeCount		= 11
End


;------------------------------- ELVES SECTION 




CommandButton Command_PurchaseTechnologyElvenSilverthornArrows
	Command				= PLAYER_UPGRADE
	Options				=  CANCELABLE
	Upgrade				= Upgrade_TechnologyElvenSilverthornArrows
	NeededUpgrade		= Upgrade_KeepLevel3
	TextLabel			= CONTROLBAR:PurchaseTechnologyElvenSilverthornArrows
	ButtonImage			= BEEregionForge_SilverthornArrows
	ButtonBorderType	= UPGRADE
	DescriptLabel		= CONTROLBAR:ToolTipPurchaseTechnologyElvenSilverthornArrows
	Radial				= Yes
	InPalantir			= Yes
	LacksPrerequisiteLabel		= TOOLTIP:LackSilverthornTechnology
End

CommandButton Command_PurchaseTechnologyElvenForgedBlades
	Command				= PLAYER_UPGRADE
	Options				= CANCELABLE
	Upgrade				= Upgrade_TechnologyElvenForgedBlades 
	NeededUpgrade		= Upgrade_KeepLevel3
	TextLabel			= CONTROLBAR:PurchaseTechnologyElvenForgedBlades
	ButtonImage			= BEEregionForge_ForgedBlades
	ButtonBorderType		= UPGRADE
	DescriptLabel			= CONTROLBAR:ToolTipPurchaseTechnologyGondorForgedBlades
	Radial				= Yes
	InPalantir			= Yes
	LacksPrerequisiteLabel		= TOOLTIP:LackLevel2EregionForge
End


CommandButton Command_PurchaseTechnologyElvenHeavyArmor
	Command				= PLAYER_UPGRADE
	Options				= CANCELABLE 
	Upgrade				= Upgrade_TechnologyElvenHeavyArmor 
	NeededUpgrade		= Upgrade_KeepLevel3
	TextLabel			= CONTROLBAR:PurchaseTechnologyElvenHeavyArmor
	ButtonImage			= BEEregionForge_ElvenArmor
	ButtonBorderType	= UPGRADE
	DescriptLabel		= CONTROLBAR:ToolTipPurchaseTechnologyElvenHeavyArmor
	Radial				= Yes
	InPalantir	   		= Yes
	LacksPrerequisiteLabel		= TOOLTIP:LackLevel2BlacksmithHeavyArmor
End

CommandButton Command_PurchaseTechnologyElvenBasicTraining
	Command                 = PUSH_VISIBLE_COMMAND_RANGE
        Upgrade                 = NONE
	Options				= CANCELABLE NEED_UPGRADE
	NeededUpgrade		= Upgrade_KeepLevel3
	InPalantir	   		= No
	TextLabel               = CONTROLBAR:SelectUpgradesGenericKeep
	ButtonImage             = UCCommon_UpgradeStructureNew
	ButtonBorderType        = SYSTEM 
	DescriptLabel           = CONTROLBAR:ToolTipSelectUpgradesGenericKeep
	Radial                  = Yes
	CommandRangeStart		= 9
	CommandRangeCount		= 4
End
CommandButton Command_SelectRevivablesElvenFortress
	Command                 = PUSH_VISIBLE_COMMAND_RANGE
	TextLabel               = CONTROLBAR:SelectRevivablesGenericKeep
	Options				= CANCELABLE NEED_UPGRADE
	NeededUpgrade		= Upgrade_KeepLevel3
	ButtonImage             = UCCommon_GoodHeroes
	ButtonBorderType        = SYSTEM 
	DescriptLabel           = CONTROLBAR:ToolTipSelectRevivablesGenericKeep
	Radial                  = Yes
	CommandRangeStart		= 13
	CommandRangeCount		= 11
End


;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;for flaming munitions


CommandButton Command_PurchaseUpgradeDwarvenFortressFlamingMunitions 
  Command           = OBJECT_UPGRADE
  Upgrade           = Upgrade_GoodFortressFlamingMunitionsTrigger
  Options			= CANCELABLE
  TextLabel         = CONTROLBAR:PurchaseUpgradeDwarvenFortressFlamingMunitions
  ButtonImage       = BDFortress_FlamingMunitions
  ButtonBorderType  = UPGRADE
  DescriptLabel     = CONTROLBAR:ToolTipPurchaseUpgradeDwarvenFortressFlamingMunitionsNew
  Radial            = Yes
  InPalantir	   	= Yes
End










;=========================================================================
;THIS BLOCK OF CODE FOR FREE BANNER CARRIERS
;=========================================================================


CommandButton Command_PurchaseUpgradeGondorBasicTraining
	Command				= OBJECT_UPGRADE
	Options				= OK_FOR_MULTI_SELECT CANCELABLE
	Upgrade				= Upgrade_GondorBasicTraining 
	TextLabel			= CONTROLBAR:PurchaseUpgradeGondorBasicTraining
	ButtonImage			= BGBlacksmith_SilverTreeBanner
	ButtonBorderType	= UPGRADE
	DescriptLabel		= CONTROLBAR:ToolTipPurchaseUpgradeGondorBasicTraining
	InPalantir			= Yes
	LacksPrerequisiteLabel		= TOOLTIP:LackGondorBasicTraining
End

CommandButton Command_PurchaseUpgradeElvenBasicTraining
	Command				= OBJECT_UPGRADE
	Options				= OK_FOR_MULTI_SELECT CANCELABLE
	Upgrade				= Upgrade_ElvenBasicTraining 
	TextLabel			= CONTROLBAR:PurchaseUpgradeElderRacesBasicTraining
	ButtonImage			= BEEregionForge_BannerCarrier
	ButtonBorderType	= UPGRADE
	DescriptLabel		= CONTROLBAR:ToolTipPurchaseUpgradeElderRacesBasicTraining
	InPalantir			= Yes
	LacksPrerequisiteLabel		= TOOLTIP:LackElderRacesBasicTraining
End


CommandButton Command_PurchaseUpgradeIsengardBasicTraining
	Command				= OBJECT_UPGRADE
	Options				= OK_FOR_MULTI_SELECT CANCELABLE
	Upgrade				= Upgrade_IsengardBasicTraining 
	TextLabel			= CONTROLBAR:PurchaseUpgradeIsengardBasicTraining
	ButtonImage			= BIArmory_WhiteHandBanner
	ButtonBorderType	= UPGRADE
	DescriptLabel		= CONTROLBAR:ToolTipPurchaseUpgradeIsengardBasicTraining
	InPalantir			= Yes
	LacksPrerequisiteLabel		= TOOLTIP:LackIsengardBasicTraining
End



CommandButton Command_PurchaseUpgradeMordorBasicTraining
	Command				= OBJECT_UPGRADE
	Options				= OK_FOR_MULTI_SELECT CANCELABLE
	Upgrade				= Upgrade_MordorBasicTraining 
	TextLabel			= CONTROLBAR:PurchaseUpgradeMordorBasicTraining
	ConflictingLabel	= CONTROLBAR:BatallionAreadyHasUpgrade
	ButtonImage			= BMOrcPit_RedEyeBanner
	ButtonBorderType	= UPGRADE
	DescriptLabel		= CONTROLBAR:ToolTipPurchaseUpgradeMordorBasicTraining
	InPalantir			= Yes
	LacksPrerequisiteLabel		= TOOLTIP:LackMordorBasicTraining
End




CommandButton Command_PurchaseUpgradeWildBasicTraining
	Command				= OBJECT_UPGRADE
	Options				= OK_FOR_MULTI_SELECT CANCELABLE
	Upgrade				= Upgrade_WildBasicTraining 
	TextLabel			= CONTROLBAR:PurchaseUpgradeWildBasicTraining
	ButtonImage			= BWTreasureTrove_BannerCarrier
	ButtonBorderType	= UPGRADE
	DescriptLabel		= CONTROLBAR:ToolTipPurchaseUpgradeWildBasicTraining
	InPalantir			= Yes
	LacksPrerequisiteLabel		= TOOLTIP:LackWildBasicTraining
End


;==========================================================================

CommandSet CommandSetKeepDwarves
InitialVisible = 10


  1 = Command_ConstructDwarvenGuardianHorde
  2 = Command_ConstructDwarvenPhalanxHorde
  3 = Command_ConstructDwarvenAxeThrowerHorde
  4 = Command_ConstructDwarvenMenOfDaleHorde
  5 = Command_ConstructDwarvenBattleWagon
  6     = Command_PurchaseTechnologyDwarvenBasicTraining
  7     = Command_SelectRevivablesDwarvenFortress
  8     = Command_PurchaseUpgradeWildCaveLevel2
  9 = Command_PurchaseUpgradeWildCaveLevel3
  10 = Command_PurchaseUpgradeDwarvenFortressFlamingMunitions 


	11	= Command_PurchaseTechnologyDwarvenMithrilMail
	12	= Command_PurchaseTechnologyDwarvenForgedBlades
        13      = Command_PurchaseTechnologyDwarvenFireArrows
        14      = Command_RadialBack

	15	= Command_RingHeroReviveSlot	
	16	= Command_CreateAHeroReviveSlot		// Note we also need an extra slot for the Create A Hero
	17   = Command_GenericReviveSlot1		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset! 
	18	= Command_GenericReviveSlot2		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	19	= Command_GenericReviveSlot3		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	20	= Command_GenericReviveSlot4		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	21	= Command_GenericReviveSlot5		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	22	= Command_GenericReviveSlot6		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	23	= Command_GenericReviveSlot7		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	24	= Command_GenericReviveSlot8		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
        25      = Command_RadialBack



End









CommandSet CommandSetKeepMen

InitialVisible = 9


  1	= Command_ConstructGondorFighterHorde
  2	= Command_ConstructGondorArcherHorde
  3	= Command_ConstructGondorTowerShieldGuardHorde
  4     = Command_ConstructGondorRangerHorde
  5     = Command_ConstructGondorKnightHorde
  6     = Command_PurchaseTechnologyGondorBasicTraining
  7     = Command_SelectRevivablesMenFortress
  8     = Command_PurchaseUpgradeWildCaveLevel2
  9 = Command_PurchaseUpgradeWildCaveLevel3


	10	= Command_PurchaseTechnologyGondorHeavyArmor
	11	= Command_PurchaseTechnologyGondorForgedBlades
        12      = Command_PurchaseTechnologyGondorFireArrows
        13      = Command_RadialBack

	14	= Command_RingHeroReviveSlot	
	15	= Command_CreateAHeroReviveSlot		// Note we also need an extra slot for the Create A Hero
	16   = Command_GenericReviveSlot1		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset! 
	17	= Command_GenericReviveSlot2		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	18	= Command_GenericReviveSlot3		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	19	= Command_GenericReviveSlot4		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	20	= Command_GenericReviveSlot5		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	21	= Command_GenericReviveSlot6		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	22	= Command_GenericReviveSlot7		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	23	= Command_GenericReviveSlot8		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
        24      = Command_RadialBack






End







CommandSet CommandSetKeepElves

InitialVisible = 9

  1 = Command_ConstructElvenLorienWarriorHorde
  2 = Command_ConstructElvenLorienArcherHorde
  3 = Command_ConstructElvenMithlondSentryHorde
  4 = Command_ConstructElvenMirkwoodArcherHorde
 5  = Command_ConstructElvenRivendellLancers
  6     = Command_PurchaseTechnologyElvenBasicTraining
  7     = Command_SelectRevivablesElvenFortress
  8     = Command_PurchaseUpgradeWildCaveLevel2
  9 = Command_PurchaseUpgradeWildCaveLevel3


	10	= Command_PurchaseTechnologyElvenHeavyArmor
	11	= Command_PurchaseTechnologyElvenForgedBlades
        12      = Command_PurchaseTechnologyElvenSilverthornArrows
        13      = Command_RadialBack

	14	= Command_RingHeroReviveSlot	
	15	= Command_CreateAHeroReviveSlot		// Note we also need an extra slot for the Create A Hero
	16   = Command_GenericReviveSlot1		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset! 
	17	= Command_GenericReviveSlot2		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	18	= Command_GenericReviveSlot3		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	19	= Command_GenericReviveSlot4		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	20	= Command_GenericReviveSlot5		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	21	= Command_GenericReviveSlot6		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	22	= Command_GenericReviveSlot7		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	23	= Command_GenericReviveSlot8		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
        24      = Command_RadialBack



End









CommandSet CommandSetKeepIsengard
	InitialVisible = 9


  1	= Command_ConstructIsengardFighterHorde
  2	= Command_ConstructIsengardUrukCrossbowHorde
  3	= Command_ConstructIsengardPikemanHorde
  4    = Command_ConstructIsengardBerserker
  5   = Command_ConstructIsengardWargRiderHorde
  6  = Command_PurchaseTechnologyIsengardBasicTraining
  7  = Command_SelectRevivablesIsengardFortress
  8 = Command_PurchaseUpgradeWildCaveLevel2
  9 = Command_PurchaseUpgradeWildCaveLevel3

	10	= Command_PurchaseTechnologyIsengardHeavyArmor
	11	= Command_PurchaseTechnologyIsengardForgedBlades
        12      = Command_PurchaseTechnologyIsengardFireArrows
        13      = Command_RadialBack

	14	= Command_RingHeroReviveSlot	
	15	= Command_CreateAHeroReviveSlot		// Note we also need an extra slot for the Create A Hero
	16   = Command_GenericReviveSlot1		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset! 
	17	= Command_GenericReviveSlot2		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	18	= Command_GenericReviveSlot3		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	19	= Command_GenericReviveSlot4		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	20	= Command_GenericReviveSlot5		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	21	= Command_GenericReviveSlot6		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	22	= Command_GenericReviveSlot7		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	23	= Command_GenericReviveSlot8		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
        24      = Command_RadialBack




End








CommandSet CommandSetKeepMordor
	InitialVisible = 10
  1	= Command_ConstructEasterlingHorde
  2	= Command_ConstructMordorHaradrimArcherHorde
  3       = Command_ConstructMordorCorsairsOfUmbarHorde
  4       = Command_ConstructMordorDrummerTroll
  5       = Command_ConstructMordorAttackTroll
  6       = Command_ConstructIsengardWargRiderHorde
  7       = Command_PurchaseTechnologyMordorBasicTraining
  8       = Command_SelectRevivablesMordorFortress
  9 = Command_PurchaseUpgradeWildCaveLevel2
  10 = Command_PurchaseUpgradeWildCaveLevel3



	11	= Command_PurchaseTechnologyMordorHeavyArmor
	12	= Command_PurchaseTechnologyMordorForgedBlades
        13      = Command_PurchaseTechnologyMordorFireArrows
        14      = Command_RadialBack

	15	= Command_RingHeroReviveSlot	
	16	= Command_CreateAHeroReviveSlot		// Note we also need an extra slot for the Create A Hero
	17   = Command_GenericReviveSlot1		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset! 
	18	= Command_GenericReviveSlot2		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	19	= Command_GenericReviveSlot3		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	20	= Command_GenericReviveSlot4		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	21	= Command_GenericReviveSlot5		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	22	= Command_GenericReviveSlot6		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	23	= Command_GenericReviveSlot7		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	24	= Command_GenericReviveSlot8		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
        25      = Command_RadialBack


End










CommandSet CommandSetKeepWild
	InitialVisible = 10
	1	= Command_ConstructInnIsengardWildmanHorde ; 
        2       = Command_ConstructGoblinFighterHorde
        3       = Command_ConstructGoblinArcherHorde
        4       = Command_ConstructGoblinTroll
        5       = Command_ConstructWildMarauderHorde
        6       = Command_ConstructWildSpiderRiderHorde
  7       = Command_PurchaseTechnologyWildBasicTraining
  8       = Command_SelectRevivablesWildFortress
  9 = Command_PurchaseUpgradeWildCaveLevel2
  10 = Command_PurchaseUpgradeWildCaveLevel3



	11	= Command_PurchaseTechnologyWildHeavyArmor
	12	= Command_PurchaseTechnologyWildForgedBlades
        13      = Command_PurchaseTechnologyWildFireArrows
        14      = Command_RadialBack

	15	= Command_RingHeroReviveSlot	
	16	= Command_CreateAHeroReviveSlot		// Note we also need an extra slot for the Create A Hero
	17   = Command_GenericReviveSlot1		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset! 
	18	= Command_GenericReviveSlot2		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	19	= Command_GenericReviveSlot3		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	20	= Command_GenericReviveSlot4		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	21	= Command_GenericReviveSlot5		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	22	= Command_GenericReviveSlot6		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	23	= Command_GenericReviveSlot7		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
	24	= Command_GenericReviveSlot8		;Revives any hero. Use Slot1-Slot8 and keep them UNIQUE within the same commandset!
        25      = Command_RadialBack


End














;=======================================THE COMMAND CENTER OF THE FORTRESS (THE KEEP)=================================



Object DwarvenArcheryRange

DisplayName = OBJECT:CivilianBattleTower ; keep
ThreatLevel = 15.0

ReplaceModule ModuleTag_Draw    ; needed to change this in order to make it shoot like a fortress

  Draw = W3DScriptedModelDraw ModuleTag_Draw_New


	ExtraPublicBone = ARROW_01
	ExtraPublicBone = ARROW_02
	ExtraPublicBone = ARROW_05
	ExtraPublicBone = ARROW_06
	ExtraPublicBone = ARROW_07
	ExtraPublicBone = ARROW_08
	ExtraPublicBone = ARROW_09
	ExtraPublicBone = ARROW_10
	ExtraPublicBone = ARROW_11
	ExtraPublicBone = ARROW_12
	ExtraPublicBone = ARROW_15
	ExtraPublicBone = ARROW_16
	ExtraPublicBone = ARROW_17
	ExtraPublicBone = ARROW_18
	ExtraPublicBone = ARROW_19
	ExtraPublicBone = ARROW_20
	ExtraPublicBone = ARROW_21
	ExtraPublicBone = ARROW_22
	ExtraPublicBone = ARROW_23

    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes

    DefaultModelConditionState
      Model = DB_houses_01
    WeaponLaunchBone    = PRIMARY ARROW_		
		ParticleSysBone     = FXbone ElvenForgeSmoke FollowBone:Yes
	  End
	  
	  ; ---------- destruction states
    
     ModelConditionState  = DAMAGED
      Model         = DBhouse1_D1
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End
	AnimationState = DAMAGED
		EnteringStateFX	= FX_BuildingDamaged
	End

    ModelConditionState  = REALLYDAMAGED
      Model         = DBhouse1_D2
      ParticleSysBone DUSTBONE01 FireBuildingSmall
      ParticleSysBone DUSTBONE02 FireBuildingSmall
      ParticleSysBone DUSTBONE03 FireBuildingSmall
      ParticleSysBone FireMedium01 FireBuildingMedium
      ParticleSysBone FireMedium02 FireBuildingMedium
      ParticleSysBone FireLarge01 FireBuildingLarge
    End
    
    AnimationState = REALLYDAMAGED
  		Animation				=	RubbleAnimation
			AnimationName		=	 DBhouse1_D2.DBhouse1_D2
			AnimationMode		=	ONCE
		End
		EnteringStateFX	= FX_BuildingReallyDamaged
	End
    
    ModelConditionState  = RUBBLE
		Model         = DBhouse1_D3
	End
		
	AnimationState = RUBBLE
  		Animation				=	RubbleAnimation
			AnimationName		=	 DBhouse1_D3.DBhouse1_D3
			AnimationMode		=	ONCE
		End
		EnteringStateFX	= FX_StructureMediumCollapse
	End 	 
  End
End


;----

  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE FS_FACTORY AUTO_RALLYPOINT MP_COUNT_FOR_VICTORY NEED_BASE_FOUNDATION ATTACK_NEEDS_LINE_OF_SIGHT CAN_ATTACK MADE_OF_STONE


	ArmorSet                              ; so its strong vs units but weak vs trolls, battering rams etc
		Conditions        = None
		Armor             = FortressArmor
		DamageFX          = GateDamageFX
	End

    WeaponSet
        Conditions     = NONE
        Weapon                = PRIMARY FortressArrowTowerBow                 ; fortress unupgraded arrow
	AutoChooseSources	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End 

    WeaponSet
        Conditions     = PLAYER_UPGRADE
        Weapon                = PRIMARY HaradrimPalaceBow                  ; fortress upgraded arrow
	AutoChooseSources	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End 




AddModule
	Behavior = GrantUpgradeCreate ModuleTag_abcdefghijkl
         UpgradeToGrant = Upgrade_MordorHaradrimPalaceLevel3
     End
End


RemoveModule ModuleTag_Draw_HCBanner

RemoveModule ModuleTag_DrawFloor 

RemoveModule BuildingModuleTag



ReplaceModule ModuleTag_05           ; higher health
	Body						= ActiveBody ModuleTag_05_DumbassNew
		MaxHealth				= 10000.0
		MaxHealthDamaged		= 6300.0
		MaxHealthReallyDamaged  = 3000.0
	End
End

ReplaceModule QueueProductionModuleTag 
	Behavior = QueueProductionExitUpdate QueueProductionModuleTagNew        ; this sets the exit point for created units
		PlacementViewAngle	= -180
		UnitCreatePoint		= X:42.0 Y:-17.0 Z:0.0
		NaturalRallyPoint	= X:75.0 Y:-32.0 Z:0.0
		ExitDelay			= STANDARD_HORDE_EXIT_DELAY
	End
End


	VoiceSelect						= MordorFortressSelect


AddModule
    Behavior            = GettingBuiltBehavior ModuleTag_GettingBuiltBehavior      ; so it automatically repairs if not under attack
        WorkerName    = ElvenWorkerNoSelect
        SpawnTimer    = 60000
    End
End




CommandSet = KeepCommandSet





AddModule
	Behavior = CommandSetUpgrade ModuleTag_CommandSetDwarven
		TriggeredBy	= Upgrade_DwarfFaction
		CommandSet	= CommandSetKeepDwarves
	End
End


AddModule
	Behavior = CommandSetUpgrade ModuleTag_CommandSetMen
		TriggeredBy	= Upgrade_MenFaction
		CommandSet	= CommandSetKeepMen
	End
End


AddModule
	Behavior = CommandSetUpgrade ModuleTag_CommandSetElven
		TriggeredBy	= Upgrade_ElfFaction
		CommandSet	= CommandSetKeepElves
	End
End



AddModule
	Behavior = CommandSetUpgrade ModuleTag_CommandSetIsengard
		TriggeredBy	= Upgrade_IsengardFaction
		CommandSet	= CommandSetKeepIsengard
	End
End



AddModule
	Behavior = CommandSetUpgrade ModuleTag_CommandSetMordor
		TriggeredBy	= Upgrade_MordorFaction
		CommandSet	= CommandSetKeepMordor
	End
End



AddModule
	Behavior = CommandSetUpgrade ModuleTag_CommandSetWild
		TriggeredBy	= Upgrade_WildFaction
		CommandSet	= CommandSetKeepWild
	End
End





;------------------------------------------


ReplaceModule ModuleTag_DwarvenArcheryRangeLevel2
	Behavior = LevelUpUpgrade ModuleTag_DwarvenArcheryRangeLevel2New
		TriggeredBy		= Upgrade_KeepLevel2
		LevelsToGain	= 1
		LevelCap			= 3
	End
End
	

ReplaceModule ModuleTag_DwarvenArcheryRangeLevel3
	Behavior = LevelUpUpgrade ModuleTag_DwarvenArcheryRangeLevel3New
		TriggeredBy		= Upgrade_KeepLevel3
		LevelsToGain	= 1
		LevelCap			= 3
	End
End



RemoveModule ModuleTag_DwarvenArcheryRangeLevel2CommandSet


;scavenger doesnt works, so we added this

AddModule
	Behavior = AttributeModifierAuraUpdate ModuleTag_PillageAura
		StartsActive	= Yes										; If no, requires upgrade to turn on.
		BonusName		= LurtzPassiveOutlawLeadership
		RefreshDelay	= 2000
		Range			= 999999
		AllowSelf		= Yes
		ObjectFilter	= ALL
	End
End

	
AddModule
	Behavior = CastleUpgrade ModuleTag_PassOutFlamingMunitionsUpgrade
		TriggeredBy	= Upgrade_GoodFortressFlamingMunitionsTrigger
		Upgrade		= Upgrade_GoodFortressFlamingMunitions
	End
End

AddModule
	Behavior = StatusBitsUpgrade ModuleTag_FakeOut ;// I need to react to the upgrade, so I can have it for when new construction asks me for all the upgrades
		TriggeredBy	= Upgrade_GoodFortressFlamingMunitions
	End
End

AddModule
	Behavior = WeaponSetUpgrade ModuleTag_triggerweaponsetupgrade
		TriggeredBy	= Upgrade_GoodFortressFlamingMunitionsTrigger
	End
End

End

















