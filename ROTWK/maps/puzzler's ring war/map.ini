; ; ; ; ; ; ; ; ; ; ; ; ; ;
; ; ; ;  Shortcuts  ; ; ; ;
; ; ; ; ; ; ; ; ; ; ; ; ; ;

; 				  Ctrl + G

; Unit costs 			= Line 2700

; Forbidden Pool command sets 	= Line 4400


CommandSet Garrison
  1 = Command_ExitGarrison
  2 = Command_ExitGarrison
  3 = Command_ExitGarrison
  4 = Command_ExitGarrison
  5 = Command_ExitGarrison
  6 = Command_ExitGarrison
  7 = Command_ExitGarrison
End

Object GHGarrisonableTower
CommandSet = Garrison
ReplaceModule ModuleTag_hordeGarrison
	Behavior = HordeGarrisonContain ModuleTag_hordeGarrison_spacious
 		ObjectStatusOfContained	= UNSELECTABLE CAN_ATTACK ENCLOSED
 		ContainMax              = 7
 		DamagePercentToUnits    = 0%
 		PassengerFilter		= ANY +INFANTRY +BANNER +CAVALRY +MONSTER +SUMMONED +COMBO_HORDE +MACHINE +HERO +WildSpiderling +BarrowWight +RohanRohirrimArcher +FloodHorse +RohanOathbreaker1 +RohanOathbreakersCavalry +MordorSauron +ElvenGaladriel
 		AllowEnemiesInside      = No
 		AllowNeutralInside      = Yes
 		NumberOfExitPaths       = 1
 		PassengerBonePrefix     = PassengerBone:ARROW_ KindOf:INFANTRY
 		EntryPosition		= X:0.0 Y:0.0 Z:0.0
		EntryOffset		= X:0.0 Y:-45.0 Z:0.0
		ExitOffset		= X:0.0 Y:-45.0 Z:0.0
		EnterSound		= RuinedTowerEnterSound
		KillPassengersOnDeath	= No
		ShowPips		= No
	End
End
End

Object Outpost
	KindOf              = PRELOAD STRUCTURE IMMOBILE NOT_AUTOACQUIRABLE LINKED_TO_FLAG NEVER_CULL_FOR_MP NOT_SELLABLE SELECTABLE ECONOMY_STRUCTURE
ReplaceModule AutoDepositModuleTag
	Behavior = AutoDepositUpdate AutoDepositModuleTag_New
		DepositTiming       = OUTPOST_MONEY_TIME   ; in milliseconds
		DepositAmount       = 25   ; cash amount to deposit every DepositTiming
		InitialCaptureBonus = 25  ; initial one time bonus for capturing this structure
	End
End
End

Object SignalFire
AddModule
	Behavior = AutoDepositUpdate AutoDepositModuleTag_New
		DepositTiming       = OUTPOST_MONEY_TIME   ; in milliseconds
		DepositAmount       = 0   ; cash amount to deposit every DepositTiming
		InitialCaptureBonus = 150  ; initial one time bonus for capturing this structure
	End
End
End

Rank 1
	SkillPointsNeededDefault	= 0
	SkillPointsNeededCampaign	= 0 
	SciencePurchasePointsGranted	= 10
End

CommandButton Command_SpellBookDevastation
	Command			= SPELL_BOOK
	SpecialPower		= SpellBookDevastation
	ButtonImage		= SBEvil_Devastation
	Options			= NEED_TARGET_POS
	TextLabel		= CONTROLBAR:Devastation
	ButtonBorderType	= ACTION
	DescriptLabel		= NewDevastation
	RadiusCursorType    	= DevastationRadiusCursor
End

CommandButton Command_PurchaseSpellDevastation
	Command			= PURCHASE_SCIENCE
	ButtonBorderType	= UPGRADE
	ButtonImage		= SBEvil_Devastation 
	Science			= SCIENCE_Devastation
	TextLabel		= CONTROLBAR:Devastation
	DescriptLabel		= NewDevastation
End

Weapon DevastationEntWeapon
	DamageNugget
		SpecialObjectFilter	= ANY +MONSTER +MACHINE +SHIP ENEMIES
		Damage			= 7000
		Radius			= SPECIALPOWER_DEVASTATION_RADIUS
		DamageType		= CHOP
		DamageFXType		= BIG_ROCK
		DeathType		= NORMAL
		DamageArc 		= 360
	End
End

ObjectCreationList OCL_ElvenWoodSeed
	CreateObject
		ObjectNames		= ElvenWoodTreeSeed
		Count			= 10
		SpreadFormation		= Yes
		MinDistanceAFormation	= 50.0
		MinDistanceBFormation	= 185.0
		MaxDistanceFormation	= 185.0
	End
End

Science SCIENCE_Scavenger
     PrerequisiteSciences = NONE
     SciencePurchasePointCostMP = 0
End

Science SCIENCE_Farsight
     PrerequisiteSciences = NONE
     SciencePurchasePointCostMP = 5
End

Science SCIENCE_WarChant
     PrerequisiteSciences = NONE
     SciencePurchasePointCostMP = 5
End

Science SCIENCE_Rebuild
     PrerequisiteSciences = NONE
     SciencePurchasePointCostMP = 5
End

;----

Science SCIENCE_Heal
     PrerequisiteSciences = SCIENCE_GOOD OR SCIENCE_EVIL OR SCIENCE_Farsight
     SciencePurchasePointCostMP = 10
End

Science SCIENCE_ChillWind
     PrerequisiteSciences = SCIENCE_GOOD OR SCIENCE_EVIL OR SCIENCE_Farsight OR SCIENCE_WarChant
     SciencePurchasePointCostMP = 10
End

Science SCIENCE_Barricade
     PrerequisiteSciences = SCIENCE_GOOD OR SCIENCE_EVIL OR SCIENCE_WarChant OR SCIENCE_Rebuild
     SciencePurchasePointCostMP = 10
End

Science SCIENCE_SpawnLoneTower
     PrerequisiteSciences = SCIENCE_GOOD OR SCIENCE_EVIL OR SCIENCE_Rebuild
     SciencePurchasePointCostMP = 10
End

;----

Science SCIENCE_ElvenWood
     PrerequisiteSciences = SCIENCE_GOOD OR SCIENCE_EVIL OR SCIENCE_Heal OR SCIENCE_ChillWind
     SciencePurchasePointCostMP = 15
End

Science SCIENCE_Devastation
     PrerequisiteSciences = SCIENCE_GOOD OR SCIENCE_EVIL OR SCIENCE_ChillWind OR SCIENCE_Barricade
     SciencePurchasePointCostMP = 15
End

Science SCIENCE_Snowbind
     PrerequisiteSciences = SCIENCE_GOOD OR SCIENCE_EVIL OR SCIENCE_Barricade OR SCIENCE_SpawnLoneTower
     SciencePurchasePointCostMP = 15
End

;----

Science SCIENCE_WatcherAlly
     PrerequisiteSciences = SCIENCE_GOOD OR SCIENCE_EVIL OR SCIENCE_ElvenWood OR SCIENCE_Devastation
     SciencePurchasePointCostMP = 25
End

Science SCIENCE_AwakenWyrm
	PrerequisiteSciences = SCIENCE_GOOD OR SCIENCE_EVIL OR SCIENCE_Devastation OR SCIENCE_Snowbind
	SciencePurchasePointCostMP = 25
End

CommandSet SpellBookAll
	1 = Command_SpellBookScavenger
	2 = Command_SpellBookFarsight
	3 = Command_SpellBookWarChant
	4 = Command_SpellBookHeal
	5 = Command_SpellBookRebuild
	6 = Command_SpellBookSnowbind
	7 = Command_SpellBookChillWind
	8 = Command_SpellBookElvenWood
	9 = Command_SpellBookBarricade
	10 = Command_SpellBookLoneTower
	11 = Command_SpellBookDevastation
	12 = Command_SpellBookAwakenWyrm
	13 = Command_SpellBookWatcherAlly
End


CommandSet SpellStoreAll
	1 = Command_PurchaseSpellFarsight
	2 = Command_PurchaseSpellWarChant
	3 = Command_PurchaseSpellRebuild

	4 = Command_PurchaseSpellHeal
	5 = Command_PurchaseSpellChillWind
	6 = Command_PurchaseSpellBarricade
	7 = Command_PurchaseSpellLoneTowerMen

	8 = Command_PurchaseSpellElvenWood
	9 = Command_PurchaseSpellDevastation
	10 = Command_PurchaseSpellSnowbind

	11 = Command_PurchaseSpellWatcherAlly
	12 = Command_PurchaseSpellAwakenWyrm
End

SpecialPower SpellBookFarsight
	Enum				= SPECIAL_SPELL_BOOK_PALANTIR_VISION
	Flags				= WATER_OK RESPECT_RECHARGE_TIME_DISCOUNT
	ReloadTime			= SPELL_RECHARGE_TIME_TIER_6
	RadiusCursorRadius		= 100.0
	RequiredSciences		= SCIENCE_Farsight
	InitiateAtLocationSound		= SpellFarsight
End

SpecialPower SpellBookWarChant
	Enum				= SPECIAL_SPELL_BOOK_WAR_CHANT
	Flags				= WATER_OK RESPECT_RECHARGE_TIME_DISCOUNT
	ReloadTime      		= SPELL_RECHARGE_TIME_TIER_6
	RadiusCursorRadius		= 100.0	
	RequiredSciences		= SCIENCE_WarChant
	InitiateAtLocationSound 	= SpellWarChant
End

SpecialPower SpellBookRebuild
	Enum				= SPECIAL_SPELL_BOOK_REBUILD
	Flags				= WATER_OK RESPECT_RECHARGE_TIME_DISCOUNT
	ReloadTime			= SPELL_RECHARGE_TIME_TIER_6
	RadiusCursorRadius		= SPELL_REBUILD_RADIUS_CURSOR
	RequiredSciences		= SCIENCE_Rebuild
	InitiateAtLocationSound 	= SpellRebuild
End

SpecialPower SpellBookHeal
	InitiateAtLocationSound 	= SpellHeal
	Enum                		= SPECIAL_SPELL_BOOK_HEAL
	Flags				= WATER_OK RESPECT_RECHARGE_TIME_DISCOUNT
	ReloadTime         		= SPELL_RECHARGE_TIME_TIER_2
	RequiredSciences     		= SCIENCE_Heal
	RadiusCursorRadius  		= SPELL_HEAL_RADIUS_CURSOR	
End

SpecialPower SpellBookChillWind
	Enum				= SPECIAL_SPELL_BOOK_CHILL_WIND
	RadiusCursorRadius		= CHILL_WIND_EFFECT_RADIUS
	RequiredSciences		= SCIENCE_ChillWind
	ReloadTime			= SPELL_RECHARGE_TIME_TIER_2
	InitiateAtLocationSound 	= ChillWind
	Flags				= RESPECT_RECHARGE_TIME_DISCOUNT
End

SpecialPower SpellBookBarricade
	Enum				= SPECIAL_SPELL_BOOK_BARRICADE
	RequiredSciences		= SCIENCE_Barricade
	ReloadTime			= SPELL_RECHARGE_TIME_TIER_2
	InitiateAtLocationSound		= SpellSpawnMordorBarricade
	RadiusCursorRadius		= SPAWN_BARRICADE_DECAL_RADIUS
	Flags				= NO_FORBIDDEN_OBJECTS RESPECT_RECHARGE_TIME_DISCOUNT
	ForbiddenObjectFilter		= NO_SUMMON_STRUCTURE_NEAR_OBJECT_FILTER
	ForbiddenObjectRange		= SPAWN_BARRICADE_DECAL_RADIUS
End

SpecialPower SpellBookElvenWood
	Enum				= SPECIAL_SPELL_BOOK_ELVEN_WOOD
	RadiusCursorRadius		= SPELLBOOK_TAINT_RADIUS
	RequiredSciences		= SCIENCE_ElvenWood
	ReloadTime      		= SPELL_RECHARGE_TIME_TIER_3
	InitiateAtLocationSound 	= SpellElvenWood
	ViewObjectDuration 		= 5000
	ViewObjectRange 		= SPELLBOOK_TAINT_RADIUS
	Flags				= NO_FORBIDDEN_OBJECTS RESPECT_RECHARGE_TIME_DISCOUNT
	ForbiddenObjectFilter		= NONE +WatcherHead +WatcherHittingArm +WatcherCaldera
	ForbiddenObjectRange		= SPELLBOOK_TAINT_RADIUS
End

SpecialPower SpellBookDevastation
	Enum				= SPECIAL_SPELL_BOOK_DEVASTATION
	ReloadTime			= SPELL_RECHARGE_TIME_TIER_3
	RadiusCursorRadius		= SPECIALPOWER_DEVASTATION_RADIUS
	RequiredSciences		= SCIENCE_Devastation
	InitiateAtLocationSound 	= SpellDevastation
	ViewObjectDuration 		= 7500
	ViewObjectRange 		= 150
	Flags				= RESPECT_RECHARGE_TIME_DISCOUNT
End

SpecialPower SpellBookSnowbind
	Enum				= SPECIAL_SPELL_BOOK_SNOWBIND
	RadiusCursorRadius		= SNOWBIND_EFFECT_RADIUS
	RequiredSciences		= SCIENCE_Snowbind
	ReloadTime			= SPELL_RECHARGE_TIME_TIER_3
	InitiateAtLocationSound 	= SnowbindMS
	ViewObjectDuration		= 5000
	ViewObjectRange			= SNOWBIND_EFFECT_RADIUS
	Flags				= NEEDS_OBJECT_FILTER RESPECT_RECHARGE_TIME_DISCOUNT
	ObjectFilter			= SNOWBIND_TYPE_SPELL_OBJECT_FILTER
End

SpecialPower SpellBookAwakenWyrm
	Enum				= SPECIAL_SPELL_BOOK_AWAKEN_WYRM
	Flags				= NO_FORBIDDEN_OBJECTS RESPECT_RECHARGE_TIME_DISCOUNT
	ReloadTime			= SPELL_RECHARGE_TIME_TIER_4
	RadiusCursorRadius		= 30.0
	RequiredSciences		= SCIENCE_AwakenWyrm
	ViewObjectDuration		= 5000
	ViewObjectRange			= 100
	InitiateAtLocationSound  	= WyrmSummonMS
	ForbiddenObjectFilter		= NO_SUMMON_NEAR_OBJECT_FILTER
	ForbiddenObjectRange		= 30.0
End

SpecialPower SpellBookWatcherAlly
	Enum				= SPECIAL_SPELL_BOOK_WATCHER_ALLY
	Flags				= WATER_OK NO_FORBIDDEN_OBJECTS RESPECT_RECHARGE_TIME_DISCOUNT
	ReloadTime			= SPELL_RECHARGE_TIME_TIER_4
	RadiusCursorRadius		= 90.0
	RequiredSciences		= SCIENCE_WatcherAlly
	ViewObjectDuration 		= 5000
	ViewObjectRange 		= 100
	ForbiddenObjectFilter		= NO_SUMMON_NEAR_OBJECT_FILTER
	ForbiddenObjectRange		= 90.0
End

Object SpellBookAll

     CommandSet 	= SpellBookAll
     RadarPriority 	= NOT_ON_RADAR
     KindOf 		= SPELL_BOOK IMMOBILE IGNORES_SELECT_ALL INERT

     AddModule ModuleTag_NewScavenger_Override
	Behavior = PlayerUpgradeSpecialPower	ModuleTag_NewScavenger
		SpecialPowerTemplate		= SpellBookScavenger
		UpgradeName 			= Upgrade_GrantScavenger
		UpdateModuleStartsAttack	= No
		AffectAllies			= No
		AvailableAtStart		= No
		RequirementsFilterMPSkirmish 	= SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic 	= SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
       End

	AddModule ModuleTag_Farsight_Override
	Behavior				 = OCLSpecialPower ModuleTag_Farsight
		SpecialPowerTemplate = SpellBookFarsight
		OCL                  = OCL_SpecialPowerFarSeeing
		CreateLocation       = CREATE_AT_LOCATION
		AvailableAtStart	 = No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
	End

	AddModule ModuleTag_WarChant_Override
 	Behavior = SpecialPowerModule		SpellBookWarChant_ModuleTag
		SpecialPowerTemplate		= SpellBookWarChant
		AttributeModifier			= SpellBookWarChant
		AttributeModifierRange		= 100
		AttributeModifierAffects	= GENERIC_BUFF_RECIPIENT_OBJECT_FILTER
		TriggerFX					= FX_SpellWarChant
		UpdateModuleStartsAttack	= No
		AvailableAtStart			= No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End   
	End	

	AddModule ModuleTag_Rebuild_Override
	Behavior = PlayerHealSpecialPower ModuleTag_Rebuild
		SpecialPowerTemplate = SpellBookRebuild
		HealAffects			 = STRUCTURE
		HealAsPercent		 	 = No
		HealAmount			 = 4000
		HealRadius			 = SPELL_REBUILD_RADIUS_STRUCTURE_SCAN
		HealFX				 = FX_SpellRebuild
		AvailableAtStart	 = No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
	End

	AddModule ModuleTag_Heal_Override
  	Behavior = PlayerHealSpecialPower ModuleTag_Heal
		SpecialPowerTemplate  = SpellBookHeal
		HealAffects			  = INFANTRY CAVALRY MONSTER MACHINE SHIP DOZER
		HealAmount			  = 1.0	; 0.5 = 50% of maximum health
		HealRadius			  = SPELL_HEAL_RADIUS_UNIT_SCAN
		HealFX				  = FX_SpellHealUnitHealBuff		;FX_DefaultUnitHealBuff
		; To replenish hordes a bit
		HealOCL               = OCL_HealSpellHordeReplenishPing
		AvailableAtStart	  = No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
	End	
	
	AddModule ModuleTag_ChillWind_Override
 	Behavior   = OCLSpecialPower ModuleTag_ChillWind
		SpecialPowerTemplate	= SpellBookChillWind
		OCL				= OCL_SpellBookChillWind
		CreateLocation			= CREATE_AT_LOCATION
		AvailableAtStart		= No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
	End

	AddModule ModuleTag_Barricade_Override
   	Behavior = OCLSpecialPower	ModuleTag_Barricade
		SpecialPowerTemplate			= SpellBookBarricade
		OCL								= OCL_SpellBookBarricade
		CreateLocation					= CREATE_AT_LOCATION
		AvailableAtStart				= No
		RequirementsFilterMPSkirmish	= SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic		= SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End   
	End	

	AddModule ModuleTag_LoneTower_Override
	Behavior = OCLSpecialPower ModuleTag_SpawnLoneTower
		SpecialPowerTemplate = SpellBookSpawnLoneTower
		OCL                  = OCL_GondorSpellBookSpawnLoneTower
		CreateLocation       = CREATE_AT_LOCATION
		AvailableAtStart	 = No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
	End	

	AddModule ModuleTag_ElvenWood_Override
	Behavior = ElvenWoodSpecialPower ModuleTag_ElvenWood
		SpecialPowerTemplate	= SpellBookElvenWood
		ElvenGroveObject		= ElvenGrove
		ElvenWoodRadius			= SPELLBOOK_TAINT_RADIUS
		ElvenWoodFX				= FX_ElvenWoodSpellFX
		ElvenWoodOCL			= OCL_ElvenWoodSeed
		AvailableAtStart		= No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
        End

	AddModule ModuleTag_DevastateSpecialPower_Override
	Behavior = DevastateSpecialPower	ModuleTag_DevastateSpecialPower
		SpecialPowerTemplate		= SpellBookDevastation
		Radius				= SPECIALPOWER_DEVASTATION_RADIUS
		TreeValueMultiplier		= 50%		;The value squeezed out of each tree is multiplied by this compared to what a worker would have gotten for it
		TreeValueTotalCap		= 1500		;And the most you can get for the enitre spell is this, so you can't find the one map that has a 20000 patch of trees in the corner
		TriggerFX			= FX_DevastationFlare
		FX				= FX_Devastation
		AvailableAtStart		= No
		FireWeapon			= DevastationEntWeapon
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
	End	

	AddModule ModuleTag_Snowbind_Override
 	Behavior   = SpecialPowerModule ModuleTag_Snowbind
		SpecialPowerTemplate		= SpellBookSnowbind
		AttributeModifier		= SpellBookSnowbind
		AttributeModifierRange		= SNOWBIND_EFFECT_RADIUS
		AttributeModifierAffects	= SNOWBIND_TYPE_SPELL_OBJECT_FILTER
		TriggerFX			= FX_SnowbindSpellFX
		UpdateModuleStartsAttack	= No
		AvailableAtStart		= No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
		;TargetEnemy 		= Yes	//This is VERY important because it defaults to false and overrides the AttributeModifier filter above!!!
		TargetAllSides = Yes
	End 
	End	

	AddModule ModuleTag_Watcher_Override
	Behavior = OCLSpecialPower ModuleTag_SummonWatcher
		SpecialPowerTemplate = SpellBookWatcherAlly
		OCL                  = OCL_WatcherSummoning
		CreateLocation       = CREATE_AT_LOCATION
		AvailableAtStart	 = No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
	End


	AddModule ModuleTag_AwakenWyrm_Override
	Behavior = OCLSpecialPower ModuleTag_AwakenWyrm
		SpecialPowerTemplate = SpellBookAwakenWyrm
		OCL                  = OCL_Wyrm
		TriggerFX			 = FX_WrymSummonStart
		CreateLocation       = CREATE_AT_LOCATION
		AvailableAtStart	 = No
		RequirementsFilterMPSkirmish = SPELL_BOOK_REQUIREMENTS_FILTER
		RequirementsFilterStrategic = SPELL_BOOK_REQUIREMENTS_FILTER_STRATEGIC
	End
	End
	
End

CommandButton Command_SelectRevivablesMenFortress
	Command                 = PUSH_VISIBLE_COMMAND_RANGE
	TextLabel               = CONTROLBAR:SelectRevivablesMenFortress
	ButtonImage             = UCCommon_GoodHeroes
	ButtonBorderType        = SYSTEM 
	DescriptLabel           = CONTROLBAR:ToolTipCommandSelectRevivablesMenFortress
	Radial                  = Yes
	CommandRangeStart		= 14
	CommandRangeCount		= 12
End

CommandSet MenFortress
	InitialVisible = 7
	//Main Menu
	1	= Command_ConstructMenPorter
	2   	= Command_SelectRevivablesMenFortress	
	3	= Command_SelectUpgradesMenFortress
	4	= Command_FireWeaponMenFortressBoilingOil
	5  	= Command_SpecialAbilityIvoryTowerVision
	6	= Command_Sell
	7   	= Command_EnableCEContentsMen

	//Upgrades Menu
	8	= Command_PurchaseUpgradeMenFortressBanners
	9	= Command_PurchaseUpgradeMenFortressHouseOfHealing
	10	= Command_PurchaseUpgradeMenFortressBoilingOil
	11	= Command_PurchaseUpgradeMenFortressFlamingMunitions
	12	= Command_PurchaseUpgradeMenFortressNumenorStonework
	13	= Command_PurchaseUpgradeMenFortressIvoryTower
	14	= Command_RadialBack

	//Hero Menu
	15	= Command_CreateAHeroReviveSlot
	16	= Command_GenericReviveSlot1 
	17	= Command_GenericReviveSlot2
	18	= Command_GenericReviveSlot3
	19	= Command_GenericReviveSlot4
	20	= Command_GenericReviveSlot5
	21	= Command_GenericReviveSlot6
	22	= Command_GenericReviveSlot7
	23	= Command_GenericReviveSlot8
	24	= Command_GenericReviveSlot9
	25	= Command_RadialBack		
End

Object MenFortressCitadel
CommandSet = MenFortress
AddModule
	Behavior = AttributeModifierAuraUpdate ModuleTag_PillageAura
		StartsActive	= Yes										; If no, requires upgrade to turn on.
		BonusName	= LurtzPassiveOutlawLeadership
		RefreshDelay	= 2000
		Range		= 999999
		AllowSelf	= Yes
		ObjectFilter	= ALL
	End
End
ReplaceModule ModuleTag_SlaughterMe
	Behavior = CitadelSlaughterHordeContain ModuleTag_SlaughterMeQuietly
		PassengerFilter				= GENERIC_FACTION_SLAUGHTERABLE
		ObjectStatusOfContained			= UNSELECTABLE ENCLOSED 
		CashBackPercent				= 0%		
		ContainMax				= 99	;// give it a huge capacity, just in case player sends his whole army in at once
		AllowEnemiesInside			= No
		AllowAlliesInside			= No
 		AllowNeutralInside			= No
 		AllowOwnPlayerInsideOverride		= Yes
		EnterSound				= GUI_RingReturned
		EntryOffset				= X:129.0 Y:0.0 Z:0.0
		EntryPosition				= X:100.0 Y:0.0 Z:0.0		// entry position needs to be offset from the root transform, otherwise fortress obscures point.
		
		ExitOffset				= X:129.0 Y:0.0 Z:0.0
		StatusForRingEntry			= HOLDING_THE_RING
		UpgradeForRingEntry			= Upgrade_RingHero Upgrade_FortressRingHero Upgrade_GondorFaction ;;,;; CE graphics fix
		ObjectToDestroyForRingEntry		= NONE +TheDroppedRing
		FXForRingEntry				= FX_OneRingFlare
	End
End
End

CommandButton Command_SelectRevivablesElvenFortress
	Command                 = PUSH_VISIBLE_COMMAND_RANGE
	TextLabel               = CONTROLBAR:SelectRevivablesElvenFortress
	ButtonImage             = UCCommon_GoodHeroes
	ButtonBorderType        = SYSTEM 
	DescriptLabel           = CONTROLBAR:ToolTipCommandSelectRevivablesElvenFortress
	Radial                  = Yes
	CommandRangeStart	= 14
	CommandRangeCount	= 12
End

CommandSet ElvenFortress
	InitialVisible = 6
	//Main Menu
	1	= Command_ConstructElvenPorter
	2   	= Command_SelectRevivablesElvenFortress
	3	= Command_SelectUpgradesElvenFortress
	4	= Command_PurchaseNewEagle
	5   	= Command_EnableCEContentsElves
	6	= Command_Sell
	
	//Improvements
	7       = Command_PurchaseUpgradeElvenFortressEnchantedAnvil
	8	= Command_PurchaseUpgradeElvenFortressBlessedMist
	9	= Command_PurchaseUpgradeElvenFortressCrystalMoat
	10	= Command_PurchaseUpgradeElvenFortressMysticFountains
	11	= Command_PurchaseUpgradeElvenFortressFlamingMunitions
	12	= Command_PurchaseUpgradeElvenFortressEncasingVines
	13	= Command_PurchaseUpgradeElvenFortressEaglesNest
	14	= Command_RadialBack
	
	//Hero Menu
	15	= Command_CreateAHeroReviveSlot
	16	= Command_GenericReviveSlot1 
	17	= Command_GenericReviveSlot2
	18	= Command_GenericReviveSlot3
	19	= Command_GenericReviveSlot4
	20	= Command_GenericReviveSlot5
	21	= Command_GenericReviveSlot6
	22	= Command_GenericReviveSlot7
	23	= Command_GenericReviveSlot8
	24	= Command_GenericReviveSlot9
	25	= Command_RadialBack
End

Object ElvenCitadel
CommandSet = ElvenFortress
AddModule
	Behavior = AttributeModifierAuraUpdate ModuleTag_PillageAura
		StartsActive	= Yes										; If no, requires upgrade to turn on.
		BonusName	= LurtzPassiveOutlawLeadership
		RefreshDelay	= 2000
		Range		= 999999
		AllowSelf	= Yes
		ObjectFilter	= ALL
	End
End
ReplaceModule ModuleTag_SlaughterMe
	Behavior = CitadelSlaughterHordeContain ModuleTag_SlaughterMeQuietly
		PassengerFilter				= GENERIC_FACTION_SLAUGHTERABLE
		ObjectStatusOfContained			= UNSELECTABLE ENCLOSED 
		CashBackPercent				= 0%		
		ContainMax				= 99	;// give it a huge capacity, just in case player sends his whole army in at once
		AllowEnemiesInside			= No
		AllowAlliesInside			= No
 		AllowNeutralInside			= No
 		AllowOwnPlayerInsideOverride		= Yes
		EnterSound				= GUI_RingReturned
		EntryOffset				= X:129.0 Y:0.0 Z:0.0
		EntryPosition				= X:100.0 Y:0.0 Z:0.0		// entry position needs to be offset from the root transform, otherwise fortress obscures point.
		
		ExitOffset				= X:129.0 Y:0.0 Z:0.0
		StatusForRingEntry			= HOLDING_THE_RING
		UpgradeForRingEntry			= Upgrade_RingHero Upgrade_FortressRingHero Upgrade_GondorFaction ;;,;; CE graphics fix
		ObjectToDestroyForRingEntry		= NONE +TheDroppedRing
		FXForRingEntry				= FX_OneRingFlare
	End
End
End

CommandButton Command_SelectRevivablesDwarvenFortress
	Command                 = PUSH_VISIBLE_COMMAND_RANGE
	TextLabel               = CONTROLBAR:SelectRevivablesDwarvenFortress
	ButtonImage             = UCCommon_GoodHeroes
	ButtonBorderType        = SYSTEM 
	DescriptLabel           = CONTROLBAR:ToolTipCommandSelectRevivablesDwarvenFortress
	Radial                  = Yes
	CommandRangeStart		= 14
	CommandRangeCount		= 12
End

CommandSet DwarvenFortress
	InitialVisible = 7
	//Main Menu
	1	= Command_ConstructDwarvenPorter
	2   	= Command_SelectRevivablesDwarvenFortress
	3	= Command_SelectUpgradesDwarvenFortress
	4	= Command_FireWeaponDwarvenFortressOilCasks
	5   	= Command_FireWeaponMightyCatapult
	6	= Command_Sell
	7   	= Command_EnableCEContentsDwarves

	//Upgardes Menu
	8	= Command_PurchaseUpgradeDwarvenFortressBanners
	9	= Command_PurchaseUpgradeDwarvenFortressSiegeKegs
	10	= Command_PurchaseUpgradeDwarvenFortressOilCasks
	11	= Command_PurchaseUpgradeDwarvenFortressFlamingMunitions
	12	= Command_PurchaseUpgradeDwarvenFortressDwarvenStonework
	13	= Command_PurchaseUpgradeDwarvenFortressMightyCatapult
	14	= Command_RadialBack
	
	//Hero Menu
	15	= Command_CreateAHeroReviveSlot
	16	= Command_GenericReviveSlot1 
	17	= Command_GenericReviveSlot2
	18	= Command_GenericReviveSlot3
	19	= Command_GenericReviveSlot4
	20	= Command_GenericReviveSlot5
	21	= Command_GenericReviveSlot6
	22	= Command_GenericReviveSlot7
	23	= Command_GenericReviveSlot8
	24	= Command_GenericReviveSlot9
	25	= Command_RadialBack
End

Object DwarvenFortressCitadel
CommandSet = DwarvenFortress
AddModule
	Behavior = AttributeModifierAuraUpdate ModuleTag_PillageAura
		StartsActive	= Yes										; If no, requires upgrade to turn on.
		BonusName	= LurtzPassiveOutlawLeadership
		RefreshDelay	= 2000
		Range		= 999999
		AllowSelf	= Yes
		ObjectFilter	= ALL
	End
End
ReplaceModule ModuleTag_SlaughterMe
	Behavior = CitadelSlaughterHordeContain ModuleTag_SlaughterMeQuietly
		PassengerFilter				= GENERIC_FACTION_SLAUGHTERABLE
		ObjectStatusOfContained			= UNSELECTABLE ENCLOSED 
		CashBackPercent				= 0%		
		ContainMax				= 99	;// give it a huge capacity, just in case player sends his whole army in at once
		AllowEnemiesInside			= No
		AllowAlliesInside			= No
 		AllowNeutralInside			= No
 		AllowOwnPlayerInsideOverride		= Yes
		EnterSound				= GUI_RingReturned
		EntryOffset				= X:129.0 Y:0.0 Z:0.0
		EntryPosition				= X:100.0 Y:0.0 Z:0.0		// entry position needs to be offset from the root transform, otherwise fortress obscures point.
		
		ExitOffset				= X:129.0 Y:0.0 Z:0.0
		StatusForRingEntry			= HOLDING_THE_RING
		UpgradeForRingEntry			= Upgrade_RingHero Upgrade_FortressRingHero Upgrade_GondorFaction ;;,;; CE graphics fix
		ObjectToDestroyForRingEntry		= NONE +TheDroppedRing
		FXForRingEntry				= FX_OneRingFlare
	End
End
End

CommandButton Command_SelectRevivablesIsengardFortress
	Command                 = PUSH_VISIBLE_COMMAND_RANGE
	TextLabel               = CONTROLBAR:SelectRevivablesIsengardFortress
	ButtonImage             = UCCommon_EvilHeroes
	ButtonBorderType        = SYSTEM 
	DescriptLabel           = CONTROLBAR:ToolTipCommandSelectRevivablesIsengardFortress
	Radial                  = Yes
	CommandRangeStart		= 14
	CommandRangeCount		= 12
End

CommandSet IsengardFortress
	InitialVisible	= 6
	//Main menu can select heroes, upgrades sub menus, or build a porter.
	1	= Command_ConstructIsengardPorter
	2	= Command_SelectRevivablesIsengardFortress
	3	= Command_SelectUpgradesIsengardFortress
	4	= Command_IsengardWizardsTowerLightningStrike	
	5   	= Command_EnableCEContentsIsengard
	6	= Command_Sell
	
	//Improvements
	7	= Command_PurchaseUpgradeIsengardFortressMurderOfCrows
	8	= Command_PurchaseUpgradeIsengardFortressExcavations
	9	= Command_PurchaseUpgradeIsengardFortressBurningForges
	10	= Command_PurchaseUpgradeIsengardFortressOrcfireMunitions
	11	= Command_PurchaseUpgradeIsengardFortressIronPlating
	12	= Command_PurchaseUpgradeIsengardFortressWizardsTower    	
	13	= Command_SpecialAbilityMurderOfCrows
	14	= Command_RadialBack

	//Hero Menu
	15	= Command_CreateAHeroReviveSlot
	16	= Command_GenericReviveSlot1 
	17	= Command_GenericReviveSlot2
	18	= Command_GenericReviveSlot3
	19	= Command_GenericReviveSlot4
	20	= Command_GenericReviveSlot5
	21	= Command_GenericReviveSlot6
	22	= Command_GenericReviveSlot7
	23	= Command_GenericReviveSlot8
	24	= Command_GenericReviveSlot9
	25	= Command_RadialBack
End

Object IsengardFortressCitadel
CommandSet = IsengardFortress
AddModule
	Behavior = AttributeModifierAuraUpdate ModuleTag_PillageAura
		StartsActive	= Yes										; If no, requires upgrade to turn on.
		BonusName	= LurtzPassiveOutlawLeadership
		RefreshDelay	= 2000
		Range		= 999999
		AllowSelf	= Yes
		ObjectFilter	= ALL
	End
End
ReplaceModule ModuleTag_SlaughterMe
	Behavior = CitadelSlaughterHordeContain ModuleTag_SlaughterMeQuietly
		PassengerFilter				= GENERIC_FACTION_SLAUGHTERABLE
		ObjectStatusOfContained			= UNSELECTABLE ENCLOSED 
		CashBackPercent				= 0%		
		ContainMax				= 99	;// give it a huge capacity, just in case player sends his whole army in at once
		AllowEnemiesInside			= No
		AllowAlliesInside			= No
 		AllowNeutralInside			= No
 		AllowOwnPlayerInsideOverride		= Yes
		EnterSound				= GUI_RingReturned
		EntryOffset				= X:129.0 Y:0.0 Z:0.0
		EntryPosition				= X:100.0 Y:0.0 Z:0.0		// entry position needs to be offset from the root transform, otherwise fortress obscures point.
		
		ExitOffset				= X:129.0 Y:0.0 Z:0.0
		StatusForRingEntry			= HOLDING_THE_RING
		UpgradeForRingEntry			= Upgrade_RingHero Upgrade_FortressRingHero Upgrade_GondorFaction ;;,;; CE graphics fix
		ObjectToDestroyForRingEntry		= NONE +TheDroppedRing
		FXForRingEntry				= FX_OneRingFlare
	End
End
End

CommandButton Command_SelectRevivablesMordorFortress
	Command                 = PUSH_VISIBLE_COMMAND_RANGE
	TextLabel               = CONTROLBAR:SelectRevivablesMordorFortress
	ButtonImage             = UCCommon_EvilHeroes
	ButtonBorderType        = SYSTEM 
	DescriptLabel           = CONTROLBAR:ToolTipCommandSelectRevivablesMordorFortress
	Radial                  = Yes
	CommandRangeStart		= 14
	CommandRangeCount		= 12
End

CommandSet MordorFortress
	InitialVisible = 7
	//Main Menu
	1	= Command_ConstructMordorPorter
	2	= Command_SelectRevivablesMordorFortress
	3	= Command_SelectUpgradesMordorFortress
	4	= Command_FireWeaponMordorFortressMagmaCauldrons
	5	= Command_FireWeaponMordorFortressSpireFireball	
	6	= Command_Sell
	7   	= Command_EnableCEContentsMordor

	
	//Upgrades Menu
	8	= Command_PurchaseUpgradeMordorFortressDoomPyres
	9	= Command_PurchaseUpgradeMordorFortressLavaMoat
	10	= Command_PurchaseUpgradeMordorFortressMagmaCauldrons
	11	= Command_PurchaseUpgradeMordorFortressFireArrows
	12	= Command_PurchaseUpgradeMordorFortressMorgulSorcery
	13	= Command_PurchaseUpgradeMordorFortressGorgorothSpire
	14	= Command_RadialBack

	//Hero Menu
	15	= Command_CreateAHeroReviveSlot
	16	= Command_GenericReviveSlot1 
	17	= Command_GenericReviveSlot2
	18	= Command_GenericReviveSlot3
	19	= Command_GenericReviveSlot4
	20	= Command_GenericReviveSlot5
	21	= Command_GenericReviveSlot6
	22	= Command_GenericReviveSlot7
	23	= Command_GenericReviveSlot8
	24	= Command_GenericReviveSlot9
	25	= Command_RadialBack
End			

Object MordorFortressCitadel
CommandSet = MordorFortress
AddModule
	Behavior = AttributeModifierAuraUpdate ModuleTag_PillageAura
		StartsActive	= Yes										; If no, requires upgrade to turn on.
		BonusName	= LurtzPassiveOutlawLeadership
		RefreshDelay	= 2000
		Range		= 999999
		AllowSelf	= Yes
		ObjectFilter	= ALL
	End
End
ReplaceModule ModuleTag_SlaughterMe
	Behavior = CitadelSlaughterHordeContain ModuleTag_SlaughterMeQuietly
		PassengerFilter				= GENERIC_FACTION_SLAUGHTERABLE
		ObjectStatusOfContained			= UNSELECTABLE ENCLOSED 
		CashBackPercent				= 0%		
		ContainMax				= 99	;// give it a huge capacity, just in case player sends his whole army in at once
		AllowEnemiesInside			= No
		AllowAlliesInside			= No
 		AllowNeutralInside			= No
 		AllowOwnPlayerInsideOverride		= Yes
		EnterSound				= GUI_RingReturned
		EntryOffset				= X:129.0 Y:0.0 Z:0.0
		EntryPosition				= X:100.0 Y:0.0 Z:0.0		// entry position needs to be offset from the root transform, otherwise fortress obscures point.
		
		ExitOffset				= X:129.0 Y:0.0 Z:0.0
		StatusForRingEntry			= HOLDING_THE_RING
		UpgradeForRingEntry			= Upgrade_RingHero Upgrade_FortressRingHero Upgrade_GondorFaction ;;,;; CE graphics fix
		ObjectToDestroyForRingEntry		= NONE +TheDroppedRing
		FXForRingEntry				= FX_OneRingFlare
	End
End
End

CommandButton Command_SelectRevivablesWildFortress
	Command                 = PUSH_VISIBLE_COMMAND_RANGE
	TextLabel               = CONTROLBAR:SelectRevivablesGoblinFortress
	ButtonImage             = UCCommon_EvilHeroes
	ButtonBorderType        = SYSTEM 
	DescriptLabel           = CONTROLBAR:ToolTipCommandSelectRevivablesWildFortress
	Radial                  = Yes
	CommandRangeStart		= 13
	CommandRangeCount		= 12
End

CommandSet WildFortress
	InitialVisible = 6
	//Main Menu
	1  	= Command_ConstructWildPorter
	2  	= Command_SelectRevivablesWildFortress
	3   	= Command_SelectUpgradesWildFortress
	4   	= Command_PurchaseNewFireDrake	
	5   	= Command_EnableCEContentsGoblins
	6	= Command_Sell

	//Upgrades Menu
	7	= Command_PurchaseUpgradeWildFortressBatCloud
	8	= Command_PurchaseUpgradeWildFortressRazorSpines
	9	= Command_PurchaseUpgradeWildFortressFireArrows
	10	= Command_PurchaseUpgradeWildFortressWebCocoon
	11	= Command_PurchaseUpgradeWildFortressDragonNest	
	12	= Command_SpecialAbilityBatCloud
	13	= Command_RadialBack

	//Hero Menu
	14	= Command_CreateAHeroReviveSlot
	15	= Command_GenericReviveSlot1 
	16	= Command_GenericReviveSlot2
	17	= Command_GenericReviveSlot3
	18	= Command_GenericReviveSlot4
	19	= Command_GenericReviveSlot5
	20	= Command_GenericReviveSlot6
	21	= Command_GenericReviveSlot7
	22	= Command_GenericReviveSlot8
	23	= Command_GenericReviveSlot9
	24	= Command_RadialBack
End

Object WildFortressCitadel
CommandSet = WildFortress
AddModule
	Behavior = AttributeModifierAuraUpdate ModuleTag_PillageAura
		StartsActive	= Yes										; If no, requires upgrade to turn on.
		BonusName	= LurtzPassiveOutlawLeadership
		RefreshDelay	= 2000
		Range		= 999999
		AllowSelf	= Yes
		ObjectFilter	= ALL
	End
End
ReplaceModule ModuleTag_SlaughterMe
	Behavior = CitadelSlaughterHordeContain ModuleTag_SlaughterMeQuietly
		PassengerFilter				= GENERIC_FACTION_SLAUGHTERABLE
		ObjectStatusOfContained			= UNSELECTABLE ENCLOSED 
		CashBackPercent				= 0%		
		ContainMax				= 99	;// give it a huge capacity, just in case player sends his whole army in at once
		AllowEnemiesInside			= No
		AllowAlliesInside			= No
 		AllowNeutralInside			= No
 		AllowOwnPlayerInsideOverride		= Yes
		EnterSound				= GUI_RingReturned
		EntryOffset				= X:129.0 Y:0.0 Z:0.0
		EntryPosition				= X:100.0 Y:0.0 Z:0.0		// entry position needs to be offset from the root transform, otherwise fortress obscures point.
		
		ExitOffset				= X:129.0 Y:0.0 Z:0.0
		StatusForRingEntry			= HOLDING_THE_RING
		UpgradeForRingEntry			= Upgrade_RingHero Upgrade_FortressRingHero Upgrade_GondorFaction ;;,;; CE graphics fix
		ObjectToDestroyForRingEntry		= NONE +TheDroppedRing
		FXForRingEntry				= FX_OneRingFlare
	End
End
End

CommandButton Command_SelectRevivablesAngmarFortress
	Command                 = PUSH_VISIBLE_COMMAND_RANGE
	TextLabel               = CONTROLBAR:SelectRevivablesDwarvenFortress
	ButtonImage             = UCCommon_EvilHeroes
	ButtonBorderType        = SYSTEM 
	DescriptLabel           = CONTROLBAR:ToolTipCommandSelectRevivablesDwarvenFortress
	Radial                  = Yes
	CommandRangeStart		= 14
	CommandRangeCount		= 12
End

CommandSet AngmarFortress
	InitialVisible = 7
	//Main Menu
	1	= Command_ConstructAngmarPorter
	2	= Command_SelectRevivablesAngmarFortress
	3   	= Command_SelectUpgradesAngmarFortress
	4	= Command_FireWeaponAngmarFortressSanctumFrostball
	5   	= Command_EnableCEContentsAngmar
	6	= Command_Sell

	//Upgardes Menu
	8	= Command_PurchaseUpgradeAngmarFortressBanners
	9	= Command_PurchaseUpgradeAngmarFortressHouseOfLamentation
	10	= Command_PurchaseUpgradeAngmarFortressSpikes
	11	= Command_PurchaseUpgradeAngmarFortressIceMunitions
	12	= Command_PurchaseUpgradeAngmarFortressIceWalls
	13	= Command_PurchaseUpgradeAngmarFortressSanctum
	14	= Command_RadialBack
	
	//Hero Menu
	15	= Command_CreateAHeroReviveSlot
	16	= Command_GenericReviveSlot1
	17	= Command_GenericReviveSlot2
	18	= Command_GenericReviveSlot3
	19	= Command_GenericReviveSlot4
	20	= Command_GenericReviveSlot5
	21	= Command_GenericReviveSlot6
	22	= Command_GenericReviveSlot7
	23	= Command_GenericReviveSlot8
	24	= Command_GenericReviveSlot9
	25	= Command_RadialBack
End

Object AngmarFortressCitadel
CommandSet = AngmarFortress
AddModule
	Behavior = AttributeModifierAuraUpdate ModuleTag_PillageAura
		StartsActive	= Yes										; If no, requires upgrade to turn on.
		BonusName	= LurtzPassiveOutlawLeadership
		RefreshDelay	= 2000
		Range		= 999999
		AllowSelf	= Yes
		ObjectFilter	= ALL
	End
End
ReplaceModule ModuleTag_SlaughterMe
	Behavior = CitadelSlaughterHordeContain ModuleTag_SlaughterMeQuietly
		PassengerFilter				= GENERIC_FACTION_SLAUGHTERABLE
		ObjectStatusOfContained			= UNSELECTABLE ENCLOSED 
		CashBackPercent				= 0%		
		ContainMax				= 99	;// give it a huge capacity, just in case player sends his whole army in at once
		AllowEnemiesInside			= No
		AllowAlliesInside			= No
 		AllowNeutralInside			= No
 		AllowOwnPlayerInsideOverride		= Yes
		EnterSound				= GUI_RingReturned
		EntryOffset				= X:129.0 Y:0.0 Z:0.0
		EntryPosition				= X:100.0 Y:0.0 Z:0.0		// entry position needs to be offset from the root transform, otherwise fortress obscures point.
		
		ExitOffset				= X:129.0 Y:0.0 Z:0.0
		StatusForRingEntry			= HOLDING_THE_RING
		UpgradeForRingEntry			= Upgrade_RingHero Upgrade_FortressRingHero Upgrade_GondorFaction ;;,;; CE graphics fix
		ObjectToDestroyForRingEntry		= NONE +TheDroppedRing
		FXForRingEntry				= FX_OneRingFlare
	End
End
End

PlayerTemplate FactionMen
     StartingBuilding = MenFortress
     StartingUnit1 = NONE 
     StartingUnitOffset1 = X:20 Y:180 Z:0
     StartingUnit0 = NONE
     StartingUnitOffset0 = X:-20 Y:180 Z:0
     BuildableHeroesMP = CreateAHero
     PurchaseScienceCommandSetMP = SpellStoreAll
     SpellBookMp = SpellBookAll
End

PlayerTemplate FactionElves
     StartingBuilding = ElvenFortress
     StartingUnit1 = NONE 
     StartingUnitOffset1 = X:20 Y:180 Z:0
     StartingUnit0 = NONE
     StartingUnitOffset0 = X:-20 Y:180 Z:0
     BuildableHeroesMP = CreateAHero
     PurchaseScienceCommandSetMP = SpellStoreAll
     SpellBookMp = SpellBookAll
End

PlayerTemplate FactionDwarves
     StartingBuilding = DwarvenFortress
     StartingUnit1 = NONE 
     StartingUnitOffset1 = X:20 Y:180 Z:0
     StartingUnit0 = NONE
     StartingUnitOffset0 = X:-20 Y:180 Z:0
     BuildableHeroesMP = CreateAHero
     PurchaseScienceCommandSetMP = SpellStoreAll
     SpellBookMp = SpellBookAll
End

PlayerTemplate FactionIsengard
     StartingBuilding = IsengardFortress
     StartingUnit1 = NONE 
     StartingUnitOffset1 = X:20 Y:180 Z:0
     StartingUnit0 = NONE
     StartingUnitOffset0 = X:-20 Y:180 Z:0
     BuildableHeroesMP = CreateAHero
     PurchaseScienceCommandSetMP = SpellStoreAll
     SpellBookMp = SpellBookAll
End

PlayerTemplate FactionMordor
     StartingBuilding = MordorFortress
     StartingUnit1 = NONE 
     StartingUnitOffset1 = X:20 Y:180 Z:0
     StartingUnit0 = NONE
     StartingUnitOffset0 = X:-20 Y:180 Z:0
     BuildableHeroesMP = CreateAHero
     PurchaseScienceCommandSetMP = SpellStoreAll
     SpellBookMp = SpellBookAll
End

PlayerTemplate FactionWild
     StartingBuilding = WildFortress
     StartingUnit1 = NONE 
     StartingUnitOffset1 = X:20 Y:180 Z:0
     StartingUnit0 = NONE
     StartingUnitOffset0 = X:-20 Y:180 Z:0
     BuildableHeroesMP = CreateAHero
     PurchaseScienceCommandSetMP = SpellStoreAll
     SpellBookMp = SpellBookAll
End

PlayerTemplate FactionAngmar
     StartingBuilding = AngmarFortress
     StartingUnit1 = NONE 
     StartingUnitOffset1 = X:20 Y:180 Z:0
     StartingUnit0 = NONE
     StartingUnitOffset0 = X:-20 Y:180 Z:0
     BuildableHeroesMP = CreateAHero
     PurchaseScienceCommandSetMP = SpellStoreAll
     SpellBookMp = SpellBookAll
End

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;All Porters Building Command Sets
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

CommandSet AllPorterCommandSet   
 ;  1  = Command_PorterConstructMenStatue
 ;  2  = Command_ConstructDwarvenHearth 
End

Object GondorStatue
BuildCost = 800
BuildTime = 10.0
End

Object DwarvenHearth
BuildCost = 500
BuildTime = 10.0
End

Object ElvenPorter
BountyValue = 10
BuildCost = 10
BuildTime = 3
CommandSet = AllPorterCommandSet
End

Object DwarvenPorter
BountyValue = 10
BuildCost = 10
BuildTime = 3
CommandSet = AllPorterCommandSet
End

Object IsengardPorter
BountyValue = 10
BuildCost = 10
BuildTime = 3
CommandSet = AllPorterCommandSet
End

Object MordorPorter
BountyValue = 10
BuildCost = 10
BuildTime = 3
CommandSet = AllPorterCommandSet
End

Object WildPorter
BountyValue = 10
BuildCost = 10
BuildTime = 3
CommandSet = AllPorterCommandSet
End

Object MenPorter
BountyValue = 10
BuildCost = 10
BuildTime = 3
CommandSet = AllPorterCommandSet
End

Object AngmarPorter
BountyValue = 10
BuildCost = 10
BuildTime = 3
CommandSet = AllPorterCommandSet
End

Object  DwarvenWallHubSmallExpansion
CommandSet = SellableCommandSet
End

Object  ElvenWallHubSmallExpansion
CommandSet = SellableCommandSet
End

Object  MenWallHubSmallExpansion
CommandSet = SellableCommandSet
End

Object  IsengardWallHubSmallExpansion
CommandSet = SellableCommandSet
End

Object  DwarvenWallHubSmall
CommandSet = SellableCommandSet
End

Object  ElvenWallHubSmall
CommandSet = SellableCommandSet
End

Object  MenWallHubSmall
CommandSet = SellableCommandSet
End

Object  IsengardWallHubSmall
CommandSet = SellableCommandSet
End

;===================================================================== Units ============================================================

CommandSet GondorRangerHorde
	1 	= Command_ToggleStance
	2	= Command_ArcherBombard
	3 	= Command_PurchaseUpgradeGondorFireArrowsTier2
	4 	= Command_PurchaseUpgradeGondorBasicTrainingTier4
	12 	= Command_CaptureBuilding
	13 	= Command_AttackMove
	14 	= Command_Stop
	16  	= Command_SetStanceBattle
	17  	= Command_SetStanceAggressive
	18  	= Command_SetStanceHoldGround
End

Object GondorRangerHordeInn
CommandSet = GondorRangerHorde
End

CommandSet AngmarDarkRangerHorde
	1 	= Command_ToggleStance
	2	= Command_ArcherBombard
	3 	= Command_PurchaseUpgradeAngmarIceArrowsTier2
	4 	= Command_PurchaseUpgradeAngmarBasicTrainingTier4
	5	= Command_NecromancerDeathMask
	12 	= Command_CaptureBuilding
	13 	= Command_AttackMove
	14 	= Command_Stop
	16  	= Command_SetStanceBattle
	17  	= Command_SetStanceAggressive
	18  	= Command_SetStanceHoldGround
End

Object AngmarDarkRangerHorde
CommandSet = AngmarDarkRangerHorde
End

Weapon MordorLanceThrownWarhead
  HitStoredTarget = Yes	; Always hits initial target.
  ProjectileCollidesWith = ENEMIES NEUTRAL STRUCTURES WALLS 
  RadiusDamageAffects = ENEMIES NEUTRALS NOT_SIMILAR ;ALLIES
  DamageNugget                        ; A basic Nugget that just does damage
    Damage        = 65
	DamageScalar  = 85% NONE +STRUCTURE ;,;
	DamageScalar  = 50% NONE +DwarvenBattleWagon ;,;
    Radius        = 0.0
    DelayTime     = 0
    DamageType    = SPECIALIST ;,; PIERCE
    DamageFXType  = SWORD_SLASH ;,; GOOD_ARROW_PIERCE
    DeathType     = NORMAL
	ForbiddenUpgradeNames    = Upgrade_MordorForgedBlades ;,;
  End

  DamageNugget ;,;                       ; A basic Nugget that just does damage
    Damage        = MORDOR_HARADRIM_LANCER_DAMAGE_UPGRADE
	DamageScalar  = 85% NONE +STRUCTURE
	DamageScalar  = 50% NONE +DwarvenBattleWagon
    Radius        = 0.0
    DelayTime     = 0
    DamageType    = SPECIALIST
    DamageFXType  = SWORD_SLASH
    DeathType     = NORMAL
	RequiredUpgradeNames    = Upgrade_MordorForgedBlades
  End
End

Armor SummonedWyrmArmor
  Armor = DEFAULT		30%
  Armor = CRUSH			20%
  Armor = SLASH			20%
  Armor = URUK			20%
  Armor = PIERCE		20%
  Armor = SIEGE			25%
  Armor = STRUCTURAL		60%
  Armor = HERO			75%
  Armor = MAGIC			20%
  Armor = HERO_RANGED		20%
  Armor = FROST          	70%
  Armor = FLAME			1%
  Armor = LOGICAL_FIRE		0%
  Armor = SPECIALIST    	100%
End

;-------------------------------------- Oathbreakers

Armor OathBreakerArmor
  Armor = DEFAULT         	  4%     ; this sets the level for all nonspecified damage types
  Armor = HERO		  	100%
  Armor = FROST			 40%
  Armor = MAGIC		         40%
  Armor = FORCE       	        100%     ;in case Gandalf or Saruman attack
End

Weapon OathbreakerSword
  RadiusDamageAffects = ENEMIES NEUTRALS
  LeechRangeWeapon      = Yes
  AttackRange           = 20.0
  MeleeWeapon           = Yes
  DelayBetweenShots     = OATHBREAKER_SWORD_DELAYBETWEENSHOTS  ; Bad Things happen if delay between shots is less than Preattack+Firing times.  You are ready to fire before you are done firing.
  PreAttackDelay        = OATHBREAKER_SWORD_PREATTACKDELAY             ; 400 is sword swing delay time before contact with target.
  PreAttackType         = PER_SHOT ; Do the delay each time we attack a new target
  FireFX                = FX_GondorSwordHit
  FiringDuration        = OATHBREAKER_SWORD_FIRINGDURATION    ; Duration of the sword swing

  DamageNugget
    Damage        = 260
    DamageScalar  = 3% NONE +GondorAragorn +STRUCTURE
    Radius        = 10.0
    DelayTime     = 0
    DamageType    = MAGIC
    DamageFXType  = SWORD_SLASH
    DeathType     = NORMAL
  End
End

Object RohanOathbreaker1
ButtonImage = UPOathBreakers
	WeaponSet
		Conditions = None 
		Weapon = PRIMARY    OathbreakerSword
		AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
	ArmorSet
		Conditions      = None
		Armor           = OathBreakerArmor
		DamageFX        = NormalDamageFX
	End
	CrushableLevel = 3
	ShockwaveResistance = SHOCKWAVE_RESISTANCE_WEAK
	BountyValue = 600
ReplaceModule ModuleTag_02
	Body = ActiveBody ModuleTag_02_Weaker
		MaxHealth         = 500
		MaxHealthDamaged  = 100
	End
End
VoiceCreated = AragornVoiceSummonOathbreakersMS
VoiceFullyCreated = AragornVoiceSummonOathbreakersMS
RemoveModule ModuleTag_LifetimeUpdate
RemoveModule ModuleTag_05
End

Object RohanOathbreaker2
ButtonImage = UPOathBreakers
	WeaponSet
		Conditions = None 
		Weapon = PRIMARY    OathbreakerSword
		AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
	ArmorSet
		Conditions      = None
		Armor           = OathBreakerArmor
		DamageFX        = NormalDamageFX
	End
	CrushableLevel = 3
	ShockwaveResistance = SHOCKWAVE_RESISTANCE_WEAK
	BountyValue = 600
ReplaceModule ModuleTag_02
	Body = ActiveBody ModuleTag_02_Weaker
		MaxHealth         = 500
		MaxHealthDamaged  = 100
	End
End
RemoveModule ModuleTag_LifetimeUpdate
RemoveModule ModuleTag_05
End

Object RohanOathbreaker3
ButtonImage = UPOathBreakers
	WeaponSet
		Conditions = None 
		Weapon = PRIMARY    OathbreakerSword
		AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
	ArmorSet
		Conditions      = None
		Armor           = OathBreakerArmor
		DamageFX        = NormalDamageFX
	End
	CrushableLevel = 3
	ShockwaveResistance = SHOCKWAVE_RESISTANCE_WEAK
	BountyValue = 600
ReplaceModule ModuleTag_02
	Body = ActiveBody ModuleTag_02_Weaker
		MaxHealth         = 500
		MaxHealthDamaged  = 100
	End
End
RemoveModule ModuleTag_LifetimeUpdate
RemoveModule ModuleTag_05
End

Object RohanOathbreakerHorde
	WeaponSet
		Conditions = None 
		Weapon = PRIMARY    OathbreakerSword
		AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
	ArmorSet
		Conditions      = None
		Armor           = OathBreakerArmor
		DamageFX        = NormalDamageFX
	End
	CrushableLevel = 3
	ShockwaveResistance = SHOCKWAVE_RESISTANCE_WEAK
	KindOf = SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT INFANTRY HORDE NO_FORMATION_MOVEMENT ARMY_OF_DEAD SCARY LARGE_RECTANGLE_PATHFIND MELEE_HORDE
	LocomotorSet
		Locomotor     = AODHordeLocomotor
		Condition     = SET_NORMAL
		Speed         = 65
	End
RemoveModule ModuleTag_LifetimeUpdate
RemoveModule ModuleTag_05
End

ChildObject RohanMerry RohanOathbreaker1
	BountyValue = 600
AddModule
	Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate
		MinLifetime		= OATHBREAKER_LIFETIME
		MaxLifetime		= OATHBREAKER_LIFETIME
		DeathType       = FADED
	End
End
AddModule
	Behavior = OathbreakersFadeAwayBehavior ModuleTag_05
		FadeOutTime   = 3500
	End
End
End

Object RohanOathbreakerHordeSmall // used for Aragorn's oathbreaker summon skill
ReplaceModule ModuleTag_HordeContain
	Behavior = AODHordeContain ModuleTag_HordeContain_WithTimers
		ObjectStatusOfContained = 
		InitialPayload = RohanMerry OATHBREAKER_SMALL_HORDE_SIZE
		Slots = 16
		PassengerFilter = ANY +INFANTRY
		ShowPips = No
		ThisFormationIsTheMainFormation = Yes	//Used to determine which armorset to use (and anything else we want!)
		RandomOffset = X:0 Y:0
		
		// AOD sine wave movement.
		FrequencyScale = 0.3// // how fast they move left to right.
		FrequencyRandomness = 0.3// how random - 0==no randomness, 1.0 = very random.
		AmplitudeScale = 20// how far they move left to right.
		AmplitudeRandomness = 0.4// how random - 0==no randomness, 1.0 = very random.
		StillAmplitude = 0.10// // how much they move left to right when not moving. 0==none, 1.0==full movement.

		// z movement.
		FrequencyScaleZ = 0.2// // how fast they move up&down.
		FrequencyRandomnessZ = 0.4// how random - 0==no randomness, 1.0 = very random.
		AmplitudeScaleZ = 4// how far they up and down.
		AmplitudeRandomnessZ = 0.2// how random - 0==no randomness, 1.0 = very random.
		StillAmplitudeZ = 0.15// // how much they move up & down when not moving. 0==none, 1.0==full movement.
		
		// Horde flowing up over large units it kills.
		LargeUnitHeightFactor = 0.85 // Start with this * the object's geometry height.
		LargeUnitMinHeight = 20.0// Go up at least this amount.
		LargeUnitMaxHeight = 300.0// Go up at no more than amount.
		LargeUnitTimeout = 12000// How long the horde flows up over the unit, ms.  4000==4 seconds.
		LargeUnitTailOff = 2.0f// How quickly the units drop back to the ground.
		
		// Oath fulfilled behavior.
		ScatterSpeedFactor = 0.4// How fast they scatter.
		ScatterRandomness = 0.1// How random the scatter speed is.
		
		// Positions for 10
		RankInfo = RankNumber:1 UnitType:RohanMerry Position:X:10 Y:0	Position:X:10 Y:30		Position:X:10 Y:-30		Position:X:10 Y:60		//Position:X:10 Y:-60 
		RankInfo = RankNumber:2 UnitType:RohanMerry Position:X:-10 Y:0	Position:X:-10 Y:30		Position:X:-10 Y:-30		Position:X:-10 Y:60		//Position:X:-10 Y:-60 
		RankInfo = RankNumber:2 UnitType:RohanMerry Position:X:-30 Y:0	Position:X:-30 Y:30		Position:X:-30 Y:-30		Position:X:-30 Y:60		//Position:X:-30 Y:-60 
		RankInfo = RankNumber:2 UnitType:RohanMerry Position:X:-50 Y:0	Position:X:-50 Y:30		Position:X:-50 Y:-30		Position:X:-50 Y:60		//Position:X:-50 Y:-60 		
		RanksToReleaseWhenAttacking = 1 2 3 4
		
		EvaEventLastMemberDeath = OathbreakerDismiss
	End
End
End


;--------------------------------------- Mounted Oathbreakers

Weapon WolfCrush
  LeechRangeWeapon      = Yes
  AttackRange           = 9999999.0
  MeleeWeapon           = No
  DelayBetweenShots     = 0            ; time between shots, msec
  PreAttackDelay        = 0 		;PreAttackDelay+FiringDuration = UseWeaponTiming = Yes duration
  PreAttackType         = PER_SHOT 
  FiringDuration        = 0 ;
  FireFX		= FX_GenericCrushImpactSound

  DamageNugget                        ; A basic Nugget that just does damage
    Damage        = 70
	DamageScalar  	= 25% NONE +RohanSpearmen +GondorTowerShieldGuard +DwarvenPhalanx +ElvenMithlondSentry +ArnorTowerShieldGuard +AngmarRhudaurSpearman +IsengardPikeman +MordorEasterling ;,;
	DamageScalar  	= 50% NONE +AngmarThrallMaster +AngmarThrallMasterInn +AngmarThrallMasterBanner +AngmarThrallMasterSpearmenBanner +AngmarThrallMasterAxeBanner +AngmarThrallMasterSlingerBanner +AngmarThrallMasterOrcBanner +AngmarThrallMasterWolfBanner +AngmarThrallMasterHillmenBanner ;,;
	DamageScalar  	= 5000% NONE +RohanOathbreakerHorde +RohanOathbreakerHordeSmall +RohanOathbreaker +RohanOathbreaker1 +RohanOathbreaker2 +RohanOathbreaker3
    Radius        = 0.0
    DelayTime     = 0
    DamageType    = FORCE
    DeathType     = CRUSHED
    FlankingBonus = CAVALRY_FLANK_CRUSH_BONUS
  End
End

Object RohanOathbreakersCavalry
ButtonImage = UPOathBreakers
SelectPortrait = UPOathBreakers
AddModule
	Draw = W3DScriptedModelDraw DustEffects
	    DefaultModelConditionState
	      Model = None
	    End
	    IdleAnimationState
	    End
	    AnimationState = MOVING WADING
			ParticleSysBone = None FootstepSlash
	    End
	    AnimationState = MOVING ACCELERATE
			ParticleSysBone = None GenericSiegeTrailDust
	    End
	    AnimationState = MOVING DECELERATE
			ParticleSysBone = None GenericSiegeTrailDust
	    End
	    AnimationState = MOVING
	    End
	End
End
ShockwaveResistance = SHOCKWAVE_RESISTANCE_WEAK
CommandSet = GenericCommandSet
RemoveModule ModuleTag_LifetimeUpdate
RemoveModule ModuleTag_05
	WeaponSet
		Conditions = None 
		Weapon = PRIMARY    OathbreakerSword
		AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
		Weapon = SECONDARY  OathbreakerSword
		AutoChooseSources = SECONDARY FROM_SCRIPT
	End
	ArmorSet
		Conditions      = None
		Armor           = OathBreakerArmor
		DamageFX        = NormalDamageFX
	End
	LocomotorSet
		Locomotor     = NormalHorseHordeMemberLocomotor
		Condition     = SET_NORMAL
		Speed         = 105
	End


	CrushableLevel	= 4  			;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrusherLevel	= 4
	CrushWeapon	= WolfCrush
	
	MinCrushVelocityPercent = 40
	CrushDecelerationPercent = 0
	
	CrushKnockback 	= 10
	CrushZFactor 	= 1.0

VoiceCreated = AragornVoiceSummonOathbreakersMS
VoiceFullyCreated = AragornVoiceSummonOathbreakersMS
VoiceSelect = ArmyDeadGroupSmallAmbienceLoop

	RadarPriority	= UNIT
	ThingClass	= CAVALRY_UNIT
	KindOf		= PRELOAD SELECTABLE CAN_CAST_REFLECTIONS CAVALRY SCORE ATTACK_NEEDS_LINE_OF_SIGHT NOTIFY_OF_PREATTACK GRAB_AND_DROP
	BountyValue = 800
ReplaceModule ModuleTag_02
	Body = ActiveBody ModuleTag_02_NEW
		MaxHealth         = 500
		MaxHealthDamaged  = 50
	End
End
ReplaceModule ModuleTag_06
	Behavior = AODCrushCollide ModuleTag_06_NEW
		SmallFXList = FX_AODHitSmall
		MediumFXList = FX_AODHitMedium

		Damage = 180
		DamageType = MAGIC
		DeathType = CRUSHED
		
		SpecialObject = NONE +MordorBalrog -SELECTABLE -CAVALRY -INFANTRY -HERO -MONSTER; Special objects receive and dish out special damage.
		SpecialDamage = 80
		SpecialDamageType = CRUSH
		SpecialDeathType = CRUSHED
		
		SelfDamage = 5
		SelfDamageType = FLAME
		SelfDeathType = BURNED
	End
End

End

ChildObject RohanRohirrimHordeObsolete RohanOathbreakerHorde

	LocomotorSet
		Locomotor     = NormalCavalryHordeLocomotor 
		Condition     = SET_NORMAL
		Speed         = 100
	End

	WeaponSet
		Conditions = None 
		Weapon = PRIMARY    OathbreakerSword
		AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
		Weapon = SECONDARY  OathbreakerSword
		AutoChooseSources = SECONDARY FROM_SCRIPT
	End

	FormationWidth 		= 2 			; Width it occupies in formations. Current choices are 1 or 2.
	FormationDepth 		= 2 			; Depth it occupies in formations. Current choices are 1 or 2.

	// AOD can crush anything.
	CrushableLevel = 5  //What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrusherLevel = 3
	MinCrushVelocityPercent = 50% // Always crushes
	CrushDecelerationPercent = 3% // Lose 0 percent of max velocity when crushing.
	CrushKnockback = 4
	CrushZFactor = 1.1  // How much we knock upwards.

    	TransportSlotCount = TRANSPORTSLOTCOUNT_SMALL_HORDE
	KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAVALRY HORDE MELEE_HORDE ARMY_SUMMARY ARMY_OF_DEAD SCARY LARGE_RECTANGLE_PATHFIND
	ThingClass = HORDE_UNIT

ReplaceModule ModuleTag_StancesBehavior
	Behavior = StancesBehavior ModuleTag_StancesBehavior_NEW
        	StanceTemplate = CavalryHorde
	End
End

ReplaceModule ModuleTag_HordeContain
	Behavior = AODHordeContain ModuleTag_HordeContain_Cavalry
		ObjectStatusOfContained = 
		InitialPayload = RohanOathbreakersCavalry GOOD_RIDER_LARGE_HORDE_SIZE
		Slots = 10
		PassengerFilter = ANY +CAVALRY
		ShowPips = No
		ThisFormationIsTheMainFormation = Yes	//Used to determine which armorset to use (and anything else we want!)
		RandomOffset = X:0 Y:0
		
		// AOD sine wave movement.
		FrequencyScale = 0.1// // how fast they move left to right.
		FrequencyRandomness = 0.1// how random - 0==no randomness, 1.0 = very random.
		AmplitudeScale = 5// how far they move left to right.
		AmplitudeRandomness = 0.2// how random - 0==no randomness, 1.0 = very random.
		StillAmplitude = 0.05// // how much they move left to right when not moving. 0==none, 1.0==full movement.

		// z movement.
		FrequencyScaleZ = 0.1// // how fast they move up&down.
		FrequencyRandomnessZ = 0.2// how random - 0==no randomness, 1.0 = very random.
		AmplitudeScaleZ = 2// how far they up and down.
		AmplitudeRandomnessZ = 0.1// how random - 0==no randomness, 1.0 = very random.
		StillAmplitudeZ = 0.10// // how much they move up & down when not moving. 0==none, 1.0==full movement.
		
		// Horde flowing up over large units it kills.
		LargeUnitHeightFactor = 0.85 // Start with this * the object's geometry height.
		LargeUnitMinHeight = 20.0// Go up at least this amount.
		LargeUnitMaxHeight = 300.0// Go up at no more than amount.
		LargeUnitTimeout = 12000// How long the horde flows up over the unit, ms.  4000==4 seconds.
		LargeUnitTailOff = 2.0f// How quickly the units drop back to the ground.
		
		// Oath fulfilled behavior.
//E3 No up	OathFulfilledZFactor = 0.5 // How fast they rise up after oath is fulfilled.
		ScatterSpeedFactor = 0.4// How fast they scatter.
		ScatterRandomness = 0.1// How random the scatter speed is.
		
		// Positions for 8
		RankInfo = RankNumber:1 UnitType:RohanOathbreakersCavalry Position:X:40 Y:0		Position:X:40 Y:20		Position:X:40 Y:-20		Position:X:40 Y:40		Position:X:40 Y:-40
		RankInfo = RankNumber:2 UnitType:RohanOathbreakersCavalry Position:X:10 Y:0 Leader 1 0	Position:X:10 Y:20 Leader 1 1	Position:X:10 Y:-20 Leader 1 2	Position:X:10 Y:40 Leader 1 3	Position:X:10 Y:-40 Leader 1 4
		RanksToReleaseWhenAttacking = 1
	End
End
AddModule
	Behavior = AODCrushCollide ModuleTag_06_NEW
		SmallFXList = FX_AODHitSmall
		MediumFXList = FX_AODHitMedium

		Damage = 180
		DamageType = MAGIC
		DeathType = CRUSHED
		
		SpecialObject = NONE +MordorBalrog -SELECTABLE -CAVALRY -INFANTRY -HERO -MONSTER; Special objects receive and dish out special damage.
		SpecialDamage = 80
		SpecialDamageType = CRUSH
		SpecialDeathType = CRUSHED
		
		SelfDamage = 5
		SelfDamageType = FLAME
		SelfDeathType = BURNED
	End
End
RemoveModule ModuleTag_LifetimeUpdate
AddModule
	Behavior = HordeNotifyTargetsOfImminentProbableCrushingUpdate ModuleTag_NotifyCrushScan
		ScanWidth = 70.0 ; A little less than the width of the horde (which is 2 * 40 = 80)
	End
End
End

;----------------------------------------------- Floodhorse

FXParticleSystem WaterHorseTrail
  System
    Priority = VERY_LOW_OR_ABOVE
    IsOneShot = Yes
    Shader = ALPHA
    ParticleName = EXWater01.tga
    Lifetime = 40 40
    Size = 5 10
    BurstCount = 2 3
    IsEmitAboveGroundOnly = Yes
  End
  Color = DefaultColor
    Color1 = R:176 G:194 B:206 8
    Color2 = R:215 G:227 B:232 15
    Color3 = R:252 G:253 B:254 40
  End
  Alpha = DefaultAlpha
    Alpha2 = 0.7 0.9 4
    Alpha3 = 0.9 0.9 20
    Alpha4 = 0 0 40
  End
  Update = DefaultUpdate
    SizeRate = 10 14
    SizeRateDamping = 0.6 0.8
    AngleZ = 0 7
    AngularRateZ = -0.01 0.01
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    Gravity = -0.028
    VelocityDamping = 0.95 0.95
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = 0 4
  End
  EmissionVolume = LineEmissionVolume
    StartPoint = X:7 Y:0 Z:0
    EndPoint = X:-30 Y:0 Z:10
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem WaterHorseTrail2
  System
    Priority = VERY_LOW_OR_ABOVE
    Shader = ALPHA
    ParticleName = EXWater01.tga
    Lifetime = 40 40
    Size = 5 5
    BurstDelay = 1 1
    BurstCount = 1 1
    InitialDelay = 15 20
    IsEmitAboveGroundOnly = Yes
  End
  Color = DefaultColor
    Color1 = R:176 G:194 B:206 8
    Color2 = R:215 G:227 B:232 15
    Color3 = R:252 G:253 B:254 40
  End
  Alpha = DefaultAlpha
    Alpha2 = 1 1 2
    Alpha3 = 0 0 20
  End
  Update = DefaultUpdate
    SizeRate = 5 7
    SizeRateDamping = 0.6 0.8
    AngleZ = 0 7
    AngularRateZ = -0.01 0.01
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    Gravity = -0.025
    VelocityDamping = 0.95 0.95
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = -2 2
    Y = -2 2
  End
  EmissionVolume = LineEmissionVolume
    StartPoint = X:7 Y:0 Z:0
    EndPoint = X:-30 Y:0 Z:10
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem WaterHorseTrail3
  System
    Priority = HIGH_OR_ABOVE
    Shader = ALPHA
    ParticleName = EXWater01.tga
    Lifetime = 40 40
    Size = 5 10
    BurstDelay = 1 1
    BurstCount = 1 2
    IsEmitAboveGroundOnly = Yes
  End
  Color = DefaultColor
    Color1 = R:176 G:194 B:206 8
    Color2 = R:215 G:227 B:232 15
    Color3 = R:252 G:253 B:254 35
  End
  Alpha = DefaultAlpha
    Alpha2 = 1 1 4
    Alpha3 = 0 0 40
  End
  Update = DefaultUpdate
    SizeRate = 10 14
    SizeRateDamping = 0.6 0.8
    AngleZ = 0 7
    AngularRateZ = -0.01 0.01
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    Gravity = -0.028
    VelocityDamping = 0.95 0.95
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = -2 2
    Y = -2 2
  End
  EmissionVolume = LineEmissionVolume
    StartPoint = X:7 Y:0 Z:0
    EndPoint = X:-30 Y:0 Z:10
  End
  Draw = DefaultDraw
  End
  Event = TerrainCollision
    HeightOffset = 0 0
    EventFX = FX_WaterPuddle
    OrientFXToTerrain = No
    PerParticle = Yes
    KillAfterEvent = No
  End
End

Armor FloodArmor
	Armor = DEFAULT			2%		;this sets the level for all nonspecified damage types
	Armor = CRUSH			2%		;horseman damage
	Armor = SLASH			2%		;soldier damage
	Armor = SPECIALIST		2%  
	Armor = PIERCE			1%		;archer damage
	Armor = FLAME			100%		;fire damage
	Armor = LOGICAL_FIRE		20%		;fire logic
	Armor = FROST           	100%   		;ice
	Armor = SIEGE			10%		;siege damage
	Armor = STRUCTURAL		100%		;Grond damage destroys all.  
	Armor = HERO			100%		;Hero damage  
	Armor = HERO_RANGED		1%		;Hero bow damage
	Armor = CAVALRY			2%
	Armor = MAGIC			50%		;magic damage
	Armor = FORCE       		100%     	;in case Gandalf or Saruman attack
	Armor = POISON			1%		;poison
End

CommandSet FloodHorse
	1	= Command_ToggleStance
	13	= Command_AttackMove
	14	= Command_Stop
	16  	= Command_SetStanceBattle
	17  	= Command_SetStanceAggressive
	18  	= Command_SetStanceHoldGround
End

Weapon FloodGateHorseRadiusWeapon			// Shot out every DelayBetweenShots
	RadiusDamageAffects		= ENEMIES NOT_SIMILAR
	LeechRangeWeapon		= Yes
	AttackRange			= 9999999.0
	MeleeWeapon			= No
	DelayBetweenShots		= 0				// time between shots, msec
	PreAttackDelay			= 0				// PreAttackDelay+FiringDuration = UseWeaponTiming = Yes duration
	PreAttackType			= PER_SHOT 
	FiringDuration			= 0 

	// A basic Nugget that just does damage
	DamageNugget							
		Damage        = 4
		DamageScalar  = 500% NONE +HERO +AngmarShadeWolf
		DamageScalar  = 800% NONE +MordorBalrog
		DamageScalar  = 999% NONE +SummonedDragon +SummonedDragonJH1
		Radius        = 15
		DamageArc     = 90
		DelayTime     = 0
		DamageType    = WATER
		DamageFXType  = FLOOD_HORSE
		DeathType     = CRUSHED
		DamageScalar  = 0% ANY ALLIES ENEMIES NEUTRAL +STRUCTURE
	End

	FireLogicNugget
		LogicType		= DECREASE_BURN_RATE
		Radius			= 20
		Damage			= 1
		DelayTime		= 200 
	End
	
	// A Nugget that throws things back with force
	MetaImpactNugget                    
		HeroResist		= .84
		ShockWaveAmount		= 70.0
		ShockWaveArc		= 80
		ShockWaveRadius		= 10.0
		ShockWaveTaperOff	= 0.75
		ShockWaveZMult		= 1.000
		ShockWaveSpeed		= 700.0
	End
End

ChildObject RohanRohirrimArcher FloodGateHorse
ButtonImage = SBGood_Flood
ReplaceModule ModuleTag_01
	Draw = W3DScriptedModelDraw ModuleTag_01_NEW
	StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD
		DefaultModelConditionState
			Model = FloodHorse_SKN
			ParticleSysBone = Bone05 WaterHorseTrail3 FollowBone:Yes
		End
		
		AnimationState				= MOVING
			Animation				= RUNA
				AnimationName		= FloodHorse_SKL.FloodHorse_RUNA
				AnimationMode		= LOOP
			End
		;	Flags					= RANDOMSTART
		End   
		
	End
End

AddModule
	Draw = W3DScriptedModelDraw DustEffects
	    DefaultModelConditionState
	      Model = None
	    End
	    IdleAnimationState
	    End
	    AnimationState = MOVING WADING
			ParticleSysBone = Bone05 WaterHorseTrail3 FollowBone:Yes
	    End
	    AnimationState = MOVING ACCELERATE
			ParticleSysBone = Bone05 WaterHorseTrail2 FollowBone:Yes
	    End
	    AnimationState = MOVING DECELERATE
			ParticleSysBone = Bone05 WaterHorseTrail3 FollowBone:Yes
	    End
	    AnimationState = MOVING
			ParticleSysBone = Bone05 WaterHorseTrail FollowBone:Yes
	    End
	End
End

	TransportSlotCount = TRANSPORTSLOTCOUNT_UNIT
	RadarPriority	= UNIT
	ThingClass	= CAVALRY_UNIT
	KindOf = PRELOAD SELECTABLE CAVALRY CAN_ATTACK PATH_THROUGH_EACH_OTHER ARMY_SUMMARY SCARY LARGE_RECTANGLE_PATHFIND
	DisplayName = FloodHorse
	CommandSet = FloodHorse

AddModule
  Body = ActiveBody ModuleTag_02
    MaxHealth = 900
  End
End
AddModule
	Behavior = AIUpdateInterface ModuleTag_03
		AutoAcquireEnemiesWhenIdle	= Yes
		AILuaEventsList			= RohirrimFunctions
		AttackPriority			= AttackPriority_Cavalry
		Turret
			TurretTurnRate		= 360		; turn rate, in degrees per sec
			ControlledWeaponSlots	= PRIMARY
		End
	End
End
AddModule
	Behavior = StancesBehavior ModuleTag_StancesBehavior_NEW
        	StanceTemplate = CavalryHorde
	End
End
AddModule
	Behavior = AIUpdateInterface ModuleTag_03
		AutoAcquireEnemiesWhenIdle	= No
		CanAttackWhileContained		= No
		MoodAttackCheckRate		= 200
		AILuaEventsList			= RohirrimFunctions
		AttackPriority			= AttackPriority_Cavalry
		BurningDeathTime		= BURNINGDEATH_DURATION_CAVALRY
	End
End

	LocomotorSet
		Locomotor = NormalHorseHordeMemberLocomotor
		Condition = SET_NORMAL
		Speed     = NORMAL_MOUNTED_FAST_MEMBER_SPEED
	End
	ArmorSet
		Conditions      = None
		Armor           = FloodArmor
		DamageFX        = NormalDamageFX
	End

	BountyValue = 2600
	VisionRange = 250
	VisionSide = 50%
	VisionRear = 40%
	
	MaxVisionBonusPercent = 300%
	VisionBonusTestRadius = 200
	VisionBonusPercentPerFoot = 2.0%
	ShroudClearingRange = 400

	CrushableLevel	= 3  			;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrusherLevel	= 3
	CrushWeapon	= RivendellLancerCrush
	
	MinCrushVelocityPercent = 40
	CrushDecelerationPercent = 12
	
	CrushKnockback 	= 10
	CrushZFactor 	= 1.0

	VoiceAttack					= ArwenFloodHorseWhinny1
	VoiceAttackCharge				= ArwenFloodHorseWhinny2
	VoiceAttackStructure 				= ArwenFloodHorseWhinny1
 	VoiceAttackMachine				= ArwenFloodHorseWhinny1
	VoiceCreated					= ArwenVoiceFlood
	VoiceFullyCreated				= ArwenVoiceFlood
	VoiceGuard					= ArwenFloodHorseWhinny1
	VoiceMove					= ArwenFloodHorseWhinny1
	VoiceMoveToCamp 				= ArwenFloodHorseWhinny1
	VoiceMoveWhileAttacking				= ArwenFloodHorseWhinny2
	VoicePriority					= 60	
	VoiceRetreatToCastle 				= ArwenFloodHorseWhinny2

	VoiceSelect					= ArwenFloodHorseWhinny1
	VoiceSelectBattle				= ArwenFloodHorseWhinny2

	SoundCrushing					= ArwenFloodImpactWater1
	SoundImpact 					= ArwenFloodImpactWater1
	SoundMoveStart 					= ArwenFloodHorseGroupGallop
	
	VoiceEnterStateAttack 				= ArwenFloodHorseWhinny1
	VoiceEnterStateAttackCharge 			= ArwenFloodHorseWhinny1
	VoiceEnterStateAttackStructure	 		= ArwenFloodHorseWhinny1
	VoiceEnterStateAttackMachine 			= ArwenFloodHorseWhinny1
	VoiceEnterStateMove 				= ArwenFloodHorseWhinny2
	VoiceEnterStateMoveToCamp 			= ArwenFloodHorseWhinny2
	VoiceEnterStateMoveWhileAttacking		= ArwenFloodHorseWhinny2
	VoiceEnterStateRetreatToCastle	 		= ArwenFloodHorseWhinny2

AddModule
	Behavior = FireWeaponUpdate FireWeaponUpdateModuleTag_Damage
		FireWeaponNugget
			WeaponName = FloodGateHorseRadiusWeapon
			Offset = X:0 Y:0 Z:0
			FireDelay = 0
			OneShot = No
		End
	End
End

AddModule
	Behavior = AttributeModifierAuraUpdate ModuleTag_FearMe
		StartsActive	= Yes
		BonusName	= EyeOfSauronFear
		RefreshDelay	= 400
		Range		= 150.0
		ObjectFilter	= ANY +INFANTRY +CAVALRY
		TargetEnemy	= Yes
		MaxActiveRank	= 1
	End	
End

AddModule
  Behavior = SlowDeathBehavior ModuleTag_04
    DeathTypes = ALL
    SinkDelay = 30
    SinkRate = 2     ; in Dist/Sec
    DestructionDelay = 1800
    OCL = INITIAL OCL_SpecialPowerEnshroudingMist
  End
End
	Geometry = CYLINDER
	GeometryMajorRadius = 16
	GeometryMinorRadius = 16
	GeometryHeight = 20.0
	GeometryIsSmall = No
	Shadow = SHADOW_DECAL
	ShadowSizeX = 30;
	ShadowSizeY = 21;
	ShadowTexture = ShadowI;
End


Weapon Sting  ; BALANCE CaveTroll Weapon Normal
  LeechRangeWeapon		= Yes
  RadiusDamageAffects = ENEMIES 
  AttackRange           = 6
  MeleeWeapon           = Yes
  DelayBetweenShots     = MORDOR_TROLL_PUNCH_DELAYBETWEENSHOTS
  FiringDuration        = MORDOR_TROLL_PUNCH_FIRINGDURATION
  PreAttackDelay        = MORDOR_TROLL_PUNCH_PREATTACKDELAY
  PreAttackType         = PER_SHOT ; Do the delay each time we attack a new target
  PreAttackFX          	= FX_TrollTreeSwing
  FireFX               	= FX_TrollPunchGeneric
  DamageDealtAtSelfPosition = Yes ; A melee based AoE.  Arc radiates from me, not them
  AcceptableAimDelta	= 0.0 ;;

  DamageNugget                        ; A basic Nugget that just does damage
    Damage        = 100
    Radius        = 75.0
    DamageArc      = 45
    DamageType    = SIEGE
    DamageFXType  = CLUBBING
    DeathType     = NORMAL
    DamageScalar   = 400% NONE +HERO
  End
  MetaImpactNugget                    ; A Nugget that throws things back with force
    ShockWaveAmount   = 10.0
    ShockWaveRadius   = 75.0
    ShockWaveTaperOff = 1.0
    ShockWaveArc      = 45
    ShockWaveZMult    = 1.20
    HeroResist		  = 0.90		; 90% resistance to heroes
  End
End

;------------------------------------------------------------------------------
; This is the building attack bash, not the AOE, rock, siege or tree
Weapon MordorWorkerAxe  ; BALANCE CaveTroll Weapon Normal
	LeechRangeWeapon	  = Yes
	AttackRange           = 18
	RadiusDamageAffects	  = ENEMIES 
	MeleeWeapon           = Yes
	FireFX                = FX_TrollBash
	DelayBetweenShots     = MORDOR_TROLL_SHOULDER_DELAYBETWEENSHOTS            ; time between shots, msec
	FiringDuration        = MORDOR_TROLL_SHOULDER_FIRINGDURATION
	PreAttackDelay        = MORDOR_TROLL_SHOULDER_PREATTACKDELAY
	PreAttackType         = PER_SHOT
	PreAttackFX           = FX_TrollTreeSwing
	AcceptableAimDelta	  = 45.0 

	DamageNugget                        ; A basic Nugget that just does damage
		Damage        = 800
		Radius        = 8.0
		DelayTime     = 0
		DamageType    = SIEGE
		DamageFXType  = CLUBBING
		DeathType     = NORMAL
	End

	DamageNugget								; A basic Nugget that just does damage
		Damage			= 200
		DamageScalar		= 300% NONE +HERO
		Radius			= 40.0					; matches impact nugget so it throws them back and hurts them
		DamageArc		= 90
		DamageType		= SIEGE
		DamageFXType		= CLUBBING
		DeathType		= NORMAL
	End

	MetaImpactNugget							; A Nugget that throws things back with force
		ShockWaveAmount   = 20.0
		ShockWaveRadius   = 40.0
		ShockWaveTaperOff = 0.75
		ShockWaveArc      = 90
		ShockWaveZMult    = 1.20
		HeroResist	  = 0.90					; 90% resistance to heroes
	End
End

CommandSet HugeTroll
	1	= Command_ToggleStance
	13 	= Command_AttackMove
	14 	= Command_Stop
	17  	= Command_SetStanceBattle
	18  	= Command_SetStanceAggressive
	19  	= Command_SetStanceHoldGround
End

ChildObject WildBatCloud MordorMountainTroll
	WeaponSet
		Conditions          	=  None
		Weapon             	=  PRIMARY		Sting
		Weapon              	=  SECONDARY		MordorWorkerAxe
		OnlyAgainst         	=  SECONDARY		STRUCTURE BLOCKING_GATE
		Weapon			=  TERTIARY		Sting
		OnlyInCondition		=  TERTIARY		MOVING
	End
	LocomotorSet
		Locomotor = TrollLocomotor
		Condition = SET_NORMAL
		Speed     = 87
	End
CommandSet = HugeTroll
RemoveModule Module_DoCommandUpgrade
AddModule
	Body = DelayedDeathBody ModuleTag_02_New
		MaxHealth			= 60000
		MaxHealthDamaged		= 30000
		MaxHealthReallyDamaged		= 10000
		DoHealthCheck			= No			;// Don't want to get the delayed death behaviour when we die normally.
		DelayedDeathTime		= 5000
		CanRespawn			= No			;// Unit can't get revived.
	End
End
	Scale 			= 1.75
	BountyValue		= 360
	Geometry		= CYLINDER
	GeometryMajorRadius	= 40.0
	GeometryHeight		= 75.0
	GeometryIsSmall		= No
	Shadow			= SHADOW_VOLUME_NON_SELF_2	;// volumetric shadow that doesn't cast onto all objects using SHADOW_VOLUME_NON_SELF_2
End

Object MordorSauron
RemoveModule ModuleTag_AutoHeal
AddModule
	Behavior = ExperienceLevelCreate ModuleTag_LevelBonus
		LevelToGrant	= 10
		MPOnly		= No
	End
End
End

Object ElvenGaladriel
AddModule
	Behavior = ExperienceLevelCreate ModuleTag_LevelBonus
		LevelToGrant	= 10
		MPOnly		= No
	End
End
AddModule
	Behavior = ModelConditionUpgrade ModulTag_RingHeroMC
		TriggeredBy			= Upgrade_ObjectLevel1
		AddConditionFlags		= USER_1
	End
End
AddModule
	Behavior = SpecialPowerModule ModuleTag_GaladrielTerribleFury
		SpecialPowerTemplate		= SpecialAbilityScreech
		UpdateModuleStartsAttack	= Yes
		SetModelCondition 		= ModelConditionState:USER_2
		SetModelConditionTime 		= 3.2
		DisableDuringAnimDuration 	= Yes
	End
End
AddModule
	Behavior = SpecialAbilityUpdate ModuleTag_GaladrielTerribleFuryUpdate  
		SpecialPowerTemplate		= SpecialAbilityScreech
		UnpackTime			= 1
		AwardXPForTriggering		= 0		
		TriggerSound			= GaladrielVoiceTerribleFury
		EffectRange			= 200
		UnpackTime			= 100
		PreparationTime			= 1
		PackTime			= 3000
	End
End
End

Object MordorGrond
TransportSlotCount = TRANSPORTSLOTCOUNT_UNIT
KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS MACHINE SCORE CAN_ATTACK PATH_THROUGH_INFANTRY SCARY CAN_ATTACK_WALLS MOVE_FOR_NOONE
ShockwaveResistance = 9999
ReplaceModule ModuleTag_04
	Body                  = ActiveBody ModuleTag_04_NEW
		CheerRadius 	  = EMOTION_CHEER_RADIUS
		MaxHealth         = 90000
		MaxHealthDamaged  = 30000
	End
End
End

Weapon IsengardExplosiveMineExplosionWeapon   ; BALANCE Mine Weapon
	AttackRange           = 10.0
	DelayBetweenShots     = 2000            ; time between shots, msec
	FireFX                = FX_ExplosiveMine
	RadiusDamageAffects = ALLIES ENEMIES NEUTRALS SELF

	DamageNugget
		Damage        = ISENGARD_EXPLOSIVEMINE_MAIN_DAMAGE
		Radius        = 125.0
		DelayTime     = 0
		DamageType    = SIEGE
		DamageFXType  = FLAME
		DeathType     = BURNED
		DamageScalar  = 50000% NONE +NeutralGollum
	End

	MetaImpactNugget
		ShockWaveAmount   = 90.0		
		ShockWaveRadius   = 125.0
		ShockWaveTaperOff = 0.66
	End
End

CommandButton Command_IsengardMineDetonate
	Command			= SPECIAL_POWER
	SpecialPower		= SpecialAbilityDetonate
	TextLabel		= CONTROLBAR:IsengardMineDetonate
	ButtonImage		= HIDetonateMineIcon
	ButtonBorderType	= ACTION
	DescriptLabel		= BlowUp
	InPalantir		= Yes
	UnitSpecificSound	= GollumVoiceAttack
End

CommandSet Gollum
	1	= Command_ToggleStance
	2	= Command_IsengardMineDetonate
	13	= Command_AttackMove
	14	= Command_Stop
	16  	= Command_SetStanceBattle
	17  	= Command_SetStanceAggressive
	18  	= Command_SetStanceHoldGround
End

Object NeutralGollum
	RadarPriority	= UNIT
	ThingClass	= HORDE_UNIT
	KindOf		= PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY SCORE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT NOTIFY_OF_PREATTACK GRAB_AND_DROP PATH_THROUGH_INFANTRY CAN_ATTACK_WALLS HEAVY_MELEE_HITTER
	CommandSet	= Gollum
	ThreatLevel 	= 10
	WeaponSet
		Conditions = None 
		Weapon = PRIMARY    IsengardExplosiveMineExplosionWeapon
		AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
ReplaceModule ModuleTag_02
	Body = ActiveBody ModuleTag_02_Stronger
	    MaxHealth         = 9000
	End
End
AddModule
	ThreatBreakdown IsengardMine_DetailedThreat
		AIKindOf = SIEGEWEAPON
	End
End
AddModule
	Behavior = SpecialPowerModule ModuleTag_DetonatePower                    
		SpecialPowerTemplate		= SpecialAbilityDetonate
		UpdateModuleStartsAttack	= Yes
		InitiateSound			= GollumVoiceAttack
	End
End
AddModule
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_DetonateUpdate   
		SpecialPowerTemplate    = SpecialAbilityDetonate
		UnpackTime		= 0
		PackTime		= 0
		MustFinishAbility	= No
		AwardXPForTriggering	= 0		
		SpecialWeapon		= IsengardExplosiveMineExplosionWeapon
		WhichSpecialWeapon	= 0
	End
End
AddModule
	Behavior = AIUpdateInterface ModuleTag_03
		AutoAcquireEnemiesWhenIdle	= Yes ATTACK_BUILDINGS
		AILuaEventsList			= RohirrimFunctions
		AttackPriority			= AttackPriority_Cavalry
		BurningDeathTime		= BURNINGDEATH_DURATION_CAVALRY
	End
End
AddModule
	Behavior = AISpecialPowerUpdate DetonateAI
		CommandButtonName = Command_IsengardMineDetonate
		SpecialPowerAIType = AI_SPECIAL_POWER_ENEMY_TYPE_KILLER
	End
End
AddModule
	Behavior = AISpecialPowerUpdate RohanPeasantHordeCaptureBuildingAI
		CommandButtonName = Command_CaptureBuilding
		SpecialPowerAIType = AI_SPECIAL_POWER_CAPTURE_BUILDING
	End
End
AddModule
	Behavior = AISpecialPowerUpdate GondorFighterHordeStanceBattle
		CommandButtonName = Command_SetStanceBattle
		SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
	End
End
AddModule
	Behavior = AISpecialPowerUpdate GondorFighterHordeStanceAggressive
		CommandButtonName = Command_SetStanceAggressive
		SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
	End
End
AddModule
	Behavior = AISpecialPowerUpdate GondorFighterHordeHoldGround
		CommandButtonName = Command_SetStanceHoldGround
		SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
	End
End
End

Object RohanPeasant1
  ButtonImage = UPInn_RohanPeasantsButton
End
Object RohanPeasant3
  ButtonImage = UPInn_RohanPeasantsButton
End
Object RohanPeasant4
  ButtonImage = UPInn_RohanPeasantsButton
End

Weapon SummonDragonAppear
	RadiusDamageAffects   = ENEMIES

	DamageNugget
		Damage			= SUMMONED_DRAGON_CRUSH_DAMAGE
		DamageScalar	= 10000% NONE +PORTER +DwarvenBattleWagon +DwarvenDemolisher +DwarvenCatapult +GondorTrebuchet +IsengardExplosiveMine +IsengardBallista +IsengardBatteringRam +MordorCatapult +MordorBatteringRam +MordorRamCrew +IsengardRamCrew +AngmarTrollSling
		Radius			= 100.0 ;,; 75.0
		DamageType		= CRUSH
		DeathType		= CRUSHED
	End

	MetaImpactNugget
		ShockWaveAmount   = 100.0 ;,; 50.0
		ShockWaveRadius   = 100.0 ;,; 55.0
		SpecialObjectFilter	= ALL -PORTER -DwarvenBattleWagon -DwarvenDemolisher -DwarvenCatapult -GondorTrebuchet -IsengardExplosiveMine -IsengardBallista -IsengardBatteringRam -MordorCatapult -MordorBatteringRam -MordorRamCrew -IsengardRamCrew -AngmarTrollSling ;,;
		ShockWaveTaperOff = 0.75
		ShockWaveZMult    = 1.20
	End
End

Weapon BalrogSummoning	;used in the OCL that makes a Balrog.
  ;FireFX                = FX_GondorSwordHit
  RadiusDamageAffects	= ENEMIES
  AttackRange           = 4.0

  DamageNugget                        ; A basic Nugget that just does damage
    Damage        = #MULTIPLY( BALROG_SUMMONING_DAMAGE	0.6 ) ;;,;; Added Multiply for 2.5
    Radius        = 200.0
    DamageType    = MAGIC
    DamageFXType  = FLAME
    DeathType     = BURNED
    DamageScalar  = 0% NONE +MordorBalrog
  End

  DamageNugget	;;,;; Added for 2.5
    Damage        = #MULTIPLY( BALROG_SUMMONING_DAMAGE	0.4 )
    Radius        = 120.0
    DamageType    = MAGIC
    DamageFXType  = FLAME
    DeathType     = BURNED
    DamageScalar  = 0% NONE +MordorBalrog
  End

  MetaImpactNugget                    ; A Nugget that throws things back with force
	KillObjectFilter  = INSTANT_DEATH_ON_METAIMPACT_OBJFILTER
    ShockWaveAmount   = 100
    ShockWaveRadius   = 200.0
    ShockWaveTaperOff = 0.9
    ShockWaveZMult    = 1.20
  End
End

Weapon ShadeWolfSummoning	;used in the OCL that makes a Balrog.
  ;FireFX                = FX_GondorSwordHit
  RadiusDamageAffects	= ENEMIES
  AttackRange           = 4.0
  PreAttackDelay        = 500             ; 300 is mace swing delay time before contact with target.

  DamageNugget                        ; A basic Nugget that just does damage
    Damage        = #MULTIPLY( BALROG_SUMMONING_DAMAGE	0.6 ) ;;,;; Added Multiply for 2.5
    Radius        = 200.0
    DamageType    = MAGIC
    DamageFXType  = FLAME
    DeathType     = NORMAL ;;,;; BURNED
    DamageScalar  = 0% NONE +AngmarShadeWolf ;;,;; 0% NONE +MordorBalrog
  End

  DamageNugget	;;,;; Added for 2.5
    Damage        = #MULTIPLY( BALROG_SUMMONING_DAMAGE	0.4 ) ;;,;; Added Multiply for 2.5
    Radius        = 120.0
    DamageType    = MAGIC
    DamageFXType  = FLAME
    DeathType     = NORMAL ;BURNED
    DamageScalar  = 0% NONE +AngmarShadeWolf ;0% NONE +MordorBalrog
  End


  MetaImpactNugget                    ; A Nugget that throws things back with force
	KillObjectFilter  = INSTANT_DEATH_ON_METAIMPACT_OBJFILTER
    ShockWaveAmount   = 100
    ShockWaveRadius   = 200.0
    ShockWaveTaperOff = 0.9
    ShockWaveZMult    = 1.20
  End
End

Object TomBombadil_Summoned
BountyValue = 1500
RemoveModule ModuleTag_LifetimeUpdate	
End

;======================================================================================================================== Basic units

;----------------------------- Swords
Object AngmarOrcWarrior
  BuildTime          = 2.0
  BuildCost          = 900
  MaxSimultaneousOfType = 1
End

Object MordorFighter
  BuildTime          = 2.0
  BuildCost          = 850
  MaxSimultaneousOfType = 1
End

Object RohanPeasant
  BuildTime          = 2.0
  BuildCost          = 800
  MaxSimultaneousOfType = 1
End

Object GoblinFighter
  BuildTime          = 2.0
  BuildCost          = 950
  MaxSimultaneousOfType = 1
End

Object GondorFighter
  BuildTime          = 2.0
  BuildCost          = 1000
  MaxSimultaneousOfType = 1
End

Object IsengardWildman
  BuildTime          = 2.0
  BuildCost          = 900
  MaxSimultaneousOfType = 1
End

Object MordorCorsairsOfUmbar
  BuildTime          = 2.0
  BuildCost          = 1800
  MaxSimultaneousOfType = 1
  ButtonImage     = WOR_Corsair
End

;----------------------------- Spears

Object RohanSpearmen
  BuildTime          = 2.0
  BuildCost          = 1250
  MaxSimultaneousOfType = 1
End

Object ElvenMithlondSentry
  BuildTime          = 2.0
  BuildCost          = 1300
  MaxSimultaneousOfType = 1
End

Object MordorEasterling
  BuildTime          = 2.0
  BuildCost          = 1350
  MaxSimultaneousOfType = 1
End

Object AngmarRhudaurSpearman
  BuildTime          = 2.0
  BuildCost          = 1400
  MaxSimultaneousOfType = 1
End

;----------------------------- Arrows

Object AngmarRhudaurSlinger
  BuildTime          = 2.0
  BuildCost          = 1650
  MaxSimultaneousOfType = 1
End

Object IsengardWildmanAxe
  BuildTime          = 2.0
  BuildCost          = 1600
  MaxSimultaneousOfType = 1
End

Object GoblinArcher
  BuildTime          = 2.0
  BuildCost          = 1750
  MaxSimultaneousOfType = 1
End

Object GondorArcher
  BuildTime          = 2.0
  BuildCost          = 1800
  MaxSimultaneousOfType = 1
End

Object MordorArcher
  BuildTime          = 2.0
  BuildCost          = 1700
  MaxSimultaneousOfType = 1
End

Object IsengardUrukCrossbow
  BuildTime          = 2.0
  BuildCost          = 1800
  MaxSimultaneousOfType = 1
End

Object DwarvenAxeThrower
  BuildTime          = 2.0
  BuildCost          = 1900
  MaxSimultaneousOfType = 1
End

Object MordorHaradrim
  BuildTime          = 2.0
  BuildCost          = 2000
  MaxSimultaneousOfType = 1
  ButtonImage = UPInn_HaradSpearmanButton
End

;----------------------------- Horses

Object AngmarDireWolf
  BuildTime          = 2.0
  BuildCost          = 1100
  MaxSimultaneousOfType = 1
  ButtonImage = WOR_DireWolvesIcon
End

Object IsengardWargPack
  BuildTime          = 2.0
  BuildCost          = 1200
  MaxSimultaneousOfType = 1
End

Object WildSpiderling
  BuildTime          = 2.0
  BuildCost          = 1400
  MaxSimultaneousOfType = 1
End

Object AngmarWolfRider
  BuildTime          = 2.0
  BuildCost          = 1600
  MaxSimultaneousOfType = 1
End

Object MordorHaradrimRider
  BuildTime          = 2.0
  BuildCost          = 1700
  MaxSimultaneousOfType = 1
End

Object ElvenRivendellLancer
  BuildTime          = 2.0
  BuildCost          = 1800
  MaxSimultaneousOfType = 1
End

Object IsengardWargRider
  BuildTime          = 2.0
  BuildCost          = 1900
  MaxSimultaneousOfType = 1
End

Object GondorCavalry
  BuildTime          = 2.0
  BuildCost          = 2000
  MaxSimultaneousOfType = 1
  ButtonImage = WOR_GondorKnights
End

;----------------------------- Siege

Object IsengardBatteringRam
  BuildTime          = 2.0
  BuildCost          = 1500
  MaxSimultaneousOfType = 1
End

Upgrade Upgrade_ForbiddenPool
    Type            = OBJECT
    BuildCost      = 2500
    BuildTime      = 20
    DisplayName    = UPGRADED:ForbiddenPool
End

;======================================================================================================================== Adept units

;----------------------------- Swords

Object DwarvenGuardian
  BuildTime          = 2.0
  BuildCost          = 1000
  MaxSimultaneousOfType = 1
End

Object ElvenLorienWarrior
  BuildTime          = 2.0
  BuildCost          = 1100
  MaxSimultaneousOfType = 1
End

Object IsengardFighter
  BuildTime          = 2.0
  BuildCost          = 1200
  MaxSimultaneousOfType = 1
End

Object IsengardBeserker
  BuildTime          = 2.0
  BuildCost          = 1300
  MaxSimultaneousOfType = 1
End

Object MordorBlackOrc
  BuildTime          = 2.0
  BuildCost          = 1400
  MaxSimultaneousOfType = 1
End

Object WildMarauderSwords
  BuildTime          = 2.0
  BuildCost          = 1500
  MaxSimultaneousOfType = 1
End

Object AngmarDarkDunedain
  BuildTime          = 2.0
  BuildCost          = 1600
  MaxSimultaneousOfType = 1
  ButtonImage = WOR_DarkNumenorianIcon
  SelectPortrait = KUDarkDunedainPortrait
End

;----------------------------- Spears

Object DwarvenPhalanx
  BuildTime          = 2.0
  BuildCost          = 1200
  MaxSimultaneousOfType = 1
End

Object IsengardPikeman
  BuildTime          = 2.0
  BuildCost          = 1300
  MaxSimultaneousOfType = 1
End

Object WildMarauder
  BuildTime          = 2.0
  BuildCost          = 1400
  MaxSimultaneousOfType = 1
End

Object GondorTowerShieldGuard
  BuildTime          = 2.0
  BuildCost          = 1500
  MaxSimultaneousOfType = 1
End

Object AngmarHillTroll
  BuildTime          = 2.0
  BuildCost          = 1600
  MaxSimultaneousOfType = 1
End

;----------------------------- Arrows

Object ElvenLorienArcher
  BuildTime          = 2.0
  BuildCost          = 1600
  MaxSimultaneousOfType = 1
End

Object RohanHobbit
  BuildTime          = 2.0
  BuildCost          = 1800
  MaxSimultaneousOfType = 1
  ButtonImage = BCInn_Hobbits
End

Object GondorRangerInn
  BuildTime          = 2.0
  BuildCost          = 2000
  MaxSimultaneousOfType = 1
End

Object DwarvenMenOfDale
  BuildTime          = 2.0
  BuildCost          = 2100
  MaxSimultaneousOfType = 1
End

Object MordorHaradrimArcher
  BuildTime          = 2.0
  BuildCost          = 2200
  MaxSimultaneousOfType = 1
End

Object AngmarDarkRanger
  BuildTime          = 2.0
  BuildCost          = 2500
  MaxSimultaneousOfType = 1
End

Object ElvenMirkwoodArcher
  BuildTime          = 2.0
  BuildCost          = 3000
  MaxSimultaneousOfType = 1
End

;----------------------------- Horses

Object GoblinSpiderRider
  BuildTime          = 2.0
  BuildCost          = 1600
  MaxSimultaneousOfType = 1
End

Object DwarvenBattleWagon
  BuildTime          = 2.0
  BuildCost          = 1700
  MaxSimultaneousOfType = 1
End

Object AngmarSnowTroll
  BuildTime          = 2.0
  BuildCost          = 1800
  MaxSimultaneousOfType = 1
End

Object RohanRohirrim
  BuildTime          = 2.0
  BuildCost          = 1900
  MaxSimultaneousOfType = 1
End

Object ElvenRivendellArcher
  BuildTime          = 2.0
  BuildCost          = 2000
  MaxSimultaneousOfType = 1
End

;----------------------------- Siege

Object DwarvenDemolisher
  BuildTime          = 2.0
  BuildCost          = 2000
  MaxSimultaneousOfType = 1
End

Object IsengardBallista
  BuildTime          = 2.0
  BuildCost          = 3000
  MaxSimultaneousOfType = 1
End

Object AngmarTrollSling
  BuildTime          = 2.0
  BuildCost          = 2800
  MaxSimultaneousOfType = 1
End

Object GondorTrebuchet
  BuildTime          = 2.0
  BuildCost          = 2900
  MaxSimultaneousOfType = 1
End

Upgrade Upgrade_ForbiddenPool2
    Type            = OBJECT
    BuildCost      = 3000
    BuildTime      = 25
    DisplayName    = UPGRADED:ForbiddenPool
End

;======================================================================================================================== Elite units

;----------------------------- Swords

Object IsengardFanatic
  BuildTime          = 2.0
  BuildCost          = 2500
  MaxSimultaneousOfType = 1
End

Object DwarvenZerker
  BuildTime          = 2.0
  BuildCost          = 3000
  MaxSimultaneousOfType = 1
End

;----------------------------- Arrows

Object NoldorWarrior
  BuildTime          = 2.0
  BuildCost          = 4500
  MaxSimultaneousOfType = 1
End

;----------------------------- Horses

Object GondorKnightsofDol
  BuildTime          = 2.0
  BuildCost          = 3000
  MaxSimultaneousOfType = 1
End

Object MordorBlackRider
  BuildTime          = 2.0
  BuildCost          = 4000
  MaxSimultaneousOfType = 1
End

;----------------------------- Siege

Object WildMountainGiant
  BuildTime          = 2.0
  BuildCost          = 2000
  MaxSimultaneousOfType = 1
End

Object RohanGenericEnt
  BuildTime          = 2.0
  BuildCost          = 1500
  MaxSimultaneousOfType = 1
End

Object RohanTreeBerd
  BuildTime          = 2.0
  BuildCost          = 2500
  MaxSimultaneousOfType = 1
End

Object MordorCatapult
  BuildTime          = 2.0
  BuildCost          = 3000
  MaxSimultaneousOfType = 1
End

Object DwarvenCatapult
  BuildTime          = 2.0
  BuildCost          = 3500
  MaxSimultaneousOfType = 1
End

;----------------------------- Monsters

Object BarrowWight
  BuildTime          = 2.0
  BuildCost          = 500
  MaxSimultaneousOfType = 1
End

Object GoblinCaveTroll
  BuildTime          = 2.0
  BuildCost          = 1000
  MaxSimultaneousOfType = 1
End

Object MordorDrummerTroll
  BuildTime          = 2.0
  BuildCost          = 1500
  MaxSimultaneousOfType = 1
End

Object MordorAttackTroll
  BuildTime          = 2.0
  BuildCost          = 2000
  MaxSimultaneousOfType = 1
End

Object WildBabyDrake
  BuildTime          = 2.0
  BuildCost          = 3000
  MaxSimultaneousOfType = 1
End

Object AngmarNecromancerBanner
  BuildTime          = 2.0
  BuildCost          = 3600
  MaxSimultaneousOfType = 1
  ButtonImage = WOR_Necromancer
  SelectPortrait = KUNecromancerPortrait
End

Upgrade Upgrade_ForbiddenPool3
    Type            = OBJECT
    BuildCost      = 5000
    BuildTime      = 30
    DisplayName    = UPGRADED:ForbiddenPool
End

;======================================================================================================================== Super units

Object TomBombadil
  BuildTime          = 2.0
  BuildCost          = 2000
  MaxSimultaneousOfType = 1
  BountyValue = 1000
End

Object RohanOathbreaker1
  BuildTime          = 2.0
  BuildCost          = 3000
  MaxSimultaneousOfType = 1
End

Object RohanOathbreakersCavalry
  BuildTime          = 2.0
  BuildCost          = 4000
  MaxSimultaneousOfType = 1
  BountyValue = 2000
End

Object RohanRohirrimArcher
  BuildTime          = 2.0
  BuildCost          = 5000
  MaxSimultaneousOfType = 1
  BountyValue = 2500
End

Object NeutralGollum
  BuildTime          = 2.0
  BuildCost          = 2500
  MaxSimultaneousOfType = 1
  BountyValue = 1250
End

Object WildBatCloud
  BuildTime          = 2.0
  BuildCost          = 3000
  MaxSimultaneousOfType = 1
  BountyValue = 1500
End

Object MordorMumakil
  BuildTime          = 2.0
  BuildCost          = 3500
  MaxSimultaneousOfType = 1
  BountyValue = 1750
End

Object MordorGrond
  BuildTime          = 2.0
  BuildCost          = 4000
  MaxSimultaneousOfType = 1
  BountyValue = 2000
End

Object AngmarShadeWolf
  BuildTime          = 2.0
  BuildCost          = 5000
  MaxSimultaneousOfType = 1
  RemoveModule ModuleTag_LifetimeUpdate
  BountyValue = 2500
End

Object SummonedDragon
  BuildTime          = 2.0
  BuildCost          = 5000
  MaxSimultaneousOfType = 1
  RemoveModule ModuleTag_LifetimeUpdate
  BountyValue = 2500
End

Object MordorBalrog
  BuildTime          = 2.0
  BuildCost          = 6000
  MaxSimultaneousOfType = 1
  RemoveModule ModuleTag_LifetimeUpdate
  BountyValue = 3000
End

Object ElvenGaladriel
  BuildTime          = 2.0
  BuildCost          = 7000
  MaxSimultaneousOfType = 1
  BountyValue = 3500
End

Object MordorSauron
  BuildTime          = 2.0
  BuildCost          = 8000
  MaxSimultaneousOfType = 1
  BountyValue = 4000
End

;=============================================================== Command Buttons ====================================================================

CommandButton Command_UpgradeThrallMasterOrcWarriors
	Command				= UNIT_BUILD
	Object				= AngmarOrcWarrior
	Options				= CANCELABLE
	ButtonBorderType    		= BUILD 
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
End

CommandButton Command_ConstructRohanPeasantHorde
	Command				= UNIT_BUILD
	Object				= RohanPeasant
	Options				= CANCELABLE
	ButtonBorderType    		= BUILD 
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
End

CommandButton Command_ConstructIsengardWildmanHorde
	Command				= UNIT_BUILD
	Object				= IsengardWildman
	Options				= CANCELABLE
	ButtonBorderType    		= BUILD 
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No 
End

CommandButton Command_ConstructGondorFighterHorde
	Command				= UNIT_BUILD
	Object				= GondorFighter
	Options				= CANCELABLE
	ButtonBorderType    		= BUILD 
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No  
End

CommandButton Command_ConstructMordorCorsairsOfUmbarHorde
	Command				= UNIT_BUILD
	Object				= MordorCorsairsOfUmbar
	Options				= CANCELABLE
	ButtonBorderType    		= BUILD 
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
End

CommandButton Command_ConstructElvenMithlondSentryHorde
	Command				= UNIT_BUILD
	Object				= ElvenMithlondSentry
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
End

CommandButton Command_ConstructRohanSpearmenHorde
	Command				= UNIT_BUILD
	Object				= RohanSpearmen
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
End

CommandButton Command_ConstructEasterlingHorde
	Command				= UNIT_BUILD
	Object				= MordorEasterling
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No    
End

CommandButton Command_UpgradeThrallMasterRhudaurSpearmen
	Command				= UNIT_BUILD
	Object				= AngmarRhudaurSpearman
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No    
End

CommandButton Command_ConstructGoblinArcherHorde
	Command				= UNIT_BUILD
	Object				= GoblinArcher
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
End

CommandButton Command_ConstructIsengardUrukCrossbowHorde
	Command				= UNIT_BUILD
	Object				= IsengardUrukCrossbow
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
End

CommandButton Command_ConstructWildSpiderlingHorde
	Command				= UNIT_BUILD
	Object				= WildSpiderling
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
End

CommandButton Command_ConstructMordorHaradrimRiderHorde
	Command				= UNIT_BUILD
	Object				= MordorHaradrimRider
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
End

CommandButton Command_ConstructAngmarDireWolfHorde
	Command				= UNIT_BUILD
	Object				= AngmarDireWolf
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
End

CommandButton Command_ConstructIsengardBatteringRam
	Command				= UNIT_BUILD
	Object				= IsengardBatteringRam
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
End

CommandButton Command_ConstructAngmarDarkDunedainHorde
	Command				= UNIT_BUILD
	Object				= AngmarDarkDunedain
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
End

CommandButton Command_ConstructMordorBlackOrcFighterHorde
	Command				= UNIT_BUILD
	Object				= MordorBlackOrc
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
End

CommandButton Command_ConstructMordorHaradrimArcherHorde
	Command				= UNIT_BUILD
	Object				= MordorHaradrimArcher
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
End

CommandButton Command_ConstructIsengardBerserkerHorde
	Command				= UNIT_BUILD
	Object				= IsengardFanatic
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
End

CommandButton Command_ConstructDwarvenZerkerHorde
	Command				= UNIT_BUILD
	Object				= DwarvenZerker
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
End

CommandButton Command_ConstructWildBabyDrakeHorde
	Command				= UNIT_BUILD
	Object				= WildBabyDrake
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
End

CommandButton Command_ConstructNoldorWarriorHorde
	Command				= UNIT_BUILD
	Object				= NoldorWarrior
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
End

CommandButton Command_ConstructGondorKnightsofDolHorde
	Command				= UNIT_BUILD
	Object				= GondorKnightsofDol
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
End

CommandButton Command_ConstructMordorBlackRiderHorde
	Command				= UNIT_BUILD
	Object				= MordorBlackRider
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
End

CommandButton Command_ConstructWildMarauderHorde
	Command				= UNIT_BUILD
	Object				= WildMarauder
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
End

CommandButton Command_ConstructIsengardBerserker
	Command				= UNIT_BUILD
	Object				= IsengardBeserker
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
End

CommandButton Command_ConstructGoblinTroll
	Command				= UNIT_BUILD
	Object				= GoblinCaveTroll
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
End

CommandButton Command_ConstructMordorDrummerTroll
	Command				= UNIT_BUILD
	Object				= MordorDrummerTroll
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
End

CommandButton Command_ConstructMordorAttackTroll
	Command				= UNIT_BUILD
	Object				= MordorAttackTroll
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
End

CommandButton Command_ConstructDwarvenGuardianHorde
	Command				= UNIT_BUILD
	Object				= DwarvenGuardian
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
End

CommandButton Command_ConstructDwarvenDemolisher
	Command				= UNIT_BUILD
	Object				= DwarvenDemolisher
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
End

CommandButton Command_ConstructMordorOrcFighterHorde
	Command				= UNIT_BUILD
	Object				= MordorFighter
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
End

CommandButton Command_ConstructGoblinFighterHorde
	Command				= UNIT_BUILD
	Object				= GoblinFighter
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
End

CommandButton Command_ConstructMordorOrcArcherHorde
	Command				= UNIT_BUILD
	Object				= MordorArcher
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
End

CommandButton Command_ConstructMordorMumakil
	Command				= UNIT_BUILD
	Object				= MordorMumakil
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
End

CommandButton Command_ConstructIsengardFighterHorde
	Command				= UNIT_BUILD
	Object				= IsengardFighter
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
End

CommandButton Command_ConstructElvenLorienArcherHorde
	Command				= UNIT_BUILD
	Object				= ElvenLorienArcher
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
End

CommandButton Command_ConstructGondorTowerShieldGuardHorde
	Command				= UNIT_BUILD
	Object				= GondorTowerShieldGuard
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
End

CommandButton Command_ConstructMordorHaradrimLancerHordeInn
	Command				= UNIT_BUILD
	Object				= MordorHaradrim
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
End

CommandButton Command_ConstructIsengardWildmanAxeHorde
	Command				= UNIT_BUILD
	Object				= IsengardWildmanAxe
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
End

CommandButton Command_ConstructGondorArcherHorde
	Command				= UNIT_BUILD
	Object				= GondorArcher
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
End

CommandButton Command_UpgradeThrallMasterRhudaurSlingers
	Command				= UNIT_BUILD
	Object				= AngmarRhudaurSlinger
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
End

CommandButton Command_ConstructDwarvenAxeThrowerHorde
	Command				= UNIT_BUILD
	Object				= DwarvenAxeThrower
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
End

CommandButton Command_ConstructInnElvenHobbitShirrif
	Command				= UNIT_BUILD
	Object				= RohanHobbit
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
End

CommandButton Command_ConstructInnGondorRangerHorde
	Command				= UNIT_BUILD
	Object				= GondorRangerInn
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
End

CommandButton Command_ConstructElvenRivendellLancers
	Command				= UNIT_BUILD
	Object				= ElvenRivendellLancer
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
End

CommandButton Command_ConstructGondorKnightHorde
	Command				= UNIT_BUILD
	Object				= GondorCavalry
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
End

CommandButton Command_ConstructIsengardWargPackHorde
	Command				= UNIT_BUILD
	Object				= IsengardWargPack
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
End

CommandButton Command_ConstructIsengardWargRiderHorde
	Command				= UNIT_BUILD
	Object				= IsengardWargRider
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
End

CommandButton Command_UpgradeThrallMasterWolfRiders
	Command				= UNIT_BUILD
	Object				= AngmarWolfRider
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
End

CommandButton Command_ConstructGondorTrebuchet
	Command				= UNIT_BUILD
	Object				= GondorTrebuchet
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
End

CommandButton Command_ConstructIsengardBallista
	Command				= UNIT_BUILD
	Object				= IsengardBallista
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
End

CommandButton Command_ConstructAngmarNecromancerHorde
	Command				= UNIT_BUILD
	Object				= AngmarNecromancerBanner
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
End

CommandButton Command_ConstructElvenLorienWarriorHorde
	Command				= UNIT_BUILD
	Object				= ElvenLorienWarrior
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
End

CommandButton Command_ConstructWildMarauderSwordHorde
	Command				= UNIT_BUILD
	Object				= WildMarauderSwords
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
End

CommandButton Command_ConstructIsengardPikemanHorde
	Command				= UNIT_BUILD
	Object				= IsengardPikeman
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
End

CommandButton Command_ConstructDwarvenPhalanxHorde
	Command				= UNIT_BUILD
	Object				= DwarvenPhalanx
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
End

CommandButton Command_ConstructAngmarHillTrollHorde
	Command				= UNIT_BUILD
	Object				= AngmarHillTroll
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
End

CommandButton Command_ConstructDwarvenMenOfDaleHorde
	Command				= UNIT_BUILD
	Object				= DwarvenMenOfDale
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
End

CommandButton Command_ConstructAngmarDarkRangerHorde
	Command				= UNIT_BUILD
	Object				= AngmarDarkRanger
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
End

CommandButton Command_ConstructElvenMirkwoodArcherHorde
	Command				= UNIT_BUILD
	Object				= ElvenMirkwoodArcher
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
End

CommandButton Command_ConstructWildSpiderRiderHorde
	Command				= UNIT_BUILD
	Object				= GoblinSpiderRider
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
End

CommandButton Command_ConstructRohanRohirrimHorde
	Command				= UNIT_BUILD
	Object				= RohanRohirrim
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
End

CommandButton Command_ConstructElvenRivendellArchers
	Command				= UNIT_BUILD
	Object				= ElvenRivendellArcher
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
End

CommandButton Command_ConstructAngmarSnowTrollHorde
	Command				= UNIT_BUILD
	Object				= AngmarSnowTroll
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
End

CommandButton Command_ConstructDwarvenBattleWagon
	Command				= UNIT_BUILD
	Object				= DwarvenBattleWagon
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
End

CommandButton Command_ConstructWildMountainGiant
	Command				= UNIT_BUILD
	Object				= WildMountainGiant
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
End

CommandButton Command_ConstructMordorCatapult
	Command				= UNIT_BUILD
	Object				= MordorCatapult
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
End

CommandButton Command_ConstructDwarvenCatapult
	Command				= UNIT_BUILD
	Object				= DwarvenCatapult
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
End

CommandButton Command_ConstructBarrowWightFromDefectedLair
	Command				= UNIT_BUILD
	Object				= BarrowWight
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
End

CommandButton Command_SpellBookTomBombadil
	Command				= UNIT_BUILD
	Object				= TomBombadil
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
	TextLabel			= TomBombadil
	DescriptLabel			= RecruitTomBombadil
End

CommandButton Command_SpellBookArmyoftheDead
	Command				= UNIT_BUILD
	Object				= RohanOathbreaker1
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
	TextLabel			= Oathbreakers
	DescriptLabel			= RecruitOathbreakers
End

CommandButton Command_PurchaseSpellArmyoftheDead
	Command				= UNIT_BUILD
	Object				= RohanOathbreakersCavalry
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
	TextLabel			= MountedOathbreakers
	DescriptLabel			= RecruitMountedOathbreakers
End

CommandButton Command_PurchaseSpellFlood
	Command				= UNIT_BUILD
	Object				= RohanRohirrimArcher
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
	TextLabel			= FloodHorse
	DescriptLabel			= RecruitFloodHorse
End

CommandButton Command_ConstructMordorMountainTroll
	Command				= UNIT_BUILD
	Object				= WildBatCloud
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
	TextLabel			= HugeTroll
	DescriptLabel			= RecruitHugeTroll
End

CommandButton Command_ConstructMordorBatteringRam
	Command				= UNIT_BUILD
	Object				= MordorGrond
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
	TextLabel			= CONTROLBAR:ConstructMordorGrond
	DescriptLabel			= CONTROLBAR:ToolTipBuildMordorGrond
End

CommandButton Command_ConstructIsengardExplosiveMine
	Command				= UNIT_BUILD
	Object				= NeutralGollum
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
	TextLabel			= Gollum
	DescriptLabel			= RecruitGollum
End

CommandButton Command_SpellBookDragonAlly
	Command				= UNIT_BUILD
	Object				= SummonedDragon
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
	TextLabel			= Dragon
	DescriptLabel			= RecruitDragon
End

CommandButton Command_PurchaseSpellBalrogAlly
	Command				= UNIT_BUILD
	Object				= MordorBalrog
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
	TextLabel			= Balrog
	DescriptLabel			= RecruitBalrog
End

CommandButton Command_PurchaseSpellSummonShadeOfWolf
	Command				= UNIT_BUILD
	Object				= AngmarShadeWolf
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
	TextLabel			= Shade
	DescriptLabel			= RecruitShade
End

CommandButton Command_SpecialAbilityPhialOfGaladriel
	Command				= UNIT_BUILD
	Object				= ElvenGaladriel
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
	TextLabel			= Galadriel
	DescriptLabel			= RecruitGaladriel
End

CommandButton Command_SpellBookEyeofSauron
	Command				= UNIT_BUILD
	Object				= MordorSauron
	Options				= CANCELABLE
	ButtonBorderType		= BUILD
	Radial				= Yes
	InPalantir	   		= Yes
	ShowProductionCount		= No
	TextLabel			= SauronLabel
	DescriptLabel			= RecruitSauron
End

CommandButton Command_PurchaseTechnologyDwarvenForgedBlades
	Command                 = PUSH_VISIBLE_COMMAND_RANGE
	Options			= CANCELABLE
	TextLabel               = Melee
	ButtonBorderType        = SYSTEM 
	DescriptLabel           = ChooseMelee
	Radial                  = Yes
	InPalantir		= No
	CommandRangeStart	= 3
	CommandRangeCount	= 20
End

CommandButton Command_PurchaseTechnologyDwarvenFireArrows
	Command                 = PUSH_VISIBLE_COMMAND_RANGE
	Options			= CANCELABLE
	TextLabel               = Archers
	ButtonBorderType        = SYSTEM 
	DescriptLabel           = ChooseArchers
	Radial                  = Yes
	InPalantir		= No
	CommandRangeStart	= 23
	CommandRangeCount	= 9
End

CommandButton Command_PurchaseTechnologyGondorForgedBlades
	Command                 = PUSH_VISIBLE_COMMAND_RANGE
	Options			= CANCELABLE
	TextLabel               = Melee
	ButtonBorderType        = SYSTEM 
	DescriptLabel           = ChooseMelee
	Radial                  = Yes
	InPalantir		= No
	CommandRangeStart	= 3
	CommandRangeCount	= 18
End

CommandButton Command_PurchaseTechnologyElvenSilverthornArrows
	Command                 = PUSH_VISIBLE_COMMAND_RANGE
	Options			= CANCELABLE
	TextLabel               = Archers
	ButtonBorderType        = SYSTEM 
	DescriptLabel           = ChooseArchers
	Radial                  = Yes
	InPalantir		= No
	CommandRangeStart	= 21
	CommandRangeCount	= 12
End

CommandButton Command_PurchaseTechnologyMordorForgedBlades
	Command                 = PUSH_VISIBLE_COMMAND_RANGE
	Options			= CANCELABLE
	TextLabel               = Melee
	ButtonBorderType        = SYSTEM 
	DescriptLabel           = ChooseMelee
	Radial                  = Yes
	InPalantir		= No
	CommandRangeStart	= 3
	CommandRangeCount	= 9
End

CommandButton Command_PurchaseTechnologyDwarvenFlamingShot
	Command                 = PUSH_VISIBLE_COMMAND_RANGE
	Options			= CANCELABLE
	Upgrade			= Upgrade_AllFactionUpgrade
	TextLabel               = Archers
	ButtonBorderType        = SYSTEM 
	DescriptLabel           = ChooseArchers
	Radial                  = Yes
	InPalantir		= No
	CommandRangeStart	= 12
	CommandRangeCount	= 9
End

CommandButton Command_PurchaseSpellScavenger
	Command                 = PUSH_VISIBLE_COMMAND_RANGE
	Options			= CANCELABLE
	TextLabel               = Supers
	ButtonBorderType        = SYSTEM 
	DescriptLabel           = ChooseSupers
	Radial                  = Yes
	InPalantir		= No
	CommandRangeStart	= 3
	CommandRangeCount	= 13
End

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

CommandButton Command_PurchaseUpgradeArnorElvenBarracksLevel2
   Command           	= OBJECT_UPGRADE
   Upgrade           	= Upgrade_ForbiddenPool
   Options           	= CANCELABLE
   TextLabel         	= CONTROLBAR:PurchaseUpgradeForbiddenPool
   ButtonImage       	= UCCommon_UpgradeStructureNew
   ButtonBorderType	= BUILD
   DescriptLabel     	= UPGRADE:ForbiddenPool
   Radial            	= Yes
   InPalantir        	= Yes
End

CommandButton Command_PurchaseUpgradeArnorElvenBarracksLevel3
   Command           	= OBJECT_UPGRADE
   Upgrade           	= Upgrade_ForbiddenPool2
   Options           	= CANCELABLE
   TextLabel         	= CONTROLBAR:PurchaseUpgradeForbiddenPool
   ButtonImage      	= UCCommon_UpgradeStructureNew
   ButtonBorderType	= BUILD
   DescriptLabel     	= UPGRADE:ForbiddenPool2
   Radial            	= Yes
   InPalantir        	= Yes
End

CommandButton Command_PurchaseUpgradeElvenBarracksLevel3
   Command           	= OBJECT_UPGRADE
   Upgrade           	= Upgrade_ForbiddenPool3
   Options           	= CANCELABLE
   TextLabel         	= CONTROLBAR:PurchaseUpgradeForbiddenPool
   ButtonImage      	= UCCommon_UpgradeStructureNew
   ButtonBorderType	= BUILD
   DescriptLabel     	= UPGRADE:ForbiddenPool3
   Radial            	= Yes
   InPalantir        	= Yes
End

CommandSet ForbiddenPoolBasic
InitialVisible = 3

  1 = Command_PurchaseTechnologyDwarvenForgedBlades
  2 = Command_PurchaseTechnologyDwarvenFireArrows
  3 = Command_PurchaseUpgradeArnorElvenBarracksLevel2

;;;;	Melee
  4 = Command_ConstructMordorOrcFighterHorde
  5 = Command_UpgradeThrallMasterOrcWarriors
  6 = Command_ConstructIsengardWildmanHorde
  7 = Command_ConstructGoblinFighterHorde
  8 = Command_ConstructGondorFighterHorde
  9 = Command_ConstructMordorCorsairsOfUmbarHorde
 10 = Command_ConstructRohanSpearmenHorde
 11 = Command_ConstructElvenMithlondSentryHorde
 12 = Command_ConstructEasterlingHorde
 13 = Command_UpgradeThrallMasterRhudaurSpearmen
 14 = Command_ConstructAngmarDireWolfHorde
 15 = Command_ConstructIsengardWargPackHorde
 16 = Command_ConstructWildSpiderlingHorde
 17 = Command_UpgradeThrallMasterWolfRiders
 18 = Command_ConstructMordorHaradrimRiderHorde
 19 = Command_ConstructElvenRivendellLancers
 20 = Command_ConstructIsengardWargRiderHorde
 21 = Command_ConstructGondorKnightHorde
 22 = Command_ConstructIsengardBatteringRam
 23 = Command_RadialBack

;;;;	Ranged
 24 = Command_ConstructIsengardWildmanAxeHorde
 25 = Command_UpgradeThrallMasterRhudaurSlingers
 26 = Command_ConstructMordorOrcArcherHorde
 27 = Command_ConstructGoblinArcherHorde
 28 = Command_ConstructGondorArcherHorde
 29 = Command_ConstructIsengardUrukCrossbowHorde
 30 = Command_ConstructDwarvenAxeThrowerHorde
 31 = Command_ConstructMordorHaradrimLancerHordeInn
 32 = Command_RadialBack

End


CommandSet ForbiddenPoolAdept
InitialVisible = 3

  1 = Command_PurchaseTechnologyGondorForgedBlades
  2 = Command_PurchaseTechnologyElvenSilverthornArrows
  3 = Command_PurchaseUpgradeArnorElvenBarracksLevel3

;;;;	Melee
  4 = Command_ConstructDwarvenGuardianHorde
  5 = Command_ConstructElvenLorienWarriorHorde
  6 = Command_ConstructIsengardFighterHorde
  7 = Command_ConstructIsengardBerserker
  8 = Command_ConstructMordorBlackOrcFighterHorde
  9 = Command_ConstructWildMarauderSwordHorde
 10 = Command_ConstructAngmarDarkDunedainHorde
 11 = Command_ConstructDwarvenPhalanxHorde
 12 = Command_ConstructIsengardPikemanHorde
 13 = Command_ConstructWildMarauderHorde
 14 = Command_ConstructGondorTowerShieldGuardHorde
 15 = Command_ConstructAngmarHillTrollHorde
 16 = Command_ConstructWildSpiderRiderHorde
 17 = Command_ConstructDwarvenBattleWagon
 18 = Command_ConstructAngmarSnowTrollHorde
 19 = Command_ConstructRohanRohirrimHorde
 20 = Command_ConstructDwarvenDemolisher
 21 = Command_RadialBack

;;;;	Ranged
 22 = Command_ConstructElvenLorienArcherHorde
 23 = Command_ConstructInnElvenHobbitShirrif
 24 = Command_ConstructInnGondorRangerHorde
 25 = Command_ConstructDwarvenMenOfDaleHorde
 26 = Command_ConstructMordorHaradrimArcherHorde
 27 = Command_ConstructAngmarDarkRangerHorde
 28 = Command_ConstructElvenMirkwoodArcherHorde
 29 = Command_ConstructElvenRivendellArchers
 30 = Command_ConstructAngmarTrollSling
 31 = Command_ConstructGondorTrebuchet
 32 = Command_ConstructIsengardBallista
 33 = Command_RadialBack

End


CommandSet ForbiddenPoolElite
InitialVisible = 3

  1 = Command_PurchaseTechnologyMordorForgedBlades
  2 = Command_PurchaseTechnologyDwarvenFlamingShot
  3 = Command_PurchaseUpgradeElvenBarracksLevel3

;;;;	Melee
  4 = Command_ConstructBarrowWightFromDefectedLair
  5 = Command_ConstructIsengardBerserkerHorde
  6 = Command_ConstructDwarvenZerkerHorde
  7 = Command_ConstructWildBabyDrakeHorde
  8 = Command_ConstructGondorKnightsofDolHorde
  9 = Command_ConstructMordorBlackRiderHorde
 10 = Command_ConstructMordorDrummerTroll
 11 = Command_ConstructMordorAttackTroll
 12 = Command_RadialBack

;;;;	Ranged
 13 = Command_ConstructNoldorWarriorHorde
 14 = Command_ConstructGoblinTroll
 15 = Command_ConstructEntGeneric
 16 = Command_ConstructWildMountainGiant
 17 = Command_ConstructEntTreeBeard
 18 = Command_ConstructMordorCatapult
 19 = Command_ConstructDwarvenCatapult
 20 = Command_ConstructAngmarNecromancerHorde
 21 = Command_RadialBack

End


CommandSet ForbiddenPoolSuper
InitialVisible = 3

  1 = Command_PurchaseSpellScavenger

;;;;	Melee
  4 = Command_SpellBookTomBombadil
  5 = Command_SpellBookArmyoftheDead
  6 = Command_PurchaseSpellArmyoftheDead
  7 = Command_PurchaseSpellFlood
  8 = Command_ConstructIsengardExplosiveMine
  9 = Command_ConstructMordorBatteringRam
 10 = Command_ConstructMordorMumakil
 11 = Command_ConstructMordorMountainTroll
 12 = Command_PurchaseSpellSummonShadeOfWolf
 13 = Command_SpellBookDragonAlly
 14 = Command_PurchaseSpellBalrogAlly
 15 = Command_SpecialAbilityPhialOfGaladriel
 16 = Command_SpellBookEyeofSauron

End

Object GondorForbiddenPool
CommandSet = ForbiddenPoolBasic
ReplaceModule ModuleTag_07
  Behavior = QueueProductionExitUpdate ModuleTag_07_NEW
    UnitCreatePoint    = X:0.0 Y:0.0 Z:0.0
    NaturalRallyPoint  = X:100.0 Y:60.0 Z:0.0
    ExitDelay = 300
  End
End
AddModule
	Behavior = CommandSetUpgrade ModuleTag_UpgradePool
	TriggeredBy      = Upgrade_ForbiddenPool
	ConflictsWith    = Upgrade_ForbiddenPool2
	CommandSet       = ForbiddenPoolAdept
	End
End
AddModule
	Behavior = CommandSetUpgrade ModuleTag_UpgradePool2
	TriggeredBy      = Upgrade_ForbiddenPool2
	ConflictsWith    = Upgrade_ForbiddenPool3
	CommandSet       = ForbiddenPoolElite
	End
End
AddModule
	Behavior = CommandSetUpgrade ModuleTag_UpgradePool3
	TriggeredBy      = Upgrade_ForbiddenPool3
	CommandSet       = ForbiddenPoolSuper
	End
End
End

;--------------------------------- New Heroes ---------------------------------
; Thranduil

Armor HeroLightArmor
  Armor = DEFAULT          45%
  Armor = SLASH            35%
  Armor = PIERCE           35%
  Armor = SPECIALIST       35%
  Armor = CRUSH             15%
  Armor = CAVALRY	   60%
  Armor = SIEGE            50%
  Armor = FLAME            35%
  Armor = FROST           45%
  Armor = MAGIC           80%	; 100%
  Armor = HERO            100%
  Armor = HERO_RANGED     50%	; 100%
  Armor = POISON	  100% 
  Armor = STRUCTURAL	   50%	
End

; Aragorn, Gandalf, Lurtz, Saruman, Gorkil (on foot)

Armor HeroArmor
  Armor = DEFAULT         25%   
  Armor = SLASH           25%   
  Armor = PIERCE          25%   
  Armor = SPECIALIST      25%   
  Armor = CRUSH           10%   
  Armor = CAVALRY	  25% 
  Armor = SIEGE           50%   
  Armor = FLAME           25%   
  Armor = FROST           25%
  Armor = MAGIC           50%   ; 75%  
  Armor = HERO            50%   ; 75%  
  Armor = HERO_RANGED     20%	; 75%  
  Armor = POISON	  75% 
  Armor = STRUCTURAL	  50%	
  
End

; Gimli

Armor ToughHeroArmor
  Armor = DEFAULT          15%   
  Armor = SLASH            15%   
  Armor = PIERCE           15%   
  Armor = SPECIALIST       15%   
  Armor = CRUSH            10%   
  Armor = CAVALRY	   15% 
  Armor = SIEGE            25%   
  Armor = FLAME            25%   
  Armor = FROST            25%
  Armor = MAGIC            30%   ; 50%
  Armor = HERO             10%   ; 50%  
  Armor = HERO_RANGED      10%   ; 50%  
  Armor = POISON	   50% 
  Armor = STRUCTURAL	   50%

End

; Gorkil (mounted)

Armor HeroArmorMounted
  Armor = DEFAULT          50%   
  Armor = SLASH            50%   
  Armor = PIERCE           50%   
  Armor = SPECIALIST      100%   
  Armor = CRUSH             10%   
  Armor = CAVALRY	   25% 
  Armor = SIEGE            50%   
  Armor = FLAME            25%   
  Armor = FROST            25%
  Armor = MAGIC           50%   ; 100%
  Armor = HERO             50%   
  Armor = HERO_RANGED      50%   
  Armor = POISON	   75% 
  Armor = STRUCTURAL	   50%	
    
  FlankedPenalty 	 = 50%    
End

; WitchKing

Armor DismountedNazgulArmor
  Armor = DEFAULT         25%   
  Armor = SLASH           40%
  Armor = PIERCE          20%
  Armor = SPECIALIST      30%
  Armor = CRUSH           50%
  Armor = CAVALRY	  25% 
  Armor = SIEGE           50%   
  Armor = FLAME           50%
  Armor = FROST           1%
  Armor = MAGIC           45%
  Armor = HERO            75%   
  Armor = HERO_RANGED     120%   
  Armor = POISON	  50%
  Armor = STRUCTURAL	  50%
  Armor = LOGICAL_FIRE	50%

End

;;;;;;;;;;;;;;;;;;;;;;;;
;;;                  ;;;
;;;     SARUMAN      ;;;
;;;                  ;;;
;;;;;;;;;;;;;;;;;;;;;;;;

Weapon SarumanWeapon
  LeechRangeWeapon      = Yes
  AttackRange           = 10.0
  RadiusDamageAffects   = ENEMIES NOT_SIMILAR
  MeleeWeapon           = Yes
  FireFX                = FX_GandalfSwordHit
  DelayBetweenShots     = SARUMAN_DELAYBETWEENSHOTS 			; time between shots, msec
  PreAttackDelay        = 1100 	; 400 is sword swing delay time before contact with target.
  PreAttackType         = PER_SHOT ; Do the delay each time we attack a new target
  FiringDuration        = SARUMAN_FIRINGDURATION 	; Duration of the sword swing
	DamageNugget                        ; A basic Nugget that just does damage
		Damage			= 200
		DamageArc 		= 200
		Radius			= 27.0
		DamageType		= HERO
		DamageFXType		= MAGIC
		DeathType		= EXPLODED
		DamageSpeed		= 0.0 ; must match the ShockWaveSpeed below
	End
	MetaImpactNugget                    ; A Nugget that throws things back with force
		HeroResist	  = 0.78
		ShockWaveAmount   = 50.0
		ShockWaveArc	  = 200
		ShockWaveRadius   = 27.0
		ShockWaveTaperOff = 1.0
		ShockWaveZMult    = 1.5
		ShockWaveSpeed	  = 0.0
	End
End

FXParticleSystem ChillWindWhirl1
  System
    Priority = VERY_LOW_OR_ABOVE
    ParticleName = EXTornadoSwirl.tga
    Lifetime = 55 55
    SystemLifetime = 30
    Size = 100 400
    BurstDelay = 2 4
    BurstCount = 1 2
    IsGroundAligned = Yes
  End
  Color = DefaultColor
    Color2 = R:215 G:215 B:215 5
    Color3 = R:203 G:179 B:253 30
    Color4 = R:222 G:230 B:250 45
    Color5 = R:0 G:0 B:0 55
  End
  Update = DefaultUpdate
    SizeRate = 1 -6
    SizeRateDamping = 0.95 0.98
    AngleZ = -7 7
    AngularRateZ = 0 0.15
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
  End
  EmissionVelocity = OrthoEmissionVelocity
    Z = 0 0.1
  End
  EmissionVolume = LineEmissionVolume
    EndPoint = X:0 Y:0 Z:30
  End
  Draw = DefaultDraw
  End
End

FXList FX_TelekinesisAtBoneSaruman
	FXListAtBonePos
		FX = FX_TelekinesisSaruman
		BoneName = STAFFFX
	End
	Sound
	    Name = SarumanWizardBlast
	End
  ParticleSystem
    Name = ChillWindWhirl1
    Offset = X:0.0 Y:0.0 Z:10.0
  End
  ParticleSystem
    Name = ChillWindMist
    Offset = X:0.0 Y:0.0 Z:10.0
  End
  ParticleSystem
    Name = ChillWindEmbers
    Offset = X:0.0 Y:0.0 Z:8.0
  End
End

Weapon SarumanWizardBlast
	IdleAfterFiringDelay = 0
	LeechRangeWeapon	 = Yes
	AttackRange = 100
	WeaponSpeed = 401         ; dist/sec 
	RadiusDamageAffects	  = ENEMIES NEUTRALS ALLIES NOT_SIMILAR
	DelayBetweenShots	  = 5000               ; time between shots, msec
	PreAttackDelay        = 1
	PreAttackType         = PER_ATTACK ; Do the delay each time we attack a new target
	FireFX                = FX_TelekinesisAtBoneSaruman FX_ComeToMe
	FiringDuration        = 100
	DamageDealtAtSelfPosition = Yes 
	IsAimingWeapon		= Yes
	AcceptableAimDelta	= 0
	AntiAirborneVehicle	= No
	AntiAirborneMonster	= No

	DamageNugget
		Damage			= 500
		DamageArc 		= 75
		Radius			= 110.0
		DamageType		= MAGIC
		DamageFXType	= MAGIC
		DeathType		= EXPLODED
		DamageSpeed		= 700.0 ; must match the ShockWaveSpeed below
		DamageScalar = 0% ANY ALLIES
	End
	MetaImpactNugget
		ShockWaveAmount   = 70.0
		ShockWaveArc	  = 75
		ShockWaveRadius   = 110.0
		ShockWaveTaperOff = 0.75
		ShockWaveZMult    = 1.000
		ShockWaveSpeed	  = 700.0 
	End
	MetaImpactNugget
		InvertShockWave   = Yes
		ShockWaveAmount   = 100
		ShockWaveArc	  = 5
		ShockWaveRadius   = 520
		ShockWaveTaperOff = 0.8
		ShockWaveZMult    = 0.6
		ShockWaveSpeed	  = 900.0
		AffectHordes	  = No
		CyclonicFactor	  = 0.0
		SpecialObjectFilter = ANY +HERO +MONSTER ALLIES ENEMIES -BIG_MONSTER -MordorSauron -MordorSauron_RingHero -ElvenGaladriel -ElvenGaladriel_RingHero 
	End
	MetaImpactNugget
		InvertShockWave   = No
		ShockWaveAmount   = 100
		ShockWaveArc	  = 180
		ShockWaveRadius   = 25
		ShockWaveTaperOff = 1
		ShockWaveZMult    = 0.5
		ShockWaveSpeed	  = 900.0
		AffectHordes	  = No
		CyclonicFactor	  = 0.0
		SpecialObjectFilter = ANY +HERO +MONSTER ENEMIES -BIG_MONSTER -MordorSauron -MordorSauron_RingHero -ElvenGaladriel -ElvenGaladriel_RingHero 
	End
End

CommandButton Command_SpecialAbilityIsengardWizardBlast
  Command                 = SPECIAL_POWER 
  SpecialPower            = SpecialPowerTelekeneticPush
  Options                 = NEED_TARGET_ENEMY_OBJECT NEED_TARGET_ALLY_OBJECT
  TextLabel               = ComeToMe
  ButtonImage             = HPSarumanWizardBlast
  ButtonBorderType        = ACTION 
  DescriptLabel           = Describe:ComeToMe
  CursorName              = EvilAbilityObj
  InvalidCursorName       = GenericInvalid
  AutoAbility			  = Yes
  PresetRange			  = 500.0
  InPalantir			  = Yes
End

FXList FX_BlackHole
	CameraShakerVolume
		Radius = 1000			; Radius needs to encompass camera position, not camera lookat position
		Duration_Seconds = 2.5
		Amplitude_Degrees = 0.8
	End
	ParticleSystem
		Name = MeteorExp
		Offset = X:0.0 Y:0.0 Z:15.0
		OnlyIfOnLand = Yes
	End
	ParticleSystem
		Name = MeteorExp02
		Offset = X:0.0 Y:0.0 Z:15.0
		OnlyIfOnLand = Yes
	End
	ParticleSystem
		Name = MeteorExp03
		Offset = X:0.0 Y:0.0 Z:15.0
		OnlyIfOnLand = Yes
	End
	
	TerrainScorch
		Type = RANDOM
		Weather = NORMAL
		RandomRange = X:0 Y:3
		Radius = 140	
	End
  
	TerrainScorch
		Type = RANDOM
		Weather = SNOWY
		RandomRange = X:4 Y:6
		Radius = 140
	End
	
	DynamicDecal           ; A decal that belongs to nobody, but updates internally to fade and tint and such
                DecalName                   = EXScorch03
                Size                              = 400
                Color                             = R:250 G:240 B:230
                OpacityStart                  = 0
                OpacityFadeTimeOne     = 5000
                OpacityPeak                             = 215
                OpacityPeakTime                      = 10000
                OpacityFadeTimeTwo     = 20000
                OpacityEnd                               = 0
                StartingDelay     = 0
                Lifetime             = 29000
	End
	
	Sound
		Name = GorgorothSpireFireballPlume
	End
End

SpecialPower SpecialAbilityPowerOf7th
	Enum			= SPECIAL_WORD_OF_POWER
	ReloadTime		= 180000
	PublicTimer		= No
End

Weapon BlackHoleWeapon
	IdleAfterFiringDelay = 0
	AttackRange = 160
	MinimumAttackRange = 0.8
	WeaponSpeed = 401         ; dist/sec 
	MinWeaponSpeed = 241
	MaxWeaponSpeed = 601
	ScaleWeaponSpeed = Yes
	RadiusDamageAffects = ENEMIES NEUTRALS ALLIES
	DelayBetweenShots = 5000
	PreAttackType         = PER_ATTACK
	PreAttackFX           = FX_GandalfPreAttackBlastReal
        FireFX		    = FX_BlackHole
	FiringDuration      = 1400
      ClearNuggets
	FireLogicNugget
		LogicType		= INCREASE_FUEL
		Radius			= 50
		Damage			= 400
		MinMaxBurnRate	= 12
		MaxResistance	= 5
	End
	
	FireLogicNugget ;//@@@ fire logic testing
		LogicType	=	INCREASE_BURN_RATE
		Radius		=	50
		Damage		=	5
	End

	DamageNugget                        ; A basic Nugget that just does damage to trigger explosive mine
		Damage        = 1
		Radius        = 150
		DamageType    = FLAME
		DamageFXType  = FLAME
		DeathType     = BURNED
		DamageSpeed		= 700.0
		DamageScalar  = 50000% NONE +MINE ; Make sure we one shot kill mines, without risking wasting some poor hero with a torch
	End

	DamageNugget                        ; A basic Nugget that just does damage
	    Damage		= 200
	    Radius		= 160
	    DelayTime		= 0
	    DamageType		= FLAME
	    DamageFXType	= BIG_ROCK
	    DeathType		= BURNED
		DamageSpeed		= 700.0
	    AcceptDamageAdd = Yes
		DamageScalar  = 300% ANY +HERO +MONSTER
	End
	DamageNugget                        ; A basic Nugget that just does damage
	    Damage		= 800
	    Radius		= 60
	    DelayTime		= 0
	    DamageType		= FLAME
	    DamageFXType	= BIG_ROCK
	    DeathType		= BURNED
		DamageSpeed		= 700.0
	    AcceptDamageAdd = Yes
		DamageScalar  = 300% ANY +HERO +MONSTER
	End

	MetaImpactNugget
		ShockWaveAmount		= 100.0
		ShockWaveRadius		= 160.0
		ShockWaveTaperOff	= 0.7
		ShockWaveZMult		= 1.40	
		ShockWaveSpeed	  = 700.0 	
	End
End

CommandButton Command_SpecialAbilityIgnite
  Command                 = SPECIAL_POWER 
  SpecialPower            = SpecialAbilityPowerOf7th
  Options                 = NONE
  TextLabel               = FireWave
  ButtonImage             = Gandolf_radcircle
  ButtonBorderType        = ACTION 
  DescriptLabel           = Describe:FireWave
  AutoAbility			  = Yes
  PresetRange			  = 120.0
  UnitSpecificSound       	= SarumanVoiceAttackFireball
  InPalantir			  = Yes
End

CommandSet Saruman
	1	= Command_ToggleStance
	2	= Command_SpecialAbilityIsengardWizardBlast
	3	= Command_SarumanFireball
	4	= Command_SarumanThunderBolt
	5	= Command_SpecialAbilityDominateEnemy
	6  	= Command_SpecialAbilityIgnite
	12	= Command_CaptureBuilding
	13	= Command_AttackMove
	14	= Command_Stop
	16  = Command_SetStanceBattle
	17  = Command_SetStanceAggressive
	18  = Command_SetStanceHoldGround
End

Object IsengardSaruman
CommandSet = Saruman
ReplaceModule ModuleTag_WizardBlastUpdate
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_WizardBlastUpdate_NEW
		SpecialPowerTemplate		= SpecialPowerTelekeneticPush
		WhichSpecialWeapon		    = 2 ;
		SkipContinue				= Yes
		UnpackTime				= 700
		PreparationTime				= 1   
		PersistentPrepTime			= 1000
		PackTime				= 500
		
		AwardXPForTriggering		= 0
		StartAbilityRange			= 500.0
		MustFinishAbility			= Yes
		SpecialWeapon				= SarumanWizardBlast
	End
End
ReplaceModule ModuleTag_IstariLightEnabler
 	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_EnableAtLevel10
		SpecialPowerTemplate	= SpecialAbilityPowerOf7th
		TriggeredBy		= Upgrade_SarumanDominate
	End
End
ReplaceModule ModuleTag_DominateEnabler
 	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_EnableAtLevel4
		SpecialPowerTemplate	= SpecialAbilityLightingBolt
		TriggeredBy		= Upgrade_SarumanSpeechCraft
	End
End
ReplaceModule ModuleTag_KingsFavorEnabler
 	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_EnableAtLevel5
		SpecialPowerTemplate	= SpecialAbilityDominateEnemy
		TriggeredBy		= Upgrade_SarumanThunderBolt
	End
End
      AddModule
	Behavior = SpecialPowerModule ModuleTag_WordStarter
		SpecialPowerTemplate		= SpecialAbilityPowerOf7th
		UpdateModuleStartsAttack	= Yes
		StartsPaused			= Yes
		InitiateSound			= SarumanVoiceAttackFireball
	End    
End
      AddModule
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_WordWeaponFireUpdate   
		SpecialPowerTemplate    = SpecialAbilityPowerOf7th
		WhichSpecialWeapon		= 3
		SkipContinue			= Yes
		UnpackTime              = 2500 
		PackTime                = 2500
		FreezeAfterTriggerDuration = 2500
		AwardXPForTriggering    = 0		
		StartAbilityRange		= 80.0
		SpecialWeapon			= BlackHoleWeapon
	End
End
ReplaceModule ModuleTag_SarumanHealing
	Behavior = AutoHealBehavior ModuleTag_SarumanHealing_FAST
		StartsActive = Yes
		HealingAmount = 100
		HealingDelay = 1000
		StartHealingDelay = HERO_HEAL_DELAY
		HealOnlyIfNotInCombat = Yes
	End
End
End

;;;;;;;;;;;;;;;;;;;;;;;;
;;;                  ;;;
;;;     GANDALF      ;;;
;;;                  ;;;
;;;;;;;;;;;;;;;;;;;;;;;;

Weapon GandalfSword
  LeechRangeWeapon      = Yes
  AttackRange           = 10.0
  RadiusDamageAffects   = ENEMIES NOT_SIMILAR
  MeleeWeapon           = Yes
  FireFX                = FX_GandalfSwordHit
  DelayBetweenShots     = 767 			; time between shots, msec
  PreAttackDelay        = 533
  PreAttackType         = PER_SHOT ; Do the delay each time we attack a new target
  FiringDuration        = 800	; Duration of the sword swing
	DamageNugget                        ; A basic Nugget that just does damage
		Damage			= 50
		DamageArc 		= 300
		Radius			= 25.0
		DamageType		= HERO
		DamageFXType	= MAGIC
		DeathType		= EXPLODED
		DamageSpeed		= 0.0
	End
	DamageNugget                        ; A basic Nugget that just does damage
		Damage        = 50	
		DamageArc 		= 200
		Radius			= 33.0
		DamageType    = FLAME
		DamageFXType  = FIRE1
		DeathType     = BURNED
		DamageSpeed		= 0.0
	End
	MetaImpactNugget                    ; A Nugget that throws things back with force
		HeroResist	  = 0.82
		ShockWaveAmount   = 35.0
		ShockWaveArc	  = 280
		ShockWaveRadius   = 20.0
		ShockWaveTaperOff = 1.25
		ShockWaveZMult    = 0.8
		ShockWaveSpeed	  = 0.0
	End
End

Object GondorGandalf
ShockwaveResistance = 34
ReplaceModule ModuleTag_GandalfHealing
	Behavior = AutoHealBehavior ModuleTag_GandalfHealing_FAST
		StartsActive = Yes
		HealingAmount = 100
		HealingDelay = 1000
		StartHealingDelay = HERO_HEAL_DELAY
		HealOnlyIfNotInCombat = Yes
	End
End
End

;;;;;;;;;;;;;;;;;;;;;;;;
;;;                  ;;;
;;;     ARAGORN      ;;;
;;;                  ;;;
;;;;;;;;;;;;;;;;;;;;;;;;

Weapon GondorAragornSword
  LeechRangeWeapon      = Yes
  AttackRange           = 10.0
  MeleeWeapon           = Yes
  FireFX                = FX_GondorSwordHit
  DelayBetweenShots     = ARAGORN_DELAYBETWEENSHOTS 		; time between shots, msec
  PreAttackDelay        = ARAGORN_PREATTACKDELAY 			; 400 is sword swing delay time before contact with target.
  PreAttackType         = PER_SHOT						; Do the delay each time we attack a new target
  FiringDuration        = ARAGORN_FIRINGDURATION 			; Duration of the sword swing

  	RadiusDamageAffects = ENEMIES NEUTRALS

  DamageNugget												; A basic Nugget that just does damage
    Damage        = 400
    DamageScalar  = 50000% NONE +RohanOathbreaker
    Radius        = 20.0
    DamageArc 	  = 70.0
    DelayTime     = 0.0
    DamageType		= HERO
    DamageFXType  = SWORD_SLASH
    DeathType     = NORMAL
  End
  DamageNugget                        ; A basic Nugget that just does damage
    Damage        = 200					
    Radius        = 15.0
    DelayTime     = 0
    DamageType    = HERO
    DamageFXType  = SWORD_SLASH
    DeathType     = NORMAL
    DamageArc	  = 90
  End
End

;------------------------------------------------------------------------------
Weapon GondorAragornHeroSword
	LeechRangeWeapon	= Yes
	AttackRange			= STANDARD_MELEE_ATTACK_RANGE
	MeleeWeapon			= Yes
  
	DelayBetweenShots     = ARAGORN_DELAYBETWEENSHOTS 		; time between shots, msec
	PreAttackDelay        = ARAGORN_PREATTACKDELAY 			; 400 is sword swing delay time before contact with target.
	PreAttackType         = PER_SHOT						; Do the delay each time we attack a new target
	FireFX                = FX_GondorSwordHit
	FiringDuration        = ARAGORN_FIRINGDURATION 			; Duration of the sword swing

  	RadiusDamageAffects = ENEMIES NEUTRALS

	DamageNugget												; A basic Nugget that just does damage
		Damage			= 400
    		DamageScalar  		= 50000% NONE +RohanOathbreaker
		Radius			= 24.0
		DamageArc 		= 180.0
		DelayTime		= 0.0
		DamageType		= HERO
    		DamageFXType  		= MAGIC
		DeathType		= EXPLODED
	End
  DamageNugget                        ; A basic Nugget that just does damage
    Damage        = 200					
    Radius        = 15.0
    DelayTime     = 0
    DamageType    = HERO
    DamageFXType  = SWORD_SLASH
    DeathType     = NORMAL
    DamageArc	  = 90
  End
End

CommandButton Command_SpecialAbilityAthelas
  Command                 	= SPECIAL_POWER 
  SpecialPower            	= SpecialAbilityAragornAthelas
  TextLabel               	= CONTROLBAR:Athelas
  ButtonImage             	= HSAragornAthelas
  CursorName              	= Bombard
  RadiusCursorType        	= AthelasRadiusCursor
  InvalidCursorName       	= GenericInvalid
  ButtonBorderType        	= ACTION 
  DescriptLabel           	= CONTROLBAR:ToolTipAthelas
  InPalantir			= Yes
  AutoAbility			= Yes
  PresetRange			= 100.0
  NeedDamagedTarget		= Yes
End

CommandButton Command_SpecialAbilityElendil
  Command                 	= SPECIAL_POWER 
  SpecialPower            	= SpecialAbilityAragornElendil
  TextLabel               	= CONTROLBAR:Elendil
  ButtonImage             	= HSAragornElendil
  ButtonBorderType        	= ACTION 
  DescriptLabel           	= Describe:Elendil
  InPalantir			  = Yes
  AutoAbility			  = Yes
  PresetRange			  = 60.0  
End

CommandButton Command_SpecialAbilityBladeMaster
  Command                 	= SPECIAL_POWER 
  SpecialPower            	= SpecialAbilityAragornBladeMaster
  TextLabel               	= CONTROLBAR:BladeMaster
  ButtonImage             	= HSAragornBladeMaster
  ButtonBorderType        	= ACTION 
  DescriptLabel           	= Describe:BladeMaster
  InPalantir			= Yes
  AutoAbility			= Yes
  AutoDelay			= 30.0 ; this should sync with the Aragorn's hero mode effect time
  PresetRange			= 50.0
  UnitSpecificSound       	= AragornVoiceBladeMaster
End

CommandSet Aragorn
	1	= Command_ToggleStance
	2	= Command_SpecialAbility202Athelas
	3 	= Command_SpecialAbilityElendil
	4 	= Command_AragornFakeLeadershipButton
	5	= Command_SpecialAbilityBladeMaster
	6 	= Command_SpawnOathbreakers
	12 	= Command_CaptureBuilding
	13 	= Command_AttackMove
	14 	= Command_Stop
	16  = Command_SetStanceBattle
	17  = Command_SetStanceAggressive
	18  = Command_SetStanceHoldGround
End

ModifierList AragornBladeMasterNew
	Category = SPELL
	Modifier = ARMOR 50%			// Additive.  Sum of these are subtracted from all entries in Armor.ini
	Modifier = DAMAGE_MULT 200%		// Multiplicitive.  Damage multiplied by this, will compound in multiple bonuses
	Duration = 30000			// lasts for 30 seconds
End

ModifierList AragornElendilAntiCategory	// Just used for the duration field.
	Duration = 12000					// matches SetModelConditionTime in special power module.
End

ModifierList AragornElendilSteadfast
	Category = SPELL
	Modifier = RESIST_KNOCKBACK 100%
	Modifier = CRUSHABLE_LEVEL 5
	Duration = 12000
End

Object GondorAragorn
CommandSet = Aragorn
ShockwaveResistance = 34
ReplaceModule ModuleTag_AragornBladeMasterEnabler
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_AragornBladeMasterEnablerSwap
		SpecialPowerTemplate 	= SpecialAbilityAragornBladeMaster
		TriggeredBy 		= Upgrade_AragornElendil
	End
End
ReplaceModule ModuleTag_EnableElendil
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_EnableElendilSwap
		SpecialPowerTemplate	= SpecialAbilityAragornElendil
		TriggeredBy		= Upgrade_AragornBladeMaster
	End
End
ReplaceModule ModuleTag_AragornBladeMasterUpdate
	Behavior = HeroModeSpecialAbilityUpdate ModuleTag_AragornBladeMasterUpdateNew
		SpecialPowerTemplate    = SpecialAbilityAragornBladeMaster
		HeroAttributeModifier	= AragornBladeMasterNew
		HeroEffectDuration	= 30000 ; this should sync with the auto ability delay re-fire time in commandButtons.ini
		UnpackTime              = 1 ; insant unpack
		TriggerSound		= AragornBladeMaster
	End
End
ReplaceModule ModuleTag_ElendilStarter	
	Behavior = SpecialPowerModule ModuleTag_ElendilStarterNEW					
		SpecialPowerTemplate		= SpecialAbilityAragornElendil
		UpdateModuleStartsAttack	= Yes
		AntiCategory			= LEADERSHIP
		AttributeModifier		= AragornElendilAntiCategory		; Used for the anti category duration only.
		AttributeModifierRange		= 200.0
		AttributeModifier 		= AragornElendilSteadfast
		AttributeModifierRange 		= 1.0
		AttributeModifierAffectsSelf 	= Yes
		StartsPaused			= Yes								; obtained on level 2
		SetModelCondition			= ModelConditionState:USER_3
		SetModelConditionTime		= 12.0 ; 12 secs of glow anim for sword
	End
End
ReplaceModule ModuleTag_AragornAthelasMover
	Behavior = ActivateModuleSpecialPower ModuleTag_AragornAthelasMoverNew
		SpecialPowerTemplate		= SpecialAbility202AragornAthelas
		StartAbilityRange		= 1.6
		UnpackTime			= 1
		PreparationTime			= 3
		PackTime			= 2096
		TriggerSpecialPower		= ModuleTag_AragornAthelasHealMore OBJECTPOS
	End
End
ReplaceModule ModuleTag_AragornAthelasHeal
   	Behavior = PlayerHealSpecialPower ModuleTag_AragornAthelasHealMore
		SpecialPowerTemplate		= SpecialAbilityActivateeDummy
		HealAmount			= 1600
		HealAsPercent			= No
		HealAffects			= HERO
		HealRadius			= 200
		HealFX				= FX_AragornAthelas
		TriggerFX			= FX_AragornAthelas
	End
End
ReplaceModule ModuleTag_AragornHealing
	Behavior = AutoHealBehavior ModuleTag_AragornHealing_FAST
		StartsActive = Yes
		HealingAmount = 100
		HealingDelay = 1000
		StartHealingDelay = HERO_HEAL_DELAY
		HealOnlyIfNotInCombat = Yes
	End
End
End

;;;;;;;;;;;;;;;;;;;;;;;;
;;;                  ;;;
;;;      LURTZ       ;;;
;;;                  ;;;
;;;;;;;;;;;;;;;;;;;;;;;;

Weapon LurtzWeapon
  LeechRangeWeapon      = Yes
  AttackRange           = 15.0
  MeleeWeapon           = Yes
  DelayBetweenShots     = LURTZ_DELAYBETWEENSHOTS 			; time between shots, msec
  PreAttackDelay        = LURTZ_PREATTACKDELAY 				; 433 is natural time of the stabbing animation.
  PreAttackType         = PER_SHOT ; Do the delay each time we attack a new target
  FiringDuration        = LURTZ_FIRINGDURATION 				; min 600 for anim
  FireFX                = FX_GondorSwordHit
  	RadiusDamageAffects = ENEMIES NEUTRALS
  DamageNugget                        ; A basic Nugget that just does damage
    Damage        = 200					
    Radius        = 15.0
    DelayTime     = 0
    DamageType    = HERO
    DamageFXType  = SWORD_SLASH
    DeathType     = NORMAL
    DamageArc	  = 90
  End
End

Weapon LurtzCarnageWeapon
  LeechRangeWeapon      = Yes
  AttackRange           = 20.0
  MeleeWeapon           = Yes
  DelayBetweenShots     = LURTZ_CARNAGE_DELAYBETWEENSHOTS 		; time between shots, msec
  PreAttackDelay        = LURTZ_CARNAGE_PREATTACKDELAY 			; 433 is natural time of the stabbing animation.
  PreAttackType         = PER_SHOT ; Do the delay each time we attack a new target
  FiringDuration        = LURTZ_CARNAGE_FIRINGDURATION 			; min 600 for anim
  FireFX                = FX_GondorSwordHit
  	RadiusDamageAffects = ENEMIES NEUTRALS
  DamageNugget                        ; A basic Nugget that just does damage
    Damage        = 300				
    Radius        = 22.0
    DelayTime     = 0
    DamageType    = HERO
    DamageFXType  = MAGIC
    DeathType     = EXPLODED
    DamageArc	  = 120
  End
	MetaImpactNugget                    ; A Nugget that throws things back with force
		HeroResist	  = 0.75
		ShockWaveAmount   = 60.0
		ShockWaveArc	  = 120
		ShockWaveRadius   = 22.0
		ShockWaveTaperOff = 0.75
		ShockWaveZMult    = 0.45
		ShockWaveSpeed	  = 0.0
	End
End

SpecialPower SpecialAbilityLurtzBarbedArrow
	Enum						= SPECIAL_GENERAL_TARGETLESS
End

FXParticleSystem ThranDeadeyeArrow
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXspearhead.tga
    Lifetime = 15 15
    SortLevel = 1
    Size = 5 5
    BurstCount = 4 4
    IsGroundAligned = Yes
    IsParticleUpTowardsEmitter = Yes
  End
  Color = DefaultColor
    Color1 = R:193 G:79 B:63 0
    Color2 = R:0 G:0 B:0 15
  End
  Alpha = DefaultAlpha
    Alpha1 = 0.25 0.25 0
    Alpha2 = 0 0 15
  End
  Update = DefaultUpdate
    SizeRate = -0.25 -0.25
    SizeRateDamping = 1 1
    AngleZ = 0 2
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = LineEmissionVolume
    StartPoint = X:-5 Y:0 Z:0
    EndPoint = X:-5 Y:0 Z:0
  End
  Draw = DefaultDraw
  End
End

Weapon ElvenThranduilBowDeadeye
	AttackRange				= LURTZ_BOW_RANGE
	WeaponSpeed				= 421
	MinWeaponSpeed				= 341
	MaxWeaponSpeed				= 581
	FireFX					= FX_HaradrimArcherBowBarbedWeapon
	ScaleWeaponSpeed			= Yes
	HitPercentage				= 100
	HitStoredTarget				= Yes
	DelayBetweenShots			= LURTZ_BOW_DELAYBETWEENSHOTS
	PreAttackDelay				= LURTZ_BOW_PREATTACKDELAY
	PreAttackType				= PER_POSITION
	FiringDuration				= LURTZ_BOW_FIRINGDURATION
	ClipSize				= 1
	AutoReloadsClip				= Yes
	AutoReloadWhenIdle			= 1
	ClipReloadTime				= Min:LURTZ_BOW_RELOADTIME_MIN Max:LURTZ_BOW_RELOADTIME_MAX
	ContinuousFireOne			= 0
	ContinuousFireCoast			= LURTZ_BOW_RELOADTIME_MAX
	AntiAirborneVehicle			= Yes
	AntiAirborneMonster			= Yes
	HitPassengerPercentage		= 20%
	CanBeDodged					= Yes

	ProjectileNugget
		ProjectileTemplateName	= GoodFactionArrowDeadeye
		WarheadTemplateName		= ElvenThranduilBowWarheadDeadeye
	End

End

CommandButton Command_HaradrimArcherBarbedArrowAbility
	Command			= SPECIAL_POWER
	SpecialPower		= SpecialAbilityLurtzBarbedArrow
	Options			= NONPRESSABLE
	ButtonImage		= UCCommon_BarbedArrows
	TextLabel		= BarbedArrows
	DescriptLabel		= Describe:BarbedArrows
	InPalantir		= Yes	
	ButtonBorderType    	= ACTION
	AutoAbility		= No
  DisableOnModelCondition 	= WEAPONSET_TOGGLE_1 HERO
End

CommandSet Lurtz
	1	= Command_ToggleStance   
	2	= Command_ToggleLurtzWeapon
	3	= Command_LurtzCripple
	4	= Command_SpecialAbilityLurtzCarnage
	5	= Command_LurtzLeadership
	6	= Command_HaradrimArcherBarbedArrowAbility
	12	= Command_CaptureBuilding
	13	= Command_AttackMove
	14	= Command_Stop
	16  	= Command_SetStanceBattle
	17  	= Command_SetStanceAggressive
	18  	= Command_SetStanceHoldGround
End

Object IsengardLurtz
ShockwaveResistance = 34
CommandSet = Lurtz
	WeaponSet
		Conditions = None
		Weapon = PRIMARY    IsenguardLurtzBow
	End
	WeaponSet
		Conditions = CONTAINED WEAPONSET_TOGGLE_1
		Weapon = PRIMARY    IsenguardLurtzBow
		AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
	WeaponSet
		Conditions	= CONTAINED
		Weapon = PRIMARY    IsenguardLurtzBow
		AutoChooseSources	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
	WeaponSet
		Conditions = WEAPONSET_TOGGLE_1 CLOSE_RANGE
		Weapon = PRIMARY    LurtzWeapon
	End
	WeaponSet
		Conditions = CLOSE_RANGE
		Weapon = PRIMARY    IsenguardLurtzBow
		Weapon = SECONDARY  IsenguardLurtzBowMelee
		OnlyAgainst = PRIMARY STRUCTURE
	End
	WeaponSet
		Conditions = WEAPONSET_TOGGLE_1
		Weapon = PRIMARY    LurtzWeapon
	End

	WeaponSet
		Conditions = PLAYER_UPGRADE
		Weapon = PRIMARY    ElvenThranduilBowDeadeye
	End
	WeaponSet
		Conditions = PLAYER_UPGRADE CONTAINED WEAPONSET_TOGGLE_1
		Weapon = PRIMARY    ElvenThranduilBowDeadeye
		AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
	WeaponSet
		Conditions	= PLAYER_UPGRADE CONTAINED
		Weapon = PRIMARY    ElvenThranduilBowDeadeye
		AutoChooseSources	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
	WeaponSet
		Conditions = PLAYER_UPGRADE WEAPONSET_TOGGLE_1 CLOSE_RANGE
		Weapon = PRIMARY    LurtzWeapon
	End
	WeaponSet
		Conditions = PLAYER_UPGRADE CLOSE_RANGE
		Weapon = PRIMARY    ElvenThranduilBowDeadeye
		Weapon = SECONDARY  IsenguardLurtzBowMelee
		OnlyAgainst = PRIMARY STRUCTURE
	End
	WeaponSet
		Conditions = PLAYER_UPGRADE WEAPONSET_TOGGLE_1
		Weapon = PRIMARY    LurtzWeapon
	End
	
	;;; CARNAGE MODE ;;;
	WeaponSet
		Conditions = WEAPONSET_HERO_MODE
		Weapon = PRIMARY    LurtzCarnageWeapon
	End
	WeaponSet
		Conditions = WEAPONSET_HERO_MODE CLOSE_RANGE
		Weapon = PRIMARY    LurtzCarnageWeapon
	End
	WeaponSet
		Conditions = WEAPONSET_HERO_MODE WEAPONSET_TOGGLE_1
		Weapon = PRIMARY    LurtzCarnageWeapon
	End
	WeaponSet
		Conditions = WEAPONSET_HERO_MODE WEAPONSET_TOGGLE_1 CLOSE_RANGE
		Weapon = PRIMARY    LurtzCarnageWeapon
	End

	WeaponSet
		Conditions = PLAYER_UPGRADE WEAPONSET_HERO_MODE
		Weapon = PRIMARY    LurtzCarnageWeapon
	End
	WeaponSet
		Conditions = PLAYER_UPGRADE WEAPONSET_HERO_MODE CLOSE_RANGE
		Weapon = PRIMARY    LurtzCarnageWeapon
	End
	WeaponSet
		Conditions = PLAYER_UPGRADE WEAPONSET_HERO_MODE WEAPONSET_TOGGLE_1
		Weapon = PRIMARY    LurtzCarnageWeapon
	End
	WeaponSet
		Conditions = PLAYER_UPGRADE WEAPONSET_HERO_MODE WEAPONSET_TOGGLE_1 CLOSE_RANGE
		Weapon = PRIMARY    LurtzCarnageWeapon
	End
AddModule
	Behavior = WeaponSetUpgrade ModuleTag_14
		TriggeredBy = Upgrade_LurtzPillage
	End
End
ReplaceModule ModuleTag_Pillage
 	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_Pillage_NEW
		SpecialPowerTemplate	= SpecialAbilityLurtzBarbedArrow
		TriggeredBy		= Upgrade_LurtzPillage
	End
End
ReplaceModule ModuleTag_PillageUpdate
	Behavior = SpecialPowerModule ModuleTag_PillageUpdate_NEW
		SpecialPowerTemplate		= SpecialAbilityLurtzBarbedArrow
		UpdateModuleStartsAttack	= No
		StartsPaused			= Yes
	End
End
RemoveModule ModuleTag_PillageAura
ReplaceModule ModuleTag_LurtzHealing
	Behavior = AutoHealBehavior ModuleTag_LurtzHealing_FAST
		StartsActive			= Yes
		HealingAmount			= 100
		HealingDelay			= 1000
		StartHealingDelay		= HERO_HEAL_DELAY
		HealOnlyIfNotInCombat	= Yes
	End
End
End

;;;;;;;;;;;;;;;;;;;;;;;;
;;;                  ;;;
;;;    THRANDUIL     ;;;
;;;                  ;;;
;;;;;;;;;;;;;;;;;;;;;;;;

SpecialPower SpecialAbilityHawkStrike
	Enum		= SPECIAL_AT_VISIBLE_OBJECT
	ReloadTime		= 14000
	InitiateSound	= LegolasHawkStrikeArrowShoot		;this plays when he fires, not when he targets
End

FXParticleSystem ThranDeadEye
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXRing01.tga
    Lifetime = 15 15
    SortLevel = 1
    Size = 10 15
    BurstCount = 1 1
  End
  Color = DefaultColor
    Color2 = R:105 G:108 B:70 5
    Color3 = R:80 G:80 B:30 15
    Color4 = R:100 G:22 B:32 0
  End
  Update = DefaultUpdate
    SizeRate = 1 1
    SizeRateDamping = 1 1
    AngleZ = 0 7
    AngularRateZ = -0.1 0.1
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    Gravity = -0.01
    VelocityDamping = 1 1
  End
  EmissionVelocity = OutwardEmissionVelocity
  End
  EmissionVolume = CylinderEmissionVolume
    Radius = 10
    Offset = X:0 Y:0 Z:10
  End
  Draw = DefaultDraw
  End
End

CommandButton Command_ThranduilWildWalkButton
  	Command                 = SPECIAL_POWER
  	SpecialPower            = SpecialAbilityFakeLeadership
  	Options			= NONPRESSABLE
  	TextLabel               = CONTROLBAR:WildWalk
  	ButtonImage             = HSThranduilWildWalk
  	RadiusCursorType        = TrainingRadiusCursor  	
  	ButtonBorderType        = ACTION
  	DescriptLabel           = Describe:WildWalk
  	InPalantir		= Yes
End

CommandButton Command_SpecialAbilityThornofVengeance
	Command                 = SPECIAL_POWER
	WeaponSlot              = SECONDARY
	SpecialPower            = SpecialAbilityThornVengeance
	Options                 = NEED_TARGET_ENEMY_OBJECT
	TextLabel               = CONTROLBAR:ThornofVengeance
	ButtonImage             = HSThranduilThornofVengeance
	CursorName              = Bombard
	InvalidCursorName       = GenericInvalid
	ButtonBorderType        = ACTION
	DescriptLabel           = Describe:ThornofVengeance
	DisableOnModelCondition = WEAPONSET_TOGGLE_1		
	InPalantir		= Yes
	AutoAbility		= Yes
End

CommandButton Command_SpellBookCloudBreak
  	Command                 = SPECIAL_POWER 
  	SpecialPower            = SpecialAbilityThranduilDeadeye
  	TextLabel               = GoldenArrows
  	ButtonImage             = HSThranduilDeadeye
  	ButtonBorderType        = ACTION 
  	DescriptLabel           = Describe:GoldenArrows
  	InPalantir		= Yes
  	AutoAbility		= No
  	AutoDelay		= 20.0 ; this should sync with the Thranduil's hero mode effect time
  	EnableOnModelCondition 	= None WEAPONSET_HERO_MODE CLOSE_RANGE
End

CommandButton Command_SpecialAbilityElfCloakThranduil
  	Command                 = SPECIAL_POWER 
  	SpecialPower            = SpecialAbilityFakeLeadership2
 	Options                 = NONPRESSABLE
  	TextLabel               = CONTROLBAR:ElvenCloakThranduil
  	ButtonImage             = HPFrodoElfCloak
  	ButtonBorderType        = ACTION 
  	DescriptLabel           = Describe:ElvenCloakThranduil
  	InPalantir		= Yes
End

CommandSet Thranduil
	1	= Command_ToggleStance
	2  	= Command_LegolasHawkStrike
    	3  	= Command_SpecialAbilityElfCloakThranduil
	4  	= Command_ThranduilWildWalkButton
    	5  	= Command_SpecialAbilityThornofVengeance
    	6  	= Command_SpellBookCloudBreak
    	12 	= Command_CaptureBuilding
	13 	= Command_AttackMove
	14 	= Command_Stop
	16  = Command_SetStanceBattle
	17  = Command_SetStanceAggressive
	18  = Command_SetStanceHoldGround
End

Weapon HaldirGoldenArrow
	AttackRange				= THRANDUIL_BOW_RANGE				
	LeechRangeWeapon			= Yes
	WeaponSpeed				= 321
	MinWeaponSpeed				= 241
	MaxWeaponSpeed				= 481
	FireFX					= FX_RohanArcherBowWeapon
	ScaleWeaponSpeed			= Yes
	HitPercentage				= 100
	HitStoredTarget 			= Yes	; Always hits initial target.

	DelayBetweenShots   = 0
	PreAttackDelay      = ROHAN_ELVENWARRIOR_BOW_PREATTACKDELAY 
	PreAttackType       = PER_POSITION
	FiringDuration      = 0

	ClipSize			= 1
	AutoReloadsClip		= Yes
	AutoReloadWhenIdle	= 1	
	ClipReloadTime		= Min:THRANDUIL_RELOADTIME_MIN Max:THRANDUIL_RELOADTIME_MAX
	ContinuousFireOne	= 0
	ContinuousFireCoast	= THRANDUIL_RELOADTIME_MAX
	  
	AntiAirborneVehicle	= Yes
	AntiAirborneMonster	= Yes
	HitPassengerPercentage	= 20%
	CanBeDodged				= Yes ; Will check for a DodgePercent on the target to have a second chance at failing HitPercent

	ProjectileNugget
		ProjectileTemplateName	= HaldirGoldenArrowProjectile
		WarheadTemplateName	= HaldirGoldenArrowWarhead
	End
End

Object ElvenThranduil
ShockwaveResistance = 34
CommandSet = Thranduil
	WeaponSet
		Conditions 		= None 
		Weapon 			= PRIMARY    ElvenThranduilBow
		AutoChooseSources 	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
	WeaponSet
		Conditions 		= WEAPONSET_HERO_MODE
		Weapon			= PRIMARY HaldirGoldenArrow
		AutoChooseSources 	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
ReplaceModule ModuleTag_ElfCloakEnabler
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_ElfCloakEnabler_NEW
		SpecialPowerTemplate		= SpecialAbilityFakeLeadership2
		TriggeredBy			= Upgrade_ThranduilMoveUnseen
	End	
End
ReplaceModule ModuleTag_ElvenCloak
	Behavior = InvisibilityUpdate ModuleTag_ElvenCloak_NEW
		InvisibilityNugget
			InvisibilityType		= CAMOUFLAGE
			ForbiddenConditions		= TAKING_DAMAGE FIRING_ANY USING_ABILITY MOVING
			DetectionRange			= 100 ; 20
		End
		StartsActive				= Yes
		UpdatePeriod				= 2000
		RequiredUpgrades			= Upgrade_ThranduilMoveUnseen
	End
End
AddModule
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_HawkStrikeEnabler
		SpecialPowerTemplate		= SpecialAbilityHawkStrike
		TriggeredBy			= Upgrade_ThranduilElfCloak
	End	
End
AddModule
	Behavior = SpecialPowerModule ModuleTag_HawkStrikeStarter                      
		SpecialPowerTemplate		= SpecialAbilityHawkStrike
		AvailableAtStart		= Yes
		StartsPaused			= No
		UpdateModuleStartsAttack	= Yes
		InitiateSound			= ThranduilVoiceAttack
	End
End
AddModule
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_HawkStrikeUpdate   
		SpecialPowerTemplate		= SpecialAbilityHawkStrike
		SkipContinue			= Yes
		UnpackTime			= 1500									; In this context: Preattack Delay 
		PackTime			= 1000 									; In this context: Weapon followthrough delay
		BusyForDuration			= 1000									; don't accept any AI for this long... ai commands will be queued
		AwardXPForTriggering		= 0
		StartAbilityRange		= 400.0									; Note: This has to be smaller than the weapon range or it'll never succeed
		ApproachRequiresLOS		= Yes		
		SpecialWeapon			= LegolasHawkStrike
		WhichSpecialWeapon		= 1
	End
End
AddModule
	Behavior = AutoAbilityBehavior ModuleTag_HawkStrikeAutoAbility
		SpecialAbility				= SpecialAbilityHawkStrike
		MaxScanRange				= THRANDUIL_BOW_RANGE
		Query					= 1 ANY ENEMIES +HERO +MONSTER
		Query					= 1 ALL ENEMIES
	End
End
ReplaceModule ModuleTag_MoveUnseenEnabler
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_WildWalkEnable
		SpecialPowerTemplate		= SpecialAbilityFakeLeadership
		TriggeredBy			= Upgrade_ThranduilDeadeye
	End
End
ReplaceModule ModuleTag_ThornArrowEnabler
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_ThornArrowEnabler_Level7
		SpecialPowerTemplate		= SpecialAbilityThornVengeance
		TriggeredBy			= Upgrade_ThranduilWildWalk
	End
End
ReplaceModule ModuleTag_DeadeyeEnabler
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_DeadeyeEnabler_Level10
		SpecialPowerTemplate 	= SpecialAbilityThranduilDeadeye
		TriggeredBy 		= Upgrade_ThranduilThornofVengeance
	End
End
ReplaceModule ModuleTag_DeadeyeStarter
  	Behavior = SpecialPowerModule ModuleTag_DeadeyeStarter_NEW
		SpecialPowerTemplate    = SpecialAbilityThranduilDeadeye
		StartsPaused		= Yes
		UpdateModuleStartsAttack = Yes
	End
End
ReplaceModule ModuleTag_DeadeyeUpdate
	Behavior = HeroModeSpecialAbilityUpdate ModuleTag_DeadeyeUpdate_NEW
		SpecialPowerTemplate    = SpecialAbilityThranduilDeadeye
		HeroEffectDuration	= 6000						; this should sync with the auto ability delay re-fire time in commandButtons.ini
		UnpackTime              = 1						; insant unpack
		TriggerSound		= AragornBladeMaster
		PackTime		= 2500
		UnpackingVariation	= 1
	End
End
ReplaceModule ModuleTag_LegolasHealing
	Behavior = AutoHealBehavior ModuleTag_LegolasHealing_FAST
		StartsActive			= Yes
		HealingAmount			= 100
		HealingDelay			= 1000
		StartHealingDelay		= HERO_HEAL_DELAY
		HealOnlyIfNotInCombat	= Yes
	End
End
End


;;;;;;;;;;;;;;;;;;;;;;;;
;;;                  ;;;
;;;      GORKIL      ;;;
;;;                  ;;;
;;;;;;;;;;;;;;;;;;;;;;;;


Weapon GoblinKingBlade
  LeechRangeWeapon      = Yes
  AttackRange           = 20.0
  MeleeWeapon           = Yes
  DelayBetweenShots     = WILD_GOBLIN_KING_DELAYBETWEENSHOTS            ; time between shots, msec
  PreAttackDelay        = WILD_GOBLIN_KING_PREATTACKDELAY             ; 300 is mace swing delay time before contact with target.
  PreAttackType         = PER_SHOT ; Do the delay each time we attack
  FireFX                = FX_GondorSwordHit
  FiringDuration        = WILD_GOBLIN_KING_FIRINGDURATION    ; Duration of the mace swing 

  DamageNugget
    Damage        = 300
    Radius        = 10.0
    DelayTime     = 0
    DamageType    = HERO
    DamageFXType  = SWORD_SLASH
    DeathType     = NORMAL
  End

	DOTNugget
		Damage        = 16
		AcceptDamageAdd = Yes
		Radius        = 25.0
		DelayTime     = 0
		DamageType    = POISON
		DamageFXType  = POISON
		DeathType     = NORMAL
		DamageInterval = 10
		DamageDuration = 16000
		SpecialObjectFilter = AFFECTED_BY_POISON_OBJECTFILTER
	End
End

Weapon ShelobMandibles
  LeechRangeWeapon      = Yes
  AttackRange           = 25.0
  MeleeWeapon           = Yes
  DelayBetweenShots     = 1666           ; time between shots, msec
  PreAttackDelay        = 900            ; 300 is mace swing delay time before contact with target.
  PreAttackType         = PER_SHOT ; Do the delay each time we attack
  FireFX                = FX_GondorSwordHit
  FiringDuration        = 766    ; Duration of the mace swing 
  RequireFollowThru		= Yes
  
  DamageNugget                        ; A basic Nugget that just does damage
    Damage        = 240
    Radius        = 15
    DelayTime     = 0
    DamageType    = HERO
    DamageFXType  = SWORD_SLASH
    DeathType     = NORMAL
    DamageArc	  = 90
  End
	MetaImpactNugget                    ; A Nugget that throws things back with force
		ShockWaveAmount   = 10.0
		ShockWaveRadius   = 15.0
		ShockWaveTaperOff = 0.75
	End
	DOTNugget
		Damage        = 10
		AcceptDamageAdd = Yes
		Radius        = 25.0
		DelayTime     = 0
		DamageType    = POISON
		DamageFXType  = POISON
		DeathType     = NORMAL
		DamageInterval = 10
		DamageDuration = 10000
		SpecialObjectFilter = AFFECTED_BY_POISON_OBJECTFILTER
	End
End

CommandButton Command_GoblinKingMountScorpion
  Command               = SPECIAL_POWER
  SpecialPower          = SpecialAbilityToggleMounted
  TextLabel             = CONTROLBAR:GoblinKingMount
  Options		= TOGGLE_IMAGE_ON_WEAPONSET ON_GROUND_ONLY
  FlagsUsedForToggle	= MOUNTED
  ButtonImage           = UCGoblinKingMount   UCGoblinKingMount
  ButtonBorderType      = ACTION 
  DescriptLabel         = Describe:ScorpionMount
  InPalantir            = Yes  
  UnitSpecificSound     = GoblinKingVoiceMountMS	GoblinKingVoiceDismountMS
End

Object WildGoblinKing
ShockwaveResistance = 34
	WeaponSet
		Conditions			= None 
		Weapon				= PRIMARY		GoblinKingBlade
		Weapon				= SECONDARY		GoblinKingBlade
		OnlyAgainst			= SECONDARY		STRUCTURE
		
		AutoChooseSources	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
	WeaponSet
		Conditions			= Mounted
		Weapon				= PRIMARY		ShelobMandibles
		Weapon				= SECONDARY		ShelobMandibles
		OnlyAgainst			= SECONDARY		STRUCTURE
		
		AutoChooseSources	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
	CrushWeapon		= HeroCrush  

	MinCrushVelocityPercent = 50 ; Has to be moving at at least 50% of full speed.
	CrushDecelerationPercent = 10 ; Lose xx percent of max velocity when crushing.
	
	CrushKnockback = 50
	CrushZFactor = 1.2
ReplaceModule ModuleTag_GoblinKingHealing
	Behavior = AutoHealBehavior ModuleTag_GoblinKingHealing_FAST
		StartsActive = Yes
		HealingAmount = 100
		HealingDelay = 1000
		StartHealingDelay = HERO_HEAL_DELAY
		HealOnlyIfNotInCombat = Yes
	End
End
End


;;;;;;;;;;;;;;;;;;;;;;;;
;;;                  ;;;
;;;      GIMLI       ;;;
;;;                  ;;;
;;;;;;;;;;;;;;;;;;;;;;;;


Weapon RohanGimliAxe  ; BALANCE Gimli Axe Weapon
  LeechRangeWeapon      = Yes
  AttackRange           = STANDARD_MELEE_ATTACK_RANGE ;;,;; 20.0
  MeleeWeapon           = Yes
  WeaponSpeed           = 799999.2        ; dist/sec (huge value == effectively instant)
  DelayBetweenShots     = GIMLI_DELAYBETWEENSHOTS 	; time between shots, msec
  PreAttackDelay        = GIMLI_PREATTACKDELAY 	; 433 is natural time of the stabbing animation.
  PreAttackType         = PER_SHOT ; Do the delay each time we attack a new target
  FiringDuration        = GIMLI_FIRINGDURATION 		; min 600 for anim
  FireFX                = FX_GondorSwordHit

  DamageNugget
    Damage        = GIMLI_DAMAGE
    Radius        = 15.0
    DelayTime     = 0
    DamageType    = HERO
    DamageFXType  = SWORD_SLASH
    DeathType     = NORMAL
  End
End

Weapon Gimli202SuperAxe  ; BALANCE Gimli Axe Weapon
  LeechRangeWeapon      = Yes
  AttackRange           = STANDARD_MELEE_ATTACK_RANGE ; 20.0
  MeleeWeapon           = Yes
  WeaponSpeed           = 799999.2        ; dist/sec (huge value == effectively instant)
  DelayBetweenShots     = GIMLI_DELAYBETWEENSHOTS_SUPER 	; time between shots, msec
  PreAttackDelay        = GIMLI_PREATTACKDELAY_SUPER 	; 433 is natural time of the stabbing animation.
  PreAttackType         = PER_SHOT ; Do the delay each time we attack a new target
  FiringDuration        = GIMLI_FIRINGDURATION_SUPER 		; min 600 for anim
  FireFX                = FX_GondorSwordHit
  RadiusDamageAffects	= ENEMIES NEUTRALS NOT_SIMILAR ;;.;; Added for 2.02
	
	DamageNugget	;;.;; First swing
		Damage        		= GIMLI_DAMAGE_SUPER						
		Radius			= 18.0
		DamageArc 		= 180
		DelayTime		= 0
		DamageType		= HERO
		DamageFXType		= MAGIC
		DeathType		= EXPLODED
		DamageScalar		= 70% NONE +STRUCTURE	;;,;; 35%
	End
	MetaImpactNugget                    ; A Nugget that throws things back with force
		ShockWaveAmount		= 30
		ShockWaveRadius		= 18.0
		ShockWaveArc		= 180				; Should generally be equal to damage arc
		ShockWaveTaperOff	= 1.0
		DelayTime		= 0
	End
	
	DamageNugget	;;.;; Second swing
		Damage        		= GIMLI_DAMAGE_SUPER						
		Radius			= 18.0
		DamageArc 		= 180
		DelayTime		= 133
		DamageType		= HERO
		DamageFXType		= MAGIC
		DeathType		= EXPLODED
		DamageScalar		= 70% NONE +STRUCTURE
	End
	MetaImpactNugget                    ; A Nugget that throws things back with force
		ShockWaveAmount		= 30
		ShockWaveRadius		= 10.0
		ShockWaveArc		= 180				; Should generally be equal to damage arc
		ShockWaveTaperOff	= 1.0
		DelayTime		= 133
	End
End

Weapon GloinSmashWeapon
	IdleAfterFiringDelay = 0
	RadiusDamageAffects = ENEMIES ALLIES NOT_SIMILAR
	DelayBetweenShots = 5000               ; time between shots, msec
	PreAttackDelay        = 2600
	PreAttackType         = PER_ATTACK ; Do the delay each time we attack a new target
	PreAttackFX           = FX_GloinShatterPre
	FireFX                = FX_GloinShatterHammerBig ;,; FX_GloinShatterhammer
	FiringDuration      = 1400
	DamageNugget                        ; A basic Nugget that just does damage
		Damage			= GLOIN_SHATTERHAMMER_DAMAGE
		Radius			= 200
		DamageType		= MAGIC
		DamageFXType		= MAGIC
		DeathType		= EXPLODED
		DamageSpeed		= 700.0 ; must match the ShockWaveSpeed below
		DamageScalar		= 1% ANY ALLIES
	End
	MetaImpactNugget                    ; A Nugget that throws things back with force
		ShockWaveAmount   = 70.0
		ShockWaveRadius   = 200.0
		ShockWaveTaperOff = 1.0
		ShockWaveZMult    = 1.000
		ShockWaveSpeed	  = 700.0 
		SpecialObjectFilter	= ALL -MACHINE ;,;
	End
End

CommandButton Command_SpecialAbilitySlayer
	Command			= SPECIAL_POWER 
	SpecialPower		= SpecialAbilityGimliHeroMode
	TextLabel		= CONTROLBAR:Slayer
	ButtonImage		= HSGimliSlayer
	ButtonBorderType	= ACTION 
	DescriptLabel		= Describe:Slayer
	UnitSpecificSound	= GimliModeSlayerMS
	InPalantir		= Yes
	AutoAbility		= Yes
End

CommandButton Command_SpecialAbilityGloinSmash
  Command                 = SPECIAL_POWER 
  SpecialPower            = SpecialAbilityGloinSmash
  Options		  = NEED_TARGET_POS
  TextLabel               = CONTROLBAR:GloinSmash
  ButtonImage             = HSGloinShatterHammer
  RadiusCursorType	  = LeapRadiusCursor
  CursorName		  = Bombard
  InvalidCursorName       = GenericInvalid
  ButtonBorderType        = ACTION 
  DescriptLabel           = Describe:Smash
  InPalantir		  = Yes
  AutoAbility		  = Yes
End

CommandSet Gimli
	1	= Command_ToggleStance
	2  	= Command_GimliAxeThrow
	3  	= Command_RohanGimliLeap
	4 	= Command_SpecialAbilityDwarvenGloinShakeFoundation
	5  	= Command_SpecialAbilitySlayer
	6 	= Command_SpecialAbilityGloinSmash
	12 	= Command_CaptureBuilding
	13 	= Command_AttackMove
	14 	= Command_Stop
	16  = Command_SetStanceBattle
	17  = Command_SetStanceAggressive
	18  = Command_SetStanceHoldGround
End

Object DwarvenGimli
ShockwaveResistance = 34
CommandSet = Gimli
	;;;; SHAKE FOUNDATION SPECIAL ABILITY ;;;;--------------------------------------------------------------------
AddModule
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_ShakeFoundationEnabler
		SpecialPowerTemplate = SpecialAbilityDwarvenGloinShakeFoundation
		TriggeredBy = Upgrade_EnableDwarvenGloinShakeFoundation
	End
End
AddModule
	Behavior = SpecialPowerModule ModuleTag_ShakeFoundationStarter       
		SpecialPowerTemplate      = SpecialAbilityDwarvenGloinShakeFoundation
		UpdateModuleStartsAttack  = Yes
		StartsPaused		  = Yes
		InitiateSound		  = GloinVoiceGenericSpecialAbility
	End
End
AddModule
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_ShakeFoundationWeaponFireUpdate
		SpecialPowerTemplate    = SpecialAbilityDwarvenGloinShakeFoundation
		SpecialWeapon			= DwarvenGloinShakeFoundationWeapon
		StartAbilityRange		= 15.0
		SkipContinue			= Yes
		UnpackTime				= 400		; Trigger on frame 42 (of 115)
		PackTime				= 1433		; Remaining 73 frames (of 115)
		MustFinishAbility		= Yes
	End
End
AddModule
	Behavior = AutoAbilityBehavior ModuleTag_ShakeFoundationAutoAbility
		SpecialAbility			= SpecialAbilityDwarvenGloinShakeFoundation
		ForbiddenStatus = INSIDE_GARRISON ;;,;; This seems to prevent the ability from being used inside a tower
		Query					= 1 ANY ENEMIES +STRUCTURE -WALL_UPGRADE -WALL_HUB -WALL_SEGMENT -DEFENSIVE_WALL -UNATTACKABLE ;;,;; 1 ANY ENEMIES +STRUCTURE -UNATTACKABLE
		MaxScanRange			= 100
	End
End
	;;;; SHATTERHAMMER SPECIAL ABILITY ;;;;;;;;--------------------------------------------------------------------
AddModule
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_SmashEnabler
		SpecialPowerTemplate = SpecialAbilityGloinSmash
		TriggeredBy = Upgrade_EnableGloinSmash
	End
End
AddModule
	Behavior = SpecialPowerModule ModuleTag_SmashStarter       
		SpecialPowerTemplate      = SpecialAbilityGloinSmash
		UpdateModuleStartsAttack  = Yes
		StartsPaused		  	  = Yes
		InitiateSound				= GloinVoiceGenericSpecialAbility
	End
End
AddModule
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_SmashWeaponFireUpdate   
		SpecialPowerTemplate    = SpecialAbilityGloinSmash
		SpecialWeapon			= GloinSmashWeapon
		WhichSpecialWeapon		= 2
		StartAbilityRange		= 10.0
		
		SkipContinue			= No
		UnpackTime			= 600		; Trigger on frame 60 (of 100)
		PackTime			= 300		; Remaining 40 frames (of 100)
		MustFinishAbility		= Yes
		BusyForDuration = 2000
	End
End
AddModule
	Behavior = AutoAbilityBehavior ModuleTag_WoPAutoAbility ;;,;;
		SpecialAbility				= SpecialAbilityGloinSmash
		ForbiddenStatus = INSIDE_GARRISON ;;,;; This seems to prevent the ability from being used inside a tower
		MaxScanRange				= GLOIN_SMASH_WEAPON_RADIUS
		Query						= 75 ALL ENEMIES -STRUCTURE -WALL_UPGRADE -WALL_HUB -WALL_SEGMENT -DEFENSIVE_WALL -FS_BASE_DEFENSE ;,; 30
	End
End
ReplaceModule ModuleTag_SlayerEnabler
 	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_SlayerEnablerAtLevel6
		SpecialPowerTemplate = SpecialAbilityGimliHeroMode
		TriggeredBy = Upgrade_EnableDwarvenGloinSlam
	End
End
ReplaceModule ModuleTag_GimliHealing
	Behavior = AutoHealBehavior ModuleTag_GimliHealing_FAST
		StartsActive = Yes
		HealingAmount = 100
		HealingDelay = 1000
		StartHealingDelay = HERO_HEAL_DELAY
		HealOnlyIfNotInCombat = Yes
	End
End
End

ExperienceLevel DwarvenGimliLevel4
	TargetNames					=	DwarvenGimli
	RequiredExperience			=	DWARVEN_GIMLI_REQUIRED_EXP_LEVEL_4
	ExperienceAward				=	DWARVEN_GIMLI_AWARD_LEVEL_4
	AttributeModifiers			=	DwarvenGimliBonusRank4 GenericHeroDamageBonusRank4
	Rank						=	4
	LevelUpFx					=	FX:GoodLevelUpFX
	Upgrades					=	Upgrade_EnableDwarvenGloinShakeFoundation
	SelectionDecal
		Texture					=	decal_hero_good
		Style					=	SHADOW_ALPHA_DECAL
		OpacityMin				=	50% 
		OpacityMax				=	100% 
		MinRadius				=	DWARVEN_GIMLI_DECAL_MIN_RADIUS
		MaxRadius				=	DWARVEN_GIMLI_DECAL_MAX_RADIUS
		MaxSelectedUnits		=	40
	End
END
ExperienceLevel DwarvenGimliLevel6
	TargetNames					=	DwarvenGimli
	RequiredExperience			=	DWARVEN_GIMLI_REQUIRED_EXP_LEVEL_6
	ExperienceAward				=	DWARVEN_GIMLI_AWARD_LEVEL_6
	AttributeModifiers			=	DwarvenGimliBonusRank6 GenericHeroDamageBonusRank6
	Rank						=	6
	LevelUpFx					=	FX:GoodLevelUpFX
	Upgrades					=	Upgrade_EnableDwarvenGloinSlam
	SelectionDecal
		Texture					=	decal_hero_good
		Style					=	SHADOW_ALPHA_DECAL
		OpacityMin				=	50% 
		OpacityMax				=	100% 
		MinRadius				=	DWARVEN_GIMLI_DECAL_MIN_RADIUS
		MaxRadius				=	DWARVEN_GIMLI_DECAL_MAX_RADIUS
		MaxSelectedUnits		=	40
	End
END
ExperienceLevel DwarvenGimliLevel10
	TargetNames					=	DwarvenGimli
	RequiredExperience			=	DWARVEN_GIMLI_REQUIRED_EXP_LEVEL_10
	ExperienceAward				=	DWARVEN_GIMLI_AWARD_LEVEL_10
	AttributeModifiers			=	DwarvenGimliBonusRank10 GenericHeroDamageBonusRank10
	Rank						=	10
	LevelUpFx					=	FX:GoodLevelUpFX
	Upgrades					=	Upgrade_EnableGloinSmash
	SelectionDecal
		Texture					=	decal_hero_good
		Style					=	SHADOW_ALPHA_DECAL
		OpacityMin				=	50% 
		OpacityMax				=	100% 
		MinRadius				=	DWARVEN_GIMLI_DECAL_MIN_RADIUS
		MaxRadius				=	DWARVEN_GIMLI_DECAL_MAX_RADIUS
		MaxSelectedUnits		=	40
	End
END


;;;;;;;;;;;;;;;;;;;;;;;;
;;;                  ;;;
;;;    WITCH KING    ;;;
;;;                  ;;;
;;;;;;;;;;;;;;;;;;;;;;;;

CommandButton Command_MordorWitchkingMorgulBlade
  	Command                 = SPECIAL_POWER
  	SpecialPower            = SpecialAbilityMordorWitchkingMorgulBlade
  	Options                 = NEED_TARGET_ENEMY_OBJECT
  	TextLabel               = CONTROLBAR:MordorWitchkingMorgulCorruption
  	CursorName              = EvilAbilityObj
  	InvalidCursorName       = GenericInvalid
  	ButtonImage             = KUMorgulCorruptionIcon
  	ButtonBorderType        = ACTION
  	DescriptLabel           = Describe:MorgulCorruption
  	InPalantir		= Yes
  	AutoAbility		= Yes  
	DisableOnModelCondition 	= RIDER2
End

CommandSet WitchKing
	1 	= Command_ToggleStance
	2 	= Command_WitchKingToggleMounted
	3 	= Command_SpecialAbilityWitchKingChangeWeapon
	4   	= Command_WitchKingDreadVisage
	5 	= Command_MordorWitchkingMorgulBlade
	6   	= Command_HourOfTheWitchKing
	12 	= Command_CaptureBuilding	
	13 	= Command_AttackMove
	14 	= Command_Stop
	16  = Command_SetStanceBattle
	17  = Command_SetStanceAggressive
	18  = Command_SetStanceHoldGround
End

FXParticleSystem WormtongueBackstab
  System
    Priority = HIGH_OR_ABOVE
    Shader = ALPHA
    ParticleName = EXwaterpuddle2.tga
    Lifetime = 15 15
    SystemLifetime = 15
    SortLevel = 1
    BurstCount = 1 1
    IsEmitAboveGroundOnly = Yes
  End
  Color = DefaultColor
    Color1 = R:108 G:160 B:99 0
    Color2 = R:0 G:0 B:0 15
    ColorScale = -1 -1
  End
  Alpha = DefaultAlpha
    Alpha2 = 0.6 0.8 3
    Alpha3 = 0 0 15
  End
  Update = DefaultUpdate
    SizeRate = 5 15
    SizeRateDamping = 0.6 0.8
    AngleZ = 0 7
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = LineEmissionVolume
    StartPoint = X:0 Y:0 Z:10
    EndPoint = X:0 Y:0 Z:10
  End
  Draw = DefaultDraw
  End
End

FXList FX_PoisonHit
  ParticleSystem
    Name = WormtongueBackstab
  End
End

DamageFX NormalDamageFX
  ThrottleTime = DEFAULT 60


  AmountForMajorFX  = DEFAULT  0.0
  MajorFX           = DEFAULT  FX_NONE

  AmountForMajorFX  = GOOD_ARROW_PIERCE 0.0
  MajorFX           = GOOD_ARROW_PIERCE FX_GoodArrowHit

  AmountForMajorFX  = EVIL_ARROW_PIERCE 0.0
  MajorFX           = EVIL_ARROW_PIERCE FX_EvilArrowHit

  AmountForMajorFX  = SWORD_SLASH  0.0
  MajorFX           = SWORD_SLASH  FX_NONE
  
  AmountForMajorFX	= WITCH_KING_MORGUL_BLADE  0.0
  MajorFX			= WITCH_KING_MORGUL_BLADE  FX_WitchKingPoison
  
  AmountForMajorFX	= REFLECTED  0.0
  MajorFX			= REFLECTED  FX_WitchKingCursed
  
  AmountForMajorFX  = MAGIC  0.0
  MajorFX           = MAGIC  FX_MagicHit

  AmountForMajorFX  = BALROG_SWORD  0.0
  MajorFX           = BALROG_SWORD  FX_BalrogWeaponHit

  AmountForMajorFX  = BALROG_WHIP  0.0
  MajorFX           = BALROG_WHIP   FX_BalrogWhipHit
  
  AmountForMajorFX  = ELECTRIC  0.0
  MajorFX           = ELECTRIC   FX_ElectricityHit

  AmountForMajorFX  = BOLT  0.0
 MajorFX           = BOLT FX_BoltHit

  AmountForMajorFX  = TORNADO 0.0
  MajorFX           = TORNADO   FX_TornadoAttack
  
  AmountForMajorFX  = GIMLI_LEAP 0.0
  MajorFX           = GIMLI_LEAP   FX_GimliLeapNoVoice
  
  AmountForMajorFX	= FLOOD_HORSE 1.0
  MajorFX		= FLOOD_HORSE FX_FloodHorseCrush
  
  AmountForMajorFX  = POISON  0.0
  MajorFX           = POISON  FX_PoisonDOT
  
  AmountForMajorFX  = FIRE3 0.0
  MajorFX           = FIRE3   FX_PoisonHit
  
  AmountForMajorFX  = NECRO1  0.0
  MajorFX           = NECRO1  FX_BarrowWightDebuff
  
  AmountForMajorFX  = NECRO2  0.0
  MajorFX           = NECRO2  FX_AngmarNecroHit
  
End

Weapon MordorWitchkingMorgulBlade
	LeechRangeWeapon = Yes
	AttackRange			= 30.0
	MeleeWeapon			= Yes
	DelayBetweenShots		= 0
	PreAttackDelay			= 80   ; 1467 is the prep time for archer.
	PreAttackType			= PER_SHOT ; Do the delay each time we attack a new target
	FiringDuration			= 7000

	DamageNugget                        ; A basic Nugget that just does damage
		Damage        = 200
		Radius        = 0.0
		DelayTime     = 0
		DamageType    = MAGIC
		DamageSubType = BECOME_UNDEAD
		DamageFXType  = FIRE3
		DeathType     = NORMAL
		DrainLife     	= Yes
		DrainLifeMultiplier = 14
	End

	DOTNugget
		Damage			= 1
		Radius			= 0.0
		DelayTime		= 0
		DamageType		= POISON
		DamageFXType		= POISON
		DeathType		= NORMAL
		DamageInterval		= 100
		DamageDuration		= 20000
		SpecialObjectFilter	= AFFECTED_BY_POISON_OBJECTFILTER
	End

	ParalyzeNugget
		Radius				= 0.0
		Duration			= 7000
		SpecialObjectFilter	= CRIPPLE_STRIKE_OBJECT_FILTER
		FreezeAnimation = Yes
	End
End

Weapon WitchKingWarMace
	LeechRangeWeapon		= Yes
	AttackRange			= STANDARD_MELEE_ATTACK_RANGE
	MeleeWeapon			= Yes
	DelayBetweenShots		= WITCHKING_MACE_DELAYBETWEENSHOTS 		; time between shots, msec
	PreAttackDelay			= WITCHKING_MACE_PREATTACKDELAY 			; 300 is mace swing delay time before contact with target.
	PreAttackType			= PER_SHOT ; Do the delay each time we attack
	FireFX				= FX_GondorSwordHit
	FiringDuration			= WITCHKING_MACE_FIRINGDURATION 			; Duration of the mace swing 

	DamageNugget                        ; A basic Nugget that just does damage
		Damage        		= WITCHKING_MACE_DAMAGE						
		Radius			= 30.0
		DelayTime		= 0
		DamageType		= HERO
		DamageFXType		= MAGIC
		DeathType		= NORMAL
		DamageScalar  		= 10% NONE +RohanEowyn
		DamageScalar  		= 50% ANY ALLIES
		DamageScalar  		= 0% ANY ALLIES +STRUCTURE
	End
	MetaImpactNugget                    ; A Nugget that throws things back with force
		ShockWaveAmount		= 55
		ShockWaveRadius		= 30
		ShockWaveArc		= 120				; Should generally be equal to damage arc
		ShockWaveTaperOff	= 0.75
		ShockWaveSpeed		= 0.0
		ShockWaveZMult		= 1.4
	End
End

Object MordorWitchKing
	CommandSet = WitchKing
	WeaponSet
		Weapon          = PRIMARY	WitchKingMorgulBlade
		Weapon		= TERTIARY	MordorWitchkingMorgulBlade
	    AutoChooseSources	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	    AutoChooseSources	= SECONDARY FROM_PLAYER
	    AutoChooseSources	= TERTIARY NONE
	End
	
	WeaponSet
		Conditions	= WEAPONSET_TOGGLE_1
		Weapon		= PRIMARY	WitchKingWarMace
		Weapon		= TERTIARY	MordorWitchkingMorgulBlade
	    AutoChooseSources	= TERTIARY NONE
	End
ReplaceModule ModuleTag_WitchkingMorgulBladeStarter
	Behavior = SpecialPowerModule ModuleTag_WitchkingMorgulBladeStarterNEW
		SpecialPowerTemplate		= SpecialAbilityMordorWitchkingMorgulBlade
		UpdateModuleStartsAttack	= Yes
		StartsPaused			= Yes
	End
End
ReplaceModule ModuleTag_WitchkingMorgulBladeUpdate
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_WitchkingMorgulBladeUpdate_NEW
		SpecialPowerTemplate    = SpecialAbilityMordorWitchkingMorgulBlade
		SkipContinue			= Yes
		UnpackTime			= 250
		PreparationTime			= 1
		PersistentPrepTime		= 500
		PackTime			= 1000
		WhichSpecialWeapon		= 1
		BusyForDuration			= 1000
		
		AwardXPForTriggering	= 0		
		StartAbilityRange	= 30.0
		MustFinishAbility	= No
		
		SpecialWeapon			= MordorWitchkingMorgulBlade
		RejectedConditions            = WEAPON_TOGGLE
	End
End
ReplaceModule ModuleTag_WitchKingHealing
	Behavior = AutoHealBehavior ModuleTag_WitchKingHealing_FAST
		StartsActive			= Yes
		HealingAmount			= 100
		HealingDelay			= 1000
		StartHealingDelay		= 15000
		HealOnlyIfNotInCombat	= Yes
	End
End
End

// HEROES //

Object GondorAragorn
CommandPoints = 0
	ReplaceModule ModuleTag_RespawnUpdate
		Behavior = RespawnUpdate ModuleTag_RespawnUpdate6
			DeathAnim			= DYING				;Model condition to play when killed-to-respawn
			DeathFX				= FX_AragornDieToRespawn     	;FXList to play when killed-to-respawn
			DeathAnimationTime		= 3933				;How long DeathAnim will take.
			InitialSpawnFX			= FX_AragornInitialSpawn	;FXList to play when respawning.
			RespawnAnim			= LEVELED			;Animation to play when respawning.
			RespawnFX			= FX_ResurrectionAragorn	;FXList to play when respawning.
			RespawnAnimationTime		= 2000				;Time it takes for respawn to play.
			AutoRespawnAtObjectFilter	= NONE +CASTLE_KEEP		;Respawn at this location -- and at its exit production point if possible.
			ButtonImage			= HIAragorn_res
			
			;RespawnEntries determine the ruleset for how a character can be revived. Some units may automatically respawn, others
			;may require a specific revive action performed on him. You can specify different values for each level... or use Level:Any
			RespawnRules =	AutoSpawn:No	Cost:3000		Time:16		Health:100%		;DEFAULT VALUES
			RespawnEntry =	Level:2		Cost:3100		Time:17					;For other levels, only override what is different.
			RespawnEntry =	Level:3		Cost:3300		Time:18
			RespawnEntry =	Level:4		Cost:3600		Time:19
			RespawnEntry =	Level:5		Cost:4000		Time:20
			RespawnEntry =	Level:6		Cost:4400		Time:21
			RespawnEntry =	Level:7		Cost:4800		Time:22
			RespawnEntry =	Level:8		Cost:5200		Time:23
			RespawnEntry =	Level:9		Cost:5600		Time:24
			RespawnEntry =	Level:10	Cost:6000		Time:25
		End
	End
	BountyValue = 3000
End

Object GondorGandalf
CommandPoints = 0
	ReplaceModule ModuleTag_RespawnUpdate
		Behavior = RespawnUpdate ModuleTag_RespawnUpdate17
			DeathAnim			= DYING ;STUNNED			;Model condition to play when killed-to-respawn
			DeathFX				= FX_GandalfDieToRespawn	;FXList to play when killed-to-respawn
			DeathAnimationTime		= 5367 ;1133			;How long DeathAnim will take.
			InitialSpawnFX			= FX_GandalfInitialSpawn
			RespawnAnim			= LEVELED				;Animation to play when respawning.
			RespawnFX			= FX_GandalfRespawn		;FXList to play when respawning.
			RespawnAnimationTime		= 2000				;Time it takes for respawn to play.
			AutoRespawnAtObjectFilter	= NONE +CASTLE_KEEP		;Respawn at this location -- and at it's exit production point if possible.
			ButtonImage			= HIGandalf_res
			
			;RespawnEntries determine the ruleset for how a character can be revived. Some units may automatically respawn, others
			;may require a specific revive action performed on him. You can specify different values for each level... or use Level:Any
			RespawnRules =	AutoSpawn:No	Cost:3000		Time:16		Health:100%		;DEFAULT VALUES
			RespawnEntry =	Level:2		Cost:3100		Time:17					;For other levels, only override what is different.
			RespawnEntry =	Level:3		Cost:3300		Time:18
			RespawnEntry =	Level:4		Cost:3600		Time:19
			RespawnEntry =	Level:5		Cost:4000		Time:20
			RespawnEntry =	Level:6		Cost:4400		Time:21
			RespawnEntry =	Level:7		Cost:4800		Time:22
			RespawnEntry =	Level:8		Cost:5200		Time:23
			RespawnEntry =	Level:9		Cost:5600		Time:24
			RespawnEntry =	Level:10	Cost:6000		Time:25
		End
	End
	BountyValue = 3000
End

Object DwarvenGimli
CommandPoints = 0
	ReplaceModule ModuleTag_RespawnUpdate
		Behavior = RespawnUpdate ModuleTag_RespawnUpdate18
			DeathAnim			= DYING			;Model condition to play when killed-to-respawn
			DeathFX				= FX_GimliDieToRespawn	;FXList to play when killed-to-respawn
			DeathAnimationTime		= 4100			;How long DeathAnim will take.
			InitialSpawnFX			= FX_GimliInitialSpawn
			RespawnAnim			= LEVELED		;Animation to play when respawning.
			RespawnFX			= FX_GimliRespawn	;FXList to play when respawning.
			RespawnAnimationTime		= 2000			;Time it takes for respawn to play.
			AutoRespawnAtObjectFilter	= NONE +CASTLE_KEEP	;Respawn at this location -- and at it's exit production point if possible.
			ButtonImage			= HIGimli_res
			
			;RespawnEntries determine the ruleset for how a character can be revived. Some units may automatically respawn, others
			;may require a specific revive action performed on him. You can specify different values for each level... or use Level:Any
			RespawnRules =	AutoSpawn:No	Cost:3000		Time:16		Health:100%		;DEFAULT VALUES
			RespawnEntry =	Level:2		Cost:3100		Time:17					;For other levels, only override what is different.
			RespawnEntry =	Level:3		Cost:3300		Time:18
			RespawnEntry =	Level:4		Cost:3600		Time:19
			RespawnEntry =	Level:5		Cost:4000		Time:20
			RespawnEntry =	Level:6		Cost:4400		Time:21
			RespawnEntry =	Level:7		Cost:4800		Time:22
			RespawnEntry =	Level:8		Cost:5200		Time:23
			RespawnEntry =	Level:9		Cost:5600		Time:24
			RespawnEntry =	Level:10	Cost:6000		Time:25
		End
	End
	BountyValue = 3000
End

Object WildGoblinKing
CommandPoints = 0
	ReplaceModule ModuleTag_RespawnUpdate
		Behavior = RespawnUpdate ModuleTag_RespawnUpdate21
	;		DeathAnim			= STUNNED			;Model condition to play when killed-to-respawn
			DeathFX				= FX_GoblinKingDieToRespawn	;FXList to play when killed-to-respawn
			DeathAnim			= DYING				;Model condition to play when killed-to-respawn
			DeathAnimationTime		= 6500				;How long DeathAnim will take.
			InitialSpawnFX			= FX_GoblinKingInitialSpawn
			RespawnAnim			= LEVELED			;Animation to play when respawning.
			RespawnFX			= FX_GoblinKingRespawn		;FXList to play when respawning.
			RespawnAnimationTime		= 2000				;Time it takes for respawn to play.
			AutoRespawnAtObjectFilter	= NONE +CASTLE_KEEP		;Respawn at this location -- and at it's exit production point if possible.
			ButtonImage			= HIGoblinKing_res
			
			;RespawnEntries determine the ruleset for how a character can be revived. Some units may automatically respawn, others
			;may require a specific revive action performed on him. You can specify different values for each level... or use Level:Any
			RespawnRules =	AutoSpawn:No	Cost:3000		Time:16		Health:100%		;DEFAULT VALUES
			RespawnEntry =	Level:2		Cost:3100		Time:17					;For other levels, only override what is different.
			RespawnEntry =	Level:3		Cost:3300		Time:18
			RespawnEntry =	Level:4		Cost:3600		Time:19
			RespawnEntry =	Level:5		Cost:4000		Time:20
			RespawnEntry =	Level:6		Cost:4400		Time:21
			RespawnEntry =	Level:7		Cost:4800		Time:22
			RespawnEntry =	Level:8		Cost:5200		Time:23
			RespawnEntry =	Level:9		Cost:5600		Time:24
			RespawnEntry =	Level:10	Cost:6000		Time:25
		End
	End
	BountyValue = 3000
End

Object IsengardLurtz
CommandPoints = 0
	ReplaceModule ModuleTag_RespawnUpdate
		Behavior = RespawnUpdate ModuleTag_RespawnUpdate25
			DeathAnim			= DYING ;STUNNED		;Model condition to play when killed-to-respawn
			DeathFX				= FX_LurtzDieToRespawn		;FXList to play when killed-to-respawn
			DeathAnimationTime		= 6033 ; 1133			;How long DeathAnim will take.
			InitialSpawnFX			= FX_LurtzInitialSpawn
			RespawnAnim			= LEVELED			;Animation to play when respawning.
			RespawnFX			= FX_LurtzRespawn		;FXList to play when respawning.
			RespawnAnimationTime		= 2000				;Time it takes for respawn to play.
			AutoRespawnAtObjectFilter	= NONE +CASTLE_KEEP		;Respawn at this location -- and at it's exit production point if possible.
			ButtonImage			= HILurtz_res
		
			;RespawnEntries determine the ruleset for how a character can be revived. Some units may automatically respawn, others
			;may require a specific revive action performed on him. You can specify different values for each level... or use Level:Any
			RespawnRules =	AutoSpawn:No	Cost:3000		Time:16		Health:100%		;DEFAULT VALUES
			RespawnEntry =	Level:2		Cost:3100		Time:17					;For other levels, only override what is different.
			RespawnEntry =	Level:3		Cost:3300		Time:18
			RespawnEntry =	Level:4		Cost:3600		Time:19
			RespawnEntry =	Level:5		Cost:4000		Time:20
			RespawnEntry =	Level:6		Cost:4400		Time:21
			RespawnEntry =	Level:7		Cost:4800		Time:22
			RespawnEntry =	Level:8		Cost:5200		Time:23
			RespawnEntry =	Level:9		Cost:5600		Time:24
			RespawnEntry =	Level:10	Cost:6000		Time:25
		End
	End
	BountyValue = 3000
End

Object IsengardSaruman
CommandPoints = 0
	ReplaceModule ModuleTag_RespawnUpdate
		Behavior = RespawnUpdate ModuleTag_RespawnUpdate27
			DeathAnim			= DYING
			;DeathAnim			= STUNNED			;Model condition to play when killed-to-respawn
			DeathFX				= FX_SarumanDieToRespawn	;FXList to play when killed-to-respawn
			DeathAnimationTime		= 5500 ;1133			;How long DeathAnim will take.
			InitialSpawnFX			= FX_SarumanInitialSpawn
			RespawnAnim			= LEVELED			;Animation to play when respawning.
			RespawnFX			= FX_SarumanRespawn		;FXList to play when respawning.
			RespawnAnimationTime		= 2000				;Time it takes for respawn to play.
			AutoRespawnAtObjectFilter	= NONE +CASTLE_KEEP		;Respawn at this location -- and at it's exit production point if possible.
			ButtonImage			= HISaruman_res
			
			;RespawnEntries determine the ruleset for how a character can be revived. Some units may automatically respawn, others
			;may require a specific revive action performed on him. You can specify different values for each level... or use Level:Any
			RespawnRules =	AutoSpawn:No	Cost:3500		Time:16		Health:100%		;DEFAULT VALUES
			RespawnEntry =	Level:2		Cost:3600		Time:17					;For other levels, only override what is different.
			RespawnEntry =	Level:3		Cost:3800		Time:18
			RespawnEntry =	Level:4		Cost:4100		Time:19
			RespawnEntry =	Level:5		Cost:4500		Time:20
			RespawnEntry =	Level:6		Cost:4900		Time:21
			RespawnEntry =	Level:7		Cost:5300		Time:22
			RespawnEntry =	Level:8		Cost:5700		Time:23
			RespawnEntry =	Level:9		Cost:6100		Time:24
			RespawnEntry =	Level:10	Cost:6500		Time:25
		End
	End
	BountyValue = 3500
End

Object ElvenThranduil
CommandPoints = 0
	ReplaceModule ModuleTag_RespawnUpdate
		Behavior = RespawnUpdate ModuleTag_RespawnUpdate30
			DeathAnim			= DYING				;Model condition to play when killed-to-respawn
			DeathFX				= FX_ThranduilDieToRespawn	;FXList to play when killed-to-respawn
			DeathAnimationTime		= 3000				;How long DeathAnim will take.
			InitialSpawnFX			= FX_ThranduilInitialSpawn
			RespawnAnim			= LEVELED			;Animation to play when respawning.
			RespawnFX			= FX_ThranduilRespawn		;FXList to play when respawning.
			RespawnAnimationTime		= 2000				;Time it takes for respawn to play.
			AutoRespawnAtObjectFilter	= NONE +CASTLE_KEEP		;Respawn at this location -- and at it's exit production point if possible.
			ButtonImage			= HIThranduil_res
			
			;RespawnEntries determine the ruleset for how a character can be revived. Some units may automatically respawn, others
			;may require a specific revive action performed on him. You can specify different values for each level... or use Level:Any
			RespawnRules =	AutoSpawn:No	Cost:3000		Time:16		Health:100%		;DEFAULT VALUES
			RespawnEntry =	Level:2		Cost:3100		Time:17					;For other levels, only override what is different.
			RespawnEntry =	Level:3		Cost:3300		Time:18
			RespawnEntry =	Level:4		Cost:3600		Time:19
			RespawnEntry =	Level:5		Cost:4000		Time:20
			RespawnEntry =	Level:6		Cost:4400		Time:21
			RespawnEntry =	Level:7		Cost:4800		Time:22
			RespawnEntry =	Level:8		Cost:5200		Time:23
			RespawnEntry =	Level:9		Cost:5600		Time:24
			RespawnEntry =	Level:10	Cost:6000		Time:25
		End
	End
	BountyValue = 3000
End

Object MordorWitchKing
CommandPoints = 0
	ReplaceModule ModuleTag_RespawnUpdate
		Behavior = RespawnUpdate ModuleTag_RespawnUpdate32
			DeathAnim			= USER_1			;Model condition to play when killed-to-respawn
			DeathFX				= FX_WitchKingDeath		;FXList to play when killed-to-respawn
			DeathAnimationTime		= 5133				;How long DeathAnim will take.
			RespawnAnim			= LEVELED			;Animation to play when respawning.
			RespawnFX			= FX_Resurrection		;FXList to play when respawning.
			RespawnAnimationTime		= 2000				;Time it takes for respawn to play.
			AutoRespawnAtObjectFilter	= NONE +CASTLE_KEEP		;Respawn at this location -- and at it's exit production point if possible.
			ButtonImage			= HIWitchKing_res
			RespawnAsTemplate		= MordorWitchKing
			
			;RespawnEntries determine the ruleset for how a character can be revived. Some units may automatically respawn, others
			;may require a specific revive action performed on him. You can specify different values for each level... or use Level:Any
			RespawnRules =	AutoSpawn:No	Cost:3500		Time:16		Health:100%		;DEFAULT VALUES
			RespawnEntry =	Level:2		Cost:3600		Time:17					;For other levels, only override what is different.
			RespawnEntry =	Level:3		Cost:3800		Time:18
			RespawnEntry =	Level:4		Cost:4100		Time:19
			RespawnEntry =	Level:5		Cost:4500		Time:20
			RespawnEntry =	Level:6		Cost:4900		Time:21
			RespawnEntry =	Level:7		Cost:5300		Time:22
			RespawnEntry =	Level:8		Cost:5700		Time:23
			RespawnEntry =	Level:9		Cost:6100		Time:24
			RespawnEntry =	Level:10	Cost:6500		Time:25
		End
	End
	BountyValue = 3500
End

ChildObject MordorWitchKing_Mounted MordorWitchKing
CommandPoints = 0
	ReplaceModule ModuleTag_RespawnUpdate
		Behavior = RespawnUpdate ModuleTag_RespawnUpdate32
			DeathAnim			= USER_1			;Model condition to play when killed-to-respawn
			DeathFX				= FX_WitchKingDeath		;FXList to play when killed-to-respawn
			DeathAnimationTime		= 5133				;How long DeathAnim will take.
			RespawnAnim			= LEVELED			;Animation to play when respawning.
			RespawnFX			= FX_Resurrection		;FXList to play when respawning.
			RespawnAnimationTime		= 2000				;Time it takes for respawn to play.
			AutoRespawnAtObjectFilter	= NONE +CASTLE_KEEP		;Respawn at this location -- and at it's exit production point if possible.
			ButtonImage			= HIWitchKing_res
			RespawnAsTemplate		= MordorWitchKing
			
			;RespawnEntries determine the ruleset for how a character can be revived. Some units may automatically respawn, others
			;may require a specific revive action performed on him. You can specify different values for each level... or use Level:Any
			RespawnRules =	AutoSpawn:No	Cost:3500		Time:16		Health:100%		;DEFAULT VALUES
			RespawnEntry =	Level:2		Cost:3600		Time:17					;For other levels, only override what is different.
			RespawnEntry =	Level:3		Cost:3800		Time:18
			RespawnEntry =	Level:4		Cost:4100		Time:19
			RespawnEntry =	Level:5		Cost:4500		Time:20
			RespawnEntry =	Level:6		Cost:4900		Time:21
			RespawnEntry =	Level:7		Cost:5300		Time:22
			RespawnEntry =	Level:8		Cost:5700		Time:23
			RespawnEntry =	Level:9		Cost:6100		Time:24
			RespawnEntry =	Level:10	Cost:6500		Time:25
		End
	End
	BountyValue = 3500
End