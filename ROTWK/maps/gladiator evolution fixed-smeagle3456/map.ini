;^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
;^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^Organization List and INI File^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
;^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^Written By Smeagle3456^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
;^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

;<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Health
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

Object GondorGandalf

ReplaceModule ModuleTag_RespawnBody
	Body = RespawnBody ModuleTag_RespawnBody1
		CheerRadius 			= EMOTION_CHEER_RADIUS
		MaxHealth         		= 3300
		PermanentlyKilledByFilter	= NONE		;Who kills me permanently?
   		DodgePercent      		= HERO_DODGE_PERCENT
	End
	End
End

Object ElvenElrond

ReplaceModule ModuleTag_RespawnBody
	Body = RespawnBody ModuleTag_RespawnBody1
		CheerRadius 			= EMOTION_CHEER_RADIUS
		MaxHealth         		= 3200
		PermanentlyKilledByFilter	= NONE		;Who kills me permanently?
   		DodgePercent      		= HERO_DODGE_PERCENT
	End
	End
End

Object DwarvenGloin

ReplaceModule ModuleTag_RespawnBody
	Body = RespawnBody ModuleTag_RespawnBody1
		CheerRadius 			= EMOTION_CHEER_RADIUS
		MaxHealth         		= 4000
		PermanentlyKilledByFilter	= NONE		;Who kills me permanently?
   		DodgePercent      		= HERO_DODGE_PERCENT
	End
	End
End

Object GondorAragorn

ReplaceModule ModuleTag_RespawnBody
	Body = RespawnBody ModuleTag_RespawnBody1
		CheerRadius 			= EMOTION_CHEER_RADIUS
		MaxHealth         		= 3100
		PermanentlyKilledByFilter	= NONE		;Who kills me permanently?
   		DodgePercent      		= HERO_DODGE_PERCENT
	End
	End
End

Object ElvenHaldir

ReplaceModule ModuleTag_RespawnBody
	Body = RespawnBody ModuleTag_RespawnBody1
		CheerRadius 			= EMOTION_CHEER_RADIUS
		MaxHealth         		= 3000
		PermanentlyKilledByFilter	= NONE		;Who kills me permanently?
   		DodgePercent      		= HERO_DODGE_PERCENT
	End
	End
End

;<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Chapter 1.		   Beast Timers
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

;---Dragons---

Object SummonedDragon
	RemoveModule ModuleTag_LifetimeUpdate
End

Object SummonedDragonJH1

	RemoveModule ModuleTag_LifetimeUpdate
End

;---Balrog---

Object MordorBalrog

	RemoveModule ModuleTag_LifetimeUpdate
End

;---Watcher---

Object WatcherHead
	RemoveModule ModuleTag_LifetimeUpdate
End

Object WatcherHittingArm
	RemoveModule ModuleTag_LifetimeUpdate
End

Object WatcherCaldera
	RemoveModule ModuleTag_LifetimeUpdate
End

;---Oathbreakers---

Object RohanOathbreakerHorde
	RemoveModule ModuleTag_LifetimeUpdate
End

;--------------
;  Evil Waves
;--------------

Weapon NewAriusJaws
  LeechRangeWeapon      = Yes
  AttackRange           = 5.0
  RadiusDamageAffects   = ENEMIES NOT_SIMILAR
  MeleeWeapon           = Yes
  FireFX                = FX_GloinShatterhammer
  DelayBetweenShots     = 250			; time between shots, msec
  PreAttackDelay        = 1000 	; 400 is sword swing delay time before contact with target.
  PreAttackType         = PER_SHOT ; Do the delay each time we attack a new target
  FiringDuration        = 600 	; Duration of the sword swing
	DamageNugget                        ; A basic Nugget that just does damage
		Damage			= 400
		Radius			= 22.0
		DamageType		= MAGIC
		DamageFXType	= MAGIC
		DeathType		= EXPLODED
	End
	MetaImpactNugget                    ; A Nugget that throws things back with force
		HeroResist			= 0.75
		ShockWaveAmount   = 80.0
		ShockWaveRadius   = 60.0
		ShockWaveTaperOff = 0.5
		ShockWaveZMult    = 1.050
	End
End

Weapon AriusWave ; Big Blue Ring Blast
	IdleAfterFiringDelay = 0
	AttackRange = GANDALF_WORD_OF_POWER_RANGE
	MinimumAttackRange = 0.8
	WeaponSpeed = 401         ; dist/sec 
	MinWeaponSpeed = 241
	MaxWeaponSpeed = 601      ; dist/sec Upper limit on scaling, when attacking past nominal "max" range
	ScaleWeaponSpeed = Yes ; Used for lob weapons, scales speed proportional to range
	RadiusDamageAffects = ENEMIES NOT_SIMILAR
	DelayBetweenShots = 5000               ; time between shots, msec
	PreAttackDelay        = 2600
	PreAttackType         = PER_ATTACK ; Do the delay each time we attack a new target
	PreAttackFX           = FX_GandalfPreAttackBlastReal
	FireFX                = FX_GandalfBlast
	FiringDuration      = 1400
	DamageNugget                        ; A basic Nugget that just does damage
		Damage			= GANDALF_WORD_OF_POWER_DAMAGE
		Radius			= 250.0
		DamageType		= MAGIC
		DamageFXType	= MAGIC
		DeathType		= EXPLODED
		DamageSpeed		= 700.0 ; must match the ShockWaveSpeed below
	End
	MetaImpactNugget                    ; A Nugget that throws things back with force
;		HeroResist			= .75
		ShockWaveAmount   = 75.0
		ShockWaveRadius   = 500.0
		ShockWaveTaperOff = 1.0
		ShockWaveZMult    = 1.000
		ShockWaveSpeed	  = 700.0 
	End
End

Weapon NewEliendJaws
  LeechRangeWeapon      = Yes
  AttackRange           = 5.0
  RadiusDamageAffects   = ENEMIES NOT_SIMILAR
  MeleeWeapon           = Yes
  FireFX                = FX_GandalfSwordHit
  DelayBetweenShots     = 250			; time between shots, msec
  PreAttackDelay        = 1000 	; 400 is sword swing delay time before contact with target.
  PreAttackType         = PER_SHOT ; Do the delay each time we attack a new target
  FiringDuration        = 600 	; Duration of the sword swing
	DamageNugget                        ; A basic Nugget that just does damage
		Damage			= 450
		Radius			= 22.0
		DamageType		= MAGIC
		DamageFXType	= MAGIC
		DeathType		= EXPLODED
	End
	MetaImpactNugget                    ; A Nugget that throws things back with force
		HeroResist			= 0.20
		ShockWaveAmount   = 100.0
		ShockWaveRadius   = 360.0
		ShockWaveTaperOff = 1.0
		ShockWaveZMult    = 1.050
	End
	ParalyzeNugget
		Radius				= 10.0
		Duration			= POISONED_STINGER_DURATION
		SpecialObjectFilter	= CRIPPLE_STRIKE_OBJECT_FILTER
		ParalyzeFX			= FX_PoisonedStunEffect
	End
End

Weapon EliendWave ; Big Blue Ring Blast
	IdleAfterFiringDelay = 0
	AttackRange = GANDALF_WORD_OF_POWER_RANGE
	MinimumAttackRange = 0.8
	WeaponSpeed = 401         ; dist/sec 
	MinWeaponSpeed = 241
	MaxWeaponSpeed = 601      ; dist/sec Upper limit on scaling, when attacking past nominal "max" range
	ScaleWeaponSpeed = Yes ; Used for lob weapons, scales speed proportional to range
	RadiusDamageAffects = ENEMIES NOT_SIMILAR
	DelayBetweenShots = 5000               ; time between shots, msec
	PreAttackDelay        = 2600
	PreAttackType         = PER_ATTACK ; Do the delay each time we attack a new target
	PreAttackFX           = FX_GandalfPreAttackBlastReal
	FireFX                = FX_GandalfBlast
	FiringDuration      = 1400
	DamageNugget                        ; A basic Nugget that just does damage
		Damage			= GANDALF_WORD_OF_POWER_DAMAGE
		Radius			= 250.0
		DamageType		= MAGIC
		DamageFXType	= MAGIC
		DeathType		= EXPLODED
		DamageSpeed		= 700.0 ; must match the ShockWaveSpeed below
	End
	MetaImpactNugget                    ; A Nugget that throws things back with force
;		HeroResist			= .75
		ShockWaveAmount   = 75.0
		ShockWaveRadius   = 500.0
		ShockWaveTaperOff = 1.0
		ShockWaveZMult    = 1.000
		ShockWaveSpeed	  = 700.0 
	End
End

;-----
;Arius
;-----

ChildObject NeutralGollum_RingHero NeutralWarg
End

Object NeutralGollum_RingHero
  	KindOf          = HERO PRELOAD SELECTABLE CAN_CAST_REFLECTIONS MONSTER SCORE CAN_ATTACK NO_FREEWILL_ENTER PATH_THROUGH_INFANTRY SCARY BIG_MONSTER CAN_ATTACK_WALLS
	DisplayName = Arius

	Scale		= 2.2

	ShockwaveResistance = SHOCKWAVE_RESISTANCE_ALWAYS

		WeaponSet
		Conditions				= None
		Weapon					= PRIMARY NewAriusJaws
		AutoChooseSources		= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
End

;;;commands;;;

	CommandButton Command_SpecialAbilityWordOfPower
	Command				= SPECIAL_POWER 
	SpecialPower		= SpecialAbilityWordOfPower
	TextLabel			= CONTROLBAR:Slayer
	ButtonImage			= HSGandolf_radcircle
	ButtonBorderType	= ACTION 
	DescriptLabel		= CONTROLBAR:ToolTipSlayer
	UnitSpecificSound	= GimliModeSlayerMS
	InPalantir			= Yes
	AutoAbility			= Yes
End

	CommandSet AriusCommandSet
	1	= Command_ToggleStance
	2  	= Command_SpecialAbilityWordOfPower
	12 	= Command_CaptureBuilding
	13 	= Command_AttackMove
	14 	= Command_Stop
End

Object NeutralGollum_RingHero

	CommandSet = AriusCommandSet

	AddModule
	Behavior = GrantUpgradeCreate ModuleTag_ariusgrant
		UpgradeToGrant = Upgrade_GandalfWordOfPower  ;
	End 
	End
	AddModule
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_awopEnabler
		SpecialPowerTemplate = SpecialAbilityWordOfPower
		TriggeredBy = Upgrade_GandalfWordOfPower
	End
	End
	AddModule
	Behavior = SpecialPowerModule ModuleTag_awopStarter       
		SpecialPowerTemplate      = SpecialAbilityWordOfPower
		UpdateModuleStartsAttack  = Yes
		StartsPaused		  	  = Yes
	End
	End
	AddModule
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_awopWeaponFireUpdate   
		SpecialPowerTemplate    = SpecialAbilityWordOfPower
		WhichSpecialWeapon		= 1
		SkipContinue			= Yes

		UnpackTime              = 100
		PackTime                = 1	
		FreezeAfterTriggerDuration = 2500 ; Hold AI for this long after we fire.
		
		AwardXPForTriggering    = 0		
		StartAbilityRange		= 80.0
		
		SpecialWeapon			= AriusWave
	End
	End
End

;======
;Eliend
;======


ChildObject NeutralGollum NeutralWarg
End

Object NeutralGollum
	KindOf          = HERO PRELOAD SELECTABLE CAN_CAST_REFLECTIONS MONSTER SCORE CAN_ATTACK NO_FREEWILL_ENTER PATH_THROUGH_INFANTRY SCARY BIG_MONSTER CAN_ATTACK_WALLS
	DisplayName = Eliend

	Scale		= 2.0

	ShockwaveResistance = SHOCKWAVE_RESISTANCE_ALWAYS

		WeaponSet
		Conditions				= None
		Weapon					= PRIMARY NewEliendJaws
		AutoChooseSources		= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
End

;;;commands;;;

	CommandButton Command_SpecialAbilityWordOfPower
	Command				= SPECIAL_POWER 
	SpecialPower		= SpecialAbilityWordOfPower
	TextLabel			= CONTROLBAR:Slayer
	ButtonImage			= HSGandolf_radcircle
	ButtonBorderType	= ACTION 
	DescriptLabel		= CONTROLBAR:ToolTipSlayer
	UnitSpecificSound	= GimliModeSlayerMS
	InPalantir			= Yes
	AutoAbility			= Yes
End

	CommandSet EliendCommandSet
	1	= Command_ToggleStance
	2  	= Command_SpecialAbilityWordOfPower
	12 	= Command_CaptureBuilding
	13 	= Command_AttackMove
	14 	= Command_Stop
End

Object NeutralGollum

	CommandSet = EliendCommandSet

	AddModule
	Behavior = GrantUpgradeCreate ModuleTag_eliendgrant
		UpgradeToGrant = Upgrade_GandalfWordOfPower  ;
	End 
	End
	AddModule
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_ewopEnabler
		SpecialPowerTemplate = SpecialAbilityWordOfPower
		TriggeredBy = Upgrade_GandalfWordOfPower
	End
	End
	AddModule
	Behavior = SpecialPowerModule ModuleTag_ewopStarter       
		SpecialPowerTemplate      = SpecialAbilityWordOfPower
		UpdateModuleStartsAttack  = Yes
		StartsPaused		  	  = Yes
	End
	End
	AddModule
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_ewopWeaponFireUpdate   
		SpecialPowerTemplate    = SpecialAbilityWordOfPower
		WhichSpecialWeapon		= 1
		SkipContinue			= Yes

		UnpackTime              = 100 
		PackTime                = 1	
		FreezeAfterTriggerDuration = 2500 ; Hold AI for this long after we fire.
		
		AwardXPForTriggering    = 0		
		StartAbilityRange		= 80.0
		
		SpecialWeapon			= EliendWave
	End
	End
End

CommandButton Command_WildShelobPoisonedStinger
  Command                 = SPECIAL_POWER
  SpecialPower            = SpecialAbilityWildShelobPoisonedStinger
  Options                 = NEED_TARGET_ENEMY_OBJECT
  TextLabel               = CONTROLBAR:WildShelobPoisonedStinger
  CursorName              = EvilAbilityObj
  InvalidCursorName       = GenericInvalid
  ButtonImage             = HSShelobPoisonedStinger
  ButtonBorderType        = ACTION
  DescriptLabel           = CONTROLBAR:ToolTipWildShelobPoisonedStinger
  ;UnitSpecificSound       = LurtzVoiceModeCripplingStrike
  InPalantir			  = Yes
  AutoAbility			  = Yes
End

CommandSet SuperSpiderCommandSet
	1	= Command_ToggleStance
	2  	= Command_WildShelobPoisonedStinger
	12 	= Command_CaptureBuilding
	13 	= Command_AttackMove
	14 	= Command_Stop
End

Object MinorSpider
	KindOf          = HERO PRELOAD SELECTABLE CAN_CAST_REFLECTIONS MONSTER SCORE CAN_ATTACK NO_FREEWILL_ENTER PATH_THROUGH_INFANTRY SCARY BIG_MONSTER CAN_ATTACK_WALLS
	DisplayName = Servant of Maia
	ButtonImage = BWSpiderPit_Spiderling 
	SelectPortrait = WOR_Spiderling

	ShockwaveResistance = SHOCKWAVE_RESISTANCE_ALWAYS

	ArmorSet
		Conditions      = None
		Armor           = ShelobArmor
		DamageFX        = NormalDamageFX
	End

	Scale		= 2.78

End

Object MinorSpider

	CommandSet = SuperSpiderCommandSet

	AddModule
	Behavior = GrantUpgradeCreate ModuleTag_spidergrant
		UpgradeToGrant = Upgrade_ObjectLevel6  ;
	End 
	End
	AddModule
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_spiderStingerEnabler
		SpecialPowerTemplate = SpecialAbilityWildShelobPoisonedStinger
		TriggeredBy = Upgrade_ObjectLevel6
	End
	End
	AddModule
	Behavior = SpecialPowerModule ModuleTag_spiderStingerStarter
		SpecialPowerTemplate		= SpecialAbilityWildShelobPoisonedStinger
		UpdateModuleStartsAttack	= Yes
		StartsPaused			= Yes
		InitiateSound			= ShelobVoxPoisonStinger
	End
	End
	AddModule
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_spiderStingerUpdate
		SpecialPowerTemplate    = SpecialAbilityWildShelobPoisonedStinger
		SkipContinue			= Yes

		UnpackTime				= 100
		PreparationTime			= 100
		MustFinishAbility		= Yes
		
		AwardXPForTriggering		= 0
		StartAbilityRange			= 15.0
		
		SpecialWeapon				= WildShelobPoisonedStinger
		WhichSpecialWeapon			= 1
	End
	End
End

Object EvilMenBlackRiderMounted

ReplaceModule ModuleTag_RespawnBody
	Body = RespawnBody ModuleTag_RespawnBody1
		CheerRadius 			= EMOTION_CHEER_RADIUS
		MaxHealth         		= 6100
		MaxHealthDamaged		= 200
		PermanentlyKilledByFilter	= NONE		;Who kills me permanently?
   		DodgePercent      		= HERO_DODGE_PERCENT
	End
	End
End

ChildObject BarrowWight MordorBalrog
	RemoveModule ModuleTag_LifetimeUpdate
End

;<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Chapter 2. Fortress/Workers
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

PlayerTemplate FactionMen
	StartingBuilding			=
	StartingUnit1 =
	StartingUnit0 =
End

PlayerTemplate FactionElves
	StartingBuilding			=
	StartingUnit1 =
	StartingUnit0 =
End

PlayerTemplate FactionDwarves
	StartingBuilding			=
	StartingUnit1 =
	StartingUnit0 =
End

PlayerTemplate FactionIsengard
	StartingBuilding			=
	StartingUnit1 =
	StartingUnit0 =
End

PlayerTemplate FactionMordor
	StartingBuilding			=
	StartingUnit1 =
	StartingUnit0 =
End

PlayerTemplate FactionWild
	StartingBuilding			=
	StartingUnit1 =
	StartingUnit0 =
End

;<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Chapter 3.	   Misc. Particle Systems
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

;<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Sword Bone Haze, Bat Ribs, and Head
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

;<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Fire Realm: Saruman and Aragon God Of Fire
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

;<<<<<<<
;Saruman
;>>>>>>>

FXParticleSystem SarumanStaffFire
  System
    Priority = ALWAYS_RENDER
    Shader = ALPHA
    ParticleName = EXFireScroll3.tga  ;EXFireScroll2.tga
    Lifetime = 38 28
    SortLevel = 1
    Size = 6 6
    BurstCount = 5 5
  End
  Color = DefaultColor
    Color2 = R:255 G:106 B:34 5
    Color3 = R:255 G:106 B:34 15
    Color4 = R:0 G:0 B:0 25
;    Color2 = R:185 G:106 B:40 5
;    Color3 = R:200 G:95 B:38 15
;    Color4 = R:200 G:90 B:32 25
  End
  Alpha = DefaultAlpha
    Alpha2 = -1.5 -1.7 5
    Alpha3 = -1.2 -1.5 15
    Alpha4 = -1.2 -1.5 25
  End
  Update = DefaultUpdate
    SizeRate = 0.1 0.1
    SizeRateDamping = 1 1
    AngleZ = 7 7
    AngularRateZ = -0.1 0.1
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    Gravity = -0.01
    VelocityDamping = 1 1
  End
  EmissionVelocity = OutwardEmissionVelocity
  End
  EmissionVolume = SphereEmissionVolume
    Radius = 3
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem FireBodyHaze
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXFire01.tga ;EXLnzFlar2.tga
    Lifetime = 5 5
    SortLevel = 1
    Size = 20 25
    BurstCount = 4 6
    InitialDelay = 15 15
    IsParticleUpTowardsEmitter = Yes
  End
  Color = DefaultColor
    Color2 = R:255 G:106 B:34 5
    Color3 = R:255 G:106 B:34 20
  End
  Update = DefaultUpdate
    SizeRate = -0.25 -0.25
    SizeRateDamping = 1 1
    AngleZ = -7 7
    AngularDamping = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = LineEmissionVolume
    EndPoint = X:0 Y:0 Z:15
  End
  Draw = DefaultDraw
  End
End

;<<<<<
;Argon
;>>>>>

FXParticleSystem ArgonFlameHaze
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXSplatHaze.tga
    Lifetime = 5 5
    SortLevel = 1
    Size = 5 10
    BurstCount = 4 6
    InitialDelay = 15 15
    IsParticleUpTowardsEmitter = Yes
  End
  Color = DefaultColor
    Color2 = R:000 G:179 B:170 5
    Color3 = R:00 G:00 B:00 20
  End
  Update = DefaultUpdate
    SizeRate = -0.25 -0.25
    SizeRateDamping = 1 1
    AngleZ = -7 7
    AngularDamping = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = LineEmissionVolume
    EndPoint = X:0 Y:0 Z:15
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem ArgonFlameSword
  System
    Priority = VERY_LOW_OR_ABOVE
    ParticleName = EXFireScroll3.tga
    Lifetime = 30 30
    SystemLifetime = 10
    SortLevel = 1
    Size = 4 13
    BurstCount = 1 1
    IsEmitAboveGroundOnly = Yes
  End
  Color = DefaultColor
    Color2 = R:000 G:179 B:170 3
    Color3 = R:000 G:179 B:170 10
    Color4 = R:0 G:0 B:0 28
  End
  Update = DefaultUpdate
    SizeRate = -0.25 -0.15
    SizeRateDamping = 0.99 0.99
    AngularRateZ = -0.05 0.05
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.8 0.85
    DriftVelocity = X:0 Y:0 Z:1
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = -0.4 -0.4
  End
  EmissionVolume = CylinderEmissionVolume
    IsHollow = Yes
  End
  Draw = DefaultDraw
  End
  Wind = DefaultWind
    WindMotion = PingPong
    WindStrength = 0.1
    WindAngleChangeMin = 0.149924
    WindAngleChangeMax = 0.449946
    WindPingPongStartAngleMax = 0.785398
    WindPingPongEndAngleMin = 5.49779
    WindPingPongEndAngleMax = 6.28319
  End
End

;<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Rock Realm: and Taragorn God Of Rock
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

;<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Shadow Realm: Witch King, Nazgul, and The Necromancer Of Shadow
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

;<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Venom Realm: Maia God Of The Underworld
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

;<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Water Realm: Haldir and Idrial God Of Water
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

;<<<<<<
;Idrial
;>>>>>>

FXParticleSystem IdrialWaterHaze
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXSplatHaze.tga
    Lifetime = 5 5
    SortLevel = 1
    Size = 5 10
    BurstCount = 4 6
    InitialDelay = 15 15
    IsParticleUpTowardsEmitter = Yes
  End
  Color = DefaultColor
    Color2 = R:000 G:179 B:170 5
    Color3 = R:00 G:00 B:00 20
  End
  Update = DefaultUpdate
    SizeRate = -0.25 -0.25
    SizeRateDamping = 1 1
    AngleZ = -7 7
    AngularDamping = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = LineEmissionVolume
    EndPoint = X:0 Y:0 Z:15
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem IdrialWaterSword
  System
    Priority = VERY_LOW_OR_ABOVE
    ParticleName = EXFireScroll3.tga
    Lifetime = 30 30
    SystemLifetime = 10
    SortLevel = 1
    Size = 4 13
    BurstCount = 1 1
    IsEmitAboveGroundOnly = Yes
  End
  Color = DefaultColor
    Color2 = R:000 G:179 B:170 3
    Color3 = R:000 G:179 B:170 10
    Color4 = R:0 G:0 B:0 28
  End
  Update = DefaultUpdate
    SizeRate = -0.25 -0.15
    SizeRateDamping = 0.99 0.99
    AngularRateZ = -0.05 0.05
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.8 0.85
    DriftVelocity = X:0 Y:0 Z:1
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = -0.4 -0.4
  End
  EmissionVolume = CylinderEmissionVolume
    IsHollow = Yes
  End
  Draw = DefaultDraw
  End
  Wind = DefaultWind
    WindMotion = PingPong
    WindStrength = 0.1
    WindAngleChangeMin = 0.149924
    WindAngleChangeMax = 0.449946
    WindPingPongStartAngleMax = 0.785398
    WindPingPongEndAngleMin = 5.49779
    WindPingPongEndAngleMax = 6.28319
  End
End

;<<<<<<
;Haldir
;>>>>>>

FXParticleSystem WaterHaze
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXFire01.tga ;EXLnzFlar2.tga
    Lifetime = 5 5
    SortLevel = 1
    Size = 5 10
    BurstCount = 4 6
    InitialDelay = 15 15
    IsParticleUpTowardsEmitter = Yes
  End
  Color = DefaultColor
    Color2 = R:000 G:235 B:225 5
    Color3 = R:00 G:00 B:00 20
  End
  Update = DefaultUpdate
    SizeRate = -0.25 -0.25
    SizeRateDamping = 1 1
    AngleZ = -7 7
    AngularDamping = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = LineEmissionVolume
    EndPoint = X:0 Y:0 Z:15
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem WaterSword
  System
    Priority = VERY_LOW_OR_ABOVE
    ParticleName = EXFireScroll3.tga
    Lifetime = 30 30
    SystemLifetime = 10
    SortLevel = 1
    Size = 4 13
    BurstCount = 1 1
    IsEmitAboveGroundOnly = Yes
  End
  Color = DefaultColor
    Color2 = R:000 G:225 B:225 3
    Color3 = R:000 G:225 B:225 10
    Color4 = R:0 G:0 B:0 28
  End
  Update = DefaultUpdate
    SizeRate = -0.25 -0.15
    SizeRateDamping = 0.99 0.99
    AngularRateZ = -0.05 0.05
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.8 0.85
    DriftVelocity = X:0 Y:0 Z:1
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = -0.4 -0.4
  End
  EmissionVolume = CylinderEmissionVolume
    IsHollow = Yes
  End
  Draw = DefaultDraw
  End
  Wind = DefaultWind
    WindMotion = PingPong
    WindStrength = 0.1
    WindAngleChangeMin = 0.149924
    WindAngleChangeMax = 0.449946
    WindPingPongStartAngleMax = 0.785398
    WindPingPongEndAngleMin = 5.49779
    WindPingPongEndAngleMax = 6.28319
  End
End

FXList FX_WaterSword
  ParticleSystem
    Name = WaterSword
    Offset = X:0.0 Y:0.0 Z:5.0
  End
  ParticleSystem
    Name = WaterHaze
    Offset = X:0.0 Y:0.0 Z:5.0
  End
 Sound
    Name = GandalfBlastWeapon
  End
End

FXParticleSystem Water
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXFire01.tga ;EXLnzFlar2.tga
    Lifetime = 5 5
    SortLevel = 1
    Size = 5 10
    BurstCount = 4 6
    InitialDelay = 15 15
    IsParticleUpTowardsEmitter = Yes
  End
  Color = DefaultColor
    Color2 = R:000 G:000 B:255 5
    Color3 = R:00 G:00 B:00 20
  End
  Update = DefaultUpdate
    SizeRate = -0.25 -0.25
    SizeRateDamping = 1 1
    AngleZ = -7 7
    AngularDamping = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = LineEmissionVolume
    EndPoint = X:0 Y:0 Z:15
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem WaterSword2
  System
    Priority = VERY_LOW_OR_ABOVE
    ParticleName = EXFireScroll3.tga
    Lifetime = 30 30
    SystemLifetime = 10
    SortLevel = 1
    Size = 4 13
    BurstCount = 1 1
    IsEmitAboveGroundOnly = Yes
  End
  Color = DefaultColor
    Color2 = R:000 G:000 B:255 3
    Color3 = R:000 G:000 B:255 10
    Color4 = R:0 G:0 B:0 28
  End
  Update = DefaultUpdate
    SizeRate = -0.25 -0.15
    SizeRateDamping = 0.99 0.99
    AngularRateZ = -0.05 0.05
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.8 0.85
    DriftVelocity = X:0 Y:0 Z:1
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = -0.4 -0.4
  End
  EmissionVolume = CylinderEmissionVolume
    IsHollow = Yes
  End
  Draw = DefaultDraw
  End
  Wind = DefaultWind
    WindMotion = PingPong
    WindStrength = 0.1
    WindAngleChangeMin = 0.149924
    WindAngleChangeMax = 0.449946
    WindPingPongStartAngleMax = 0.785398
    WindPingPongEndAngleMin = 5.49779
    WindPingPongEndAngleMax = 6.28319
  End
End

FXList FX_WaterSword
  ParticleSystem
    Name = WaterSword2
    Offset = X:0.0 Y:0.0 Z:5.0
  End
  ParticleSystem
    Name = Water
    Offset = X:0.0 Y:0.0 Z:5.0
  End
 Sound
    Name = GandalfBlastWeapon
  End
End

;<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Forest Realm: Aragorn and Aranel God Of The Forest
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

;<<<<<<<
;Aragorn
;>>>>>>>

FXParticleSystem WindHaze
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXFire01.tga ;EXLnzFlar2.tga
    Lifetime = 5 5
    SortLevel = 1
    Size = 5 10
    BurstCount = 4 6
    InitialDelay = 15 15
    IsParticleUpTowardsEmitter = Yes
  End
  Color = DefaultColor
    Color2 = R:000 G:111 B:000 5
    Color3 = R:00 G:00 B:00 20
  End
  Update = DefaultUpdate
    SizeRate = -0.25 -0.25
    SizeRateDamping = 1 1
    AngleZ = -7 7
    AngularDamping = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = LineEmissionVolume
    EndPoint = X:0 Y:0 Z:15
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem WindSword
  System
    Priority = VERY_LOW_OR_ABOVE
    ParticleName = EXFireScroll3.tga
    Lifetime = 30 30
    SystemLifetime = 10
    SortLevel = 1
    Size = 4 13
    BurstCount = 1 1
    IsEmitAboveGroundOnly = Yes
  End
  Color = DefaultColor
    Color2 = R:000 G:111 B:000 3
    Color3 = R:000 G:111 B:000 10
    Color4 = R:0 G:0 B:0 28
  End
  Update = DefaultUpdate
    SizeRate = -0.25 -0.15
    SizeRateDamping = 0.99 0.99
    AngularRateZ = -0.05 0.05
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.8 0.85
    DriftVelocity = X:0 Y:0 Z:1
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = -0.4 -0.4
  End
  EmissionVolume = CylinderEmissionVolume
    IsHollow = Yes
  End
  Draw = DefaultDraw
  End
  Wind = DefaultWind
    WindMotion = PingPong
    WindStrength = 0.1
    WindAngleChangeMin = 0.149924
    WindAngleChangeMax = 0.449946
    WindPingPongStartAngleMax = 0.785398
    WindPingPongEndAngleMin = 5.49779
    WindPingPongEndAngleMax = 6.28319
  End
End

FXList FX_WindSword
  ParticleSystem
    Name = WindSword
    Offset = X:0.0 Y:0.0 Z:5.0
  End
  ParticleSystem
    Name = WindHaze
    Offset = X:0.0 Y:0.0 Z:5.0
  End
 Sound
    Name = GandalfBlastWeapon
  End
End

;<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Light Realm: Gandalf and The Heavenly God Of Light
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

;<<<<<<<
;Gandalf
;>>>>>>>

FXParticleSystem FlameHaze
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXFire01.tga ;EXLnzFlar2.tga
    Lifetime = 5 5
    SortLevel = 1
    Size = 5 10
    BurstCount = 4 6
    InitialDelay = 15 15
    IsParticleUpTowardsEmitter = Yes
  End
  Color = DefaultColor
    Color2 = R:249 G:253 B:172 5
    Color3 = R:00 G:00 B:00 20
  End
  Update = DefaultUpdate
    SizeRate = -0.25 -0.25
    SizeRateDamping = 1 1
    AngleZ = -7 7
    AngularDamping = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = LineEmissionVolume
    EndPoint = X:0 Y:0 Z:15
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem FlameSword
  System
    Priority = VERY_LOW_OR_ABOVE
    ParticleName = EXFireScroll3.tga
    Lifetime = 30 30
    SystemLifetime = 10
    SortLevel = 1
    Size = 4 13
    BurstCount = 1 1
    IsEmitAboveGroundOnly = Yes
  End
  Color = DefaultColor
    Color2 = R:249 G:253 B:172 3
  End
  Update = DefaultUpdate
    SizeRate = -0.25 -0.15
    SizeRateDamping = 0.99 0.99
    AngularRateZ = -0.05 0.05
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.8 0.85
    DriftVelocity = X:0 Y:0 Z:1
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = -0.4 -0.4
  End
  EmissionVolume = CylinderEmissionVolume
    IsHollow = Yes
  End
  Draw = DefaultDraw
  End
  Wind = DefaultWind
    WindMotion = PingPong
    WindStrength = 0.1
    WindAngleChangeMin = 0.149924
    WindAngleChangeMax = 0.449946
    WindPingPongStartAngleMax = 0.785398
    WindPingPongEndAngleMin = 5.49779
    WindPingPongEndAngleMax = 6.28319
  End
End

FXList FX_FireSword
  ParticleSystem
    Name = FlameSword
    Offset = X:0.0 Y:0.0 Z:5.0
  End
 Sound
    Name = GandalfBlastWeapon
  End
End

;<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Weather Realm: Elrond and Elegost God Of Weather
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

;<<<<<<
;Elrond
;>>>>>>

FXParticleSystem SpiritHaze
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXFire01.tga ;EXLnzFlar2.tga
    Lifetime = 5 5
    SortLevel = 1
    Size = 5 10
    BurstCount = 4 6
    InitialDelay = 15 15
    IsParticleUpTowardsEmitter = Yes
  End
  Color = DefaultColor
    Color2 = R:116 G:000 B:232 5
    Color3 = R:116 G:000 B:232 20
  End
  Update = DefaultUpdate
    SizeRate = -0.25 -0.25
    SizeRateDamping = 1 1
    AngleZ = -7 7
    AngularDamping = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = LineEmissionVolume
    EndPoint = X:0 Y:0 Z:15
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem SpiritSword
  System
    Priority = VERY_LOW_OR_ABOVE
    ParticleName = EXFireScroll3.tga
    Lifetime = 30 30
    SystemLifetime = 10
    SortLevel = 1
    Size = 4 13
    BurstCount = 1 1
    IsEmitAboveGroundOnly = Yes
  End
  Color = DefaultColor
    Color2 = R:116 G:000 B:232 3
    Color3 = R:116 G:000 B:232 10
    Color4 = R:0 G:0 B:0 28
  End
  Update = DefaultUpdate
    SizeRate = -0.25 -0.15
    SizeRateDamping = 0.99 0.99
    AngularRateZ = -0.05 0.05
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.8 0.85
    DriftVelocity = X:0 Y:0 Z:1
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = -0.4 -0.4
  End
  EmissionVolume = CylinderEmissionVolume
    IsHollow = Yes
  End
  Draw = DefaultDraw
  End
  Wind = DefaultWind
    WindMotion = PingPong
    WindStrength = 0.1
    WindAngleChangeMin = 0.149924
    WindAngleChangeMax = 0.449946
    WindPingPongStartAngleMax = 0.785398
    WindPingPongEndAngleMin = 5.49779
    WindPingPongEndAngleMax = 6.28319
  End
End

FXList FX_SpiritSword
  ParticleSystem
    Name = SpiritSword
    Offset = X:0.0 Y:0.0 Z:5.0
  End
  ParticleSystem
    Name = SpiritHaze
    Offset = X:0.0 Y:0.0 Z:5.0
  End
 Sound
    Name = GandalfBlastWeapon
  End
End

;)))))
;Gimli
;(((((

FXParticleSystem AxeHaze
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXFire01.tga ;EXLnzFlar2.tga
    Lifetime = 5 5
    SortLevel = 1
    Size = 10 17
    BurstCount = 4 6
    InitialDelay = 15 15
    IsParticleUpTowardsEmitter = Yes
  End
  Color = DefaultColor
    Color2 = R:255 G:111 B:40 5
    Color3 = R:00 G:00 B:00 20
  End
  Update = DefaultUpdate
    SizeRate = -0.25 -0.25
    SizeRateDamping = 1 1
    AngleZ = -7 7
    AngularDamping = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = LineEmissionVolume
    EndPoint = X:0 Y:0 Z:15
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem AxeSword
  System
    Priority = VERY_LOW_OR_ABOVE
    ParticleName = EXFireScroll3.tga
    Lifetime = 30 30
    SystemLifetime = 10
    SortLevel = 1
    Size = 4 13
    BurstCount = 1 1
    IsEmitAboveGroundOnly = Yes
  End
  Color = DefaultColor
    Color2 = R:255 G:111 B:40 3
    Color3 = R:255 G:111 B:40 10
    Color4 = R:0 G:0 B:0 28
  End
  Update = DefaultUpdate
    SizeRate = -0.25 -0.15
    SizeRateDamping = 0.99 0.99
    AngularRateZ = -0.05 0.05
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.8 0.85
    DriftVelocity = X:0 Y:0 Z:1
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = -0.4 -0.4
  End
  EmissionVolume = CylinderEmissionVolume
    IsHollow = Yes
  End
  Draw = DefaultDraw
  End
  Wind = DefaultWind
    WindMotion = PingPong
    WindStrength = 0.1
    WindAngleChangeMin = 0.149924
    WindAngleChangeMax = 0.449946
    WindPingPongStartAngleMax = 0.785398
    WindPingPongEndAngleMin = 5.49779
    WindPingPongEndAngleMax = 6.28319
  End
End

FXList FX_SpiritSword
  ParticleSystem
    Name = AxeSword
    Offset = X:0.0 Y:0.0 Z:5.0
  End
  ParticleSystem
    Name = AxeHaze
    Offset = X:0.0 Y:0.0 Z:5.0
  End
 Sound
    Name = GandalfBlastWeapon
  End
End
;<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Chapter 4.	          Spellbook
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

CommandSet WarOfTheRealmsSpellBookCommandSet
    1 = Command_SpellBookRallyingCall
    2 = Command_SpellBookEyeofSauron
    3 = Command_SpellBookHeal

    4 = Command_SpellBookScavenger
    5 = Command_SpellBookBarricade
    6 = Command_SpellBookElvenGifts
    7 = Command_SpellBookArrowVolleyEvil 
    
    8 = Command_SpellBookEvilBombard
    9 = Command_SpellBookDarkness
    10 = Command_SpellBookAwakenWyrm
    
    11 = Command_SpellBookBalrogAlly
    12 = Command_SpellBookRainOfFire
End

CommandSet WarOfTheRealmsSpellStoreCommandSet
    1 = Command_PurchaseSpellRallyingCallMP
    2 = Command_PurchaseSpellEyeofSauron
    3 = Command_PurchaseSpellHeal

    4 = Command_PurchaseSpellScavenger
    5 = Command_PurchaseSpellBarricade
    6 = Command_PurchaseSpellElvenGifts
    7 = Command_PurchaseSpellArrowVolleyEvil

    8 = Command_PurchaseSpellEvilBombard
    9 = Command_PurchaseSpellDarkness
    10 = Command_PurchaseSpellAwakenWyrm
    
    11 = Command_PurchaseSpellBalrogAlly
    12 = Command_PurchaseSpellRainOfFire
End

Object MordorSpellBook
	CommandSet          = WarOfTheRealmsSpellBookCommandSet
End

;<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;Chapter 5.	          Weather/Fog
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

FXParticleSystem AtmosphericHaze1
  System
    Priority = ALWAYS_RENDER
    Shader = ALPHA
    ParticleName = EXCloud02.tga
    Lifetime = 500 500
    Size = 75 75
    BurstDelay = 1 1
    BurstCount = 3 3
  End
  Color = DefaultColor
    Color1 = R:127 G:127 B:127 0
  End
  Alpha = DefaultAlpha
    Alpha2 = 0.2 0.2 50
    Alpha3 = 0 0 100
  End
  Update = DefaultUpdate
    SizeRateDamping = 1.01 1.01
    AngleZ = 0 7
    AngularRateZ = -0.01 0.01
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
    DriftVelocity = X:0.16 Y:0.16 Z:0.24
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = CylinderEmissionVolume
    Radius = 540
    Length = 24
  End
  Draw = DefaultDraw
  End
End

Object CINE_AtmosphericHaze

;  ReplaceModule ModuleTag_01
  AddModule
  Draw = W3DScriptedModelDraw ModuleTag_011
    DefaultModelConditionState
      Model = None
      ParticleSysBone = None AtmosphericHaze1
    End
  End
  End
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
;		Heros
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

;<<<<<<<
;Saruman
;>>>>>>>

;>>
;FX
;>>

;>>>>>>>>>>>>>
;Word Of Power
;>>>>>>>>>>>>>

FXParticleSystem FlameWave
  System
    Priority = ALWAYS_RENDER
    Shader = W3D_EMISSIVE
    Type = DRAWABLE
    ParticleName = exwatersphere.w3d
    Lifetime = 2500 2500
    SystemLifetime = 25
    StartSizeRate = 0.2 0.2
    BurstCount = 1 1
  End
  Color = DefaultColor
    Color1 = R:250 G:150 B:70 0
    Color2 = R:0 G:0 B:0 39
  End
  Alpha = DefaultAlpha
    Alpha1 = 0.3 0.3 0
  End
  Update = DefaultUpdate
    SizeRate = 0.5 0.5
    SizeRateDamping = 1 1
    AngleZ = -500 500
    AngularRateZ = -0.1 0.1
    AngularDamping = 0.97 0.97
    Rotation = ROTATE_Z
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = PointEmissionVolume
  End
  Draw = RenderObjectDraw
  End
End

FXList FX_Flame
  ParticleSystem
    Name = FlameWave
    Offset = X:0.0 Y:0.0 Z:5.0
  End
  Sound
    Name = GandalfBlastWeapon
  End
End

;>>>>>>>>>>>>
;Wizard Blast
;>>>>>>>>>>>>

FXParticleSystem WizardBlast00
  System
    Priority = ALWAYS_RENDER
    Shader = W3D_EMISSIVE
    Type = DRAWABLE
    ParticleName = exspirefireball.w3d
    Lifetime = 2500 2500
    SystemLifetime = 25
    StartSizeRate = 0.2 0.2
    BurstCount = 1 1
  End
  Color = DefaultColor
    Color1 = R:250 G:150 B:70 0
    Color2 = R:0 G:0 B:0 39
  End
  Alpha = DefaultAlpha
    Alpha1 = 0.3 0.3 0
  End
  Update = DefaultUpdate
    SizeRate = 0.5 0.5
    SizeRateDamping = 1 1
    AngleZ = -500 500
    AngularRateZ = -0.1 0.1
    AngularDamping = 0.97 0.97
    Rotation = ROTATE_Z
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = PointEmissionVolume
  End
  Draw = RenderObjectDraw
  End
End

FXList FX_WizardBlastNew
  ParticleSystem
    Name = WizardBlast00
    Offset = X:0.0 Y:0.0 Z:5.0
  End
  ParticleSystem
    Name = FlameWaveInitialCenter
    Offset = X:0.0 Y:0.0 Z:5.0
  End
  Sound
    Name = GandalfBlastWeapon
  End
End

;<<<<<<<
;Weapons
;>>>>>>>

Weapon SarumanWeapon
  LeechRangeWeapon      = Yes
  AttackRange           = 10.0
  RadiusDamageAffects   = ENEMIES NOT_SIMILAR
  MeleeWeapon           = Yes
  FireFX                = FX_BalrogSwordHit ; TEMPORARY
  DelayBetweenShots     = 250			; time between shots, msec
  PreAttackDelay        = 1000 	; 400 is sword swing delay time before contact with target.
  PreAttackType         = PER_SHOT ; Do the delay each time we attack a new target
  FiringDuration        = 600 	; Duration of the sword swing
	DamageNugget                        ; A basic Nugget that just does damage
		Damage			= 100
		Radius			= 22.0
		DamageType		= FLAME	
		DamageFXType	= ELECTRIC
		DeathType		= BURNED
	End
	MetaImpactNugget                    ; A Nugget that throws things back with force
		HeroResist			= 0.75
		ShockWaveAmount   = 50.0
		ShockWaveRadius   = 30.0.0
		ShockWaveTaperOff = 0.5
		ShockWaveZMult    = 1.050
	End
End

;<<<<<<<<<<<<<<<
;Ability Weapons
;>>>>>>>>>>>>>>>

Weapon SarumanWizardBlast
  LeechRangeWeapon      = Yes
  AttackRange           = 10.0
  RadiusDamageAffects   = ENEMIES NOT_SIMILAR
  MeleeWeapon           = Yes
  FireFX                = FX_WizardBlastNew
  DelayBetweenShots     = 300 			; time between shots, msec
  PreAttackDelay        = 400 	; 400 is sword swing delay time before contact with target.
  PreAttackType         = PER_SHOT ; Do the delay each time we attack a new target
  FiringDuration        = 400 	; Duration of the sword swing
	DamageNugget                        ; A basic Nugget that just does damage
		Damage			= 170
		DamageArc 		= 300
		Radius			= 25.0
		DamageType		= FLAME
		DamageFXType	= ELECTRIC
		DeathType		= BURNED
		DamageSpeed		= 300.0 ; must match the ShockWaveSpeed below
	End
	MetaImpactNugget                    ; A Nugget that throws things back with force
		HeroResist			= 0.75
		ShockWaveAmount   = 40.0
		ShockWaveArc	  = 200
		ShockWaveRadius   = 360.0
		ShockWaveTaperOff = 1.25
		ShockWaveZMult    = 1.3
		ShockWaveSpeed	  = 300.0
	End
End

Weapon SarumanHeroSword
  LeechRangeWeapon      = Yes
  AttackRange           = 10.0
  MeleeWeapon           = Yes
  DelayBetweenShots     = 100
  PreAttackDelay        = 533
  PreAttackType         = PER_SHOT
  FireFX                = FX_GandalfLightningSwordHit
  FiringDuration        = 400
  RadiusDamageAffects = ENEMIES NOT_SIMILAR
  ClearNuggets
  DamageNugget
    Damage        = 400
    Radius        = 66.0
    DelayTime     = 0
    DamageType    = MAGIC
    DamageFXType  = MAGIC
    DeathType     = EXPLODED
    DamageArc     = 600
    DamageSpeed		= 500.0 ; must match the ShockWaveSpeed below
  End
  MetaImpactNugget
    HeroResist			= .00
    ShockWaveAmount   = 200.0		
    ShockWaveRadius   = 50.0
    ShockWaveTaperOff = 1.750
    ShockWaveArc      = 600
    ShockWaveSpeed	  = 500.0
  End
End

Weapon SarumanWave
	IdleAfterFiringDelay = 0
	AttackRange = 400
	MinimumAttackRange = 0.8
	WeaponSpeed = 301
	MinWeaponSpeed = 300
	MaxWeaponSpeed = 302
	ScaleWeaponSpeed = Yes
	RadiusDamageAffects = ENEMIES NOT_SIMILAR
	DelayBetweenShots = 5000
	PreAttackDelay        = 2600
	PreAttackType         = PER_ATTACK
      FireFX					= FX_Flame
      ClearNuggets
	DamageNugget
		Damage			= 350
		Radius			= 200.0
		DamageType		= FLAME
		DamageFXType	= ELECTRIC
		DeathType		= BURNED
		DamageSpeed		= 180.0 ; must match the ShockWaveSpeed below
	End
	MetaImpactNugget
		ShockWaveAmount   = 150.0
		ShockWaveRadius   = 140.0
		ShockWaveTaperOff	= 1.0
		ShockWaveSpeed	  = 180.0
		ShockWaveZMult    = 1.000
	End
	MetaImpactNugget
		ShockWaveAmount   = 60.0
		ShockWaveRadius   = 280.0
		ShockWaveTaperOff	= 1.0
		ShockWaveSpeed	  = 180.0
		ShockWaveZMult    = 0.9
	End
	MetaImpactNugget
		ShockWaveAmount   = 50.0
		ShockWaveRadius   = 380.0
		ShockWaveTaperOff	= 1.0
		ShockWaveSpeed	  = 180.0
		ShockWaveZMult    = 0.8
	End
End

Weapon SarumanLightningBlastWeapon
	AttackRange					= SARUMAN_LIGHTNING_RANGE				;600
	WeaponSpeed					= 801      ; dist/sec 
	HitPercentage				= 100		; When this weapon is used it will hit exactly 100% of the time.
	DelayBetweenShots			= 4500		; time between shots, msec
	PreAttackDelay            = 200  ; 1467 is the prep time for archer.  
	PreAttackType             = PER_SHOT ; Do the delay each time we attack a new target
	FiringDuration            = 1   ; Duration of the archer firing shot is 500ms.
	FireFX						= FX_SarumanLightning
	FiringDuration      		= 50
	AntiAirborneVehicle			= Yes
	AntiAirborneMonster			= Yes

	RadiusDamageAffects = ENEMIES NOT_SIMILAR
	ProjectileCollidesWith = ENEMIES NEUTRAL STRUCTURES WALLS

	DamageNugget                        ; A basic Nugget that just does damage
		Damage        		= SARUMAN_LIGHTNING_DAMAGE_FLAME			
		DamageType    		= FLAME
		DamageFXType  		= BOLT
		DeathType     		= BURNED
		Radius				 = 500.0
		DelayTime			 = 200  
	End

	DamageNugget                        ; A basic Nugget that just does damage
		Damage        		= SARUMAN_LIGHTNING_DAMAGE			
		DamageType    		= FLAME
		DamageFXType  		= ELECTRIC
		DeathType     		= BURNED
		Radius				 = 500.0
	End
	
	MetaImpactNugget                    ; A Nugget that throws things back with force
;		HeroResist          =   0.75
		ShockWaveAmount		= 400.0
		ShockWaveRadius		= 360.0
		ShockWaveTaperOff	= 1.0
		DelayTime			= 200		;The target is dying before the laser appears in the new laser tweak, so try to kill when the laser turns on
	End

	WeaponOCLNugget
		WeaponOCLName	= OCL_SarumanLightningBlastLighting
	End
	
End

Weapon SarumanStaffWeapon
	AttackRange					= SARUMAN_LIGHTNING_RANGE				;600
	WeaponSpeed					= 801      ; dist/sec 
	HitPercentage				= 100		; When this weapon is used it will hit exactly 100% of the time.
	DelayBetweenShots			= 4500		; time between shots, msec
	PreAttackDelay            = 200  ; 1467 is the prep time for archer.  
	PreAttackType             = PER_SHOT ; Do the delay each time we attack a new target
	FiringDuration            = 1   ; Duration of the archer firing shot is 500ms.
	FireFX						= FX_GandalfBeamWeapon
	FiringDuration      		= 50
	AntiAirborneVehicle			= Yes
	AntiAirborneMonster			= Yes

	RadiusDamageAffects = ENEMIES NOT_SIMILAR
	ProjectileCollidesWith = ENEMIES NEUTRAL STRUCTURES WALLS

	DamageNugget                        ; A basic Nugget that just does damage
		Damage        		= SARUMAN_LIGHTNING_DAMAGE_FLAME			
		DamageType    		= FLAME
		DamageFXType  		= BOLT
		DeathType     		= BURNED
		Radius				 = 500.0
		DelayTime			 = 200  
	End

	DamageNugget                        ; A basic Nugget that just does damage
		Damage        		= SARUMAN_LIGHTNING_DAMAGE			
		DamageType    		= FLAME
		DamageFXType  		= ELECTRIC
		DeathType     		= BURNED
		Radius				 = 500.0
	End
	
	MetaImpactNugget                    ; A Nugget that throws things back with force
;		HeroResist          =   0.75
		ShockWaveAmount		= 400.0
		ShockWaveRadius		= 360.0
		ShockWaveTaperOff	= 1.0
		DelayTime			= 200		;The target is dying before the laser appears in the new laser tweak, so try to kill when the laser turns on
	End

	WeaponOCLNugget
		WeaponOCLName	= OCL_SarumanLightningBlastLighting
	End
	
End

;<<<<<<<<<<<<<
; Level Ups
;>>>>>>>>>>>>>

ExperienceLevel	SarumanLevel1
	TargetNames					= IsengardSaruman
	RequiredExperience				= 1	
	ExperienceAward					= SARUMAN_LVL1_EXP_AWARD
	Rank						= 1
	SelectionDecal
		Texture					= decal_hero_evil	
		Style					= SHADOW_ALPHA_DECAL
		OpacityMin				= 50%	
		OpacityMax				= 100%
		MinRadius				= 40
		MaxRadius				= 200
		MaxSelectedUnits			= 40
	End	
End	

ExperienceLevel	SarumanLevel2
	TargetNames					= IsengardSaruman
	RequiredExperience				= SARUMAN_LVL2_EXP_NEEDED 
	ExperienceAward					= SARUMAN_LVL2_EXP_AWARD	
	AttributeModifiers				= HeroLevelUpDamage1
	Rank						= 2
	LevelUpFx					= FX:GandalfLevelUp1FX
	SelectionDecal
		Texture					= decal_hero_evil	
		Style					= SHADOW_ALPHA_DECAL
		OpacityMin				= 50%	
		OpacityMax				= 100%
		MinRadius				= 40
		MaxRadius				= 200
		MaxSelectedUnits			= 40
	End	
END	

ExperienceLevel	SarumanLevel3
	TargetNames					= IsengardSaruman
	RequiredExperience			= SARUMAN_LVL3_EXP_NEEDED 
	ExperienceAward				= SARUMAN_LVL3_EXP_AWARD	
	AttributeModifiers			= HeroLevelUpDamage2
	Rank						= 3
	Upgrades					= Upgrade_GandalfIstariLight
	LevelUpFx					= FX:GandalfLevelUp1FX
	SelectionDecal
		Texture					= decal_hero_evil
		Style					= SHADOW_ALPHA_DECAL
		OpacityMin				= 50%	
		OpacityMax				= 100%
		MinRadius				= 40
		MaxRadius				= 200
		MaxSelectedUnits			= 40
	End	
END	

ExperienceLevel	SarumanLevel4
	TargetNames					= IsengardSaruman
	RequiredExperience				= SARUMAN_LVL4_EXP_NEEDED 
	ExperienceAward					= SARUMAN_LVL4_EXP_AWARD	
	AttributeModifiers				= HeroLevelUpDamage3
	Rank						= 4
	LevelUpFx					= FX:GandalfLevelUp1FX
	Upgrades					= Upgrade_AragornBladeMaster
	
	SelectionDecal
		Texture					= decal_hero_evil
		Style					= SHADOW_ALPHA_DECAL
		OpacityMin				= 50%	
		OpacityMax				= 100%
		MinRadius				= 40
		MaxRadius				= 200
		MaxSelectedUnits		= 40
	End	
END	

ExperienceLevel	SarumanLevel5
	TargetNames					= IsengardSaruman
	RequiredExperience			= SARUMAN_LVL5_EXP_NEEDED 
	ExperienceAward				= SARUMAN_LVL5_EXP_AWARD	
	AttributeModifiers			= HeroLevelUpDamage4
	Rank						= 5
	LevelUpFx					= FX:GandalfLevelUp1FX
	Upgrades					= Upgrade_SarumanSpeechCraft
	SelectionDecal
		Texture					= decal_hero_evil
		Style					= SHADOW_ALPHA_DECAL
		OpacityMin				= 50%	
		OpacityMax				= 100%
		MinRadius				= 40
		MaxRadius				= 200
		MaxSelectedUnits		= 40
	End	
END	

ExperienceLevel	SarumanLevel6
	TargetNames				= IsengardSaruman
	RequiredExperience	= SARUMAN_LVL6_EXP_NEEDED 
	ExperienceAward		  =	SARUMAN_LVL6_EXP_AWARD	
	AttributeModifiers	= HeroLevelUpDamage5
	Rank						= 6
	LevelUpFx				  =	FX:GandalfLevelUp1FX
	
	SelectionDecal
		Texture					= decal_hero_evil
		Style					  =	SHADOW_ALPHA_DECAL
		OpacityMin			  =	50%	
		OpacityMax			  =	100%
		MinRadius				= 40
		MaxRadius				= 200
		MaxSelectedUnits	= 40
	End	
END	

ExperienceLevel	SarumanLevel7
	TargetNames				= IsengardSaruman
	RequiredExperience	= SARUMAN_LVL7_EXP_NEEDED 
	ExperienceAward		  =	SARUMAN_LVL7_EXP_AWARD	
	AttributeModifiers	= HeroLevelUpDamage6
	Rank						= 7
	LevelUpFx				  =	FX:GandalfLevelUp1FX
	SelectionDecal
		Texture					= decal_hero_evil
		Style					  =	SHADOW_ALPHA_DECAL
		OpacityMin			  =	50%	
		OpacityMax			  =	100%
		MinRadius				= 40
		MaxRadius				= 200
		MaxSelectedUnits	= 40
	End	
END	

ExperienceLevel	SarumanLevel8
	TargetNames				= IsengardSaruman
	RequiredExperience	= SARUMAN_LVL8_EXP_NEEDED 
	ExperienceAward		  =	SARUMAN_LVL8_EXP_AWARD	
	AttributeModifiers	= HeroLevelUpDamage7
	Rank						= 8
	Upgrades					=	Upgrade_SarumanThunderBolt
	LevelUpFx				  =	FX:GandalfLevelUp1FX
	SelectionDecal
		Texture					= decal_hero_evil
		Style					  =	SHADOW_ALPHA_DECAL
		OpacityMin			  =	50%	
		OpacityMax			  =	100%
		MinRadius				= 40
		MaxRadius				= 200
		MaxSelectedUnits	= 40
	End	

END	

ExperienceLevel	SarumanLevel9
	TargetNames				= IsengardSaruman
	RequiredExperience	= SARUMAN_LVL9_EXP_NEEDED 
	ExperienceAward		  =	SARUMAN_LVL9_EXP_AWARD	
	AttributeModifiers	= HeroLevelUpDamage8
	Rank						= 9
	LevelUpFx				  =	FX:GandalfLevelUp1FX
	SelectionDecal
		Texture					= decal_hero_evil
		Style					  =	SHADOW_ALPHA_DECAL
		OpacityMin			  =	50%	
		OpacityMax			  =	100%
		MinRadius				= 40
		MaxRadius				= 200
		MaxSelectedUnits	= 40
	End	
END	

ExperienceLevel	SarumanLevel10
	TargetNames					= IsengardSaruman
	RequiredExperience			= SARUMAN_LVL10_EXP_NEEDED 
	ExperienceAward				= SARUMAN_LVL10_EXP_AWARD	
	AttributeModifiers			= HeroLevelUpDamage9
	Rank						= 10
	LevelUpFx					=	FX:GandalfLevelUp1FX
	Upgrades					=	Upgrade_GandalfWordOfPower
	SelectionDecal
		Texture					= decal_hero_evil
		Style					=	SHADOW_ALPHA_DECAL
		OpacityMin				=	50%	
		OpacityMax				=	100%
		MinRadius				= 40
		MaxRadius				= 200
		MaxSelectedUnits		= 40
	End	
END

;<<<<<<<<<<<<<<<<<<<<<<<<
; Saruman Ability Timers
;>>>>>>>>>>>>>>>>>>>>>>>>

SpecialPower SpecialAbilityIsengardWizardBlast
	Enum			= SPECIAL_WIZARD_BLAST
	ReloadTime		= 550000
	PublicTimer		= No
End

SpecialPower SpecialAbilityPowerOf7th
	Enum			= SPECIAL_WORD_OF_POWER
	ReloadTime		= 180000
	PublicTimer		= No
End

;<<<<<<<<<<<<<<<<<<<<<<
;Saruman Commandbuttons
;>>>>>>>>>>>>>>>>>>>>>>	

CommandButton Command_SpellBookRainOfFire
  Command                 = SPECIAL_POWER 
  SpecialPower            = SpecialAbilityPowerOf7th
  Options                 = NONE
  TextLabel               = CONTROLBAR:SarumanFireWave
  ButtonImage             = SBEvil_RainOfFire
  ButtonBorderType        = ACTION 
  DescriptLabel           = CONTROLBAR:ToolTipSarumanFireWave
  AutoAbility			  = Yes
  PresetRange			  = 120.0
  InPalantir			  = Yes
End

CommandButton Command_SpellBookBalrogAlly
  Command                 = SPECIAL_POWER 
  SpecialPower            = SpecialAbilityAragornBladeMaster
  Options                 = NONE
  TextLabel               = CONTROLBAR:FlamesOfRuin
  ButtonImage             = SBEvil_BalrogAlly
  ButtonBorderType        = ACTION 
  DescriptLabel           = CONTROLBAR:ToolTipFlamesOfRuin
  AutoAbility			  = Yes
  PresetRange			  = 120.0
  InPalantir			  = Yes
End

CommandButton Command_SpecialAbilityFireWhip
	Command		= SPECIAL_POWER
	SpecialPower    = SpecialPowerTelekeneticPush
	Options		= NEED_TARGET_ENEMY_OBJECT ; CONTEXTEMODE_COMMAND
	TextLabel	= CONTROLBAR:WizardBlastNewS
	ButtonImage	= SBEvil_Darkness
	ButtonBorderType= ACTION
	DescriptLabel	= CONTROLBAR:ToolTipWizardBlastNewS
	CursorName	= Bombard
	InvalidCursorName = GenericInvalid
	AutoAbility	= Yes
	PresetRange	= 120.0
;	 UnitSpecificSound = 
	InPalantir	= Yes
End

CommandButton Command_SpecialAbilityIgnite
  Command                 = SPECIAL_POWER 
  SpecialPower            = SpecialAbilityIstariLight
  Options                 = NEED_TARGET_ENEMY_OBJECT NEED_TARGET_ALLY_OBJECT NEED_TARGET_NEUTRAL_OBJECT ; CONTEXTMODE_COMMAND
  TextLabel               = CONTROLBAR:FireBomb
  ButtonImage             = HSBalrogIgnite
  ButtonBorderType        = ACTION 
  DescriptLabel           = CONTROLBAR:ToolTipFireBomb
;  UnitSpecificSound       = 
  CursorName              = EvilAbilityObj
  InvalidCursorName       = GenericInvalid
  InPalantir			  = Yes
  AutoAbility			  = Yes
  PresetRange			  = 200.0
End

CommandButton Command_SpellBookDragonStrike
  Command                 = SPECIAL_POWER 
  SpecialPower            = SpecialAbilityLightingBolt
  Options                 = NEED_TARGET_POS
  TextLabel               = CONTROLBAR:DragonCalling
  ButtonImage             = SBEvil_DragonStrike
  RadiusCursorType        = DragonStrikeRadiusCursor
  InvalidCursorName       = GenericInvalid
  ButtonBorderType        = ACTION 
  DescriptLabel           = CONTROLBAR:ToolTipDragonCalling
  AutoAbility			  = Yes
  InPalantir			  = Yes
End

;>>>>>>>>>>>>>>>>>>>>>
;Saruman NewCommandSet
;<<<<<<<<<<<<<<<<<<<<<

CommandSet NewSarumanCommandSet
  1  = Command_ToggleStance
  2  = Command_SpecialAbilityFireWhip
  3  = Command_SpecialAbilityIgnite
  4  = Command_SpellBookBalrogAlly
  5  = Command_SpellBookDragonStrike
  6  = Command_SpellBookRainOfFire
	12 = Command_CaptureBuilding
	13 = Command_AttackMove
	14 = Command_Stop
        
End

Object IsengardSaruman
 CommandSet = NewSarumanCommandSet
End

;>>>>>
;MISC.
;>>>>>

Object IsengardSaruman

	AddModule	
	Behavior = ExperienceLevelCreate ModuleTag_MPLevelBonus1
		LevelToGrant = 10
		MPOnly = Yes
	End
	End

	WeaponSet
		Conditions		= WEAPONSET_HERO_MODE
		Weapon			= PRIMARY    SarumanHeroSword
	End

	WeaponSet
		Conditions				= None
		Weapon					= PRIMARY SarumanWeapon
		AutoChooseSources		= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End

	ArmorSet
		Conditions      = MOUNTED
		Armor           = GandalfArmorMounted
		DamageFX        = NormalDamageFX
	End

	DisplayMeleeDamage = 110

  	KindOf          = HERO PRELOAD SELECTABLE CAN_CAST_REFLECTIONS MONSTER SCORE CAN_ATTACK NO_FREEWILL_ENTER PATH_THROUGH_INFANTRY SCARY BIG_MONSTER CAN_ATTACK_WALLS
	DisplayName = Saruman Servant Of Argon

	ReplaceModule ModuleTag_SarumanHealing
	Behavior = AutoHealBehavior ModuleTag_SarumanHealing1
		StartsActive = Yes
		HealingAmount = 100
		HealingDelay = 1000
		StartHealingDelay = 8000
		HealOnlyIfNotInCombat = Yes
	End
	End

;<<<<<<<
;Modules
;>>>>>>>

      AddModule
 	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_wordofpowerEnabler
		SpecialPowerTemplate	= SpecialAbilityPowerOf7th
		TriggeredBy				= Upgrade_GandalfWordOfPower
	End
      End
      AddModule
	Behavior = SpecialPowerModule ModuleTag_WordStarter       
		SpecialPowerTemplate      = SpecialAbilityPowerOf7th
		UpdateModuleStartsAttack  = Yes
		StartsPaused		  	  = Yes
		InitiateSound			= FellBeastVoiceAttack
	End
      End
      AddModule
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_WordWeaponFireUpdate   
		SpecialPowerTemplate    = SpecialAbilityPowerOf7th
		WhichSpecialWeapon		= 1
		SkipContinue			= Yes
		UnpackTime              = 1000 
		PackTime                = 1		
		FreezeAfterTriggerDuration = 2500
		AwardXPForTriggering    = 0		
		StartAbilityRange		= 80.0
		SpecialWeapon			= SarumanWave
	End
        End

 	AddModule
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_AragornBladeMasterEnabler
		SpecialPowerTemplate = SpecialAbilityAragornBladeMaster
		TriggeredBy = Upgrade_AragornBladeMaster
	End
      End
      AddModule
  	Behavior = SpecialPowerModule ModuleTag_AragornBladeMasterStarter
		SpecialPowerTemplate    = SpecialAbilityAragornBladeMaster
		StartsPaused			= Yes
            TriggerFX                  = FX_WizardBlastNew
	End
      End
      	AddModule
	Behavior = HeroModeSpecialAbilityUpdate ModuleTag_AragornBladeMasterUpdate
		SpecialPowerTemplate    = SpecialAbilityAragornBladeMaster
		HeroAttributeModifier	= AsernorothBane
		HeroEffectDuration		= 30000 ; in milliseconds
		UnpackTime              = 1
	End
	End

	AddModule
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_istariEnabler
		SpecialPowerTemplate = SpecialAbilityIstariLight
		TriggeredBy = Upgrade_GandalfIstariLight
	End
	End
	AddModule
	Behavior = SpecialPowerModule ModuleTag_istariPower                      
		SpecialPowerTemplate		= SpecialAbilityIstariLight
		UpdateModuleStartsAttack	= Yes
		StartsPaused			= Yes
		InitiateSound			= GandalfVoiceAttackIstariLight	;this plays when he targets, not when he fires
	End
	End
	AddModule
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_istariUpdate
		SpecialPowerTemplate    = SpecialAbilityIstariLight
		SkipContinue			= Yes
		UnpackTime              = 2000 
 		PreparationTime         = 1  
 		PersistentPrepTime      = 2000
 		PackTime                = 500
		AwardXPForTriggering    = 0
		StartAbilityRange		= GANDALF_PHASER_CAST_RANGE ; Note: This has to be smaller than the weapon range or it'll never succeed
		ApproachRequiresLOS		= Yes		
		SpecialWeapon			= SarumanStaffWeapon
		MustFinishAbility		= Yes
		WhichSpecialWeapon		= 3
		BusyForDuration			= 2500
	End
	End
	AddModule	
	Behavior = ExperienceLevelCreate ModuleTag_saruman10
		LevelToGrant = 10
		MPOnly = Yes
	End
	End
End

;<<<<<<<<<<<<<<<<<<<
; Argon God Of Fire
;>>>>>>>>>>>>>>>>>>>

;>>
;FX
;>>

FXParticleSystem BalrogManeFire1
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXFire01.tga
    Lifetime = 5 5
    SortLevel = 1
    Size = 18 18
    BurstCount = 2 2
  End
  Color = DefaultColor
    Color2 = R:223 G:108 B:53 2
    Color3 = R:0 G:0 B:0 10
    ColorScale = -5 -5
  End
  Update = DefaultUpdate
    SizeRate = 0.4 0.4
    SizeRateDamping = 1 1
    AngleZ = -5 5
    AngularRateZ = -0.05 0.05
    AngularDamping = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.5 1
    DriftVelocity = X:0 Y:-1.0 Z:-0.1
  End
  EmissionVelocity = OutwardEmissionVelocity
    Speed = -0.3 -0.3
    OtherSpeed = -0.4 -0.4
  End
  EmissionVolume = BoxEmissionVolume
    HalfSize = X:0 Y:0 Z:0
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem BalrogManeEmbers1
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXEmbersLight.tga
    Lifetime = 100 100
    SortLevel = 1
    Size = 10 20
    BurstDelay = 2 5
    BurstCount = 1 1
  End
  Color = DefaultColor
    Color1 = R:255 G:135 B:80 0
    Color2 = R:0 G:0 B:0 50
    ColorScale = -5 0
  End
  Update = DefaultUpdate
    SizeRate = 6 6
    SizeRateDamping = 0.8 0.85
    AngleZ = -0.3 0.3
    AngularRateZ = -0.03 0.03
    AngularDamping = 0.99 0.99
  End
  Physics = DefaultPhysics
    Gravity = 0.008
    VelocityDamping = 0.9 0.9
    DriftVelocity = X:0 Y:0 Z:0.64
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = LineEmissionVolume
    IsHollow = Yes
    StartPoint = X:-22 Y:0 Z:8
    EndPoint = X:25 Y:0 Z:5
  End
  Draw = DefaultDraw
  End
  Wind = DefaultWind
    WindMotion = PingPong
    WindStrength = 0.5
    WindAngleChangeMin = 0.017453
    WindAngleChangeMax = 0.034907
    WindPingPongStartAngleMax = 0.785398
    WindPingPongEndAngleMin = 5.49779
    WindPingPongEndAngleMax = 6.28319
  End
End

FXParticleSystem BalrogManeFlare1
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXLnzFlar1.tga
    Lifetime = 20 20
    SortLevel = 1
    Size = 20 20
    BurstCount = 1 2
  End
  Color = DefaultColor
    Color2 = R:255 G:119 B:45 2
    Color3 = R:0 G:0 B:0 20
    ColorScale = -15 -5
  End
  Update = DefaultUpdate
    SizeRateDamping = 1 1
    AngleZ = -5 5
    AngularRateZ = -0.05 0.05
    AngularDamping = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.9 1
    DriftVelocity = X:0 Y:0 Z:2
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = -0.4 -0.4
    Y = -0.4 -0.4
  End
  EmissionVolume = BoxEmissionVolume
    HalfSize = X:12 Y:7 Z:5
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem BalrogSwordFlare1
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXLnzFlar1.tga
    Lifetime = 60 60
    SortLevel = 1
    Size = 35 45
    BurstCount = 1 2
  End
  Color = DefaultColor
    Color2 = R:180 G:108 B:49 5
    Color3 = R:0 G:0 B:0 30
    ColorScale = -5 0
  End
  Update = DefaultUpdate
    SizeRateDamping = 1 1
    AngleZ = -5 5
    AngularRateZ = -0.05 0.05
    AngularDamping = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 2.9 1
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = 0 2
    Y = 0 2
    Z = 0 2
  End
  EmissionVolume = LineEmissionVolume
    IsHollow = Yes
    EndPoint = X:0 Y:0 Z:70
  End
  Draw = DefaultDraw
  End
  Wind = DefaultWind
    WindMotion = Circular
    WindStrength = 1
    WindAngleChangeMin = 0.872665
    WindAngleChangeMax = 2.61799
  End
End

FXParticleSystem BalrogWingSmokeLite1
  System
    Priority = ALWAYS_RENDER
    Shader = ALPHA
    ParticleName = EXCloud06.tga
    Lifetime = 175 175
    SortLevel = 1
    Size = 25 40
    BurstDelay = 3 7
    BurstCount = 1 2
    IsEmitAboveGroundOnly = Yes
  End
  Color = DefaultColor
    Color1 = R:191 G:77 B:0 1
    Color2 = R:44 G:37 B:31 35
  End
  Alpha = DefaultAlpha
    Alpha2 = 0.2 0.4 50
    Alpha3 = 0 0 100
  End
  Update = DefaultUpdate
    SizeRate = 2 4
    SizeRateDamping = 0.96 0.98
    AngleZ = 0 7
    AngularRateZ = -0.03 0.03
    AngularDamping = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.95 0.9
    DriftVelocity = X:0.08 Y:0.08 Z:0.8
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = 1 0.4
    Y = -0.4 0.4
    Z = -0.4 3
  End
  EmissionVolume = CylinderEmissionVolume
    IsHollow = Yes
    Radius = 8
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem BladeMasterHit
  System
    Priority = ALWAYS_RENDER
    Shader = ALPHA
    ParticleName = EXSmokePuf07.tga
    PerParticleAttachedSystem = GandalfBlastDustCore
    Lifetime = 850 850
    SystemLifetime = 90
    Size = 15 20
    BurstCount = 40 65
    InitialDelay = 5 5
  End
  Color = DefaultColor
    Color1 = R:250 G:100 B:30 0
  End
  Alpha = DefaultAlpha
    Alpha1 = 0.2 0.2 0
    Alpha2 = -2 0 100
  End
  Update = DefaultUpdate
    SizeRate = 3 15
    SizeRateDamping = 0.8 0.8
    AngleZ = 0 7
    AngularRateZ = -0.1 -0.1
    AngularDamping = 0.92 0.94
    Rotation = ROTATE_V
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.92 0.94
    DriftVelocity = X:0.032 Y:0.064 Z:0.15
  End
  EmissionVelocity = OutwardEmissionVelocity
    Speed = 20 20
  End
  EmissionVolume = CylinderEmissionVolume
    Radius = 12
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem ExplodeWave
  System
    Priority = ALWAYS_RENDER
    IsOneShot = Yes
    ParticleName = EXexplo03.tga
    Lifetime = 500 500
    SystemLifetime = 20
    Size = 80 100
    BurstCount = 5 5
    InitialDelay = 5 5
  End
  Color = DefaultColor
    Color2 = R:250 G:150 B:70 5
    Color3 = R:0 G:0 B:0 50
  End
  Alpha = DefaultAlpha
    Alpha2 = 0.75 1 5
    Alpha3 = -0.5 0 10
  End
  Update = DefaultUpdate
    SizeRate = 10 20
    SizeRateDamping = 0.9 0.95
    AngleZ = -7 7
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = CylinderEmissionVolume
    IsHollow = Yes
    RadiusRate = 5
    Offset = X:0 Y:0 Z:6
  End
  Draw = DefaultDraw
  End
End

FXList FX_ArgonWord
  ParticleSystem
    Name = BladeMasterHit
    Offset = X:0.0 Y:0.0 Z:5.0
  End
  ParticleSystem
    Name = ExplodeWave
    Offset = X:0.0 Y:0.0 Z:5.0
  End
  Sound
    Name = GandalfBlastWeapon
  End
End

FXList FX_ArgonBladeMaster
  ParticleSystem
    Name = BladeMasterHit
    Offset = X:0.0 Y:0.0 Z:5.0
  End
   Sound
    Name = GandalfBlastWeapon
  End
End

ModifierList ArgonBlade
	Category = WEAPON
	Modifier = DAMAGE_MULT 120%
	Modifier = ARMOR 100%
	Modifier = SPEED 200%
	Duration = 200
	FX		 = FX_ArgonBladeMaster
End

FXParticleSystem RainExp
  System
    Priority = VERY_LOW_OR_ABOVE
    IsOneShot = Yes
    ParticleName = EXexplo03.tga
    Lifetime = 50 50
    SystemLifetime = 50
    Size = 20 30
    BurstCount = 5 5
    InitialDelay = 10 10
  End
  Color = DefaultColor
    Color2 = R:250 G:150 B:70 5
    Color3 = R:0 G:0 B:0 50
  End
  Alpha = DefaultAlpha
    Alpha2 = 0.75 1 5
    Alpha3 = -0.5 0 10
  End
  Update = DefaultUpdate
    SizeRate = 5 10
    SizeRateDamping = 0.9 0.95
    AngleZ = -7 7
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = CylinderEmissionVolume
    IsHollow = Yes
    RadiusRate = 5
    Offset = X:0 Y:0 Z:10
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem RainExp02
  System
    Priority = VERY_LOW_OR_ABOVE
    IsOneShot = Yes
    Shader = ALPHA
    ParticleName = EXfireballblue.tga
    Lifetime = 35 35
    SystemLifetime = 45
    Size = 15 20
    BurstCount = 5 5
    InitialDelay = 13 13
  End
  Color = DefaultColor
    Color1 = R:250 G:150 B:70 0
    Color2 = R:250 G:150 B:70 10
    Color3 = R:250 G:150 B:70 50
  End
  Alpha = DefaultAlpha
    Alpha2 = 0.6 0.8 10
    Alpha3 = -0.5 0 35
  End
  Update = DefaultUpdate
    SizeRate = 4 5
    SizeRateDamping = 0.95 1
    AngleZ = -7 7
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = CylinderEmissionVolume
    IsHollow = Yes
    RadiusRate = 5
    Offset = X:0 Y:0 Z:10
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem RainExp03
  System
    Priority = VERY_LOW_OR_ABOVE
    ParticleName = EXGimliAxeSpecial.tga
    Lifetime = 25 25
    SystemLifetime = 10
    BurstCount = 1 1
    IsGroundAligned = Yes
  End
  Color = DefaultColor
    Color1 = R:250 G:150 B:70 0
    Color2 = R:0 G:0 B:0 25
  End
  Update = DefaultUpdate
    SizeRate = 20 20
    SizeRateDamping = 0.9 0.95
    AngleZ = 0 7
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = -1 1
    Y = -1 1
  End
  EmissionVolume = LineEmissionVolume
    StartPoint = X:0 Y:0 Z:10
    EndPoint = X:0 Y:0 Z:10
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem RainExpEmbers
  System
    Priority = VERY_LOW_OR_ABOVE
    ParticleName = EXEmbersLight.tga
    Lifetime = 50 50
    SystemLifetime = 50
    Size = 40 40
    BurstCount = 5 5
  End
  Color = DefaultColor
    Color2 = R:250 G:150 B:70 25
    Color3 = R:0 G:0 B:0 50
  End
  Update = DefaultUpdate
    SizeRateDamping = 0.9 0.95
    AngleZ = 0 7
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
  End
  EmissionVelocity = OrthoEmissionVelocity
    Z = -0.3 -0.3
  End
  EmissionVolume = CylinderEmissionVolume
    Radius = 150
  End
  Draw = DefaultDraw
  End
  Wind = DefaultWind
    WindMotion = PingPong
    WindStrength = 0.2
  End
End

FXList FX_RainOfFirePhaseOneNew
	CameraShakerVolume
		Radius = 1000			; Radius needs to encompass camera position, not camera lookat position
		Duration_Seconds = 3.0
		Amplitude_Degrees = 0.5
	End
	ParticleSystem
		Name = RainExp
		Offset = X:0.0 Y:0.0 Z:15.0
		OnlyIfOnLand = Yes
	End
	ParticleSystem
		Name = RainExp02
		Offset = X:0.0 Y:0.0 Z:15.0
		OnlyIfOnLand = Yes
	End
	ParticleSystem
		Name = RainExp03
		Offset = X:0.0 Y:0.0 Z:15.0
		OnlyIfOnLand = Yes
	End
	
	TerrainScorch
		Type = RANDOM
		Weather = NORMAL
		RandomRange = X:0 Y:3
		Radius = 150	
	End
  
	TerrainScorch
		Type = RANDOM
		Weather = SNOWY
		RandomRange = X:4 Y:6
		Radius = 150
	End

		CameraShakerVolume
		Radius = 1000			; Radius needs to encompass camera position, not camera lookat position
		Duration_Seconds = 3.0
		Amplitude_Degrees = 0.5
	End
	ParticleSystem
		Name = MeteorExp
		Offset = X:0.0 Y:0.0 Z:15.0
		OnlyIfOnLand = Yes
	End
	ParticleSystem
		Name = MeteorExp02
		Offset = X:0.0 Y:0.0 Z:15.0
		OnlyIfOnLand = Yes
	End
	ParticleSystem
		Name = MeteorExp03
		Offset = X:0.0 Y:0.0 Z:15.0
		OnlyIfOnLand = Yes
	End
	
	TerrainScorch
		Type = RANDOM
		Weather = NORMAL
		RandomRange = X:0 Y:3
		Radius = 150	
	End
  
	TerrainScorch
		Type = RANDOM
		Weather = SNOWY
		RandomRange = X:4 Y:6
		Radius = 150
	End

	CameraShakerVolume
		Radius = 1000			; Radius needs to encompass camera position, not camera lookat position
		Duration_Seconds = 7.0
		Amplitude_Degrees = 0.1
	End
	ParticleSystem
		Name = MeteorExpEmbers
		Offset = X:0.0 Y:0.0 Z:15.0
	End
	
	DynamicDecal           ; A decal that belongs to nobody, but updates internally to fade and tint and such
                DecalName                   = EXScorch03
                Size                              = 600
                Color                             = R:250 G:240 B:230
                OpacityStart                  = 0
                OpacityFadeTimeOne     = 10000
                OpacityPeak                             = 215
                OpacityPeakTime                      = 10000
                OpacityFadeTimeTwo     = 15000
                OpacityEnd                               = 0
                StartingDelay     = 0
                Lifetime             = 29000
	End
	
End

FXList FX_ArgonSkin
  TintDrawable
	Color				= R:110 G:110 B:110
	PreColorTime		= 40
	PostColorTime		= 50
	SustainedColorTime	= 2000
	Frequency			= 0
	Amplitude			= 0
  End
End

;<<<<<<<
;Weapons
;>>>>>>>

Weapon MordorBalrogSwordSwipeNew
  LeechRangeWeapon      = Yes
  AttackRange           = 5.0
  RadiusDamageAffects   = ENEMIES NOT_SIMILAR
  MeleeWeapon           = Yes
  FireFX                = FX_BalrogSwordHit ; TEMPORARY
  DelayBetweenShots     = 250			; time between shots, msec
  PreAttackDelay        = 1000 	; 400 is sword swing delay time before contact with target.
  PreAttackType         = PER_SHOT ; Do the delay each time we attack a new target
  FiringDuration        = 600 	; Duration of the sword swing
	DamageNugget                        ; A basic Nugget that just does damage
		Damage			= 2000
		Radius			= 70.0
		DamageType		= FLAME	
		DamageFXType	= ELECTRIC
		DeathType		= BURNED
	End
	MetaImpactNugget                    ; A Nugget that throws things back with force
		HeroResist			= 0.75
		ShockWaveAmount   = 200.0
		ShockWaveRadius   = 300.0
		ShockWaveTaperOff = 1.0
		ShockWaveZMult    = 1.050
	End
End

Weapon MordorBalrogSwordChop
  LeechRangeWeapon      = Yes
  AttackRange           = 5.0
  RadiusDamageAffects   = ENEMIES NOT_SIMILAR
  MeleeWeapon           = Yes
  FireFX                = FX_BalrogSwordHit ; TEMPORARY
  DelayBetweenShots     = 250			; time between shots, msec
  PreAttackDelay        = 1000 	; 400 is sword swing delay time before contact with target.
  PreAttackType         = PER_SHOT ; Do the delay each time we attack a new target
  FiringDuration        = 600 	; Duration of the sword swing
	DamageNugget                        ; A basic Nugget that just does damage
		Damage			= 2000
		Radius			= 22.0
		DamageType		= FLAME	
		DamageFXType	= ELECTRIC
		DeathType		= BURNED
	End
	MetaImpactNugget                    ; A Nugget that throws things back with force
		HeroResist			= 0.75
		ShockWaveAmount   = 50.0
		ShockWaveRadius   = 30.0.0
		ShockWaveTaperOff = 0.5
		ShockWaveZMult    = 1.050
	End
End

Weapon MordorBalrogWhip
  LeechRangeWeapon      = Yes
  AttackRange           = 5.0
  RadiusDamageAffects   = ENEMIES NOT_SIMILAR
  MeleeWeapon           = Yes
  FireFX                = FX_BalrogSwordHit ; TEMPORARY
  DelayBetweenShots     = 250			; time between shots, msec
  PreAttackDelay        = 1000 	; 400 is sword swing delay time before contact with target.
  PreAttackType         = PER_SHOT ; Do the delay each time we attack a new target
  FiringDuration        = 600 	; Duration of the sword swing
	DamageNugget                        ; A basic Nugget that just does damage
		Damage			= 3000
		Radius			= 22.0
		DamageType		= FLAME	
		DamageFXType	= ELECTRIC
		DeathType		= BURNED
	End
	MetaImpactNugget                    ; A Nugget that throws things back with force
		HeroResist			= 0.75
		ShockWaveAmount   = 50.0
		ShockWaveRadius   = 30.0.0
		ShockWaveTaperOff = 0.5
		ShockWaveZMult    = 1.050
	End
End

;<<<<<<<<<<<<<<<
;Ability Weapons
;>>>>>>>>>>>>>>>

Weapon ArgonWordOfPower
	IdleAfterFiringDelay = 0
	AttackRange = 400
	MinimumAttackRange = 0.8
	WeaponSpeed = 301
	MinWeaponSpeed = 300
	MaxWeaponSpeed = 302
	ScaleWeaponSpeed = Yes
	RadiusDamageAffects = ENEMIES NOT_SIMILAR
	DelayBetweenShots = 5000
	PreAttackDelay        = 2600
	PreAttackType         = PER_ATTACK
      FireFX					= FX_ArgonWord
      ClearNuggets
	DamageNugget
		Damage			= 350
		Radius			= 200.0
		DamageType		= FLAME
		DamageFXType	= MAGIC
		DeathType		= BURNED
		DamageSpeed		= 180.0 ; must match the ShockWaveSpeed below
	End
	MetaImpactNugget
		ShockWaveAmount   = 150.0
		ShockWaveRadius   = 140.0
		ShockWaveTaperOff	= 1.0
		ShockWaveSpeed	  = 180.0
		ShockWaveZMult    = 1.000
	End
	MetaImpactNugget
		ShockWaveAmount   = 60.0
		ShockWaveRadius   = 280.0
		ShockWaveTaperOff	= 1.0
		ShockWaveSpeed	  = 180.0
		ShockWaveZMult    = 0.9
	End
	MetaImpactNugget
		ShockWaveAmount   = 50.0
		ShockWaveRadius   = 380.0
		ShockWaveTaperOff	= 1.0
		ShockWaveSpeed	  = 180.0
		ShockWaveZMult    = 0.8
	End
	FireLogicNugget 
		LogicType	=	INCREASE_BURN_RATE
		Radius		=	100.0
		Damage		=	400
	End
End

Weapon RainOfFirePhaseInitialWeapon
	RadiusDamageAffects = ENEMIES NEUTRALS ALLIES
	FireFX = FX_RainOfFirePhaseInitialWeapon
	LuaEventNugget                        ; Sends a lua script event out
		LuaEvent		= BeUncontrollablyAfraid
		Radius			= 200
		SendToEnemies	= Yes
		SendToAllies	= No
		SendToNeutral	= Yes
	End
End

Weapon RainOfFirePhaseInitialWeapon02
	RadiusDamageAffects = ENEMIES NEUTRALS ALLIES
	FireFX = FX_RainOfFirePhaseInitialWeapon02
	LuaEventNugget                        ; Sends a lua script event out
		LuaEvent		= BeUncontrollablyAfraid
		Radius			= 200
		SendToEnemies	= Yes
		SendToAllies	= No
		SendToNeutral	= Yes
	End
End

Weapon RainOfFirePhaseOneWeaponNew
	RadiusDamageAffects = ENEMIES NEUTRALS
	FireFX = FX_RainOfFirePhaseOneNew
	AttackRange = 10.0
	DamageNugget                        ; A basic Nugget that just does damage
		Damage        = 7250
		DamageScalar  = 50% NONE +COMMANDCENTER
		DamageTaperOff = 200
		Radius        = 200
		DamageMaxHeightAboveTerrain = 1
		DelayTime     = 0
		DamageType    = SIEGE
		DeathType     = BURNED
	End
	MetaImpactNugget                    ; A Nugget that throws things back with force
;		HeroResist			= .99
		ShockWaveAmount		= 200.0
		ShockWaveTaperOff	= 1.0
		ShockWaveRadius		= 360.0
	End
End

Weapon RainOfFirePhaseOneWeapon02
	RadiusDamageAffects = ENEMIES NEUTRALS
	FireFX = FX_RainOfFirePhaseOne02
	DamageNugget                        ; A basic Nugget that just does damage
		Damage        = 7250
		DamageScalar  = 50% NONE +COMMANDCENTER
		DamageTaperOff = 200
		Radius        = 200
		DamageMaxHeightAboveTerrain = 1
		DelayTime     = 0
		DamageType    = SIEGE
		DeathType     = NORMAL
	End
	MetaImpactNugget                    ; A Nugget that throws things back with force
;		HeroResist			= .99
		ShockWaveAmount		= 50.0
		ShockWaveTaperOff	= 1.0
		ShockWaveRadius		= 50
	End
End

Weapon ArgonHeroSword
	IdleAfterFiringDelay = 0
	AttackRange = 400
	MinimumAttackRange = 0.8
	WeaponSpeed = 301
	MinWeaponSpeed = 300
	MaxWeaponSpeed = 302
	ScaleWeaponSpeed = Yes
	RadiusDamageAffects = ENEMIES NOT_SIMILAR
	DelayBetweenShots = 5000
	PreAttackDelay        = 2600
	PreAttackType         = PER_ATTACK
      FireFX					= FX_ArgonBladeMaster
      ClearNuggets
	DamageNugget
		Damage			= 6000
		Radius			= 200.0
		DamageType		= FLAME
		DamageFXType	= MAGIC
		DeathType		= BURNED
		DamageSpeed		= 180.0 ; must match the ShockWaveSpeed below
	End
	MetaImpactNugget
		ShockWaveAmount   = 150.0
		ShockWaveRadius   = 50.0
		ShockWaveTaperOff	= 1.0
		ShockWaveSpeed	  = 180.0
		ShockWaveZMult    = 1.000
	End
End

;<<<<<<<<<<<<<<<<<<<<<<<<
; Argon Ability Timers
;>>>>>>>>>>>>>>>>>>>>>>>>

SpecialPower SpecialAbilityFlameWave
	Enum			= SPECIAL_WORD_OF_POWER
	ReloadTime		= 180000
	PublicTimer		= No
End

SpecialPower SpecialAbilityCallOfTheBalrog
	Enum						= SPECIAL_SPELL_BOOK_BALROG_ALLY
	ReloadTime					= 500000
	RadiusCursorRadius			= 75.0
	ViewObjectDuration = 5000
	ViewObjectRange = 500
	Flags					= NO_FORBIDDEN_OBJECTS RESPECT_RECHARGE_TIME_DISCOUNT
	ForbiddenObjectFilter	= NO_SUMMON_NEAR_OBJECT_FILTER
	ForbiddenObjectRange	= 75.0
End

;<<<<<<<<<<<<<<<<<<<<<<
;Argon Commandbuttons
;>>>>>>>>>>>>>>>>>>>>>>	

CommandButton Command_SpellBookRainOfFire
  Command                 = SPECIAL_POWER 
  SpecialPower            = SpecialAbilityFlameWave
  Options                 = NONE
  TextLabel               = CONTROLBAR:ArgonFireWave
  ButtonImage             = SBEvil_RainOfFire
  ButtonBorderType        = ACTION 
  DescriptLabel           = CONTROLBAR:ToolTipArgonFireWave
  AutoAbility			  = Yes
  PresetRange			  = 120.0
  InPalantir			  = Yes
End

CommandButton Command_SpellBookDarkness
  Command                 = SPECIAL_POWER 
  SpecialPower            = SpecialAbilityAragornBladeMaster
;  Options                 = 
  TextLabel               = CONTROLBAR:BlackOfMorgoth
  ButtonImage             = SBEvil_Darkness
  ButtonBorderType        = ACTION 
  DescriptLabel           = CONTROLBAR:ToolTipBlackOfMorgoth
;  UnitSpecificSound       = 
  InPalantir			  = Yes
End

CommandButton Command_SpellBookDragonStrike
  Command                 = SPECIAL_POWER 
  SpecialPower            = FiresOfDoomSpecialPower
;  Options                 = 
  TextLabel               = CONTROLBAR:MightOfArgon
  ButtonImage             = HSBalrogScream
  ButtonBorderType        = ACTION 
  DescriptLabel           = CONTROLBAR:ToolTipMightOfArgon
;  UnitSpecificSound       = 
  InPalantir			  = Yes
End

CommandButton Command_SpecialAbilityBalrogBreath
  Command                 = SPECIAL_POWER 
  SpecialPower            = SpecialAbilityBalrogBreath
  Options                 = NEED_TARGET_POS CONTEXTMODE_COMMAND
  TextLabel               = CONTROLBAR:RoaringInferno
  ButtonImage             = HSBalrogBreathFire
  ButtonBorderType        = ACTION 
  RadiusCursorType        = FireBreathRadiusCursor   
  DescriptLabel           = CONTROLBAR:ToolTipRoaringInferno
;  UnitSpecificSound       = 
  InPalantir			  = Yes
End

CommandButton Command_SpecialAbilityBalrogWings
  Command                 = SPECIAL_POWER 
  SpecialPower            = SpecialAbilityBalrogWings
  Options                 = NEED_TARGET_POS CONTEXTMODE_COMMAND
  TextLabel               = CONTROLBAR:FireFlight
  ButtonImage             = HSBalrogWings
  ButtonBorderType        = ACTION 
  CursorName			  = EvilAbilityObj  
  InvalidCursorName       = GenericInvalid
  DescriptLabel           = CONTROLBAR:ToolTipFireFlight
;  UnitSpecificSound       = 
  InPalantir			  = Yes
End

CommandButton Command_SpellBookBalrogAlly
  Command           = SPECIAL_POWER
  SpecialPower      = SpecialAbilityCallOfTheBalrog
  TextLabel         = CONTROLBAR:CallOfTheBalrog
  ButtonImage       = SBEvil_BalrogAlly
  Options           = NEED_TARGET_POS CONTEXTMODE_COMMAND
  RadiusCursorType  = SummonBalrogRadiusCursor
  CursorName        = AttackObj
  InvalidCursorName = GenericInvalid  
  ButtonBorderType  = ACTION 
  DescriptLabel     = CONTROLBAR:TooltipCallOfTheBalrog
  InPalantir	    = Yes
End

;>>>>>>>>>>>>>>>>>>>>>
;Argon NewCommandSet
;<<<<<<<<<<<<<<<<<<<<<

CommandSet ArgonCommandSet
  1  = Command_SpellBookDarkness
  2  = Command_SpellBookDragonStrike
  3  = Command_SpecialAbilityBalrogBreath
  4  = Command_SpellBookBalrogAlly
  5  = Command_SpellBookRainOfFire
  6  = Command_SpecialAbilityBalrogWings
	12 = Command_CaptureBuilding
	13 = Command_AttackMove
	14 = Command_Stop
        
End

Object MordorBalrog
 CommandSet = ArgonCommandSet
End

;>>>>>>>>>>>>
;Argon Armour
;>>>>>>>>>>>>

Armor ArgonArmour
  Armor = DEFAULT		 1%
  Armor = CRUSH			 1%
  Armor = SLASH			 1%
  Armor = URUK			 1%
  Armor = PIERCE		 1%
  Armor = SIEGE			 1%
  Armor = STRUCTURAL		 3%
  Armor = HERO			 5%
  Armor = MAGIC			 1%
  Armor = HERO_RANGED		 1%
  Armor = FLAME			 0%
  Armor = LOGICAL_FIRE		 0%
  Armor = SPECIALIST    	 1%
End

Object MordorBalrog

	AddModule	
	Behavior = ExperienceLevelCreate ModuleTag_MPLevelBonus1
		LevelToGrant = 10
		MPOnly = Yes
	End
	End

	AddModule
	Behavior = GrantUpgradeCreate ModuleTag_Argon
		UpgradeToGrant = Upgrade_GandalfWordOfPower
	End 
	End

	Scale		= 0.5

	; ***DESIGN parameters ***
	DisplayName      = Argon God Of Fire
	DisplayMeleeDamage = 6000

	AddModule
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_wopEnabler
		SpecialPowerTemplate = SpecialAbilityFlameWave
		TriggeredBy = Upgrade_GandalfWordOfPower
	End
	End
	AddModule
	Behavior = SpecialPowerModule ModuleTag_wopStarter       
		SpecialPowerTemplate      = SpecialAbilityFlameWave
		UpdateModuleStartsAttack  = Yes
		StartsPaused		  	  = Yes
	End
	End
	AddModule
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_wopWeaponFireUpdate   
		SpecialPowerTemplate    = SpecialAbilityFlameWave
		WhichSpecialWeapon		= 1
		SkipContinue			= Yes

		UnpackTime              = 1700 
		PackTime                = 1	
		FreezeAfterTriggerDuration = 2500 ; Hold AI for this long after we fire.
		
		AwardXPForTriggering    = 0		
		StartAbilityRange		= 80.0
		
		SpecialWeapon			= ArgonWordOfPower
	End
	End
	AddModule
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_AragornBladeMasterEnabler
		SpecialPowerTemplate = SpecialAbilityAragornBladeMaster
		TriggeredBy = Upgrade_GandalfWordOfPower
	End
      End
      AddModule
  	Behavior = SpecialPowerModule ModuleTag_AragornBladeMasterStarter
		SpecialPowerTemplate    = SpecialAbilityAragornBladeMaster
		StartsPaused			= Yes
            TriggerFX                  = FX_ArgonBladeMaster
	End
      End
      	AddModule
	Behavior = HeroModeSpecialAbilityUpdate ModuleTag_AragornBladeMasterUpdate
		SpecialPowerTemplate    = SpecialAbilityAragornBladeMaster
		HeroAttributeModifier	= ArgonBlade
		HeroEffectDuration		= 10000 ; in milliseconds
		UnpackTime              = 1
	End
	End
	AddModule
	Behavior = SpecialPowerModule ModuleTag_fireofdoom                   
		SpecialPowerTemplate		= FiresOfDoomSpecialPower
		UpdateModuleStartsAttack	= Yes
		StartsPaused				= No
		InitiateSound				= SauronVoxBlackspeechFiresOfDoom
	End
	End
	AddModule
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_fireofdoomUpdate
		SpecialPowerTemplate    = FiresOfDoomSpecialPower
		WhichSpecialWeapon		= 1							; use MODELCONDITION_SPECIAL_WEAPON_ONE
		SkipContinue			= Yes

		UnpackTime              = 900
		PreparationTime         = 1   
		PersistentPrepTime      = 1500 
		PackTime                = 1100
		
		FreezeAfterTriggerDuration	= 2500					; make sure we can't move immediately after.

		AwardXPForTriggering    = 0		
		StartAbilityRange		= 70.0
		MustFinishAbility		= Yes
		SpecialWeapon			= RainOfFirePhaseOneWeaponNew
		;TriggerSound			= SpellRainOfFireMS
	End
	End
	AddModule
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_callfromdeepEnabler
		SpecialPowerTemplate = SpecialAbilityCallOfTheBalrog
		TriggeredBy = Upgrade_GandalfWordOfPower
	End
	End
	AddModule
	Behavior = OCLSpecialPower ModuleTag_callfromdeepPower
		SpecialPowerTemplate	= SpecialAbilityCallOfTheBalrog
		OCL						= OCL_WildFireDrakeEgg
		CreateLocation			= CREATE_AT_LOCATION
		StartsPaused			= Yes
		TriggerFX			 = FX_BalrogSummoningFinish
		SetModelCondition		= ModelConditionState:USER_2
		SetModelConditionTime	= 3.5
		DisableDuringAnimDuration = Yes
	End
	End
	AddModule
 	Behavior = FireWeaponWhenDeadBehavior ModuleTag_DIELIKETHIS
    	StartsActive = Yes
    	DeathWeapon = RainOfFirePhaseOneWeaponNew
  	End
  	End

	Side = Neutral
	EditorSorting = UNIT
	ThreatLevel = 4.0
	ThingClass = CHARACTER_UNIT
	CrusherLevel   = 4  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
	CrushWeapon = BalrogCrush  

	TransportSlotCount = 1
	
	
	WeaponSet
		Conditions		= WEAPONSET_HERO_MODE
		Weapon			= PRIMARY    ArgonHeroSword
	End

	WeaponSet
		Conditions				= None
		Weapon					= PRIMARY MordorBalrogSwordSwipeNew
		AutoChooseSources		= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
	
	ArmorSet
		Conditions      = None
		Armor           = ArgonArmor
		DamageFX        = NormalDamageFX
	End

	VisionRange = VISION_BALROG					
	ShroudClearingRange = SHROUD_CLEAR_BALROG
	ShockwaveResistance = SHOCKWAVE_RESISTANCE_ALWAYS
	CommandSet = ArgonCommandSet
	CanPathThroughGates	= No
	IsTrainable = No
	
	DeadCollideSize = LARGE ; How big does the AOD consider this unit for damage fx & behavior.
	

	;------------------ AUDIO Parameters ----------------------

  ; *** ENGINEERING Parameters ***  

  LocomotorSet
    Locomotor     = BalrogLocomotor
    Condition     = SET_NORMAL
    Speed         = 80
  End   


	ReplaceModule ModuleTag_BodyDraw
	Draw = W3DScriptedModelDraw ModuleTag_BodyDraw1
;		GlowEnabled = Yes
;		GlowEmissive = Yes
		
;		StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD

		OkToChangeModelColor = Yes
	
		ExtraPublicBone = ZZZPASSENGERBON
		ExtraPublicBone = ZZZWHIPCOIL
		ExtraPublicBone = SWORD

		;-------------------------

		DefaultModelConditionState
			Model = MUBalIGNT_SKN
			ParticleSysBone = MANEBONE BalrogManeFlare1 FollowBone:yes
			ParticleSysBone = MANEBONE BalrogManeEmbers1 FollowBone:yes
			ParticleSysBone = MANEBONE BalrogManeFire1 FollowBone:yes
			ParticleSysBone = BAT_JAW BalrogManeFire1 FollowBone:yes
			ParticleSysBone = RTWINGBONE BalrogSmokeLite1 FollowBone:yes
			ParticleSysBone = LFWINGBONE BalrogSmokeLite1 FollowBone:yes
			ParticleSysBone = RTWINGBONE BalrogWingEmbers FollowBone:yes
			ParticleSysBone = LFWINGBONE BalrogWingEmbers FollowBone:yes

			ParticleSysBone = SWORD BalrogSwordFlare FollowBone:yes
			ParticleSysBone = SWORD BalrogSwordEmbers FollowBone:yes
	                ParticleSysBone = NONE BalrogIgniteHeatWave FollowBone:no
		End

		;-----------------		
		IdleAnimationState
			StateName = State_Idle
			Animation = Breathe 
				AnimationName = MUBalrog_SKL.MUBalrog_IDLA
				AnimationMode = ONCE
				AnimationBlendTime = 10
				AnimationPriority = 20
			End
			Animation = LookAround 
				AnimationName = MUBalrog_SKL.MUBalrog_IDLB
				AnimationMode = ONCE
				AnimationBlendTime = 10
				AnimationPriority = 2
			End
			Animation = SnortLikeABull 
				AnimationName = MUBalrog_SKL.MUBalrog_IDLC
				AnimationMode = ONCE
				AnimationBlendTime = 10
				AnimationPriority = 1
			End

			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "State_JustBuilt" 
					then CurDrawableSetTransitionAnimState("TRANS_JustBuilt_To_Idle") 
				end
				if Prev == "State_AboutToHitGround" 
					then CurDrawableSetTransitionAnimState("TRANS_AboutToHitGround_To_Idle") 
				end
			EndScript
		End 
		
		AnimationState					=	DYING DEATH_1
			Animation					=	Dying 
				AnimationName			=	MUBalrog_SKL.MUBalrog_DIEA 
				AnimationMode			=	ONCE
			End
			ParticleSysBone = None BalrogFallDust FollowBone:No
		End

		AnimationState					=	DYING DEATH_2
			Animation					=	FadingOut 
				AnimationName			=	MUBalrog_SKL.MUBalrog_RORC 
				AnimationMode			=	ONCE
			End
		End


; This is triggered by the single player only HitReaction module for the lightningsword	
; It is highest instead of lowest priority, because the hit reaction Paralyzes us, where for others it is just a fancy idle.	
		AnimationState					=	HIT_LEVEL_2
			Animation					=	Owowowowowowowow
				AnimationName			=	MUBalrog_SKL.MUBalrog_HITB 
				AnimationMode			=	ONCE
			End
		End
		
		AnimationState					=	EATING
			Animation					=	DoingHorribleThingToGrabbedGuy 
				AnimationName			=	MUBalrog_SKL.MUBalrog_BRNA 
				AnimationMode			=	ONCE
				AnimationBlendTime		=	0
			End

				ParticleSysBone = ZZZPassengerBon balrogHandSqueezeFlames FollowBone:Yes
                ParticleSysBone = ZZZPassengerBon balrogHandSqueezeFlames2 FollowBone:Yes
				ParticleSysBone = ZZZPassengerBon balrogHandSqueezeFlamesFinal FollowBone:Yes
                ParticleSysBone = ZZZPassengerBon BalrogHandSqueezeFlash FollowBone:Yes
                ParticleSysBone = ZZZPassengerBon BalrogHandSmoke FollowBone:Yes
                ParticleSysBone = RING_2_L balrogHandAsh FollowBone:Yes
                ParticleSysBone = RING_2_L balrogHandAshSmall FollowBone:Yes
		End

		AnimationState					=	UNPACKING PACKING_TYPE_3
			Animation					=	GrabbingToTouching
				AnimationName			=	MUBalrog_SKL.MUBalrog_GRBA 
				AnimationMode			=	ONCE
				AnimationBlendTime		=	0
			End
		End

		AnimationState					=	PACKING PACKING_TYPE_3
			Animation					=	GrabbingFollowThrough 
				AnimationName			=	MUBalrog_SKL.MUBalrog_GRBC 
				AnimationMode			=	ONCE
				AnimationBlendTime		=	0
			End	
		End

		AnimationState			= JUST_BUILT
			StateName = State_JustBuilt
			Animation
				AnimationName = MUBalrog_SKL.MUBalrog_RORA
				AnimationMode = MANUAL
				AnimationBlendTime = 0
			End
		End
		
	    TransitionState = TRANS_JustBuilt_To_Idle
			Animation = BeingSummoned
				AnimationName = MUBalrog_SKL.MUBalrog_RORA 
				AnimationMode = ONCE
			End
		End
		
		AnimationState = FIRING_OR_PREATTACK_B
			Animation = CrackThatWhip 
				AnimationName = MUBalrog_SKL.MUBalrog_WIPA
				AnimationMode = ONCE
			End
				ParticleSysBone = RTHANDBONE BalrogWhip2swordEfx FollowBone:Yes
		End

		AnimationState			= SPECIAL_POWER_1
			Animation			= RoaringFear 
				AnimationName	= MUBalrog_SKL.MUBalrog_RORB
				AnimationMode   = ONCE
			End
				ParticleSysBone = BAT_JAW BalrogScreamEffect FollowBone:Yes
				FXEvent			= Frame:20 Name:FX_BalrogScreamEfx
				ParticleSysBone = BAT_JAW balrogPixelDisplScrm FollowBone:Yes
				ParticleSysBone = BAT_JAW balrogScrmEmbers FollowBone:Yes
		End
			   
		AnimationState			= SPECIAL_WEAPON_ONE
			Animation			= BreathingFireAnimation
				AnimationName	= MUBalrog_SKL.MUBalrog_FIRA
				AnimationMode   = ONCE
			End
				;This is Balrog's fire breath efx
				ParticleSysBone = BAT_JAW balrogFireBreath FollowBone:Yes
				ParticleSysBone = BAT_JAW balrogBreathEmbers FollowBone:Yes
				ParticleSysBone = BAT_JAW balrogBreathSmoke FollowBone:Yes
				ParticleSysBone = BAT_JAW balrogBreathProxy FollowBone:Yes
			End
			   
		AnimationState			= SPECIAL_WEAPON_TWO UNPACKING
			StateName			= State_LeapStart
			Animation			= GettingReadyToLeap
				AnimationName	= MUBalrog_SKL.MUBalrog_JMP1
				AnimationMode   = ONCE
			End
		End
			   
	    AnimationState			= SPECIAL_WEAPON_TWO PACKING
			Animation			= FirstWingBeatGoingUp 
				AnimationName	= MUBalrog_SKL.MUBalrog_JMP2
				AnimationMode   = ONCE
			End
		End
			   
	    AnimationState			= ABOUT_TO_HIT						; Before ThrownProjectile, since by definition this set for nn frames while T_P is still on
			StateName			= State_AboutToHitGround
			Animation			= StartingToLandToTouchingGround 
				AnimationName	= MUBalrog_SKL.MUBalrog_LND1
				AnimationMode   = ONCE
			End
		End
			   
		AnimationState			= THROWN_PROJECTILE
			Animation			= HurtlingThroughAir 
				AnimationName	= MUBalrog_SKL.MUBalrog_FLYA
				AnimationMode   = LOOP
				AnimationBlendTime = 10
			End
		End
			   
	    TransitionState = TRANS_AboutToHitGround_To_Idle
			Animation = SplashAtEndOfJump
				AnimationName = MUBalrog_SKL.MUBalrog_LND2 
				AnimationMode = ONCE
				AnimationBlendTime = 0
			End
		End
		
		AnimationState			= TURN_RIGHT
			Animation			= TurningRight 
				AnimationName	= MUBalrog_SKL.MUBalrog_TRNA
				AnimationMode   = LOOP
				AnimationBlendTime = 10
			End
		End

		AnimationState			= TURN_LEFT
			Animation			= TurningLeft 
				AnimationName	= MUBalrog_SKL.MUBalrog_TRNB
				AnimationMode   = LOOP
				AnimationBlendTime = 10
			End
		End

		AnimationState			= MOVING
			Animation			= Running 
				AnimationName	= MUBalrog_SKL.MUBalrog_WLKA
				AnimationMode   = LOOP
				AnimationBlendTime = 10
			End
			Flags               = RANDOMSTART
			
			FXEvent	= Frame:20 FireWhenSkipped Name:FX_BalrogRightFootStep
			FXEvent	= Frame:44 FireWhenSkipped Name:FX_BalrogLeftFootStep
		End
      
		AnimationState			= WEAPONSET_HERO_MODE UNPACKING PACKING_TYPE_1
			Animation = StartIgniteRoar 
				AnimationName = MUBalrog_SKL.MUBalrog_IGNTA
				AnimationMode = ONCE
			End
		End
				
		AnimationState			= HERO PACKING PACKING_TYPE_1
			Animation = FinishIgniteRoar 
				AnimationName = MUBalrog_SKL.MUBalrog_IGNTB
				AnimationMode = ONCE
			End
           
            EnteringStateFX = FX_BalrogIgniteStart
		End
				
		AnimationState			= FIRING_OR_PREATTACK_A
			Animation			= Swipe
				AnimationName	= MUBalrog_SKL.MUBalrog_ATKB
				AnimationMode	= ONCE
				UseWeaponTiming	= Yes
			End
		End
		
		AnimationState			= FIRING_OR_PREATTACK_C
			Animation			= Chop
				AnimationName	= MUBalrog_SKL.MUBalrog_ATKA
				AnimationMode	= ONCE
				UseWeaponTiming	= Yes
			End
			ParticleSysBone		= SWORDBONE BalrogSword FollowBone:yes
		End
	End
	End
End

Object MordorBalrog
 LocomotorSet
    Locomotor     = BalrogLocomotor
    Condition     = SET_NORMAL
    Speed         = 80
  End   
End

Object MordorBalrog

 ReplaceModule ModuleTag_02
  Body = ActiveBody ModuleTag_Overide
    MaxHealth = 10000                 
    MaxHealthDamaged = 50
  End
End
End

Object MordorBalrog
  KindOf          = HERO PRELOAD SELECTABLE CAN_CAST_REFLECTIONS MONSTER SCORE CAN_ATTACK NO_FREEWILL_ENTER PATH_THROUGH_INFANTRY SCARY BIG_MONSTER CAN_ATTACK_WALLS
	DisplayName = Argon The Roaring Inferno
	ButtonImage = SBEvil_BalrogAlly

	VoiceAttack				= BalrogVoiceAttack  ;FellBeastVoiceAttack
	VoiceAttackCharge		= BalrogSummonRoar  ;FellBeastVoiceAttack
	VoiceAttackMachine		= BalrogVoiceAttack  ;FellBeastVoiceAttack
	VoiceAttackStructure	= BalrogVoiceAttack
	VoiceFear 				= BalrogChuckle
	VoiceMove				= BalrogVoiceMove
	VoiceMoveToCamp			= BalrogVoiceMove
	VoiceMoveWhileAttacking	= BalrogVoiceAttack
	VoicePriority			= 96
	VoiceRetreatToCastle	= BalrogVoiceAttack
	VoiceSelect				= BalrogVoiceAttack
	VoiceSelectBattle 		= BalrogMoriaDistant
	VoiceGuard				= BalrogMoriaDistant
	SoundImpact				= ImpactHorse

	EvaEventDamagedOwner = UnitUnderAttack
	EvaEventDieOwner = WitchKingDie
End

;^^^^^^^^^^^^^^^^^^^^
;Triagron God Of Rock
;^^^^^^^^^^^^^^^^^^^^

ChildObject MordorFighterHorde_Summoned SummonedDragonJH1
End

;>>
;FX
;>>

;<<<<<<<
;Weapons
;>>>>>>>

Weapon TriagronHammer
  LeechRangeWeapon      = Yes
  AttackRange           = 5.0
  RadiusDamageAffects   = ENEMIES NOT_SIMILAR
  MeleeWeapon           = Yes
  FireFX                = FX_GloinShatterhammer
  DelayBetweenShots     = 250			; time between shots, msec
  PreAttackDelay        = 1000 	; 400 is sword swing delay time before contact with target.
  PreAttackType         = PER_SHOT ; Do the delay each time we attack a new target
  FiringDuration        = 600 	; Duration of the sword swing
	DamageNugget                        ; A basic Nugget that just does damage
		Damage			= 2200
		Radius			= 22.0
		DamageType		= MAGIC
		DamageFXType	= MAGIC
		DeathType		= EXPLODED
	End
	MetaImpactNugget                    ; A Nugget that throws things back with force
		HeroResist			= 0.75
		ShockWaveAmount   = 80.0
		ShockWaveRadius   = 60.0
		ShockWaveTaperOff = 0.5
		ShockWaveZMult    = 1.050
	End
End

;<<<<<<<<<<<<<<<
;Ability Weapons
;>>>>>>>>>>>>>>>

ModifierList TriagronBM
	Category = WEAPON
	Modifier = DAMAGE_MULT 120%
	Modifier = ARMOR 100%
	Modifier = SPEED 200%
	Duration = 200
End

Weapon TriagronHeroHammer
  LeechRangeWeapon      = Yes
  AttackRange           = 5.0
  RadiusDamageAffects   = ENEMIES NOT_SIMILAR
  MeleeWeapon           = Yes
  FireFX                = FX_EarthquakePhaseInitialWeapon
  DelayBetweenShots     = 250			; time between shots, msec
  PreAttackDelay        = 1000 	; 400 is sword swing delay time before contact with target.
  PreAttackType         = PER_SHOT ; Do the delay each time we attack a new target
  FiringDuration        = 600 	; Duration of the sword swing
	DamageNugget                        ; A basic Nugget that just does damage
		Damage			= 5000
		Radius			= 22.0
		DamageType		= MAGIC
		DamageFXType	= MAGIC
		DeathType		= EXPLODED
	End
	MetaImpactNugget                    ; A Nugget that throws things back with force
		HeroResist			= 0.75
		ShockWaveAmount   = 100.0
		ShockWaveRadius   = 360.0
		ShockWaveTaperOff = 1.0
		ShockWaveZMult    = 1.050
	End
	ParalyzeNugget
		Radius				= 50.0
		Duration			= POISONED_STINGER_DURATION
		SpecialObjectFilter	= CRIPPLE_STRIKE_OBJECT_FILTER
		ParalyzeFX			= FX_PoisonedStunEffect
	End
End

Weapon TriagronWordOfPower ; Big Blue Ring Blast
	IdleAfterFiringDelay = 0
	AttackRange = GANDALF_WORD_OF_POWER_RANGE
	MinimumAttackRange = 0.8
	WeaponSpeed = 401         ; dist/sec 
	MinWeaponSpeed = 241
	MaxWeaponSpeed = 601      ; dist/sec Upper limit on scaling, when attacking past nominal "max" range
	ScaleWeaponSpeed = Yes ; Used for lob weapons, scales speed proportional to range
	RadiusDamageAffects = ENEMIES NOT_SIMILAR
	DelayBetweenShots = 5000               ; time between shots, msec
	PreAttackDelay        = 2600
	PreAttackType         = PER_ATTACK ; Do the delay each time we attack a new target
	FireFX                = FX_GandalfBlast
	FiringDuration      = 1400
	DamageNugget                        ; A basic Nugget that just does damage
		Damage			= GANDALF_WORD_OF_POWER_DAMAGE
		Radius			= 250.0
		DamageType		= MAGIC
		DamageFXType	= MAGIC
		DeathType		= EXPLODED
		DamageSpeed		= 700.0 ; must match the ShockWaveSpeed below
	End
	MetaImpactNugget                    ; A Nugget that throws things back with force
;		HeroResist			= .75
		ShockWaveAmount   = 75.0
		ShockWaveRadius   = 500.0
		ShockWaveTaperOff = 1.0
		ShockWaveZMult    = 1.000
		ShockWaveSpeed	  = 700.0 
	End
End

Weapon TriagronCripple       // BALANCE Archer Weapon //orc archer
	LeechRangeWeapon		  =	Yes
	AttackRange				  =	30.0
	MeleeWeapon				  =	Yes
	FireFX					  = FX_GloinShatterhammer
	DelayBetweenShots		  =	GLOIN_DELAYBETWEENSHOTS	// time between shots, msec
	PreAttackDelay			  =	GLOIN_PREATTACKDELAY	// 433 is natural time of the stabbing animation.
	PreAttackType			  =	PER_SHOT				// Do the delay	each time we attack	a new target
	FiringDuration			  =	GLOIN_FIRINGDURATION	// min 600 for anim

	// Hero damage.
	DamageNugget										// A basic Nugget that just does damage
		Damage			= CREATE_A_HERO_CRIPPLE_MELEE_DAMAGE_L2
		Radius			= 0.0
		DelayTime		= 0
		DamageType		= HERO
		DamageFXType	= MAGIC
		DeathType		= EXPLODED
	End
	// Cripple.
	AttributeModifierNugget
		AttributeModifier        = AttributeModCrippleStrike_Level2
		DamageFXType             = SWORD_SLASH 
		SpecialObjectFilter      = CRIPPLE_STRIKE_OBJECT_FILTER
	End            

End

;<<<<<<<<<<<<<<<<<<<<<<<
;Triagron Ability Timers
;>>>>>>>>>>>>>>>>>>>>>>>

SpecialPower SpecialAbilityTriCrip
	Enum			= SPECIAL_AT_VISIBLE_OBJECT
	ReloadTime		= 60000
	ObjectFilter	= CRIPPLE_STRIKE_OBJECT_FILTER
End

SpecialPower SpecialAbilityTriWord
	Enum						   = SPECIAL_WORD_OF_POWER
	ReloadTime					   = 360000
End

SpecialPower SpecialAbilityTriV
	Enum									  =	SPECIAL_GENERAL_TARGETLESS
	ReloadTime								  =	180000
End

SpecialPower SpecialAbilityTriBombard
	Enum				= SPECIAL_SPELL_BOOK_BOMBARD
	ReloadTime       	= 240000 // // in milliseconds	
	RadiusCursorRadius	= 200
End

SpecialPower SpecialAbilityStrengthOfTheGolem
	Enum					   = SPECIAL_HERO_MODE
	ReloadTime				   = 120000
End

;<<<<<<<<<<<<<<<<<<<<<<<
;Triagron Commandbuttons
;>>>>>>>>>>>>>>>>>>>>>>>

CommandButton Command_SpellBookEarthquake
  Command                 = SPECIAL_POWER 
  SpecialPower            = SpecialAbilityTriWord
  Options                 = NONE
  TextLabel               = CONTROLBAR:Trislam
  ButtonImage             = SBGood_Earthquake
  ButtonBorderType        = ACTION 
  DescriptLabel           = CONTROLBAR:ToolTipTrislam
  AutoAbility			  = Yes
  PresetRange			  = 120.0
  InPalantir			  = Yes
End

CommandButton Command_SpellBookDragonAlly
	Command			   = SPECIAL_POWER
	SpecialPower	   = SpecialAbilityCreateAHeroSoSSummonAllies_Level1
	TextLabel		   = CONTROLBAR:TriagronDragon
	ButtonImage		   = SBEvil_DragonAlly
	Options			   = NEED_TARGET_POS CONTEXTMODE_COMMAND
	RadiusCursorType   = SummonDragonRadiusCursor
	CursorName		   = Bombard
	InvalidCursorName  = GenericInvalid	 
	ButtonBorderType   = ACTION	
	DescriptLabel	   = CONTROLBAR:TooltipTriagronDragon
	InPalantir		   = Yes
End

CommandButton Command_CreateAHero_SoS_CrippleStrikeMelee_Level2
  Command                 = SPECIAL_POWER 
  SpecialPower            = SpecialAbilityTriCrip
  Options                 = NEED_TARGET_ENEMY_OBJECT // CONTEXTMODE_COMMAND
  TextLabel               = CONTROLBAR:TriCrip
  CursorName              = EvilAbilityObj
  InvalidCursorName       = GenericInvalid 
  ButtonImage             = HSCrippleStrikeMelee
  ButtonBorderType        = ACTION 
  DescriptLabel           = CONTROLBAR:ToolTipTriCrip
  InPalantir			  = Yes
End

CommandButton Command_CreateAHero_Invulnerability_Level3
	Command								= SPECIAL_POWER
	SpecialPower						= SpecialAbilityTriV
	TextLabel							= CONTROLBAR:RockSolid
	ButtonImage							= CAHInvulnerability
	RadiusCursorType					= TrainingRadiusCursor
	ButtonBorderType					= ACTION
	DescriptLabel						= CONTROLBAR:ToolTipRockSolid
	InPalantir							= Yes
	AutoAbility							= Yes
	PresetRange							= 50.0
	UnitSpecificSound					= CaH_Invulnerability
End

CommandButton Command_CreateAHero_Bombard_Level3
	Command				= SPECIAL_POWER
    	SpecialPower		= SpecialAbilityTriBombard
	Options				= NEED_TARGET_POS 
	TextLabel			= CONTROLBAR:TriBombard
    	ButtonImage			= SBGood_Bombard
	ButtonBorderType	= ACTION
	DescriptLabel		= CONTROLBAR:TooltipTriBombard
    	RadiusCursorType	= RainOfFireRadiusCursor
    	CursorName			= AttackObj
    	InvalidCursorName	= GenericInvalid
	InPalantir			= Yes

	CreateAHeroUIAllowableUpgrades			  =	Upgrade_CreateAHero_ClassDwarf
	CreateAHeroUIMinimumLevel				  = 10
	CreateAHeroUIPrerequisiteButtonName = Command_CreateAHero_Bombard_Level2
End

CommandButton Command_SpecialAbilityDwarvenGloinSlam
    Command					= SPECIAL_POWER 
	SpecialPower			= SpecialAbilityStrengthOfTheGolem
	Options				= None
	TextLabel				= CONTROLBAR:ThunderHammer
	ButtonImage				= HSGloinSlam
	ButtonBorderType		= ACTION 
	DescriptLabel			= CONTROLBAR:ToolTipThunderHammer
	InPalantir				= Yes
	AutoAbility				= Yes
	AutoDelay				= 30000			; this should sync with the Aragorn's hero mode effect time
	PresetRange				= 50.0
	UnitSpecificSound		= BarrowWightVoxAttack
	InPalantir				= Yes		
End

;>>>>>>>>>>>>>>>>>>>>>>
;Triagron NewCommandSet
;<<<<<<<<<<<<<<<<<<<<<<

CommandSet TriagronCommandSet
  1  = Command_SpellBookEarthquake
  2  = Command_SpellBookDragonAlly
  3  = Command_CreateAHero_SoS_CrippleStrikeMelee_Level2
  4  = Command_CreateAHero_Invulnerability_Level3
  5  = Command_CreateAHero_Bombard_Level3
  6  = Command_SpecialAbilityDwarvenGloinSlam
	12 = Command_CaptureBuilding
	13 = Command_AttackMove
	14 = Command_Stop
        
End

Object EvilMenBlackRider
  CommandSet = TriagronCommandSet
End

;>>>>>
;MISC.
;>>>>>

Object EvilMenBlackRider

  KindOf          = HERO PRELOAD SELECTABLE CAN_CAST_REFLECTIONS MONSTER SCORE CAN_ATTACK NO_FREEWILL_ENTER PATH_THROUGH_INFANTRY SCARY BIG_MONSTER CAN_ATTACK_WALLS
	DisplayName = Triagron The Golem
	DisplayMeleeDamage = 6100

	VoiceAttack				= BarrowWightVoxAttack  ;FellBeastVoiceAttack
	VoiceAttackCharge		= BarrowWightVoxAttack  ;FellBeastVoiceAttack
	VoiceAttackMachine		= BarrowWightVoxAttack  ;FellBeastVoiceAttack
	VoiceAttackStructure	= BarrowWightVoxAttack
	VoiceFear 				= BarrowWightVoxAttack
	VoiceMove				= BarrowWightVoxAttack
	VoiceMoveToCamp			= BarrowWightVoxAttack
	VoiceMoveWhileAttacking	= BarrowWightVoxAttack
	VoicePriority			= 96
	VoiceRetreatToCastle	= BarrowWightVoxAttack
	VoiceSelect				= BarrowWightVoxAttack
	VoiceSelectBattle 		= BarrowWightVoxAttack
	VoiceGuard				= BarrowWightVoxAttack
	SoundImpact				= ImpactHorse
	EvaEventDamagedOwner = UnitUnderAttack
	EvaEventDieOwner = WitchKingDie

End

Object EvilMenBlackRider

	AddModule	
	Behavior = ExperienceLevelCreate ModuleTag_MPLevelBonus1
		LevelToGrant = 10
		MPOnly = Yes
	End
	End

	Scale		= 1.2

	AddModule
 	Behavior = FireWeaponWhenDeadBehavior ModuleTag_DIELIKETHIS
    	StartsActive = Yes
    	DeathWeapon = RainOfFirePhaseOneWeaponNew
  	End
  	End

	Side = Neutral
	EditorSorting = UNIT
	ThreatLevel = 4.0
	ThingClass = CHARACTER_UNIT
	CrusherLevel   = 4  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
	CrushWeapon = BalrogCrush  

	TransportSlotCount = 1
	
	
	WeaponSet
		Conditions		= WEAPONSET_HERO_MODE
		Weapon			= PRIMARY   TriagronHeroHammer
	End

	WeaponSet
		Conditions				= None
		Weapon					= PRIMARY TriagronHammer
		AutoChooseSources		= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
	
	ArmorSet
		Conditions      = None
		Armor           = ArgonArmor
		DamageFX        = NormalDamageFX
	End

	VisionRange = VISION_BALROG					
	ShroudClearingRange = SHROUD_CLEAR_BALROG
	ShockwaveResistance = SHOCKWAVE_RESISTANCE_ALWAYS
	CanPathThroughGates	= No
	IsTrainable = Yes
	
	DeadCollideSize = LARGE ; How big does the AOD consider this unit for damage fx & behavior.

  LocomotorSet
    Locomotor     = BalrogLocomotor
    Condition     = SET_NORMAL
    Speed         = 80
  End   
End

;<<<<<<<
;Modules
;>>>>>>>

Object EvilMenBlackRider

	AddModule
	Behavior = GrantUpgradeCreate ModuleTag_trigrant
		UpgradeToGrant = Upgrade_GandalfWordOfPower  ;
	End 
	End
	AddModule
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_trially
	SpecialPowerTemplate = SpecialAbilityCreateAHeroSoSSummonAllies_Level1
	TriggeredBy			 = Upgrade_GandalfWordOfPower
	End
	End
	AddModule
	Behavior = OCLSpecialPower ModuleTag_OCLSpecialPowertrially
	SpecialPowerTemplate	= SpecialAbilityCreateAHeroSoSSummonAllies_Level1
	OCL						= OCL_CreateAHeroSoSSpawnAllies_Level1
	TriggerFX				= FX_SummonWildmen
	CreateLocation			= CREATE_AT_LOCATION
	StartsPaused			= Yes
	SetModelCondition		= ModelConditionState:USER_1
	SetModelConditionTime	= 8.1
	End
	End
	AddModule
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_wopEnabler
		SpecialPowerTemplate = SpecialAbilityTriWord
		TriggeredBy = Upgrade_GandalfWordOfPower
	End
	End
	AddModule
	Behavior = SpecialPowerModule ModuleTag_wopStarter       
		SpecialPowerTemplate      = SpecialAbilityTriWord
		UpdateModuleStartsAttack  = Yes
		StartsPaused		  	  = Yes
	End
	End
	AddModule
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_wopWeaponFireUpdate   
		SpecialPowerTemplate    = SpecialAbilityTriWord
		WhichSpecialWeapon		= 1
		SkipContinue			= Yes

		UnpackTime              = 300 
		PackTime                = 1	
		FreezeAfterTriggerDuration = 2500 ; Hold AI for this long after we fire.
		
		AwardXPForTriggering    = 0		
		StartAbilityRange		= 80.0
		
		SpecialWeapon			= TriagronWordOfPower
	End
	End
	AddModule
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_tricrip
	SpecialPowerTemplate = SpecialAbilityTriCrip
	TriggeredBy			 = Upgrade_GandalfWordOfPower
	End 
	End	
	AddModule
	Behavior = SpecialPowerModule ModuleTag_tricrip1
	SpecialPowerTemplate	 = SpecialAbilityTriCrip
	UpdateModuleStartsAttack = Yes
	StartsPaused			 = Yes
//		InitiateSound			 = LurtzVoiceAttackCripplingStrike
	End
	End
	AddModule
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_tricrip11
	SpecialPowerTemplate = SpecialAbilityTriCrip
	SkipContinue		 = Yes

	UnpackTime			 = 500	//Pull out arrow
	PreparationTime		 = 1	//Quick	shot
	PersistentPrepTime	 = 500	//looping the quick	shot
	PackTime			 = 500	//back to idle
	MustFinishAbility	 = Yes
	
	AwardXPForTriggering = 0	 
	StartAbilityRange	 = 30.0
	
	SpecialWeapon		 = TriagronCripple
	WhichSpecialWeapon	 = 1
//	RejectedConditions	 = WEAPON_TOGGLE
	End
	End
	AddModule
	Behavior = GrantUpgradeCreate ModuleTag_tricostume
		UpgradeToGrant = Upgrade_GandalfWhite
	End 
	End
	AddModule
	Behavior = SubObjectsUpgrade Costume_tricostume1
		TriggeredBy		= Upgrade_GandalfWhite
		UpgradeTexture	= MUBlkRider_SKN.tga 0 CHSS_TL_U_SKN.tga
				RecolorHouse	= No
	End
	End
	AddModule
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_triinvulnerable
	SpecialPowerTemplate = SpecialAbilityTriV
	TriggeredBy			 = Upgrade_GandalfWordOfPower
	End
	End
	AddModule
	Behavior = SpecialPowerModule ModuleTag_triinvulnerable1
	SpecialPowerTemplate		 = SpecialAbilityTriV
	UpdateModuleStartsAttack	 = No
	StartsPaused				 = Yes
	AttributeModifier			 = CreateAHeroInvulnerabilityBonus_Level3
	AttributeModifierRange		 = 1
	AttributeModifierAffectsSelf = Yes
	AttributeModifierAffects	 = ANY +CAVALRY	+INFANTRY
	AttributeModifierFX			 = FX_CreateAHeroInvulnerability_Start
	End
	End
	AddModule
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_bombard
	SpecialPowerTemplate = SpecialAbilityTriBombard
	TriggeredBy = Upgrade_GandalfWordOfPower
	End
	End
	AddModule
	Behavior = OCLSpecialPower ModuleTag_bombard1
	SpecialPowerTemplate = SpecialAbilityTriBombard
	OCL                  = OCL_CreateAHeroBombardSeed_Level3
	CreateLocation       = USE_SECONDARY_OBJECT_LOCATION
	NearestSecondaryObjectFilter = NONE SAME_PLAYER +CASTLE_KEEP 
	StartsPaused		 = Yes
	End
	End
	AddModule
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_AragornBladeMasterEnabler
		SpecialPowerTemplate = SpecialAbilityStrengthOfTheGolem
		TriggeredBy = Upgrade_GandalfWordOfPower
	End
      	End
      	AddModule
  	Behavior = SpecialPowerModule ModuleTag_AragornBladeMasterStarter
		SpecialPowerTemplate    = SpecialAbilityStrengthOfTheGolem
		StartsPaused			= Yes
	End
      	End
      	AddModule
	Behavior = HeroModeSpecialAbilityUpdate ModuleTag_AragornBladeMasterUpdate
		SpecialPowerTemplate    = SpecialAbilityStrengthOfTheGolem
		HeroAttributeModifier	= TriagronBM
		HeroEffectDuration		= 30000 ; in milliseconds
		UnpackTime              = 1
	End
	End
End

;<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;						  Elrond
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

;<<<<<<<<<<<<
;    FX
;>>>>>>>>>>>>

;---Elrond Blade Master---

ModifierList PowerOfRivendell
	Category = WEAPON
	Modifier = DAMAGE_MULT 200%
	Modifier = ARMOR 150%
	Modifier = SPEED 200%
	Duration = 400
	FX		 = FX_GandalfLightningCharge
End

FXList FX_GandalfLightningSword
  ParticleSysBone     = B_SWORDBONE LightningCharge FollowBone:Yes
End



;-------------------------
FXList FX_GandalfLightningSwordBlastWeaponHACKDEMOHACKSUCKBEER
	FXListAtBonePos
		FX = FX_GandalfLightningSwordBlastWeaponHACKDEMOHACKSUCKBEERAtBone
		BoneName = B_SWORDBONE
	End
End


FXList FX_GandalfLightningCharge
  ParticleSystem
    Name = LightningStrike3 FollowBone:Yes
    OrientToObject = Yes
    CreateBoneOverride = B_SWORDBONE
    TargetBoneOverride = B_SWORDBONE
    UseTargetOffset = Yes
    TargetOffset = X:0.0 Y:0.0 Z:300
  End
  ParticleSystem
    Name = LightningStrike2 FollowBone:Yes
    OrientToObject = Yes
    CreateBoneOverride = B_SWORDBONE
    TargetBoneOverride = B_SWORDBONE
    UseTargetOffset = Yes
    TargetOffset = X:25.0 Y:0 Z:8.0
    InitialDelay = 600 600 UNIFORM   ;In milliseconds
  End
  ParticleSystem
    Name = LightningStrike FollowBone:Yes
    OrientToObject = Yes
    CreateBoneOverride = B_SWORDBONE
    TargetBoneOverride = B_SWORDBONE
    UseTargetOffset = Yes
    TargetOffset = X:-25.0 Y:0.0 Z:8.0
    InitialDelay = 1200 1200 UNIFORM   ;In milliseconds
  End
  ParticleSystem
    Name = LightningStrike3 FollowBone:Yes
    OrientToObject = Yes
    CreateBoneOverride = B_SWORDBONE
    TargetBoneOverride = B_SWORDBONE
    UseTargetOffset = Yes
    TargetOffset = X:25.0 Y:-25.0 Z:8.0
    InitialDelay = 1800 1800 UNIFORM   ;In milliseconds
  End
  ParticleSystem
    Name = LightningStrike2 FollowBone:Yes
    OrientToObject = Yes
    CreateBoneOverride = B_SWORDBONE
    TargetBoneOverride = B_SWORDBONE
    UseTargetOffset = Yes
    TargetOffset = X:25.0 Y:0 Z:8.0
    InitialDelay = 2400 2400 UNIFORM   ;In milliseconds
  End
  ParticleSystem
    Name = LightningStrike FollowBone:Yes
    OrientToObject = Yes
    CreateBoneOverride = B_SWORDBONE
    TargetBoneOverride = B_SWORDBONE
    UseTargetOffset = Yes
    TargetOffset = X:25.0 Y:0.0 Z:8.0
    InitialDelay = 3200 3200 UNIFORM   ;In milliseconds
  End
  ParticleSystem
    Name = LightningStrike3 FollowBone:Yes
    OrientToObject = Yes
    CreateBoneOverride = B_SWORDBONE
    TargetBoneOverride = B_SWORDBONE
    UseTargetOffset = Yes
    TargetOffset = X:12 Y:0.0 Z:8.0
    InitialDelay = 3800 3800 UNIFORM   ;In milliseconds
  End
  ParticleSystem
    Name = LightningStrike2 FollowBone:Yes
    OrientToObject = Yes
    CreateBoneOverride = B_SWORDBONE
    TargetBoneOverride = B_SWORDBONE
    UseTargetOffset = Yes
    TargetOffset = X:25.0 Y:-25.0 Z:8.0
    InitialDelay = 4000 4400 UNIFORM   ;In milliseconds
  End
  ParticleSystem
    Name = LightningStrike FollowBone:Yes
    OrientToObject = Yes
    CreateBoneOverride = B_SWORDBONE
    TargetBoneOverride = B_SWORDBONE
    UseTargetOffset = Yes
    TargetOffset = X:25.0 Y:0.0 Z:8.0
    InitialDelay = 5000 5000 UNIFORM   ;In milliseconds
  End
  ParticleSystem
    Name = LightningStrike3 FollowBone:Yes
    OrientToObject = Yes
    CreateBoneOverride = B_SWORDBONE
    TargetBoneOverride = B_SWORDBONE
    UseTargetOffset = Yes
    TargetOffset = X:0.0 Y:25.0 Z:8.0
    InitialDelay = 5600 5600 UNIFORM   ;In milliseconds
  End
  ParticleSystem
    Name = LightningStrike2 FollowBone:Yes
    OrientToObject = Yes
    CreateBoneOverride = B_SWORDBONE
    TargetBoneOverride = B_SWORDBONE
    UseTargetOffset = Yes
    TargetOffset = X:25.0 Y:-25.0 Z:8.0
    InitialDelay = 6200 6200 UNIFORM   ;In milliseconds
  End
  ParticleSystem
    Name = LightningStrike2 FollowBone:Yes
    OrientToObject = Yes
    CreateBoneOverride = B_SWORDBONE
    TargetBoneOverride = B_SWORDBONE
    UseTargetOffset = Yes
    TargetOffset = X:25.0 Y:-25.0 Z:8.0
    InitialDelay = 6800 6800 UNIFORM   ;In milliseconds
  End
  ParticleSystem
    Name = LightningStrike FollowBone:Yes
    OrientToObject = Yes
    CreateBoneOverride = B_SWORDBONE
    TargetBoneOverride = B_SWORDBONE
    UseTargetOffset = Yes
    TargetOffset = X:25.0 Y:0.0 Z:8.0
    InitialDelay = 7400 7400 UNIFORM   ;In milliseconds
  End
  ParticleSystem
    Name = LightningStrike3 FollowBone:Yes
    OrientToObject = Yes
    CreateBoneOverride = B_SWORDBONE
    TargetBoneOverride = B_SWORDBONE
    UseTargetOffset = Yes
    TargetOffset = X:25.0 Y:25.0 Z:8.0
    InitialDelay = 8000 8000 UNIFORM   ;In milliseconds
  End
  ParticleSystem
    Name = LightningStrike2 FollowBone:Yes
    OrientToObject = Yes
    CreateBoneOverride = B_SWORDBONE
    TargetBoneOverride = B_SWORDBONE
    UseTargetOffset = Yes
    TargetOffset = X:25.0 Y:-25.0 Z:8.0
    InitialDelay = 8600 8600 UNIFORM   ;In milliseconds
  End
  Sound 
    Name = GandalfLightningSummon
  End
End


; ----------------------------------------------
FXList FX_GandalfLightningFizzle
  ParticleSystem
    Name = LightningStrikeFizzle FollowBone:Yes
    OrientToObject = Yes
    CreateBoneOverride = B_SWORDBONE
    TargetBoneOverride = B_SWORDBONE
    UseTargetOffset = Yes
    TargetOffset = X:130.0 Y:-100.0 Z:-70
  End
  ParticleSystem
    Name = LightningStrikeFizzle FollowBone:Yes
    OrientToObject = Yes
    CreateBoneOverride = B_SWORDBONE
    TargetBoneOverride = B_SWORDBONE
    UseTargetOffset = Yes
    TargetOffset = X:-130.0 Y:65.0 Z:-70
    InitialDelay = 200 200 UNIFORM   ;In milliseconds
  End
  ParticleSystem
    Name = LightningStrikeFizzle FollowBone:Yes
    OrientToObject = Yes
    CreateBoneOverride = B_SWORDBONE
    TargetBoneOverride = B_SWORDBONE
    UseTargetOffset = Yes
    TargetOffset = X:-150.0 Y:5.0 Z:-70
    InitialDelay = 400 400 UNIFORM   ;In milliseconds
  End
  ParticleSystem
    Name = LightningStrikeFizzle FollowBone:Yes
    OrientToObject = Yes
    CreateBoneOverride = B_SWORDBONE
    TargetBoneOverride = B_SWORDBONE
    UseTargetOffset = Yes
    TargetOffset = X:70.0 Y:35.0 Z:-70
    InitialDelay = 600 600 UNIFORM   ;In milliseconds
  End
  ParticleSystem
    Name = LightningStrikeFizzle FollowBone:Yes
    OrientToObject = Yes
    CreateBoneOverride = B_SWORDBONE
    TargetBoneOverride = B_SWORDBONE
    UseTargetOffset = Yes
    TargetOffset = X:80.0 Y:-75.0 Z:-70
    InitialDelay = 800 800 UNIFORM   ;In milliseconds
  End
  ParticleSystem
    Name = LightningStrikeFizzle FollowBone:Yes
    OrientToObject = Yes
    CreateBoneOverride = B_SWORDBONE
    TargetBoneOverride = B_SWORDBONE
    UseTargetOffset = Yes
    TargetOffset = X:-75.0 Y:120.0 Z:-70
    InitialDelay = 1000 1000 UNIFORM   ;In milliseconds
  End
  ParticleSystem
    Name = LightningStrikeFizzle FollowBone:Yes
    OrientToObject = Yes
    CreateBoneOverride = B_SWORDBONE
    TargetBoneOverride = B_SWORDBONE
    UseTargetOffset = Yes
    TargetOffset = X:-120 Y:-80.0 Z:-70
    InitialDelay = 1200 1200 UNIFORM   ;In milliseconds
  End
  ParticleSystem
    Name = LightningStrikeFizzle FollowBone:Yes
    OrientToObject = Yes
    CreateBoneOverride = B_SWORDBONE
    TargetBoneOverride = B_SWORDBONE
    UseTargetOffset = Yes
    TargetOffset = X:10.0 Y:-75.0 Z:-70
    InitialDelay = 1400 1400 UNIFORM   ;In milliseconds
  End
  ParticleSystem
    Name = LightningStrikeFizzle FollowBone:Yes
    OrientToObject = Yes
    CreateBoneOverride = B_SWORDBONE
    TargetBoneOverride = B_SWORDBONE
    UseTargetOffset = Yes
    TargetOffset = X:20.0 Y:20.0 Z:-70
    InitialDelay = 1600 1600 UNIFORM   ;In milliseconds
  End
  ParticleSystem
    Name = LightningStrikeFizzle FollowBone:Yes
    OrientToObject = Yes
    CreateBoneOverride = B_SWORDBONE
    TargetBoneOverride = B_SWORDBONE
    UseTargetOffset = Yes
    TargetOffset = X:75.0 Y:-50.0 Z:-70
    InitialDelay = 1800 1800 UNIFORM   ;In milliseconds
  End
  ParticleSystem
    Name = LightningStrikeFizzle FollowBone:Yes
    OrientToObject = Yes
    CreateBoneOverride = B_SWORDBONE
    TargetBoneOverride = B_SWORDBONE
    UseTargetOffset = Yes
    TargetOffset = X:-120.0 Y:100.0 Z:-70
    InitialDelay = 2000 2000 UNIFORM   ;In milliseconds
	End
End

;-------------------------
FXList FX_GandalfLightningSwordBlastWeapon

;  ParticleSystem
;    Name = LightningStrikeHit1
;    OrientToObject = Yes
;    CreateBoneOverride = BAT_JAW
;    TargetBoneOverride = BAT_HAND_L
;    CreateBoneAtTarget = Yes
;  End
  
  ParticleSystem
    Name = LightningStrike2 FollowBone:Yes
    OrientToObject = Yes
    CreateBoneOverride = B_SWORDBONE
    TargetBoneOverride = BAT_PELVIS
    InitialDelay = 400 400 UNIFORM   ;In milliseconds
  End
  ParticleSystem
    Name = LightningStrike3 FollowBone:Yes
    OrientToObject = Yes
    CreateBoneOverride = B_SWORDBONE
    TargetBoneOverride = BAT_PELVIS
    InitialDelay = 800 800 UNIFORM   ;In milliseconds
  End
  ParticleSystem
    Name = LightningStrike FollowBone:Yes
    OrientToObject = Yes
    CreateBoneOverride = B_SWORDBONE
    TargetBoneOverride = BAT_PELVIS
    InitialDelay = 1200 1200 UNIFORM   ;In milliseconds
  End
  ParticleSystem
    Name = LightningStrike2 FollowBone:Yes
    OrientToObject = Yes
    CreateBoneOverride = B_SWORDBONE
    TargetBoneOverride = BAT_PELVIS
    InitialDelay = 1600 1600 UNIFORM   ;In milliseconds
  End
  ParticleSystem
    Name = LightningStrike3 FollowBone:Yes
    OrientToObject = Yes
    CreateBoneOverride = B_SWORDBONE
    TargetBoneOverride = BAT_PELVIS
    InitialDelay = 2000 2000 UNIFORM   ;In milliseconds
  End
End

FXParticleSystem LightningCharge
  System
    Priority = VERY_LOW_OR_ABOVE
    ParticleName = EXGimliAxeSpecial.tga
    Lifetime = 5 5
    SystemLifetime = 50
    SortLevel = 1
    Size = 10 10
    BurstCount = 0 1.05
    InitialDelay = 15 15
  End
  Color = DefaultColor
    Color1 = R:000 G:000 B:255 0
    Color2 = R:0 G:0 B:0 5
  End
  Update = DefaultUpdate
    SizeRate = 5 5
    SizeRateDamping = 1 1
    AngleZ = -7 7
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = PointEmissionVolume
    IsHollow = Yes
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem LightningStrike
  System
    Priority = ALWAYS_RENDER
    Type = STREAK
    ParticleName = EXLightningBolt04.tga
    Lifetime = 20 20
    SystemLifetime = 1
    Size = 1 15
    BurstCount = 10 10
  End
  Color = DefaultColor
    Color1 = R:000 G:000 B:255 0
    Color2 = R:0 G:00 B:000 5
    Color3 = R:0 G:0 B:0 20
    ColorScale = -2 -2
  End
  Update = DefaultUpdate
    SizeRate = 0.5 3
    SizeRateDamping = 0.9 1
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.9 0.9
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = -0.3 0.3
    Y = -0.3 0.3
  End
  EmissionVolume = LightningEmission
    EndPoint = X:-450 Y:0 Z:0
    Amplitude1 = 100 100
    Frequency1 = 4 6
    Phase1 = 4 5
    Phase2 = 0 6.28
    Phase3 = 0 6.28
  End
  Draw = LightningDraw
    OffsetX = -5 5
    OffsetY = -5 5
    OffsetZ = -1 1
  End
End

FXParticleSystem LightningStrike2
  System
    Priority = ALWAYS_RENDER
    Type = STREAK
    ParticleName = EXLightningBolt04.tga
    Lifetime = 20 20
    SystemLifetime = 1
    Size = 1 15
    BurstCount = 10 10
  End
  Color = DefaultColor
    Color1 = R:000 G:000 B:255 0
    Color2 = R:0 G:00 B:000 5
    Color3 = R:0 G:0 B:0 20
    ColorScale = -2 -2
  End
  Update = DefaultUpdate
    SizeRate = 0.5 3
    SizeRateDamping = 0.9 1
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.9 0.9
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = -0.3 0.3
    Y = -0.3 0.3
  End
  EmissionVolume = LightningEmission
    EndPoint = X:-450 Y:0 Z:0
    Amplitude1 = -100 -100
    Frequency1 = 4 6
    Phase1 = 4 5
    Phase2 = 0 6.28
    Phase3 = 0 6.28
  End
  Draw = LightningDraw
    OffsetX = -5 5
    OffsetY = -5 5
    OffsetZ = -1 1
  End
End

FXParticleSystem LightningStrike3
  System
    Priority = ALWAYS_RENDER
    Type = STREAK
    ParticleName = EXLightningBolt04.tga
    Lifetime = 20 20
    SystemLifetime = 1
    Size = 1 15
    BurstCount = 10 10
  End
  Color = DefaultColor
    Color1 = R:000 G:000 B:255 0
    Color2 = R:0 G:00 B:000 5
    Color3 = R:0 G:0 B:0 20
  End
  Update = DefaultUpdate
    SizeRate = 0.5 3
    SizeRateDamping = 0.9 1
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.9 0.9
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = -0.3 0.3
    Y = -0.3 0.3
  End
  EmissionVolume = LightningEmission
    EndPoint = X:-450 Y:0 Z:0
    Amplitude1 = -100 100
    Frequency1 = 4 6
    Phase1 = 4 5
    Phase2 = 0 6.28
    Phase3 = 0 6.28
  End
  Draw = LightningDraw
    OffsetX = -5 5
    OffsetY = -5 5
    OffsetZ = -1 1
  End
End

FXParticleSystem LightningStrike5
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXLnzFlar1.tga
    Lifetime = 10 10
    SystemLifetime = 1
    Size = 1 20
    BurstCount = 10 10
  End
  Color = DefaultColor
    Color1 = R:000 G:000 B:255 0
    Color2 = R:00 G:000 B:000 5
    Color3 = R:0 G:0 B:0 10
    ColorScale = -40 40
  End
  Update = DefaultUpdate
    SizeRate = 0.5 1
    SizeRateDamping = 0.9 1
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.9 0.9
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = LineEmissionVolume
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem LightningStrike6
  System
    Priority = ALWAYS_RENDER
    Type = STREAK
    ParticleName = EXLightningBolt04.tga
    Lifetime = 10 10
    SystemLifetime = 1
    Size = 1 4
    BurstCount = 10 10
  End
  Color = DefaultColor
    Color1 = R:000 G:000 B:255 0
    Color2 = R:0 G:00 B:000 5
    Color3 = R:0 G:0 B:0 20
  End
  Update = DefaultUpdate
    SizeRate = 0.5 1
    SizeRateDamping = 0.9 1
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.9 0.9
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = LightningEmission
    EndPoint = X:-10 Y:0 Z:0
  End
  Draw = LightningDraw
  End
End

FXParticleSystem LightningStrikeFizzle
  System
    Priority = VERY_LOW_OR_ABOVE
    Type = STREAK
    ParticleName = EXLightningBolt04.tga
    Lifetime = 20 20
    SystemLifetime = 1
    Size = 1 15
    BurstDelay = 20 20
    BurstCount = 5 5
  End
  Color = DefaultColor
    Color1 = R:000 G:000 B:255 0
    Color2 = R:0 G:00 B:000 5
    Color3 = R:0 G:0 B:0 20
    ColorScale = -2 -2
  End
  Update = DefaultUpdate
    SizeRate = 0.5 3
    SizeRateDamping = 0.9 1
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = -0.1 0.1
    Y = -0.1 0.1
  End
  EmissionVolume = LightningEmission
    EndPoint = X:-450 Y:0 Z:0
    Amplitude1 = -50 -50
    Frequency1 = 1 6
    Phase1 = 1 2
    Phase2 = 0 2
    Phase3 = 0 2
  End
  Draw = LightningDraw
    OffsetX = -5 5
    OffsetY = -5 5
    OffsetZ = -1 1
  End
End

FXParticleSystem LightningStrikeHit1
  System
    Priority = VERY_LOW_OR_ABOVE
    Type = STREAK
    ParticleName = EXLightningBolt06.tga
    Lifetime = 20 20
    Size = 1 5
    BurstDelay = 20 20
    BurstCount = 3 3
  End
  Color = DefaultColor
    Color1 = R:000 G:000 B:255 0
    Color2 = R:0 G:00 B:000 5
    Color3 = R:0 G:0 B:0 20
    ColorScale = -2 -2
  End
  Update = DefaultUpdate
    SizeRate = 0.5 3
    SizeRateDamping = 0.9 1
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = -0.5 0.5
    Y = -0.5 0.5
  End
  EmissionVolume = LightningEmission
    EndPoint = X:50 Y:0 Z:0
    Amplitude1 = -50 50
    Frequency1 = 4 6
    Phase1 = 4 5
    Phase2 = 0 6.28
    Phase3 = 0 6.28
  End
  Draw = LightningDraw
    OffsetX = -5 5
    OffsetY = -5 5
    OffsetZ = -1 1
  End
End

FXParticleSystem LightningSword
  System
    Priority = VERY_LOW_OR_ABOVE
    Type = DRAWABLE
    ParticleName = P_Lightning.w3d
    Lifetime = 10000 10000
    SystemLifetime = 1
    Size = 1 1
    BurstCount = 1 1
  End
  Color = DefaultColor
    Color1 = R:000 G:000 B:255 0
    ColorScale = 1 1
  End
  Alpha = DefaultAlpha
    Alpha1 = 1 1 0
  End
  Update = DefaultUpdate
    SizeRateDamping = 1 1
    AngularDamping = 1 1
    Rotation = ROTATE_X
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = 0 1
    Y = 0 1
    Z = -1 2
  End
  EmissionVolume = PointEmissionVolume
  End
  Draw = RenderObjectDraw
  End
End

FXParticleSystem ElrondWordBlast
  System
    Priority = ALWAYS_RENDER
    Shader = W3D_EMISSIVE
    Type = DRAWABLE
    ParticleName = exlightshafts01.w3d
    Lifetime = 1500 1500
    SystemLifetime = 15
    StartSizeRate = 0.2 0.2
    BurstCount = 1 1
  End
  Color = DefaultColor
    Color1 = R:5 G:5 B:5 0
    Color2 = R:65 G:100 B:222 10
    Color3 = R:0 G:0 B:0 30
  End
  Alpha = DefaultAlpha
    Alpha1 = 0.3 0.3 0
  End
  Update = DefaultUpdate
    SizeRate = 0.5 0.5
    SizeRateDamping = 1 1
    AngleZ = -100 100
    AngularRateZ = -0.1 0.1
    AngularDamping = 0.97 0.97
    Rotation = ROTATE_Z
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = PointEmissionVolume
  End
  Draw = RenderObjectDraw
  End
End

FXParticleSystem ElrondShafts
  System
    Priority = ALWAYS_RENDER
    Shader = W3D_EMISSIVE
    Type = DRAWABLE
    ParticleName = exlight01.w3d
    Lifetime = 1500 1500
    SystemLifetime = 15
    StartSizeRate = 0.2 0.2
    BurstCount = 1 1
  End
  Color = DefaultColor
    Color1 = R:5 G:5 B:5 0
    Color2 = R:65 G:100 B:222 10
    Color3 = R:0 G:0 B:0 30
  End
  Alpha = DefaultAlpha
    Alpha1 = 0.3 0.3 0
  End
  Update = DefaultUpdate
    SizeRate = 0.5 0.5
    SizeRateDamping = 1 1
    AngleZ = -100 100
    AngularRateZ = -0.1 0.1
    AngularDamping = 0.97 0.97
    Rotation = ROTATE_Z
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = PointEmissionVolume
  End
  Draw = RenderObjectDraw
  End
End

FXParticleSystem ElectricalEfx
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXLightning03.tga
    PerParticleAttachedSystem = GandalfBeamExplosion
    Lifetime = 3 3
    SystemLifetime = 50
    Size = 8 35
    BurstDelay = 0 3
    BurstCount = 1 5
  End
  Color = DefaultColor
    Color1 = R:121 G:121 B:121 0
    Color2 = R:255 G:255 B:255 2
    Color3 = R:0 G:0 B:0 5
  End
  Update = DefaultUpdate
    SizeRateDamping = 1 1
    AngleZ = -0.03 0.03
    AngularRateZ = -0.1 0.1
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.6 0.6
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = LineEmissionVolume
    StartPoint = X:0 Y:0 Z:5
    EndPoint = X:0 Y:0 Z:-5
  End
  Draw = DefaultDraw
  End
End


FXParticleSystem LightningNew
  System
    Priority = ALWAYS_RENDER
    Type = STREAK
    ParticleName = EXLightningBolt04.tga
    Lifetime = 20 20
    SystemLifetime = 30
    Size = 1 15
    BurstDelay = 40 150
    BurstCount = 10 10
    InitialDelay = 45 150
  End
  Color = DefaultColor
    Color1 = R:255 G:255 B:255 0
    Color2 = R:152 G:133 B:201 5
    Color3 = R:0 G:0 B:0 20
    ColorScale = -2 -2
  End
  Update = DefaultUpdate
    SizeRate = 0.5 3
    SizeRateDamping = 0.9 1
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.9 0.9
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = -0.3 0.3
    Y = -0.3 0.3
  End
  EmissionVolume = LightningEmission
    StartPoint = X:50 Y:0 Z:50
    EndPoint = X:0 Y:75 Z:-210
    Amplitude1 = 100 100
    Frequency1 = 4 6
    Phase1 = 4 5
    Phase2 = 0 6.28
    Phase3 = 0 6.28
  End
  Draw = LightningDraw
    OffsetX = -5 5
    OffsetY = -5 5
    OffsetZ = -1 1
  End
End

FXParticleSystem SuckIn ;
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXShockWav.tga ;excracks.tga
    Lifetime = 50 50
    SystemLifetime = 15
    Size = 300 300
    StartSizeRate = 1 1
    BurstDelay = 2 2
    BurstCount = 1 1
    IsGroundAligned = Yes
  End
  Color = DefaultColor
    Color2 = R:200 G:200 B:200 15
    Color3 = R:100 G:100 B:100 25
  End
  Alpha = DefaultAlpha
    Alpha2 = 100.5 0.7 7
    Alpha3 = -0.2 0 25
  End
  Update = DefaultUpdate
    SizeRate = -10 -10
    SizeRateDamping = 1.05 1.05
    AngleZ = -180 180
    AngularDamping = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.75 0.8
  End
  EmissionVelocity = OutwardEmissionVelocity
    Speed = -4 -4
    OtherSpeed = -4 -4
  End
  EmissionVolume = LineEmissionVolume
    IsHollow = Yes
    StartPoint = X:0 Y:0 Z:-8
    EndPoint = X:0 Y:0 Z:10
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem Explode
  System
    Priority = ALWAYS_RENDER
    ParticleName = exlightshafts01.w3d
    Lifetime = 40 40
    SystemLifetime = 25
    Size = 5 5
    BurstDelay = 3 3
    BurstCount = 1 1
    InitialDelay = 45 45
    IsGroundAligned = Yes
  End
  Color = DefaultColor
    Color1 = R:5 G:5 B:5 0
    Color2 = R:65 G:100 B:222 10
    Color3 = R:0 G:0 B:0 30
    ColorScale = -1 0
  End
  Update = DefaultUpdate
    SizeRate = 6 7
    SizeRateDamping = 0.9 0.9
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = 35 35
    Y = 35 35
  End
  EmissionVolume = LineEmissionVolume
    IsHollow = Yes
    StartPoint = X:0 Y:0 Z:0.5
    EndPoint = X:0 Y:0 Z:0.5
  End
  Draw = DefaultDraw
  End
End

FXList FX_ElrondWave
  ParticleSystem
    Name = ElectricalEfx
    Offset = X:0.0 Y:0.0 Z:5.0
  End
  ParticleSystem
    Name = LightningNew
    Offset = X:0.0 Y:0.0 Z:5.0
  End
  ParticleSystem
    Name = SuckIn
    Offset = X:0.0 Y:0.0 Z:5.0
  End
  ParticleSystem
    Name = ElrondWordBlast
    Offset = X:0.0 Y:0.0 Z:5.0
  End
  ParticleSystem
    Name = ElrondShafts
    Offset = X:0.0 Y:0.0 Z:5.0
  End
  ParticleSystem
    Name = SarumanLightningHit01
    Offset = X:0.0 Y:0.0 Z:5.0
  End
  Sound
    Name = GandalfBlastWeapon
  End
End

ModifierList NewElrond
	Category	 = SPELL
	Modifier	 = INVULNERABLE CREATE_A_HERO_INVULNERABILITY_MODIFIER
	Duration	 = 30000					// Matches RefreshRate of giving	module
	FX			 = FX_CreateAHeroInvulnerability_60	 

End

;<<<<<<<<<<<<
;  Weapons
;>>>>>>>>>>>>

Weapon ElrondSwordNew
  LeechRangeWeapon      = Yes
  AttackRange           = 30
  MeleeWeapon           = Yes
  DelayBetweenShots     = ELROND_DELAYBETWEENSHOTS 			
             ; time between shots, msec
  PreAttackDelay        = 300				; 400 is sword swing delay time before contact with target.
  PreAttackType         = PER_SHOT ; Do the delay each time we attack a new target
  FireFX                = FX_GondorSwordHit ; Change this
  FiringDuration        = 300				; Duration of the sword swing

  DamageNugget                        ; A basic Nugget that just does damage
    Damage        = 250					
    Radius        = 20.0
    DelayTime     = 0
    DamageType    = HERO  ;MAGIC  ; with magic he owns AOD too easy.
    DamageFXType  = ELECTRIC ;MAGIC
    DeathType     = NORMAL
    DamageSpeed		= 300.0 ; must match the ShockWaveSpeed below
  End
   MetaImpactNugget
    HeroResist			= .00
    ShockWaveAmount   = 30.0		
    ShockWaveRadius   = 20.0
    ShockWaveTaperOff = 0.2
    ShockWaveArc      = 600
    ShockWaveSpeed	  = 350.0
  End
End

;<<<<<<<<<<<<<<<<<<<<
;  Ability Weapons
;>>>>>>>>>>>>>>>>>>>>

Weapon ElrondSuperSword
  LeechRangeWeapon      = Yes
  AttackRange           = 30.0
  MeleeWeapon           = Yes
  DelayBetweenShots     = 100
  PreAttackDelay        = 533
  PreAttackType         = PER_SHOT
  FireFX                = FX_GandalfLightningCharge
  FiringDuration        = 400
  RadiusDamageAffects = ENEMIES NOT_SIMILAR
  ClearNuggets
  DamageNugget
    Damage        = 200
    Radius        = 66.0
    DelayTime     = 0
    DamageType    = MAGIC
    DamageFXType  = BOLT
    DeathType     = EXPLODED
    DamageArc     = 600
    DamageSpeed		= 350.0 ; must match the ShockWaveSpeed below
  End
  MetaImpactNugget
    HeroResist			= .00
    ShockWaveAmount   = 60.0		
    ShockWaveRadius   = 66.0
    ShockWaveTaperOff = 0.4
    ShockWaveArc      = 600
    ShockWaveSpeed	  = 350.0
  End
End

Weapon ElrondWave ; Big Blue Ring Blast
	IdleAfterFiringDelay = 0
	AttackRange = GANDALF_WORD_OF_POWER_RANGE
	MinimumAttackRange = 0.8
	WeaponSpeed = 401         ; dist/sec 
	MinWeaponSpeed = 241
	MaxWeaponSpeed = 601      ; dist/sec Upper limit on scaling, when attacking past nominal "max" range
	ScaleWeaponSpeed = Yes ; Used for lob weapons, scales speed proportional to range
	RadiusDamageAffects = ENEMIES NOT_SIMILAR
	DelayBetweenShots = 5000               ; time between shots, msec
	PreAttackDelay        = 2600
	PreAttackType         = PER_ATTACK ; Do the delay each time we attack a new target
	FireFX                = FX_ElrondWave
	FiringDuration      = 1400
	DamageNugget                        ; A basic Nugget that just does damage
		Damage			= GANDALF_WORD_OF_POWER_DAMAGE
		Radius			= 250.0
		DamageType		= MAGIC
		DamageFXType	= BOLT
		DeathType		= EXPLODED
		DamageSpeed		= 700.0 ; must match the ShockWaveSpeed below
	End
	MetaImpactNugget                    ; A Nugget that throws things back with force
;		HeroResist			= .75
		ShockWaveAmount   = 75.0
		ShockWaveRadius   = 500.0
		ShockWaveTaperOff = 1.0
		ShockWaveZMult    = 1.000
		ShockWaveSpeed	  = 700.0 
	End
End

;<<<<<<<<<<<<
;  Levels
;>>>>>>>>>>>>

ExperienceLevel	ElrondLevel1
	TargetNames				=	ElvenElrond
	RequiredExperience		=	1	
	ExperienceAward			=	ELROND_LVL1_EXP_AWARD
	Rank					=	1
;	AttributeModifiers		=	ElrondResistKnockback
	SelectionDecal
		Texture				=	decal_hero_good
		Style				=	SHADOW_ALPHA_DECAL
		OpacityMin			=	50%	
		OpacityMax			=	100%
		MinRadius			=	40
		MaxRadius			=	200
		MaxSelectedUnits	=	40
	End	
End	

ExperienceLevel	ElrondLevel2
	TargetNames				=	ElvenElrond
	RequiredExperience		=	ELROND_LVL2_EXP_NEEDED	
	ExperienceAward			=	ELROND_LVL2_EXP_AWARD
	Rank					=	2
	LevelUpFx				=	FX:GandalfLevelUp1FX
	AttributeModifiers		=	HeroLevelUpDamage1  ; ElrondResistKnockback 
	SelectionDecal
		Texture				=	decal_hero_good
		Style				=	SHADOW_ALPHA_DECAL
		OpacityMin			=	50%	
		OpacityMax			=	100%
		MinRadius			=	40
		MaxRadius			=	200
		MaxSelectedUnits	=	40
	End	
End	

ExperienceLevel	ElrondLevel3
	TargetNames				=	ElvenElrond
	RequiredExperience		=	ELROND_LVL3_EXP_NEEDED	
	ExperienceAward			=	ELROND_LVL3_EXP_AWARD
	Rank					=	3
	LevelUpFx				=	FX:GandalfLevelUp1FX
	AttributeModifiers		=	HeroLevelUpDamage2  ;ElrondResistKnockback 
	Upgrades				=	Upgrade_GandalfLightningSword
	SelectionDecal
		Texture				=	decal_hero_good
		Style				=	SHADOW_ALPHA_DECAL
		OpacityMin			=	50%	
		OpacityMax			=	100%
		MinRadius			=	40
		MaxRadius			=	200
		MaxSelectedUnits	=	40
	End	
End	

ExperienceLevel	ElrondLevel4
	TargetNames				=	ElvenElrond
	RequiredExperience		=	ELROND_LVL4_EXP_NEEDED	
	ExperienceAward			=	ELROND_LVL4_EXP_AWARD
	Rank					=	4
	LevelUpFx				=	FX:GandalfLevelUp1FX
	AttributeModifiers		=	 HeroLevelUpDamage3 ;ElrondResistKnockback
	SelectionDecal
		Texture				=	decal_hero_good
		Style				=	SHADOW_ALPHA_DECAL
		OpacityMin			=	50%	
		OpacityMax			=	100%
		MinRadius			=	40
		MaxRadius			=	200
		MaxSelectedUnits	=	40
	End	
End	

ExperienceLevel	ElrondLevel5
	TargetNames				=	ElvenElrond
	RequiredExperience		=	ELROND_LVL5_EXP_NEEDED	
	ExperienceAward			=	ELROND_LVL5_EXP_AWARD
	Rank					=	5
	Upgrades				=	Upgrade_ElrondRestoration
	LevelUpFx				=	FX:GandalfLevelUp1FX
	AttributeModifiers		=	 HeroLevelUpDamage4	;ElrondResistKnockback
	SelectionDecal
		Texture				=	decal_hero_good
		Style				=	SHADOW_ALPHA_DECAL
		OpacityMin			=	50%	
		OpacityMax			=	100%
		MinRadius			=	40
		MaxRadius			=	200
		MaxSelectedUnits	=	40
	End	
End	

ExperienceLevel	ElrondLevel6
	TargetNames				=	ElvenElrond
	RequiredExperience		=	ELROND_LVL6_EXP_NEEDED	
	ExperienceAward			=	ELROND_LVL6_EXP_AWARD
	Rank					=	6
	LevelUpFx				=	FX:GandalfLevelUp1FX
	AttributeModifiers		=	 HeroLevelUpDamage5	;ElrondResistKnockback
	Upgrades				=	Upgrade_ElrondFarsight
	SelectionDecal
		Texture				=	decal_hero_good
		Style				=	SHADOW_ALPHA_DECAL
		OpacityMin			=	50%	
		OpacityMax			=	100%
		MinRadius			=	40
		MaxRadius			=	200
		MaxSelectedUnits	=	40
	End	
End	

ExperienceLevel	ElrondLevel7
	TargetNames				=	ElvenElrond
	RequiredExperience		=	ELROND_LVL7_EXP_NEEDED	
	ExperienceAward			=	ELROND_LVL7_EXP_AWARD
	Rank					=	7
	LevelUpFx				=	FX:GandalfLevelUp1FX
	AttributeModifiers		=	 HeroLevelUpDamage6	;ElrondResistKnockback
	Upgrades				=	Upgrade_ElrondTornado
	SelectionDecal
		Texture				=	decal_hero_good
		Style				=	SHADOW_ALPHA_DECAL
		OpacityMin			=	50%	
		OpacityMax			=	100%
		MinRadius			=	40
		MaxRadius			=	200
		MaxSelectedUnits	=	40
	End	
End	

ExperienceLevel	ElrondLevel8
	TargetNames				=	ElvenElrond
	RequiredExperience		=	ELROND_LVL8_EXP_NEEDED	
	ExperienceAward			=	ELROND_LVL8_EXP_AWARD
	Rank					=	8
	LevelUpFx				=	FX:GandalfLevelUp1FX
	AttributeModifiers		=	 HeroLevelUpDamage7	;ElrondResistKnockback
	SelectionDecal
		Texture				=	decal_hero_good
		Style				=	SHADOW_ALPHA_DECAL
		OpacityMin			=	50%	
		OpacityMax			=	100%
		MinRadius			=	40
		MaxRadius			=	200
		MaxSelectedUnits	=	40
	End	
End	

ExperienceLevel	ElrondLevel9
	TargetNames				=	ElvenElrond
	RequiredExperience		=	ELROND_LVL9_EXP_NEEDED	
	ExperienceAward			=	ELROND_LVL9_EXP_AWARD
	Rank					=	9
	LevelUpFx				=	FX:GandalfLevelUp1FX
	AttributeModifiers		=	 HeroLevelUpDamage8	;ElrondResistKnockback
	SelectionDecal
		Texture				=	decal_hero_good
		Style				=	SHADOW_ALPHA_DECAL
		OpacityMin			=	50%	
		OpacityMax			=	100%
		MinRadius			=	40
		MaxRadius			=	200
		MaxSelectedUnits	=	40
	End	
End	

ExperienceLevel	ElrondLevel10
	TargetNames				=	ElvenElrond
	RequiredExperience		=	ELROND_LVL10_EXP_NEEDED	
	ExperienceAward			=	ELROND_LVL10_EXP_AWARD
	Rank					=	10
	AttributeModifiers		=	 HeroLevelUpDamage9	;ElrondResistKnockback
	Upgrades				=	Upgrade_GandalfWordOfPower
	SelectionDecal
		Texture				=	decal_hero_good
		Style				=	SHADOW_ALPHA_DECAL
		OpacityMin			=	50%	
		OpacityMax			=	100%
		MinRadius			=	40
		MaxRadius			=	200
		MaxSelectedUnits	=	40
	End	
End

;<<<<<<<<<<<<<<<<<<<<<<
; Elrond Ability Timers
;>>>>>>>>>>>>>>>>>>>>>>

SpecialPower SpecialAbilityElrondWave
	Enum						   = SPECIAL_WORD_OF_POWER
	ReloadTime					   = 360000
End

SpecialPower SpecialAbilityCreateAHeroInvulnerability_Level3
	Enum									  =	SPECIAL_GENERAL_TARGETLESS
	ReloadTime								  =	180000
End

;<<<<<<<<<<<<<<<<<<<<<
;Elrond Commandbuttons
;>>>>>>>>>>>>>>>>>>>>>

CommandButton Command_GondorGandalfLightningSword
  Command                 = SPECIAL_POWER
  Options                 = NONE 
  SpecialPower            = SpecialAbilityAragornBladeMaster
  TextLabel               = CONTROLBAR:PowerOfRivendell
  ButtonImage             = HSGandalfLightningSword
  ButtonBorderType        = ACTION 
  DescriptLabel           = CONTROLBAR:ToolTipPowerOfRivendell
  InPalantir			  = Yes
  AutoAbility			  = Yes
  AutoDelay				  = 30.0
  PresetRange			  = 50.0
;  UnitSpecificSound = GandalfSpellVoice
End

CommandButton Command_SpecialAbilityAthelas
  Command                 = SPECIAL_POWER
  Options                 = NONE 
  SpecialPower            = SpecialAbilityElrondElvenGrace
  TextLabel               = CONTROLBAR:MightOfLothlorien
  ButtonImage             = HSElrondElvenGrace
  ButtonBorderType        = ACTION 
  DescriptLabel           = CONTROLBAR:ToolTipMightOfLothlorien
  InPalantir			  = Yes
  AutoAbility			  = Yes
  AutoDelay				  = 30.0
  PresetRange			  = 50.0
;  UnitSpecificSound = GandalfSpellVoice
End

CommandButton Command_SpellBookSunflare
  Command                 = SPECIAL_POWER
  Options                 = NONE 
  SpecialPower            = SpecialAbilityElrondWave
  TextLabel               = CONTROLBAR:ElrondWave
  ButtonImage             = SBGood_Sunflare
  ButtonBorderType        = ACTION 
  DescriptLabel           = CONTROLBAR:ToolTipElrondWave
  InPalantir			  = Yes
  AutoAbility			  = Yes
  AutoDelay				  = 30.0
  PresetRange			  = 50.0
;  UnitSpecificSound = GandalfSpellVoice
End

CommandButton Command_CreateAHero_Invulnerability_Level3
	Command								= SPECIAL_POWER
	SpecialPower						= SpecialAbilityCreateAHeroInvulnerability_Level3
	TextLabel							= CONTROLBAR:Invulnerability_Level3
	ButtonImage							= CAHInvulnerability
	RadiusCursorType					= TrainingRadiusCursor
	ButtonBorderType					= ACTION
	DescriptLabel						= CONTROLBAR:ToolTipInvulnerability_Level3
	InPalantir							= Yes
	AutoAbility							= Yes
	PresetRange							= 50.0
	UnitSpecificSound					= CaH_Invulnerability

	CreateAHeroUIAllowableUpgrades		= Upgrade_CreateAHero_ClassHeroOfTheWest Upgrade_CreateAHero_ClassDwarf
	CreateAHeroUIMinimumLevel			= 10
	CreateAHeroUIPrerequisiteButtonName	= Command_CreateAHero_Invulnerability_Level2
End

CommandButton Command_SpellBookHeal
	Command				= SPECIAL_POWER
	SpecialPower		= SpecialAbilityElrondRestoration
	TextLabel			= CONTROLBAR:NewRe
	DescriptLabel		= CONTROLBAR:ToolTipNewRe
	ButtonImage			= SBGood_Heal
	Options				= NEED_TARGET_POS
	ButtonBorderType	= ACTION
	RadiusCursorType	= HealRadiusCursor
	InPalantir			= Yes
	CommandTrigger		= Command_SpecialAbilityElrondRestorationHeal
End

;>>>>>>>>>>>>>>>>>>>>
;Elrond NewCommandSet
;<<<<<<<<<<<<<<<<<<<<

CommandSet NewElrondCommandSet
  1  = Command_SpecialAbilityAthelas
  2  = Command_GondorGandalfLightningSword
  3  = Command_SpellBookHeal
  4  = Command_CreateAHero_Invulnerability_Level3
  5  = Command_SpecialPowerSpawnWhirlwind
  6  = Command_SpellBookSunflare
	12 = Command_CaptureBuilding
	13 = Command_AttackMove
	14 = Command_Stop
        
End

Object ElvenElrond
 CommandSet = NewElrondCommandSet
End
	
Object ElvenElrond

	ShockwaveResistance = SHOCKWAVE_RESISTANCE_ALWAYS

	ArmorSet
		Conditions      = MOUNTED
		Armor           = ElrondArmor
		DamageFX        = NormalDamageFX
	End

	DisplayMeleeDamage = 100


	ReplaceModule ModuleTag_ElrondHealing
	Behavior = AutoHealBehavior ModuleTag_ElrondHealing1
		StartsActive = Yes
		HealingAmount = 130
		HealingDelay = 500
		StartHealingDelay = 8000
		HealOnlyIfNotInCombat = Yes
	End
	End

	WeaponSet
		Conditions		= WEAPONSET_HERO_MODE
		Weapon			= PRIMARY    ElrondSuperSword
	End

	WeaponSet
		Conditions				= None
		Weapon					= PRIMARY ElrondSwordNew
		AutoChooseSources		= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
;          Animations
;<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

	ReplaceModule ModuleTag_DRAW
	Draw = W3DScriptedModelDraw ModuleTag_DRAW1

		OkToChangeModelColor	= Yes
		StaticModelLODMode		= Yes
 
		DefaultModelConditionState
			Model						=	RUElrond_SKN
			ParticleSysBone = B_SWORDBONE SpiritSword FollowBone:Yes
			ParticleSysBone = B_SWORDBONE SpiritHaze FollowBone:Yes
		End
		ModelConditionState = WEAPONSET_HERO_MODE
			ParticleSysBone = B_SWORDBONE SpiritHaze FollowBone:Yes
			ParticleSysBone = B_SWORDBONE FlameHaze FollowBone:Yes
			ParticleSysBone = B_SWORDBONE SpiritSword FollowBone:Yes
			ParticleSysBone = BAT_RIBS LightningStrike FollowBone:Yes
		End


	
		; ------ Flying ------- ;

		AnimationState        			= STUNNED_STANDING_UP
			StateName					= GetUp
			Animation           		= GetUpSword
				AnimationName       	= RUElrond_SKL.RUElrond_GTPSX1
				AnimationMode       	= ONCE
			End
			BeginScript
				Prev = CurDrawablePrevAnimation()
				if Prev == "FallWithSword"
				then
					return "GetUpSword"
				end
			EndScript
		End

		AnimationState        			= STUNNED
			Animation           		= FallWithSword
				AnimationName       	= RUElrond_SKL.RUElrond_LNDB
				AnimationMode       	= ONCE
			End
			Flags = MAINTAIN_FRAME_ACROSS_STATES
			
			
			BeginScript
				CurDrawableHideSubObject("ArrowNock")
				CurDrawableHideSubObject("arrow")
				Prev = CurDrawablePrevAnimation()
			
				return "FallWithSword"
			EndScript
		End
		
		AnimationState        			= STUNNED_FLAILING
			Animation           		= DieWithSword
				AnimationName       	= RUElrond_SKL.RUElrond_FLYB
				AnimationMode       	= LOOP
				AnimationSpeedFactorRange	= 0.4 0.6
			End
			
			BeginScript
				CurDrawableHideSubObject("ArrowNock")
				CurDrawableHideSubObject("arrow")
			EndScript
		End
		
		
		; ------ Dying ------- ;

		AnimationState        			= DYING
			Animation           		= DieWithSword
				AnimationName       	= RUElrond_SKL.RUElrond_DIESv5
				AnimationMode       	= ONCE
			End
			;Animation           		= DieWithSword
			;	AnimationName       	= RUElrond_SKL.RUElrond_DIESV4
			;	AnimationMode       	= ONCE
			;End
			
			BeginScript
				CurDrawableHideSubObject("ArrowNock")
				CurDrawableHideSubObject("arrow")
			EndScript
		End
		
		AnimationState						= PARALYZED
			Animation
				AnimationName				= RUElrond_SKL.RUElrond_IDLF
				AnimationMode				= LOOP
			End
		End

		
		; ------------ Moving ------------- ;
		
		AnimationState        			= MOVING
			StateName					= Moving_Sword
			SimilarRestart				= Yes
			Animation           		= run_s
				AnimationName       	= RUElrond_SKL.RUElrond_RUNS
				AnimationMode       	= LOOP
				Distance				= 40
			End
			Animation					= finishrun_b
				AnimationName       	= RUElrond_SKL.RUElrond_RUNB
				AnimationMode       	= ONCE
				AnimationBlendTime		= 0
				Distance				= 40
			End
			Animation					= runtrans_bs
				AnimationName       	= RUElrond_SKL.RUElrond_RUNC
				AnimationMode       	= ONCE
				AnimationBlendTime		= 0
				Distance				= 70
			End
			Animation					= runtrans_sb_finish
				AnimationName       	= RUElrond_SKL.RUElrond_RUNT
				AnimationMode       	= ONCE
				AnimationBlendTime		= 0
				Distance				= 70
			End
			Animation					= runnoblend_s
				AnimationName       	= RUElrond_SKL.RUElrond_RUNS
				AnimationMode       	= LOOP
				AnimationBlendTime		= 0
				Distance				= 40
			End
			Flags = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
			
			BeginScript
				PrevAnim	= CurDrawablePrevAnimation()
				PrevState	= CurDrawablePrevAnimationState()
				
				if PrevState == "GetUp"  or PrevAnim == "DrawSwords"
				then
					if PrevAnim == "DrawSwords"
					then
						return "runtrans_bs"
					else
						return
					end
				elseif PrevAnim == "finishrun_b" or PrevAnim == "runtrans_sb_finish"
				then
					return "runtrans_bs"
				elseif PrevAnim == "runtrans_bs" or PrevAnim == "run_s" or PrevAnim == "runnoblend_s"
				then
					return "runnoblend_s"
				else
					return "run_s"
				end				
			EndScript
		End
		
		; ------ Attacking ------- ;
		
		AnimationState        			= FIRING_OR_PREATTACK_A
			StateName					= Ready_Sword
			
			Animation           		= AttackWithSwordA
				AnimationName       	= RUElrond_SKL.RUElrond_ATKSV2
				AnimationMode       	= ONCE
				UseWeaponTiming			= Yes
			End
			Animation           		= AttackWithSwordB
				AnimationName       	= RUElrond_SKL.RUElrond_ATKS
				AnimationMode       	= ONCE
				UseWeaponTiming			= Yes
			End
			Animation           		= AttackWithSwordD
				AnimationName       	= RUElrond_SKL.RUElrond_ATKSV4
				AnimationMode       	= ONCE
				UseWeaponTiming			= Yes
			End
			BeginScript
				CurDrawableHideSubObject("ArrowNock")
				CurDrawableHideSubObject("arrow")
			EndScript
		End

		AnimationState					= USER_1
			Animation
				AnimationName			= RUElrond_SKL.RUElrond_TNTSV1
				AnimationMode			= ONCE
			End
		End

		AnimationState				= LEVELED
			Animation				= LevelUp
				AnimationName		= RUElrond_SKL.RUElrond_CHRST2
				AnimationMode		= ONCE
				AnimationBlendTime	= 20
			End
		End
		
		; -------- Alert ------- ;
		
		AnimationState					= EMOTION_ALERT
			StateName					= Ready_Sword
			
			Animation					= Alert_1
				AnimationName			= RUElrond_SKL.RUElrond_IDLST1
				AnimationMode			= ONCE
				AnimationPriority		= 20
			End
			Animation					= Alert_1
				AnimationName			= RUElrond_SKL.RUElrond_IDLST1	; Secondary to solve the 'no play last anim' feature.
				AnimationMode			= ONCE
				AnimationPriority		= 20
			End
			Animation					= Alert_2
				AnimationName			= RUElrond_SKL.RUElrond_TNTSV1
				AnimationMode			= ONCE
				AnimationPriority		= 5
			End
			Flags						= RESTART_ANIM_WHEN_COMPLETE
			
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				PrevName = CurDrawablePrevAnimation()
				
				CurDrawableHideSubObject("ArrowNock")
				CurDrawableHideSubObject("arrow")

				if		Prev == "Bored_Sword"		then CurDrawableSetTransitionAnimState("TRANS_BR_Sword")
				elseif	Prev == "Selected_Sword"		then CurDrawableSetTransitionAnimState("TRANS_SR_Sword")
				end
			EndScript
		End
		
		; --------- Hit Reactions ---------- ;
		
		AnimationState = HIT_REACTION HIT_LEVEL_1
			StateName					= Bored_Sword
			Animation					= Hit_Level_1_a
				AnimationName			= RUElrond_SKL.RUElrond_HITSv1
				AnimationMode			= ONCE
				AnimationBlendTime		= 20
			End
		End

		
		AnimationState				= RAISING_FLAG
			Animation					= Alert_1
				AnimationName			= RUElrond_SKL.RUElrond_CHRST2
				AnimationMode			= LOOP
				AnimationBlendTime	= 10
			End
		End
	
		; ------ Emotions ------ ;
		AnimationState					= EMOTION_TAUNTING
			Animation
				AnimationName			= RUElrond_SKL.RUElrond_TNTSV1
				AnimationMode			= LOOP
				AnimationBlendTime	= 10
			End
		End

		AnimationState				=	EMOTION_CELEBRATING
			Animation
				AnimationName		=	RUElrond_SKL.RUElrond_CHRST2
				AnimationMode		=	LOOP
				AnimationBlendTime	= 10
			End
		End
		
		; ------ Selected ------ ;

		AnimationState				=	SELECTED
			StateName				=	Selected_Sword
			
			Animation				=	ATNA
				AnimationName		=	RUElrond_SKL.RUElrond_ATNS
				AnimationMode		=	LOOP
			End
			
			BeginScript
				CurDrawableHideSubObject("ARROW")
				CurDrawableHideSubObject("ARROWNOCK")
				
				Prev = CurDrawablePrevAnimationState()
				PrevName = CurDrawablePrevAnimation()
				if Prev == "Bored_Sword"		then CurDrawableSetTransitionAnimState("TRANS_BS_Sword")
				elseif Prev == "Ready_Sword"		then CurDrawableSetTransitionAnimState("TRANS_RS_Sword")
				end	
			EndScript
		End

		
		; ------- Bored -------- ;
		
		IdleAnimationState
			StateName					= Bored_Sword
			
			Animation           		= IDLCX1
				AnimationName       	= RUElrond_SKL.RUElrond_IDLF
				AnimationMode       	= ONCE
				AnimationPriority		= 20
			End
			Animation           		= IDLCX1
				AnimationName       	= RUElrond_SKL.RUElrond_IDLF	; Secondary to solve the 'no play last anim' feature.
				AnimationMode       	= ONCE
				AnimationPriority		= 20
			End
			Animation           		= IDLCt3
				AnimationName       	= RUElrond_SKL.RUElrond_IDLCT3
				AnimationMode       	= ONCE
				AnimationPriority		= 10
			End
			Animation           		= IDLCT1
				AnimationName       	= RUElrond_SKL.RUElrond_IDLCT1
				AnimationMode       	= ONCE
				AnimationPriority		= 5
			End
			
			Flags						= RESTART_ANIM_WHEN_COMPLETE

			BeginScript
				CurDrawableHideSubObject("ARROW")
				CurDrawableHideSubObject("ARROWNOCK")				

				Prev = CurDrawablePrevAnimationState()
				PrevName = CurDrawablePrevAnimation()
				if Prev == "Selected_Sword"		then CurDrawableSetTransitionAnimState("TRANS_SB_Sword")
				elseif Prev == "Ready_Sword"		then CurDrawableSetTransitionAnimState("TRANS_RB_Sword")
				end	
			EndScript
		End
		
		;----------------- Sword Transitions -------------------------;
		
		TransitionState       			= TRANS_BS_Sword
			Animation           		= TRANS_BS_Sword
				AnimationName     		= RUElrond_SKL.RUElrond_ATNA
				AnimationMode     		= ONCE
			End
			Animation           		= ATNAX1
				AnimationName     		= RUElrond_SKL.RUElrond_ATNX1
				AnimationMode     		= ONCE
			End
		End
		
		TransitionState       			= TRANS_SR_Sword
			Animation           		= TRANS_SR_Sword
				AnimationName     		= RUElrond_SKL.RUElrond_ATNC
				AnimationMode     		= ONCE
			End
		End
		
		TransitionState       			= TRANS_SB_Sword
			Animation           		= TRANS_SB_Sword
				AnimationName     		= RUElrond_SKL.RUElrond_ATNA
				AnimationMode     		= ONCE_BACKWARDS
			End
			Flags = START_FRAME_LAST
		End
		
		TransitionState       			= TRANS_RS_Sword
			Animation           		= TRANS_RS_Sword
				AnimationName     		= RUElrond_SKL.RUElrond_ATNC
				AnimationMode     		= ONCE_BACKWARDS
			End
			Flags = START_FRAME_LAST
		End
		
		TransitionState       			= TRANS_BR_Sword
			Animation           		= TRANS_BR_Sword
				AnimationName     		= RUElrond_SKL.RUElrond_ATNS
				AnimationMode     		= ONCE
				AnimationBlendTime		= 20
			End
		End
		
		TransitionState       			= TRANS_RB_Sword
			Animation           		= TRANS_RB_Sword
				AnimationName     		= RUElrond_SKL.RUElrond_IDLG
				AnimationMode     		= ONCE
				AnimationBlendTime		= 20
			End
		End
		
	End
	End

;<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;             Modules
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

;------------<<<<---Sword Of Rivendell--->>>>-------------

      AddModule
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_AragornBladeMasterEnabler
		SpecialPowerTemplate = SpecialAbilityAragornBladeMaster
		TriggeredBy = Upgrade_GandalfLightningSword
	End
      End
      AddModule
  	Behavior = SpecialPowerModule ModuleTag_AragornBladeMasterStarter
		SpecialPowerTemplate    = SpecialAbilityAragornBladeMaster
		StartsPaused			= Yes
            TriggerFX                  = FX_GandalfLightningCharge
	End
      End
      AddModule
	Behavior = HeroModeSpecialAbilityUpdate ModuleTag_AragornBladeMasterUpdate
		SpecialPowerTemplate    = SpecialAbilityAragornBladeMaster
		HeroAttributeModifier	= PowerOfRivendell
		HeroEffectDuration		= 40000 ; in milliseconds
		UnpackTime              = 1
	End
	End
	AddModule
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_pwEnabler
		SpecialPowerTemplate = SpecialAbilityElrondWave
		TriggeredBy = Upgrade_GandalfWordOfPower
	End
	End
	AddModule
	Behavior = SpecialPowerModule ModuleTag_pwStarter       
		SpecialPowerTemplate      = SpecialAbilityElrondWave
		UpdateModuleStartsAttack  = Yes
		StartsPaused		  	  = Yes
	End
	End
	AddModule
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_pwWeaponFireUpdate   
		SpecialPowerTemplate    = SpecialAbilityElrondWave
		WhichSpecialWeapon		= 1
		SkipContinue			= Yes

		UnpackTime              = 400
		PackTime                = 1	
		FreezeAfterTriggerDuration = 2500 ; Hold AI for this long after we fire.
		
		AwardXPForTriggering    = 0		
		StartAbilityRange		= 80.0
		
		SpecialWeapon			= ElrondWave
	End
	End
	AddModule
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_el
	SpecialPowerTemplate = SpecialAbilityCreateAHeroInvulnerability_Level3
	TriggeredBy			 = Upgrade_ElrondFarsight
	End
	End
	AddModule
	Behavior = SpecialPowerModule ModuleTag_el1
	SpecialPowerTemplate		 = SpecialAbilityCreateAHeroInvulnerability_Level3
	UpdateModuleStartsAttack	 = No
	StartsPaused				 = Yes
	AttributeModifier			 = NewElrond
	AttributeModifierRange		 = 1
	AttributeModifierAffectsSelf = Yes
	AttributeModifierAffects	 = ANY +CAVALRY	+INFANTRY
	AttributeModifierFX			 = FX_CreateAHeroInvulnerability_60
	End
	End
End

;<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;						          Haldir
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

;>>>
;FX
;<<<

FXParticleSystem HaldirInitialHit
  System
    Priority = ALWAYS_RENDER
    Shader = W3D_EMISSIVE
    Type = DRAWABLE
    ParticleName = exspirefireball.w3d
    Lifetime = 1500 1500
    SystemLifetime = 15
    StartSizeRate = 0.2 0.2
    BurstCount = 1 1
  End
  Color = DefaultColor
    Color1 = R:000 G:225 B:225 0
    Color2 = R:0 G:0 B:0 39
  End
  Alpha = DefaultAlpha
    Alpha1 = 0.3 0.3 0
  End
  Update = DefaultUpdate
    SizeRate = 0.5 0.5
    SizeRateDamping = 1 1
    AngleZ = -100 100
    AngularRateZ = -0.1 0.1
    AngularDamping = 0.97 0.97
    Rotation = ROTATE_Z
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = PointEmissionVolume
  End
  Draw = RenderObjectDraw
  End
End

FXParticleSystem HaldirFirstWave
  System
    Priority = ALWAYS_RENDER
    Shader = W3D_EMISSIVE
    Type = DRAWABLE
    ParticleName = EXLnzFlar2.tga    
    Lifetime = 1500 1500
    SystemLifetime = 15
    StartSizeRate = 0.2 0.2
    BurstCount = 1 1
  End
  Color = DefaultColor
    Color1 = R:000 G:225 B:225 0
    Color2 = R:0 G:0 B:0 39
  End
  Alpha = DefaultAlpha
    Alpha1 = 0.3 0.3 0
  End
  Update = DefaultUpdate
    SizeRate = 0.5 0.5
    SizeRateDamping = 1 1
    AngleZ = -100 100
    AngularRateZ = -0.1 0.1
    AngularDamping = 0.97 0.97
    Rotation = ROTATE_Z
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = PointEmissionVolume
  End
  Draw = RenderObjectDraw
  End
End

FXParticleSystem HaldirSecondWave
  System
    Priority = ALWAYS_RENDER
    Shader = W3D_EMISSIVE
    Type = DRAWABLE
    ParticleName = EXRing01.tga    
    Lifetime = 1500 1500
    SystemLifetime = 15
    StartSizeRate = 0.2 0.2
    BurstCount = 1 1
  End
  Color = DefaultColor
    Color1 = R:000 G:225 B:225 0
    Color2 = R:0 G:0 B:0 39
  End
  Alpha = DefaultAlpha
    Alpha1 = 0.3 0.3 0
  End
  Update = DefaultUpdate
    SizeRate = 0.5 0.5
    SizeRateDamping = 1 1
    AngleZ = -100 100
    AngularRateZ = -0.1 0.1
    AngularDamping = 0.97 0.97
    Rotation = ROTATE_Z
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = PointEmissionVolume
  End
  Draw = RenderObjectDraw
  End
End

FXList FX_HaldirBM
  ParticleSystem
    Name = HaldirInitialHit
    Offset = X:0.0 Y:0.0 Z:5.0
  End
  ParticleSystem
    Name = HaldirSecondWave
    Offset = X:0.0 Y:0.0 Z:5.0
  End
  ParticleSystem
    Name = HaldirFirstWave
    Offset = X:0.0 Y:0.0 Z:5.0
  End
  Sound
    Name = GandalfBlastWeapon
  End
End

FXParticleSystem HaldirLoudwater
  System
    Priority = ALWAYS_RENDER
    Shader = W3D_EMISSIVE
    Type = DRAWABLE
    ParticleName = EXLightShafts01.W3D
    Lifetime = 100 100
    SystemLifetime = 7
    SortLevel = 1
    Size = 0.5 1.2
    BurstDelay = 2 2
    BurstCount = 1 1
  End
  Color = DefaultColor
    Color1 = R:000 G:225 B:225 0
  End
  Alpha = DefaultAlpha
    Alpha1 = 0.08 0.08 0
    Alpha2 = 0 0 100
  End
  Update = RenderObjectUpdate
    StartSizeX = 0.1 0.1
    StartSizeY = 1 1
    StartSizeZ = 0.1 0.1
    SizeRateX = 0.05 0.05
    SizeRateZ = 0.05 0.05
    SizeDampingX = 0.95 0.95
    SizeDampingY = 1 1
    SizeDampingZ = 0.95 0.95
    AngleZ = 1.45 1.45
    AngularRateZ = -0.003 0.003
    AngularDamping = 0.99 0.99
    Rotation = ROTATE_Z
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = PointEmissionVolume
  End
  Draw = RenderObjectDraw
  End
End

FXList FX_HaldirBeamWeapon
  Sound
    Name = GandalfBeamWeapon
  End
  ParticleSystem 
    Name = HaldirLoudwater
    Offset = X:0.0 Y:0.0 Z:20.0
    OrientToObject = Yes
    SetTargetMatrix = Yes
  End
End

;--Haldir Blade Master--

ModifierList HaldirBladeMaster
	Category = WEAPON
	Modifier = DAMAGE_MULT 200%
	Modifier = ARMOR 150%
	Modifier = SPEED 200%
	Duration = 400
	FX		 = FX_HaldirBM
End

FXParticleSystem Wave1
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXRing01.tga
    Lifetime = 120 120
    SystemLifetime = 3
    Size = 8 8
    BurstCount = 1 1
    IsGroundAligned = Yes
  End
  Color = DefaultColor
    Color1 = R:000 G:245 B:255 0
    Color2 = R:5 G:0 B:0 40
    ColorScale = -5 0
  End
  Update = DefaultUpdate
    SizeRate = 15 15
    SizeRateDamping = 1 1
    AngleZ = -1 1
    AngularDamping = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.8 0.8
  End
  EmissionVelocity = OutwardEmissionVelocity
  End
  EmissionVolume = PointEmissionVolume
    IsHollow = Yes
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem Wave2
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXFire01.tga
    Lifetime = 140 140
    SystemLifetime = 5
    Size = 1 2
    BurstCount = 1 1
    IsGroundAligned = Yes
  End
  Color = DefaultColor
    Color1 = R:000 G:000 B:255 0
    Color2 = R:5 G:0 B:0 40
    ColorScale = -5 0
  End
  Update = DefaultUpdate
    SizeRate = 12 12
    SizeRateDamping = 1 1
    AngleZ = -1 1
    AngularDamping = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.8 0.8
  End
  EmissionVelocity = OutwardEmissionVelocity
  End
  EmissionVolume = PointEmissionVolume
    IsHollow = Yes
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem Wave3
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXLnzFlar2.tga
    Lifetime = 60 60
    SystemLifetime = 1
    Size = 100 100
    BurstCount = 1 1
  End
  Color = DefaultColor
    Color1 = R:000 G:255 B:255 0
    Color2 = R:0 G:0 B:0 5
  End
  Update = DefaultUpdate
    SizeRate = 1 3
    SizeRateDamping = 1 1
    AngularDamping = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = PointEmissionVolume
    IsHollow = Yes
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem Wave4
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXFireEmbr.tga
    Lifetime = 50 50
    SystemLifetime = 3
    Size = 1 1
    BurstCount = 1 1
    IsGroundAligned = Yes
  End
  Color = DefaultColor
    Color1 = R:000 G:000 B:255 0
    Color2 = R:5 G:0 B:0 40
    ColorScale = -5 0
  End
  Update = DefaultUpdate
    SizeRate = 2 2
    SizeRateDamping = 1 1
    AngleZ = -1 1
    AngularDamping = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.8 0.8
  End
  EmissionVelocity = OutwardEmissionVelocity
  End
  EmissionVolume = PointEmissionVolume
    IsHollow = Yes
  End
  Draw = DefaultDraw
  End
End

FXList FX_HaldirWord
  ParticleSystem
    Name = Wave1
    Offset = X:0.0 Y:0.0 Z:5.0
  End
   ParticleSystem
    Name = Wave2
    Offset = X:0.0 Y:0.0 Z:5.0
  End
   ParticleSystem
    Name = Wave3
    Offset = X:0.0 Y:0.0 Z:5.0
  End
   ParticleSystem
    Name = Wave4
    Offset = X:0.0 Y:0.0 Z:5.0
  End
  Sound
    Name = GandalfBlastWeapon
  End
End

;<<<<<<<
;Weapons
;>>>>>>>

Weapon HaldirSword2  ; BALANCE Haldir Sword Weapon
  LeechRangeWeapon      = Yes
  AttackRange           = 30
  MeleeWeapon           = Yes
  DelayBetweenShots     = ELROND_DELAYBETWEENSHOTS 			
             ; time between shots, msec
  PreAttackDelay        = 300				; 400 is sword swing delay time before contact with target.
  PreAttackType         = PER_SHOT ; Do the delay each time we attack a new target
  FireFX                = FX_GondorSwordHit ; Change this
  FiringDuration        = 300				; Duration of the sword swing

  DamageNugget                        ; A basic Nugget that just does damage
    Damage        = 250					
    Radius        = 40.0
    DelayTime     = 0
    DamageType    = MAGIC
    DamageFXType  = MAGIC
    DeathType     = NORMAL
    DamageSpeed		= 350.0 ; must match the ShockWaveSpeed below
  End
   MetaImpactNugget
    HeroResist			= .00
    ShockWaveAmount   = 30.0		
    ShockWaveRadius   = 30.0
    ShockWaveTaperOff = 0.1
    ShockWaveArc      = 200
    ShockWaveSpeed	  = 350.0
  End
End

Weapon HaldirHeroSword
  LeechRangeWeapon      = Yes
  AttackRange           = 30.0
  MeleeWeapon           = Yes
  DelayBetweenShots     = 100
  PreAttackDelay        = 533
  PreAttackType         = PER_SHOT
  FireFX                = FX_HaldirBM
  FiringDuration        = 400
  RadiusDamageAffects = ENEMIES NOT_SIMILAR
  ClearNuggets
  DamageNugget
    Damage        = 200
    Radius        = 66.0
    DelayTime     = 0
    DamageType    = MAGIC
    DamageFXType  = MAGIC
    DeathType     = EXPLODED
    DamageArc     = 600
    DamageSpeed		= 350.0 ; must match the ShockWaveSpeed below
  End
  MetaImpactNugget
    HeroResist			= .00
    ShockWaveAmount   = 60.0		
    ShockWaveRadius   = 66.0
    ShockWaveTaperOff = 0.4
    ShockWaveArc      = 600
    ShockWaveSpeed	  = 350.0
  End
End


Weapon HaldirBow
	AttackRange			= 700
	
	RangeBonusMinHeight	= 10
	RangeBonus		= 1
	RangeBonusPerFoot	= #MULTIPLY( HALDIR_BOW_RANGE .01 )
	
					
	WeaponSpeed			= 100         ; dist/sec 
	MinWeaponSpeed		= 1000
	MaxWeaponSpeed		= 1000     ; dist/sec Upper limit on scaling, when attacking past nominal "max" range
	FireFX				= FX_RohanArcherBowWeapon
	ScaleWeaponSpeed	= Yes ; Used for lob weapons, scales speed proportional to range
	HitPercentage		= 100     ;When this weapon is used it will hit exactly 100% of the time.
	ScatterRadius		= 5.0     ;When this weapon misses it can randomly miss by as much as this distance.

	AcceptableAimDelta	= 20	; prevent twitchy reaiming in horde on horde
	DelayBetweenShots	= 100
	PreAttackDelay      = HALDIR_PREATTACKDELAY 	; 1467 is the prep time for archer.
	PreAttackType       = PER_POSITION ; Do the delay each time we attack a new target
	FiringDuration      = HALDIR_FIRINGDURATION 	; Duration of the archer firing shot is 500ms.

    ClipSize			= 1
    AutoReloadsClip		= Yes
    AutoReloadWhenIdle	= 1	
    ClipReloadTime		= Min:HALDIR_RELOADTIME_MIN Max:HALDIR_RELOADTIME_MAX
    ContinuousFireOne	= 0
    ContinuousFireCoast	= HALDIR_RELOADTIME_MAX
    InstantLoadClipOnActivate = Yes

    AntiAirborneVehicle	= Yes
    AntiAirborneMonster	= Yes
    
	ProjectileNugget                    ; Default Arrow
		ProjectileTemplateName  = GoodFactionArrow
		WarheadTemplateName     = HaldirBowWarhead
	End
End

Weapon HaldirBowWarhead
  ProjectileCollidesWith = ALLIES ENEMIES NEUTRAL STRUCTURES WALLS 
  RadiusDamageAffects = ENEMIES NEUTRALS NOT_SIMILAR
  HitStoredTarget = Yes	; Always hits initial target.
  DamageNugget                        ; A basic Nugget that just does damage
    Damage        = 100
    ;DamageScalar  = 25000% NONE +MordorMumakil
    Radius        = 0.0	; HitStoredTarget means we hurt the person we launched at.  And nobody else.  So a miss hurts nobody.
    DelayTime     = 0
    DamageType    = HERO_RANGED
    DamageFXType  = GOOD_ARROW_PIERCE
    DeathType     = NORMAL
  End
End

;<<<<<<<<<<<<<<<
;Ability Weapons
;>>>>>>>>>>>>>>>

Weapon HaldirFlood
	FireFX					= FX_ArwenFlood
	AttackRange				= 150

	WeaponOCLNugget
		WeaponOCLName		= OCL_ArwenPersonalFlood
	End

	FireLogicNugget
		LogicType		= DECREASE_BURN_RATE
		Radius			= ARWEN_FLOOD_DECREASEBURNRATE_RADIUS
		Damage			= ARWEN_FLOOD_DECREASEBURNRATE_AMOUNT
		DelayTime		= 200  
	End
End

Weapon HaldirGoldenArrow
	AttackRange					= 300.0				
	LeechRangeWeapon			= Yes
	WeaponSpeed					= 321
	MinWeaponSpeed				= 241
	MaxWeaponSpeed				= 481
	FireFX						= FX_GandalfLightningCharge
	ScaleWeaponSpeed			= Yes
	HitPercentage				= 100
	ScatterRadius				= 5.0

	DelayBetweenShots			= HALDIR_DELAYBETWEENSHOTS
	PreAttackDelay				= HALDIR_PREATTACKDELAY
	PreAttackType				= PER_SHOT
	FiringDuration				= HALDIR_FIRINGDURATION

	ProjectileNugget
		ProjectileTemplateName	= HaldirGoldenArrowProjectile
		WarheadTemplateName		= HaldirGoldenArrowWarhead
	End
End

Weapon HaldirGoldenArrowWarhead
	ProjectileCollidesWith	= ENEMIES NEUTRAL
	RadiusDamageAffects		= ENEMIES NEUTRALS NOT_SIMILAR
	HitStoredTarget			= Yes
	DamageNugget
		Damage				= 2100
		Radius				= 0.0
		DelayTime			= 0
		DamageType			= HERO_RANGED
		DamageFXType		= GOOD_ARROW_PIERCE
		DeathType			= NORMAL
	End
End

Weapon HaldirStaffWeapon  ; BALANCE GandalfStaffWeapon
	AttackRange			= GANDALF_PHASER_RANGE				;600
	LeechRangeWeapon	= Yes
	WeaponSpeed			= 801      ; dist/sec 
	HitPercentage		= 100		; When this weapon is used it will hit exactly 100% of the time.
	DelayBetweenShots	= 4500		; time between shots, msec
	FireFX              = FX_HaldirBeamWeapon
	FiringDuration      = 1
	AntiAirborneVehicle	= Yes
	AntiAirborneMonster	= Yes
	AcceptableAimDelta	= 15

	RadiusDamageAffects = ENEMIES NOT_SIMILAR

	DamageNugget                        ; A basic Nugget that just does damage
		Damage        = GANDALF_PHASER_DAMAGE	
		DamageScalar  = 200% NONE +MordorWitchKingOnFellBeast +GondorGwaihir +Drogoth
		DamageScalar  = 180% NONE +MordorFellBeast
		Radius        = 17.6
		DelayTime     = 200           ;The target is dying before the laser appears in the new laser tweak, so try to kill when the laser turns on
		DamageType    = MAGIC
		DamageFXType  = FLAME
		DeathType     = NORMAL
	End
	MetaImpactNugget                    ; A Nugget that throws things back with force
;		HeroResist          =   0.75
		ShockWaveAmount		= 50.0
		ShockWaveRadius		= 17.6
		ShockWaveTaperOff	= 0.5
		DelayTime			= 200		;The target is dying before the laser appears in the new laser tweak, so try to kill when the laser turns on
	End
End

Weapon HaldirWordOfPower ; Big Blue Ring Blast
	IdleAfterFiringDelay = 0
	AttackRange = GANDALF_WORD_OF_POWER_RANGE
	MinimumAttackRange = 0.8
	WeaponSpeed = 401         ; dist/sec 
	MinWeaponSpeed = 241
	MaxWeaponSpeed = 601      ; dist/sec Upper limit on scaling, when attacking past nominal "max" range
	ScaleWeaponSpeed = Yes ; Used for lob weapons, scales speed proportional to range
	RadiusDamageAffects = ENEMIES NOT_SIMILAR
	DelayBetweenShots = 5000               ; time between shots, msec
	PreAttackDelay        = 2600
	PreAttackType         = PER_ATTACK ; Do the delay each time we attack a new target
	FireFX                = FX_HaldirWord
	FiringDuration      = 1400
	DamageNugget                        ; A basic Nugget that just does damage
		Damage			= GANDALF_WORD_OF_POWER_DAMAGE
		Radius			= 250.0
		DamageType		= MAGIC
		DamageFXType	= MAGIC
		DeathType		= EXPLODED
		DamageSpeed		= 700.0 ; must match the ShockWaveSpeed below
	End
	MetaImpactNugget                    ; A Nugget that throws things back with force
;		HeroResist			= .75
		ShockWaveAmount   = 75.0
		ShockWaveRadius   = 500.0
		ShockWaveTaperOff = 1.0
		ShockWaveZMult    = 1.000
		ShockWaveSpeed	  = 700.0 
	End
End

;<<<<<<<
;Exp
;>>>>>>>

ExperienceLevel	HaldirLevel1
	TargetNames						=	ElvenHaldir
	RequiredExperience				=	1	
	ExperienceAward					=	HALDIR_LVL1_EXP_AWARD
	Rank							=	1
	SelectionDecal
		Texture						=	decal_hero_good	
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40 ;16
		MaxRadius					=	200 ;16
		MaxSelectedUnits			=	40 ;1
	End	
End	

ExperienceLevel	HaldirLevel2
	TargetNames						=	ElvenHaldir
	RequiredExperience				=	HALDIR_LVL2_EXP_NEEDED 
	ExperienceAward					=	HALDIR_LVL2_EXP_AWARD
	AttributeModifiers				=	HeroLevelUpDamage1
	Rank							=	2
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40 ;16
		MaxRadius					=	200 ;16
		MaxSelectedUnits			=	40 ;1
	End
END	

ExperienceLevel	HaldirLevel3
	TargetNames						=	ElvenHaldir
	RequiredExperience				=	HALDIR_LVL3_EXP_NEEDED 
	ExperienceAward					=	HALDIR_LVL3_EXP_AWARD	
	AttributeModifiers				=	HeroLevelUpDamage2
	Rank							=	3
	Upgrades						=	Upgrade_LegolasKnifeFighter
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	SelectionDecal
		Texture						=	decal_hero_good	
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40 ;16
		MaxRadius					=	200 ;16
		MaxSelectedUnits			=	40 ;1
	End
END	

ExperienceLevel	HaldirLevel4
	TargetNames						=	ElvenHaldir
	RequiredExperience				=	HALDIR_LVL4_EXP_NEEDED 
	ExperienceAward					=	HALDIR_LVL4_EXP_AWARD	
	AttributeModifiers				=	HeroLevelUpDamage3
	Rank							=	4
	LevelUpFx						=	FX:GandalfLevelUp1FX
	Upgrades						=	Upgrade_HaldirGoldenArrow	
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	SelectionDecal
		Texture						=	decal_hero_good	
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40 ;16
		MaxRadius					=	200 ;16
		MaxSelectedUnits			=	40 ;1
	End
END	

ExperienceLevel	HaldirLevel5
	TargetNames						=	ElvenHaldir
	RequiredExperience				=	HALDIR_LVL5_EXP_NEEDED 
	ExperienceAward					=	HALDIR_LVL5_EXP_AWARD	
	AttributeModifiers				=	HeroLevelUpDamage4
	Rank							=	5
	Upgrades						=	Upgrade_GandalfIstariLight
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40 ;16
		MaxRadius					=	200 ;16
		MaxSelectedUnits			=	40 ;1
	End
END	

ExperienceLevel	HaldirLevel6
	TargetNames						=	ElvenHaldir
	RequiredExperience				=	HALDIR_LVL6_EXP_NEEDED 
	ExperienceAward					=	HALDIR_LVL6_EXP_AWARD	
	AttributeModifiers				=	HeroLevelUpDamage5
	Rank							=	6
	LevelUpFx						=	FX:GandalfLevelUp1FX
	Upgrades						=	Upgrade_HaldirLeadership
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	SelectionDecal
		Texture						=	decal_hero_good	
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40 ;16
		MaxRadius					=	200 ;16
		MaxSelectedUnits			=	40 ;1
	End	
END	

ExperienceLevel	HaldirLevel7
	TargetNames						=	ElvenHaldir
	RequiredExperience				=	HALDIR_LVL7_EXP_NEEDED 
	ExperienceAward					=	HALDIR_LVL7_EXP_AWARD	
	AttributeModifiers				=	HeroLevelUpDamage6
	Rank							=	7
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40 ;16
		MaxRadius					=	200 ;16
		MaxSelectedUnits			=	40 ;1
	End	
END	

ExperienceLevel	HaldirLevel8
	TargetNames						=	ElvenHaldir
	RequiredExperience				=	HALDIR_LVL8_EXP_NEEDED 
	ExperienceAward					=	HALDIR_LVL8_EXP_AWARD	
	AttributeModifiers				=	HeroLevelUpDamage7
	Rank							=	8
	Upgrades						=	Upgrade_ArwenFloodTrigger
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40 ;16
		MaxRadius					=	200 ;16
		MaxSelectedUnits			=	40 ;1
	End	
END	

ExperienceLevel	HaldirLevel9
	TargetNames						=	ElvenHaldir
	RequiredExperience				=	HALDIR_LVL9_EXP_NEEDED 
	ExperienceAward					=	HALDIR_LVL9_EXP_AWARD	
	AttributeModifiers				=	HeroLevelUpDamage8
	Rank							=	9
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40 ;16
		MaxRadius					=	200 ;16
		MaxSelectedUnits			=	40 ;1
	End	
END	

ExperienceLevel	HaldirLevel10
	TargetNames						=	ElvenHaldir
	RequiredExperience				=	HALDIR_LVL10_EXP_NEEDED 
	ExperienceAward					=	HALDIR_LVL10_EXP_AWARD	
  	AttributeModifiers				=	HeroLevelUpDamage9
	Rank							=	10
	Upgrades						=	Upgrade_GandalfWordOfPower
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40 ;16
		MaxRadius					=	200 ;16
		MaxSelectedUnits			=	40 ;1
	End	
END

;>>>>>>>>>>>>
;Ability Time
;>>>>>>>>>>>>

SpecialPower SpecialAbilityHaldirWave
	Enum						   = SPECIAL_WORD_OF_POWER
	ReloadTime					   = 360000
End	

SpecialPower SpecialAbilityPersonalFlood
  Enum					= SPECIAL_PERSONAL_FLOOD
  ReloadTime			= 200000 ; in milliseconds
  RadiusCursorRadius	= 100
	;InitiateAtLocationSound	= AragornAthelesEffect
End

SpecialPower SpecialAbilityHaldirLight
	Enum						   = SPECIAL_WOUND_ARROW
	ReloadTime					   = 120000	; in milliseconds
	RadiusCursorRadius			   = 120.0
	ObjectFilter				   = ALL -BASE_FOUNDATION -INERT -IGNORED_IN_GUI -WALK_ON_TOP_OF_WALL -BLOCKING_GATE -WALL_UPGRADE -UNATTACKABLE -MOVE_ONLY
End

SpecialPower SpecialAbilityHaldirVengeance
  Enum                = SPECIAL_WOUND_ARROW
  ReloadTime          = 60000 ; in milliseconds
;  RadiusCursorRadius  = 150.0
  InitiateAtLocationSound = GenericSpell
  ;PalantirMovie = PalantirAlert_RohanReinforcements
  ObjectFilter = ALL -BASE_FOUNDATION -INERT -IGNORED_IN_GUI -WALK_ON_TOP_OF_WALL -BLOCKING_GATE -WALL_UPGRADE -UNATTACKABLE -MOVE_ONLY
End

;<<<<<<<<<<<<<<<<<<<<<<
;Haldir Commandbuttons
;>>>>>>>>>>>>>>>>>>>>>>

CommandButton Command_LegolasKnifeFightingMode
  Command                 = SPECIAL_POWER 
  SpecialPower            = SpecialAbilityAragornBladeMaster
  TextLabel               = CONTROLBAR:WaterWave
  ButtonImage             = HSLegolasKnifeFighter
  CursorName              = Bombard
  RadiusCursorType        = AthelasRadiusCursor
  InvalidCursorName       = GenericInvalid
  ButtonBorderType        = ACTION 
  DescriptLabel           = CONTROLBAR:ToolTipWaterWave
  InPalantir			  = Yes
  AutoAbility			  = Yes
  PresetRange			  = 100.0
  NeedDamagedTarget		  = Yes
 ; UnitSpecificSound       = ElvenWarriorVoiceAttack
End

CommandButton Command_SpecialAbilityWordOfPower
	Command				= SPECIAL_POWER 
	SpecialPower		= SpecialAbilityHaldirWave
	TextLabel			= CONTROLBAR:HaldirWord
	ButtonImage			= HSGandolf_radcircle
	ButtonBorderType	= ACTION 
	DescriptLabel		= CONTROLBAR:ToolTipHaldirWord
	UnitSpecificSound	= GimliModeSlayerMS
	InPalantir			= Yes
	AutoAbility			= Yes
End

CommandButton Command_ArwenFlood
  Command                 = SPECIAL_POWER
  SpecialPower            = SpecialAbilityPersonalFlood
  Options                 = NEED_TARGET_POS CONTEXTMODE_COMMAND
  TextLabel               = CONTROLBAR:NewFlood
  ButtonImage             = SBGood_Flood
  ButtonBorderType        = ACTION 
  RadiusCursorType        = FloodRadiusCursor
  DescriptLabel           = CONTROLBAR:ToolTipNewFlood
  InPalantir              = Yes
End

CommandButton Command_GondorGandalfIstariLight
	Command                 = SPECIAL_POWER
	SpecialPower            = SpecialAbilityHaldirLight
	Options                 = NEED_TARGET_ENEMY_OBJECT ; CONTEXTMODE_COMMAND
	TextLabel               = CONTROLBAR:Loudwater
	ButtonImage             = HSGandalfIstariLight
	CursorName              = Bombard
	InvalidCursorName       = GenericInvalid
	ButtonBorderType        = ACTION
	DescriptLabel           = CONTROLBAR:ToolTipLoudwater
	AutoAbility			  = Yes
	InPalantir			  = Yes
End

CommandButton Command_SpecialAbilityThornofVengeance
	Command                 = SPECIAL_POWER
	WeaponSlot              = SECONDARY
	SpecialPower            = SpecialAbilityHaldirVengeance
	Options                 = NEED_TARGET_ENEMY_OBJECT
	TextLabel               = CONTROLBAR:HV
	ButtonImage             = HSThranduilThornofVengeance
	CursorName              = Bombard
	InvalidCursorName       = GenericInvalid
	ButtonBorderType        = ACTION
	DescriptLabel           = CONTROLBAR:ToolTipHV
	DisableOnModelCondition = WEAPONSET_HERO_MODE		
	InPalantir			  = Yes
	AutoAbility			  = Yes
	;UnitSpecificSound      = FaramirRangerVoiceWoundingArrow
End

;>>>>>>>>>>>>>>>>>
;Haldir CommandSet
;<<<<<<<<<<<<<<<<<

CommandSet NewHaldirCommandSet
	1	= Command_ToggleHaldirWeapon
	2	= Command_LegolasKnifeFightingMode
	3 	= Command_GondorGandalfIstariLight
	4	= Command_SpecialAbilityThornofVengeance
	5	= Command_ArwenFlood
	6	= Command_SpecialAbilityWordOfPower
	12 	= Command_CaptureBuilding
	13 	= Command_AttackMove
	14 	= Command_Stop
End

Object ElvenHaldir
CommandSet = NewHaldirCommandSet
End

Object ElvenHaldir
	ShockwaveResistance = SHOCKWAVE_RESISTANCE_ALWAYS

	ArmorSet
		Conditions      = NONE
		Armor           = HaldirArmor
		DamageFX        = NormalDamageFX
	End

	DisplayMeleeDamage = 110


	ReplaceModule ModuleTag_LegolasHealing
	Behavior = AutoHealBehavior ModuleTag_HaldirHealing1
		StartsActive = Yes
		HealingAmount = 130
		HealingDelay = 500
		StartHealingDelay = 8000
		HealOnlyIfNotInCombat = Yes
	End
	End

	WeaponSet
		Conditions				= WEAPONSET_TOGGLE_1 CONTAINED
		Weapon					= PRIMARY    HaldirBow
		AutoChooseSources		= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
	WeaponSet
		Conditions				= CONTAINED
		Weapon					= PRIMARY    HaldirBow
		AutoChooseSources		= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
	WeaponSet
		Conditions				= WEAPONSET_TOGGLE_1
		Weapon					= PRIMARY    HaldirBow
		AutoChooseSources		= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End

	WeaponSet
		Conditions				= None
		Weapon					= PRIMARY HaldirSword2
		AutoChooseSources		= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
	WeaponSet
		Conditions		= WEAPONSET_HERO_MODE
		Weapon			= PRIMARY    HaldirHeroSword
	End

;<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;             Modules
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

      AddModule
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_AragornBladeMasterEnabler
		SpecialPowerTemplate = SpecialAbilityAragornBladeMaster
		TriggeredBy = Upgrade_LegolasKnifeFighter
	End
      End
      AddModule
  	Behavior = SpecialPowerModule ModuleTag_AragornBladeMasterStarter
		SpecialPowerTemplate    = SpecialAbilityAragornBladeMaster
		StartsPaused			= Yes
            TriggerFX                  = FX_HaldirBM
	End
      End
      AddModule
	Behavior = HeroModeSpecialAbilityUpdate ModuleTag_AragornBladeMasterUpdate
		SpecialPowerTemplate    = SpecialAbilityAragornBladeMaster
		HeroAttributeModifier	= HaldirBladeMaster
		HeroEffectDuration		= 40000 ; in milliseconds
		UnpackTime              = 1
	End
	End
	AddModule
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_hwEnabler
		SpecialPowerTemplate = SpecialAbilityHaldirWave
		TriggeredBy = Upgrade_GandalfWordOfPower
	End
	End
	AddModule
	Behavior = SpecialPowerModule ModuleTag_hwStarter       
		SpecialPowerTemplate      = SpecialAbilityHaldirWave
		UpdateModuleStartsAttack  = Yes
		StartsPaused		  	  = Yes
	End
	End
	AddModule
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_hwWeaponFireUpdate   
		SpecialPowerTemplate    = SpecialAbilityHaldirWave
		WhichSpecialWeapon		= 1
		SkipContinue			= Yes

		UnpackTime              = 300
		PackTime                = 1	
		FreezeAfterTriggerDuration = 2500 ; Hold AI for this long after we fire.
		
		AwardXPForTriggering    = 0		
		StartAbilityRange		= 80.0
		
		SpecialWeapon			= HaldirWordOfPower
	End
	End
	AddModule
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_hfEnabler
		SpecialPowerTemplate = SpecialAbilityPersonalFlood
		TriggeredBy = Upgrade_ArwenFloodTrigger
	End
	End
	AddModule
	Behavior = SpecialPowerModule ModuleTag_hfStarter                      
		SpecialPowerTemplate		= SpecialAbilityPersonalFlood
		UpdateModuleStartsAttack	= Yes
		StartsPaused				= Yes
		InitiateSound				= HaldirVoiceAttack
	End
	End
	AddModule
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_hfUpdate   
		SpecialPowerTemplate    = SpecialAbilityPersonalFlood

		UnpackTime              = 300
		PackTime                = 1500

		StartAbilityRange = 300.0
		
		SpecialWeapon = ArwenPersonalFlood
		WhichSpecialWeapon = 1
	End
	End
	AddModule
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_HaldirLightEnabler
		SpecialPowerTemplate = SpecialAbilityHaldirLight
		TriggeredBy = Upgrade_GandalfIstariLight
	End
	End
	AddModule
	Behavior = SpecialPowerModule ModuleTag_HaldirLightPower                      
		SpecialPowerTemplate		= SpecialAbilityHaldirLight
		UpdateModuleStartsAttack	= Yes
		StartsPaused			= Yes
		InitiateSound			= GandalfVoiceAttackIstariLight	;this plays when he targets, not when he fires
	End
	End
	AddModule
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_HaldirLightUpdate
		SpecialPowerTemplate    = SpecialAbilityHaldirLight
		SkipContinue			= Yes
		UnpackTime              = 200 
 		PreparationTime         = 1  
 		PersistentPrepTime      = 2000
 		PackTime                = 500
		AwardXPForTriggering    = 0
		StartAbilityRange		= GANDALF_PHASER_CAST_RANGE ; Note: This has to be smaller than the weapon range or it'll never succeed
		ApproachRequiresLOS		= Yes		
		SpecialWeapon			= HaldirStaffWeapon
		MustFinishAbility		= Yes
		WhichSpecialWeapon		= 3
		BusyForDuration			= 2500
	End
	End
	AddModule
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_ThornArrow1Enabler
		SpecialPowerTemplate		= SpecialAbilityHaldirVengeance
		TriggeredBy					= Upgrade_HaldirLeadership
	End
	End
	AddModule
	Behavior = SpecialPowerModule ModuleTag_ThornArrow1
		SpecialPowerTemplate		= SpecialAbilityHaldirVengeance
		UpdateModuleStartsAttack	= Yes
		StartsPaused				= Yes
	End
	End
	AddModule
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_ThornArrow1Update
		SpecialPowerTemplate		= SpecialAbilityHaldirVengeance
		SkipContinue				= Yes
		UnpackTime					= 300
		PreparationTime				= 2
		PackTime					= 850
		AwardXPForTriggering		= 0
		StartAbilityRange			= 500.0									; Note: This has to be smaller than the weapon range or it'll never succeed
		ApproachRequiresLOS			= Yes		
		SpecialWeapon				= ThranduilThornofVengeance
		WhichSpecialWeapon			= 1
	End
	End
	AddModule
	Behavior = AutoAbilityBehavior ModuleTag_ThornArrow1AutoAbility
		SpecialAbility				= SpecialAbilityHaldirVengeance
		MaxScanRange				= 300
		Query						= 1 ANY ENEMIES +HERO +MONSTER
		Query						= 1 ALL ENEMIES
	End
	End
End

;<<<<<<<<<<<<
; Animations
;>>>>>>>>>>>>

Object ElvenHaldir ;

	ReplaceModule ModuleTag_DRAW
	Draw = W3DScriptedModelDraw ModuleTag_DRAW1
		
		StaticModelLODMode					= yes
		OkToChangeModelColor = Yes
		
		; Sword version
		DefaultModelConditionState					
			Model							= EUHaldir_SKN
			Skeleton						= EUHaldir_SKL
			WeaponLaunchBone				= PRIMARY ARROW
			ParticleSysBone = B_SWORDBONE WaterHaze FollowBone:Yes
			ParticleSysBone = B_SWORDBONE WaterSword FollowBone:Yes
		End

		; Bow version
		ModelConditionState					= WEAPONSET_TOGGLE_1
			Model							= EUHaldir_SKN
			Skeleton						= EUHaldir_SKL
		End

		ModelConditionState = WEAPONSET_HERO_MODE
			ParticleSysBone = B_SWORDBONE Water FollowBone:Yes
			ParticleSysBone = B_SWORDBONE WaterSword2 FollowBone:Yes
		End


;--- Arrow Wind Special attack

;		AnimationState        = UNPACKING PACKING_TYPE_1
;			Animation           = ATKA1
;				AnimationName     = RULegolas_ATKA1	;ATKH1
;				AnimationMode     = ONCE
;			End
;			StateName           = STATE_Bow
;			BeginScript
;				Prev = CurDrawablePrevAnimationState()
;				if Prev == "STATE_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwitchToBow") end
;				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
;			EndScript
;		End
	
	
		AnimationState        = PREPARING PACKING_TYPE_1
			Animation           = Bow ;ATKA2
				AnimationName     = EUHaldir_ATA2 ;RULegolas_ATKA2
				AnimationMode     = LOOP
				AnimationSpeedFactorRange = 1.328 1.328
			End
			StateName           = STATE_Bow
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwitchToBow") end
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End
		
		AnimationState        = PACKING PACKING_TYPE_1
			Animation           = Bow ;ATKA3
				AnimationName     = EUHaldir_ATA2 ;RULegolas_ATKA3 
				AnimationMode     = LOOP
			End
			StateName           = STATE_Bow
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwitchToBow") end
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End

;^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

		AnimationState						= PASSENGER WEAPONSET_TOGGLE_1
			StateName						= STATE_Grabbed
			Animation						= Bow
				AnimationName				= EUHaldir_FLYA
				AnimationMode				= LOOP
			End
		End
		AnimationState						= PASSENGER
			StateName						= STATE_Grabbed
			Animation						= Sword
				AnimationName				= EUHaldir_FLYB
				AnimationMode				= LOOP
			End
		End


		AnimationState						= FREEFALL WEAPONSET_TOGGLE_1
			StateName						= STATE_Falling
			Animation						= Bow
				AnimationName				= EUHaldir_FLYA
				AnimationMode				= LOOP
				AnimationBlendTime			= 10
				AnimationSpeedFactorRange	= 0.5	0.5
			End
		End
		AnimationState						= FREEFALL
			StateName						= STATE_Falling
			Animation						= Sword
				AnimationName				= EUHaldir_FLYB
				AnimationMode				= LOOP
				AnimationBlendTime			= 10
				AnimationSpeedFactorRange	= 0.24 0.24
			End
		End


		AnimationState						= STUNNED_FLAILING WEAPONSET_TOGGLE_1
			StateName						= STATE_Fly
			Animation
				AnimationName				= EUHaldir_FLYA
				AnimationMode				= LOOP
				AnimationSpeedFactorRange	= 0.4 0.6
			End
			Flags							= MAINTAIN_FRAME_ACROSS_STATES2
		End
		AnimationState						= STUNNED_FLAILING
			StateName						= STATE_Fly
			Animation						= Sword
				AnimationName				= EUHaldir_FLYB
				AnimationMode				= LOOP
				AnimationSpeedFactorRange	= 0.4 0.6
			End
			Flags							= MAINTAIN_FRAME_ACROSS_STATES2
			BeginScript
				PrevState = CurDrawablePrevAnimationState()
				PrevAnim = CurDrawablePrevAnimation()
				if PrevState == "Ready_Bow" or PrevState == "Moving_Bow" or PrevState == "Bored_Bow"
				then
					CurDrawableShowSubObject("arrow")
					CurDrawableShowSubObject("arrownock")
					return "WantSword"
				elseif PrevState == "STATE_Fly"
				then
					if PrevAnim == "Bow" or PrevAnim == "WantSword"
					then
						CurDrawableShowSubObject("arrow")
						CurDrawableShowSubObject("arrownock")
						return "WantSword"
					end
				end
				CurDrawableHideSubObject("ArrowNock")
				CurDrawableHideSubObject("arrow")
				return "Sword"
			EndScript
		End


		AnimationState						= DYING DEATH_1 SPLATTED WEAPONSET_TOGGLE_1
			StateName						= STATE_Dead
			Animation						= Bow
				AnimationName				= EUHaldir_LNDA
				AnimationMode				= ONCE
			End
		End
		AnimationState						= DYING DEATH_1 SPLATTED
			StateName						= STATE_Dead
			Animation						= Sword
				AnimationName				= EUHaldir_LNDB
				AnimationMode				= ONCE
			End
		End


		AnimationState						= DYING DEATH_1 WEAPONSET_TOGGLE_1
			Animation						= Bow1
				AnimationName				= EUHaldir_DIEBV5
				AnimationMode				= ONCE
			End
			Animation						= Bow2
				AnimationName				= EUHaldir_DIEBV5
				AnimationMode				= ONCE
			End
			Animation						= WantBow
				AnimationName				= EUHaldir_LNDA
				AnimationMode				= ONCE
			End
			BeginScript
				PrevState = CurDrawablePrevAnimationState()
				PrevAnim = CurDrawablePrevAnimation()
				if PrevState == "STATE_Fly"
				then
					CurDrawableHideSubObject("ArrowNock")
					CurDrawableHideSubObject("arrow")
					return "WantBow"
				end
				if GetClientRandomNumberReal(0,2) < 1
				then
					CurDrawableShowSubObject("arrow")
					CurDrawableShowSubObject("arrownock")
					return "Bow1"
				else
					CurDrawableShowSubObject("arrow")
					CurDrawableShowSubObject("arrownock")
					return "Bow2"
				end
			EndScript
		End
		AnimationState						= DYING DEATH_1
			Animation						= Sword1
				AnimationName				= EUHaldir_DIESv5
				AnimationMode				= ONCE
			End
			Animation						= Sword2
				AnimationName				= EUHaldir_DIESV5
				AnimationMode				= ONCE
			End
			Animation						= WantSword
				AnimationName				= EUHaldir_LNDB
				AnimationMode				= ONCE
			End
			BeginScript
				PrevState = CurDrawablePrevAnimationState()
				PrevAnim = CurDrawablePrevAnimation()
				if PrevState == "STATE_Fly"
				then
					CurDrawableShowSubObject("arrow")
					CurDrawableShowSubObject("arrownock")
					return "WantSword"
				end
				CurDrawableHideSubObject("ArrowNock")
				CurDrawableHideSubObject("arrow")
				if GetClientRandomNumberReal(0,2) < 1
				then
					return "Sword1"
				else
					return "Sword2"
				end
			EndScript
		End


		AnimationState						= DYING DEATH_2 WEAPONSET_TOGGLE_1
			Animation						= FadeOut
				AnimationName				= EUHaldir_DIEBV5
				AnimationMode				= ONCE
			End
		End
		AnimationState						= DYING DEATH_2
			Animation						= FadeOut
				AnimationName				= EUHaldir_DIESV5
				AnimationMode				= LOOP
			End
		End


		AnimationState						= STUNNED_STANDING_UP WEAPONSET_TOGGLE_1
			StateName						= STATE_GetUp
			Animation						= Bow
				AnimationName				= EUHaldir_GTPB
				AnimationMode				= ONCE
				AnimationSpeedFactorRange	= 1.42 1.42
			End
			Animation						= WantBow
				AnimationName				= EUHaldir_GTPSX1
				AnimationMode				= ONCE
			End
			Flags						= MAINTAIN_FRAME_ACROSS_STATES4
			BeginScript
				PrevState = CurDrawablePrevAnimationState()
				PrevAnim = CurDrawablePrevAnimation()
				if PrevState == "STATE_GetUp" or PrevState == "STATE_Land"
				then	
					if PrevAnim == "WantBow" or PrevAnim == "Sword"
					then
						CurDrawableHideSubObject("ArrowNock")
						CurDrawableHideSubObject("arrow")
						return "WantBow"
					end
				else
					CurDrawableShowSubObject("arrow")
					CurDrawableShowSubObject("arrownock")
					return "Bow"
				end
			EndScript
		End
		AnimationState						= STUNNED_STANDING_UP
			StateName						= STATE_GetUp
			Animation						= Sword
				AnimationName				= EUHaldir_GTPSX1
				AnimationMode				= ONCE
				AnimationSpeedFactorRange	= 1.2	1.2
			End
			Animation						= WantSword
				AnimationName				= EUHaldir_GTPB
				AnimationMode				= ONCE
			End
			Flags							= MAINTAIN_FRAME_ACROSS_STATES4
			BeginScript
				PrevState = CurDrawablePrevAnimationState()
				PrevAnim = CurDrawablePrevAnimation()
				if PrevState == "STATE_GetUp" or PrevState == "STATE_Land"
				then
					if PrevAnim == "Bow" or PrevAnim == "WantSword"
					then	
						CurDrawableShowSubObject("arrow")
						CurDrawableShowSubObject("arrownock")
						return "WantSword"
					end
				end
				CurDrawableHideSubObject("ArrowNock")
				CurDrawableHideSubObject("arrow")
				return "Sword"
			EndScript
		End


		AnimationState						= STUNNED WEAPONSET_TOGGLE_1
			StateName						= STATE_Land
			Animation						= Bow
				AnimationName				= EUHaldir_LNDA
				AnimationMode				= ONCE
			End
			Animation						= WantBow
				AnimationName				= EUHaldir_LNDB
				AnimationMode				= ONCE
			End
			Flags							= MAINTAIN_FRAME_ACROSS_STATES3
			BeginScript
				PrevState = CurDrawablePrevAnimationState()
				PrevAnim = CurDrawablePrevAnimation()
				if PrevState == "STATE_Fly"
				then
					if PrevAnim == "WantBow" or PrevAnim == "Sword"
					then
						CurDrawableHideSubObject("ArrowNock")
						CurDrawableHideSubObject("arrow")
						return "WantBow"
					end
				end
				CurDrawableShowSubObject("arrow")
				CurDrawableShowSubObject("arrownock")
				return "Bow"
			EndScript
		End
		AnimationState						= STUNNED
			StateName						= STATE_Land
			Animation						= Sword
				AnimationName				= EUHaldir_LNDB
				AnimationMode				= ONCE
			End
			Animation						= WantSword
				AnimationName				= EUHaldir_LNDA
				AnimationMode				= ONCE
			End
			BeginScript
				PrevState = CurDrawablePrevAnimationState()
				PrevAnim = CurDrawablePrevAnimation()
				if PrevState == "STATE_Fly"
				then
					if PrevAnim == "WantSword" or PrevAnim == "Bow"
					then
						CurDrawableShowSubObject("arrow")
						CurDrawableShowSubObject("arrownock")
						return "WantSword"
					end
				end
				Flags						= MAINTAIN_FRAME_ACROSS_STATES3
				CurDrawableHideSubObject("ArrowNock")
				CurDrawableHideSubObject("arrow")
				return "Sword"
			EndScript
		End

		AnimationState						= PARALYZED
			Animation
				AnimationName				= EUHaldir_IDLF
				AnimationMode				= LOOP
			End
		End


		AnimationState						= FIRING_OR_PREATTACK_A WEAPONSET_TOGGLE_1
			StateName						= Attacking_Bow
			Animation
				AnimationName				= EUHaldir_ATA2
				AnimationMode				= ONCE
				UseWeaponTiming				= Yes
				AnimationBlendTime			= 20
			End
			BeginScript
				CurDrawableShowSubObject("arrow")
				CurDrawableShowSubObject("ArrowNock")
			EndScript
		End
		AnimationState						= FIRING_OR_PREATTACK_A
			StateName						= Ready_Sword
			
			Animation						= AttackWithSwordA
				AnimationName				= EUHaldir_ATKSV2
				AnimationMode				= ONCE
				UseWeaponTiming				= Yes
			End
			Animation						= AttackWithSwordB
				AnimationName				= EUHaldir_ATKSV2
				AnimationMode				= ONCE
				UseWeaponTiming				= Yes
			End
			Animation						= AttackWithSwordD
				AnimationName				= EUHaldir_ATKSV4
				AnimationMode				= ONCE
				UseWeaponTiming				= Yes
			End
			BeginScript
				CurDrawableHideSubObject("ArrowNock")
				CurDrawableHideSubObject("arrow")
			EndScript
		End

		AnimationState						= SPECIAL_WEAPON_ONE
			Animation
				AnimationName				= EUHaldir_SPCA
				AnimationMode				= ONCE
			End
			FrameForPristineBonePositions	= 60
			BeginScript
				CurDrawableShowSubObject("arrow")
				CurDrawableShowSubObject("arrownock")
			EndScript
		End


		AnimationState						= MOVING WEAPONSET_TOGGLE_1
			StateName						= Moving_Bow
			Animation
				AnimationName				= EUHaldir_RUNB
				AnimationMode				= LOOP
			End
			Flags = RANDOMSTART
			BeginScript
				CurDrawableShowSubObject("arrow")
				CurDrawableShowSubObject("arrownock")
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Moving_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Moving") end
			EndScript
		End
		AnimationState						= MOVING
			StateName						= Moving_Sword
			Animation
				AnimationName				= EUHaldir_RUNS
				AnimationMode				= LOOP
			End
			Flags = RANDOMSTART
			BeginScript
				CurDrawableHideSubObject("arrow")
				CurDrawableHideSubObject("arrownock")
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Moving_Bow" then CurDrawableSetTransitionAnimState("TRANS_BowToSword_Moving") end
			EndScript
		End


		AnimationState						= PREATTACK_A WEAPONSET_TOGGLE_1
			Animation						= ReadyToDrawn
				AnimationName				= EUHaldir_ATA1
				AnimationMode				= ONCE
				AnimationBlendTime			= 0
				UseWeaponTiming				= Yes
			End
			BeginScript
				CurDrawableShowSubObject("arrow")
				CurDrawableShowSubObject("ArrowNock")
			EndScript
		End

		AnimationState						= FIRING_OR_RELOADING_A WEAPONSET_TOGGLE_1
			StateName						= STATE_Firing
			Animation
				AnimationName				= EUHaldir_ATA2
				AnimationMode				= ONCE
				AnimationBlendTime			= 30
				UseWeaponTiming				= Yes
				AnimationSpeedFactorRange	= 1.5 1.5
			End
			Flags							= START_FRAME_FIRST
			BeginScript
				CurDrawableHideSubObject("arrow")
				CurDrawableHideSubObject("ArrowNock")
			EndScript
		End


		AnimationState						= MOVING BACKING_UP WEAPONSET_TOGGLE_1
			StateName						= STATE_BackingUp
			Animation						= Bow
				AnimationName				= EUHaldir_BAKB
				AnimationMode				= LOOP
			End
			Animation						= WantBow
				AnimationName				= EUHaldir_BAKS
				AnimationMode				= LOOP
			End
			Flags							= MAINTAIN_FRAME_ACROSS_STATES4
			BeginScript
				CurDrawableShowSubObject("arrow")
				CurDrawableShowSubObject("arrownock")
				PrevAnim	= CurDrawablePrevAnimation()
				PrevState	= CurDrawablePrevAnimationState()
				if PrevState == "STATE_BackingUp"
				then
					if PrevAnim == "WantBow" or PrevAnim == "Sword"
					then
						return "WantBow"
					end
				end
				return "Bow"
			EndScript
		End
		AnimationState						= MOVING BACKING_UP
			StateName						= STATE_BackingUp
			Animation						= Sword
				AnimationName				= EUHaldir_BAKS
				AnimationMode				= LOOP
			End
			Animation						= WantSword
				AnimationName				= EUHaldir_BAKS
				AnimationMode				= LOOP
			End
			Flags							= MAINTAIN_FRAME_ACROSS_STATES4
			BeginScript
				CurDrawableHideSubObject("ARROW")
				CurDrawableHideSubObject("ARROWNOCK")
				PrevAnim	= CurDrawablePrevAnimation()
				PrevState	= CurDrawablePrevAnimationState()
				if PrevState == "STATE_BackingUp"
				then
					if PrevAnim == "Bow" or PrevAnim == "WantSword"
					then
						return "WantSword"
					end
				end
				return "Sword"
			EndScript
		End


		AnimationState						= CONTINUOUS_FIRE_MEAN
			Animation						= HangFrameWhileCoasting
				AnimationName				= EUHaldir_ATA2
				AnimationMode				= MANUAL
				AnimationBlendTime			= 20
			End
			Flags							= START_FRAME_LAST
			BeginScript
				CurDrawableShowSubObject("arrow")
				CurDrawableShowSubObject("ARROWNOCK")
				if CurDrawablePrevAnimationState() == "STATE_Firing" then CurDrawableAllowToContinue() end
			EndScript
			;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
			;;;;
			;;;;	VERY IMPORTANT ARCHER INFORMATION
			;;;;	THIS WILL STOP THE JITTERS, AND BEST
			;;;;	YET, IT'S A COMPLETE HACK! Just look above.
			;;;;	We say that if we get into this state
			;;;;	from firing, just continue to fire. DONE.
			;;;;
			;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
		End
		AnimationState						= CONTINUOUS_FIRE_SLOW
			StateName						= Ready_Bow
			Animation						= PutAwayArrow
				AnimationName				= EUHaldir_ATA3
				AnimationMode				= ONCE
			End
			BeginScript
				CurDrawableShowSubObject("arrow")
				CurDrawableShowSubObject("ARROWNOCK")
			EndScript
		End


		AnimationState						= ATTACKING WEAPONSET_TOGGLE_1
			StateName						= Ready_Bow
			Animation						= IDLB
				AnimationName				= EUHaldir_IDLB
				AnimationMode				= LOOP
			End
			BeginScript
				CurDrawableShowSubObject("arrow")
				CurDrawableShowSubObject("arrownock")
				PrevAnim = CurDrawablePrevAnimation()
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Bored_Bow" then CurDrawableSetTransitionAnimState("TRANS_BR_Bow") end
				if Prev == "Selected_Bow" then CurDrawableSetTransitionAnimState("TRANS_SelectedToReady_Bow") end
				if Prev == "Selected_Sword" or Prev == "Moving_Sword" or Prev == "Ready_Sword" or Prev == "Bored_Sword" or PrevAnim == "WantBow"
				then 
					CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Ready")
				end
			EndScript
		End
		AnimationState						= ATTACKING
			StateName						= Ready_Sword
			Animation						= Alert_1
				AnimationName				= EUHaldir_IDLST1
				AnimationMode				= LOOP
			End
			BeginScript
				PrevAnim = CurDrawablePrevAnimation()
				Prev = CurDrawablePrevAnimationState()
				CurDrawableHideSubObject("ArrowNock")
				CurDrawableHideSubObject("arrow")
				if Prev == "Bored_Sword" then CurDrawableSetTransitionAnimState("TRANS_BR_Sword") end
				if Prev == "Selected_Bow" or Prev == "Moving_Bow" or Prev == "Ready_Bow" or Prev == "Bored_Bow" or PrevAnim == "WantSword"
				then 
					CurDrawableSetTransitionAnimState("TRANS_BowToSword_Ready")
				end
			EndScript
		End


		AnimationState						= ENGAGED WEAPONSET_TOGGLE_1
			StateName						= Ready_Bow
			Animation						= IDLB
				AnimationName				= EUHaldir_IDLB
				AnimationMode				= LOOP
			End
			BeginScript
				CurDrawableShowSubObject("arrow")
				CurDrawableShowSubObject("arrownock")
				PrevAnim = CurDrawablePrevAnimation()
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Bored_Bow"		then CurDrawableSetTransitionAnimState("TRANS_BR_Bow")				end
				if Prev == "Selected_Bow"	then CurDrawableSetTransitionAnimState("TRANS_SelectedToReady_Bow")				end
				if Prev == "Selected_Sword" or Prev == "Moving_Sword" or Prev == "Ready_Sword" or Prev == "Bored_Sword" or PrevAnim == "WantBow"
				then 
					CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Ready")	
				end
			EndScript
		End
		AnimationState						= ENGAGED
			StateName						= Ready_Sword
			Animation						= Alert_1
				AnimationName				= EUHaldir_IDLST1
				AnimationMode				= LOOP
			End
			BeginScript
				PrevAnim = CurDrawablePrevAnimation()
				Prev = CurDrawablePrevAnimationState()
				CurDrawableHideSubObject("ArrowNock")
				CurDrawableHideSubObject("arrow")
				if Prev == "Bored_Sword"		then CurDrawableSetTransitionAnimState("TRANS_BR_Sword")			end
				if Prev == "Selected_Bow" or Prev == "Moving_Bow" or Prev == "Ready_Bow" or Prev == "Bored_Bow" or PrevAnim == "WantSword"
				then 
					CurDrawableSetTransitionAnimState("TRANS_BowToSword_Ready")	
				end
			EndScript
		End


		AnimationState						= EMOTION_ALERT WEAPONSET_TOGGLE_1
			StateName						= Ready_Bow
			Animation						= IDLB
				AnimationName				= EUHaldir_IDLB
				AnimationMode				= LOOP
			End
			BeginScript
				CurDrawableShowSubObject("arrow")
				CurDrawableShowSubObject("arrownock")
				PrevAnim = CurDrawablePrevAnimation()
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Bored_Bow"		then CurDrawableSetTransitionAnimState("TRANS_BR_Bow") end
				if Prev == "Selected_Bow"	then CurDrawableSetTransitionAnimState("TRANS_SelectedToReady_Bow") end
				if Prev == "Selected_Sword" or Prev == "Moving_Sword" or Prev == "Ready_Sword" or Prev == "Bored_Sword" or PrevAnim == "WantBow"
				then 
					CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Ready")	
				end				
			EndScript
		End 
		AnimationState						= EMOTION_ALERT
			StateName						= Ready_Sword
			Animation						= Alert_1
				AnimationName				= EUHaldir_IDLST1
				AnimationMode				= LOOP
			End
			BeginScript
				PrevAnim = CurDrawablePrevAnimation()
				Prev = CurDrawablePrevAnimationState()
				CurDrawableHideSubObject("ArrowNock")
				CurDrawableHideSubObject("arrow")
				if Prev == "Bored_Sword" then CurDrawableSetTransitionAnimState("TRANS_BR_Sword") end
				if Prev == "Selected_Bow" or Prev == "Moving_Bow" or Prev == "Ready_Bow" or Prev == "Bored_Bow" or PrevAnim == "WantSword"
				then 
					CurDrawableSetTransitionAnimState("TRANS_BowToSword_Ready")	
				end
			EndScript
		End


		AnimationState						= EMOTION_CELEBRATING WEAPONSET_TOGGLE_1
			StateName						= STATE_Emotion_Bow
			Animation						= Bow
				AnimationName				= EUHaldir_CHRB
				AnimationMode				= ONCE
			End
			Animation						= Bow2
				AnimationName				= EUHaldir_CHRB
				AnimationMode				= ONCE
			End
			Flags							= MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				PrevState = CurDrawablePrevAnimationState()
				CurDrawableShowSubObject("arrow")
				CurDrawableShowSubObject("arrownock")
				if PrevState == "STATE_Emotion_Sword"
				then
					CurDrawableAllowToContinue()
					if( CurDrawablePrevAnimFraction() > .89 )
					then
						CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Ready")
					end
				elseif PrevState == "STATE_Emotion_Bow"
				then
					CurDrawableAllowToContinue()
				elseif PrevState == "Selected_Bow"
				then
					CurDrawableSetTransitionAnimState("TRANS_SelectedToReady_Bow")
				end
			EndScript
		End
		AnimationState						= EMOTION_CELEBRATING
			StateName						= STATE_Emotion_Sword
			Animation						= Sword
				AnimationName				= EUHaldir_CHRS
				AnimationMode				= ONCE
			End
			Animation						= Sword2
				AnimationName				= EUHaldir_CHRS
				AnimationMode				= ONCE
			End
			Flags							= MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				PrevState = CurDrawablePrevAnimationState()
				CurDrawableHideSubObject("arrow")
				CurDrawableHideSubObject("arrownock")
				
				if PrevState == "STATE_Emotion_Bow"
				then
					CurDrawableAllowToContinue()
					if( CurDrawablePrevAnimFraction() > .89 )
					then
						CurDrawableSetTransitionAnimState("TRANS_BowToSword_Ready")
					end
				elseif PrevState == "STATE_Emotion_Sword"
				then
					CurDrawableAllowToContinue()
				elseif PrevState == "Bored_Sword"
				then
					CurDrawableSetTransitionAnimState("TRANS_BR_Sword")
				end
			EndScript
		End
		


		AnimationState						= EMOTION_TAUNTING WEAPONSET_TOGGLE_1
			StateName						= STATE_Emotion_Bow
			Animation						= Bow1
				AnimationName				= EUHaldir_TNTA
				AnimationMode				= ONCE
			End
			Animation						= Bow2
				AnimationName				= EUHaldir_TNTA
				AnimationMode				= ONCE
			End
			Flags							= RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				PrevState = CurDrawablePrevAnimationState()
				CurDrawableShowSubObject("arrow")
				CurDrawableShowSubObject("arrownock")
				
				if PrevState == "STATE_Emotion_Sword"
				then
					CurDrawableAllowToContinue()
					if( CurDrawablePrevAnimFraction() > .89 )
					then
						CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Ready")
					end
				elseif PrevState == "STATE_Emotion_Bow"
				then
					CurDrawableAllowToContinue()
				elseif PrevState == "Selected_Bow"
				then
					CurDrawableSetTransitionAnimState("TRANS_SelectedToReady_Bow")
				elseif PrevState == "Bored_Bow"
				then
					CurDrawableSetTransitionAnimState("TRANS_BR_Bow")
				end
			EndScript
		End
		AnimationState						= EMOTION_TAUNTING
			StateName						= STATE_Emotion_Sword
			Animation						= Sword
				AnimationName				= EUHaldir_TNTB
				AnimationMode				= ONCE
			End
			Animation						= Sword2
				AnimationName				= EUHaldir_TNTB
				AnimationMode				= ONCE
			End
			Flags							= RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				PrevState = CurDrawablePrevAnimationState()
				CurDrawableHideSubObject("arrow")
				CurDrawableHideSubObject("arrownock")
				if PrevState == "STATE_Emotion_Bow"
				then
					CurDrawableAllowToContinue()
					if( CurDrawablePrevAnimFraction() > .89 )
					then
						CurDrawableSetTransitionAnimState("TRANS_BowToSword_Ready")
					end
				elseif PrevState == "STATE_Emotion_Sword"
					then
						CurDrawableAllowToContinue()
				elseif PrevState == "Bored_Sword"
				then
					CurDrawableSetTransitionAnimState("TRANS_BR_Sword")
				end
			EndScript
		End


		AnimationState						= EMOTION_POINTING WEAPONSET_TOGGLE_1
			StateName						= STATE_Emotion_Bow
			Animation						= Bow
				AnimationName				= EUHaldir_PNTA
				AnimationMode				= ONCE
			End
			Animation						= Bow2
				AnimationName				= EUHaldir_PNTA
				AnimationMode				= ONCE
			End
			Flags							= MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				PrevState = CurDrawablePrevAnimationState()
				CurDrawableShowSubObject("arrow")
				CurDrawableShowSubObject("arrownock")
				
				if PrevState == "STATE_Emotion_Sword"
				then
					CurDrawableAllowToContinue()
					if( CurDrawablePrevAnimFraction() > .89 )
					then
						CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Ready")
					end
				elseif PrevState == "STATE_Emotion_Bow"
				then
					CurDrawableAllowToContinue()
				elseif PrevState == "Selected_Bow"
				then
					CurDrawableSetTransitionAnimState("TRANS_SelectedToReady_Bow")
				elseif PrevState == "Bored_Bow"
				then
					CurDrawableSetTransitionAnimState("TRANS_BR_Bow")
				end
			EndScript
		End
		AnimationState						= EMOTION_POINTING
			StateName						= STATE_Emotion_Sword
			Animation						= Sword
				AnimationName				= EUHaldir_PNTB
				AnimationMode				= ONCE
			End
			Animation						= Sword2
				AnimationName				= EUHaldir_PNTB
				AnimationMode				= ONCE
			End
			Flags							= MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				PrevState = CurDrawablePrevAnimationState()
				CurDrawableHideSubObject("arrow")
				CurDrawableHideSubObject("arrownock")
				
				if PrevState == "STATE_Emotion_Bow"
				then
					CurDrawableAllowToContinue()
					if( CurDrawablePrevAnimFraction() > .89 )
					then
						CurDrawableSetTransitionAnimState("TRANS_BowToSword_Ready")
					end
				elseif PrevState == "STATE_Emotion_Sword"
				then
					CurDrawableAllowToContinue()
				elseif PrevState == "Bored_Sword"
				then
					CurDrawableSetTransitionAnimState("TRANS_BR_Sword")
				end
			EndScript
		End


		AnimationState 						= HIT_REACTION HIT_LEVEL_1 WEAPONSET_TOGGLE_1
			StateName						= Bored_Bow
			Animation
				AnimationName				= EUHaldir_HITA
				AnimationMode 				= ONCE
				AnimationSpeedFactorRange	= .9 .9
			End
		End
		AnimationState						= HIT_REACTION HIT_LEVEL_1
			StateName						= Bored_Sword
			Animation
				AnimationName				= EUHaldir_HITE
				AnimationMode				= ONCE
			End
		End

		AnimationState						= RAISING_FLAG WEAPONSET_TOGGLE_1
			StateName						= STATE_Emotion_Bow
			Animation						= Bow
				AnimationName				= EUHaldir_CHRB
				AnimationMode				= ONCE
			End
			Animation						= Bow2
				AnimationName				= EUHaldir_CHRB
				AnimationMode				= ONCE
			End
			Flags							= RESTART_ANIM_WHEN_COMPLETE
		End

		AnimationState						= SELECTED WEAPONSET_TOGGLE_1
			StateName						= Selected_Bow
			Animation						= ATNE
				AnimationName				= EUHaldir_ATNE
				AnimationMode				= LOOP
			End
			BeginScript
				CurDrawableShowSubObject("arrow")
				CurDrawableShowSubObject("arrownock")
				PrevAnim = CurDrawablePrevAnimation()
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Emotion_Bow" or Prev == "STATE_Emotion_Sword" then CurDrawableAllowToContinue() end
				if Prev == "Bored_Bow" then CurDrawableSetTransitionAnimState("TRANS_BoredToSelected_Bow") end
				if Prev == "Ready_Bow" then CurDrawableSetTransitionAnimState("TRANS_RS_Bow") end
				if Prev == "Selected_Sword" or Prev == "Moving_Sword" or Prev == "Ready_Sword" or Prev == "Bored_Sword" or PrevAnim == "WantBow"
				then 
					CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Selected")	
				end
			EndScript
		End

		AnimationState						= RAISING_FLAG
			StateName						= STATE_Emotion_Sword
			Animation						= Sword
				AnimationName				= EUHaldir_CHRS
				AnimationMode				= ONCE
			End
			Animation						= Sword2
				AnimationName				= EUHaldir_CHRS
				AnimationMode				= ONCE
			End
			Flags							= RESTART_ANIM_WHEN_COMPLETE
		End
		
		AnimationState						= SELECTED
			StateName						= Selected_Sword
			Animation						= ATNA
				AnimationName				= EUHaldir_ATNS
				AnimationMode				= LOOP
			End
			BeginScript
				CurDrawableHideSubObject("ARROW")
				CurDrawableHideSubObject("ARROWNOCK")
				PrevAnim = CurDrawablePrevAnimation()
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Emotion_Bow" or Prev == "STATE_Emotion_Sword" then CurDrawableAllowToContinue() end
				if Prev == "Bored_Sword" then CurDrawableSetTransitionAnimState("TRANS_BoredToSelected_Sword") end
				if Prev == "Ready_Sword" then CurDrawableSetTransitionAnimState("TRANS_ReadyToSelected_Sword") end
				if Prev == "Selected_Bow" or Prev == "Moving_Bow" or Prev == "Ready_Bow" or Prev == "Bored_Bow" or PrevAnim == "WantSword" or PrevAnim == "EUHaldir_STHB"
				then
					CurDrawableSetTransitionAnimState("TRANS_BowToSword_Selected")
				end
			EndScript
		End


		IdleAnimationState
			StateName						= Bored_Sword
			Animation						= Idle_Sword1
				AnimationName				= EUHaldir_IDLF
				AnimationMode				= ONCE
			End
			Animation						= Idle_Sword2
				AnimationName				= EUHaldir_IDLF
				AnimationMode				= ONCE
			End
			Animation						= Idle_Sword3
				AnimationName				= EUHaldir_IDLF
				AnimationMode				= ONCE
			End
			Animation						= IdleNoFidget
				AnimationName				= EUHaldir_IDLF
				AnimationMode				= ONCE
				AnimationPriority			= 20
			End
			Animation						= IdleNoFidget2
				AnimationName				= EUHaldir_IDLF
				AnimationMode				= ONCE
				AnimationPriority			= 0
			End
			Flags							= RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				CurDrawableHideSubObject("ARROW")
				CurDrawableHideSubObject("ARROWNOCK")
				PrevAnim = CurDrawablePrevAnimation()
				Prev = CurDrawablePrevAnimationState()
				if Prev == "TRANS_SelectedToBored_Sword" or Prev == "TRANS_RB_Sword" then return "IdleNoFidget" end
				if Prev == "Selected_Sword" then CurDrawableSetTransitionAnimState("TRANS_SelectedToBored_Sword") end
				if Prev == "Ready_Sword" then CurDrawableSetTransitionAnimState("TRANS_RB_Sword") end
				if Prev == "Selected_Bow" or Prev == "Moving_Bow" or Prev == "Ready_Bow" or Prev == "Bored_Bow" or PrevAnim == "WantSword"
				then 
					CurDrawableSetTransitionAnimState("TRANS_BowToSword_Selected")
				end
			EndScript
		End


		AnimationState						= WEAPONSET_TOGGLE_1
			StateName						= Bored_Bow
			Animation						= IdleBowB
				AnimationName				= EUHaldir_IDLE
				AnimationMode				= ONCE
			End
			Animation						= IdleBowD
				AnimationName				= EUHaldir_IDLE
				AnimationMode				= ONCE
			End
			Animation						= IdleNoFidget
				AnimationName				= EUHaldir_IDLE
				AnimationMode				= ONCE
				AnimationPriority			= 20
			End
			Animation						= IdleNoFidget2
				AnimationName				= EUHaldir_IDLE
				AnimationMode				= ONCE
				AnimationPriority			= 10
			End
			Flags							= RESTART_ANIM_WHEN_COMPLETE
			BeginScript	
				CurDrawableShowSubObject("arrow")
				CurDrawableShowSubObject("arrownock")
				PrevAnim = CurDrawablePrevAnimation()
				Prev = CurDrawablePrevAnimationState()
				if Prev == "TRANS_SelectedToBored_Bow" or Prev == "TRANS_RB_Bow" then return "IdleNoFidget" end
				if Prev == "Selected_Bow" then CurDrawableSetTransitionAnimState("TRANS_SelectedToBored_Bow") end
				if Prev == "Ready_Bow" then CurDrawableSetTransitionAnimState("TRANS_RB_Bow") end
				if Prev == "Selected_Sword" or Prev == "Moving_Sword" or Prev == "Ready_Sword" or Prev == "Bored_Sword" or PrevAnim == "WantBow"
				then 
					CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Selected")
				end
			EndScript
		End


		; Transitions

		TransitionState						= TRANS_BoredToSelected_Bow
			Animation
				AnimationName				= EUHaldir_ATNB
				AnimationMode				= ONCE
				AnimationBlendTime			= 10
			End
		End


		TransitionState						= TRANS_SelectedToReady_Bow
			Animation						= ATNE
				AnimationName				= EUHaldir_IDLB
				AnimationMode				= ONCE
				AnimationBlendTime			= 10
			End
		End


		TransitionState						= TRANS_SelectedToBored_Bow
			Animation
				AnimationName				= EUHaldir_ATNB
				AnimationMode				= ONCE_BACKWARDS
			End
			Flags							= START_FRAME_LAST
		End


		TransitionState						= TRANS_RS_Bow
			Animation						= ATNF
				AnimationName				= EUHaldir_IDLB
				AnimationMode				= ONCE_BACKWARDS
				AnimationBlendTime			= 10
			End
			Flags							= START_FRAME_LAST
		End


		TransitionState						= TRANS_BR_Bow
			Animation						= IDLB
				AnimationName				= EUHaldir_IDLST1
				AnimationMode				= ONCE
				AnimationBlendTime			= 20
			End
		End


		TransitionState						= TRANS_RB_Bow
			Animation						= IDLD
				AnimationName				= EUHaldir_IDLB
				AnimationMode				= ONCE
				AnimationBlendTime			= 20
			End
		End


		TransitionState					= TRANS_BoredToSelected_Sword
			Animation					= ATNA
				AnimationName			= EUHaldir_ATNA
				AnimationMode			= ONCE
			End
		End


		TransitionState					= TRANS_SR_Sword
			Animation					= ATNC
				AnimationName			= EUHaldir_STHA
				AnimationMode			= ONCE
			End
		End


		TransitionState					= TRANS_SelectedToBored_Sword
			Animation					= ATNA
				AnimationName			= EUHaldir_ATNA
				AnimationMode			= ONCE_BACKWARDS
			End
			Flags						= START_FRAME_LAST
		End


		TransitionState					= TRANS_ReadyToSelected_Sword
			Animation					= ATNC
				AnimationName			= EUHaldir_IDLST1
				AnimationMode			= ONCE_BACKWARDS
				AnimationBlendTime		= 20
			End
			Flags						= START_FRAME_LAST
		End


		TransitionState					= TRANS_BR_Sword
			Animation					= ATNS
				AnimationName			= EUHaldir_STHA
				AnimationMode			= ONCE
				AnimationBlendTime		= 20
			End
		End


		TransitionState					= TRANS_RB_Sword
			Animation					= IDLG
				AnimationName			= EUHaldir_STHA
				AnimationMode			= ONCE
				AnimationBlendTime		= 20
			End
		End
		


		TransitionState					= TRANS_SwordToBow_Moving
			Animation					= DrawBow
				AnimationName			= EUHaldir_STHC
				AnimationMode			= ONCE
			End
		End


		TransitionState					= TRANS_BowToSword_Moving
			Animation					= DrawSword
				AnimationName			= EUHaldir_STHD
				AnimationMode			= ONCE
			End
		End


		TransitionState					= TRANS_BowToSword_Ready
			Animation					= DrawSwords
				AnimationName			= EUHaldir_STHA
				AnimationMode			= ONCE
			End
		End


		TransitionState					= TRANS_SwordToBow_Ready
			Animation					= DrawBow
				AnimationName			= EUHaldir_STHB
				AnimationMode			= ONCE
			End
		End


		TransitionState					= TRANS_BowToSword_Selected
			Animation					= DrawSwords
				AnimationName			= EUHaldir_STHA
				AnimationMode			= ONCE
			End
		End


		TransitionState					= TRANS_SwordToBow_Selected
			Animation					= DrawBow
				AnimationName			= EUHaldir_STHB
				AnimationMode			= ONCE
			End
		End
	End
End
End

;<<<<<<<<<<
;Evil Gimli
;>>>>>>>>>>

;>>
;FX
;>>'

FXParticleSystem GloinShatterShockwave
  System
    Priority = ALWAYS_RENDER
    Shader = ALPHA
    ParticleName = EXShockWav.tga
    Lifetime = 30 30
    SystemLifetime = 1
    SortLevel = 1
    Size = 50 50
    BurstCount = 3 3
    IsGroundAligned = Yes
  End
  Color = DefaultColor
    Color1 = R:53 G:40 B:21 0
    Color2 = R:65 G:49 B:33 40
    ColorScale = -5 3
  End
  Alpha = DefaultAlpha
    Alpha1 = 0.5 0.5 0
    Alpha2 = 0 0 30
  End
  Update = DefaultUpdate
    SizeRate = 5 5
    SizeRateDamping = 1 1
    AngleZ = -1 1
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.8 0.8
  End
  EmissionVelocity = OutwardEmissionVelocity
  End
  EmissionVolume = PointEmissionVolume
    IsHollow = Yes
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem GloinShatterwave
  System
    Priority = VERY_LOW_OR_ABOVE
    Shader = ALPHA_TEST
    ParticleName = SMUDGE.tga
    Lifetime = 15 20
    SystemLifetime = 17
    Size = 50 50
    BurstCount = 10 20
  End
  Color = DefaultColor
    Color1 = R:255 G:255 B:255 0
    Color2 = R:255 G:255 B:255 8
    Color3 = R:255 G:255 B:255 20
  End
  Alpha = DefaultAlpha
    Alpha1 = 1 1 0
    Alpha2 = 0 0.5 15
  End
  Update = DefaultUpdate
    SizeRate = 5 5
    SizeRateDamping = 0.9 0.9
    AngleZ = 0.002 0.002
    AngularRateZ = 0.0001 0.0001
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.96 0.97
    DriftVelocity = X:0 Y:0 Z:1
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = CylinderEmissionVolume
    IsHollow = Yes
    Radius = 7
    RadiusRate = 13
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem GloinShatterwave2
  System
    Priority = VERY_LOW_OR_ABOVE
    Shader = ALPHA
    ParticleName = EXsmokeplume.tga
    Lifetime = 80 80
    SystemLifetime = 8
    Size = 50 50
    BurstCount = 20 20
  End
  Color = DefaultColor
    Color1 = R:86 G:68 B:35 0
    Color2 = R:108 G:89 B:49 8
    Color3 = R:111 G:87 B:45 40
    ColorScale = -50 20
  End
  Alpha = DefaultAlpha
    Alpha1 = 0 0.1 0
    Alpha2 = 0.2 0.3 2
    Alpha3 = 0 0 80
  End
  Update = DefaultUpdate
    SizeRate = 3 3
    SizeRateDamping = 0.95 0.97
    AngleZ = -3 3
    AngularRateZ = 0.01 0.02
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.96 0.97
    DriftVelocity = X:0 Y:0 Z:0.1
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = CylinderEmissionVolume
    IsHollow = Yes
    Radius = 5
    RadiusRate = 14
  End
  Draw = DefaultDraw
  End
End

;>>>>>>>>>>>>>
;Word Of Power
;>>>>>>>>>>>>>

FXParticleSystem EarthquakeDust
  System
    Priority = MEDIUM_OR_ABOVE
    Shader = ALPHA
    ParticleName = EXsmokeplume.tga
    Lifetime = 100 100
    SystemLifetime = 80
    SortLevel = 1
    Size = 25 25
    StartSizeRate = 5 5
    BurstCount = 2 2
    InitialDelay = 55 55
  End
  Color = DefaultColor
    Color1 = R:160 G:141 B:112 0
    Color2 = R:165 G:147 B:122 30
  End
  Alpha = DefaultAlpha
    Alpha2 = 0.2 0.3 5
    Alpha3 = -0.2 0 100
  End
  Update = DefaultUpdate
    SizeRate = 5 10
    SizeRateDamping = 0.9 0.85
    AngleZ = -0.25 0.25
    AngularRateZ = -0.1 0.1
    AngularDamping = 0.95 0.94
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.95 0.99
    DriftVelocity = X:0 Y:0 Z:0.2
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = -2 2
    Y = -2 2
    Z = 0 2
  End
  EmissionVolume = CylinderEmissionVolume
    IsHollow = Yes
    Radius = 1
    RadiusRate = 3
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem EarthquakeDustFall
  System
    Priority = VERY_LOW_OR_ABOVE
    Shader = ALPHA
    ParticleName = EXsmokeplume.tga
    Lifetime = 100 100
    SystemLifetime = 60
    SortLevel = 1
    Size = 35 35
    BurstCount = 2 5
  End
  Color = DefaultColor
    Color1 = R:251 G:188 B:125 0
    Color2 = R:182 G:131 B:80 30
  End
  Alpha = DefaultAlpha
    Alpha2 = 0.2 0.5 5
    Alpha3 = -0.2 0 100
  End
  Update = DefaultUpdate
    SizeRate = 5 10
    SizeRateDamping = 0.9 0.85
    AngleZ = -5 5
    AngularDamping = 0.95 0.94
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.95 0.99
    DriftVelocity = X:0 Y:0 Z:0.2
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = -2 2
    Y = -2 2
    Z = 0 1
  End
  EmissionVolume = CylinderEmissionVolume
    Radius = 200
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem EarthquakeDustStart
  System
    Priority = MEDIUM_OR_ABOVE
    Shader = ALPHA
    ParticleName = EXsmokeplume.tga
    Lifetime = 100 100
    SystemLifetime = 50
    SortLevel = 1
    Size = 10 10
    StartSizeRate = 5 5
    BurstCount = 1 2
  End
  Color = DefaultColor
    Color1 = R:227 G:213 B:193 0
    Color2 = R:156 G:139 B:116 30
  End
  Alpha = DefaultAlpha
    Alpha2 = 0.2 0.5 5
    Alpha3 = -0.2 0 100
  End
  Update = DefaultUpdate
    SizeRate = 5 10
    SizeRateDamping = 0.9 0.85
    AngleZ = -0.25 0.25
    AngularRateZ = -0.1 0.1
    AngularDamping = 0.95 0.94
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.95 0.99
    DriftVelocity = X:0 Y:0 Z:0.4
  End
  EmissionVelocity = OutwardEmissionVelocity
    Speed = 3 5
  End
  EmissionVolume = CylinderEmissionVolume
    IsHollow = Yes
    Radius = 30
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem EarthquakeRocks
  System
    Priority = MEDIUM_OR_ABOVE
    Shader = W3D_ALPHA
    Type = DRAWABLE
    ParticleName = exground01.w3d
    Lifetime = 100 100
    SystemLifetime = 50
    Size = 0.5 1.25
    BurstDelay = 0 3
    BurstCount = 2 5
    InitialDelay = 50 50
  End
  Color = DefaultColor
    Color1 = R:255 G:170 B:55 0
    Color2 = R:63 G:63 B:63 50
  End
  Alpha = DefaultAlpha
    Alpha1 = 1 1 0
    Alpha2 = 0 0 75
  End
  Update = DefaultUpdate
    SizeRate = -0.01 -0.01
    SizeRateDamping = 1 1
    AngleZ = -500 500
    AngularRateZ = -1 1
    AngularDamping = 1 1
    Rotation = ROTATE_Y
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    Gravity = -0.1
    VelocityDamping = 1 1
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = -1.5 1.5
    Y = -1.5 1.5
    Z = 1.5 3
  End
  EmissionVolume = CylinderEmissionVolume
    IsHollow = Yes
    Radius = 20
    RadiusRate = 3
    Offset = X:0 Y:0 Z:20
  End
  Draw = RenderObjectDraw
  End
  Wind = DefaultWind
    WindStrength = 1
    WindAngleChangeMin = 0.05
    WindAngleChangeMax = 0.05
    TurbulenceAmplitude = 1
    TurbulenceFrequency = 0.1
  End
End

FXParticleSystem EarthquakeScrub
  System
    Priority = VERY_LOW_OR_ABOVE
    Shader = ALPHA
    ParticleName = SMUDGE.tga
    Lifetime = 50 50
    SystemLifetime = 120
    Size = 40 50
    BurstDelay = 30 30
    BurstCount = 40 40
  End
  Color = DefaultColor
    Color1 = R:255 G:255 B:255 0
  End
  Alpha = DefaultAlpha
    Alpha1 = 1 1 0
  End
  Update = DefaultUpdate
    SizeRateDamping = 1 1
    AngleZ = 0.03 0.03
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
  End
  EmissionVelocity = CylindricalEmissionVelocity
    Radial = 5 5
  End
  EmissionVolume = PointEmissionVolume
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem EarthquakeShock
  System
    Priority = VERY_LOW_OR_ABOVE
    ParticleName = EXGimliAxeSpecial.tga
    Lifetime = 30 30
    SystemLifetime = 75
    SortLevel = 1
    BurstDelay = 2 2
    BurstCount = 1 1
    IsGroundAligned = Yes
  End
  Color = DefaultColor
    Color1 = R:79 G:50 B:0 0
    Color2 = R:0 G:0 B:0 30
  End
  Alpha = DefaultAlpha
    Alpha2 = 0.2 0.5 5
    Alpha3 = -0.2 0 100
  End
  Update = DefaultUpdate
    SizeRate = 5 8
    SizeRateDamping = 1 1
    AngleZ = 0 7
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = PointEmissionVolume
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem EarthquakeStart
  System
    Priority = MEDIUM_OR_ABOVE
    Shader = W3D_ALPHA
    Type = DRAWABLE
    ParticleName = exground01.w3d
    Lifetime = 100 100
    SystemLifetime = 50
    Size = 0.5 1.25
    BurstDelay = 2 2
    BurstCount = 1 1
  End
  Color = DefaultColor
    Color1 = R:255 G:170 B:55 0
    Color2 = R:63 G:63 B:63 50
  End
  Alpha = DefaultAlpha
    Alpha1 = 1 1 0
    Alpha2 = 0 0 75
  End
  Update = DefaultUpdate
    SizeRate = -0.01 -0.01
    SizeRateDamping = 1 1
    AngleZ = -500 500
    AngularRateZ = -0.5 0.5
    AngularDamping = 1 1
    Rotation = ROTATE_Y
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    Gravity = -0.15
    VelocityDamping = 1 1
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = -1.5 1.5
    Y = -1.5 1.5
    Z = 2 4
  End
  EmissionVolume = CylinderEmissionVolume
    Radius = 20
  End
  Draw = RenderObjectDraw
  End
  Wind = DefaultWind
    WindStrength = 1
    WindAngleChangeMin = 0.05
    WindAngleChangeMax = 0.05
    TurbulenceAmplitude = 1
    TurbulenceFrequency = 0.1
  End
End

FXList FX_EarthquakePhaseInitialWeapon
  DynamicDecal	; A decal that belongs to nobody, but updates internally to fade and tint and such
		DecalName		= EXQuake01
		Size			= 400
		Color			= R:225 G:205 B:185

		OpacityStart		= 0
		OpacityFadeTimeOne	= 150
		OpacityPeak			= 130
		OpacityPeakTime		= 7000
		OpacityFadeTimeTwo	= 9000
		OpacityEnd			= 0

		StartingDelay	= 0
		Lifetime		= 25000
  End
    DynamicDecal	; A decal that belongs to nobody, but updates internally to fade and tint and such
		DecalName		= EXQuake02
		Size			= 400
		Color			= R:225 G:205 B:185

		OpacityStart		= 0
		OpacityFadeTimeOne	= 150
		OpacityPeak			= 130
		OpacityPeakTime		= 7000
		OpacityFadeTimeTwo	= 9000
		OpacityEnd			= 0

		StartingDelay	= 1500
		Lifetime		= 25000
  End
    DynamicDecal	; A decal that belongs to nobody, but updates internally to fade and tint and such
		DecalName		= EXQuake03
		Size			= 400
		Color			= R:225 G:205 B:185

		OpacityStart		= 0
		OpacityFadeTimeOne	= 150
		OpacityPeak			= 130
		OpacityPeakTime		= 7000
		OpacityFadeTimeTwo	= 9000
		OpacityEnd			= 0

		StartingDelay	= 3000
		Lifetime		= 25000
  End
  
  
  CameraShakerVolume
		Radius = 1000			; Radius needs to encompass camera position, not camera lookat position
		Duration_Seconds = 8.0
		Amplitude_Degrees = 0.4
	End
	ParticleSystem
		Name = EarthquakeDustStart
		Offset = X:0.0 Y:0.0 Z:15.0
	End
	ParticleSystem
		Name = EarthquakeDust
		Offset = X:0.0 Y:0.0 Z:15.0
	End
	ParticleSystem
		Name = EarthquakeRocks
		Offset = X:0.0 Y:0.0 Z:1.0
	End
	ParticleSystem
		Name = EarthquakeShock
		Offset = X:0.0 Y:0.0 Z:5.0
	End
	ParticleSystem
		Name = EarthquakeStart
		Offset = X:0.0 Y:0.0 Z:1.0
	End
	ParticleSystem
		Name = EarthquakeScrub
		Offset = X:0.0 Y:0.0 Z:10.0
	End
	Sound
		Name = SpellEarthquakePhaseInitialWeaponMS
	End
End

;>>>>>>>>>>>>>>>>>>
;BAT and AXE Flares
;>>>>>>>>>>>>>>>>>>

FXParticleSystem GimliManeFire1
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXFire01.tga
    Lifetime = 5 5
    SortLevel = 1
    Size = 18 18
    BurstCount = 2 2
  End
  Color = DefaultColor
    Color2 = R:128 G:64 B:00 2
    Color3 = R:0 G:0 B:0 10
    ColorScale = -5 -5
  End
  Update = DefaultUpdate
    SizeRate = 0.4 0.4
    SizeRateDamping = 1 1
    AngleZ = -5 5
    AngularRateZ = -0.05 0.05
    AngularDamping = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.5 1
    DriftVelocity = X:0 Y:-1.0 Z:-0.1
  End
  EmissionVelocity = OutwardEmissionVelocity
    Speed = -0.3 -0.3
    OtherSpeed = -0.4 -0.4
  End
  EmissionVolume = BoxEmissionVolume
    HalfSize = X:0 Y:0 Z:0
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem GimliManeEmbers1
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXEmbersLight.tga
    Lifetime = 100 100
    SortLevel = 1
    Size = 10 20
    BurstDelay = 2 5
    BurstCount = 1 1
  End
  Color = DefaultColor
    Color1 = R:128 G:64 B:00 0
    Color2 = R:0 G:0 B:0 50
    ColorScale = -5 0
  End
  Update = DefaultUpdate
    SizeRate = 6 6
    SizeRateDamping = 0.8 0.85
    AngleZ = -0.3 0.3
    AngularRateZ = -0.03 0.03
    AngularDamping = 0.99 0.99
  End
  Physics = DefaultPhysics
    Gravity = 0.008
    VelocityDamping = 0.9 0.9
    DriftVelocity = X:0 Y:0 Z:0.64
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = LineEmissionVolume
    IsHollow = Yes
    StartPoint = X:-22 Y:0 Z:8
    EndPoint = X:25 Y:0 Z:5
  End
  Draw = DefaultDraw
  End
  Wind = DefaultWind
    WindMotion = PingPong
    WindStrength = 0.5
    WindAngleChangeMin = 0.017453
    WindAngleChangeMax = 0.034907
    WindPingPongStartAngleMax = 0.785398
    WindPingPongEndAngleMin = 5.49779
    WindPingPongEndAngleMax = 6.28319
  End
End

FXParticleSystem GimliManeFlare1
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXLnzFlar1.tga
    Lifetime = 20 20
    SortLevel = 1
    Size = 20 20
    BurstCount = 1 2
  End
  Color = DefaultColor
    Color2 = R:128 G:64 B:00 2
    Color3 = R:0 G:0 B:0 20
    ColorScale = -15 -5
  End
  Update = DefaultUpdate
    SizeRateDamping = 1 1
    AngleZ = -5 5
    AngularRateZ = -0.05 0.05
    AngularDamping = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.9 1
    DriftVelocity = X:0 Y:0 Z:2
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = -0.4 -0.4
    Y = -0.4 -0.4
  End
  EmissionVolume = BoxEmissionVolume
    HalfSize = X:12 Y:7 Z:5
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem GimliAxeFlare1
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXLnzFlar1.tga
    Lifetime = 60 60
    SortLevel = 1
    Size = 35 45
    BurstCount = 1 2
  End
  Color = DefaultColor
    Color2 = R:128 G:64 B:00 5
    Color3 = R:0 G:0 B:0 30
    ColorScale = -5 0
  End
  Update = DefaultUpdate
    SizeRateDamping = 1 1
    AngleZ = -5 5
    AngularRateZ = -0.05 0.05
    AngularDamping = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 2.9 1
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = 0 2
    Y = 0 2
    Z = 0 2
  End
  EmissionVolume = LineEmissionVolume
    IsHollow = Yes
    EndPoint = X:0 Y:0 Z:70
  End
  Draw = DefaultDraw
  End
  Wind = DefaultWind
    WindMotion = Circular
    WindStrength = 1
    WindAngleChangeMin = 0.872665
    WindAngleChangeMax = 2.61799
  End
End

FXParticleSystem GimliWing1
  System
    Priority = ALWAYS_RENDER
    Shader = ALPHA
    ParticleName = EXCloud06.tga
    Lifetime = 175 175
    SortLevel = 1
    Size = 25 40
    BurstDelay = 3 7
    BurstCount = 1 2
    IsEmitAboveGroundOnly = Yes
  End
  Color = DefaultColor
    Color1 = R:128 G:64 B:00 1
    Color2 = R:128 G:64 B:00 35
  End
  Alpha = DefaultAlpha
    Alpha2 = 0.2 0.4 50
    Alpha3 = 0 0 100
  End
  Update = DefaultUpdate
    SizeRate = 2 4
    SizeRateDamping = 0.96 0.98
    AngleZ = 0 7
    AngularRateZ = -0.03 0.03
    AngularDamping = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.95 0.9
    DriftVelocity = X:0.08 Y:0.08 Z:0.8
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = 1 0.4
    Y = -0.4 0.4
    Z = -0.4 3
  End
  EmissionVolume = CylinderEmissionVolume
    IsHollow = Yes
    Radius = 8
  End
  Draw = DefaultDraw
  End
End

;>>>>>>>
;Weapons
;>>>>>>>

Weapon RohanGimliAxe
  LeechRangeWeapon      = Yes
  AttackRange           = 10.0
  RadiusDamageAffects   = ENEMIES NOT_SIMILAR
  MeleeWeapon           = Yes
  FireFX                = FX_BalrogSwordHit ; TEMPORARY
  DelayBetweenShots     = 250			; time between shots, msec
  PreAttackDelay        = 1000 	; 400 is sword swing delay time before contact with target.
  PreAttackType         = PER_SHOT ; Do the delay each time we attack a new target
  FiringDuration        = 600 	; Duration of the sword swing
	DamageNugget                        ; A basic Nugget that just does damage
		Damage			= 150
		Radius			= 22.0
		DamageType		= MAGIC
		DamageFXType	= ELECTRIC
		DeathType		= EXPLODED
	End
	MetaImpactNugget                    ; A Nugget that throws things back with force
		HeroResist			= 0.75
		ShockWaveAmount   = 50.0
		ShockWaveRadius   = 30.0.0
		ShockWaveTaperOff = 0.5
		ShockWaveZMult    = 1.050
	End
End

;>>>>>>>>>>>>>>>
;Ability Weapons
;>>>>>>>>>>>>>>>

Weapon GimliWave
	IdleAfterFiringDelay = 0
	AttackRange = 400
	MinimumAttackRange = 0.8
	WeaponSpeed = 301
	MinWeaponSpeed = 300
	MaxWeaponSpeed = 302
	ScaleWeaponSpeed = Yes
	RadiusDamageAffects = ENEMIES NOT_SIMILAR
	DelayBetweenShots = 5000
	PreAttackDelay        = 2600
	PreAttackType         = PER_ATTACK
      FireFX					= FX_EarthquakePhaseInitialWeapon
      ClearNuggets
	DamageNugget
		Damage			= 350
		Radius			= 200.0
		DamageType		= FLAME
		DamageFXType	= ELECTRIC
		DeathType		= BURNED
		DamageSpeed		= 180.0 ; must match the ShockWaveSpeed below
	End
	MetaImpactNugget
		ShockWaveAmount   = 150.0
		ShockWaveRadius   = 140.0
		ShockWaveTaperOff	= 1.0
		ShockWaveSpeed	  = 180.0
		ShockWaveZMult    = 1.000
	End
	MetaImpactNugget
		ShockWaveAmount   = 60.0
		ShockWaveRadius   = 280.0
		ShockWaveTaperOff	= 1.0
		ShockWaveSpeed	  = 180.0
		ShockWaveZMult    = 0.9
	End
	MetaImpactNugget
		ShockWaveAmount   = 50.0
		ShockWaveRadius   = 380.0
		ShockWaveTaperOff	= 1.0
		ShockWaveSpeed	  = 180.0
		ShockWaveZMult    = 0.8
	End
End

Weapon GimliSmashWeapon ; Big Blue Ring Blast
	IdleAfterFiringDelay = 0
	RadiusDamageAffects = ENEMIES NOT_SIMILAR
	DelayBetweenShots = 5000               ; time between shots, msec
	PreAttackDelay        = 2600
	PreAttackType         = PER_ATTACK ; Do the delay each time we attack a new target
	PreAttackFX           = FX_GloinShatterPre
	FireFX                = FX_GloinShatterhammer
	FiringDuration      = 1400
	DamageNugget                        ; A basic Nugget that just does damage
		Damage			= GANDALF_WORD_OF_POWER_DAMAGE
		Radius			= GLOIN_SMASH_WEAPON_RADIUS
		DamageType		= MAGIC
		DamageFXType	= MAGIC
		DeathType		= EXPLODED
		DamageSpeed		= 700.0 ; must match the ShockWaveSpeed below
	End
	MetaImpactNugget                    ; A Nugget that throws things back with force
;		HeroResist			= .75
		ShockWaveAmount   = 70.0
		ShockWaveRadius   = 500.0
		ShockWaveTaperOff = 1.0
		ShockWaveZMult    = 1.000
		ShockWaveSpeed	  = 700.0 
	End
End

Weapon DwarvenGimliSlamWeapon
	RadiusDamageAffects		= ENEMIES
	LeechRangeWeapon		= Yes
	CanFireWhileMoving		= No
	AttackRange			= 30.0
	MeleeWeapon			= Yes
	WeaponSpeed           = 799999.2        ; dist/sec (huge value == effectively instant)
	FireFX				= FX_GloinSlam
	DelayBetweenShots     = GLOIN_DELAYBETWEENSHOTS 	; time between shots, msec
	PreAttackDelay        = GLOIN_PREATTACKDELAY 	; 433 is natural time of the stabbing animation.
	PreAttackType         = PER_SHOT ; Do the delay each time we attack a new target
	FiringDuration        = GLOIN_FIRINGDURATION 		; min 600 for anim
	DamageDealtAtSelfPosition = Yes				; A melee based AoE.  Arc radiates from me, not them

	; Crush damage.
	DamageNugget								; A basic Nugget that just does damage
		Damage			= GLOIN_SLAM_DAMAGE
		Radius			= 50.0
		DamageArc		= 75
		DelayTime		= 0
		DamageType		= CRUSH
		DamageFXType	= MAGIC
		DeathType		= NORMAL
	End

	; SIEGE damage. - Changing all structural to siege damage. -GB
	DamageNugget								; A basic Nugget that just does damage
		Damage			= GLOIN_SLAM_DAMAGE_STRUCTURAL
		Radius			= 75.0
		DamageArc		= 75
		DelayTime		= 0
		DamageType		= SIEGE
		DamageFXType	= MAGIC
		DeathType		= NORMAL
	End

	; Push back
	MetaImpactNugget							; A Nugget that throws things back with force
;		HeroResist			= .00
		ShockWaveAmount		= 60
		ShockWaveRadius		= 360
		ShockWaveArc		= 75				; Should generally be equal to damage arc
		ShockWaveTaperOff	= 1.0
		ShockWaveSpeed		= 0.0
		ShockWaveZMult		= 1.6
	End
End

Weapon RohanGimliAxeThrown 
	AttackRange         = 500.0
	WeaponSpeed = 161         ; dist/sec 
	MinWeaponSpeed = 201
	MaxWeaponSpeed = 241      ; dist/sec Upper limit on scaling, when attacking past nominal "max" range
	FireFX = FX_GimliAxeThrow
	ScaleWeaponSpeed = Yes ; Used for lob weapons, scales speed proportional to range
	HitPercentage = 100
	ScatterRadius     = 0.0      ;When this weapon misses it can randomly miss by as much as this distance.
	DelayBetweenShots = 0        ; time between shots, msec
  	
    AntiAirborneVehicle	= Yes ; added so he can attack fellbeast and birds
    AntiAirborneMonster	= Yes ; added so he can attack fellbeast and birds
  	
  	ClipSize			= 1			; how many shots in a Clip (0 == infinite)
	ClipReloadTime		= 10000     ; how long to reload a Clip, msec
	AutoReloadsClip		= Yes
	;IdleAfterFiringDelay = 2500;
	;HoldAfterFiringDelay = 2500 ; So I don't move while the weapon needs to complete
    InstantLoadClipOnActivate = Yes

	PreAttackDelay        = 1500; 1467             ; 1467 is the prep time for archer.
	PreAttackType         = PER_SHOT ; Do the delay each time we attack a new target
	FiringDuration      = 1600; 1567    ; Duration of the archer firing shot is 500ms.

	ProjectileNugget
		ProjectileTemplateName = LurtzArrowProjectile
		WarheadTemplateName = LurtzStunBowWarhead
	End
End

Weapon RohanGimliSuperAxe  ; BALANCE Gimli Axe Weapon
  LeechRangeWeapon      = Yes
  AttackRange           = 20.0
  MeleeWeapon           = Yes
  WeaponSpeed           = 799999.2        ; dist/sec (huge value == effectively instant)
  DelayBetweenShots     = GIMLI_DELAYBETWEENSHOTS_SUPER 	; time between shots, msec
  PreAttackDelay        = GIMLI_PREATTACKDELAY_SUPER 	; 433 is natural time of the stabbing animation.
  PreAttackType         = PER_SHOT ; Do the delay each time we attack a new target
  FiringDuration        = GIMLI_FIRINGDURATION_SUPER 		; min 600 for anim
  FireFX                = FX_GondorSwordHit

  DamageNugget
    Damage			= GIMLI_DAMAGE_SUPER
    DamageArc 		= 180
	Radius			= 10.0
    DelayTime		= 0
    DamageType		= MAGIC
    DamageFXType	= MAGIC
    DeathType		= BURNED
  End

  MetaImpactNugget                    ; A Nugget that throws things back with force
;	HeroResist			= .99
	ShockWaveAmount		= 50
    ShockWaveRadius		= 30
    ShockWaveArc		= 180
    ShockWaveTaperOff = 1
  End
End

;>>>>>>>>>>>>>>>
;Gimli XP Levels
;>>>>>>>>>>>>>>>

ChildObject DwarvenGloin DwarvenGimli
End

ExperienceLevel	GloinLevel1
	TargetNames						=	DwarvenGloin
	RequiredExperience				=	1	
	ExperienceAward					=	GLOIN_LVL1_EXP_AWARD
	Rank							=	1
	Upgrades						=	Upgrade_EnableDwarvenGloinSlam
	SelectionDecal
		Texture						=	decal_hero_good	
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40 ;16
		MaxRadius					=	200 ;16
		MaxSelectedUnits			=	40 ;1
	End	
End	

ExperienceLevel	GloinLevel2
	TargetNames						=	DwarvenGloin
	RequiredExperience				=	GLOIN_LVL2_EXP_NEEDED 
	ExperienceAward					=	GLOIN_LVL2_EXP_AWARD
	AttributeModifiers				=	HeroLevelUpDamage1
	Rank							=	2'
	Upgrades						=	Upgrade_GimliLeapTrigger
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	Upgrades						=	
	SelectionDecal
		Texture						=	decal_hero_good	
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40 ;16
		MaxRadius					=	200 ;16
		MaxSelectedUnits			=	40 ;1
	End	
END	

ExperienceLevel	GloinLevel3
	TargetNames						=	DwarvenGloin
	RequiredExperience				=	GLOIN_LVL3_EXP_NEEDED 
	ExperienceAward					=	GLOIN_LVL3_EXP_AWARD	
	AttributeModifiers				=	HeroLevelUpDamage2
	Rank							=	3
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	SelectionDecal
		Texture						=	decal_hero_good	
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40 ;16
		MaxRadius					=	200 ;16
		MaxSelectedUnits			=	40 ;1
	End	
END	

ExperienceLevel	GloinLevel4
	TargetNames						=	DwarvenGloin
	RequiredExperience				=	GLOIN_LVL4_EXP_NEEDED 
	ExperienceAward					=	GLOIN_LVL4_EXP_AWARD	
	AttributeModifiers				=	HeroLevelUpDamage3
	Rank							=	4
	Upgrades						=	Upgrade_EnableDwarvenGloinShakeFoundation
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	SelectionDecal
		Texture						=	decal_hero_good	
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40 ;16
		MaxRadius					=	200 ;16
		MaxSelectedUnits			=	40 ;1
	End	
END	

ExperienceLevel	GloinLevel5
	TargetNames						=	DwarvenGloin
	RequiredExperience				=	GLOIN_LVL5_EXP_NEEDED 
	ExperienceAward					=	GLOIN_LVL5_EXP_AWARD	
	AttributeModifiers				=	HeroLevelUpDamage4
	Rank							=	5
	Upgrades						=	Upgrade_GimliSlayerTrigger
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	SelectionDecal
		Texture						=	decal_hero_good	
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40 ;16
		MaxRadius					=	200 ;16
		MaxSelectedUnits			=	40 ;1
	End	
END	

ExperienceLevel	GloinLevel6
	TargetNames						=	DwarvenGloin
	RequiredExperience				=	GLOIN_LVL6_EXP_NEEDED 
	ExperienceAward					=	GLOIN_LVL6_EXP_AWARD	
	AttributeModifiers				=	HeroLevelUpDamage5
	Rank							=	6
	Upgrades						=	
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40 ;16
		MaxRadius					=	200 ;16
		MaxSelectedUnits			=	40 ;1
	End	
END	

ExperienceLevel	GloinLevel7
	TargetNames						=	DwarvenGloin
	RequiredExperience				=	GLOIN_LVL7_EXP_NEEDED 
	ExperienceAward					=	GLOIN_LVL7_EXP_AWARD	
	AttributeModifiers				=	HeroLevelUpDamage6
	Rank							=	7
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40 ;16
		MaxRadius					=	200 ;16
		MaxSelectedUnits			=	40 ;1
	End	
END	

ExperienceLevel	GloinLevel8
	TargetNames						=	DwarvenGloin
	RequiredExperience				=	GLOIN_LVL8_EXP_NEEDED 
	ExperienceAward					=	GLOIN_LVL8_EXP_AWARD	
	AttributeModifiers				=	HeroLevelUpDamage7
	Rank							=	8
	Upgrades						=	Upgrade_EnableGloinSmash
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40 ;16
		MaxRadius					=	200 ;16
		MaxSelectedUnits			=	40 ;1
	End	
END	

ExperienceLevel	GloinLevel9
	TargetNames						=	DwarvenGloin
	RequiredExperience				=	GLOIN_LVL9_EXP_NEEDED 
	ExperienceAward					=	GLOIN_LVL9_EXP_AWARD	
	AttributeModifiers				=	HeroLevelUpDamage8
	Rank							=	9
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40 ;16
		MaxRadius					=	200 ;16
		MaxSelectedUnits			=	40 ;1
	End
END	

ExperienceLevel	GloinLevel10
	TargetNames						=	DwarvenGloin
	RequiredExperience				=	GLOIN_LVL10_EXP_NEEDED 
	ExperienceAward					=	GLOIN_LVL10_EXP_AWARD	
  	AttributeModifiers				=	HeroLevelUpDamage9
	Rank							=	10
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	Upgrades						=	Upgrade_GandalfWordOfPower
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40 ;16
		MaxRadius					=	200 ;16
		MaxSelectedUnits			=	40 ;1
	End	
END	
	
;<<<<<<<<<<<<<<<<<<<<<<<<
; Gimli Ability Timers
;>>>>>>>>>>>>>>>>>>>>>>>>

SpecialPower SpecialAbilityGimliWord
	Enum			= SPECIAL_WORD_OF_POWER
	ReloadTime		= 400000
	PublicTimer		= No
End

SpecialPower SpecialAbilityGimliSmash
	Enum			= SPECIAL_GENERAL_TARGETLESS
	ReloadTime		= 200000
	RadiusCursorRadius 	= GLOIN_SMASH_WEAPON_RADIUS
	PublicTimer		= No
End

SpecialPower SpecialAbilityGimliBombard
	Enum				= SPECIAL_SPELL_BOOK_BOMBARD
	ReloadTime       	= 240000 // // in milliseconds	
	RadiusCursorRadius	= 200
	InitiateAtLocationSound = CaH_DwarfBombardStartMS
End

SpecialPower SpecialAbilitySpawnWyrm
	Enum						= SPECIAL_SPELL_BOOK_AWAKEN_WYRM
	Flags						= WATER_OK NO_FORBIDDEN_OBJECTS RESPECT_RECHARGE_TIME_DISCOUNT
	ReloadTime					= SPELL_RECHARGE_TIME_TIER_3							; in milliseconds
	RadiusCursorRadius			= 30.0
	ViewObjectDuration			= 5000
	ViewObjectRange				= 100
	InitiateAtLocationSound  = WyrmSummonMS
	ForbiddenObjectFilter	= NO_SUMMON_NEAR_OBJECT_FILTER
	ForbiddenObjectRange	= 30.0
End

;<<<<<<<<<<<<<<<<<<<<<<
;Gimli Commandbuttons
;>>>>>>>>>>>>>>>>>>>>>>	

CommandButton Command_SpellBookEarthquake
  Command                 = SPECIAL_POWER 
  SpecialPower            = SpecialAbilityGimliWord
  Options                 = NONE
  TextLabel               = CONTROLBAR:WrathOfTheGolem
  ButtonImage             = SBGood_Earthquake
  ButtonBorderType        = ACTION 
  DescriptLabel           = CONTROLBAR:ToolTipWrathOfTheGolem
  AutoAbility			  = Yes
  PresetRange			  = 120.0
  InPalantir			  = Yes
End

CommandButton Command_SpecialAbilitySlayer
	Command				= SPECIAL_POWER 
	SpecialPower		= SpecialAbilityGimliHeroMode
	TextLabel			= CONTROLBAR:Enflame
	ButtonImage			= HSGimliSlayer
	ButtonBorderType	= ACTION 
	DescriptLabel		= CONTROLBAR:ToolTipEnflame
	UnitSpecificSound	= GimliModeSlayerMS
	InPalantir			= Yes
	AutoAbility			= Yes
End

CommandButton Command_SpecialAbilityGloinSmash
  Command                 = SPECIAL_POWER 
  SpecialPower            = SpecialAbilityGimliSmash
  Options				  = NEED_TARGET_POS
  TextLabel               = CONTROLBAR:GimliWave
  ButtonImage             = SBGood_Earthquake
  RadiusCursorType		  = LeapRadiusCursor
  CursorName		      = Bombard
  InvalidCursorName       = GenericInvalid
  ButtonBorderType        = ACTION 
  DescriptLabel           = CONTROLBAR:ToolTipGimliWave
  InPalantir			  = Yes
End

CommandButton Command_CreateAHero_Bombard_Level3
	Command				= SPECIAL_POWER
    SpecialPower		= SpecialAbilityGimliBombard
	Options				= NEED_TARGET_POS 
	TextLabel			= CONTROLBAR:gimbomb
    ButtonImage			= SBGood_Bombard
	ButtonBorderType	= ACTION
	DescriptLabel		= CONTROLBAR:Tooltipgimbomb
    RadiusCursorType	= RainOfFireRadiusCursor
    CursorName			= AttackObj
    InvalidCursorName	= GenericInvalid
	InPalantir			= Yes

	CreateAHeroUIAllowableUpgrades			  =	Upgrade_CreateAHero_ClassDwarf
	CreateAHeroUIMinimumLevel				  = 10
	CreateAHeroUIPrerequisiteButtonName = Command_CreateAHero_Bombard_Level2
End

CommandButton Command_SpellBookAwakenWyrm
  Command           = SPECIAL_POWER
  SpecialPower      = SpecialAbilitySpawnWyrm
  TextLabel         = CONTROLBAR:SpawnWyrm
  ButtonImage       = SBEvil_AwakenWyrm
  Options           = NEED_TARGET_POS CONTEXTMODE_COMMAND
  RadiusCursorType  = WyrmRadiusCursor
  CursorName        = Bombard
  InvalidCursorName = GenericInvalid  
  ButtonBorderType  = ACTION 
  DescriptLabel     = CONTROLBAR:TooltipSpawnWyrm
  InPalantir	    = Yes
  ;UnitSpecificSound = AragornVoiceSummonOathbreakers
  ;AutoAbility		= Yes ;
  ;TriggerWhenReady	= Yes ;
End

CommandButton Command_GimliAxeThrow
  Command                 = FIRE_WEAPON
  WeaponSlot              = TERTIARY
  Options                 = NEED_TARGET_ENEMY_OBJECT NO_PLAY_UNIT_SPECIFIC_SOUND_FOR_AUTO_ABILITY ; NEED_TARGET_NEUTRAL_OBJECT CONTEXTMODE_COMMAND
  TextLabel               = CONTROLBAR:Longshoot
  ButtonImage             = HSGimliAxeThrow
  CursorName              = Bombard
  ButtonBorderType        = ACTION 
  DescriptLabel           = CONTROLBAR:ToolTipLongshoot
  InvalidCursorName       = GenericInvalid
  AutoAbility			  = Yes  
  UnitSpecificSound       = GimliVoiceModeAxeThrow
  SetAutoAbilityUnitSound = GimliVoiceModeAxeThrow ; Only when he is set to use it, not each time he uses it
  InPalantir			  = Yes
End

;>>>>>>>>>>>>>>>>>>>>>
;Gimli NewCommandSet
;<<<<<<<<<<<<<<<<<<<<<

CommandSet NewGimliCommandSet
  1  = Command_GimliAxeThrow  
  2  = Command_CreateAHero_Bombard_Level3
  3  = Command_SpecialAbilitySlayer
  4  = Command_SpellBookAwakenWyrm
  5  = Command_SpecialAbilityGloinSmash
  6  = Command_SpellBookEarthquake
	12 = Command_CaptureBuilding
	13 = Command_AttackMove
	14 = Command_Stop
        
End

Object DwarvenGloin
 CommandSet = NewGimliCommandSet
End

;>>>>>>>>>>>
;MISC. Stuff
;>>>>>>>>>>>

;>>>>>>>>>>>>>>>>>
;Modules to Anims.
;>>>>>>>>>>>>>>>>>
Object DwarvenGloin

	AddModule
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_wpEnabler
		SpecialPowerTemplate = SpecialAbilityGimliWord
		TriggeredBy = Upgrade_GandalfWordOfPower
	End
	End
	AddModule
	Behavior = SpecialPowerModule ModuleTag_wpStarter       
		SpecialPowerTemplate      = SpecialAbilityGimliWord
		UpdateModuleStartsAttack  = Yes
		StartsPaused		  	  = Yes
	End
	End
	AddModule
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_wpFireUpdate   
		SpecialPowerTemplate    = SpecialAbilityGimliWord
		WhichSpecialWeapon		= 1
		SkipContinue			= Yes

		UnpackTime              = 200 
		PackTime                = 1	
		FreezeAfterTriggerDuration = 2500 ; Hold AI for this long after we fire.
		
		AwardXPForTriggering    = 0		
		StartAbilityRange		= 80.0
		
		SpecialWeapon			= GimliWave
	End
	End
	AddModule
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_SmashEnabler
		SpecialPowerTemplate = SpecialAbilityGimliSmash
		TriggeredBy = Upgrade_EnableGloinSmash
	End
	End
	AddModule
	Behavior = SpecialPowerModule ModuleTag_SmashStarter       
		SpecialPowerTemplate      = SpecialAbilityGimliSmash
		UpdateModuleStartsAttack  = Yes
		StartsPaused		  	  = Yes
		InitiateSound				= GloinVoiceGenericSpecialAbility
	End
	End
	AddModule
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_SmashWeaponFireUpdate   
		SpecialPowerTemplate    = SpecialAbilityGimliSmash
		SpecialWeapon			= GimliSmashWeapon
		WhichSpecialWeapon		= 3			; Corresponds to SPECIAL_WEAPON_THREE
		StartAbilityRange		= 1.0
		
		SkipContinue			= Yes
		UnpackTime				= 400		; Trigger on frame 60 (of 100)
		PackTime				= 1333		; Remaining 40 frames (of 100)
		MustFinishAbility		= Yes
	End
	End
	AddModule
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_gimbomb
	SpecialPowerTemplate = SpecialAbilityGimliBombard
	TriggeredBy = Upgrade_GimliLeapTrigger
	End
	End
	AddModule
	Behavior = OCLSpecialPower ModuleTag_gimbomb1
	SpecialPowerTemplate = SpecialAbilityGimliBombard
	OCL                  = OCL_CreateAHeroBombardSeed_Level3
	CreateLocation       = USE_SECONDARY_OBJECT_LOCATION
	NearestSecondaryObjectFilter = NONE SAME_PLAYER +CASTLE_KEEP 
	StartsPaused		 = Yes
	End
	End
	AddModule	
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_gimslamEnabler
		SpecialPowerTemplate = SpecialAbilityDwarvenGloinSlam
		TriggeredBy = Upgrade_GandalfLightningSword
	End
	End
	AddModule
	Behavior = SpecialPowerModule ModuleTag_gimslamStarter       
		SpecialPowerTemplate		= SpecialAbilityDwarvenGloinSlam
		UpdateModuleStartsAttack	= Yes
		StartsPaused				= Yes
		InitiateSound				= GloinVoiceGenericSpecialAbility
	End
	End
	AddModule
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_aodEnabler
		SpecialPowerTemplate = SpecialAbilitySpawnWyrm
		TriggeredBy = Upgrade_GimliSlayerTrigger
	End
	End
	AddModule
	Behavior = OCLSpecialPower ModuleTag_OCLSpecialPower
		SpecialPowerTemplate	= SpecialAbilitySpawnWyrm
		OCL						= OCL_Wyrm
		CreateLocation			= CREATE_AT_LOCATION
		StartsPaused			= Yes
		SetModelCondition		= ModelConditionState:USER_1
		SetModelConditionTime	= 8.1
	End
	End
		ReplaceModule ModuleTag_01
	Draw = W3DScriptedModelDraw ModuleTag_011

	  OkToChangeModelColor = Yes
	  

   StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD

		DefaultModelConditionState
			Model               = RUGimli_SKN
			Skeleton            = RUGimli_SKL
			ParticleSysBone     = B_AXEBONE AxeHaze FollowBone:Yes
			ParticleSysBone     = B_AXEBONE AxeSword FollowBone:Yes
			WeaponLaunchBone    = TERTIARY AXE02
		End
		
		ModelConditionState = WEAPONSET_TOGGLE_1
			Model               = RUGimli_SKN
			Skeleton            = RUGimli_SKL
			ParticleSysBone = MANEBONE GimliManeFlare1 FollowBone:yes
			ParticleSysBone = MANEBONE GimliManeEmbers1 FollowBone:yes
			ParticleSysBone = MANEBONE GimliManeFire1 FollowBone:yes
			ParticleSysBone = BAT_JAW GimliManeFire1 FollowBone:yes
			ParticleSysBone = BAT_HEAD GimliManeFire1 FollowBone:yes
			ParticleSysBone = RTWINGBONE GimliWing1 FollowBone:yes
			ParticleSysBone = LFWINGBONE GimliWing1 FollowBone:yes
			ParticleSysBone = B_AXEBONE GimliAxeFlare1 FollowBone:Yes
		End

		AnimationState        = STUNNED_FLAILING
			Animation           = FLYA
				AnimationName     = RUGimli_FLYA
				AnimationMode     = LOOP
				AnimationSpeedFactorRange	= 0.3 0.5
			End
			Flags               = RANDOMSTART
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "DwarfToss" then CurDrawableSetTransitionAnimState("TRANS_EndDwarfToss") end
			EndScript
		End
		
		AnimationState        = DYING SPLATTED
			Animation           = LNDB
				AnimationName     = RUGimli_LNDA
				AnimationMode     = ONCE
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "DwarfToss" then CurDrawableSetTransitionAnimState("TRANS_EndDwarfToss") end
			EndScript
		End

		AnimationState        = DYING
			Animation           = DIEA
				AnimationName     = RUGimli_DIEA
				AnimationMode     = ONCE
			End
			Animation           = DIEC
				AnimationName     = RUGimli_DIEC
				AnimationMode     = ONCE
			End
;			Animation           = DIEB
;				AnimationName     = RUGimli_DIEB
;				AnimationMode     = ONCE
;			End		
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "DwarfToss" then CurDrawableSetTransitionAnimState("TRANS_EndDwarfToss") end
			EndScript
		End
		
		AnimationState        = STUNNED_STANDING_UP
			Animation           = GTPA
				AnimationName     = RUGimli_GTPA
				AnimationMode     = ONCE
			End
		End
	
		AnimationState        = STUNNED
			Animation           = LNDA
				AnimationName     = RUGimli_LNDA
				AnimationMode     = ONCE
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "DwarfToss" then CurDrawableSetTransitionAnimState("TRANS_EndDwarfToss") end
			EndScript
		End

		AnimationState						= PARALYZED
			Animation
				AnimationName				= RUGimli_IDLA
				AnimationMode				= LOOP
			End
		End

		
			
	;;======= MOVING
	
	
	AnimationState        = MOVING FIRING_OR_PREATTACK_A
			ShareAnimation		= Yes
			Animation           = RunAndFire
				AnimationName       = RUGimli_ATRA
				AnimationMode       = LOOP
			End
			Flags               = RANDOMSTART 
		End

		AnimationState				=	MOVING ATTACKING
			Animation				=	RUNB
				AnimationName		=	RUGimli_RUNB
				AnimationMode		=	LOOP
			End
			Flags					=	RANDOMSTART
			;ParticleSysBone		=	None InfantryDustTrails
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "DwarfToss" then CurDrawableSetTransitionAnimState("TRANS_EndDwarfToss") end
			EndScript
		End
	
		AnimationState				=	MOVING
			Animation				=	RUNA
				AnimationName		=	RUGimli_RUNA
				AnimationMode		=	LOOP
			End
			Flags					=	RANDOMSTART
			;ParticleSysBone		=	None InfantryDustTrails
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "DwarfToss" then CurDrawableSetTransitionAnimState("TRANS_EndDwarfToss") end
			EndScript
		End


;;------------------ ATTACKING  -------------------------------

; AXE THROW
		AnimationState        =  FIRING_OR_PREATTACK_C
			Animation           = SPCA
				AnimationName     = RUGimli_SPCA
				AnimationMode     = ONCE
;				UseWeaponTiming		= Yes
			End
			FrameForPristineBonePositions = 42;44
			;ParticleSysBone     = None MeleeDust
			BeginScript
				CurDrawableShowSubObject("AXE02")
				Prev = CurDrawablePrevAnimationState()
				if Prev == "DwarfToss" then CurDrawableSetTransitionAnimState("TRANS_EndDwarfToss") end
			EndScript
		End

		AnimationState        =  FIRING_OR_PREATTACK_B; WEAPONLOCK_SECONDARY
			Animation           = ATKA
				AnimationName     = RUGimli_ATKD
				AnimationMode     = ONCE
				UseWeaponTiming		= Yes
			End
			
			;ParticleSysBone None MeleeDust
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "DwarfToss" then CurDrawableSetTransitionAnimState("TRANS_EndDwarfToss") end
			EndScript
		End
	
		AnimationState        =  FIRING_OR_PREATTACK_A
			Animation           = ATKA
				AnimationName     = RUGimli_ATKA
				AnimationMode     = ONCE
				UseWeaponTiming		= Yes
			End
			Animation           = ATKB
				AnimationName     = RUGimli_ATKB
				AnimationMode     = ONCE
				UseWeaponTiming		= Yes
			End		
			Animation           = ATKC
				AnimationName     = RUGimli_ATKC
				AnimationMode     = ONCE
				UseWeaponTiming		= Yes
			End
			
			;ParticleSysBone None MeleeDust
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "DwarfToss" then CurDrawableSetTransitionAnimState("TRANS_EndDwarfToss") end
			EndScript
		End

	;leap animations 		
		AnimationState			= SPECIAL_WEAPON_TWO UNPACKING
			Animation			= GettingReadyToLeap
				AnimationName	= RUGimli_LEPA
				AnimationMode   = ONCE
			End
		End

		AnimationState        =  ABOUT_TO_HIT		;using Gimli Leap
		StateName			= State_AboutToHitGround
			Animation           = Leap
				AnimationName     = RUGimli_LEPC  
				AnimationMode     = ONCE
			;	UseWeaponTiming		= Yes
			End
		End


		AnimationState        = THROWN_PROJECTILE
			Animation           = LEPB
				AnimationName     = RUGimli_LEPB
				AnimationMode     = LOOP
				AnimationBlendTime = 20
			End
		End

	
;;-------------------- HIT REACTIONS --------------------------

		AnimationState = HIT_REACTION
			Animation = Hit_Level_1_a
				AnimationName = RUGimli_HITA
				AnimationMode = ONCE
			End
		End
		
;;------------ EMOTIONS ---------------------------------------

;;====== LEVELED
		AnimationState				= LEVELED 						; This state clears itself in 3 seconds
			Animation				= LevelUp
				AnimationName		= RUGimli_CHRB
				AnimationMode		= ONCE
			End
		End

;;====== CELEBRATING
		AnimationState			= EMOTION_CELEBRATING
			Animation           = CHRA
				AnimationName   = RUGimli_CHRA
				AnimationMode   = ONCE
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End

;;====== TAUNTING
		AnimationState			= EMOTION_TAUNTING
			Animation           = TNTA
				AnimationName   = RUGimli_TNTA
				AnimationMode   = ONCE
			End
			Animation           = TNTB
				AnimationName   = RUGimli_TNTB
				AnimationMode   = ONCE
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End
		
		AnimationState					= EMOTION_ALERT
			Animation					= Ready
				AnimationName			= RUGimli_IDLA
				AnimationMode			= LOOP
				AnimationBlendTime  =   15
			End
			BeginScript
				CurDrawableHideSubObject("AXE02")
;				Prev = CurDrawablePrevAnimationState()
;				if Prev == "BORED"		then CurDrawableSetTransitionAnimState("Transition_BoredToReady") end
;				if Prev == "SELECTED"	then CurDrawableSetTransitionAnimState("Transition_SelectedToReady") end
				if Prev == "State_AboutToHitGround" then CurDrawableSetTransitionAnimState("TRANS_AboutToHitGround_To_Idle") end
			EndScript

		End
		
		AnimationState			= RAISING_FLAG
			Animation           = CHRA
				AnimationName   = RUGimli_CHRA
				AnimationMode   = LOOP
			End
		End

;;------------------- SELECTED STATES -------------------------
		
		AnimationState				=	SELECTED
			StateName				=	AtAttentionIdle
			SimilarRestart			=   Yes			
			Animation				=	ATNB
				AnimationName		=	 RUGimli_ATNB
				AnimationMode		=	LOOP
			End
			BeginScript
				CurDrawableHideSubObject("AXE02")
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Idle" then CurDrawableSetTransitionAnimState("TRANS_Select") end
				if Prev == "AtAttentionIdle" then CurDrawableSetTransitionAnimState("TRANS_Select") end
				if Prev == "State_AboutToHitGround" then CurDrawableSetTransitionAnimState("TRANS_AboutToHitGround_To_Idle") end
			EndScript
		End
							
;;--------------- IDLE STATES ---------------------------------

		IdleAnimationState
			StateName				= STATE_Idle
			Animation           = IDLB
				AnimationName     = RUGimli_IDLB
				AnimationMode     = ONCE
				AnimationPriority = 30
			End
			Animation           = IDLF
				AnimationName     = RUGimli_IDLF
				AnimationMode     = ONCE
				AnimationPriority = 5
			End		
			Animation           = IDLD
				AnimationName     = RUGimli_IDLD
				AnimationMode     = ONCE
				AnimationPriority = 4
			End
			Animation           = IDLG
				AnimationName     = RUGimli_IDLG
				AnimationMode     = ONCE
				AnimationPriority = 2
			End
			Animation           = IDLH
				AnimationName     = RUGimli_IDLH
				AnimationMode     = ONCE
				AnimationPriority = 1
			End		
			Animation           = IDLC
				AnimationName     = RUGimli_IDLC
				AnimationMode     = ONCE
				AnimationPriority = 1
			End
			Animation           = IDLE
				AnimationName     = RUGimli_IDLE
				AnimationMode     = ONCE
				AnimationPriority = 1
			End
			
			BeginScript
				CurDrawableHideSubObject("AXE02")
				Prev = CurDrawablePrevAnimationState()
				if Prev == "DwarfToss" then CurDrawableSetTransitionAnimState("TRANS_EndDwarfToss") end
				if Prev == "AtAttentionIdle" then CurDrawableSetTransitionAnimState("TRANS_SelectedToIdle") end
				if Prev == "State_AboutToHitGround" then CurDrawableSetTransitionAnimState("TRANS_AboutToHitGround_To_Idle") end
			EndScript
		End

		
;---Transitions-------------------------------------

		TransitionState       = TRANS_EndDwarfToss
			Animation           = TOS4
				AnimationName     = RUGimli_TOS4
				AnimationMode     = ONCE
			End
		End	

		TransitionState       = TRANS_SelectedToIdle	
			Animation           = ATNC
				AnimationName     = RUGimli_ATNC
				AnimationMode     = ONCE
				AnimationSpeedFactorRange = 0.7 1.3
			End
		End
		
		TransitionState				=	TRANS_Select
			Animation				=	ATNA
				AnimationName		=	 RUGimli_ATNA
				AnimationMode		=	ONCE
			End
		End
	
		TransitionState = TRANS_AboutToHitGround_To_Idle
			Animation = SplashAtEndOfJump
				AnimationName = RUGimli_LEPC
				AnimationMode = ONCE
				;AnimationBlendTime = 0
			End
			Flags = MAINTAIN_FRAME_ACROSS_STATES
		End
		
	End
	End
End

;>>>>>>>>>>>>
;Gimli Armour
;>>>>>>>>>>>>

Armor NewGimliArmour
  Armor = DEFAULT		 20%
  Armor = CRUSH			 40%
  Armor = SLASH			 10%
  Armor = URUK			 10%
  Armor = PIERCE		  5%
  Armor = SIEGE			 60%
  Armor = STRUCTURAL		 60%
  Armor = HERO			 80%
  Armor = MAGIC			 30%
  Armor = HERO_RANGED		 30%
  Armor = FLAME			 10%
  Armor = LOGICAL_FIRE		 10%
  Armor = SPECIALIST    	 50%
End

;<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;						   Gandalf
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

;OH MY GOD!! This was the freaking hardest power to do. Gandalf's Red Lightning!It kept shooting out his back! Strangely....

;>>>>>>>>>>>>
; FX Effects
;<<<<<<<<<<<<

;---Fire Wave---

FXList FX_GandalfPreAttackBlastReal
  ParticleSystem
    Name = GandalfBlastInitialWave
    Offset = X:0.0 Y:0.0 Z:20.0
  End
  ParticleSystem
    Name = GandalfBlastInitialCenter
    Offset = X:0.0 Y:0.0 Z:20.0
  End
  ParticleSystem
    Name = GandalfBlastInitialVortex
    Offset = X:0.0 Y:0.0 Z:20.0
  End
  ParticleSystem
    Name = GandalfBlastRipple
    Offset = X:0.0 Y:0.0 Z:0.0
  End
  Sound
    Name = GandalfSpellVoice
  End
End

FXParticleSystem GandalfBlastInitialCenter
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXLnzFlar1.tga
    Lifetime = 40 40
    SystemLifetime = 20
    SortLevel = 1
    Size = 5 5
    BurstDelay = 5 5
    BurstCount = 1 1
    InitialDelay = 20 20
  End
  Color = DefaultColor
    Color2 = R:249 G:253 B:172 20
    Color3 = R:0 G:0 B:0 40
  End
  Update = DefaultUpdate
    SizeRate = 2 2
    SizeRateDamping = 1.03 1.03
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.75 0.8
  End
  EmissionVelocity = OutwardEmissionVelocity
  End
  EmissionVolume = LineEmissionVolume
    StartPoint = X:0 Y:0 Z:8
    EndPoint = X:0 Y:0 Z:8
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem GandalfBlastInitialVortex
  System
    Priority = HIGH_OR_ABOVE
    ParticleName = EXLnzFlar2.tga
    Lifetime = 40 40
    SystemLifetime = 20
    SortLevel = 1
    Size = 5 5
    BurstDelay = 1 1
    BurstCount = 20 20
    IsParticleUpTowardsEmitter = Yes
  End
  Color = DefaultColor
    Color2 = R:249 G:253 B:172 5
  End
  Update = DefaultUpdate
    SizeRateDamping = 1 1
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 1.1 1.1
  End
  EmissionVelocity = OutwardEmissionVelocity
    Speed = -0.4 -0.4
  End
  EmissionVolume = CylinderEmissionVolume
    IsHollow = Yes
    Radius = 240
    Length = 16
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem GandalfBlastInitialWave
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXRing01.tga
    Lifetime = 25 25
    SystemLifetime = 45
    SortLevel = 1
    Size = 400 400
    StartSizeRate = 1 1
    BurstDelay = 2 2
    BurstCount = 1 1
    IsGroundAligned = Yes
  End
  Color = DefaultColor
    Color2 = R:249 G:253 B:172 10
    Color3 = R:0 G:0 B:0 22
    ColorScale = -20 20
  End
  Update = DefaultUpdate
    SizeRate = -10 -10
    SizeRateDamping = 1.05 1.05
    AngleZ = -180 180
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.75 0.8
  End
  EmissionVelocity = OutwardEmissionVelocity
    Speed = -4 -4
    OtherSpeed = -4 -4
  End
  EmissionVolume = LineEmissionVolume
    IsHollow = Yes
    StartPoint = X:0 Y:0 Z:-8
    EndPoint = X:0 Y:0 Z:10
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem GandalfBlastRipple
  System
    Priority = VERY_LOW_OR_ABOVE
    Shader = ALPHA
    ParticleName = SMUDGE.tga
    Lifetime = 25 25
    SystemLifetime = 25
    Size = 5 5
    BurstCount = 2 3
    InitialDelay = 15 15
  End
  Color = DefaultColor
    Color1 = R:249 G:253 B:172 0
  End
  Alpha = DefaultAlpha
    Alpha1 = 1 1 0
  End
  Update = DefaultUpdate
    SizeRate = 3 3
    SizeRateDamping = 1 1
    AngleZ = 0.01 0.02
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.96 0.97
    DriftVelocity = X:0 Y:0 Z:1
  End
  EmissionVelocity = CylindricalEmissionVelocity
    Radial = 1 2
    Normal = 1 1
  End
  EmissionVolume = CylinderEmissionVolume
    Radius = 32
    Length = 50
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem IgniteFlame
  System
    Priority = ALWAYS_RENDER
    Shader = W3D_EMISSIVE
    Type = DRAWABLE
    ParticleName = exwatersphere.w3d
    Lifetime = 1500 1500
    SystemLifetime = 15
    StartSizeRate = 0.2 0.2
    BurstCount = 1 1
  End
  Color = DefaultColor
    Color1 = R:249 G:253 B:172 0
    Color2 = R:0 G:0 B:0 39
  End
  Alpha = DefaultAlpha
    Alpha1 = 0.3 0.3 0
  End
  Update = DefaultUpdate
    SizeRate = 0.5 0.5
    SizeRateDamping = 1 1
    AngleZ = -100 100
    AngularRateZ = -0.1 0.1
    AngularDamping = 0.97 0.97
    Rotation = ROTATE_Z
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = PointEmissionVolume
  End
  Draw = RenderObjectDraw
  End
End

FXList FX_Ignite
  ParticleSystem
    Name = IgniteFlame
    Offset = X:0.0 Y:0.0 Z:5.0
  End
 ParticleSystem
    Name = FX_FlamesFromTheDeep
    Offset = X:0.0 Y:0.0 Z:5.0
  End
  Sound
    Name = GandalfBlastWeapon
  End
End

;---Red Lightning---

FXList FX_GandalfLightningSword
  ParticleSysBone     = B_SWORDBONE LightningCharge FollowBone:Yes
End


FXList FX_ElectricityHit ;Balrog Concept DEMO HACK BEER SUCK
ParticleSystem
    Name = GandalfLightningHitSecondary
    Offset = X:0 Y:0 Z:20
    OrientToObject = Yes
  End
ParticleSystem
    Name = GandalfLightningHitFlare
    Offset = X:0 Y:0 Z:20
    OrientToObject = Yes
  End
ParticleSystem
    Name = GandalfLightningHitDistortion
    Offset = X:0 Y:0 Z:20
    OrientToObject = Yes
  End
End

FXList FX_GandalfLightningSwordBlastWeaponHACKDEMOHACKSUCKBEERAtBone
  
  ParticleSystem
    Name = GandalfLightning01
;    OrientToObject = Yes
    CreateBoneOverride = B_SWORDBONE
    TargetBoneOverride = BAT_PELVIS
    TargetCoeff = 250
  End
End

;-------------------------
FXList FX_GandalfLightningSwordBlastWeaponHACKDEMOHACKSUCKBEER
	FXListAtBonePos
		FX = FX_GandalfLightningSwordBlastWeaponHACKDEMOHACKSUCKBEERAtBone
		BoneName = B_SWORDBONE
	End
End


FXList FX_GandalfLightning
  ParticleSystem
    Name = LightningStrike3 FollowBone:Yes
    OrientToObject = Yes
    CreateBoneOverride = B_SWORDBONE
    TargetBoneOverride = B_SWORDBONE
    UseTargetOffset = Yes
    TargetOffset = X:0.0 Y:0.0 Z:300
  End
  ParticleSystem
    Name = LightningStrike2 FollowBone:Yes
    OrientToObject = Yes
    CreateBoneOverride = B_SWORDBONE
    TargetBoneOverride = B_SWORDBONE
    UseTargetOffset = Yes
    TargetOffset = X:25.0 Y:0 Z:8.0
    InitialDelay = 600 600 UNIFORM   ;In milliseconds
  End
  ParticleSystem
    Name = LightningStrike FollowBone:Yes
    OrientToObject = Yes
    CreateBoneOverride = B_SWORDBONE
    TargetBoneOverride = B_SWORDBONE
    UseTargetOffset = Yes
    TargetOffset = X:-25.0 Y:0.0 Z:8.0
    InitialDelay = 1200 1200 UNIFORM   ;In milliseconds
  End
  ParticleSystem
    Name = LightningStrike3 FollowBone:Yes
    OrientToObject = Yes
    CreateBoneOverride = B_SWORDBONE
    TargetBoneOverride = B_SWORDBONE
    UseTargetOffset = Yes
    TargetOffset = X:25.0 Y:-25.0 Z:8.0
    InitialDelay = 1800 1800 UNIFORM   ;In milliseconds
  End
  ParticleSystem
    Name = LightningStrike2 FollowBone:Yes
    OrientToObject = Yes
    CreateBoneOverride = B_SWORDBONE
    TargetBoneOverride = B_SWORDBONE
    UseTargetOffset = Yes
    TargetOffset = X:25.0 Y:0 Z:8.0
    InitialDelay = 2400 2400 UNIFORM   ;In milliseconds
  End
  ParticleSystem
    Name = LightningStrike FollowBone:Yes
    OrientToObject = Yes
    CreateBoneOverride = B_SWORDBONE
    TargetBoneOverride = B_SWORDBONE
    UseTargetOffset = Yes
    TargetOffset = X:25.0 Y:0.0 Z:8.0
    InitialDelay = 3200 3200 UNIFORM   ;In milliseconds
  End
  ParticleSystem
    Name = LightningStrike3 FollowBone:Yes
    OrientToObject = Yes
    CreateBoneOverride = B_SWORDBONE
    TargetBoneOverride = B_SWORDBONE
    UseTargetOffset = Yes
    TargetOffset = X:12 Y:0.0 Z:8.0
    InitialDelay = 3800 3800 UNIFORM   ;In milliseconds
  End
  ParticleSystem
    Name = LightningStrike2 FollowBone:Yes
    OrientToObject = Yes
    CreateBoneOverride = B_SWORDBONE
    TargetBoneOverride = B_SWORDBONE
    UseTargetOffset = Yes
    TargetOffset = X:25.0 Y:-25.0 Z:8.0
    InitialDelay = 4000 4400 UNIFORM   ;In milliseconds
  End
  ParticleSystem
    Name = LightningStrike FollowBone:Yes
    OrientToObject = Yes
    CreateBoneOverride = B_SWORDBONE
    TargetBoneOverride = B_SWORDBONE
    UseTargetOffset = Yes
    TargetOffset = X:25.0 Y:0.0 Z:8.0
    InitialDelay = 5000 5000 UNIFORM   ;In milliseconds
  End
  ParticleSystem
    Name = LightningStrike3 FollowBone:Yes
    OrientToObject = Yes
    CreateBoneOverride = B_SWORDBONE
    TargetBoneOverride = B_SWORDBONE
    UseTargetOffset = Yes
    TargetOffset = X:0.0 Y:25.0 Z:8.0
    InitialDelay = 5600 5600 UNIFORM   ;In milliseconds
  End
  ParticleSystem
    Name = LightningStrike2 FollowBone:Yes
    OrientToObject = Yes
    CreateBoneOverride = B_SWORDBONE
    TargetBoneOverride = B_SWORDBONE
    UseTargetOffset = Yes
    TargetOffset = X:25.0 Y:-25.0 Z:8.0
    InitialDelay = 6200 6200 UNIFORM   ;In milliseconds
  End
  ParticleSystem
    Name = LightningStrike2 FollowBone:Yes
    OrientToObject = Yes
    CreateBoneOverride = B_SWORDBONE
    TargetBoneOverride = B_SWORDBONE
    UseTargetOffset = Yes
    TargetOffset = X:25.0 Y:-25.0 Z:8.0
    InitialDelay = 6800 6800 UNIFORM   ;In milliseconds
  End
  ParticleSystem
    Name = LightningStrike FollowBone:Yes
    OrientToObject = Yes
    CreateBoneOverride = B_SWORDBONE
    TargetBoneOverride = B_SWORDBONE
    UseTargetOffset = Yes
    TargetOffset = X:25.0 Y:0.0 Z:8.0
    InitialDelay = 7400 7400 UNIFORM   ;In milliseconds
  End
  ParticleSystem
    Name = LightningStrike3 FollowBone:Yes
    OrientToObject = Yes
    CreateBoneOverride = B_SWORDBONE
    TargetBoneOverride = B_SWORDBONE
    UseTargetOffset = Yes
    TargetOffset = X:25.0 Y:25.0 Z:8.0
    InitialDelay = 8000 8000 UNIFORM   ;In milliseconds
  End
  ParticleSystem
    Name = LightningStrike2 FollowBone:Yes
    OrientToObject = Yes
    CreateBoneOverride = B_SWORDBONE
    TargetBoneOverride = B_SWORDBONE
    UseTargetOffset = Yes
    TargetOffset = X:25.0 Y:-25.0 Z:8.0
    InitialDelay = 8600 8600 UNIFORM   ;In milliseconds
  End
  Sound 
    Name = GandalfLightningSummon
  End
End


; ----------------------------------------------
FXList FX_GandalfLightningFizzle
  ParticleSystem
    Name = LightningStrikeFizzle FollowBone:Yes
    OrientToObject = Yes
    CreateBoneOverride = B_SWORDBONE
    TargetBoneOverride = B_SWORDBONE
    UseTargetOffset = Yes
    TargetOffset = X:130.0 Y:-100.0 Z:-70
  End
  ParticleSystem
    Name = LightningStrikeFizzle FollowBone:Yes
    OrientToObject = Yes
    CreateBoneOverride = B_SWORDBONE
    TargetBoneOverride = B_SWORDBONE
    UseTargetOffset = Yes
    TargetOffset = X:-130.0 Y:65.0 Z:-70
    InitialDelay = 200 200 UNIFORM   ;In milliseconds
  End
  ParticleSystem
    Name = LightningStrikeFizzle FollowBone:Yes
    OrientToObject = Yes
    CreateBoneOverride = B_SWORDBONE
    TargetBoneOverride = B_SWORDBONE
    UseTargetOffset = Yes
    TargetOffset = X:-150.0 Y:5.0 Z:-70
    InitialDelay = 400 400 UNIFORM   ;In milliseconds
  End
  ParticleSystem
    Name = LightningStrikeFizzle FollowBone:Yes
    OrientToObject = Yes
    CreateBoneOverride = B_SWORDBONE
    TargetBoneOverride = B_SWORDBONE
    UseTargetOffset = Yes
    TargetOffset = X:70.0 Y:35.0 Z:-70
    InitialDelay = 600 600 UNIFORM   ;In milliseconds
  End
  ParticleSystem
    Name = LightningStrikeFizzle FollowBone:Yes
    OrientToObject = Yes
    CreateBoneOverride = B_SWORDBONE
    TargetBoneOverride = B_SWORDBONE
    UseTargetOffset = Yes
    TargetOffset = X:80.0 Y:-75.0 Z:-70
    InitialDelay = 800 800 UNIFORM   ;In milliseconds
  End
  ParticleSystem
    Name = LightningStrikeFizzle FollowBone:Yes
    OrientToObject = Yes
    CreateBoneOverride = B_SWORDBONE
    TargetBoneOverride = B_SWORDBONE
    UseTargetOffset = Yes
    TargetOffset = X:-75.0 Y:120.0 Z:-70
    InitialDelay = 1000 1000 UNIFORM   ;In milliseconds
  End
  ParticleSystem
    Name = LightningStrikeFizzle FollowBone:Yes
    OrientToObject = Yes
    CreateBoneOverride = B_SWORDBONE
    TargetBoneOverride = B_SWORDBONE
    UseTargetOffset = Yes
    TargetOffset = X:-120 Y:-80.0 Z:-70
    InitialDelay = 1200 1200 UNIFORM   ;In milliseconds
  End
  ParticleSystem
    Name = LightningStrikeFizzle FollowBone:Yes
    OrientToObject = Yes
    CreateBoneOverride = B_SWORDBONE
    TargetBoneOverride = B_SWORDBONE
    UseTargetOffset = Yes
    TargetOffset = X:10.0 Y:-75.0 Z:-70
    InitialDelay = 1400 1400 UNIFORM   ;In milliseconds
  End
  ParticleSystem
    Name = LightningStrikeFizzle FollowBone:Yes
    OrientToObject = Yes
    CreateBoneOverride = B_SWORDBONE
    TargetBoneOverride = B_SWORDBONE
    UseTargetOffset = Yes
    TargetOffset = X:20.0 Y:20.0 Z:-70
    InitialDelay = 1600 1600 UNIFORM   ;In milliseconds
  End
  ParticleSystem
    Name = LightningStrikeFizzle FollowBone:Yes
    OrientToObject = Yes
    CreateBoneOverride = B_SWORDBONE
    TargetBoneOverride = B_SWORDBONE
    UseTargetOffset = Yes
    TargetOffset = X:75.0 Y:-50.0 Z:-70
    InitialDelay = 1800 1800 UNIFORM   ;In milliseconds
  End
  ParticleSystem
    Name = LightningStrikeFizzle FollowBone:Yes
    OrientToObject = Yes
    CreateBoneOverride = B_SWORDBONE
    TargetBoneOverride = B_SWORDBONE
    UseTargetOffset = Yes
    TargetOffset = X:-120.0 Y:100.0 Z:-70
    InitialDelay = 2000 2000 UNIFORM   ;In milliseconds
	End
End

;-------------------------
FXList FX_GandalfLightningSwordBlastWeapon11

;  ParticleSystem
;    Name = LightningStrikeHit01
;    OrientToObject = Yes
;    CreateBoneOverride = BAT_JAW
;    TargetBoneOverride = BAT_HAND_L
;    CreateBoneAtTarget = Yes
;  End
  
  ParticleSystem
    Name = LightningStrike02 FollowBone:Yes
    OrientToObject = Yes
    CreateBoneOverride = B_SWORDBONE
    TargetBoneOverride = BAT_PELVIS
    InitialDelay = 400 400 UNIFORM   ;In milliseconds
  End
  ParticleSystem
    Name = LightningStrike03 FollowBone:Yes
    OrientToObject = Yes
    CreateBoneOverride = B_SWORDBONE
    TargetBoneOverride = BAT_PELVIS
    InitialDelay = 800 800 UNIFORM   ;In milliseconds
  End
  ParticleSystem
    Name = LightningStrike00 FollowBone:Yes
    OrientToObject = Yes
    CreateBoneOverride = B_SWORDBONE
    TargetBoneOverride = BAT_PELVIS
    InitialDelay = 1200 1200 UNIFORM   ;In milliseconds
  End
  ParticleSystem
    Name = LightningStrike02 FollowBone:Yes
    OrientToObject = Yes
    CreateBoneOverride = B_SWORDBONE
    TargetBoneOverride = BAT_PELVIS
    InitialDelay = 1600 1600 UNIFORM   ;In milliseconds
  End
  ParticleSystem
    Name = LightningStrike03 FollowBone:Yes
    OrientToObject = Yes
    CreateBoneOverride = B_SWORDBONE
    TargetBoneOverride = BAT_PELVIS
    InitialDelay = 2000 2000 UNIFORM   ;In milliseconds
  End
End

FXParticleSystem LightningCharge00
  System
    Priority = VERY_LOW_OR_ABOVE
    ParticleName = EXGimliAxeSpecial.tga
    Lifetime = 5 5
    SystemLifetime = 50
    SortLevel = 1
    Size = 10 10
    BurstCount = 0 1.05
    InitialDelay = 15 15
  End
  Color = DefaultColor
    Color1 = R:255 G:000 B:000 0
    Color2 = R:0 G:0 B:0 5
  End
  Update = DefaultUpdate
    SizeRate = 5 5
    SizeRateDamping = 1 1
    AngleZ = -7 7
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = PointEmissionVolume
    IsHollow = Yes
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem LightningStrike00
  System
    Priority = ALWAYS_RENDER
    Type = STREAK
    ParticleName = EXLightningBolt04.tga
    Lifetime = 20 20
    SystemLifetime = 1
    Size = 1 15
    BurstCount = 10 10
  End
  Color = DefaultColor
    Color1 = R:255 G:000 B:0005 0
    Color2 = R:0 G:00 B:000 5
    Color3 = R:0 G:0 B:0 20
    ColorScale = -2 -2
  End
  Update = DefaultUpdate
    SizeRate = 0.5 3
    SizeRateDamping = 0.9 1
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.9 0.9
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = -0.3 0.3
    Y = -0.3 0.3
  End
  EmissionVolume = LightningEmission
    EndPoint = X:-450 Y:0 Z:0
    Amplitude1 = 100 100
    Frequency1 = 4 6
    Phase1 = 4 5
    Phase2 = 0 6.28
    Phase3 = 0 6.28
  End
  Draw = LightningDraw
    OffsetX = -5 5
    OffsetY = -5 5
    OffsetZ = -1 1
  End
End

FXParticleSystem LightningStrike02
  System
    Priority = ALWAYS_RENDER
    Type = STREAK
    ParticleName = EXLightningBolt04.tga
    Lifetime = 20 20
    SystemLifetime = 1
    Size = 1 15
    BurstCount = 10 10
  End
  Color = DefaultColor
    Color1 = R:255 G:000 B:000 0
    Color2 = R:0 G:00 B:000 5
    Color3 = R:0 G:0 B:0 20
    ColorScale = -2 -2
  End
  Update = DefaultUpdate
    SizeRate = 0.5 3
    SizeRateDamping = 0.9 1
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.9 0.9
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = -0.3 0.3
    Y = -0.3 0.3
  End
  EmissionVolume = LightningEmission
    EndPoint = X:-450 Y:0 Z:0
    Amplitude1 = -100 -100
    Frequency1 = 4 6
    Phase1 = 4 5
    Phase2 = 0 6.28
    Phase3 = 0 6.28
  End
  Draw = LightningDraw
    OffsetX = -5 5
    OffsetY = -5 5
    OffsetZ = -1 1
  End
End

FXParticleSystem LightningStrike03
  System
    Priority = ALWAYS_RENDER
    Type = STREAK
    ParticleName = EXLightningBolt04.tga
    Lifetime = 20 20
    SystemLifetime = 1
    Size = 1 15
    BurstCount = 10 10
  End
  Color = DefaultColor
    Color1 = R:255 G:000 B:000 0
    Color2 = R:0 G:00 B:000 5
    Color3 = R:0 G:0 B:0 20
  End
  Update = DefaultUpdate
    SizeRate = 0.5 3
    SizeRateDamping = 0.9 1
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.9 0.9
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = -0.3 0.3
    Y = -0.3 0.3
  End
  EmissionVolume = LightningEmission
    EndPoint = X:-450 Y:0 Z:0
    Amplitude1 = -100 100
    Frequency1 = 4 6
    Phase1 = 4 5
    Phase2 = 0 6.28
    Phase3 = 0 6.28
  End
  Draw = LightningDraw
    OffsetX = -5 5
    OffsetY = -5 5
    OffsetZ = -1 1
  End
End

FXParticleSystem LightningStrike05
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXLnzFlar1.tga
    Lifetime = 10 10
    SystemLifetime = 1
    Size = 1 20
    BurstCount = 10 10
  End
  Color = DefaultColor
    Color1 = R:255 G:000 B:000 0
    Color2 = R:00 G:000 B:000 5
    Color3 = R:0 G:0 B:0 10
    ColorScale = -40 40
  End
  Update = DefaultUpdate
    SizeRate = 0.5 1
    SizeRateDamping = 0.9 1
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.9 0.9
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = LineEmissionVolume
  End
  Draw = DefaultDraw
  End
End

FXParticleSystem LightningStrike06
  System
    Priority = ALWAYS_RENDER
    Type = STREAK
    ParticleName = EXLightningBolt04.tga
    Lifetime = 10 10
    SystemLifetime = 1
    Size = 1 4
    BurstCount = 10 10
  End
  Color = DefaultColor
    Color1 = R:255 G:000 B:000 0
    Color2 = R:0 G:00 B:000 5
    Color3 = R:0 G:0 B:0 20
  End
  Update = DefaultUpdate
    SizeRate = 0.5 1
    SizeRateDamping = 0.9 1
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.9 0.9
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = LightningEmission
    EndPoint = X:-10 Y:0 Z:0
  End
  Draw = LightningDraw
  End
End

FXParticleSystem LightningStrikeFizzle0
  System
    Priority = VERY_LOW_OR_ABOVE
    Type = STREAK
    ParticleName = EXLightningBolt04.tga
    Lifetime = 20 20
    SystemLifetime = 1
    Size = 1 15
    BurstDelay = 20 20
    BurstCount = 5 5
  End
  Color = DefaultColor
    Color1 = R:255 G:000 B:000 0
    Color2 = R:0 G:00 B:000 5
    Color3 = R:0 G:0 B:0 20
    ColorScale = -2 -2
  End
  Update = DefaultUpdate
    SizeRate = 0.5 3
    SizeRateDamping = 0.9 1
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = -0.1 0.1
    Y = -0.1 0.1
  End
  EmissionVolume = LightningEmission
    EndPoint = X:-450 Y:0 Z:0
    Amplitude1 = -50 -50
    Frequency1 = 1 6
    Phase1 = 1 2
    Phase2 = 0 2
    Phase3 = 0 2
  End
  Draw = LightningDraw
    OffsetX = -5 5
    OffsetY = -5 5
    OffsetZ = -1 1
  End
End

FXParticleSystem LightningStrikeHit01
  System
    Priority = VERY_LOW_OR_ABOVE
    Type = STREAK
    ParticleName = EXLightningBolt06.tga
    Lifetime = 20 20
    Size = 1 5
    BurstDelay = 20 20
    BurstCount = 3 3
  End
  Color = DefaultColor
    Color1 = R:255 G:000 B:000 0
    Color2 = R:0 G:00 B:000 5
    Color3 = R:0 G:0 B:0 20
    ColorScale = -2 -2
  End
  Update = DefaultUpdate
    SizeRate = 0.5 3
    SizeRateDamping = 0.9 1
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = -0.5 0.5
    Y = -0.5 0.5
  End
  EmissionVolume = LightningEmission
    EndPoint = X:50 Y:0 Z:0
    Amplitude1 = -50 50
    Frequency1 = 4 6
    Phase1 = 4 5
    Phase2 = 0 6.28
    Phase3 = 0 6.28
  End
  Draw = LightningDraw
    OffsetX = -5 5
    OffsetY = -5 5
    OffsetZ = -1 1
  End
End

FXParticleSystem LightningSword01
  System
    Priority = VERY_LOW_OR_ABOVE
    Type = DRAWABLE
    ParticleName = P_Lightning.w3d
    Lifetime = 10000 10000
    SystemLifetime = 1
    Size = 1 1
    BurstCount = 1 1
  End
  Color = DefaultColor
    Color1 = R:255 G:000 B:000 0
    ColorScale = 1 1
  End
  Alpha = DefaultAlpha
    Alpha1 = 1 1 0
  End
  Update = DefaultUpdate
    SizeRateDamping = 1 1
    AngularDamping = 1 1
    Rotation = ROTATE_X
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
  End
  EmissionVelocity = OrthoEmissionVelocity
    X = 0 1
    Y = 0 1
    Z = -1 2
  End
  EmissionVolume = PointEmissionVolume
  End
  Draw = RenderObjectDraw
  End
End

FXParticleSystem FX_FlamesFromTheDeep
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXFireEmbr.tga
    Lifetime = 50 50
    SystemLifetime = 6
    Size = 100 100
    BurstCount = 2 2
    IsGroundAligned = Yes
  End
  Color = DefaultColor
    Color1 = R:249 G:253 B:172 0
    Color2 = R:5 G:0 B:0 40
    ColorScale = -5 0
  End
  Update = DefaultUpdate
    SizeRate = 2 2
    SizeRateDamping = 1 1
    AngleZ = -1 1
    AngularDamping = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.8 0.8
  End
  EmissionVelocity = OutwardEmissionVelocity
  End
  EmissionVolume = PointEmissionVolume
    IsHollow = Yes
  End
  Draw = DefaultDraw
  End
End

FXList FX_FlamesFromTheDeep
  ParticleSystem
    Name = FX_FlamesFromTheDeep
    Offset = X:16.0 Y:0.0 Z:15.0
    OrientToObject = Yes
  End
  ParticleSystem
    Name = GandalfSwordHitFlash
    Offset = X:16.0 Y:0.0 Z:15.0
    OrientToObject = Yes
  End
  Sound
    Name = ImpactSword01
  End
End

FXList FX_BlackLightning
  ParticleSystem
    Name = FX_BlackLightning
    Offset = X:16.0 Y:0.0 Z:15.0
    OrientToObject = Yes
  End
End

FXList FX_AsernorothBane
  TintDrawable
	Color				= R:255 G:000 B:000
	PreColorTime		= 40
	PostColorTime		= 50
	SustainedColorTime	= 2000
	Frequency			= 0
	Amplitude			= 0
  End
End

ModifierList AsernorothBane
	Category = WEAPON
	Modifier = DAMAGE_MULT 120%
	Modifier = ARMOR 100%
	Modifier = SPEED 200%
	Duration = 200
	FX		 = FX_FlamesFromTheDeep
End

FXList FX_GandalfSwordHit
  ParticleSystem
    Name = GandalfSwordHitSpark
    Offset = X:16.0 Y:0.0 Z:15.0
    OrientToObject = Yes
  End
  ParticleSystem
    Name = GandalfSwordHitFlash
    Offset = X:16.0 Y:0.0 Z:15.0
    OrientToObject = Yes
  End
  Sound
    Name = ImpactSword01
  End
End

;FXList FX_TelekinesisAtBone
;	FXListAtBonePos
;		FX = FX_Telekinesis
;		BoneName = STAFF
;	End
;End

FXList FX_GandalfLightningSwordHit
  ParticleSystem
    Name = GandalfSwordHitSpark
    Offset = X:12.0 Y:0.0 Z:8.0
    OrientToObject = Yes
  End
  ParticleSystem
    Name = GandalfSwordHitFlash
    Offset = X:12.0 Y:0.0 Z:8.0
    OrientToObject = Yes
  End
;  ParticleSystem
;    Name = TrollClubTransitionTree
;    Offset = X:16.0 Y:0.0 Z:20.0
;    OrientToObject = Yes     
;  End
End

FXList FX_BlackLightningGandalf
  ParticleSystem
    Name = LightningCharge
    Offset = X:12.0 Y:0.0 Z:8.0
    OrientToObject = Yes
  End
  ParticleSystem
    Name = LightningStrike
    Offset = X:12.0 Y:0.0 Z:8.0
    OrientToObject = Yes
  End
  ParticleSystem
    Name = LightningStrike2
    Offset = X:12.0 Y:0.0 Z:8.0
    OrientToObject = Yes
  End
  ParticleSystem
    Name = LightningStrike3
    Offset = X:12.0 Y:0.0 Z:8.0
    OrientToObject = Yes
  End
  ParticleSystem
    Name = LightningStrike5
    Offset = X:12.0 Y:0.0 Z:8.0
    OrientToObject = Yes
  End
  ParticleSystem
    Name = LightningStrike6
    Offset = X:12.0 Y:0.0 Z:8.0
    OrientToObject = Yes
  End
  ParticleSystem
    Name = LightningFizzle
    Offset = X:12.0 Y:0.0 Z:8.0
    OrientToObject = Yes
  End
  ParticleSystem
    Name = LightningHit1
    Offset = X:12.0 Y:0.0 Z:8.0
    OrientToObject = Yes
  End
 ParticleSystem
    Name = LightningSword
    Offset = X:12.0 Y:0.0 Z:8.0
    OrientToObject = Yes
  End
End
;<<<<<<<<<<<<
;  Weapons
;>>>>>>>>>>>>

Weapon GandalfSword ; BALANCE Gandalf Sword
  LeechRangeWeapon      = Yes
  AttackRange           = 10.0
  RadiusDamageAffects   = ENEMIES NOT_SIMILAR
  MeleeWeapon           = Yes
  FireFX                = FX_GandalfSwordHit
  DelayBetweenShots     = 300			; time between shots, msec
  PreAttackDelay        = 1000 	; 400 is sword swing delay time before contact with target.
  PreAttackType         = PER_SHOT ; Do the delay each time we attack a new target
  FiringDuration        = 600 	; Duration of the sword swing
	DamageNugget                        ; A basic Nugget that just does damage
		Damage			= 100
		Radius			= 22.0
		DamageType		= FLAME	
		DamageFXType	= ELECTRIC
		DeathType		= BURNED
	End
	MetaImpactNugget                    ; A Nugget that throws things back with force
		HeroResist			= 0.75
		ShockWaveAmount   = 30.0
		ShockWaveRadius   = 22.0
		ShockWaveTaperOff = 0.4
		ShockWaveZMult    = 1.050
	End
End

Weapon GandalfStaff ; BALANCE Gandalf Staff
  LeechRangeWeapon      = Yes
  AttackRange           = 10.0
  RadiusDamageAffects   = ENEMIES NOT_SIMILAR
  MeleeWeapon           = Yes
  FireFX                = FX_GandalfSwordHit
  DelayBetweenShots     = 300			; time between shots, msec
  PreAttackDelay        = 1000 	; 400 is sword swing delay time before contact with target.
  PreAttackType         = PER_SHOT ; Do the delay each time we attack a new target
  FiringDuration        = 600 	; Duration of the sword swing
	DamageNugget                        ; A basic Nugget that just does damage
		Damage			= 100
		Radius			= 22.0
		DamageType		= FLAME
		DamageFXType	= ELECTRIC
		DeathType		= BURNED
	End
	MetaImpactNugget                    ; A Nugget that throws things back with force
		HeroResist			= 0.75
		ShockWaveAmount   = 50.0
		ShockWaveRadius   = 30.0
		ShockWaveTaperOff = 0.4
		ShockWaveZMult    = 1.050
	End
End

;<<<<<<<<<<<<<<<<<<<<
;  Ability Weapons
;>>>>>>>>>>>>>>>>>>>>

Weapon GandalfWordOfPower
	IdleAfterFiringDelay = 0
	LeechRangeWeapon	 = Yes
	AttackRange = 30
	WeaponSpeed = 401         ; dist/sec 
	RadiusDamageAffects = ENEMIES NEUTRALS NOT_SIMILAR
	DelayBetweenShots = 5000               ; time between shots, msec
	PreAttackDelay        = 100
	PreAttackType         = PER_ATTACK ; Do the delay each time we attack a new target
	FireFX                = FX_Ignite
	FiringDuration        = 100
	DamageDealtAtSelfPosition = Yes ; Damage arc code is boned right now.  Does calc from source obj, not damage point.  To get proper arc, need to set this until code is fixed.
	IsAimingWeapon		= Yes
	AcceptableAimDelta	= 15
	AntiAirborneVehicle	= No
	AntiAirborneMonster	= No

	DamageNugget                        ; A basic Nugget that just does damage
		Damage			= 20.0
		DamageArc 		= 90
		Radius			= 100.0
		DamageType		= FLAME
		DamageFXType	= ELECTRIC
		DeathType		= BURNED
		DamageSpeed		= 500.0 
	End
	MetaImpactNugget                    ; A Nugget that throws things back with force
		HeroResist			= 0.00
		ShockWaveAmount   = 500.0
		ShockWaveArc	  = 360.0
		ShockWaveRadius   = 500.0
		ShockWaveTaperOff = 0.75
		ShockWaveZMult    = 0.775
		ShockWaveSpeed	  = 500.0 
	End
End

Weapon GandalfWizardBlast
	IdleAfterFiringDelay = 0
	LeechRangeWeapon	 = Yes
	AttackRange = 30
	WeaponSpeed = 401         ; dist/sec 
	RadiusDamageAffects = ENEMIES NEUTRALS NOT_SIMILAR
	DelayBetweenShots = 5000               ; time between shots, msec
	PreAttackDelay        = 100
	PreAttackType         = PER_ATTACK ; Do the delay each time we attack a new target
	FireFX                = FX_BalrogSwordHit
	FiringDuration        = 100
	DamageDealtAtSelfPosition = Yes ; Damage arc code is boned right now.  Does calc from source obj, not damage point.  To get proper arc, need to set this until code is fixed.
	IsAimingWeapon		= Yes
	AcceptableAimDelta	= 15
	AntiAirborneVehicle	= No
	AntiAirborneMonster	= No

	DamageNugget                        ; A basic Nugget that just does damage
		Damage			= 5.0
		DamageArc 		= 90
		Radius			= 100.0
		DamageType		= FLAME
		DamageFXType	= ELECTRIC
		DeathType		= BURNED
		DamageSpeed		= 100.0 ; must match the ShockWaveSpeed below
	End
	MetaImpactNugget                    ; A Nugget that throws things back with force
		HeroResist			= 0.00
		ShockWaveAmount   = 100.0
		ShockWaveArc	  = 60.0
		ShockWaveRadius   = 360.0
		ShockWaveTaperOff = 1.00
		ShockWaveZMult    = 0.1000
		ShockWaveSpeed	  = 100.0 
	End
End

Weapon GandalfLightningSwordBlastWeapon
	AttackRange			= 10
	WeaponSpeed			= 1000      ; dist/sec 
	HitPercentage			= 90		; When this weapon is used it will hit exactly 100% of the time.
	DelayBetweenShots		= 2000		; time between shots, msec
	PreAttackDelay      		= 400
	PreAttackType       		= PER_SHOT	; Do the delay each time we attack a new target
	FireFX              		= FX_GandalfLightningSwordBlastWeapon11
	
	FiringDuration      		= 1100
	AntiAirborneVehicle		= Yes
	AntiAirborneMonster		= Yes

	RadiusDamageAffects = ENEMIES NOT_SIMILAR

	DamageNugget                        ; A basic Nugget that just does damage
		Damage        		= 100	
		Radius			= 35.0		
		DamageType    		= FLAME
		DamageFXType  		= ELECTRIC
		DeathType     		= BURNED
	End
End

Weapon GandalfHeroSword
  LeechRangeWeapon      = Yes
  AttackRange           = 30.0
  MeleeWeapon           = Yes
  DelayBetweenShots     = 100
  PreAttackDelay        = 533
  PreAttackType         = PER_SHOT
  FireFX                = FX_GandalfLightningSwordHit
  FiringDuration        = 400
  RadiusDamageAffects = ENEMIES NOT_SIMILAR
  ClearNuggets
  DamageNugget
    Damage        = 200
    Radius        = 66.0
    DelayTime     = 0
    DamageType    = MAGIC
    DamageFXType  = MAGIC
    DeathType     = EXPLODED
    DamageArc     = 600
    DamageSpeed		= 350.0 ; must match the ShockWaveSpeed below
  End
  MetaImpactNugget
    HeroResist			= .00
    ShockWaveAmount   = 60.0		
    ShockWaveRadius   = 66.0
    ShockWaveTaperOff = 0.4
    ShockWaveArc      = 600
    ShockWaveSpeed	  = 350.0
  End
End

Weapon LightCalling	
	RadiusDamageAffects		= ENEMIES NEUTRALS	

	//Turn the troll effectively to stone
	AttributeModifierNugget
		AttributeModifier        = SunFlareTrollToStone
		Radius					 = SPELL_SUNFLARE_EFFECT_RADIUS		
		SpecialObjectFilter      = ANY +MordorAttackTroll +MordorDrummerTroll +MordorMountainTroll +MordorCaveTroll +GoblinCaveTroll +GoblinCaveTroll_FromTrollLair +CaveTroll_Slaved
	End            	

	// A basic Nugget that just does damage
	DamageNugget                
		Damage        = SPELL_SUNFLARE_DAMAGE
		Radius        = SPELL_SUNFLARE_EFFECT_RADIUS	
		DelayTime     = 0
		DamageType    = FLAME
		DamageFXType  = FLAME
		DeathType     = BURNED
	End

	//Start a fire - Removed at the request of Wes "Ensign Crusher" Eckhart
	;FireLogicNugget 
	;	LogicType	=	INCREASE_BURN_RATE
	;	Radius		=	SPELL_SUNFLARE_EFFECT_RADIUS
	;	Damage		=	SPELL_SUNFLARE_FIRE_DAMAGE
	;End
	//Design knob
	;FireLogicNugget
	;	LogicType		=	INCREASE_FUEL
	;	Radius			=	SPELL_SUNFLARE_EFFECT_RADIUS
	;	Damage			=	SPELL_SUNFLARE_FIRE_FUEL
	;	MinMaxBurnRate	=	SPELL_SUNFLARE_FIRE_MINMAX_BURNRATE
	;	MinDecay		=	1
	;	MaxResistance	=	0
	;End

	//Paralyze everything that's light sensitive
	ParalyzeNugget				
		Radius					= SPELL_SUNFLARE_EFFECT_RADIUS
		Duration				= SPELL_SUNFLARE_DURATION
		SpecialObjectFilter     = ANY +MordorFighter +MordorArcher +MordorBannerOrc +WildBannerGoblin +WildBannerMarauder +WildBannerSpiderling +GoblinFighter +GoblinArcher +WildSpiderling +GoblinSpiderRider +WildShelob +MordorGoblinSwordsman +MordorGoblinArcher +BarrowWight ENEMIES
	End

End

;<<<<<<<<<<<<<
; Level Ups
;>>>>>>>>>>>>>

ExperienceLevel	GandalfLevel1
	TargetNames						=	GANDALF
	RequiredExperience				=	1
	ExperienceAward					=	GANDALF_LVL1_EXP_AWARD 
	Rank							=	1
	Upgrades						=	Upgrade_GandalfBlast
;	AttributeModifiers				=	TotalResistKnockback ;resist all knockback
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%
		OpacityMax					=	100%
		MinRadius					=	40
		MaxRadius					=	200	
		MaxSelectedUnits				=	40
	End	
End	

ExperienceLevel	GandalfLevel2
	TargetNames						=	GANDALF
	RequiredExperience				=	GANDALF_LVL2_EXP_NEEDED
	ExperienceAward					=	GANDALF_LVL2_EXP_AWARD 
	AttributeModifiers				=	HeroLevelUpDamage1
	Rank							=	2
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	Upgrades						=	Upgrade_GandalfLightningSword	
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%
		OpacityMax					=	100%
		MinRadius					=	40
		MaxRadius					=	200	
		MaxSelectedUnits				=	40
	End	
END	

ExperienceLevel	GandalfLevel3
	TargetNames						=	GANDALF
	RequiredExperience				=	GANDALF_LVL3_EXP_NEEDED
	ExperienceAward					=	GANDALF_LVL3_EXP_AWARD 
	 AttributeModifiers				=	HeroLevelUpDamage2
	Rank							=	3

	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%
		OpacityMax					=	100%
		MinRadius					=	40
		MaxRadius					=	200	
		MaxSelectedUnits			=	40
	End	
END	

ExperienceLevel	GandalfLevel4
	TargetNames						=	GANDALF
	RequiredExperience				=	GANDALF_LVL4_EXP_NEEDED
	ExperienceAward					=	GANDALF_LVL4_EXP_AWARD 
	AttributeModifiers				=	HeroLevelUpDamage3
	Rank							=	4
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%
		OpacityMax					=	100%
		MinRadius					=	40
		MaxRadius					=	200	
		MaxSelectedUnits			=	40
	End	
END	

ExperienceLevel	GandalfLevel5
	TargetNames						=	GANDALF
	RequiredExperience				=	GANDALF_LVL5_EXP_NEEDED
	ExperienceAward					=	GANDALF_LVL5_EXP_AWARD 
	AttributeModifiers				=	HeroLevelUpDamage4
	Upgrades						=	Upgrade_AragornBladeMaster Upgrade_GandalfTheWhite	
	Rank							=	5
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%
		OpacityMax					=	100%
		MinRadius					=	40
		MaxRadius					=	200	
		MaxSelectedUnits				=	40
	End	
END	

ExperienceLevel	GandalfLevel6
	TargetNames						=	GANDALF
	RequiredExperience				=	GANDALF_LVL6_EXP_NEEDED
	ExperienceAward					=	GANDALF_LVL6_EXP_AWARD 
	AttributeModifiers				=	HeroLevelUpDamage5	
	Rank							=	6
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%
		OpacityMax					=	100%
		MinRadius					=	40
		MaxRadius					=	200	
		MaxSelectedUnits			=	40
	End	
END	

ExperienceLevel	GandalfLevel7
	TargetNames						=	GANDALF
	RequiredExperience				=	GANDALF_LVL7_EXP_NEEDED
	ExperienceAward					=	GANDALF_LVL7_EXP_AWARD 
	AttributeModifiers				=	HeroLevelUpDamage6	
	Rank							=	7
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	Upgrades						=	Upgrade_GandalfIstariLight

	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%
		OpacityMax					=	100%
		MinRadius					=	40
		MaxRadius					=	200	
		MaxSelectedUnits			=	40
	End	
END	

ExperienceLevel	GandalfLevel8
	TargetNames						=	GANDALF
	RequiredExperience				=	GANDALF_LVL8_EXP_NEEDED
	ExperienceAward					=	GANDALF_LVL8_EXP_AWARD 
	AttributeModifiers				=	HeroLevelUpDamage7
	Rank							=	8
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%
		OpacityMax					=	100%
		MinRadius					=	40
		MaxRadius					=	200	
		MaxSelectedUnits			=	40
	End	
END	

ExperienceLevel	GandalfLevel9
	TargetNames						=	GANDALF
	RequiredExperience				=	GANDALF_LVL9_EXP_NEEDED
	ExperienceAward					=	GANDALF_LVL9_EXP_AWARD 
	AttributeModifiers				=	HeroLevelUpDamage8
	Rank							=	9
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%
		OpacityMax					=	100%
		MinRadius					=	40
		MaxRadius					=	200	
		MaxSelectedUnits			=	40
	End	
END	

ExperienceLevel	GandalfLevel10
	TargetNames						=	GANDALF
	RequiredExperience				=	GANDALF_LVL10_EXP_NEEDED
	ExperienceAward					=	GANDALF_LVL10_EXP_AWARD 
	AttributeModifiers				=	HeroLevelUpDamage9
	Rank							=	10
	Upgrades						=	Upgrade_GandalfWordOfPower
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%
		OpacityMax					=	100%
		MinRadius					=	40
		MaxRadius					=	200	
		MaxSelectedUnits			=	40
	End	
END

;<<<<<<<<<<<<<<<<<<<<<<<<
; Gandalf Ability Timers
;>>>>>>>>>>>>>>>>>>>>>>>>

SpecialPower SpecialAbilityWizardBlast
	Enum			= SPECIAL_WIZARD_BLAST
	ReloadTime		= 38000
	PublicTimer		= No
End

SpecialPower SpecialAbilityWordOfPower
	Enum			= SPECIAL_WORD_OF_POWER
	ReloadTime		= 360000
	PublicTimer		= No
End

SpecialPower SpecialAbilityIstariLight
	Enum						   = SPECIAL_WOUND_ARROW
	ReloadTime					   = 120000	; in milliseconds
	RadiusCursorRadius			   = 120.0
	ObjectFilter				   = ALL -BASE_FOUNDATION -INERT -IGNORED_IN_GUI -WALK_ON_TOP_OF_WALL -BLOCKING_GATE -WALL_UPGRADE -UNATTACKABLE -MOVE_ONLY
End

SpecialPower SpecialAbilityGandalfFlare
	Enum			= SPECIAL_SPELL_BOOK_SUNFLARE
	Flags			= WATER_OK RESPECT_RECHARGE_TIME_DISCOUNT
	RadiusCursorRadius	= SPELL_SUNFLARE_EFFECT_RADIUS
	ReloadTime		= SPELL_RECHARGE_TIME_TIER_4 ;// in milliseconds
	ViewObjectDuration	= SPELL_SUNFLARE_VIEW_OBJECT_DURATION
	ViewObjectRange		= SPELL_SUNFLARE_VIEW_OBJECT_RANGE
	InitiateAtLocationSound = SpellSunflareMS
End

;<<<<<<<<<<<<<<<<<<<<<<
;Gandalf Commandbuttons
;>>>>>>>>>>>>>>>>>>>>>>

CommandButton Command_SpellBookCloudBreak
  Command                 = SPECIAL_POWER 
  SpecialPower            = SpecialAbilityWordOfPower
  Options                 = NONE
  TextLabel               = CONTROLBAR:WordOfPowerNew
  ButtonImage             = SBGood_CloudBreak
  ButtonBorderType        = ACTION 
  DescriptLabel           = CONTROLBAR:ToolTipWordOfPowerNew
  AutoAbility			  = Yes
  PresetRange			  = 120.0
  InPalantir			  = Yes
End

CommandButton Command_SpecialAbilityWizardBlast
	Command		= SPECIAL_POWER
	SpecialPower	= SpecialAbilityWizardBlast
	Options		= NEED_TARGET_ENEMY_OBJECT ; CONTEXTEMODE_COMMAND
	TextLabel	= CONTROLBAR:WizardBlastNew
	ButtonImage	= HSGandalfWizardBlast
	ButtonBorderType= ACTION
	DescriptLabel	= CONTROLBAR:ToolTipWizardBlastNew
	CursorName	= Bombard
	InvalidCursorName = GenericInvalid
	AutoAbility	= Yes
	PresetRange	= 120.0
;	 UnitSpecificSound = 
	InPalantir	= Yes
End

CommandButton Command_SarumanThunderBolt
	Command		= SPECIAL_POWER
	SpecialPower	= SpecialAbilityLightningSword
	Options		= NEED_TARGET_POS CONTEXTMODE_COMMAND
	TextLabel	= CONTROLBAR:LightningSwordNew
	ButtonImage	= HSSarumanThunderBolt
	ButtonBorderType= ACTION
	DescriptLabel	= CONTROLBAR:ToolTipLightningSwordNew
	CursorName	= Bombard
	InvalidCursorName = GenericInvalid
	AutoAbility	= Yes
	PresetRange	= 120.0
;	 UnitSpecificSound = 
	InPalantir	= Yes
End

CommandButton Command_SpecialAbilityBladeMaster
  Command                 = SPECIAL_POWER
  Options                 = NONE 
  SpecialPower            = SpecialAbilityAragornBladeMaster
  TextLabel               = CONTROLBAR:AsernorothBane
  ButtonImage             = HSSpecialAbilityBladeMaster
  ButtonBorderType        = ACTION 
  DescriptLabel           = CONTROLBAR:ToolTipAsernorothBane
  InPalantir			  = Yes
  AutoAbility			  = Yes
  AutoDelay				  = 30.0
  PresetRange			  = 50.0
;  UnitSpecificSound = GandalfSpellVoice
End

CommandButton Command_SpecialAbilityAthelas
  Command                 = SPECIAL_POWER 
  SpecialPower            = SpecialAbilityAragornAthelas
  TextLabel               = CONTROLBAR:WizardsHeal
  ButtonImage             = HSAragornAthelas
  CursorName              = Bombard
  RadiusCursorType        = AthelasRadiusCursor
  InvalidCursorName       = GenericInvalid
  ButtonBorderType        = ACTION 
  DescriptLabel           = CONTROLBAR:ToolTipWizardsHeal
  InPalantir			  = Yes
  AutoAbility			  = Yes
  PresetRange			  = 100.0
  NeedDamagedTarget		  = Yes
 ; UnitSpecificSound       = AragornVoiceAthelas
End

CommandButton Command_SpellBookDragonStrike
  Command                 = SPECIAL_POWER 
  SpecialPower            = SpecialAbilityGandalfFlare
  Options		  = NEED_TARGET_POS 
  TextLabel               = CONTROLBAR:Burner
  ButtonImage             = SBEvil_DragonStrike
  ButtonBorderType        = ACTION 
  DescriptLabel           = CONTROLBAR:ToolTipBurner
  RadiusCursorType	= SunflareRadiusCursor
  AutoAbility			  = Yes
  PresetRange			  = 120.0
;  UnitSpecificSound       = 
  InPalantir			  = Yes
End

;>>>>>>>>>>>>>>>>>>>>>
;Gandalf NewCommandSet
;<<<<<<<<<<<<<<<<<<<<<

CommandSet GandalfCommandSet
  1  = Command_SpecialAbilityAthelas
  2  = Command_SpecialAbilityWizardBlast
  3  = Command_SarumanThunderBolt
  4  = Command_SpecialAbilityBladeMaster
  5  = Command_SpellBookDragonStrike
  6  = Command_SpellBookCloudBreak
	12 = Command_CaptureBuilding
	13 = Command_AttackMove
	14 = Command_Stop
        
End

Object GondorGandalf
 CommandSet = GandalfCommandSet
End

;<<<<<<<<<<<<<<<<<<<<
;MISC.
;>>>>>>>>>>>>>>>>>>>>

Object GondorGandalf

	ShockwaveResistance = SHOCKWAVE_RESISTANCE_ALWAYS

	ArmorSet
		Conditions      = MOUNTED
		Armor           = GandalfArmorMounted
		DamageFX        = NormalDamageFX
	End

	DisplayMeleeDamage = 100


	ReplaceModule ModuleTag_GandalfHealing
	Behavior = AutoHealBehavior ModuleTag_GandalfHealing1
		StartsActive = Yes
		HealingAmount = 100
		HealingDelay = 1000
		StartHealingDelay = 8000
		HealOnlyIfNotInCombat = Yes
	End
	End  

  	ReplaceModule ModuleTag_01
	Draw = W3DScriptedModelDraw ModuleTag_011

		GlowEnabled = No;
		GlowEmissive = No;
		
		OkToChangeModelColor = No
		
		StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD

		ExtraPublicBone = STAFF
		ExtraPublicBone = B_SWORDBONE
		ExtraPublicBone = PASSENGERBONE
		DependencySharedModelFlags = TURN_LEFT_HIGH_SPEED TURN_RIGHT_HIGH_SPEED MOVING ACCELERATE DECELERATE TURN_LEFT TURN_RIGHT ATTACKING BACKING_UP
		
		;;; MODEL STATES ;;;
		DefaultModelConditionState ;gandalf is grey to start out with
			Model               = GUGandalfG_SKN
			WeaponLaunchBone    = TERTIARY STAFF 
			ParticleSysBone     = STAFF GandalfMoriaLight FollowBone:Yes
			ParticleSysBone     = B_SWORDBONE FlameHaze FollowBone:Yes
			ParticleSysBone     = B_SWORDBONE FlameSword FollowBone:Yes
		End

		;;; White Only versions of Gandalf (for solo missions excluding Moria) ;;;
		ModelConditionState		= USER_2 MOUNTED
			Model               = GUGdfHrs_SKN_M
			WeaponLaunchBone    = PRIMARY PASSENGERBONE
			WeaponLaunchBone    = TERTIARY STAFF
			ParticleSysBone     = STAFF GandalfMoriaLight FollowBone:Yes
			ParticleSysBone     = STAFF GandalfMoriaLightCenter FollowBone:Yes
		End

		ModelConditionState		= USER_2
			Model               = GUGandalfG_SKN
			WeaponLaunchBone    = TERTIARY STAFF 
			ParticleSysBone     = STAFF GandalfMoriaLight FollowBone:Yes
			ParticleSysBone     = STAFF GandalfMoriaLightCenter FollowBone:Yes
		End
		
		;;; Grey versions of Gandalf USER MODELS (For Moria only) -- never becomes white;;;
		ModelConditionState		= USER_1 MOUNTED
			Model               = GUGdfGHrs_SKN
			WeaponLaunchBone    = PRIMARY PASSENGERBONE
			WeaponLaunchBone    = TERTIARY STAFF
            Shadow				= SHADOW_ADDITIVE_DECAL
            ShadowSizeX			= 200;
            ShadowSizeY			= 200;
            ShadowTexture		= EXGandalfGlow;
		End

		ModelConditionState		= USER_1
			Model               = GUGandalfG_SKN
			WeaponLaunchBone    = TERTIARY STAFF 
			ParticleSysBone     = STAFF GandalfMoriaLight FollowBone:Yes
			ParticleSysBone     = STAFF GandalfMoriaLightCenter FollowBone:Yes
            Shadow				= SHADOW_ADDITIVE_DECAL
            ShadowSizeX			= 200;
            ShadowSizeY			= 200;
            ShadowTexture		= EXGandalfGlow;
		End
		
		;;; Mounted version of Gandalf White ;;;
		ModelConditionState		= MOUNTED HERO
			Model               = GUGdfHrs_SKN_M
			WeaponLaunchBone    = PRIMARY PASSENGERBONE
			WeaponLaunchBone    = TERTIARY STAFF
		End

		;;; Mounted version of Gandalf Grey ;;;
		ModelConditionState		= MOUNTED
			Model               = GUGdfGHrs_SKN
			WeaponLaunchBone    = PRIMARY PASSENGERBONE
			WeaponLaunchBone    = TERTIARY STAFF
		End
		
		;;; Gandalf the White version on foot ;;;
		ModelConditionState = HERO ;turn me white when the spell is cast
			Model               = GUGandalf_SKN
			WeaponLaunchBone    = TERTIARY STAFF 
		End

		ModelConditionState = WORLD_BUILDER
			Model = None
		End		

		IdleAnimationState
			StateName = Idle
			Animation = Foot_IDLB ; Bored Idle
				AnimationName       = GUGandalfG_SKL.GUGandalfG_IDLB
				AnimationMode       = ONCE
				AnimationPriority   = 20
			End
			Animation = Foot_IDLC ; Bored Fidget
				AnimationName       = GUGandalfG_SKL.GUGandalfG_IDLC
				AnimationMode       = ONCE
				AnimationPriority   = 2
			End
			Animation = Foot_IDLD ; Bored Fidget
				AnimationName       = GUGandalfG_SKL.GUGandalfG_IDLD
				AnimationMode       = ONCE
				AnimationPriority   = 1
			End
			Animation = Foot_IDLE ; Bored Fidget
				AnimationName       = GUGandalfG_SKL.GUGandalfG_IDLE
				AnimationMode       = ONCE
				AnimationPriority   = 2
			End
			Animation = Foot_IDLF ; Bored Fidget
				AnimationName       = GUGandalfG_SKL.GUGandalfF_IDLF
				AnimationMode       = ONCE
				AnimationPriority   = 1
			End
			
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Selected" then CurDrawableSetTransitionAnimState("TRANS_Selected_To_Idle") end
				CurDrawableHideSubObject("STAFF_LIGHT")			
			EndScript			
						
		End

		; --- stunned anims  Which must go before deaths in case we are dying in the air.  Plus, DyingSplatted must of course be before Dying
		AnimationState				=	MOUNTED STUNNED_FLAILING 
			Animation				=	JustDie
				AnimationName		=	GUGdfHrs_SKL.GUGdfHrs_FLYB
				AnimationMode		=	LOOP
			End
			Flags					=	RANDOMSTART
		End
		
		AnimationState				=	MOUNTED DYING SPLATTED
			Animation				=	Land
				AnimationName		=	GUGdfHrs_SKL.GUGdfHrs_LNDA
				AnimationMode		=	ONCE
			End
		End
		
		AnimationState				=	MOUNTED DYING	
			Animation				=	JustDie
				AnimationName		=	GUGdfHrs_SKL.GUGdfHrs_DIEA
				AnimationMode		=	ONCE
			End
		End
		
		AnimationState				=	MOUNTED STUNNED_STANDING_UP
			Animation				=	StandUp
				AnimationName		=	GUGdfHrs_SKL.GUGdfHrs_GTPA
				AnimationMode		=	ONCE
			End
		End

		AnimationState				=	MOUNTED STUNNED
			Animation				=	Land
				AnimationName		=	GUGdfHrs_SKL.GUGdfHrs_LNDA
				AnimationMode		=	ONCE
			End
		End
		
		

		

		

		AnimationState      = STUNNED_FLAILING 
			Animation = StunnedFlail
				AnimationName         = GUGandalfG_SKL.GUGandalfG_FLYA
				AnimationMode     = LOOP
			End
		End
		
		AnimationState      = DYING SPLATTED
			Animation = Stunned
				AnimationName         = GUGandalfG_SKL.GUGandalfG_LNDA
				AnimationMode     = ONCE
			End
;      ;ParticleSysBone   = None GandalfIllumination FollowBone:yes FXTrigger:NONE Persist:KILL PersistID:100
		End
		
		AnimationState        = DYING AFLAME
			Animation = DieAflame
				AnimationName           = GUGandalfG_SKL.GUGandalfG_MFDA
				AnimationMode       = LOOP
			End
		End
		
		AnimationState        = DYING
			Animation = Die
				AnimationName           = GUGandalfG_SKL.GUGandalfG_DIEB
				AnimationMode       = ONCE
			End
;      ;ParticleSysBone     = None GandalfIllumination FollowBone:yes FXTrigger:NONE Persist:KILL PersistID:100
		End

		AnimationState        = STUNNED_STANDING_UP
			Animation           = GUGandalfG_GTPA
				AnimationName     = GUGandalfG_SKL.GUGandalfG_GTPA
				AnimationMode     = ONCE
			End
		End
		
		AnimationState      = STUNNED
			Animation = Stunned
				AnimationName         = GUGandalfG_SKL.GUGandalfG_LNDA
				AnimationMode     = ONCE
			End
;      ;ParticleSysBone   = None GandalfIllumination FollowBone:yes FXTrigger:NONE Persist:KILL PersistID:100
		End

		
		
		
		
		

		AnimationState        =  PASSENGER EATING
			StateName = BeingEaten
			Animation
				AnimationName           = GUGandalfG_SKL.GUGandalfG_EATA
				AnimationMode       = ONCE
				AnimationBlendTime	=	4
			End
		End
	
		AnimationState        =  PASSENGER
		StateName = BeingEaten
			Animation
				AnimationName           = GUGandalfG_SKL.GUGandalfG_FLLA
				AnimationMode       = LOOP
				AnimationBlendTime	=	4
			End
		End
	
		;;; WORD OF POWER ANIMS MOUNTED ;;;
		AnimationState        =  SPECIAL_WEAPON_ONE MOUNTED
			StateName = Attacking
			Animation
				AnimationName		= GUGdfHrs_SKL.GUGdfHrs_SPLA
				AnimationMode       = ONCE
				AnimationBlendTime	=	4
			End
			FXEvent			= Frame:5 Name:FX_GandalfPreAttackBlast			
		End
	
		;;; WORD OF POWER ANIMS ON FOOT ;;;
		AnimationState        =  SPECIAL_WEAPON_ONE
			StateName = Attacking
			Animation
				AnimationName           = GUGandalfG_SKL.GUGandalfG_SPCK
				AnimationMode       = ONCE
			End
			FXEvent			= Frame:5 Name:FX_GandalfPreAttackBlast
		End

		;;; WIZARD BLAST ANIMS MOUNTED ;;;
		AnimationState        =  SPECIAL_WEAPON_TWO MOUNTED
			StateName = Attacking
			Animation
				AnimationName		= GUGdfHrs_SKL.GUGdfHrs_SPLD
				AnimationMode       = ONCE
			End
		End
	
		;;; WIZARD BLAST ANIMS ON FOOT ;;;
		AnimationState        =  SPECIAL_WEAPON_TWO
			StateName = Attacking
			Animation
				AnimationName       = GUGandalfG_SKL.GUGandalfG_SPCL
				AnimationMode       = ONCE
			End
		End
		
		;;; LIGHTNING CHARGE ANIMS MOUNTED ;;;
		AnimationState        =  MOUNTED PACKING_TYPE_1 UNPACKING
			StateName = Attacking
			Animation = LightningSwordStart
				AnimationName           = GUGdfHrs_SKL.GUGdfHrs_SPE1
				AnimationMode       = ONCE
			End
			FXEvent			= Frame:14 Name:FX_GandalfLightningCharge
;			FXEvent			= Frame:70 Name:FX_GandalfLightningFizzle
			FXEvent			= Frame:14 Name:FX_GandalfLightningSword  FrameStop:70
		End
	
		AnimationState        =  MOUNTED PACKING_TYPE_1 PREPARING
			StateName = Attacking
			Animation = LightningSwordLoop
				AnimationName           = GUGdfHrs_SKL.GUGdfHrs_SPE2
				AnimationMode       = LOOP
			End
		End

		AnimationState        =  MOUNTED PACKING_TYPE_1 PACKING
			StateName = Attacking
			Animation = LightningSwordPutAway
				AnimationName           = GUGdfHrs_SKL.GUGdfHrs_SPE3
				AnimationMode       = ONCE
			End
		End

		;;; LIGHTNING CHARGE ANIMS ON FOOT ;;;
		AnimationState        =  PACKING_TYPE_1 UNPACKING
			StateName = Attacking
			Animation = LightningSwordStart
				AnimationName           = GUGandalfG_SKL.GUGandalfG_SPE3
				AnimationMode       = ONCE
			End
			FXEvent			= Frame:14 Name:FX_GandalfLightningCharge
;			FXEvent			= Frame:70 Name:FX_GandalfLightningFizzle
			FXEvent			= Frame:14 Name:FX_GandalfLightningSword  FrameStop:70
		End
	
		AnimationState        =  PACKING_TYPE_1 PREPARING
			StateName = Attacking
			Animation = LightningSwordLoop
				AnimationName           = GUGandalfG_SKL.GUGandalfG_SPE2
				AnimationMode       = LOOP
			End
		End

		AnimationState        =  PACKING_TYPE_1 PACKING
			StateName = Attacking
			Animation = LightningSwordPutAway
				AnimationName           = GUGandalfG_SKL.GUGandalfG_SPE1
				AnimationMode       = ONCE
			End
		End

		;;; ISTARI LIGHT STAFF WEAPON MOUNTED ;;;
		AnimationState        =  MOUNTED SPECIAL_WEAPON_THREE ; FIRING_OR_PREATTACK_C
			StateName = Attacking
			Animation = StaffLaser
				AnimationName           = GUGdfHrs_SKL.GUGdfHrs_SPLG
				AnimationMode       = ONCE
			End
			FXEvent			= Frame:30 Name:FX_GandalfStaffFlare
		End

		;;; ISTARI LIGHT STAFF WEAPON ON FOOT ;;;
		AnimationState        =  SPECIAL_WEAPON_THREE ; FIRING_OR_PREATTACK_C
			StateName = Attacking
			Animation = StaffLaser
				AnimationName           = GUGandalfG_SKL.GUGandalfG_SPCH ; isitari's light?
				AnimationMode       = ONCE
			End
			FXEvent			= Frame:30 Name:FX_GandalfStaffFlare
		End
		
		;;; Summoning Shadow Fax ;;;
		AnimationState        =  UNPACKING
			StateName = Attacking
			Animation
				AnimationName		= GUGdfHrs_SKL.GUGdfHrs_SPCJ
				AnimationMode       = ONCE
			End
		End
		
		;;; Moving Standard Attack Anims ;;;
		AnimationState				=	MOUNTED FIRING_OR_PREATTACK_A MOVING
			Animation				=	MountedRunAndFire
				AnimationName		=	GUGdfHrs_SKL.GUGdfHrs_ATRA
				AnimationMode		=	LOOP
				Distance			=	60
			End
		End
		
		AnimationState				=	MOUNTED BETWEEN_FIRING_SHOTS_A MOVING
			Animation				=	TrotBetweenShotsMoving
				AnimationName		=	GUGdfHrs_SKL.GUGdfHrs_WLKA
				AnimationMode		=	LOOP
				Distance			=	30
			End
		End
		
		;;; Standard Attack Anims ;;;
		AnimationState				=	MOUNTED FIRING_OR_PREATTACK_A
			Animation				=	MountedSlash
				AnimationName		=	GUGdfHrs_SKL.GUGdfHrs_ATKA
				AnimationMode		=	ONCE
				UseWeaponTiming		= Yes
			End
			Animation				=	MountedStab
				AnimationName		=	GUGdfHrs_SKL.GUGdfHrs_ATKB
				AnimationMode		=	ONCE
				UseWeaponTiming		= Yes
			End
		End
		
		
		
		
		AnimationState        = MOVING FIRING_OR_PREATTACK_A
			ShareAnimation		= Yes
			Animation           = RunAndFire
				AnimationName       = GUGandalfG_SKL.GUGandalfG_ATRA
				AnimationMode       = LOOP
			End
			Flags               = RANDOMSTART  
		End
		

		AnimationState        =  FIRING_OR_PREATTACK_A
			Animation = StaffSwing
				AnimationName           = GUGandalfG_SKL.GUGandalfG_ATKA
				AnimationMode       = ONCE
				UseWeaponTiming		= Yes
			End
			Animation = SwordSwing
			  AnimationName           = GUGandalfG_SKL.GUGandalfG_ATKB	
			  AnimationMode       = ONCE
			  UseWeaponTiming		= Yes
			End
			Animation = SpinningSwordStaff
			  AnimationName           = GUGandalfG_SKL.GUGandalfG_ATKC	
			  AnimationMode       = ONCE
			  UseWeaponTiming		= Yes
			End			
		End


		;;; Moving Anims ;;;
		
		AnimationState				=	MOUNTED TURN_RIGHT_HIGH_SPEED
			Animation				=	TurnRight
				AnimationName		=	GUGdfHrs_SKL.GUGdfHrs_TNR1
				AnimationMode		=	LOOP
			End
;			;ParticleSysBone			=	None CalvaryDustTrails
		End
		
		AnimationState				=	MOUNTED TURN_LEFT_HIGH_SPEED 
			Animation				=	TurnRight
				AnimationName		=	GUGdfHrs_SKL.GUGdfHrs_TNL1
				AnimationMode		=	LOOP
			End
;			;ParticleSysBone			=	None CalvaryDustTrails
		End
		
		AnimationState				=	MOUNTED TURN_LEFT 
			Animation				=	TurnLeft
				AnimationName		=	GUGdfHrs_SKL.GUGdfHrs_TRNL
				AnimationMode		=	LOOP
			End
;			;ParticleSysBone			=	None CalvaryDustTrails
		End

		AnimationState				=	MOUNTED TURN_RIGHT 
			Animation				=	TurnRight
				AnimationName		=	GUGdfHrs_SKL.GUGdfHrs_TRNR
				AnimationMode		=	LOOP
			End
;			;ParticleSysBone			=	None CalvaryDustTrails
		End

		AnimationState				=	MOUNTED MOVING ACCELERATE
			Animation				=	Accelerate
				AnimationName		=	GUGdfHrs_SKL.GUGdfHrs_ACCL
				AnimationMode		=	LOOP
			End
			;ParticleSysBone			=	None CalvaryDustTrails
		End

		AnimationState				=	MOUNTED MOVING DECELERATE
			Animation				=	Decelerate
				AnimationName		=	GUGdfHrs_SKL.GUGdfHrs_DECL
				AnimationMode		=	ONCE
			End
			;ParticleSysBone			=	None CalvaryDustTrails
		End

		AnimationState				=	MOUNTED MOVING WALKING
			Animation				=	Walk
				AnimationName		=	GUGdfHrs_SKL.GUGdfHrs_WLKA
				AnimationMode		=	LOOP
			End
			Flags					=	RANDOMSTART
			;ParticleSysBone			=	None InfantryDustTrails  
		End
		
		AnimationState				=	MOUNTED MOVING BACKING_UP
			Animation				=	BackingUp
				AnimationName		=	GUGdfHrs_SKL.GUGdfHrs_BAKA
				AnimationMode		=	LOOP
			End
			Flags					=	RANDOMSTART
			;ParticleSysBone			=	None InfantryDustTrails  
		End


		AnimationState				=	MOUNTED MOVING
			Animation				=	RunA
				AnimationName		=	GUGdfHrs_SKL.GUGdfHrs_RUNA
				AnimationMode		=	LOOP
			End
 			Flags					=	RANDOMSTART
			;ParticleSysBone			=	None CalvaryDustTrails  
		End
		
		
		
		AnimationState        = MOVING WANDER
			Animation = Wandering
				AnimationName           = GUGandalfG_SKL.GUGandalfG_WLKA ;32
				AnimationMode       = LOOP
			End
		End
	
		AnimationState        = MOVING
			Animation = Moving
				AnimationName           = GUGandalfG_SKL.GUGandalfG_RUNB ;20
				AnimationMode       = LOOP
			End
			Flags               = RANDOMSTART
		End
		
		
		AnimationState        = MOUNTED LEVELED	USER_1; This state clears itself in 3 of your Earth seconds
			Animation = Yippee
				AnimationName           = GUGdfHrs_SKL.GUGdfHrs_LVLA
				AnimationMode       = ONCE
			End
			BeginScript
				CurDrawableShowSubObject("STAFF_LIGHT")			
			EndScript						
		End

		AnimationState        = MOUNTED LEVELED	; This state clears itself in 3 of your Earth seconds
			Animation = Yippee
				AnimationName           = GUGdfHrs_SKL.GUGdfHrs_LVLA
				AnimationMode       = ONCE
			End
		End
		
		; READY IDLE
		AnimationState        = EMOTION_ALERT
			Animation           = ALERT_1
				AnimationName     = GUGandalfG_SKL.GUGandalfG_IDLA
				AnimationMode     = ONCE
			End
			Flags               = RESTART_ANIM_WHEN_COMPLETE ; acts like an idle animation & keeps running the animations.
		End

		AnimationState        = LEVELED	USER_1; This state clears itself in 3 of your Earth seconds
			Animation = Yippee
				AnimationName           = GUGandalfG_SKL.GUGandalfG_LVLA
				AnimationMode       = ONCE
			End
			BeginScript
				CurDrawableShowSubObject("STAFF_LIGHT")			
			EndScript						
		End

		AnimationState        = LEVELED	; This state clears itself in 3 of your Earth seconds
			Animation = Yippee
				AnimationName           = GUGandalfG_SKL.GUGandalfG_LVLA
				AnimationMode       = ONCE
			End
		End
		
		AnimationState				=	MOUNTED SELECTED USER_1
			SimilarRestart			=   Yes			
			StateName				=	AtAttentionIdle
			Animation				=	ATNB
				AnimationName		=	GUGdfHrs_SKL.GUGdfHrs_ATNB
				AnimationMode		=	LOOP
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_MountedSelect") end
				if Prev == "AtAttentionIdle" then CurDrawableSetTransitionAnimState("TRANS_MountedSelect") end
			EndScript
		End

		AnimationState				=	MOUNTED SELECTED
			SimilarRestart			=   Yes			
			StateName				=	AtAttentionIdle
			Animation				=	ATNB
				AnimationName		=	GUGdfHrs_SKL.GUGdfHrs_ATNB
				AnimationMode		=	LOOP
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_MountedSelect") end
				if Prev == "AtAttentionIdle" then CurDrawableSetTransitionAnimState("TRANS_MountedSelect") end
				CurDrawableHideSubObject("STAFF_LIGHT")							
			EndScript
		End

		TransitionState				=	TRANS_MountedSelect
			Animation				=	ATNA
				AnimationName		=	GUGdfHrs_SKL.GUGdfHrs_ATNA
				AnimationMode		=	ONCE
			End
		End
		
		TransitionState					=	TRANS_Idle_to_Selected
			Animation					=	ATNA
				AnimationName			=	GUGandalfG_SKL.GUGandalfG_ATNA
				AnimationMode			=	ONCE
			End
		End
		
		TransitionState					=	TRANS_Selected_To_Idle
			Animation					=	ATNE ;ATNC
				AnimationName			=	GUGandalfG_SKL.GUGandalfG_ATNE ;C
				AnimationMode			=	ONCE
			End
		End

		AnimationState				=	SELECTED USER_1
			StateName				=	Selected
			SimilarRestart			=   Yes			
			Animation				=	ATNB			
				AnimationName		=	GUGandalfG_SKL.GUGandalfG_ATNB
				AnimationMode		=	LOOP
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Idle_to_Selected") end
			EndScript
		End

		AnimationState				=	SELECTED
			StateName				=	Selected
			SimilarRestart			=   Yes			
			Animation				=	ATNB			
				AnimationName		=	GUGandalfG_SKL.GUGandalfG_ATNB
				AnimationMode		=	LOOP
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Idle_to_Selected") end
				CurDrawableHideSubObject("STAFF_LIGHT")			
			EndScript
		End
		
		AnimationState = MOUNTED HIT_REACTION HIT_LEVEL_1
			Animation = Hit_Level_1_a
				AnimationName = GUGdfHrs_SKL.GUGdfHrs_HITA
				AnimationMode = ONCE
			End
		End

		AnimationState = HIT_REACTION HIT_LEVEL_1
			Animation = Hit_Level_1_a
				AnimationName = GUGandalfG_SKL.GUGandalfG_HITA
				AnimationMode = ONCE
			End
		End
		
		AnimationState = MOUNTED
			StateName = Idle
			Animation	=	IdleA
				AnimationName		=	GUGdfHrs_SKL.GUGdfHrs_IDLA
				AnimationPriority	=	30
				AnimationMode		=	ONCE
				AnimationBlendTime	=	15
			End
			Animation				=	IdleC
				AnimationName		=	GUGdfHrs_SKL.GUGdfHrs_IDLC
				AnimationMode		=	ONCE
				AnimationBlendTime	=	15
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End
		
		AnimationState        =  USER_1
			StateName = user_1_idle
			Animation = Foot_IDLB ; Bored Idle
				AnimationName       = GUGandalfG_SKL.GUGandalfG_IDLB
				AnimationMode       = ONCE
				AnimationPriority   = 2
			End
			Animation = Foot_IDLC ; Bored Fidget
				AnimationName       = GUGandalfG_SKL.GUGandalfG_IDLC
				AnimationMode       = ONCE
				AnimationPriority   = 2
			End
			Animation = Foot_IDLD ; Bored Fidget
				AnimationName       = GUGandalfG_SKL.GUGandalfG_IDLD
				AnimationMode       = ONCE
				AnimationPriority   = 1
			End
			Animation = Foot_IDLE ; Bored Fidget
				AnimationName       = GUGandalfG_SKL.GUGandalfG_IDLE
				AnimationMode       = ONCE
				AnimationPriority   = 2
			End
			Animation = Foot_IDLF ; Bored Fidget
				AnimationName       = GUGandalfG_SKL.GUGandalfF_IDLF
				AnimationMode       = ONCE
				AnimationPriority   = 1
			End
			
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Selected" then CurDrawableSetTransitionAnimState("TRANS_Selected_To_Idle") end
				CurDrawableShowSubObject("STAFF_LIGHT")			
			EndScript			
		End

	End
	End
	WeaponSet
		Conditions = None 
		Weapon = PRIMARY    GandalfSword
	End

	WeaponSet
		Conditions		= WEAPONSET_HERO_MODE
		Weapon			= PRIMARY    GandalfHeroSword
	End

	ArmorSet
		Conditions      = None
		Armor           = GandalfArmor
		DamageFX        = NormalDamageFX
	End

;<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;             Modules
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

      AddModule
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_AragornBladeMasterEnabler
		SpecialPowerTemplate = SpecialAbilityAragornBladeMaster
		TriggeredBy = Upgrade_AragornBladeMaster
	End
      End
      AddModule
  	Behavior = SpecialPowerModule ModuleTag_AragornBladeMasterStarter
		SpecialPowerTemplate    = SpecialAbilityAragornBladeMaster
		StartsPaused			= Yes
            TriggerFX                  = FX_FlamesFromTheDeep
	End
      End

      	AddModule
	Behavior = HeroModeSpecialAbilityUpdate ModuleTag_AragornBladeMasterUpdate
		SpecialPowerTemplate    = SpecialAbilityAragornBladeMaster
		HeroAttributeModifier	= AsernorothBane
		HeroEffectDuration		= 20000 ; in milliseconds
		UnpackTime              = 1
	End
	End
	AddModule
	Behavior = SpecialPowerModule ModuleTag_newAthelas
		SpecialPowerTemplate    = SpecialAbilityAragornAthelas
		UpdateModuleStartsAttack  = Yes
		TriggerFX				= FX_AragornAthelas
		SetModelCondition		= ModelConditionState:USER_2
		SetModelConditionTime	= 2.1
	End
	End
	AddModule
	Behavior = SpecialAbilityUpdate ModuleTag_newAthelasUpdate               
		SpecialPowerTemplate    = SpecialAbilityAragornAthelas
		StartAbilityRange       = 1.6
		UnpackTime              = 1		; Nothing to touching it
		PreparationTime         = 3		; touching it to grabbing it
		PackTime                = 2096  ; whacking it to holding it nice
		AwardXPForTriggering    = 0
	End
	End
	AddModule
	Behavior = AutoAbilityBehavior ModuleTag_newAutoAbility
		SpecialAbility	= SpecialAbilityAragornAthelas
		MaxScanRange	= 150
		Query			= 2 NONE +HERO ALLIES
	End
	End
	AddModule
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_ganfire
	SpecialPowerTemplate = SpecialAbilityGandalfFlare
	TriggeredBy = Upgrade_GandalfIstariLight
	End
	End
	AddModule
	Behavior = OCLSpecialPower ModuleTag_ganfire1
	SpecialPowerTemplate = SpecialAbilityGandalfFlare
	OCL                  = OCL_SpecialPowerSunflare
	CreateLocation       = USE_SECONDARY_OBJECT_LOCATION
	NearestSecondaryObjectFilter = NONE SAME_PLAYER +CASTLE_KEEP 
	StartsPaused		 = Yes
	End
	End
	AddModule
	Behavior = GrantUpgradeCreate ModuleTag_Costume1
		UpgradeToGrant = Upgrade_GandalfWhite  ;
	End 
	End
	AddModule
	Behavior = SubObjectsUpgrade Costume_Change1
		TriggeredBy		= Upgrade_GandalfWhite ;
		UpgradeTexture	= GUGandalfG.tga 0 MUBalIGNT.tga
				RecolorHouse	= No
	End
	End
End

;<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
;							Shelob
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

CommandButton Command_WildShelobPoisonedStinger
  Command                 = SPECIAL_POWER 
  SpecialPower            = SpecialAbilityWordOfPower
;  Options                 = 
  TextLabel               = CONTROLBAR:WordofPower
  ButtonImage             = Gandolf_radcircle;HSGandalfWordOfPower
  ButtonBorderType        = ACTION 
  DescriptLabel           = CONTROLBAR:ToolTipWordofPower
  AutoAbility			  = Yes
  PresetRange			  = 120.0
;  UnitSpecificSound       = 
  InPalantir			  = Yes
End

CommandSet SuperShelobCommandSet
	1	= Command_ToggleStance
	2	= Command_WildShelobPoisonedStinger
End

Object MordorShelob

  	KindOf          = HERO PRELOAD SELECTABLE CAN_CAST_REFLECTIONS MONSTER SCORE CAN_ATTACK NO_FREEWILL_ENTER PATH_THROUGH_INFANTRY SCARY BIG_MONSTER CAN_ATTACK_WALLS
	DisplayName = Servant of Maia
	ButtonImage = HIShelob
	SelectPortrait = HPShelob

	CommandSet = SuperShelobCommandSet

	ArmorSet
		Conditions      = None
		Armor           = ShelobArmor
		DamageFX        = NormalDamageFX
	End

	ShockwaveResistance = SHOCKWAVE_RESISTANCE_ALWAYS

	ReplaceModule ModuleTag_RespawnBody
	Body = RespawnBody ModuleTag_RespawnBody1
		MaxHealth         = 10000               ;BALANCE Shelob Health
		PermanentlyKilledByFilter	= NONE		;Who kills me permanently?
	End
	End

	AddModule
	Behavior = GrantUpgradeCreate ModuleTag_GGGGGG
		UpgradeToGrant = Upgrade_GandalfWhite  ;
	End 
	End
	AddModule
	Behavior = SubObjectsUpgrade Costume_gdfhdasfd
		TriggeredBy		= Upgrade_GandalfWhite ;
		UpgradeTexture	= MUShelobH.tga 0 MUWtchKngFllBst.tga
				RecolorHouse	= No
	End
	End
	AddModule
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_s-wordEnabler
		SpecialPowerTemplate = SpecialAbilityWordOfPower
		TriggeredBy = Upgrade_GandalfWhite
	End
	End
	AddModule
	Behavior = SpecialPowerModule ModuleTag_s-wordStarter       
		SpecialPowerTemplate      = SpecialAbilityWordOfPower
		UpdateModuleStartsAttack  = Yes
		StartsPaused		  	  = Yes
	End
	End
	AddModule
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_s-wordWeaponFireUpdate   
		SpecialPowerTemplate    = SpecialAbilityWordOfPower
		WhichSpecialWeapon		= 1
		SkipContinue			= Yes

		UnpackTime              = 1700 
		PackTime                = 1	
		FreezeAfterTriggerDuration = 2500 ; Hold AI for this long after we fire.
		
		AwardXPForTriggering    = 0		
		StartAbilityRange		= 80.0
		
		SpecialWeapon			= GandalfWordOfPower
	End
	End


	LocomotorSet
		Locomotor     = ShelobWallScalingLocomotor
		Condition     = SET_NORMAL
		Speed         = 100
	End

	Scale		= 1.3
	Geometry			= CYLINDER
	GeometryMajorRadius = 80.0
	GeometryHeight		= 80.0
	GeometryIsSmall		= No
	Shadow				= SHADOW_VOLUME ;SHADOW_DECAL	; SHADOW_VOLUME has trouble with his wings.  Possibly because of the transparent bits
	ShadowSizeX			= 100
	ShadowSizeY			= 80
	ShadowTexture		= ShadowI
End

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
;							Aragorn
;<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

;<<<<<
; FX
;>>>>>

FXParticleSystem AODFlame
  System
    Priority = ALWAYS_RENDER
    Shader = W3D_EMISSIVE
    Type = DRAWABLE
    ParticleName = exlightshafts01.w3d
    Lifetime = 1500 1500
    SystemLifetime = 15
    StartSizeRate = 0.2 0.2
    BurstCount = 1 1
  End
  Color = DefaultColor
    Color1 = R:205 G:255 B:205 0
    Color2 = R:0 G:0 B:0 39
  End
  Alpha = DefaultAlpha
    Alpha1 = 0.3 0.3 0
  End
  Update = DefaultUpdate
    SizeRate = 0.5 0.5
    SizeRateDamping = 1 1
    AngleZ = -100 100
    AngularRateZ = -0.1 0.1
    AngularDamping = 0.97 0.97
    Rotation = ROTATE_Z
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = PointEmissionVolume
  End
  Draw = RenderObjectDraw
  End
End

FXParticleSystem AODShafts
  System
    Priority = ALWAYS_RENDER
    Shader = W3D_EMISSIVE
    Type = DRAWABLE
    ParticleName = exlight01.w3d
    Lifetime = 1500 1500
    SystemLifetime = 15
    StartSizeRate = 0.2 0.2
    BurstCount = 1 1
  End
  Color = DefaultColor
    Color1 = R:205 G:255 B:205 0
    Color2 = R:0 G:0 B:0 39
  End
  Alpha = DefaultAlpha
    Alpha1 = 0.3 0.3 0
  End
  Update = DefaultUpdate
    SizeRate = 0.5 0.5
    SizeRateDamping = 1 1
    AngleZ = -100 100
    AngularRateZ = -0.1 0.1
    AngularDamping = 0.97 0.97
    Rotation = ROTATE_Z
  End
  Physics = DefaultPhysics
    VelocityDamping = 1 1
  End
  EmissionVelocity = OrthoEmissionVelocity
  End
  EmissionVolume = PointEmissionVolume
  End
  Draw = RenderObjectDraw
  End
End

FXList FX_AODBlade
  ParticleSystem
    Name = AODFlame
    Offset = X:0.0 Y:0.0 Z:5.0
  End
  ParticleSystem
    Name = AODShafts
    Offset = X:0.0 Y:0.0 Z:5.0
  End
  Sound
    Name = GandalfBlastWeapon
  End
End

FXParticleSystem AragornFinalShockWave
  System
    Priority = ALWAYS_RENDER
    ParticleName = EXRing01.tga
    Lifetime = 40 40
    SystemLifetime = 5
    SortLevel = 1
    Size = 1 1
    BurstCount = 1 1
    IsGroundAligned = Yes
  End
  Color = DefaultColor
    Color1 = R:000 G:255 B:000 0
    Color2 = R:0 G:0 B:0 40
    ColorScale = -40 40
  End
  Update = DefaultUpdate
    SizeRate = 35 35
    SizeRateDamping = 1 1
    AngleZ = -1 1
    AngularDamping = 1 1
    AngularDampingXY = 1 1
  End
  Physics = DefaultPhysics
    VelocityDamping = 0.8 0.8
  End
  EmissionVelocity = OutwardEmissionVelocity
  End
  EmissionVolume = PointEmissionVolume
    IsHollow = Yes
  End
  Draw = DefaultDraw
  End
End

FXList FX_AraWave
 ParticleSystem
    Name = TaintSwampCloud
    Offset = X:0.0 Y:0.0 Z:0.0
  End
 ParticleSystem
    Name = TaintLightLenzflare
    Offset = X:0.0 Y:0.0 Z:0.0
  End
  ParticleSystem
    Name = TaintLightShafts
    Offset = X:0.0 Y:0.0 Z:0.0
  End
 ParticleSystem
    Name = AragornFinalShockWave
    Offset = X:0.0 Y:0.0 Z:20.0
  End
End

;--Aragorn Blade Master--

ModifierList PowerOfAnduril
	Category = WEAPON
	Modifier = DAMAGE_MULT 200%
	Modifier = ARMOR 150%
	Modifier = SPEED 200%
	Duration = 400
	FX		 = FX_AODBlade
End

;<<<<<<<<<<<<
;  Weapons
;>>>>>>>>>>>>

Weapon AragornSwordNew
LeechRangeWeapon      = Yes
  AttackRange           = 10.0
  RadiusDamageAffects   = ENEMIES NOT_SIMILAR
  MeleeWeapon           = Yes
  FireFX                = FX_GandalfSwordHit
  DelayBetweenShots     = 300			; time between shots, msec
  PreAttackDelay        = 1000 	; 400 is sword swing delay time before contact with target.
  PreAttackType         = PER_SHOT ; Do the delay each time we attack a new target
  FiringDuration        = 600 	; Duration of the sword swing
	DamageNugget                        ; A basic Nugget that just does damage
		Damage			= 100
		Radius			= 22.0
		DamageType		= MAGIC
		DamageFXType	= ELECTRIC
		DeathType		= NORMAL
	End
	MetaImpactNugget                    ; A Nugget that throws things back with force
		HeroResist			= 0.75
		ShockWaveAmount   = 50.0
		ShockWaveRadius   = 30.0
		ShockWaveTaperOff = 0.4
		ShockWaveZMult    = 1.050
	End
End

;<<<<<<<<<<<<<<<<<<<<
;  Ability Weapons
;>>>>>>>>>>>>>>>>>>>>

Weapon AragornHeroSword
  LeechRangeWeapon      = Yes
  AttackRange           = 30.0
  MeleeWeapon           = Yes
  DelayBetweenShots     = 100
  PreAttackDelay        = 533
  PreAttackType         = PER_SHOT
  FireFX                = FX_AODBlade
  FiringDuration        = 400
  RadiusDamageAffects = ENEMIES NOT_SIMILAR
  ClearNuggets
  DamageNugget
    Damage        = 200
    Radius        = 66.0
    DelayTime     = 0
    DamageType    = MAGIC
    DamageFXType  = ELECTRIC
    DeathType     = EXPLODED
    DamageArc     = 600
    DamageSpeed		= 350.0 ; must match the ShockWaveSpeed below
  End
  MetaImpactNugget
    HeroResist			= .00
    ShockWaveAmount   = 60.0		
    ShockWaveRadius   = 66.0
    ShockWaveTaperOff = 0.4
    ShockWaveArc      = 600
    ShockWaveSpeed	  = 350.0
  End
End

Weapon AragornWordOfPower ; Big Blue Ring Blast
	IdleAfterFiringDelay = 0
	AttackRange = GANDALF_WORD_OF_POWER_RANGE
	MinimumAttackRange = 0.8
	WeaponSpeed = 401         ; dist/sec 
	MinWeaponSpeed = 241
	MaxWeaponSpeed = 601      ; dist/sec Upper limit on scaling, when attacking past nominal "max" range
	ScaleWeaponSpeed = Yes ; Used for lob weapons, scales speed proportional to range
	RadiusDamageAffects = ENEMIES NOT_SIMILAR
	DelayBetweenShots = 5000               ; time between shots, msec
	PreAttackDelay        = 2600
	PreAttackType         = PER_ATTACK ; Do the delay each time we attack a new target
	FireFX                = FX_AraWave
	FiringDuration      = 1400
	DamageNugget                        ; A basic Nugget that just does damage
		Damage			= GANDALF_WORD_OF_POWER_DAMAGE
		Radius			= 250.0
		DamageType		= MAGIC
		DamageFXType	= MAGIC
		DeathType		= EXPLODED
		DamageSpeed		= 700.0 ; must match the ShockWaveSpeed below
	End
	MetaImpactNugget                    ; A Nugget that throws things back with force
;		HeroResist			= .75
		ShockWaveAmount   = 75.0
		ShockWaveRadius   = 500.0
		ShockWaveTaperOff = 1.0
		ShockWaveZMult    = 1.000
		ShockWaveSpeed	  = 700.0 
	End
End

Weapon AragornSlam
	RadiusDamageAffects		= ENEMIES
	LeechRangeWeapon		= Yes
	CanFireWhileMoving		= No
	AttackRange			= 30.0
	MeleeWeapon			= Yes
	WeaponSpeed           = 799999.2        ; dist/sec (huge value == effectively instant)
	FireFX				= FX_GloinSlam
	DelayBetweenShots     = GLOIN_DELAYBETWEENSHOTS 	; time between shots, msec
	PreAttackDelay        = GLOIN_PREATTACKDELAY 	; 433 is natural time of the stabbing animation.
	PreAttackType         = PER_SHOT ; Do the delay each time we attack a new target
	FiringDuration        = GLOIN_FIRINGDURATION 		; min 600 for anim
	DamageDealtAtSelfPosition = Yes				; A melee based AoE.  Arc radiates from me, not them

	; Crush damage.
	DamageNugget								; A basic Nugget that just does damage
		Damage			= GLOIN_SLAM_DAMAGE
		Radius			= 50.0
		DamageArc		= 75
		DelayTime		= 0
		DamageType		= CRUSH
		DamageFXType	= MAGIC
		DeathType		= NORMAL
	End

	; SIEGE damage. - Changing all structural to siege damage. -GB
	DamageNugget								; A basic Nugget that just does damage
		Damage			= GLOIN_SLAM_DAMAGE_STRUCTURAL
		Radius			= 50.0
		DamageArc		= 75
		DelayTime		= 0
		DamageType		= SIEGE
		DamageFXType	= MAGIC
		DeathType		= NORMAL
	End

	; Push back
	MetaImpactNugget							; A Nugget that throws things back with force
;		HeroResist			= .75
		ShockWaveAmount		= 50
		ShockWaveRadius		= 45
		ShockWaveArc		= 75				; Should generally be equal to damage arc
		ShockWaveTaperOff	= 1.0
		ShockWaveSpeed		= 0.0
		ShockWaveZMult		= 1.6
	End

	ParalyzeNugget
		Radius				= 50.0
		Duration			= POISONED_STINGER_DURATION
		SpecialObjectFilter	= CRIPPLE_STRIKE_OBJECT_FILTER
		ParalyzeFX			= FX_PoisonedStunEffect
	End
End

;<<<<<<<<<<<<
;  Levels
;>>>>>>>>>>>>	

ExperienceLevel	AragornLevelMP5
	TargetNames						=	ARAGORN	
	RequiredExperience				=	ARAGORN_LVL6_EXP_NEEDED
	ExperienceAward					=	ARAGORN_LVL6_EXP_AWARD 	
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	Rank							=	5
	AttributeModifiers				=	HeroLevelUpDamage4
	Upgrades						=	Upgrade_AragornElendil
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%
		OpacityMax					=	100%
		MinRadius					=	40
		MaxRadius					=	200
		MaxSelectedUnits			=	40
	End	
End	

ExperienceLevel	AragornLevelMP9
	TargetNames						=	ARAGORN	
	RequiredExperience					=	ARAGORN_LVL9_EXP_NEEDED
	ExperienceAward						=	ARAGORN_LVL9_EXP_AWARD 
	LevelUpFx						=	FX:GandalfLevelUp1FX
	;LevelUpOCL						=	OCL_GandalfLevelUp1OCL
	Rank							=	9
	AttributeModifiers					=	HeroLevelUpDamage8
	Upgrades						=	Upgrade_AragornLeadership
	SelectionDecal
		Texture						=	decal_hero_good
		Style						=	SHADOW_ALPHA_DECAL
		OpacityMin					=	50%	
		OpacityMax					=	100%
		MinRadius					=	40
		MaxRadius					=	200
		MaxSelectedUnits				=	40
	End	
End	

;>>>>>>>>>>>>>>>>>>>>>>
;    Ability Timers
;<<<<<<<<<<<<<<<<<<<<<<

SpecialPower SpecialAbilityAODAragorn
	Enum			= SPECIAL_SPELL_BOOK_ARMY_OF_THE_DEAD
	ReloadTime      	= SPELL_RECHARGE_TIME_TIER_4 ; in milliseconds
	InitiateAtLocationSound = ArmyDeadEnterMono		;ArmyDeadEnterStereo	
	RadiusCursorRadius	= 200.0  
	ViewObjectDuration	= 5000
	ViewObjectRange		= 150
	Flags					= NO_FORBIDDEN_OBJECTS RESPECT_RECHARGE_TIME_DISCOUNT
	ForbiddenObjectFilter	= NO_SUMMON_UNDERMINE_NEAR_OBJECT_FILTER
	ForbiddenObjectRange	= 200.0
End

SpecialPower SpecialAbilityAragornWave
	Enum						   = SPECIAL_WORD_OF_POWER
	ReloadTime					   = 360000
End

SpecialPower SpecialAbilityAragornAthelas
	Enum						   = SPECIAL_ATHELAS
	ReloadTime					   = 50000
	RadiusCursorRadius			   = 300.0
	InitiateAtLocationSound		   = AragornAthelesEffect
End

SpecialPower SpecialAbilityAraSlam
	Enum					= SPECIAL_AT_VISIBLE_GROUNDED_OBJECT
	ReloadTime				= 12000
End

;>>>>>>>>>>>>>>>>>>>>>>
;Aragorn Commandbuttons
;>>>>>>>>>>>>>>>>>>>>>>

CommandButton Command_SpecialAbilityAthelas
  Command                 = SPECIAL_POWER 
  SpecialPower            = SpecialAbilityAragornAthelas
  TextLabel               = CONTROLBAR:AthelasNew
  ButtonImage             = HSAragornAthelas
  CursorName              = Bombard
  RadiusCursorType        = AthelasRadiusCursor
  InvalidCursorName       = GenericInvalid
  ButtonBorderType        = ACTION 
  DescriptLabel           = CONTROLBAR:ToolTipAthelasNew
  InPalantir			  = Yes
  AutoAbility			  = Yes
  PresetRange			  = 100.0
  NeedDamagedTarget		  = Yes
 ; UnitSpecificSound       = AragornVoiceAthelas
End

CommandButton Command_SpawnOathbreakers
  Command           = SPECIAL_POWER
  SpecialPower      = SpecialAbilityAODAragorn
  TextLabel         = CONTROLBAR:AOD
  ButtonImage       = UCOathbreaker_OathTimer
  Options           = NEED_TARGET_POS CONTEXTMODE_COMMAND
  RadiusCursorType  = ArmyOfTheDeadRadiusCursor
  CursorName        = Bombard
  InvalidCursorName = GenericInvalid  
  ButtonBorderType  = ACTION 
  DescriptLabel     = CONTROLBAR:TooltipAOD
  InPalantir	    = Yes
  ;UnitSpecificSound = AragornVoiceSummonOathbreakers
  ;AutoAbility		= Yes ;
  ;TriggerWhenReady	= Yes ;
End

CommandButton Command_SpellBookTaint
  Command                 = SPECIAL_POWER 
  SpecialPower            = SpecialAbilityAragornBladeMaster
  Options                 = NONE
  TextLabel               = CONTROLBAR:AndurilNew
  ButtonImage             = SBEvil_Taint
  ButtonBorderType        = ACTION 
  DescriptLabel           = CONTROLBAR:ToolTipAndurilNew
  AutoAbility			  = Yes
  PresetRange			  = 120.0
  InPalantir			  = Yes
  UnitSpecificSound = AragornVoiceAttack
End

CommandButton Command_SpecialAbilityBladeMaster
  Command                 = SPECIAL_POWER 
  SpecialPower            = SpecialAbilityAraSlam
  Options				  = NEED_TARGET_ENEMY_OBJECT
  TextLabel               = CONTROLBAR:cripslam
  CursorName			  = Bombard
  InvalidCursorName		  = GenericInvalid
  ButtonImage             = HSGloinSlam
  ButtonBorderType        = ACTION 
  DescriptLabel           = CONTROLBAR:ToolTipcripslam
  AutoAbility			  = Yes
  PresetRange			  = 120.0
  InPalantir			  = Yes
End

CommandButton Command_SpecialAbilityWordOfPower
	Command				= SPECIAL_POWER 
	SpecialPower		= SpecialAbilityAragornWave
	TextLabel			= CONTROLBAR:AragornWave
	ButtonImage			= HSGandolf_radcircle
	ButtonBorderType	= ACTION 
	DescriptLabel		= CONTROLBAR:ToolTipAragornWave
	UnitSpecificSound	= GimliModeSlayerMS
	InPalantir			= Yes
	AutoAbility			= Yes
End

CommandButton Command_SpecialAbilityElendil
  Command                 = SPECIAL_POWER 
  SpecialPower            = SpecialAbilityAragornElendil
;  Options                 = 
  TextLabel               = CONTROLBAR:BaneOfSauron
  ButtonImage             = HSAragornElendil
  ButtonBorderType        = ACTION 
  DescriptLabel           = CONTROLBAR:ToolTipBaneOfSauron
 ; UnitSpecificSound       = AragornVoiceElendil
  InPalantir			  = Yes
  AutoAbility			  = Yes
  PresetRange			  = 60.0  
End

;>>>>>>>>>>>>>>>>>>
;Aragorn CommandSet
;<<<<<<<<<<<<<<<<<<

CommandSet AragornCommandSet
	1	= Command_SpecialAbilityAthelas
	2	= Command_SpellBookTaint
	3 	= Command_SpecialAbilityBladeMaster
	4	= Command_SpecialAbilityElendil
	5	= Command_SpawnOathbreakers
	6	= Command_SpecialAbilityWordOfPower
	12 	= Command_CaptureBuilding
	13 	= Command_AttackMove
	14 	= Command_Stop
End

Object GondorAragorn
CommandSet = AragornCommandSet
End

Object GondorAragorn
	ShockwaveResistance = SHOCKWAVE_RESISTANCE_ALWAYS

	ArmorSet
		Conditions      = NONE
		Armor           = AragornArmor
		DamageFX        = NormalDamageFX
	End

	DisplayMeleeDamage = 120


	ReplaceModule ModuleTag_AragornHealing
	Behavior = AutoHealBehavior ModuleTag_AragornHealing1
		StartsActive = Yes
		HealingAmount = 130
		HealingDelay = 500
		StartHealingDelay = 8000
		HealOnlyIfNotInCombat = Yes
	End
	End

	WeaponSet
		Conditions		= WEAPONSET_HERO_MODE
		Weapon			= PRIMARY    AragornHeroSword
	End

	WeaponSet
		Conditions				= None
		Weapon					= PRIMARY AragornSwordNew
		AutoChooseSources		= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
End

;>>>>>>>
;Modules
;>>>>>>>

Object GondorAragorn

	ReplaceModule ModuleTag_AragornOathbreakersEnabler
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_aodEnabler1
		SpecialPowerTemplate = SpecialAbilityAODAragorn
		TriggeredBy = Upgrade_AragornOathbreakers
	End
	End
	ReplaceModule ModuleTag_OCLSpecialPower
	Behavior = OCLSpecialPower ModuleTag_OCLSpecialPower1
		SpecialPowerTemplate	= SpecialAbilityAODAragorn
		OCL						= OCL_GondorArmyofTheDeadEgg
		CreateLocation			= CREATE_AT_LOCATION
		StartsPaused			= Yes
		SetModelCondition		= ModelConditionState:USER_1
		SetModelConditionTime	= 8.1
	End
	End
	AddModule
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_aodaragornEnabler
		SpecialPowerTemplate = SpecialAbilityAragornWave
		TriggeredBy = Upgrade_AragornOathbreakers
	End
	End
	AddModule
	Behavior = SpecialPowerModule ModuleTag_aodaragornStarter       
		SpecialPowerTemplate      = SpecialAbilityAragornWave
		UpdateModuleStartsAttack  = Yes
		StartsPaused		  	  = Yes
	End
	End
	AddModule
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_aodaragornFireUpdate   
		SpecialPowerTemplate    = SpecialAbilityAragornWave
		WhichSpecialWeapon		= 1
		SkipContinue			= Yes

		UnpackTime              = 200 
		PackTime                = 1	
		FreezeAfterTriggerDuration = 2500 ; Hold AI for this long after we fire.
		
		AwardXPForTriggering    = 0		
		StartAbilityRange		= 300.0
		
		SpecialWeapon			= AragornWordOfPower
	End
	End
	AddModule
	Behavior = GrantUpgradeCreate ModuleTag_costumegrantnew
		UpgradeToGrant = Upgrade_GandalfWhite
	End 
	End
	AddModule
	Behavior = SubObjectsUpgrade Costume_01
		TriggeredBy		= Upgrade_GandalfWhite
		UpgradeTexture	= guaragorn_2trs.tga 0 guaragorn_rotk.tga
		RecolorHouse	= Yes
	End
	End
	AddModule
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_asEnabler
		SpecialPowerTemplate = SpecialAbilityAraSlam
		TriggeredBy = Upgrade_AragornLeadership
	End
	End
	AddModule
	Behavior = SpecialPowerModule ModuleTag_asStarter       
		SpecialPowerTemplate		= SpecialAbilityAraSlam
		UpdateModuleStartsAttack	= Yes
		StartsPaused				= Yes
		InitiateSound				= AragornVoiceAttack
	End
	End
	AddModule
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_asWeaponFireUpdate   
		SpecialPowerTemplate    = SpecialAbilityAraSlam
		SpecialWeapon			= AragornSlam
		WhichSpecialWeapon		= 1			; Corresponds to SPECIAL_WEAPON_ONE
		StartAbilityRange		= 10.0
		
		SkipContinue			= Yes
		UnpackTime				= 300		; Trigger on frame 30 (of 69)
		PackTime				= 1300		; Remaining 39 frames (of 69)
		MustFinishAbility		= Yes
	End
	End
End

;<<<<<<<<<<<<<<<<<<<<<<<<
;       Animations
;>>>>>>>>>>>>>>>>>>>>>>>>

Object GondorAragorn
	; *** ART Parameters ***
      	ReplaceModule ModuleTag_DRAW
	Draw = W3DScriptedModelDraw ModuleTag_DRAW1
		OkToChangeModelColor = Yes
	StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD

		DefaultModelConditionState
			Model               = GUAragorn_SKN
			ParticleSysBone = B_SWORDBONE WindHaze FollowBone:Yes
			ParticleSysBone = B_SWORDBONE WindSword FollowBone:Yes
		End
		
		ModelConditionState = WEAPONSET_HERO_MODE
			ParticleSysBone = B_SWORDBONE FlameHaze FollowBone:Yes 
			ParticleSysBone = B_SWORDBONE FlameSword FollowBone:Yes 
			ParticleSysBone = B_SWORDBONE WindHaze FollowBone:Yes
			ParticleSysBone = B_SWORDBONE WindSword FollowBone:Yes
		End

		ModelConditionState = USER_3
			ParticleSysBone = BAT_HEAD AragornElendill FollowBone:Yes
		End

		TransitionState				= TRANS_boredToAttention_Elendil
			Animation				= GUAragorn_ATND
				AnimationName		= GUAragorn_SKL.GUAragorn_ATND 
				AnimationMode		= ONCE
			End
			FXEvent	= Name: FX_ElendilGlowEvent
		End
		
		TransitionState				= TRANS_attentionToBored_Elendil
			Animation				= GUAragorn_ATND
				AnimationName		= GUAragorn_SKL.GUAragorn_ATND
				AnimationMode		= ONCE_BACKWARDS
			End
			FXEvent					= Name: FX_ElendilGlowEvent
			Flags					= START_FRAME_LAST
		End

		TransitionState				= TRANS_boredToAttention
			Animation				= GUAragorn_ATND
				AnimationName		= GUAragorn_SKL.GUAragorn_ATND 
				AnimationMode		= ONCE
			End
		End
		
		TransitionState				= TRANS_attentionToBored
			Animation				= GUAragorn_ATND
				AnimationName		= GUAragorn_SKL.GUAragorn_ATND
				AnimationMode		= ONCE_BACKWARDS
			End
			Flags					= START_FRAME_LAST
		End

	; --- Idle Anims
		IdleAnimationState
			StateName				= STATE_bored
			
			Animation				= GUAragorn_IDLE		;no_fidget
				AnimationName		= GUAragorn_SKL.GUAragorn_IDLE
				AnimationMode		= ONCE
				AnimationPriority	= 12
			End
			
			Animation				= GUAragorn_IDLF		;fidget
				AnimationName		= GUAragorn_SKL.GUAragorn_IDLF
				AnimationMode		= ONCE
				AnimationPriority	= 1
			End
			
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if	Prev == "STATE_attention" or
					Prev == "STATE_running" or
					Prev == "OATH_BREAKERS" then CurDrawableSetTransitionAnimState("TRANS_attentionToBored") end
			EndScript
		End
		
		AnimationState			= THROWN_PROJECTILE
			Animation			= FLYA
				AnimationName	= GUAragorn_SKL.GUAragorn_FLYA
				AnimationMode	= LOOP
			End
		End
		
		AnimationState			= STUNNED_FLAILING
			Animation			= FLYA
				AnimationName	= GUAragorn_SKL.GUAragorn_FLYA
				AnimationMode	= LOOP
			End
		End
		
		AnimationState 			= DYING SPLATTED
			Animation 		= Splatted_On_Ground
				AnimationName	= GUAragorn_SKL.GUAragorn_LNDA
				AnimationMode	= ONCE
			End
			EnteringStateFX		= FX_SoldierHitGround
		End
		
		; --- Dying anims
		AnimationState				= DYING
			Animation				= GUAragorn_DIEA
				AnimationName		= GUAragorn_SKL.GUAragorn_DIEA
				AnimationMode		= ONCE
			End
			Animation				= GUAragorn_DIEB
				AnimationName		= GUAragorn_SKL.GUAragorn_DIEB
				AnimationMode		= ONCE
			End
		End
		
		AnimationState				= STUNNED_STANDING_UP
			Animation				= GUAragorn_GTPB
				AnimationName		= GUAragorn_SKL.GUAragorn_GTPB
				AnimationMode		= ONCE
				AnimationSpeedFactorRange = 1.5 1.5
			End
		End

		AnimationState			= STUNNED
			Animation			= LNDA
				AnimationName	= GUAragorn_SKL.GUAragorn_LNDA
				AnimationMode	= ONCE
			End
			EnteringStateFX		= FX_SoldierHitGround
		End	
	
	

	; --- Attacking Anims [Weapon_A]
	
	
	
		AnimationState        = MOVING FIRING_OR_PREATTACK_A
			ShareAnimation		= Yes
			Animation           = RunAndFire
				AnimationName       = GUAragorn_SKL.GUAragorn_ATRA
				AnimationMode       = LOOP
			End
			Flags               = RANDOMSTART  
		End
		
		AnimationState				= FIRING_OR_PREATTACK_A WEAPONSET_HERO_MODE ; Blademaster Mode
			StateName				= STATE_ready
			Animation				= ATKF
				AnimationName		= GUAragorn_SKL.GUAragorn_ATKF
				AnimationMode		= ONCE
				UseWeaponTiming		= Yes
			End
			Flags					= RESTART_ANIM_WHEN_COMPLETE
			FXEvent	= Frame:25 Name: FX_BladeMasterHitOrient
			FXEvent	= Frame:45 Name: FX_BladeMasterHitOrient
		End

		AnimationState				= FIRING_OR_PREATTACK_A
			StateName				= STATE_ready
			Animation				= ATKD
				AnimationName		= GUAragorn_SKL.GUAragorn_ATKD
				AnimationMode		= ONCE
				UseWeaponTiming		= Yes
				AnimationPriority	= 3
			End
			Animation				= ATKE
				AnimationName		= GUAragorn_SKL.GUAragorn_ATKE
				AnimationMode		= ONCE
				UseWeaponTiming		= Yes
				AnimationPriority	= 2
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End
		
		
		
		
		

	; --- Moving Anims	
		AnimationState				= MOVING
			StateName				= STATE_running
			
			Animation				= GUAragorn_RUNB
				AnimationName		= GUAragorn_SKL.GUAragorn_RUNB
				AnimationMode		= LOOP
			End
		End

		AnimationState				= LEVELED	; This state clears itself in 3 seconds
			Animation				= LevelUp
				AnimationName		= GUAragorn_SKL.GUAragorn_ATKO
				AnimationMode		= ONCE
			End
		End

		AnimationState				= SPECIAL_POWER_1							; Aragorn shouting Elendil anim
			StateName				= STATE_ready
			Animation				= GUAragorn_ATKL
				AnimationName		= GUAragorn_SKL.GUAragorn_ATKL
				AnimationMode		= ONCE
			End
			ParticleSysBone			= B_SWORDBONE ElendilFlare FollowBone:yes
			ParticleSysBone			= B_SWORDBONE ElendilSwordFlare FollowBone:yes
;			FXEvent	= Name: FX_ElendilGlowEvent
		End
		
		AnimationState				= USER_2
			StateName				= ATHELAS
			Animation				= ATKP
				AnimationName		= GUAragorn_SKL.GUAragorn_ATKP
				AnimationMode		= ONCE
			End
		End
		
		AnimationState				= USER_1
			StateName				= OATH_BREAKERS
			Animation				= ATKN
				AnimationName		= GUAragorn_SKL.GUAragorn_CHRB
				AnimationMode		= ONCE
			End
		End
		
		
		
	; --------- Click and Hit Reactions ------------

		AnimationState				= HIT_REACTION HIT_LEVEL_3
			StateName				= STATE_bored
			Animation				= Hit_Level_1_b
				AnimationName		= GUAragorn_SKL.GUAragorn_HITB
				AnimationMode		= ONCE
			End
		End
		
	;----Emotion Animations

		AnimationState				= EMOTION_CELEBRATING
			StateName				= STATE_ready
			Animation				= CHRB
				AnimationName		= GUAragorn_SKL.GUAragorn_CHRB
				AnimationMode		= ONCE
				AnimationPriority	= 1
			End
			Flags					= RESTART_ANIM_WHEN_COMPLETE				
		End
		
		AnimationState				= EMOTION_ALERT
			StateName				= STATE_ready
			Animation				= IDLA
				AnimationName		= GUAragorn_SKL.GUAragorn_IDLA
				AnimationMode		= ONCE
				AnimationPriority	= 1
			End
		End

		AnimationState				= EMOTION_MORALE_HIGH
			StateName				= STATE_ready
			Animation				= ATKN
				AnimationName		= GUAragorn_SKL.GUAragorn_ATKN
				AnimationMode		= ONCE
				AnimationPriority	= 1
			End
			Animation				= ATKP
				AnimationName		= GUAragorn_SKL.GUAragorn_ATKP
				AnimationMode		= ONCE
				AnimationPriority	= 15
			End
			Animation				= TNTC
				AnimationName		= GUAragorn_SKL.GUAragorn_TNTD
				AnimationMode		= ONCE
				AnimationPriority	= 30
			End
			Animation				= TNTD
				AnimationName		= GUAragorn_SKL.GUAragorn_TNTD
				AnimationMode		= ONCE
				AnimationPriority	= 30
			End
			Flags					= RESTART_ANIM_WHEN_COMPLETE				
		End
		
		AnimationState				= ENGAGED
			StateName				= STATE_ready
			Animation				= IDLA
				AnimationName		= GUAragorn_SKL.GUAragorn_IDLA
				AnimationMode		= ONCE
				UseWeaponTiming		= Yes
				AnimationPriority	= 1
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End

		AnimationState				= SELECTED
			StateName				= STATE_attention
			Animation				= ATNE
				AnimationName		= GUAragorn_SKL.GUAragorn_ATNE
				AnimationMode		= LOOP
				AnimationBlendTime	= 5
				AnimationMustCompleteBlend = yes
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_bored" then CurDrawableSetTransitionAnimState("TRANS_boredToAttention") end
			EndScript
		End
End
End
End